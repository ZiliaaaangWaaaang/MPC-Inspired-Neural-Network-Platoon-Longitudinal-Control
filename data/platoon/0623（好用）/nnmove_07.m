function [Y,Xf,Af] = nnmove_07(X,~,~)
%NNMOVE_07 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:03:56.
% 
% [Y] = nnmove_07(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-13.2925490923537;-6.70139767883548;-1.99738196042707];
x1_step1.gain = [0.0638195875959219;0.168202204644631;0.502184479042526];
x1_step1.ymin = -1;

% Layer 1
b1 = [-3.8106492607934834282;-3.4515786207966425714;3.084399751960992031;-2.2879673852299835524;-2.1122826243435874893;-1.2923793448361047265;-1.4609478942152800407;0.93563077054100940444;0.28705534615314076685;-0.24959099172227594554;-0.28698952864529808648;0.26396005999317245783;-1.051337462342620821;-1.6449741867981915178;-1.6979803741117953653;2.0554373516196178251;3.1812311196202167629;3.123500210653226361;-3.4255000579224743618;-3.5375796922333919703];
IW1_1 = [2.8190715860433863682 -2.1268926635131095715 -1.3234052821184763005;0.14734724267036677925 -3.2290205581450499572 2.2504788048668142864;-3.3910041355389384243 0.53336823670267285991 1.4594701903259663656;0.34640039935436667262 3.9021940113964435071 1.1016372804614804615;1.9068864517161907557 -2.8930373232695618668 1.8878820355773726636;0.12878124351872363706 -3.955316616250241335 -0.64077151752228567183;2.2360321249764876228 1.4756764877133712321 2.7045910767933261099;-3.806361787049088008 -1.7893513828652807263 0.54978425431044086746;-3.7747573230215474283 1.4021971624528193345 1.3552825873023226499;2.2306912533774481133 -2.9938916525289558379 0.86594805526603846335;-2.5998151572506129625 -1.644594835211503403 2.1745096640383434483;1.6951698449652776723 -3.3015566966307510199 -0.39019111781293924768;-2.5533521759182118416 -0.38957480881710804255 -2.7357858948974058677;-1.2817975357381274915 0.77517846071558937915 3.3249616417239855615;-1.4483804288988777476 0.87231353020563695555 -3.4379640240578077659;1.0888039554369468576 3.8786924936734838987 -0.66177458660777710442;0.03385927073529850645 -0.64473958286753518809 3.28280010834306335;0.8059090998723908994 2.7076290147847368317 -2.4863446211434396815;-0.69832612532545290662 -3.4806877453684226253 -1.3182234974893940471;-1.9350584190946797936 2.2475795137303293814 -2.5765414804256181469];

% Layer 2
b2 = [1.5847670354932301695;-1.2103100424399555468;0.77433103921079082799;-0.53308680197132041201;-0.27301431186472269186;-0.074613148532349099495;0.54762895907461606182;0.90351130887438424466;-1.1389863112630109754;-1.765735190657667486];
LW2_1 = [-0.57992841638773529045 -0.46036155124607180955 -0.1395704516441914067 0.12657215737921184706 -0.16816745217250100852 -0.071873909804823749026 -0.11305190584591284786 0.14323168106501946162 -0.50389344656553824997 0.020223521296536300235 0.38979702396522136754 -0.30254565936456373487 0.30994570652419767276 -0.20043766019963979441 -0.65484189788359592477 0.084145846499160667498 -0.63701905023569382891 0.67975387261237341097 -0.11810062610990820775 0.045388362837498814895;0.62211495853881770834 0.2113350443872999973 -0.022435476433511243599 -0.79552436802146242467 -0.052810799542230578429 -0.15555943006945791018 0.43149570200139919507 1.293742357781426211 0.23496629449339057061 -0.12067933768734614985 -0.68056491240952243782 0.095271671403560728719 -0.20089909844495601465 0.27089659798901188914 -0.14725297138841214606 0.23150806779039290184 -0.8068389736665035894 0.74004295132558584047 0.15780703872564727508 0.25761108811878863367;-0.48322938040929991343 -0.25330936017068805821 -0.3862950350271814326 -0.027910132301477891953 0.39973693076901056775 -0.12203589462882104277 -0.87897355112733499549 -0.48135866971143109749 -0.33374294997306780397 -0.12281627739376076158 0.25536795293757780234 0.28587938967835641035 -0.07377095769141134296 0.2800992041878059835 -0.036872322996793271965 0.37361141204190434495 0.19928150003024661108 -0.58770191781340674897 0.40174262638809121739 -0.22416400385351448188;0.60951991256743021097 -0.692276396433864738 -0.56635984015880147524 0.27117972113733929129 -0.23215399763473648642 0.08551141817975702053 -0.26920940894241568442 0.4173409685054125795 0.36060163295926844773 0.42128918763712386308 0.15935298365297312362 0.012023043681554920759 -0.14811456670592743068 -0.0628147328916193598 -0.096559606140374121264 -0.3093717876761666874 -0.5245005682960107718 0.067409670163104645768 -0.0019944305545907363431 -0.48545911478541037276;0.25445509353041012579 0.79553289635250801215 0.14640599865976369753 -0.52117820900837663611 -0.36114555602598807926 -0.11145225683284343265 0.10065796999954912394 0.28543980814909730714 -0.59609055482550865612 -0.10333542556577408889 0.38372501090640431798 0.13622214354647307899 -0.30283679304990435144 -0.046379701882344803732 -0.16406810786518441492 -0.78950129407895586198 0.59884852304587365968 -0.24707804109519904134 -0.087100549525202949908 0.34682007580979107297;-0.16438467984552498913 -0.27053481398521156409 0.16305406274295308755 0.19901281420911029474 0.15328817814246681328 -0.36134458728675689088 -0.8679519245321140053 -0.49502692850899476795 1.8279108799395438201 0.75753435081829856301 -0.040351360125969598647 0.45149091807042518454 0.063771430127779443753 0.25158918452222234219 0.096416216832967499561 0.054768637491048571819 0.31270203568808385697 0.30230093203726138285 -0.020510164146854158174 0.39594344217495724969;0.62718209136452685026 0.30571198218993922424 0.30643823417745402748 -0.74595192747734118122 -0.50233973755274308193 0.50932028951053887056 -0.45613293678917032903 -0.21991119338219022872 -0.43201279371586492895 0.18979101453668190125 -0.28133272129693914776 -0.26487478606009712268 -0.36871959660677233739 0.3511589475399490845 -0.16928009460120535534 -0.64392165970827475174 0.56983292298127052877 0.049678860434708815852 0.18334219812011307016 -0.02522334353383653624;0.085325272513265118524 0.57920237009844577347 -0.36539425005234910104 -0.15444274348677841657 0.030157141315828292494 0.069499682599886508649 0.32497788455867454571 0.45534403983199184252 0.35584345555454088839 -0.13747099271647636454 -0.1512248713870389949 -0.4862288934816285102 -0.24161292551984894783 -0.04212789143732201258 0.23999898336508596053 -0.38899491967645583035 -0.21997082066885528806 -0.6513898399217790125 -0.6517165849106797415 0.51939765899735823584;-0.2463111000685298535 -0.45300579556591835662 -0.021836815541318489037 -0.69304205301070587186 0.51621509127101194991 -0.92969233896860559163 -0.22772004978322252233 -0.31468753943361349457 -0.23076444757242617345 0.065077679488639628147 -0.2271429673038042607 -0.13709712448832914178 -0.28140068529915457374 0.23527264469142833425 -0.40100501317959730274 0.79208741690500339416 0.07750661355864327251 0.14434278322972260433 0.33058866861926977654 0.24145666663540424346;-0.27703485829088264625 -0.10192707269910228352 0.21028117364626033869 0.81179330791786619148 -0.066472727825573521554 -0.38359655308497170312 0.015736066977758127877 0.1812556187658820317 -0.34836007509883437638 -0.3856215517262558401 0.34978167240323998488 -0.54578133342851220533 0.10777981129529694282 0.059438788203224152129 0.29141447744445608814 0.073903431864770219306 0.7099222825468290976 -0.48210648435106084886 -0.011929466550027856275 -0.084247490849936129687];

% Layer 3
b3 = [-1.8237499957258078709;-1.910080621191830641;-1.5316318486977036351;1.1905948891678148627;-1.1889610075028786973;-0.9310464900998106641;0.71430131769674654052;-0.6515068479898414866;0.41294773593947053936;-0.03717423350901643414;0.25389988945739694337;0.29410541340208196104;0.40422990323088148212;-0.71853741807505044914;-0.96018641124689130262;1.1519240908578745053;-1.3573076239258690112;-1.5719976435530607084;1.7123198446902645475;-1.884564040633489812];
LW3_2 = [0.91454711428141644003 0.67232551257801764777 -0.5590819430914014676 -0.19685262379711737646 0.52410332580510798905 -0.56771665249782088392 -0.8265366174763187912 0.2980471584327802903 -0.84968918287574257686 -0.71209245681044719412;0.40090078351736979645 0.9038847388056173715 -0.061699448489621090685 0.13234349598539374426 -0.63892016348347924204 -0.44925742007178764981 -0.51960839081086140911 -0.5029856408371650156 0.43647557050506502474 -0.65536470568131277581;0.57180154089911183757 -0.19839168268249565696 -0.62577371760345246177 -0.88831215811134600635 -0.53791080820051484501 -0.3020988059949064608 -1.0181560050270592743 -0.097691577245578031796 -0.77672910647115644966 -0.021816713559362301;-0.49397801709443817098 -0.83203287527495628506 -0.93088481683695833979 -0.2753496003577731166 -0.54208893116109091448 -0.51973320687392476902 0.36354189369664424714 0.45718244007930292083 0.33564381171587998054 0.94291341321222776894;0.8326063336842850493 0.49271801787268698636 0.62065572796111556642 0.035647546835949658894 0.97724474203274291906 0.11381205699521855512 -0.79150626430396564537 0.4729940735055175316 0.51106655205841511336 0.78889240333162335972;0.27476044358292778247 -0.45173577167637263274 -0.14891745699719463603 0.77916898492022734768 -0.67679488244492835847 -0.013764169372801520266 -0.86494276320656549029 -0.70114097062839675356 0.72541564557070425945 0.63217331925471376142;-0.54040887128554271346 -0.6767564702417681044 -0.42818447580242557926 -0.17242901218485490178 -0.87020819444835373346 -0.8515258939794078108 -0.053865219301253382256 0.50390418091107547216 -0.12578448480869411363 -0.92781027609471988793;0.69961955540764497741 -0.64860462266634977269 0.26444786795465652363 0.60830122801539543431 -0.25041381782031130188 -0.97126843419276931435 0.48143048284519723845 0.14914546729066419095 -0.8103259208092356003 0.68310473521302084166;-0.27705551204865974668 -1.4405222808781295019 0.70962734961375140141 -0.84121165761476457412 -0.70624239329988103275 -0.62699163635529164829 0.35268911580506712156 -0.67917136531894661822 0.17598079004113811874 -0.44284529230498914654;0.89400165934208442042 -0.008498803255057741507 -0.87413519069901446379 0.12637112386836521494 0.82368078265707100893 0.60420848819962547083 0.31081469041211340354 -0.45282243685342238315 -0.34030800101061109419 0.54634415905721189777;0.42267306918458941167 0.70244763974160495668 -0.52245618033584306783 0.24725483095165307068 0.56448678003772789769 0.54161547225166262187 1.1032739018858994662 -0.66460171960498992672 -0.88819305627161104777 -0.15607408899304897609;0.2159015110897814782 0.15104881716189269558 -0.59211594043292548051 -0.00040564073493761301781 0.38486834169828082475 -0.060875659498436103523 1.1615723669341215807 0.76568528425421833461 -0.41978456214171716576 1.0563687131698471511;0.65163902576778787168 0.096211732679444925131 -0.40936987605180452654 0.67455488622610904059 0.77379450408082117718 0.80088095973526185478 0.57580725074097738325 0.92088239199723120887 0.36461828024865383657 -0.37038171589704732556;-0.54598937444136119712 0.39652897923991475837 -0.44900942837358631676 0.48435033837642033072 -0.94094680455971213551 -0.13694236994477065883 -0.8684917829091655106 -0.87979055371737535651 0.004428725714514207025 0.46915565426637034774;-0.14205313523272156129 1.0281441063247531709 0.7133470301311388706 -0.33405630530800933808 0.59860438755692613189 -0.98715873896395855969 0.74716563744429254079 0.051804048242314215678 -0.3287450531806760945 0.57722021620896790672;-0.056728799076946417879 0.61310354174507897262 0.98880970624674335845 0.2329295471246642657 0.089593750327924437382 -0.76009209237288521965 -0.83638414562333740498 0.83070379286364692817 -0.34746692508059617843 0.25481159566466426991;-0.31125386480892708319 -0.84205158164619720029 0.36761468008470893354 -0.24107024209145214155 -0.11470496214981414085 -0.10015137435637082308 0.69288404951207571703 0.42428981337973598054 0.83910993012967172167 0.9952489282458441;-0.58316708869143885074 0.38020793399318808525 0.067626858261196853839 -0.96284514464087966878 0.61566769532359200134 1.5678371730226450254 0.64475314261597249654 -0.075636650650557052389 -0.6260234609541355244 0.60973436414035186992;0.61860605743937380208 -0.42480866948004736283 0.68731992550457465807 0.98239487056986474212 0.30953866500590027089 0.54739591146692656576 -0.16207287286630905898 0.47275814250908132497 0.58921987892012961385 0.66572531019391611995;-0.6154325629234133066 0.70106034247100534884 -0.050311760890173778948 0.2583724620535330363 0.058518730625166930082 0.65286304996029997927 0.98258086642723108106 -0.093094900249764883648 -0.75515597366849773753 0.81145353072936721173];

% Layer 4
b4 = 0.18395853010204488154;
LW4_3 = [-0.32977061440863786324 0.10629167429603048056 0.35400003879069008583 0.26224782010837327517 1.1092069156500969918 -0.015623432796637665154 -0.21922945487915679319 0.65904007632872585454 1.0078044678193023298 -0.35615950934434453812 -0.89658858024943022258 -0.38425564653298854845 0.64095884077426901193 0.027253253501158931915 0.8210126108099768949 -0.35641180852981968474 0.19672397217599477126 -1.3367323028110980054 -0.36552337448546112775 -0.022159823757293296148];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999945;
y1_step1.xoffset = -2.00000000000019;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
