function [Y,Xf,Af] = nnmove_08(X,~,~)
%NNMOVE_08 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:03:57.
% 
% [Y] = nnmove_08(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-13.2925490923537;-6.70139767883548;-1.99738196042707];
x1_step1.gain = [0.0638195875959219;0.168202204644631;0.502184479042526];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.3558117955335000637;3.5650661536550249942;2.9094426037020792997;2.5427400201058176776;-2.920343970271759737;1.584068062411008615;0.032033097713992202127;0.90366586867078202427;1.1785316830042622538;-0.57432171608435866883;0.98833500818396868848;-0.56300853169223041839;0.94286589825643651874;2.2499845842305057353;-1.5953880896974699244;2.2026645811485963122;3.1669534503522474012;3.1260151147848551645;-3.5882064004241707167;-3.982291806243148713];
IW1_1 = [-1.3618800618768316379 -3.4337202024241459952 -1.852297189112035003;-2.2355080891121366093 2.5594330640359608253 -1.2447343735662002029;-2.1770798389714589582 -1.4756656026789232161 -2.7702914710249895158;-2.2935445907393945397 2.8958490048953460239 -1.5867112465867931892;0.9842168938847327686 2.4569054511280552511 -2.2100467275098707454;-3.0311950237223164173 2.5723703440387040153 -0.777855125776594436;-0.85624703216804587402 -2.6820270594154167476 -3.483821460986488816;-2.6809122082342344839 2.3837413686359969489 -1.8073907282950354425;-0.60615775717969377911 -0.11999129776074037024 3.4498295387696260583;2.6254325028373575179 0.91422627083075247434 -2.7326131070924426503;2.6539377715985135175 2.012281230669052956 -2.1579642220968087152;-2.00778932672774868 -2.8623304822094488564 -2.2788780512733692873;1.3841760368115738622 2.8454783882113097171 2.291633150006552988;3.0137896062798552599 1.2436070539139152391 -1.7097486788033207095;-2.740832673093875016 -0.29679693758813902038 2.915781668469808352;-0.15851541286948309106 -3.8716423934364105897 0.55090653143033985195;3.4666224426617602283 -0.077209086927238532172 -0.72906095522487224247;0.9462551668254850501 -2.4962502148631902088 2.8288065901175949435;-4.1028206306354872979 0.007542474610046864987 0.32093854007272515361;-2.8411767571304498148 0.62791814286259173272 -2.2614742769386717569];

% Layer 2
b2 = [1.5819128030925200257;1.1966735311357530325;0.72754217556380440524;0.92127883995147197282;-0.081396702165937473428;-0.1213903584636810834;-0.27648601852138082746;0.77981272616075369974;-1.4550445942207141936;-1.6378110216529968568];
LW2_1 = [-0.20984631503443135214 0.070290601177736888872 -0.21389301768759458322 -0.34896089070383057296 -0.027496945832480162997 0.03958279942235820581 0.16759734404118761808 0.24023827842127332133 0.19025681239874836503 -0.5723262582447122826 -0.46530921913927841826 0.7119246401700382032 -0.12111126300974636716 -0.69585601774882110959 -0.21185781619301052858 0.49804723762402347553 0.34651070633616459782 0.28073833669071635022 -0.19039891093930019772 1.5803918923294053567;-0.060613307055054826966 -0.069970942916567219205 -0.14398213804537948746 -0.83713148440775964065 -0.39354412522563386734 -0.37086843087764298499 -0.42898633339317493451 0.24822141503284042563 -0.83563694671161314886 -0.018278595753378465427 -0.65951750548498477844 -0.90889779234206757863 1.0181689971936955796 0.26513875279568605015 -0.32199935481175806506 1.1821617488351747749 -0.1298584432608289041 -0.6806426102668424738 0.61359213651288979641 -1.2188094777765974275;-0.8506760320651763907 0.40907177855486831497 -0.41166947993712138532 0.53629375705817239339 -0.6559618865494194484 -0.31141481928000674939 -0.051082159606494419168 -0.25257790587676864913 0.10429636628931891751 -0.14627715652549647118 -0.78537395163893286565 -0.40936526082319557585 0.61486441290692761541 1.1498227808642580428 -0.30214521813386235882 -0.18959430092282583691 0.17382823469431579744 -0.10858187732372037715 -0.36445165258061767988 0.68617774114672203112;0.40089368590386303959 -0.060364512941695085135 0.68774901779832464666 0.21204543358560123956 0.043476349204162573203 0.47014636519472391418 1.0842665619212716877 -0.0041536628317317188935 0.57588514806227109055 -0.87914100732007438577 -0.46572590978336236844 -0.37351242548221691431 1.0073073199790556487 -0.60885199843384640861 0.63988309366703843839 0.53894386787134107575 0.59435354540367946186 -0.80973596211375920007 0.1572112782299792122 0.40697870291943261112;-0.14418796476080505964 0.045017460228638395137 -0.20340541901534867075 0.27933208782566398831 0.10153748628423790723 -0.82672817449740398921 0.91072872977177088405 0.50364978063577814371 -0.29078279932397810281 0.16538661592099229702 0.40992821765693554514 0.035852788255504572379 -0.82026216987692923688 0.85721790517543394738 -0.1692327469978134602 0.050579099482122087672 0.38348541213215658896 0.22715215208273026315 0.24602828598953696559 -0.28019114340223949533;-0.051717350699009158321 0.32634037724139380865 -0.076844126141340937663 0.23245802771659174191 0.54616933808960710373 -0.38579414651078747234 -0.87207285757255326164 -0.29397934878685205717 -0.37860644269903237502 -0.65351392620042969561 0.1449899679941475672 -0.74977723363448078864 0.63812403022059605018 -0.019130691261705894818 0.78962803429542538503 -0.1969674958684803634 -0.43230057547375499993 -0.46416013279265544433 -0.25606173255582048709 0.1794631175951436064;-0.028838100282323714946 -0.12576766410677522878 1.2356427821082436314 0.84240317154758703744 -0.10257677149717697729 0.90761476268999130568 -0.11540255708102407917 -0.61283512661205641336 -0.3158550397998921011 -0.38779505685625387246 0.86164737491637088951 0.65085499795575685322 -0.29018800552646789592 -1.1154928249412217056 -0.66686494136624341333 -0.36808693980975731863 0.26253822260274811695 0.12814738441358411447 -1.0184912811505586472 -0.21539148875328975596;0.77540413755871340218 -0.052447015897832252596 0.18385064501883521815 0.72883646559011205923 0.5777549885704693633 0.022783113383868999757 1.1774743079259857303 -1.249207276190050786 -0.42441861814146480958 0.034917689372645506485 -0.69648674826366341328 0.31351864910337834402 -0.77449991327879019742 0.85167540991524104399 -0.51172069452056290206 -0.22807425913475784518 0.0011937131525437631036 -0.096018577413168076928 0.12953822129861702894 -0.57154234714735951961;-0.30049546054779652238 0.018603826845218621178 -0.082779387771758250469 -0.017898686646888217061 -0.040192579164961370064 -0.15221966872220080158 -0.044200210709625174788 -0.71686053029203933296 -0.29380024172180374542 0.069205480748884620756 0.17761935196662856362 -0.52085376117577197874 -0.19572929596181537493 -0.6161762343279298948 -0.39456367261831792881 -0.64475315826194168345 -0.16018027293718001269 0.29830482710817435299 0.7474831401560902977 0.039602725295448615306;-0.38876391602141641135 -0.098574521189841543545 0.042913789838459989734 -0.051449320777989991649 0.81341163953532336084 -0.44500168576949761245 0.53160292888759619334 0.013176928513729077586 -0.44027181868326281666 -0.21651146953450778332 -0.1116542413186165511 0.73047745892298032722 0.58812014982430182997 -0.43985892281759864098 -0.21090981606736933229 -0.022774216596199596541 -0.72220228762308158466 -0.44675539422925486521 1.3688405949479724999 0.4678255258000801331];

% Layer 3
b3 = [1.5822101888619557464;1.5935863965436316558;1.5362668355494084604;-1.2815321249197766384;-1.3092801793132100574;0.81345166428357540411;0.70106729730155403768;0.46753209834144748847;0.3543143718868103087;-0.14359469920616818595;-0.12661951510393557041;-0.32837551036945750171;-0.84473845230685118413;-0.41001861238978248858;0.83565142207404585761;-0.97109309596637372053;-1.5088816728408751544;1.593841486921816708;1.9372754506981235689;2.0426151788982611635];
LW3_2 = [-1.0521858308822795713 0.023578712526353698409 -0.51561950184325389124 -1.1926265308074721627 -0.55638897491113026295 0.37380402632781511985 0.900224094183817658 0.030295921810665631807 1.0362245513046459688 -0.14658349616048718667;-0.3044966706667725509 -0.7342678389279453377 -0.23920282524990205131 0.92015908793427281243 0.58038130111169849989 0.54614812600413964461 0.5991815822249891843 0.0446320061101450824 -0.86746538516762605742 -0.55952658693989365535;-0.44621328513449859399 0.6082248222429054163 0.69993986432734411895 -0.51274968534178522184 0.59498653733976458735 0.3184175361344803723 -0.14793436419847896812 -0.45095192549769691492 -0.53388264042358379857 -0.90292911355251825878;0.7768098883146734579 -0.77391636384238493562 0.97156619234418406528 0.75632163036798216726 -0.27243542070446141734 0.4933899015037855329 0.12842449803903763228 -0.7965842839711586576 0.20989850355024214368 0.79804675701717253666;-0.098737486768454424402 -0.0014309602477817679779 0.37454433944873133377 -0.93327012515060969733 -1.0183254258539713444 0.040703608733087079385 -0.94466116101331010224 -0.64208076986864170976 0.27092103736600930963 0.16221302759807840199;-1.3943101881352795157 1.2591468243297878615 0.16256489603460960724 -0.021161467753771291689 0.031866439228704947217 0.10414411521117153403 -0.37618527737664136934 0.28598738809599733024 1.2602570007440276889 -0.50594676651064895978;-0.38553395994317807283 -0.031074036632277805825 -0.82894109467741627917 0.28653642265780149279 0.42501771063400545225 -0.14758960153723302278 0.9696104044807332123 1.2766570090428521755 -1.0356794853217921037 -0.073940512518406401044;-0.64468052968832578742 0.10172478503284078377 0.12024718459775718404 0.60291567873976170677 0.95113981128724434111 -0.52335664656139180284 0.28594069342283390256 0.57504838287927084739 0.81472932773574846532 -0.68325289733991168006;-0.46651757470580662579 0.13780409353457462318 -0.086869840813790344392 0.36509673561415989518 0.006202079303341131826 -1.2349308363265563138 -0.47749077236800552271 0.67309009476222270152 0.34959643581835414539 0.13989599246736536542;-0.16326100596925227637 -1.5330848781555965754 -1.352361380450505246 -0.92608162004931493527 -0.52502762426935722928 0.11386598740499395688 -0.86079313374487009813 0.062818121020167816404 0.013322725513649944298 -0.28570018101678362754;-0.179280884558675635 0.50475339301142807535 0.45374963757768421724 -0.77611596624835788027 0.14089343684353153319 -0.44909810368544061943 1.569200383329951709 0.86159255586047667208 -0.64598039437250975858 -0.44289328920472043061;-0.37560432389650921792 -0.55332398292599327405 -0.5805197117098573889 1.201176846974166823 -1.2064018422316129531 0.13157281197182324473 0.50104051839880581198 -0.14606825042060134212 0.54434685213837008533 -0.042705986655927660745;0.26631339736281522956 0.82809172695042665424 1.2313507414134372553 -0.13251981815395177944 -0.95392421872370769531 -0.34777663349524506886 -0.077656939640254288304 0.13783113282089926033 0.78042667214886363158 -0.059574856148648380749;0.15319795414768827557 -0.66658453203535250609 0.24510612105014598083 1.0116318680391631624 0.76504312918979644476 -0.61418255504544116974 -0.39586791899829809616 0.2221019414426882721 -0.33965753419736055552 -1.1492969360342515373;0.43902796963376417017 0.81873014304037239341 0.46088366524809670777 0.79211139587983447896 0.68311596244981487303 0.20338757843464330688 0.74817671791771545031 -0.45693615527426117984 -0.75382899297055849797 -0.18902788567289713351;-1.0845612752824291825 -0.46667740033028470847 -0.30577383866949903179 0.83151154828595941204 -0.70032538902305951911 0.58281945539579382842 0.31606226983453178381 -0.43909784805831370003 0.30729900788030112269 0.68649050796889177217;-0.43244685547625189015 -0.14151639248244804459 -0.24957958498295598759 0.37416708413616023288 -0.37192463722879859356 -0.56767714868301744069 -0.31900245518342945639 -1.2202835998580627841 0.26712788057863973146 0.55506345061692152765;0.27553551978586959814 -0.61762239666772422719 -0.22672751899817372712 -0.33548940891273182352 -0.6132662756377554869 0.60746624420984363102 0.97619706431919217593 -0.61003011363421355551 0.40098226992899055343 0.7958439057373665193;0.19965082241634654614 0.15320832510547577332 -0.70465187627785519364 -0.59435918476238003283 0.31826835315531554205 -0.42640171498212925405 1.1499085749478821228 0.57697412489512678313 -0.14625178579335662565 0.3038674840930871146;0.89394876106240228619 -0.80774153439644114094 -0.16948861835057418834 -0.73465248402997651578 0.95416720408769895023 0.48792981372632515669 0.24672590887337800258 0.085527010651766405269 -0.04167785879067130439 -0.56305093024829822035];

% Layer 4
b4 = 0.075749284079577455797;
LW4_3 = [0.47044221668949171011 -0.31198796304786974298 0.19879832588834403517 0.7215421380801803064 -0.10270858209270604389 0.83498845323655945805 -0.85500213853115847318 0.89244949853575705756 0.37061605098951411197 -1.372388796461072813 -0.8263505244893387669 -0.66541397976757299393 -0.3299393268184106498 -0.13354618434032203278 0.37582283148705530884 0.34433384638088238017 -0.41190161447377310333 0.46037808930166362886 -0.60381176351297438654 -0.41745798343186990564];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999945;
y1_step1.xoffset = -2.00000000000019;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
