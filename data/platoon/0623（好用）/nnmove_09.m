function [Y,Xf,Af] = nnmove_09(X,~,~)
%NNMOVE_09 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:03:58.
% 
% [Y] = nnmove_09(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-13.2925490923537;-6.70139767883548;-1.99738196042707];
x1_step1.gain = [0.0638195875959219;0.168202204644631;0.502184479042526];
x1_step1.ymin = -1;

% Layer 1
b1 = [-3.8859434954373748283;-3.5030861613342372252;-3.0016934635247682905;-2.7949243204438909416;2.5505038396347758933;-2.5262681057149016794;1.1566970391394397755;-0.54310914518326169897;0.49931179436532230342;-0.19795674362908252664;0.86085096757790124933;0.38904841065857637128;1.4879178220724962323;2.7475343257792874674;-2.5194837108955403515;-2.3535250546147032935;3.0175003992189055602;-3.1471635498526691066;-3.4510721955499237268;4.1307567837213587936];
IW1_1 = [2.682051724918919966 -1.7147536024733927018 -1.9910305437546143015;1.7769053542647457178 -2.0287272066604455922 -2.4976485536099510831;2.0287739729093408059 -2.3437768947692179111 -2.2326836187553751323;1.5438252043102671518 -0.6972403548430903264 3.0711090061629566783;-1.6000898134032490727 2.8570741226667797363 1.7437719869009336016;3.7186503954935958838 0.73788769688005773073 -0.81209748565529604747;-4.8420449218970951222 0.63269000873241942884 -0.93030299652231362995;2.1745773446894940406 0.45931417235904398177 3.4987671939446385316;-1.8420735197491515667 -3.258780272286884383 1.2962339595333915998;2.3159235351303899542 -1.8018277271835745346 2.2460062969740066663;-1.2020784783977001009 -1.3910159859797275317 -3.2777656717675016651;2.32069494512081409 0.88495102486665577768 -3.0547832758742328174;2.0591661012440614087 -0.59593947699960736486 2.5472857930988923592;4.9321215073798949646 1.1880232678509086153 1.4476617378056308993;-2.0110222593007107683 1.8122865321191681254 2.1321894278237651932;-2.9745114406456698575 -0.79828239251510724195 2.5404218125443169818;3.1373652008709078665 -1.157127244378871378 -1.0777882510706262575;-2.7668955262206624823 2.5027516094783877065 0.14883869875111277459;-2.3709126129427242624 -2.739851527142566745 1.0224119734495016321;2.1866748731547929196 -1.3190614160157008161 3.1042856385899231242];

% Layer 2
b2 = [1.5919100861109842793;-1.0690539263216107813;1.0214101406258380145;-0.38196012683905739005;0.22451366884660742262;-0.23710126720568158731;-0.37854310855422851345;0.98581592907853043961;1.1322480990167231862;2.0940919990602622214];
LW2_1 = [-0.039196520627113359825 0.16200866035314209768 -0.48856328278326560666 -0.352046655595705138 -0.10045748907719571907 -0.58930104269786387494 0.63172890659814884273 -0.16733785207830118025 0.51009172631513455265 0.29737886859587231436 -0.42751528907483427044 0.51555245610109556864 -0.22792116228277323198 0.36607397405973107762 -0.2824325904140168042 0.0087455158433886858588 0.017089261463095223315 -0.30995875105018277917 -0.33036791226220474371 0.25749742064507874506;0.10685456861964295894 -0.58012966559999123994 -0.30677498410201053947 -0.4291826876733353946 0.50968033215009100889 0.78873066799432756113 0.7206002923171117569 -0.15969258297867691687 0.28737923998519143698 -0.096871124896579507979 0.78475535549620045739 -0.3205822262190060612 -0.71840582015554910189 -1.3062314146095161949 -0.1231931365407353679 -0.63158091368844149205 -0.20788772718673695361 0.86550548931043047585 0.58915161245495339948 -0.36239832331915633468;-0.1774394328432667145 0.38534249321431568447 0.31739598415231889961 -0.4915392818780945916 -0.0068908112511474797074 0.070483585915733157345 -1.811387625510239241 0.59559933418994448484 0.61645027758645398741 0.14698359803683860858 -0.12475345463506608279 0.2081421167017179219 0.42845625377739898765 -1.5961699089896430603 0.031445641766976971387 -1.819723123521759689 0.31339297593914344775 -0.14690698637753307754 0.44646854503398503144 -0.033525355069040682632;0.43961255116559927458 0.38071668294010135858 0.18990025728173789976 0.3645212284725690699 -0.18627317670950721551 -0.68484559053020543917 -0.35541263170653691894 -0.15275924753511199716 -0.25941011553248455312 0.58338833126208589075 -0.25015083286303851917 -0.12134563255271121895 -0.40052815127964386255 0.35161023610158187447 -0.15817918775002534626 0.42415843698326505251 -0.27711717958942488904 -0.1765405676904902299 0.61014448315154290459 0.1339402846493761845;-0.19923120800547108877 0.23076027888607461569 -0.64656903489778039251 -0.24582586503572248504 -0.38923114908865846795 -0.075765225961203788718 0.96354463023318726034 -0.090325955034777111186 -1.1562646555503206525 -0.73721297366235383208 0.37677594263802044461 -0.29915328929310353034 -0.48276836783368431982 0.061581010019532554656 0.32092737989832836876 -0.39038348611142709155 0.81393845421450550237 -0.52519244341471493787 0.070564617999576223495 -0.518282437326978207;-0.063037005001301257834 -0.2893416994194395464 -0.038394529995684316404 0.38618814362529368944 -0.23182697700565252363 0.0034001202735561568587 0.13904677832347939193 -0.62593323975671222303 0.6226610067405238258 0.49136626868245780742 -0.2459865013177097437 0.36248243835882881791 -0.088699366887659558678 -4.0323872031614369504 -0.42810796867308842373 -0.25332080874303253282 0.033195822546997516556 -0.07107865303106870869 -0.3814184910153938235 -2.006464862244475178;-0.40749369993148965019 0.027875105775766153421 -0.55638667305275124608 0.5004040753277253506 -0.16553674975121801527 -1.2242062592200801951 -1.5846078268818764023 -0.21193155234287303079 -1.9335875105884781089 0.012688911867064363651 0.2207076272982119447 -0.7128827813276518155 0.0078863222034912042191 0.88335111407746891299 0.5808785764266110041 -0.66736384927878478202 -0.19158155008962499122 -0.3437295891334682385 0.26375707951841825816 -0.10230753296981534572;0.22559058194996120528 -0.55319312780957941023 -0.57687058200559315768 0.49059617120611842545 -0.2643995081323139984 -0.82290022983301880366 -1.6980078347336560185 -0.82788105963968261491 -1.6102203412567381857 -0.70994579501119181586 0.019746986206411881737 -0.83199304856779787709 -0.4560769927678904323 -0.4168835265739306295 0.94395606052898139993 -1.0896802270036851645 0.60430034397326637396 0.19195857978411098865 -1.0406004980340306521 -0.36372364645160037977;0.39664059664382045334 0.37817028033094562955 -0.44888754286137044769 -0.2086023521271749559 -0.0072976809248642459174 0.087979176003260023409 -0.17617333866390960662 -0.26934132881241357182 0.15189703002325780079 -0.72619931233461754161 0.13587273047822240324 0.20790583908403076352 -0.4834592085008795892 -0.3025931897311547325 -0.40776045591678466984 0.10198972586027441056 0.14985651200096652969 -0.507162405007448025 0.39054391884002337409 0.26381884674542388503;-0.020839635308102306271 -0.97162813498838496162 -0.28759155148845244598 0.16420529713933956772 0.20085863037383952512 -0.68639868940388104601 -0.091643419778192708458 -0.67311254936042008712 0.24226613556363266189 -0.68243263947686694237 -0.16168934615420108014 0.30192255674310364277 0.22270099323578659845 -0.41177905338766768173 -0.3463822715806799124 0.51032866607268112524 -0.003793127181406685984 -0.3140287923916437185 -0.81527184634838367749 0.16916040048402844476];

% Layer 3
b3 = [-1.8867741536264235336;1.8098327034366197275;-1.5899023759164498948;-1.1413042434907285649;1.2861845057491745337;-0.61164906654784889639;0.47660947678085430201;0.65383419210545823397;0.30834489580214136106;-0.0016741102566584535258;-0.07938224695259278596;0.55097863081074849312;-0.85165979465040009266;0.82718278720174909235;-1.1285182805893017033;-1.274744831538295875;-0.8216117513965848218;-1.4970778088839002962;-1.9718259677669476293;-1.9055983226213308868];
LW3_2 = [0.21767205243546272619 0.42856337917402581583 -0.52953891715714263011 0.92245135068597072792 -0.087156689928007721746 -0.35996733750807841101 -0.62767130541191118454 -0.57423789513310241617 -0.86337018693066724939 -0.77250774178952330562;-0.39691829571122849707 0.77659714229127685403 -0.49689076750897831491 -0.8185461343060665973 0.42630295736343915003 -0.78428454373680300815 0.76483315542381613561 -0.20061431670732671195 -0.071855216286964007644 0.16688299950080492939;0.62594200193366167362 -0.90552486776059037954 -0.42676513902017670921 0.83641942905519273133 -0.017533084483531025111 -0.45048561471006204338 -0.12338710877185629644 0.82475891320513472493 0.51742755628479586427 -0.1502480297631145767;0.31400642822116514585 0.74823177887056324664 0.85195454909075962746 -0.055236660093041553554 0.12834379232404363735 -0.0065830261041170054503 -1.3339917056478465263 0.15483934214891215131 0.73976073770788075556 0.92188730006420427365;-0.4594016796814153758 0.35792555109184509554 0.42573648339136832552 -0.78778353013007917927 -0.38369470100464331264 0.71215934066361363808 -0.41001733333122553082 0.49319291141019588887 0.55789935772417387216 -0.19015680893170475163;0.30350998480367463728 0.54927240902761798047 -2.2275667983476656886 0.51611327754552738245 -0.92696548043742366119 0.22692880536184512064 -0.7670876085409331635 -2.755705848137732783 -0.33130110891637698511 0.57208895600829867689;-0.66732103845957291277 -0.34966830270836696259 0.58830744490303144012 1.3523530469407489818 0.60074048200100715889 -0.42922875662822806975 0.28164994162436673975 0.31931692240575637598 -0.97408066656607161793 0.064560502439965666843;-0.50072117662862380971 0.89526853225003188985 1.5889387288523786346 -0.0072281776692938977738 0.12496676489793723253 2.0235670535476306675 0.88254642288320162002 0.30462956414622804902 0.7988633756249263751 0.033049590599786800305;-0.94680515169989953872 0.79286105721883293196 -0.2413516446560991513 0.90764300984887014145 0.38656576360280658911 -0.81216972248983199112 0.26674050105964286494 -0.39056371580637189167 -0.5619246643738846636 0.059140001306212781895;-0.1522731281266401504 0.70557673772723661365 0.58813386615514828826 0.21013392976848810356 -0.61932171064993546405 -0.644559478187039403 -0.49574737647560196407 0.059955103335065325354 -1.1950675050883321493 -0.49530142762438800208;-0.061465835369527883902 1.480350049807360957 -0.13912335599671882269 -0.64472111991177760704 -0.36568093748499280737 0.60740221467186772397 -0.76655560137702882795 -1.0705599670656051892 0.64124457834656189981 0.1388708904023086832;1.1985171194410617623 -0.60868853722418547747 -0.29964624281407514772 -0.27057737319544739041 0.79029979509131165205 0.41195626103153182296 0.29193712372113822529 0.3596795370872453157 -0.063676723085596631524 -0.61589614332496978033;-1.0719509033172971435 0.97876236440445452125 0.32455155022041282109 0.105202176514126583 0.26682096171166003185 0.60419465476429634609 -0.55347792672522777568 -0.1436643214499459531 -0.17189306193991460425 -0.76896309754883185317;0.14495862777933693488 0.65523402391809992817 -0.23739178023396528827 -0.45291555924042758985 -0.76896271266309201842 0.9182033361644621472 -0.62032755532506778096 0.63544668553689354074 -0.26346287383469818577 -0.057437476073615947869;-0.689301257905968634 0.055914403404987267354 -0.83000236792193393676 -0.29494177090568746147 -0.24231557322506155905 -0.22208233938050708778 1.2052086829043771044 0.070042538432340359367 -0.24081318219512973244 -0.86965465295276789259;-0.8229720972823392211 0.37668168288705811131 -0.74784178290643532616 0.33098282410660473385 0.029565960046880362944 -0.98801379349798312823 -0.67287983266384920888 -0.73753191300119025353 0.16827325341051346808 -0.36954426130094897296;-0.54496112866375845396 -0.12447636583860803572 0.032762260974870331676 -1.1153813133273096092 0.46779645802399488774 0.58686010509436870031 -1.1752143413776261482 1.3266899403943039903 0.10857496711957688451 0.59382113549152049092;-0.34494848591203181032 -0.57299465807144023266 0.15403286405453880947 -0.32827219820984532284 0.3717571424499979682 -0.68806624173696773195 0.5211256890552076193 -1.1365240618749909984 -0.97014072419605323905 0.73419601739445294886;-0.50749199402096867306 1.1510187519573626957 -1.0499541200431596888 0.21428686900786944602 0.91481139683490708681 -3.477812716682459282 0.94884676612572316223 -0.038699561769704751701 0.45853664251954107112 -0.17115770957506931671;-0.79132722161049362519 -0.56056032996592608519 -0.70304328600892873613 0.69971074586347048463 0.53154841126592611289 0.68424901561429485319 0.55722840552042696149 -0.61860896700854683949 -0.076956997908164931355 -0.42609771060405415843];

% Layer 4
b4 = -0.71296766369925812512;
LW4_3 = [-0.4691088310358731972 0.15471347448263414459 -0.23798361711571247579 0.31533667865938019848 0.24936379792106655451 -2.1826885587326425586 -0.72259169073220042012 1.7172573514771374281 -0.89176384093405203224 0.88101452677236768984 -0.47723252660401660474 -0.21294214535623326445 -0.092098148707294935633 -0.45037894116310633885 0.89832724466258184748 0.48174081126322054747 -1.6780678673924720457 0.99668740538578315391 1.8730223194543771381 -0.64168295165801381152];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999945;
y1_step1.xoffset = -2.00000000000019;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
