function [Y,Xf,Af] = nnmove_105(X,~,~)
%NNMOVE_105 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:06:48.
% 
% [Y] = nnmove_105(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.70139767883548;-1.99738196042707];
x1_step1.gain = [0.053913604005474;0.149967019141203;0.500604127399131];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.8831228960583099585;3.9779002005967520894;-3.1638610080720739326;2.6539280152722222184;2.6182936142006236757;-1.5743671899216349352;0.74493230044208269547;1.7478394718059337976;0.28107646354504206565;0.078834383825744813734;-0.011506752002951300962;-0.54385742753200139177;1.495483759974921778;0.53169188202914530184;-2.0951875407055466916;2.3998313965721251861;3.5306913582951673369;3.3421686482353840653;-3.4359326574089359418;4.1316445988059484762];
IW1_1 = [-3.2856740770924619532 -0.085918607848701769591 1.6638296749441812139;1.5914633317411188695 0.12215894601992130508 3.6759723210012107408;2.4294298280918185107 0.86703658504997616063 2.4057103258467367191;-5.0495692141557064758 -1.0160581432992790152 3.080126089942241574;0.13143742023697704835 -1.1899844587875798574 3.2478989689505994853;1.2053801802618311356 1.2763971586559315075 -3.2888905476578176312;-0.98343031824877502611 -3.2682869845456301583 0.18059293124385822349;-5.5192105109910656324 -0.42908075809734880224 -0.6384858149815997308;-2.3712355288524031849 -1.052325740554714173 2.9765025838514551637;0.042893193628339008894 -0.3041640639109995381 3.5205726234978733657;-2.0727727034997949218 0.98775541632341878895 3.062610181597550163;4.6031369897305873806 -0.40508742201961772667 0.80938755699391895515;1.7501007393679344215 -2.7457791059767857611 1.6349456249579592537;-3.9494522937855354172 -2.016038901123017979 0.34517888470633062425;-2.7617959623864689611 -1.768036904025446221 1.2437342446418555575;1.2399090024593879544 -1.1085543713861936155 -3.1028434549978167745;0.583368641779894892 -0.68101727710217152545 3.0560937702609169975;1.9666532483931813413 -2.5723566430304005692 1.8413004428900878739;-2.1707184480166419327 1.8877023604366613974 2.3799725266721689643;0.00089900607987703981538 2.8197244670718846216 1.9566149632527483071];

% Layer 2
b2 = [1.7831331525798528315;1.001050475148209884;-0.87223816894943229094;-0.70835968569346730028;-0.29230395124309888066;-0.29895985444274725262;-0.69907570132057694767;-0.95885314678360367147;-1.0428120668048459496;-1.6954529517634957525];
LW2_1 = [-0.055077183399856788348 0.313045841248242529 0.43186295311700984012 -0.5513911224922061205 -0.77021215368128004286 -0.14624979238857466202 -0.33524616019076752815 0.24749606136060101069 0.065009761264490317778 -0.0092554240861297387005 0.38464973549096581618 -0.55082548979701018155 -0.68805454435912749567 -0.54319966283858200917 -1.0802881965706578882 0.7864882890018738415 0.20663126888134616954 -0.26866043108893605806 0.073430932741639559636 0.16323645999352148772;-0.70377796694468808258 -0.88478748580745358865 -0.75162254764565261667 0.075608904745926130975 -0.43276488414857039455 -0.1479294855777764095 1.0888425903194001165 1.7407407705702331313 0.53557815416088871974 0.39027776103857247936 0.18463879701215712981 -0.36708171067953632161 -0.27839605488185220628 1.3783055669573995861 -0.10351546350983728551 -0.66315453408279767533 -0.27883387621442323745 -0.81454291603450945658 0.51699083196510486893 -0.47427451796899311454;0.44756852052473761194 0.13951249967064324742 0.033494983553042992352 0.1925837530654515295 0.65138730991226867495 -0.38114899964853349301 -0.80326918404870384371 -1.6481568715676331305 -0.6294262215568883212 -0.15342933174792452999 0.014065887468257327886 0.33751100277401369087 0.14337866879980804002 -0.1319191657441857457 -0.36929887226501501019 -0.224952379558959914 0.47147968425029440631 0.17170408706076997762 -0.17633704892949608745 -0.70908430700094193799;-0.073237711902448654477 -0.20948197737561952136 -0.11256349691165748461 -0.40091146180254694231 -0.075566833675916558755 0.053489624540517102802 0.049064976310484023636 -0.83210614496978685395 0.4572381159414686258 0.28229362165678217877 0.21024426119281761083 0.20766173347277863681 -0.16085789858849458556 1.4362024794003440675 -0.25391945177493635555 0.016211020094487778309 0.20127060565279927817 -0.081309106110752718544 0.20894705020589524058 -0.28173428768138358835;0.21283782785916244285 -0.089437210266700747918 0.48359009045207990152 0.18018642376223958923 -0.31128039156365144846 -0.0039602140155098330965 0.13212082018835560882 -0.69421932707553424269 -0.17383475637951839587 -0.13632243347096190123 -0.070760978204463892416 -0.31097323438640150917 0.55392124425771516183 -0.96831381064501764744 -0.048797404931314118659 -0.18637594719665875886 0.81680065602496743082 0.063695968250631590513 0.47160146542142528103 -0.39024879783510524334;-0.60863718962821933278 2.4462528573494601858 0.31307234139691858532 -4.6054916420306106772 0.3427647681030723259 0.74197169886940894656 -0.22946900374214307394 0.15219528230560175341 -0.31213466003176898456 -0.11166566211249515095 0.34749798095007056187 -1.0861920916716163443 0.82626806830193222364 -2.7265214116163387637 0.040033494049383222535 0.010437237784790477646 1.1876115776827704806 1.889569771279421273 0.26170490372436999715 -0.58543679024450567816;-0.42464009421326570637 0.27776643416609381187 0.31219606382524522914 -1.1890796941632912898 0.40702031422077278311 -0.10797040453800509086 -0.1830852838527211035 0.75453795029148140738 0.061556791043143065101 -0.06474567567352382258 -0.32777723787875406858 0.42380706716975136139 0.10192623632747882523 1.8336503363279916812 -0.043841872233758384658 -0.4960953238338588478 0.064795070158869816357 -0.16029848168298793665 -0.21607837840548571595 0.11738394675292021518;-0.10839049703405541358 0.13374564123861110154 0.40979467573832689675 0.69287404840646416027 0.11959689066671644331 -0.073933973352604057117 -0.043857323312500869072 -2.9180461254548779593 -0.057599890315935521612 0.0047602868851282370555 -0.5355423017000200403 -0.45981593459748837383 0.42505448053145644671 -0.046055756205294721972 -0.5562075602735344626 0.61024177947125923804 0.94553451390766307671 -0.29233253272124753996 -0.55696905738117563622 0.078439389287212030188;-0.19762402747659915669 -0.057859351482310951431 -0.080497014412126699501 -0.21921036377407676632 -0.79485012496088081058 -0.13794277053088707663 0.65197325062560751441 0.41939815452014639341 -0.65417309152184888177 0.11097395495532477727 0.38742696312670515946 -1.4863718395623264357 0.20424377474598415239 -0.92959208022802597426 -0.23826410085776894565 0.47760920334106066187 -0.27429621342575294385 -0.20810763486081201856 0.1691504820857039626 -0.061785781910756537583;-0.45190731450425114524 -0.24790567456944637148 0.24322041005959280091 -0.44991075843183092609 -0.0030820049445934036628 0.27502248461001699287 0.022368767515546776614 -0.21236115825058177187 0.48706909457770486416 -0.2952476439614064585 -0.043356637068298536919 -0.038837444881831661991 0.51729859603585326422 -0.32623634893179948024 0.55697525136039238713 -0.37640580483497554365 0.15620393829832196486 -0.46256852147237365047 -0.37707822194817380845 -0.68871238381840493847];

% Layer 3
b3 = [1.6560042192947470596;1.9750612725532334935;1.6394917641483726101;0.94831737627664447476;1.3195485985544557206;1.0596036069170879923;-0.7643834127238052778;-0.5335248460631655254;0.49554702184460092118;0.38553045555112558374;0.23680078375008262181;-0.57735660255543319597;0.22021488776832781609;-0.8227558634456615394;0.95907058182488880149;-1.4895626376377655298;-0.70022326820048164109;-1.2167988310739075164;-1.5577087792832395863;-1.9751409390026519741];
LW3_2 = [0.15515703938202513035 1.4415875609675226077 -0.22595373958083322941 1.2855239812765035801 0.45050071479799108642 1.8317326593898919374 0.74813280435250162359 0.39495577486516220134 0.44460746962821173778 0.68979523686486310385;-0.071212513410333397323 -0.49469794269568456713 -0.48654769806299802415 0.42782602781778961143 -0.56479885773764992862 0.60902187945751939946 -0.10870411756316859797 -0.58590915457193781801 -0.036442030068624939321 -0.95853814627096989298;-0.74412517180069703837 -0.54260518750919461972 -0.68359335032192147796 -0.4268431588390900755 -0.36176914744400651136 0.25766646847097585127 0.27336789798862948242 0.7356495886258043182 0.67820563233118646984 -0.55734495685434082279;-1.2730909236904968118 0.36003696415127472985 -0.040470480648730947082 -1.0071613695569072711 0.006928204282233625666 -0.62419351999287742139 0.47154194371547358822 -1.3340635375418166131 0.34145194452566962617 -0.25267390303827447218;-0.48968340062888854325 -0.65918389974264846032 -0.43080024258997928754 -0.77648803991148485082 0.30703628900132834412 -0.63133674119807925429 0.53195784590548089721 -0.51313202938606816694 -0.11400577742388201541 -0.97182919155769698083;0.27446122689912838544 1.3770503964698883603 -0.50283171911769564133 -0.95038465880890110604 0.99215988425398060624 -0.047048979543243996115 0.34238449150544153499 -1.4288110632428623337 0.079567882718533960995 -0.14128768335909844267;0.31166876272150451088 -1.0892545938234998726 -0.87754282933387606214 0.30096859621180677147 0.15164411013499656811 -0.057326344567472625746 -0.38021220616803946823 -0.69933734623338494885 0.44024240345341913994 -0.35434505374682312429;0.1253472759082668031 -0.18444837870506725075 0.76789960346655339318 -0.23002073465360947657 0.47238688550724694526 1.5341325769935949541 -0.92780343039335133604 -0.26250107404505390596 0.34838075355042386061 0.11682041783066995921;-0.55728993133604443067 -1.0652840390234439294 -0.19031887866311364421 -0.56755761918906355579 0.42592791489290904305 -0.72627661669398246858 -0.79442567888145343424 -0.79864433412458635253 -0.72787935888049837274 -0.48337631659791990835;-0.0090376586776432614456 0.8740178448657494048 0.51369213372391009376 0.60272497747656750278 -1.3802415861877790348 0.54612415973384675905 -0.25064622618683057853 0.027110111410600976067 0.063610405278737805479 -0.72482624435363929294;0.82660147712809306508 -0.074395765204737313026 0.8355335425430823193 0.79998005913413883228 -1.0491515898554317765 -0.9228992979045927969 -0.092606281163969794701 1.0125871741136567294 1.0307701716910462331 -0.035329121168334538805;-0.85765368724823975999 0.42935402259758947974 -0.21243747165046161784 -0.14566571449337262223 0.79140140450052176568 -0.44292053127848346472 -0.7470202197481975448 0.55552039051651347368 0.061545491975878982571 0.75095241869231987852;0.1808891747292811214 -1.0263528724601793662 -0.78334473144530958333 -0.49388083313828029519 -0.42263371213607203725 0.52323757547417037994 0.12004272692504142084 0.66275266274244171161 0.21450277677277682087 1.0525972135825625298;-0.46585040611339895156 -0.40091023533772135456 0.57772400391664702202 -0.50073129450064923773 -0.27546250593810489571 0.72159526025837172902 -0.27613160881493070686 -0.72578767978398894822 0.72815483899946287227 0.9020503071168026743;0.2875261055095933993 -0.89640335956540428963 -0.085190859789432540894 -0.36334966015954489604 0.51248587542523804661 -0.78688428266703103198 0.5586742122394926513 -0.82264603897650845354 -0.81529594276897743299 -0.79605783826400822178;-0.94226147631413847972 0.27719584431928262491 -0.097586960697264121811 -0.20501082609141307866 -0.094460109343727907683 1.1209596049910208748 0.064250926688135048814 0.40209049800661078589 -0.75259717247616941815 -0.016771698289451974356;-0.26310555165690091561 -0.34595940074469622161 -0.051728310258780219044 0.29353214875767247305 0.75188327472789839856 -0.035101799083401927226 0.52745499738569445736 -1.1067600607732956952 0.65846394897401494539 -1.5211740347469173695;-0.59468976360055547659 -0.23992914987080316003 -0.69511068378218832109 -0.86632929999410845934 0.34978414408008362546 0.21644190739705326809 -0.42422705345973504842 0.37877821067383149467 0.69378926996889245249 -1.1535763920421879813;-0.70218513894249101615 0.0039713844913600790387 -0.52494939445665955713 0.25162084185423555516 -0.4442702683015575249 -1.557058913143173573 1.4234917405719973438 -1.6864990086669586766 0.63432610680346068754 -0.82036777904075341983;-0.82737786280346958812 -0.55377768408478389439 -0.0036038166799567598712 -0.60979351928162484064 0.65417789248448043882 0.42323797394852386011 0.035974805165320616895 0.74317915334438600095 0.89510748816136986861 0.41913839165333860448];

% Layer 4
b4 = -0.20296580799511890203;
LW4_3 = [0.39973802915287426352 0.29253116718062688317 0.32977702197028452291 0.62043873647416880601 -0.1690939601534297565 -1.1010610410011916205 0.49674176945196452104 0.25920643837344714555 -0.54396082251951449749 -0.030155563517206912527 -0.3706224144553441624 0.021684096691796116846 -0.32405069143906473084 0.07012473532527938036 -0.37337445395952911786 -0.57526285209329330872 -0.3374322025082104326 0.04334461994877471247 -0.73425723242673279767 -0.83052460306706032966];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999934;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
