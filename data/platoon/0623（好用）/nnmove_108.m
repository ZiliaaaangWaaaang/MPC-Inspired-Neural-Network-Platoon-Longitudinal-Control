function [Y,Xf,Af] = nnmove_108(X,~,~)
%NNMOVE_108 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:06:56.
% 
% [Y] = nnmove_108(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.70139767883548;-1.99738196042707];
x1_step1.gain = [0.053913604005474;0.149967019141203;0.500604127399131];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.5842220194814431444;-3.2204736941538958384;-2.1743796014213452317;1.86115971300803551;2.3768361865509719522;2.6749256769142175649;-2.0185716576623686791;0.17690576864643026145;1.0239469351870575942;-0.47012984085789005784;-0.19349419443370211025;-0.11256141942038044856;0.26828207355595506955;-0.70189959629739329117;1.8707964260892193664;2.326751364959753321;3.0209408381243694208;-3.310506594965998417;-3.6778583896430925293;4.018444998023908532];
IW1_1 = [-1.8805201000720506155 -2.5850742655655412072 2.7398060123275067568;2.4124040066970131591 0.7103179057110512451 -3.5369152037136895039;1.8760598239203809534 2.5744923008744859949 -2.2565358459714945916;-3.1570357132776551978 -2.4414330449728649519 -1.008822225321703181;-5.1393263578422248017 0.63634047230612744706 -1.3468447463156878463;-3.7778735229007813778 -1.1042786639620794098 -1.794913740682202441;2.3242590486087482127 -0.83406911806964112444 2.3737830079643966741;-3.1914114345804160955 2.3701804568864344169 1.1059259956676148473;-3.2701321603799344828 0.92357709279362165677 1.4919490068679976957;-0.59978717220387667286 3.9897689510636102916 -0.28086445034953533284;2.3262415687528825714 2.1906419457540033946 2.238466115795364697;-1.8341847115837848214 -2.9857916471060934605 -1.17382474221723343;-6.0371530309921919155 -1.3870667623781183231 0.76900229355508420426;-0.45044918094927083319 -4.1139184893853952829 0.5125589116231967779;0.90607127118056263182 3.1869235725661511083 1.7136852311767731827;3.0444789844113868682 1.453527726050865887 -2.5387439322712395118;2.2156732672539924955 -2.8824404107293357669 1.0855981242850067936;-1.828214427325798086 1.8031686167272775734 3.4499904995472019387;-2.7615026139442564457 0.33197896355999911844 -3.0827006070197162657;3.0110202768026237408 -0.87771542334380070471 3.7908051422706567912];

% Layer 2
b2 = [-1.6375918572385335104;-1.4231570228298033864;0.98069644448187787145;-0.040473451436380689095;-0.53744739585903167356;-0.2595395547344825915;0.86282463302515999271;0.67840196397207486179;1.362681551289990356;1.7450909797311426885];
LW2_1 = [0.067259618586869074353 0.22427411375569575314 -0.47871182201147649549 -0.22832403482521726468 -0.11051892641382080051 0.52497601236990731888 -0.44975956887049806099 -0.48171867788908750985 -0.15976144708569209318 -0.89925401966043483348 0.30542514470820186778 0.22131764503321105231 0.24194935098650632854 -0.28686211186933446848 -0.30513639173093920487 0.34862713513480086958 -0.22410782982165428079 0.51859928001102617579 0.015386708640877102064 -0.24456571695895371055;-0.12770837522440658951 0.38596105503138400383 0.408267482041373031 0.23430947100125693039 -0.20160343289127599653 -0.43323258245177448389 0.5712936058535107442 0.040535061653748066801 0.12528756310227701087 -0.19667464880740476163 -0.46717642183180102533 0.59031347772520892381 -0.44015848562396331367 -0.2653900742254935996 -0.18195415554271779368 -0.34508727795315280451 -0.32889087003403250087 0.78428777320241005455 0.20922839137435764179 0.16359432961361605741;0.16797032988327875724 -0.90333200010655001488 -0.11712600352458969744 -0.34860501675363197993 -0.7204462504661857114 0.35622885619788241529 -0.44636945055565691032 0.15957373049318462899 1.1726313732575055493 0.31979668141900524647 0.56309121254517957578 -1.3181762100904783619 0.76124200890118376428 1.045950173027729635 0.24067373802640901204 1.0534514865444672971 -0.71107912343931867216 -0.53120245275323463297 -0.2950459132135614948 0.044979277467677158953;0.99999330586210499749 -0.35357887376191649009 0.11847979088355212185 0.41900538519828273154 1.1161056958085295854 0.030200636070315832471 -1.0835675726039037947 -0.05588089360486832996 -0.51117420581510564226 0.68761044541711369149 -0.20163751739806182184 0.41564144114450440881 0.29972560075772625154 -0.18647937086678983976 0.41564255107798081523 -0.6658949876255706446 -0.0016738607429279475647 -0.59028888578217941774 0.11979025066953881418 0.18265837215559732609;0.016466936884886901327 -0.24452623866091252602 -0.72542677537641853114 0.98438865811275289008 -2.0659152651403189793 -0.53377229997836639352 -0.11748679806405237791 -0.59318137057004149959 0.22827638279799505883 0.2400026798694247232 0.089350963589105075746 0.046630339048659472101 -2.2486719871980036523 -0.16511080955172519058 -0.61140446219194177768 0.85014781331466693359 0.49941796129406224036 0.87032953539172341895 -0.56712726820578363007 -0.53655383356623920221;1.1329072750156856664 -1.0854513601126101197 -0.46847498377535651271 -0.064011141047163919171 3.2581444217675139541 0.84582822876233887399 0.26017015163984730242 1.6338978711752518702 0.50268110768460749771 -1.1152343882593114266 0.16065006581342666792 1.1071672722348369078 3.1874025155044538593 0.86726900055666666933 0.9998585883338152458 -1.8340203559979042502 -0.73764867355566354767 1.5782614316043157565 1.5891556588515658444 -2.8789206865039584926;0.74971144508856668587 -0.22689905754402994731 -0.68795910510905078361 -0.18243130426427162094 -0.34144937752855775148 -0.46426980752997770718 -0.92746809309919220343 0.19874017722747297499 -0.026469011579322836852 -0.21125585874894262095 -0.057712734347796709744 0.42436404731990023942 -0.54762358361566898513 -0.38709638683987668273 -0.10992983636909087197 0.51525395627167125401 -0.63630479111694371319 -0.16680802646734799177 -0.24753299898586231254 0.34006540665749462882;0.33284439226251744115 0.73490879374184503448 0.055570738015873644144 0.02574369956860030062 -0.70476035965954908491 0.61537532026928554174 0.1965739852489371553 -0.30772051585073412205 0.60672633203736114904 0.95284942983587472831 -0.066846140229177120062 -0.53184097694596532691 0.032914553045108298213 0.55493478844534172012 -0.14328324403110867524 -0.58367714616066224131 0.29642010375360366981 0.3444473254057611733 -0.005117006067622435761 -0.80769776998070463847;0.11921858110595270897 0.71712439093681812352 1.1468586717866859903 0.97594322038527325791 -0.50755254180607611847 -0.84794419325195868886 0.45714489145796055602 -0.64562083897441691072 -1.652581008752506575 0.67692351030101516329 0.31964758321216091286 -0.44404783521862639661 -2.1007919447795373458 0.1890159301554326654 -0.073685648910607456918 0.31490724770671035815 -0.30411692803824791342 0.12460450892512317522 -1.0293405812024072343 1.2305155037501886994;0.42970581255557366296 -1.4678689846655170737 0.13672544850569076647 -0.73655074163859102221 -0.16903873611165215474 0.37879696172107996111 0.34857201596174780533 -0.25597131962761071611 0.18160421530075079866 -0.16681943664035364661 0.99426713899942897879 0.41203852580695743413 1.217361686353565231 0.22669465833026708479 0.41397892588518525603 0.74796538998844497304 -0.78689401006145442974 0.11585451724999659695 0.46564673918939492037 0.17452096451296808532];

% Layer 3
b3 = [1.8988332775403391484;1.8065705929170752242;1.6928344798861527654;-1.2161354474173586837;1.3831680938454693486;-0.77522286292667241803;-0.74035490136204806788;0.89567020435402966427;-0.033822089720086982723;-0.2728678531604605273;0.26455833103913528603;0.080024439770566155317;-1.0104799370218637833;1.0252633433505440319;0.82046592756930269985;1.2026727923959346089;1.4440144042244802414;1.4986764256946500939;-1.7911639162321988383;-1.9659190026099886417];
LW3_2 = [-0.6991051672757006008 0.73501413803488557797 0.65625079565014732275 -0.36072291964950209398 0.11886504469603485779 0.73336219514182221513 -0.47674201445583813674 0.6882690993760914866 -0.080061215731813462071 0.94816740641099628295;-0.15403709719270519685 0.37614900620131769271 -0.68434843885113694206 1.2881875301067431394 -0.18247059324297609795 -0.10431160841171860376 0.95440151833888675625 0.46022998867243364307 0.69177167442256737306 -0.042819386348025317846;-0.086705028230382674703 -1.13656809469698028 -0.15625786884473696903 1.1361203800564705357 -1.7588065655452607139 3.903173068686321745 -0.52584734257260290491 -0.19452043228953735943 -0.45739386576605206569 -0.43942797513498288442;0.70397309162144805494 0.77959551350969569228 -0.57863782473892966252 0.92345929811789617681 0.091001075822217336597 -0.65244462031459282692 -0.44251029838337624378 -0.85435249601869789338 -0.0070765824325054668686 -0.11651659150379160834;-0.2697332916370162037 0.71468768232417656527 -0.31821720259093755345 1.0111844858259566582 0.44401225621095263829 -0.159467551237805788 0.11090372744906390468 0.34386410210730444792 0.74536310945963468733 -0.97961198261918724928;0.90396483538781069456 -1.0119033966151806947 -0.2646482560560494135 0.41059196353478383257 0.70606915192642705215 -0.098246825456174358138 0.16030269447002742922 0.56792702297315722504 1.251256000733717455 -0.065390641369253724169;0.8571520277132717025 -0.96541922905720489734 -1.2660857979788520122 0.46578396564666829649 -0.15904217564635209081 -3.0972164878597752136 0.19542710939486354627 0.032187487803701973765 1.9192894836063696395 -2.1286165040272515547;-1.1348482405519590976 -1.2993898883754788631 0.16543875375388811255 0.078929366794364727578 0.14933901593832518695 0.62470189356230287903 -0.38904379585578824363 0.10398987247959524949 -0.014297916596924678881 0.90762561064130531374;0.52002975887099711638 0.16734398174988751595 1.0022259417241350388 0.057331608353733513883 -0.33843786269785064436 0.50064859679181028529 0.47988947283147737055 1.0024766276404366572 -2.1307086100904646386 0.25544249491658477247;0.26384872837046446925 0.76539317220302427458 0.50325812423517168881 -0.97713694443796561551 -0.65798386069004088927 1.0461556383280954385 -0.24243233254176688174 -0.13759697659071754017 0.49673917445383408698 0.25540135462391566623;0.64334328934272411171 -0.11879435623565576252 -0.81169514635352069121 0.16783761591033713456 -0.70460937110061583333 0.79405427116232618623 0.22127349226800582804 0.09929195607839597093 -0.17479537805480904744 -1.1246241112525974248;0.42915129721344941194 0.75419221801100577718 0.46196098384076700327 -0.88650689857355968737 0.023810756574010140396 0.54080288044012436721 -1.253928631199767052 -0.6596748029478880504 0.83980326980006525517 -0.075506591846263612644;-0.9300905985937870657 -0.20063177479225166588 -1.5102133295954245362 -0.54635869884088805737 -1.5185808627360442014 -1.8997496442146644124 -0.7131440680959990619 -0.080525278642893327596 0.0094679968361011650896 -0.15319174161381635124;0.36218160069457810968 -1.3400867740293707087 0.69647215617441216029 -0.34665250641326417202 1.5626136823417633437 0.10429939890302646066 -0.18009140470514092836 -0.38893413825509387527 -0.7857728078741460509 -0.18659108673779450926;0.84347603953410055233 -0.53346096496087491712 0.54953063528681433958 0.42497914327148711422 0.34867653470256421144 0.51272710656492870296 0.57251088031814456603 -0.62369924609536508964 0.50265494625428674969 0.68642009266073999996;-0.34886228873783248217 0.73935175936700059385 0.78206033411404018985 0.047548333435724468576 1.4212073173199877285 0.79385466161680295905 -0.37666082142443951808 0.2739054304542501983 0.32214579622085781629 -0.46963584998985963281;0.43589912019886722927 -0.65568000434058770765 -0.1684555098467703238 0.24648112217420731218 -0.8513538391948608508 -1.0289921284158471959 0.28108708394210502046 -0.077390755244662129408 0.76067405427281242769 0.033411290879504847162;0.91110736799089409033 0.49689782036631052753 0.13697915970650986761 0.41213836101525491706 -0.66199467465324479676 1.4064883571484030345 -0.88559030079948697356 0.55932668264594609386 0.59064534668145651786 0.44972364917318224942;-0.93921692691539038211 0.096303387642527521484 -0.84855063898893301477 -0.79730121771048223511 0.13086726254202202258 -0.35162759700781559546 -0.87184011504107661317 0.52966707140968827261 -0.25500031531746708557 0.10681211454610103906;-0.32817736918897244536 0.49679601543669160701 -1.1386005824680951459 0.32150417593030500285 -0.18826808152026602849 -1.5103045227072391388 0.36670234873166152045 -0.83846264261730329981 -0.54824214209993715752 0.075439905051114378165];

% Layer 4
b4 = -0.18172307027970882598;
LW4_3 = [-0.044969396626314023235 -0.71272173754220091713 -1.3923884168132396599 0.50470426432170456543 -0.51332943093896310494 -0.70140463410840858671 1.6323102518170138353 0.56726213458841467929 1.8427884100289377844 -0.17996783332131899291 0.19845019676294514688 -0.89643304229835851782 0.95677479994416891884 -0.81898403702860567144 -0.24272089371256372337 0.45581044006900911514 1.2193354003826408771 -0.76337683400238254272 0.073507090292555352096 -0.90370343148163667646];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999934;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
