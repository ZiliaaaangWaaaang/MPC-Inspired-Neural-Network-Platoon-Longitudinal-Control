function [Y,Xf,Af] = nnmove_109(X,~,~)
%NNMOVE_109 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:06:57.
% 
% [Y] = nnmove_109(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.70139767883548;-1.99738196042707];
x1_step1.gain = [0.053913604005474;0.149967019141203;0.500604127399131];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.2580291419976736833;3.1759868978832637154;-2.978168704581986681;-2.5180912371844281772;-2.206128252802302292;-1.8427264046217861626;-1.5401858423396512787;-0.54467749124759279322;0.13359712463727152487;0.47867073221892120216;-0.53470818097911843036;0.50221569807804000707;0.25664274258156560826;-1.3207779925355926931;-1.3902529439470820982;0.16720235161331009621;-2.4188447791454903424;3.4544143650685610325;2.9240660114963326066;-3.9443740507942353091];
IW1_1 = [-3.3465057065650194446 0.4521814311537925013 -2.8619780823416687277;-2.3715534464535465986 -2.8819228237407017446 2.8204131763004509637;2.5933365094652973681 -2.194343465514310143 2.116289634368570205;1.8812237972027816557 -3.1552277287317180843 -0.79443374614256090371;0.71053731191498392672 -2.7182047664025410505 -2.7198787166843572116;2.6653381845878838519 2.2072173010645643743 1.7737188620762043278;1.4389017173211939848 3.5800430642948337656 0.27549958746222091843;3.6325642392807657721 1.5251984176135566784 0.21131645277186084098;-2.2335815234850140421 0.95176643399835725301 -3.0086357041949516322;-1.8417122509702872346 2.4623367387721426525 -2.0492089672670741329;-0.12787487522100982051 3.2156632648619276615 0.76756349213265051556;3.477997299688960986 -2.0937806583578648656 1.8163788146042987304;4.0034945535816053308 0.43074908001148465297 -0.67578572284363014333;-0.86725702330521825534 1.6280499288652872103 2.711180266922568638;-2.9136977647833726124 1.801832159545709855 2.2875711619425143084;-5.234564540364518237 -1.5142803905621271543 0.024402311800311514423;-2.5031310214202329156 0.28891923791208240502 -2.7061341084154415526;1.6230428002251846564 0.13430084012521623094 3.5281305887203866511;3.0573261151737773922 0.89384455555514330527 -3.1394276688403182085;-3.4171179907832631706 -0.5949808644511080935 1.1033206968334585696];

% Layer 2
b2 = [1.6673216157030077422;-0.99199310880687707748;-0.85589378110262814836;-1.286264118656271549;-0.3954052229926341977;0.50499646181044410831;0.53819372904219586751;1.1703900873906920577;1.5666133263023318545;-1.7385317075042427959];
LW2_1 = [-0.53572077789353123034 -0.3486059491166375035 -0.31951794392118915145 0.22888582367864937495 -0.61596017948654302465 -0.09604147500767321044 0.54990984714392376898 0.22174012408344337399 -0.19030264878351593749 0.49406680750777492994 -0.18552804193037289449 0.13369496109014553098 1.3572278173502894116 -0.87733668645254203611 -0.14182162524717373264 -0.6044330361771804716 1.108576088476817656 -0.35368676160484086024 0.5665360128561292008 -0.46457836730792090307;0.24422739946852289883 0.81224606185427639105 -0.45485276284418363346 0.67168464450388654097 0.25378285454915222585 0.47837266501200648161 0.82728993607416967393 0.38511111314021539975 0.77032171991524778232 0.8161585625667354682 0.88672722686223359734 0.64002441542520205342 1.0137943539083498212 -0.1392597021290321313 0.26782306484203460828 1.098995724657059192 0.38594622043721421578 -0.84926552726025650308 0.68434770168999592421 0.33589728052829576077;0.053592867377739696055 1.0632865892768419425 -0.073403534399499995033 0.2518420078584667765 -0.22014759248253687463 0.22763626208667037121 -0.51852142868138273446 -0.2249240403168163982 -0.16541290207433026471 -0.55185116767792841141 0.45627198083865000422 0.21816354740401019963 0.40207306404785531084 0.52184629288184480878 -1.2024660423861321945 1.0619855408623848358 -0.20752532200748249891 -0.61178521601620983184 -0.2317658871551905031 -0.57722744530682734698;1.7663773940649043492 0.56004114121104708879 -2.1979980889706243197 -0.21958604514111676465 -1.9310415528038404887 -1.2764071881712995005 0.30279847950973726167 -1.7845057402459512108 -0.079646307729988763402 -0.50151518106011949705 -0.20716224404373395629 0.94806756149801185707 -1.8638891480661285982 0.83392812553124928687 0.81439574206403819723 2.2344262356397828206 -0.62409483848552260721 -0.4675651670191646736 -1.3592166878380118611 0.95689582647552196004;-0.44242161828511566979 0.064819943449826972204 -0.50236316963860372375 0.98917691908027682857 0.17921364797658395629 0.25216286252937691881 -0.82362525707438827283 1.4354409167391470881 -0.36662917258285643296 1.1480424735350935883 -0.10294459720545165449 -0.62561691522369256013 1.2244449603889313583 -0.46374029537116717714 0.19035121062622933907 -1.1816578721534871654 -0.60319672112072464376 0.98428424121397029012 1.1393619322686390216 0.24956199047871518992;0.33183494621515063905 -0.2134614108356789608 0.547673761016172711 -0.66480799356377806575 0.21741361471017428553 0.0016925898074011173043 -0.59334462190788606062 -0.38811214761767642845 -0.25795876630310971001 0.45066495870376033217 -0.16585423306209592931 0.34360607101636997385 0.28349526573130418017 -0.24642290724632706644 -0.68740381905698055842 -0.61879478849817193264 -0.048531633637370903689 0.69181464007904269753 0.64169143218382118654 -0.59784644041719592344;0.55987949057919172979 0.26423547761180654625 -0.26757015804739808784 0.049884620892349795795 0.24289067515865792046 -0.78638306882176267631 -0.53035533402993018104 -0.10285308237556901878 0.53627320565391600748 0.40931121632973532787 -0.059808437342040596252 -0.15152268107271396613 0.19496725687200019972 -0.2201949517632596498 0.037636971107946344539 0.12257095711544829797 0.58933217467469545259 -0.16299152603087524449 0.91058660656506618114 -0.47510052412089598395;0.71317828952109207918 -0.41188490658435500391 0.43950711598433689353 -0.57150121902077488656 0.27701404442922611393 0.25648477251354567796 -0.018547707328303020269 -0.12684302699252475444 -0.15298889111589963896 0.47967587355223995083 -0.77567654589141066257 -0.36258305188322320634 0.27448564863700974925 -0.01503718964373428231 -0.14213200837945175192 -0.45111169474473372665 1.0859048505408970264 -0.30831745134097893191 -0.38197770550902981901 -0.38492199615497235676;0.63857066319513522412 -0.29541199655370015131 -0.28222673447082030629 0.53436290331404912024 -0.42909481519734266053 -0.55103627950994293894 0.27550930241694754352 -0.094448957280610382203 0.081330089959438092717 -0.42729258689647098279 -0.64492753484616593962 0.97942192394615734674 -0.025734282489401901634 0.82835996204849504654 0.025284118624903977046 0.25589089840779349894 0.42895823930553395043 -0.23543926577863741323 0.23408270529328309428 -0.67478172111762679819;-0.7786733545330903894 0.65923503228949920096 0.51495753655918041769 0.033143200746910211896 -0.28195241806776771831 -0.21539542275136172589 0.22766303738357393516 -0.19072658368443665133 0.42420770933541163128 0.12527169284286157613 1.127002344771478537 0.3113628731700312513 -0.15564124464371983936 -0.7236253544552785355 -0.038565481565342334125 2.0192581032342040714 1.3413524710731199452 -1.2848169518181342674 0.31316333370852972307 0.064135547995213884609];

% Layer 3
b3 = [1.9580402730853305737;1.869571477978356322;-1.4461749891822717196;1.2293323681715999651;-1.1681738679075384102;1.2394494569193461597;0.89768025752656899208;-0.87367545632795495791;-0.22504908659195640985;0.22587040106999692335;-0.030955322930933597964;0.27024687278417197644;0.5626718087220798914;0.81639582714345493297;0.36689019593941363251;-1.2159358737048897581;-1.5699539153356532051;0.98730370744010653716;-1.6412788389116657051;1.5250702344931565957];
LW3_2 = [-0.53499061452432528085 0.27878946434577389635 -0.59942304565486870249 -1.0112817490294154776 -0.19527102059908846288 -0.25041825684831808818 0.010355950390628742078 0.75598515394315146665 -0.014042649864335158064 -0.85651560115686864449;-0.33283392338905143371 -0.66808888185038950436 -0.70683666673489176091 0.29225655488279012051 0.057164493083307316157 -0.35684396570941928628 0.37877399303850112222 0.1211648983195507262 0.85569924347921100249 0.73120024983399223295;0.99175150408812962066 -0.60587981239979527004 -0.12584706950446777896 -1.5062162554829425787 0.55799287076905523808 0.49208433641818433157 0.53131743086867255776 -0.55960300949949559612 0.27685776296869690771 -0.36458793738282019303;-0.64013863783273838859 0.85579859476274433572 0.64840038511803765875 -0.98143058905662683422 0.12971618144849578202 -0.035435456674615561923 0.41522634297933258551 1.0346120788088029041 -0.6978407828530927004 0.66421487074262985928;0.51554292040689997378 -0.4965726426353337386 -0.68364195807899375001 -0.17946722932661987593 0.20903574337861896559 0.71346717936841175245 -0.41575662037971383711 -0.4282974278948180058 -0.86847173565481383672 -0.53590982320080060575;-0.035799014526867692365 0.32683720470358473831 -0.42215772707232135375 -0.59133940876347668159 -1.0681207663845944111 0.32869723169767767201 -0.73198653538782854078 0.015458190916339476645 0.89714083803154376362 -0.70323486879390340043;-0.11022336846268089572 -0.58083016063800174678 0.74867391286533291339 0.093348797014619802614 -0.58913328662638020372 0.18902122617966818363 -0.087051520264537690652 -0.82775183379904515579 0.28569762733587555914 0.5675459456449597484;0.64789432834013993556 0.28802086845957536321 -0.21317763111327822645 -0.48002806140697168447 0.18273063208929982149 -1.1668246363014447287 0.087956073547273291857 -0.66319895569253006773 -0.043745888695121297463 -0.21486455911006135944;0.21357738130688069811 0.042712694820538354978 -1.1207739050458647156 0.71415062286984820616 -0.049307506739190473666 -0.70233805358399736818 0.52617578386028740489 0.23419202652466028503 0.61441287331280136641 0.61375095448553140809;-0.1361858925306455026 -0.64854394054922337443 -0.48369082649492523007 0.070766680903375081546 0.13815583569591180502 0.98901435382824731679 0.55860421261581649777 0.79056455219322396832 -0.16851734746260479958 -0.99535968496795945715;0.12970800547421457161 -0.016376706039365838269 -0.041188028517825638064 0.80586669428542856419 0.32964183226862636689 -0.76786154706554488047 -0.014125868323772907548 -0.70483810103733413044 -0.35156227355107527721 -1.0375378823339578283;0.10814139526374064171 -0.28487661920670759308 0.99208820551974497004 0.030829684998432468207 -0.66697895400145157385 0.18668248825043362582 -0.35125784551059457961 0.87400166923058075774 0.82548773727697744018 -0.62285547303555155452;0.89796825279987579904 0.044851990018156637219 0.62432558807177540583 -0.65704664746705387923 0.66253892843185591133 -1.0041813748804104822 -0.58578883793742675401 0.30242062683488851738 -0.04369179674908509059 0.25097554258309273667;0.70511805315771192149 -0.37879808421580352107 -0.49356945928385870248 1.2439649243874466578 -0.66850069761080510578 0.086798460420442494212 -0.095069942382438890616 0.89678104310873074656 -0.58024820792166087458 -0.12137876998250346494;0.70755436724693110406 -1.9055048122015230128 -1.5041848690333039507 -4.0585909823080985603 1.7310379932311139584 -0.90708662044259713575 0.81297954922302662073 -0.51295535357589616687 -1.2118300060832765119 -2.3894961448617144661;-0.1961650571561033285 -1.0379669338159616121 0.99398996456168298153 -0.57635451998147679831 0.66537545410590437367 0.33839726964467170545 -0.22608282906940949109 0.46446400391059511348 -0.33259636615852339325 0.044524536010914210482;-0.92856107302720902741 -0.43590465772582914772 -0.34976496071041324187 -0.36939627610449882189 -0.67671029825495498944 -0.43979814976165187979 0.22404924178177956784 -0.75074662891370980145 -0.85658258973814449533 0.22293985061092613797;0.10873006155278383544 1.0884656040898854634 -0.14758174642415652911 -0.1074229316632197978 -0.57446772004037194304 -1.1170632603944925521 -0.82376939587230946227 0.83996908424642180435 -0.63906861361241429353 -1.3355551023380396458;-0.63152407087572215438 0.4948732441013346528 0.79056101620488816728 0.36796409580695033092 0.20028772578985842845 0.90013593129468483234 -0.16878842289221857031 0.4740610135567941974 1.0028979722380106931 0.86731874519240903521;1.2759074569843813496 -0.40318958828517797999 0.42234332414779079956 -1.2763547486375621531 1.124863862320031771 -0.65528181469591983976 0.28802163251984341796 -0.44292573519399369708 -1.0722205736388679131 0.12973210810880939081];

% Layer 4
b4 = -0.53761467878566160383;
LW4_3 = [-0.086679781000195785245 0.077933351620787572056 -0.49990232956791258445 0.089323392239660140413 0.092096594560019534592 0.30244825066223635091 0.042254534237178717482 -0.047796141809997583216 -0.038721954461113469725 -0.079404572695810818339 -0.011728248961982257886 0.091144135417667832 -0.26317279262016290975 -0.087420332308514592246 1.2535945975273685704 -0.015312033065966108511 -0.18357060117145712619 0.0099102286218528748418 -0.10038257165746138078 0.33021283447608273942];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999934;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
