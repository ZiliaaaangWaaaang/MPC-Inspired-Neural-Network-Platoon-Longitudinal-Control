function [Y,Xf,Af] = nnmove_111(X,~,~)
%NNMOVE_111 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:07:02.
% 
% [Y] = nnmove_111(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.70139767883548;-1.99738196042707];
x1_step1.gain = [0.053913604005474;0.149967019141203;0.500604127399131];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.6804342636566240721;3.2278841332042418344;-2.9601572322219955602;-2.7354939067487258342;-2.7041941309076968913;-1.279542423441325294;2.0380880644379728572;-0.57841015208173396367;-0.97447401627862895168;-0.12225239201994271554;-0.35489866860262747617;0.23497816788526301734;0.43881061973154511513;-0.94885358893826976523;2.2796713366194341077;2.0129819237252517539;-2.6587670431733605447;2.7839347802094263074;-3.6178624950448998732;4.0989834892346408424];
IW1_1 = [-2.0442994619786869492 -3.2815750795771894133 0.02526912234535105134;-3.3890822467886012603 0.15082156587570533235 -2.5549657277809596501;3.2220042778232063085 1.8959306049353090717 -0.3983945431944812543;0.64875766832955150676 0.63602332980254028261 3.5910337388499069533;0.54752944989395269104 3.0319399255663821435 -2.6608278117363304283;1.0647747161397220772 3.7939510511777512214 0.032711746432656778338;-3.3690198506665658407 1.3744748383694029847 -1.3549269509126924405;2.716898076339107071 1.82559093913042636 1.3476027752551977823;3.1617332813468745911 1.7108395579377291273 0.41011047430687380677;5.9996225083281400359 1.0576441268709353416 -0.65387668503112716945;-0.96773514512543590271 -3.2052204220546136604 1.5804385642288054648;-1.444309118365793454 3.2138014343689094154 -1.478554483962524646;2.7513896806301807452 -2.6484874867301324564 -0.51740482236668783322;-2.7760303093470737323 1.2510460649372041608 -2.5427706673520309444;3.594801833648626932 0.96889572170317839195 2.1824832941148306631;2.9901334647765049901 2.2903281225060645454 -0.27025547144406431022;-2.4423987909249236239 1.7419256762648385184 2.2511421877532709068;2.1513696209910126989 -1.5875710178451516441 -2.9342668510780054447;-2.6292219031743484514 1.3441975405045207825 -2.2944368274742794611;2.4058858597481598274 -2.602098490516735918 -0.032693274355830442834];

% Layer 2
b2 = [-1.6083153903191007572;0.90396856619404242217;-0.723180234935723254;0.65956803635654615015;0.25296257960821755262;0.27607490277871027384;-0.26119222766166022565;0.97962494479805406478;1.3836241426756026307;1.8355178409094123904];
LW2_1 = [0.18050909967163511483 -0.19101292989873749906 0.28316773973802028541 0.82265413062665604382 0.29131251244770478559 0.21646678528600360458 0.50195644320710430808 -0.1077196914429876945 0.039480961005183168311 -0.37128961257012077501 0.62761452390403649204 -0.34515378095434989802 -0.34520342002029918982 -0.085075891380229445859 0.15521946649599840939 0.22601572679225961915 0.7311049992934386399 -0.23013978067586438048 -0.44207210953216519167 0.35159785863513920434;-0.81846031497458138215 -0.3304128243875695814 0.43329763450824465565 -1.068224140339179673 -1.5960744795217973735 -0.25136746672336196529 0.63491108952311448022 -0.035434245473935754855 0.84030318827779115765 -0.3539574197885772544 0.4252998682874780112 0.11701674925445854081 0.23061832520684744097 0.064363528512162468398 0.55614840389321762437 -0.47940414082292459597 -0.42277306452891683097 0.32992808500610232292 0.26685504995361558622 -0.6382516302340941472;0.61348073956788240491 1.5838972570048197586 -0.1553260181542463203 0.43587602752114884552 -1.2613407730517502969 0.055833811639940236771 0.88872512232679912181 -0.20836287179390064472 -0.12714392933884802184 -4.4186042777364002987 0.90195274355795984622 -1.1454773528697232976 -1.0437906006538968384 0.34862893187652499449 -0.7302913806163193744 0.086979319194349799527 0.044319600326652483502 0.29737995527675709084 1.1204420220598434454 0.1791178368137885113;-0.38505863068734680343 -0.020791101261044882959 -0.24160853553899044877 0.44816324945636848431 0.23238947357481232192 -0.69922600976471260825 0.58590494513658042397 0.23608309765751792075 -0.46687964128675041309 -1.2914152862094578911 0.75519867843926968831 -0.14942677187219388646 -0.36760100746783758163 -0.48592463475956254593 -0.9621710000838380461 0.22289451300224072394 0.023393958401716870993 0.53259695648731286699 -0.050210104802230669241 0.16049316173685426734;-0.15352928620190597897 -0.56590105229518505858 -0.073968978247964972672 0.4202815766413132148 0.84289256910184939819 0.33257454348031045832 -0.72561861803420735217 0.19350632975531373292 -0.38030834281038550237 -0.050761681296365192273 -0.34098760571433461841 0.17022977304463624004 0.31932512411062685675 0.066992932363536331075 0.2115225327460855953 0.26626109479835524674 -0.25829950608015783686 0.40926040357305998318 0.33935322137468848513 0.64648293633368159039;0.16164163017789043297 -0.18854178388665160382 -0.65474982625296640482 -0.51669231791360892281 0.83201084164919369979 0.59819262393008321155 0.82760057060551217578 0.083148992616084341223 0.58920230455241628942 -0.41566652496286621288 -0.28154717020395142457 -0.10606260198682450346 -0.07223296723702550548 0.68827051417063855876 0.17770724681117486266 -0.226848373082490673 0.078542481073657299806 0.59985407787154376713 -0.88175937948888782891 0.29978077959192295232;-0.46326960617549289845 -0.033738137234134463194 -0.40304818037528372665 -0.19826343426447204377 -0.072536008593328010763 -0.20130857541652452669 -0.30014875857665052061 0.22622720167872878427 -0.20374747292438183388 -1.1103176710861459853 0.25745385959680777699 0.095646398718880115686 -0.68041598631862376667 -0.63384768057993490231 -1.1828667322812866924 0.61994747266180483258 -0.087941160914094831935 -0.13717013733318134117 -0.38535647407458428759 0.61969884361705163123;0.48025714376748562806 0.18709287515996247953 -0.15884819247294151845 0.070960622400862816139 -0.27868547026147033607 -0.21707171433528202331 -0.42479401840945218982 0.36380185096741618489 0.44895607017042959974 -0.087842718571242844883 0.35159757971170263469 -0.41657184973652106041 0.33286826715426487411 -0.14439629103595966186 -0.027479379302699686455 -0.26428576334791642477 -0.63688039252708739113 0.33776553029807410145 -0.28121966908578488464 0.50677336259631977633;0.14722494764596666394 -0.013188803847046400713 0.37298537541491627589 0.27465314338369040126 -0.27300839978616586734 0.64923763638351272842 -0.32494044822392093019 -0.18080006763298525629 0.32017111433902306628 0.0088764194364467745302 0.26453574475626595586 -0.27455882471151532576 -0.48062179530528315041 0.19526567481048084929 -0.7410795805674608161 0.16633345897807388925 0.22057477925047944134 0.44242111033638770179 0.25578874280992497381 0.38847582696637006361;0.3076275034151280674 0.20833472437268715782 0.39826092750477232185 -0.20870778353142330208 0.081624029377588613876 -0.66873077827564020303 -0.1916320909430483943 -0.38941693608003485894 0.67638343276808299276 0.39926415230365147613 0.38045962802116706225 0.044144597011505200268 0.0071248725344759565245 0.25862588182928220037 -0.52461675328293078113 -0.37412705851721150818 -0.23203494963174364774 0.45274533408206851792 -0.035341607576805378343 -0.022284809769150863701];

% Layer 3
b3 = [-1.9467441874623003795;-1.7545941978496302216;-1.3290526414893637508;1.2564674443451766539;-1.3890492404279757288;-0.85019613637890600888;0.65363303326189714504;-0.45815199019853164453;-0.27851141263760748057;0.30929988212689368821;-0.10792147331323644066;0.016851038086681670997;-0.75782504829574848237;-0.62653163427146918441;1.1847479601613992717;-0.8573206068643980382;1.3180401839613495873;-1.6075863377522159325;1.4408431295134469519;-1.888401274310884892];
LW3_2 = [0.81140384571398416202 -0.11762668039365149764 0.94377382010168897608 -0.6228594176260777715 -0.94733853213691332495 0.31237915289323786583 -0.60328615086729675543 0.044359631684734210366 -0.16333532352772234253 0.73307311648995598929;0.47041565934413370753 -0.75810248432832916254 -0.51156573673591831941 0.18847716755585611215 -0.060438705848918479469 -0.028583484254745498282 -0.84475705755578744949 -0.75379914206762621554 0.56979272764886623737 -0.89617001006835683707;0.53531687191683074989 -0.45322682368601885372 0.80489369343203043261 0.31351879513057578919 0.49843562214899828078 1.0337932396470399521 -0.54100080379653625595 -0.86983642752341172599 -0.42022043372961420671 -0.49439876897792700561;-0.7656496243280853653 0.24827073512485747786 0.98470936796810215608 -0.8443292785573864867 -0.47789508549113418612 -0.45983078376971570078 0.34560835896077685137 0.6966143861900534473 0.40850240377460506069 -0.39267959581693401283;1.1492021863306465246 0.044967875999532946896 0.25227247695290472285 -0.85192098261765514255 0.74410923732021028165 -0.29362456465744657397 0.27301661216548123168 -0.51672111096817185949 -0.30853368299196426427 -0.036162253124609994304;0.43928278405921117322 -1.3645904066773533181 3.7552307139133227487 0.43444349911119661822 0.45017027321201885659 -0.93151368963704117565 1.1035088498035985349 -0.91039786114559639874 0.26291644391550250681 0.058507724275558593841;-0.47444671212593486631 0.073724782020338677779 -0.65000532266666755099 -0.9026967214746395296 -0.60751777545025387184 -0.64502793151502979541 -0.57241621264516795442 0.82953169708353857725 -0.77823974852779165268 0.24833740559837835793;0.70541152734185164075 -0.41887708878949592162 0.073174100116534745997 0.26408475559918492825 -0.7303000236272990664 -1.0583371547951965219 -0.14837968629344042149 0.13833510537466661705 0.83174617685895690933 0.27259567690373148752;0.31340417079835675152 -0.55308791114939759304 1.20780058428904713 0.63434513525174418547 0.6864823304774350099 -0.42215032682706454814 -0.64428485164793380946 -0.2504192961300921727 -0.43328216462733992742 0.44572207569360661195;-0.33414029955502866365 0.81752135446545426412 0.076018991835955160297 -0.68539867295832868077 0.87540067507450569639 0.64699472451488826419 -0.013880316218928049482 0.90455646085165386516 -0.83422945736545539575 -0.15603795493186209398;0.50869462493209705034 -0.49651850058999896786 2.3337274191688819336 -0.30339703416746033326 0.14416195963633438026 -1.1251870894088611408 0.66684191848517837542 -0.4905836308919220845 0.036700334611604060187 0.47719363497818495512;0.32220735173335002255 -0.29573064872520943291 -0.4276334933838266128 -0.27893997978148665773 0.12975464879738063395 0.53342638562629995924 -0.71963978380713145011 -1.4143152763607391709 0.5881429237122401954 -0.32206316913911731126;-0.28584978497133101127 0.62929013775309317058 0.39601429762338469232 -0.53205231057644264414 0.30898449253245313662 0.69469827996035904416 0.36248397103998697411 0.40898368760118913867 -0.94004822109809627051 -0.6892707174386563107;-0.98234754038232352524 -0.78338388829559590931 -1.1036056595590773011 0.43544944209492669751 0.40926508432221203604 -0.6224325567156270278 0.1043068876450937571 -0.71460967002868869269 -0.66277599212761595382 -0.17045409848750492365;-0.16535760951373848493 -0.84975626477319066154 -0.19663922061677513442 -0.92815697729991331055 0.12928002094498361463 -0.021583446166918721087 0.43395716184431581963 -0.17348189683488468571 0.63689067766743467924 0.52765300386564395474;-1.1185220092804608605 0.42661894146245898929 -0.49857052153420594598 0.18515904721870352079 -0.67773384831685090646 0.952800213057757861 -0.40706875197155278912 0.46061741082970181216 0.46028625779545323526 0.77068515030448181413;0.12232544075301583775 0.040653678058680628449 -0.28742377918650241497 0.19451710087655535442 -0.59310360433234943223 -0.90653119258835002103 0.99511765377703809143 -0.11830900879004493942 -0.61283622051839492517 0.76283067874379340001;-0.31528253199771510973 -0.49793370923744378898 1.0233669017566491277 1.0153178141054131078 -0.70376156018764535194 0.8649457754978343571 -0.63642728354837341254 -0.54389383694185167162 0.83327400358961278837 -0.7224915679757832887;0.77987595907649720495 0.039574797711520580401 -0.022666655309907440818 -0.14445056682201273812 0.54083668453127708986 -1.2844734462088163163 1.0741593201656538525 -0.43764540626810044532 -0.01063489567602547356 0.31092534707488839185;-0.15348318399601945661 -0.86736126565989157822 -0.24224411051371963488 0.69467583693212175966 -0.83178074916645083903 -0.50523979200398527745 0.35391282934706619345 -0.39906253790845819251 -0.72911735265057897593 -0.69700652474017776861];

% Layer 4
b4 = 0.21769287990829577772;
LW4_3 = [-0.069068407703623907468 0.24337876397672805751 0.4409812618715634458 0.30461350657124691699 0.79774071483867403654 -1.4870151804695144193 -0.40210429267063502179 0.072020694337160601206 -0.38409827078314934257 -0.35470142696821677086 0.99087945428543133808 -0.22967654693927230802 0.0083082869965137827462 0.1921700829545849587 0.71091117244719448376 0.65159242211526269273 -0.12797415630572109291 -0.87797303779750091035 -0.060325920962061081732 0.29381815173263525764];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999934;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
