function [Y,Xf,Af] = nnmove_112(X,~,~)
%NNMOVE_112 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:07:04.
% 
% [Y] = nnmove_112(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.70139767883548;-1.99738196042707];
x1_step1.gain = [0.0522252737181727;0.149967019141203;0.500604127399131];
x1_step1.ymin = -1;

% Layer 1
b1 = [-4.0594313675659581264;2.8659982816216253987;-1.8867678412922705977;2.4010909121624899321;3.278098487173569886;3.2996326166897005372;0.12934584109159330545;-1.9409892285139680457;1.0578976252687100068;-0.093903403698558277068;1.3569257146573574513;-1.6328204369260133078;-1.3140852359864223509;-2.2685065749490749276;-1.8501414414205843428;-2.8337483130789329344;-3.328704653771615618;-3.3951552253408325832;-2.6593598025810019081;3.9681028057323124436];
IW1_1 = [1.9581601660108494123 2.8747556622541283744 -0.79413293505541382444;-4.3273049917949171217 1.0238009962382530471 -3.0934184312472798872;5.1610007671277822183 -0.98476874360904020911 1.197087730414343687;-5.4970352138624445359 0.028694796212741655733 -1.841127566330438281;-1.368473987320038221 -1.7115097197657067607 3.3561488076976786488;2.7574572419967515735 0.73196996814181569668 3.1680075267176004417;3.0169285347654279938 -3.3716990863781197696 1.4254846013049837783;3.711883264873103716 -0.91966270200910449351 1.9717455068289793108;-1.5688175985389940514 2.4879164903483701465 -2.7404010107702259091;7.149197532367273844 1.7372359011549167729 -0.82153505052960218435;3.4349528177399482054 -1.3440285930128874625 1.4096861208476194616;-2.9067067281317617855 4.1807254282226500308 0.32367839343589388523;-0.9683573871288220225 -3.9457277919928048782 0.035980357863651321604;-4.1644112417081684541 -0.79526797067484078507 3.1766439054709283418;-1.7227240401945667081 -2.9528213781555319173 1.5841573991963582291;-0.28056872267378768493 -3.2584717636080999803 -2.4091692783904381514;-1.2681258088208033907 -3.0573530010842784321 -0.41317908984906692726;-0.91998965383338904278 3.5747476110201619193 0.12641744077255517853;-2.6877659027794353896 2.5631507489092930641 1.9357039235519848397;3.077894598266027959 -0.82121105462837684641 -1.6324218826754883782];

% Layer 2
b2 = [-1.0979221101442935282;-1.2456806369498529818;-1.2382966186225734528;0.77430878285661641769;0.15334157363217967851;0.2748722624568733508;-0.45123815711331216605;0.82867334010142168488;-0.80771447672917284777;-1.8707565105177239584];
LW2_1 = [-1.2401526492147245673 -0.82795083469554053845 -1.9848994563152713155 0.28125123367290416621 -0.16946958912505000194 -1.757797027419715219 1.2498887912756444507 1.1813622630735760577 -0.18941628020087503126 -2.3506082810080086709 -1.2555045583173420898 1.2453603264976926823 0.89791184342148311348 1.0275993925168063203 -0.67186766671361441983 -0.85129827624607257164 0.31265657238570160326 0.33118253693275317984 -1.097597029065541463 0.35296828239406530248;0.49615576190019194947 -0.2261914001844518296 0.010891178616291885203 -0.4013298774478959996 -0.40727583315718041135 -0.34969428093731458329 0.17709421945152314937 -0.47702930364535689467 0.50865578466203020813 -0.067381134483471105678 0.067783278978394020942 0.42102008856997991115 -0.37484927986227917218 -0.081604144419802765453 0.3924971592902934403 0.37265209500029844447 -0.22714355633124666545 0.79694069050266658216 -0.50211586637907912323 -0.42811968839212316551;0.73144415116787797615 2.4611601552466804144 -3.1978550675932977398 3.2615337802981274606 -0.91811363654327893258 0.55488529309214629226 1.6701270086104433865 -0.75251903949558274221 -1.1599934148307340376 -5.4443457339234893055 1.4296810374499000496 -0.89477818201663461561 0.18911993917348554617 2.8956012618163522454 -0.12260016073231592981 0.083784132462755497861 -0.050244716857877111393 1.3558357003858378942 -0.66078131176958299076 -0.010825975636001213334;-0.58829684341597554553 -0.21808983582246893596 -0.16217660667731170765 -0.42186317455328903314 -0.15285051027878826524 0.72962098066865377355 -0.66372615767229703465 -0.51144384738864379081 -0.18926599208177391498 0.13528739153158397812 -0.59831813085906981886 -0.0080088423493438597872 1.4260466363142545454 -0.7370845725092531886 -0.22437219150442128113 -0.67920514511013041492 0.35434176174485437771 0.22734630908043831909 0.35669371953133421904 0.6437374676158605924;-0.23426109000947248351 0.63470543356871478302 -1.0111016338574798645 0.22037965284160160317 -0.091465191039292736974 -0.28653830939947344536 0.51024301689750140021 0.77395018956729766391 0.11896929086990719326 0.23630226448840072062 0.24894439814387006593 0.023179759453482259857 -0.37218119477502070724 -0.69817065935116118247 0.21047600008022393503 -0.11503149944576869512 -0.13839198930075530258 -0.75055374978528799357 -0.82904313010628005731 0.40085207642942582984;0.064963607340365020493 -0.13649707651448209078 0.52962559371001460828 0.47767966471674178086 -1.0499830030586807528 -0.91752404879915427927 0.89852218442692444178 -0.83972491738876109402 0.37985181072957419079 -1.1224637984447123351 1.2886173381092320689 -0.37826359927827268859 -0.024149467170622454515 -0.6944282077587196067 -0.68247646779055559652 0.61372449341372603548 0.079636916466595875086 0.038962492655689746901 0.13482513875938609282 -0.11835414302970216627;-0.17209502407212942665 -0.40916020085872106815 -0.12426949922752721089 0.39021905354761365903 0.67897122454829073046 -2.856326012431125605 -0.97359247630734901957 -0.68253668007504431081 -0.34017626620697039019 -4.0306110766334075635 -1.281968073647545614 1.8680052965361353401 -0.43654830051206217068 -0.14622995182899611866 0.49211558441886299464 0.33365026993233010133 0.50449464212290517917 0.92099080955124179582 -0.21332176531090610294 -0.364574247062897705;-0.047621173121955767682 -0.26508223316168649797 0.39066631873142115827 -0.94638319235405832242 1.2984053938950543827 1.1372703273337971819 0.43915697231105765841 -0.10929162180157044049 0.25255289900099969769 -1.1301749739290505303 -0.87633715567560832582 1.4326085339095495641 1.0882383375767705758 -1.2587786903274964523 0.68504965729638334082 -1.4644034238144854054 -0.0093480521712538192092 -0.32244964420616950562 -0.068606612455819920848 -0.14214762820486245842;-0.61965451396733484124 0.61971625036888444704 -0.098264686279885701814 0.30549520862719470315 -0.10992213981483832386 -0.22264662914020438844 -0.26441094358446176615 -0.17715826248079774574 -0.13729925200075407399 -0.13348087668313945997 -0.0051107863442932839615 0.17251038251897712894 -0.10961982829522530503 -0.16419376541759217458 0.48269657025930251537 -0.6290277202985135041 -0.58707891387892408019 -0.16394202301881996564 -0.81655334999119988382 0.29950678939176106352;-0.1555968457087264778 0.56396471987285590188 0.099596029861062071453 1.0253043401307981863 0.33777627626505318803 0.38078875756701363597 -0.23030660118540122183 0.55769369825076364755 0.205499383583966716 0.35201872304042480799 1.0651132702860361956 1.0229104815248055704 -0.33724717268704973439 -0.20880187663681792909 -0.29885880115586821448 -0.10884189621432638351 0.27727270503293338644 -0.069980116508661233121 0.08290614526472593615 -0.81141717737618201944];

% Layer 3
b3 = [1.8872548279129108817;-1.7239610850917279627;1.7417678515912318193;1.3906315933683233155;0.9898816162865681223;0.85616792048416834326;0.94571513421799791033;0.54742886083235420269;0.28212555762937735482;0.42392457022646401477;0.38123277400854205244;-0.57879186301648499757;1.2282324056610025576;0.73221413314015981744;1.3165749096225582981;-1.2570047548543972216;1.3043994419181750288;1.6559372527789419927;-1.9629514808842076778;-1.6693500862385366457];
LW3_2 = [-0.5713395365474294163 0.063398648722573766601 0.38381371411517473113 0.4047522661176986003 -0.017950413245555907338 0.76744294869039153539 -0.039421314132170634514 0.74915064717110213532 1.2073596241887194491 -0.51400037274260135245;0.29732205327497174263 1.0079494612035799772 1.0738577762657479653 -0.63266693074061930435 -0.14961700146289397262 -0.25944577986179129248 -0.79661689904250188032 -0.51972064742676660209 0.083804488385340950019 0.67502179785223204167;0.073529638015076170809 -0.98773615505110334833 -0.316721634104391081 0.39776283612949198121 0.62199425042263734031 -0.88509639627310465748 0.27728678603335865649 0.62246348928010353241 -0.49021980790006025597 0.29778414816282561262;-0.46037697336863481201 -0.17756756153089284234 0.57330285028533733982 0.54584008539408657157 1.0924981250455390036 -0.82684887991855426925 0.074976354304027201247 0.27933930138489948547 0.80041874932656675856 -0.027405709123272094241;-0.31705698648620112001 0.17334114669464570357 0.75941872253727837894 -0.73517034795728619656 -0.31118263185209271704 0.5965630013640847995 0.1925042858995327788 -0.15192756431313000909 -0.54566449290255147897 -0.30770540638099097563;-0.1084607199540742889 -0.81046055762013213819 0.97933255199137814184 0.031626221684502887899 -0.42566695872709131576 0.63671014920929525083 -0.24421067063147605669 -0.54996454266029659586 -0.58761526872157243684 0.51816174337920428705;-0.37195470859072365943 -0.86279691204250985592 -0.59350957572916263061 1.4345635727362300305 0.71356685925844975937 0.60440371468700826441 -0.56761552546148086318 0.73334953229624533222 0.8775364038330657479 0.58497230010095913055;-0.67567105093264701043 0.11013961350533699179 0.53886489369363954616 0.13292935413086021113 0.69972265880295192453 1.2243891428332114302 0.54297318356778512261 0.25274730541066120493 -0.28488596543383121196 0.64974867985411088878;-0.36779209274606472491 -0.22203203303256974221 0.41785064086799528216 0.13975487873698150265 -0.81096351222122009528 0.40566189179916162244 1.0010130453552041896 0.83419166333968552962 -0.71705363410017008974 -0.46675336232903669176;0.36626055222187148264 -0.47026487479682588244 -0.66886891188037400635 1.3100173696894688025 -0.24704880269617715549 -0.85354583355283020207 0.028444453003834579974 0.25794814322504139303 -0.33682270267384245566 -0.99649807555604019704;1.2367118119831839174 0.36995871450576678363 0.44758922706676007586 -0.24059640636437251704 0.37386952446651783299 0.34291597611808555257 0.6869766307790444726 -1.209670738696415393 0.36128314704786029798 -0.60342569335461315738;-0.38194804342307681067 -0.045172989059157654668 0.67314626075704286912 -0.37615307447423290688 0.057549021667194076579 1.156092751573707611 -0.39801061452205810376 -0.66021675195900630939 -0.22858950839001529465 -0.040190161957831142814;2.0223005965543925377 -1.4225351028185397873 -1.5407539985761438128 0.38355838589197949196 1.3392244911900896831 -0.24557312234711964338 1.4431108498155573727 0.7806858775913269044 0.75908953923185173984 0.12093618885585291634;1.041787219626484795 0.49118085658281501749 -0.28798227069021231639 0.63001910635626978685 -0.63996707386631035419 -0.25119241635058059403 0.22011289228526345618 -0.37716977882428487368 -0.76761083607964630815 -0.41841557683194452455;0.77401749082882032038 -0.46791617349885239463 -0.40501494134152837834 0.77188820987469419777 0.89361457094088925235 0.94150523945418507221 -0.19221362950978912454 0.31343286254888330644 0.74141914036652800668 -0.96846944959293768118;-1.2021732455027467346 1.0234247578031310244 1.6571798632909897631 -2.2751581681515937738 -0.014054270871608830901 0.48792041724340878828 -0.48526226792536109045 0.083212391804824009656 0.20187181751219057668 0.3925404212773487278;0.21371949782516946881 -0.53387442789227257389 -0.359912176909244097 -0.63352083327526464984 0.62536797097469243312 -1.0028213129924878899 -0.55823622436196984609 0.064545825327425476736 0.7795125396809948759 0.5664181019015197549;4.1074206890740239118 0.50416510168086570154 5.7370151075308086774 -1.2423181362000392802 -0.55937506317729934757 0.67427945096155672555 4.9778326461308433082 3.0753265524617781068 0.35729602316664116346 -0.28402541476562231937;-0.077668918591288105269 1.1423670574303919079 0.0078842505564162557175 -0.52478087697457720395 -0.43390393613757072266 0.02878536403155594614 -0.084121309646197933718 0.58501332466230926421 0.59932719671159950803 0.51181449218543884072;-0.3329025119935047905 -1.3013481172466760949 -0.27867750939536523047 0.026502660242366148785 1.1109072395777697118 -0.17445230625214394604 0.096944395510113065551 0.77322712019297568098 -0.13290492159231687141 -0.1201591337210801691];

% Layer 4
b4 = -0.546833295326643265;
LW4_3 = [-0.11962832487508917589 -0.51269165584071429986 -0.80906041623396596218 -0.28720415989650777133 -0.020437958846261670975 0.022033211804856608906 0.78092282592958794929 -0.0034972220506635154011 0.0054209882965836403076 0.08565631723465594316 0.0086869359173156329712 -0.015303935302791553397 1.425156966687467941 -0.0013986048702347697852 -0.35474458848154966084 1.066904075733444035 -0.0094047050591614181347 -1.0117132667655532874 -0.36849088727935508381 0.0058052982309230276303];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999931;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
