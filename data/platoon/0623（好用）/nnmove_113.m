function [Y,Xf,Af] = nnmove_113(X,~,~)
%NNMOVE_113 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:07:08.
% 
% [Y] = nnmove_113(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.85918092085871;-1.99738196042707];
x1_step1.gain = [0.0522252737181727;0.148213484472979;0.500604127399131];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.4294406863850075418;2.6694477782474250738;2.7436707845430228225;2.058542779955991886;-1.9262804434961391387;1.5062412179930197986;-1.1228234991657057851;-0.52589282169310813675;-0.49130035814082051449;-0.51987729748174715816;-0.076853871656753558472;-2.1971833783766858694;0.040849552756435369982;2.1604061520940476271;-1.0269496184090758373;2.5520799618886238491;-3.4538799100086685634;2.69038306315549125;-4.1229848740643602056;-3.8354826586856471948];
IW1_1 = [-3.3915802760198898724 1.7943581924104297087 -2.7214773626740322854;-2.0527286519681351429 2.1925862586031041879 -2.8849801772722507565;-2.9778025015364830708 2.6315231171551420886 -0.38154049690355590352;-2.5485166619041139668 1.3991693136657756824 2.9416181111945056692;0.50940596884444511172 3.1154000230326057697 -3.0691607869084922555;-2.3263843863134838763 2.4748953732968783648 2.8472006475501006051;2.010039290472200868 -2.9935723376530978257 1.6849910065493254319;5.4851342172067267811 1.5908229932864552669 -0.22014057190346700277;2.7084033446995596783 -2.520548762774007745 -1.3871503554534587721;-2.4655910538393799314 3.4262559664094438538 -0.54972730986105677875;0.81387032521953350805 0.48510357582421897993 3.0474619762806747225;-1.8826286502944535872 2.3103137439712155832 2.7170974522200284085;5.0614057862831236534 1.8117144545329781913 -0.7538510012897290391;3.8833718108166719318 1.4617258090240599078 1.6182934536784960855;-4.3480212685333015088 -2.1574768952098870578 1.0679048704473732556;1.5324463273206847536 2.5877101762227576742 2.7690750150367104965;-2.2816992362650645454 1.3841954946893135769 1.8462145048313107765;0.12685480702577053846 -4.0693428812400762595 1.27064924794014944;-3.6557315137163262087 0.39998857469829668387 -3.3805791176978687851;-1.1878294488971889997 2.9768094652814753864 -2.0252700527673543895];

% Layer 2
b2 = [0.33794739488361552615;-1.1035894993292174604;1.3845512915401390064;0.7162015041000613369;-0.40429419956157364169;0.11115467843649208535;-0.65827236244979614455;1.2584404225107295172;1.5171157505802204124;1.6260262598282779756];
LW2_1 = [-0.50451808665980812929 0.9125814650424467489 -1.1379525465233744086 -0.47687336372315569655 -0.41466653377370349398 -0.52896443137599413742 -0.13864587566385494499 1.9468198539892092036 1.488631979959210927 -0.91367413483587112122 -0.060909120169198742445 -1.6511886645925779593 0.97588139117943206724 1.1480282482335713024 -0.66776809996743291542 1.6168785821461324481 1.0264710421345044633 -0.45877511555790218001 -2.2825730376474338001 0.86752568198151636114;0.49650326737266564647 1.2436857581530806893 0.50138951805245712823 0.70940462639440426962 -0.41464354290160843064 -0.34089515918560470142 -0.67911598211368640055 0.67671088977205628989 0.67967065243950175457 -0.94911926792653911189 -0.61254555269358379466 -1.5871198079508332945 -0.13179676423591246692 -0.28633312530376531235 -0.26897616004128410694 -0.041008984976678347634 -0.39914005545118846907 0.42173650477128127312 0.055273846071811162661 -0.23484677805800735495;-3.6990844777190630133 -2.2047334291359725889 -0.68418926274484048733 -0.81063980077492603371 -0.17660340710886043847 -1.4605758770901884347 0.11226346945056925319 4.2367991853140534175 1.4700832173379534407 0.36425414106374831569 -1.2646367478104667548 -0.45789019559837768059 3.6728734624271321962 1.7577180753072012553 -3.4376037826328262881 -0.57673725650053819791 -0.5348323666632233131 -0.76817585729157245034 -1.7454252140256756309 -0.57321279332503949355;0.15590146534868851158 -0.43459561038372335195 0.54625029182861029042 0.39951636073979512886 -0.30320116013123277199 -0.25643671975615772718 0.22724507949543457097 0.74105902092446407359 -0.58653439879443525218 -0.023419273496271379026 -0.054266408985676653498 0.45670961645443769461 -0.31055054381425317711 0.18225550579665905637 -0.31733036248975754479 -0.034177778488947610502 -0.60982470156861767752 1.1537212881133616094 -0.92740184907790923496 0.60387276576739579159;0.087641084893504653253 0.17635435443184399595 0.15577939682883745753 -0.29296788637922027698 0.37368158620438240991 -0.067901347546924908927 -0.023146735233326182907 -0.33918498418235643044 -0.51908118192824592718 -0.2971130457868091379 -0.22369467036010615146 -0.064221232550713963638 -0.27965618946548431722 -0.18322044829887362827 -0.03765011618083640571 0.056982448880617771192 0.78415634372565878873 0.3406827426246248347 -0.25893675880597694094 0.19521129014052018835;0.49171615534635071398 0.59642604872888849155 -0.43997879109157145283 -0.07122265718531294032 -1.3362154023893402233 -0.07984557546203500944 0.18302425978550268537 2.1102372291513940006 0.61648920887910163557 -0.36442989940251963032 0.039381736520204282948 -0.48229281798544804127 1.9682648007084433406 0.88375718030116201529 -0.62362135848992417131 0.25960995709342976623 0.079632541465135223135 -0.076556223442735008011 -0.90741154082674713166 -0.23466114273654029021;-0.44854814232946960129 0.07448387527097791172 0.17826331864000205529 -0.52204072578491445 -0.10999675829921064241 -0.10723606328634108231 0.12026507041416065191 0.091253811536056730902 0.23301266649301924372 0.22384312932879180114 0.087990541065320185266 0.20081247235597785017 -1.6100338178459208116 0.87836513340752586654 -0.53701180302853257498 0.032067045376555448899 0.47158222429593171787 -0.39232773620067795672 -0.29576987431918122518 -0.3814527861772584183;0.23414564019049549648 0.036630924240948783965 0.62546074342267476975 0.059101601570732624491 0.23485587530000295864 -0.52715831397365253697 -0.23522378976431035369 0.10999394893131217432 -0.50502707078450903566 0.44719013722097145092 -0.27859479490779759381 0.84980575496052646045 -0.45565221349947382379 -0.39593101525655627348 0.18221941991800272298 -0.33964839210007041759 -0.0067646620792283507217 0.62780616696607127736 0.31005222430555184898 -0.058736445228663711204;-0.513938934855857954 1.040867844450170665 0.0088786734449115903289 0.016974898990826891437 0.49230045688123341696 -0.041654737400906638456 -1.1890464021660083205 1.7254862639787296175 0.48723489328615243732 0.20407813675649078 -0.1189074535319128989 -1.2815105565334852233 0.25257465402116280329 -0.14497718710718743296 1.0299215152203102797 0.24480532990673437022 -0.63343080590625733262 0.37307083812352426211 0.062635419279826576311 -0.57502680067433287192;0.3985020749509686766 -0.12813339382550259504 -0.9453715945556576683 0.70457651890010031259 0.16407893938657952537 -0.21378488605101669817 0.0011226828857591733199 0.29795385132728691158 -0.0083918409780241592921 0.38847663849161528926 0.24999543535536589145 -0.53176321002729742826 0.47619804561529499587 -0.94548463200383126015 0.72946799090934955068 -0.006957434683919580011 -0.061685107075374008556 -0.61611604865659608254 -0.84234424514570327425 -0.082319189795905661766];

% Layer 3
b3 = [2.0392838732698823634;1.277235378328899662;1.4231861453170540077;-0.97607668634554589637;-1.1753359400084197883;-1.5674655734142000085;-0.84321066683685186316;-0.60013169131422494651;0.069382817421141759762;-0.15243921053531345189;0.5612806057097663448;-0.59496923203049112416;0.3143562712505589829;-0.51694180093622243977;-0.41712874527211818432;-1.0369784901508500852;0.91619765687366683249;-1.3323624550486676821;1.5041172242512153012;-2.3595478019838318495];
LW3_2 = [-0.1089962666019638482 -0.33275704770001712784 -0.54739945124981703728 0.51756475050335348786 -0.57722471469518088494 0.90066984090389223816 -0.54898650449947072882 0.82773253225957088564 0.60001772124354746385 -0.67865172784203575684;-1.3826256946545740778 -0.28487251069376617885 1.3201447049482510909 0.49764192225476472364 -0.44398260067591527323 0.82915650797117979032 -1.4970891795745380204 0.45564766458619948564 0.333674780938250648 -0.087924195080209960329;-0.14110002240069516311 0.64884302639653046452 0.14062001831194800849 0.73219250968510607436 -0.17606982744546870179 -0.52966453991450479499 0.91758603599191734812 -0.025146410087381724369 0.64565447762542027554 0.91345209837264995656;1.1981480009710445689 -0.20476044288153463779 1.2461637228270519007 1.0365145335001759719 -0.7023488541257260076 0.0074601253044097254677 -0.063227100467126123862 0.30501320953762506294 -0.096543115166807191851 -0.24536996184095508089;0.27325739251686309572 0.0089702483210483668213 0.71783522709822344954 0.50143670591031219708 -0.93394929419679717508 -0.50602830823421063311 -1.0032290018672449516 -0.72884806147518177433 0.44546169156558895752 -0.36233621769285256908;2.2861657253845217852 1.2049596895730523283 5.3210178984498170962 0.69632912506299426969 0.16875215314350303086 2.0008151355644820946 -1.8631423983646397957 0.18150648655944895404 0.11612317886055378846 -0.25292708516746970071;0.86243359820168175034 -0.20129617963003851311 0.093156069707066899155 -0.61261635371345879442 0.5597683909504990174 0.49769789250857854324 1.1286244082155658663 0.61704209848385405124 -0.58578211818106940001 -1.0626055686371385089;0.3181508024308662419 -0.46726225302470891787 -0.8267030520384035519 -0.70079312292094397829 0.68027346382177544815 -0.34415997145190019291 -0.22140734598393099763 -0.27029887645897027193 0.65602863899832919437 -0.69144974163462624706;1.0838261232466499528 0.61464216357100531773 0.70875922856843487363 0.6241307497296795237 -1.165166090313570102 0.25370930801918351039 -0.061564838950742155343 -0.25974415843607873144 0.50436481450481807087 -0.92048962398887090863;-0.70730533898572245377 -0.32019019072916182767 1.2043984772505043068 0.37227922808977509384 -1.060130290097829997 1.4695673041271686277 -0.42102710802936271772 0.16267946434012114931 -1.2089895269064883099 0.34250451659856906428;-1.3567977071284913482 0.21089178310007533623 1.4029306308738322961 1.3558176821853371585 -1.0721313185284784275 -0.88166390737381417075 -0.24807312078266394173 -0.11809558796918782908 0.15219038836812492921 0.92519144047091361749;-0.94996739076659908463 -0.23832134967838367046 -0.19730208100526827608 -0.059699136689254327093 0.82885999740388816015 -1.0632255074852021703 0.28308757376059223709 -0.69193089970821153312 0.58752092181520965131 0.48546998832022802972;0.49507764783712915335 -0.32115454763682166339 0.91250491951365420018 0.28048039104690325463 0.37166994765684308044 -1.10620920922177568 1.148256015777761041 -1.1333483091469902515 -0.20866848385758016149 -0.049227045911980335524;0.45342693934471040018 -0.16574738064075270061 1.5563880706077519722 0.54477503851559205827 -1.1127087554184262874 0.32003469839017795184 0.57191616470404560424 0.17247185003204873466 1.2438162945637201151 -1.1789153488730506059;-0.22520832400767828996 0.34919023836081419798 0.89315378907223330618 -0.5575220811882601879 0.13471480370096125534 -0.27836623566707147104 -0.46167115010023740407 1.2226147748088278533 1.0253625684771574544 -0.052705417864075697343;-1.5033676981974215536 0.40781754996727670459 -3.2291048774183015446 -0.6171572901103862252 1.1433480961461968128 -0.44423855877603807274 0.27401808465604216014 -0.37415118423900173283 -0.82644323927675100716 1.1219039908095951308;-0.0058705850231105492776 0.75467106659825311521 0.16277777334106691143 -0.91705369198312525203 1.2160112996330851853 -0.36495571127634429676 0.9962773957664937674 0.067642890287253357173 -0.41507219578998577614 -0.86545790680916123705;-0.70164811060308773794 0.38386412727783747467 -1.4075324844600938246 0.44444406437197486737 0.6445031176295342723 0.34424567503308389771 -0.60881271650063339962 0.30197581689097696689 0.87843717350647809727 -1.0412166815043175649;0.51183810162630760665 -0.19360615091300406587 -0.089753926018636659423 1.0158714678492763994 0.47586576612682335297 -0.95617508494944347675 0.96534094114306079337 0.36907223604109645754 1.2579749593905840133 0.10822468590896250351;-1.6783133515698669402 0.45728701306662100645 -3.3147240953864036683 -0.16389951388279780375 -0.0094930932675196984249 -0.29453686875362949937 0.37329422225386238443 0.048381834184435194846 0.47441253968032542909 -0.21620750397570190349];

% Layer 4
b4 = 0.94386017972061964088;
LW4_3 = [0.38037900443870015232 -1.0602493703301565375 -0.2684385236759677662 0.24398615937115580854 -0.084603813392381280178 1.1100448098276598508 -0.25302002887963992439 0.071898784182282252098 0.25714462179496128114 1.0185981604906877429 0.43567975414859821948 0.16520097751815759901 0.17728774645390846243 -0.86546434155543383593 0.17542924631899775578 -1.5539955460218235483 -0.058513694398048099465 0.28254738280058178113 -0.67867161785422103204 1.8051414984245324202];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999931;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
