function [Y,Xf,Af] = nnmove_114(X,~,~)
%NNMOVE_114 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:07:10.
% 
% [Y] = nnmove_114(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.85918092085871;-1.99738196042707];
x1_step1.gain = [0.0522252737181727;0.148213484472979;0.500604127399131];
x1_step1.ymin = -1;

% Layer 1
b1 = [-4.1472412066225574634;3.4255728975490202792;3.1453359654886741126;-2.8040090322072663831;2.0784634685962606326;-2.0998748095747239439;-1.6915143465132760348;1.9954995418459700041;1.1537131659041275356;0.089565367501406187301;0.23093926434766690048;1.086550142351868864;0.74727720324918145423;2.230546580713443916;-2.1845463079601765699;1.7525000498758964707;2.537004759771583462;3.3452700699888446856;-3.2578755035749265012;-3.7449578985399587516];
IW1_1 = [2.559225419410536162 2.1899609547866640824 1.0104433917810518029;-3.4906159775094951492 -0.44862734093166029004 -1.6169587458780829703;-0.11607870502687261949 1.2944165272076082474 -3.4918021077144438813;2.6279322527869717341 2.6492921531774991095 0.08504637355683880573;-5.0016698261718941509 0.38713539235709287789 -1.1282961728573412952;3.5116936303008485787 1.6307026766370047444 -2.332904088094620132;1.3400283005175563922 2.8746085829985608129 -2.5874174575286099653;-3.1753977080231092778 1.3162865084847199526 -1.0011716751646297929;-2.6782170050749245505 -0.79085804425104100357 2.1026300380375682053;-1.8483949392959955205 -2.9600815951807262216 -1.5912361862197839102;3.9507960672602884244 1.7006402241608304937 -0.17584132217720865876;1.2829299597393739596 -2.3425718547771245959 2.5549563227726976855;1.0089940461365440871 2.5761708926785247264 -2.6854408714336170938;0.35282313976056661753 2.4111753359802872154 2.7661064114432170058;-3.7370085480538564049 -1.4486170345664501902 -0.26989216127394022315;2.3347298054961380664 2.8449366994081644044 1.5615567423326091046;4.4818009453636458161 0.018424070943255967114 1.5417707586624527227;3.2313102969955078692 -1.0009504028903555284 2.1400344978746907998;-2.1876041584489525071 -2.0677352358824849787 2.5975868528048589035;-2.5056029589599995155 -1.9980641457658776527 2.2419261736971494159];

% Layer 2
b2 = [-1.7199605533549309211;-1.1970951829571765401;1.0722926445546165919;0.29293167219170285209;-0.51414232809206583674;-0.51220944276782154336;0.697741639078667375;0.88472973683873301631;1.4487174419888120269;1.5806366735216330621];
LW2_1 = [0.52548800264011019667 -0.2820430815908607225 -0.071898908124174362722 0.098713702776423731255 -0.51259828312255895089 -0.20579439097422502769 0.26115569080745937303 -0.12835616815570466409 0.056393994044518808151 1.1516543443295410576 -0.17989043942251528585 0.34011738345338898837 -0.29473653434502417037 0.34354178225082204756 0.31306979491243380753 0.51250244184422710791 -0.23925236768739127635 0.43031194167237779569 0.87139132549727726929 0.33328418489487149357;0.36706584050250745666 -0.16242354753450824467 -0.56259488582214756125 0.088633297631197538458 0.33435554306843479067 0.57243375842788934982 0.027720222023016986845 0.73866158313153618131 0.17839792390696013191 -0.21387100247275553366 -0.43599306540941551447 -0.73279930257456271647 0.14659705919659637985 -0.55810889706757293993 -0.46618218226053348419 -0.12161472488946613313 -0.14571729309302366984 0.16490247553580256179 -0.20583221436546653149 -0.14541980323968400901;-0.16877140642297572271 -0.24468510248821928599 0.023954322177966516638 -0.24726460338111974635 2.0932000249103719369 0.54707262253824651133 0.80983364174002603342 1.028888337280737364 -0.66688639337954458419 0.47693904825193339514 -0.94354319441511924627 0.4999048680899205177 0.37495598259039769617 0.34788654019287434949 -0.072627248052275786283 0.41839336996589998607 0.055338216968983236499 0.58738160107418380118 0.86485768486278125078 0.28892638629974620734;-0.21446629895505986418 -0.040404371351435805493 -0.39107130286884272952 -0.2400108824020956988 0.89010824502379848333 0.5988076001043198815 0.0064810694285727596387 -0.60211686051135548947 -0.45203609207869327458 -0.83592668293410454794 -0.13098873740521993492 -0.83570593453908459391 -0.85055050537618670514 -0.35047142146796250728 0.45801701538632183519 -0.069396967498237982497 0.11355191694344024533 0.88361605049408464829 -0.045154956358606605782 0.38518122225501144618;0.3710420849089087203 0.55344327046729790975 0.85080832208815382334 -0.2451141700880345442 -0.86828576554424075074 -0.17769631827822177095 -0.6485667954653528966 -0.3499969685639355288 0.028095208986082611385 0.39126559899264662379 0.38493069315135614028 0.088199392237476928469 0.22882343531972273998 -0.04857057083135438158 -0.33600183247358561545 0.2037550986288619026 0.071658296748118910369 -1.0088474154801636562 -0.33764504255287736134 -0.82148188776153285851;1.0705360925031182084 0.022094425674613775434 -0.012144662135248632251 0.19438059665757925765 1.0241417295045780467 2.4770634884613724758 -1.0459705749110010942 0.89372352120642994944 0.0040653381005721902705 0.036114171474463684086 1.2722062384908612298 -0.48828263244959729805 0.16229602216148186766 -0.49974221784960864978 0.3941443539672163654 0.46321782604327932376 2.5074244539454606517 1.6768241891742079464 0.47635645748020649659 1.0546857035754557685;0.10754783341064702573 0.11106611564200964681 -0.45458171713563672034 -0.2961000471715580229 0.079042563766703918815 -0.088395697520164392968 0.31382184701440019037 0.3814184890153263785 0.045222353348001419204 -0.19491417555782153403 -0.67742608621593669582 -0.54900633065632842289 -0.98636643051575967345 0.67075473735942459097 -0.038485950066426695415 -0.12970285539750606163 0.23599594977316604161 0.23842219645699727626 -0.65862576900186919904 -0.45112777258999409158;0.47003560576536679294 0.42332519508917626494 -0.074441193029652769075 0.093516705648935119499 -0.093202772880360273966 -0.89254086966995915819 0.071618895952224148616 -0.59866200039889039264 0.050995528377558566047 -0.31351274364544712281 -0.21819075327636955342 0.52100966535982351502 -0.16468355328586031794 0.17334706958527767995 -0.72980881103997152781 0.3474602055540279566 -0.52057781739883235428 -0.1896377939715136185 -0.40889236732655431794 0.21331281684328659565;0.42347347422207848311 1.074574039985324525 0.13437779880767886098 -0.29405207002884248269 0.67038182873166918263 -0.37326873074681315989 0.081107886711310403505 -0.1177834939018312238 0.2420968787248381493 0.15280642987822506962 -0.34435081995527538901 0.51447814889988363607 0.27332463214188718048 0.82993974662250269425 -0.16793191513014640859 0.34357031976786411853 0.1536037611979532147 0.36259012447251703914 0.36956762127498637982 -0.50271614636278338928;0.25112485318917071586 -0.36236078739666344184 0.80956571914318020688 -0.48700748563388518431 -2.2500729238421173228 -0.12057681778175913245 -0.22715657916318707232 -1.4628281504002387248 0.17311654161860931533 0.45510415567608519805 2.5427844358537150526 -0.042277705665293756343 0.66757744400767293769 -0.37052537183809880483 0.67272190247961216603 -0.52540818847096681932 0.24855484761742338562 0.306060892423800468 -0.93108888323361294059 -0.2023567618279603908];

% Layer 3
b3 = [1.8790066297231673431;1.4533879902048885135;-1.6833639721287150248;1.323073836831128558;-1.110048613137103457;0.93073579044689314088;0.69010155942815087915;-0.14353994084550308896;0.2502899902658465292;-0.26247706431353029499;-0.23618234033899362934;0.44984185243959590172;0.49548085952568782231;-0.50881978059584753726;-0.84623199152644179577;-0.97488363137538103231;-0.98850657616214510082;1.6236146611138186913;1.6925697347401207349;1.9412691150357217484];
LW3_2 = [-0.33643246682710742368 -0.62168232667253786605 0.72537170253973426437 0.098961212676144966194 -0.62074823400022127728 -0.87836680305715664208 0.5650684505243691591 -0.30492695388632889975 0.66314458857982994111 0.72622081559045681409;-0.6560282238954029399 0.15175877943609081266 -0.053179634910568707173 -1.2291027901866020677 0.68808780852710182963 -1.2266403987773510931 -0.89731743089465598739 0.82421725071437323962 -0.74206188673320772065 -0.98694737840419677344;0.71108516434975110876 -0.49892808787969561424 -0.078687572384394818825 0.57716165798378304963 -0.4030987883257952098 0.43721711385484796075 -1.0495325700536837221 0.44308095546009756971 0.087441577392146807579 0.56478864915389570545;-0.39524253994780789156 0.1707298614619552346 -0.30666415412155334508 -0.90397847691494259692 -0.66324677193080372462 -1.5805808521085065177 0.39184187152083710393 -0.39510935114430106863 -0.55137698292112036214 -0.36295048419977571363;0.64331826199558217461 -0.69328029355420950353 -0.21370291121160919778 -0.29298224389138372015 0.87528797842009742336 0.2614866974448248893 -0.61077217416227957969 -0.043457799047124323621 0.97045027140334227944 0.43603375473226740899;-0.34632538483331998247 -0.041156833834260386773 -0.41384147957263595075 0.21479497447388820608 -0.75082466016074167481 0.44045333904024475125 1.2319862470845739377 -0.5056082812009135008 0.1824842262618155686 -0.32916948660262079773;-0.1017844196644258209 0.74427532557077669129 0.25056767669068796822 -0.60415012989020067113 0.37481370771937799757 0.14076406241302194533 0.79549471411052941061 0.81110136094909190962 0.8462360157656493298 0.76245784037592467808;0.15977403459104555505 -0.87837323522482579907 -0.061458168009320295055 -0.30369172306618325008 0.30793227709733933528 -0.77818167730576004448 0.97507557555357060597 0.49765379824099681416 0.48797592000973016857 0.89435011178147039157;-0.41475972023034413105 0.72409371918696574522 -0.54130737591733302239 -0.45195794550132240008 -0.88734841837274769372 -0.59437289412329830096 -0.65424330281387621522 0.68840347129594459119 0.62633227738269603435 -0.36593451550013877949;0.46159152451658563843 1.0193618874967376176 -0.8508023044239287902 -0.063732869953154969167 0.054076802896461502457 0.57752397757040041526 -0.37430766635440176904 0.79462310686703530038 -0.13756176951798548824 -0.58892539908168617391;-1.0916128445818635839 0.027227859632685806612 -0.10728117521066701801 0.10658229830996210352 -0.17597878776674963364 -0.64473586844044683541 0.76535624608638230804 0.39097818228100239546 0.18407278025978426883 1.165492112149701498;0.58179817533419819764 -0.66942971974898546339 0.70080945193221722 -0.44811497863206034564 -0.2769487523039204091 -0.40180833151330797026 0.57842855886771782359 0.76587358432699226274 -0.78676860844522067406 -0.83906193285321106767;0.31503843724218327793 0.48721874894268968337 -0.91820217804444992371 0.72976159368514947889 -0.26303930093995797623 -0.19202686068942681485 -0.92349217034277331084 -0.46438042658405453977 0.89204225363527189785 -0.30900460914418753644;-0.64361675063585355172 -0.58726873375669819133 3.0848476936705160334 0.17601402154855450011 -1.2864040022958602716 -0.33780292055847666033 0.75517758535070622639 -1.1708874936876596529 -0.0050225562776587337477 -2.8206409016529851996;-0.45883989043317985335 0.026864658574347187459 -0.72775963764230766628 -0.77252652072763061675 0.12195970202898225032 0.82202614864319833998 -0.71870133735638019878 0.23368902992406465069 -0.73512872750961666402 0.51815834073225131018;-0.45306322607114257739 -0.75310771329870818125 -0.12241499960759728849 -0.50033284660294707891 -0.57804925702804799137 -1.4632003561195270347 0.46084350602543089348 0.93026584452455340912 0.55492803126557854743 -0.99892001256578344393;-1.1318941993982047922 0.520714291621717007 0.69912345093289762765 0.96711913668770765895 0.18745287123147763575 -0.36819932024185209052 0.46581477963351930471 0.20765249516973613431 0.16001516904182405687 0.52083614394191080077;0.43887334709455361192 -1.4235816809166788044 -0.063095908785287660447 -0.69240968989343465445 0.44733168115971122525 -3.1547270706089500791 -1.0253531351326932164 0.96107260112942272112 -0.47704170937200646163 0.72803001900793506973;0.20749922759029618136 -0.56125683863140318763 0.68106438637869892716 -0.93798763247975269763 -0.68946053899976700308 -0.3616609336482202175 0.54626185668686533248 0.021730450831617141583 -0.58816575717175823002 0.49386186576320612041;-0.049314739982559710474 -0.54250103046999287315 -0.73841329126859889254 -0.35942412355163233517 -0.74927442241925878985 -0.57062241294380544598 -0.087266944396091006286 0.19336066806440208032 1.1660062491596669965 -0.35873901899229670986];

% Layer 4
b4 = 0.52686389052344528849;
LW4_3 = [0.50208581519045036856 1.3147784277316234558 0.18235150953295606313 -0.78869067317482877133 -0.46050529670665318882 -0.27121870024288197154 0.61377859392960776308 -0.36644639623460850686 -0.18654889321060177942 0.22562306208436921917 0.64847477063658598428 -0.25470272580495811887 -0.22663000044648187736 -1.1764784784448027999 -0.19600041222178390954 0.98745193347689874663 -0.25657598629269484647 -2.2149844002723315661 -0.53817414253798701029 -0.073118632069989822342];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999931;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
