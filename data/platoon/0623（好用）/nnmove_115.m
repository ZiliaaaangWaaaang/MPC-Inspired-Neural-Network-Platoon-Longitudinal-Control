function [Y,Xf,Af] = nnmove_115(X,~,~)
%NNMOVE_115 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:07:13.
% 
% [Y] = nnmove_115(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.85918092085871;-1.99763696099884];
x1_step1.gain = [0.0522252737181727;0.148213484472979;0.500572177293996];
x1_step1.ymin = -1;

% Layer 1
b1 = [4.0546067796231417546;3.7542163908832555386;3.2784873151351971998;-2.2003388811460395935;-2.388808681540298906;-0.060093957891759461343;-1.5612737033583912183;-0.46477683714490691802;-1.7994645990417630355;-0.75876742430566168629;0.25587998834331948661;1.3045048989676741868;-0.82604221307899772242;2.9174406471221279169;2.2896869062630393898;2.2917453660750348732;3.1194934538064789109;3.3435586986577314761;-3.7601247499315606504;-4.129352743123284597];
IW1_1 = [-2.6757208005105193038 -2.0775956704468696579 -1.0296712551723814499;-2.6332374019190072367 0.40618266520552548382 2.365131514166587845;-5.9221910024834034658 -0.73297824960401414263 -2.7573391480011384402;0.73056230551978318388 -4.4898778999333561757 1.1306577657980547702;3.8794651193508986609 1.1818530147922938767 0.52247533209368557383;2.1191197026601384934 -2.7762676793841549738 1.7037406661521308227;0.54454633425573539807 3.784929703118966593 -3.6214563319455539414;-6.9993675913449378001 -1.0720309146341082673 0.63528282819374859436;3.1422712337285174655 -1.5960850336976053487 -3.4025066360099263107;3.1936064519357239 -2.2411333754575752941 -0.086851450037528518666;-2.0731541136111784063 -4.0292534155296877429 -0.70378887408955148608;1.8037119240991352775 -3.1956085109612675232 -0.89528211843636851253;-1.5029842972585365501 -1.2890429180480864613 -1.9455499340773849681;5.0149502176021290012 0.6053516001030198046 2.5982718545737424343;4.7501128769916514116 0.67133816257423728491 -2.8846220813225218471;3.0855103843770961269 -0.56006773548260568862 -3.1469615186804995588;3.3610947086635030168 -0.48514493595988522623 -0.43650136859177463;0.48854906621700849856 -1.7324722075594209958 -3.3649549280610604463;-2.6439439047546064998 -1.8382036735981486242 -1.3248910039543702055;-2.1454252800580926319 -1.8896715647312556374 1.9440932899305392034];

% Layer 2
b2 = [1.3474053908955938574;1.1654557201767736796;1.1613090191841248799;-0.22837796947588734353;-0.12357039053114801663;-0.090596856649539522777;0.76142286131194580889;-1.1253000959519667834;-1.4077200410392303187;-1.8237724298450559424];
LW2_1 = [-0.3044908639905869463 -0.025244661773187900694 -3.2566994068264984996 -0.70298098013473420131 1.4376182843297817815 -1.0956291225421934676 0.92217148950619831638 -5.8065085034420018673 2.9410841100949980387 0.702262884259989284 0.90667982757327647558 -1.8295616706622968017 -0.8353363865849268155 3.9253071627794535736 1.4875223443206320173 2.0935549145363658852 -0.56903689202891671872 -0.54835480753169152379 0.44458138393829399471 -0.12929639493299022179;-0.36492267865350280776 0.12732699782955730905 -0.98819910929867726956 -0.68908474303445022002 0.31394860300967980526 -0.2352435456268232028 0.38903690398447859922 -1.4067502789953107989 0.016359385053248520769 -0.3402707101080623131 0.0066059558433125943958 -1.0325723473894050652 0.8063730432878034593 -0.62397259353203116117 0.96353489405890357933 0.40032723308878792601 0.10895906942299184161 -0.76798764864568802579 -0.11756879408272219445 -0.1065930030535229972;0.036889833555071714633 -0.23896265469229555078 -3.632121890177227197 1.4390150574325606403 -0.46081335238212006722 -0.30725665539536017867 0.28555524494702316796 -0.44394704252856409532 -0.20639674786564485287 1.7373972015397070034 -1.4609472172193791462 0.38025661848827979616 1.0878540107079697208 -0.72706089778833649095 3.3885253410846649658 0.54773229115342703111 0.69043721122144063873 -0.60788308668350332642 0.58252786787553345604 -0.51589368805693369691;0.099965635726126350624 -0.1307977872390604368 -1.5765355457543672735 -0.24440028138041855477 0.58094693961037791041 0.3380896934221475636 -0.27037924491791059944 -0.57174807468959176759 -0.14839804723427965638 0.59434275356893828679 0.59780575212152342601 0.61836889422457730348 0.27742513474024343978 -0.20255954352122745865 1.340155374832043611 0.77217127337192659198 0.13587147327900009341 -0.32962304189955232703 0.30100688769808581213 -0.25226024534140811806;-0.25284200732992351268 0.058302529170972436368 -0.34031012047259162623 0.28644042456943186181 -0.40424664802961329801 0.4576423366316584862 0.35648314651939327913 -0.060508089215224818147 -0.67874721127378001562 0.77090566926178305529 0.34812710381231876111 -0.29520360360570352398 0.055687426702782621968 0.19996105143968168072 -0.57911651034022026963 -0.98598980083533560581 -0.5222591823337660033 -0.59336472667705408846 0.43896824943812240427 0.55451983550836614345;0.49367823827033874284 -0.84418985679330227345 0.93062974141844501119 1.6061695856545530336 -0.35336034830551288355 -0.28439005304285264186 -0.43855323765403864122 -0.60119792662951332396 0.15015011561495389403 0.40961620971208079212 0.36489083780077824493 0.60730222074371609242 0.67953709917970472887 0.3387353125276495458 -0.34373604390637552131 0.069689162013002292628 -0.56194204434283367977 -0.027893260341113969986 0.29895674775068231677 -0.073847762778548958762;0.73192330013301087899 0.74076815221981973103 0.31260907501030849032 0.035477705918973506671 0.01606403345469373245 -0.3516438401949400494 0.22270263946268853417 -0.5674848679851641764 -0.093203549063531801466 -0.55525189325204205026 -0.39393658090437300157 -0.54744296860378982572 -0.31490908930140437683 0.13103100205874967932 0.58885272812785960372 -0.19659964551057984572 0.48092217719459479097 0.2484074165019649616 -0.081359004903964873834 -0.58845515398032166576;-0.76129089685819584243 -0.25266575012915459819 -0.094331248978426193719 0.5130133541486807669 0.24594974226564175757 0.056414956015327727412 0.43854805582269917874 -0.62633590682950712747 -0.08063466703923771739 -0.34691879636770567297 0.52062088422874741589 -0.64464049273342405311 -0.46372779594602808739 -0.56199358357270101649 0.021746430850267367552 0.17655911393517659258 -0.16788654200575539588 0.27453345877253348961 0.54364409814797642895 0.76866883283397335891;-0.2104698023805455509 0.36003526343376152097 -0.21702436755327059181 0.4057972658652834741 -0.17864019458513699656 0.38624031378601969555 0.80822706615381356698 0.1510404008612618032 0.12470065055002765853 0.10044905607036266892 0.13674813800413104792 -0.34790858659154799692 0.11341078722751046781 -0.14115397068163348937 -0.72653702901290639904 -0.36311150842373812742 0.070050968292849874475 0.15317223112979891364 0.36887958919649693756 0.46615725254157197588;-0.39301966342475064264 -0.51955764861620601369 -0.78721181796397954322 -0.36204606213736373332 -0.69321596300612742247 0.23410534330989751783 -0.12286607165825975951 -0.17758985134244723025 0.27418933045369153767 0.10125651643691700732 0.4764842474330461819 -0.049747408368654946753 -0.50479026225579570752 -0.070289364140843635376 0.050773008511857245506 0.15053857768263670391 -0.26355513029716060025 -0.06917210039639305752 0.44643883289636526746 0.27965400892730452043];

% Layer 3
b3 = [2.2066994240690829265;1.876966024296463198;1.6601579101159527063;-1.0275036816265170625;-1.5589379020698979073;1.1412737403109223244;-0.75942282564964513902;-0.57447567337369231932;0.23326139255651617832;0.25447185011828021839;-0.08755354802276764381;0.22060091970780354442;0.01417587038640677477;-0.031507693417813849301;-0.643092917512718798;1.1360580806102651419;-1.0807561067373692154;1.6111531892926740372;-1.6925946235159401443;2.1429061855719400143];
LW3_2 = [0.92913848445863977954 0.40079377423018958115 1.7002173130965656522 0.63498112832125508387 0.20711098927114743318 0.89344911384903258345 1.2089897935678215468 -0.021668885615741369927 -0.18172830646678977962 -0.80816680008603292151;-0.98499583655425204665 -0.73209596232273843608 -1.3578346361350459581 -0.4372001714685957996 0.27905253886257896934 0.79644743801033124342 -0.73105911601074113904 0.85007901329109791799 -0.0885077087000661622 -0.093791407127986753389;-0.35225801557077435211 0.32280615353869979156 1.2225806036313389136 0.58986884511493942185 0.11669190104155530152 0.81455401288610984611 1.4951682748692503022 0.35741587532512841818 -0.3207687870748497927 0.6656729154618372668;0.84521092786575691136 0.94670556623877721858 1.4631897018459483206 0.54938262958305572603 -0.13567337073962060234 -0.67693791239376166491 0.61174508993051313066 0.83266226467659898436 -0.015873235966836263255 -0.70562918623211090541;0.76931594187175045274 0.71563707102630969015 -2.7130928809047811789 0.031658008267631203292 0.73000998887530121895 0.18933258040389513988 -0.33647914865266503881 0.43576136060612841172 0.83624347158237255506 -0.53329634801640124486;-0.39872985587258669149 0.12829236843217528552 0.59599173686219653057 -0.016970330948842128616 0.33044400568915655025 -0.015966453195701210688 -0.73939437652083406238 -0.9276720691462781998 -0.94077612055310277928 -0.94094123194645107322;-0.021564386828192814299 0.1761594573907171446 -0.8350344095898113439 -0.54230526326058570152 0.51467913820366328892 0.79621706976246964249 0.90594080765201034922 0.32842735002043899062 0.89871549219896673666 0.37893076014594434531;0.99504659321763855306 -0.4231321436915626566 -1.3405154637781737659 -0.041340370019608010943 0.048674755376459669098 -0.26077344062325336083 -0.65707799326491234115 0.10291917068296896343 0.47468490249814065951 0.95137761841174695032;-0.71687107616917244979 -0.14358730650500597936 0.8579249469376979409 -0.65021034522045695336 -0.30711270442688320959 0.57777931338758514723 -0.57197029310944158542 0.52307721080748692533 0.56265427496244646566 0.053709679670600078694;-0.01996157643249566252 -0.51586945478318624314 0.7416906419773620085 -0.030940882398434108036 0.14891569730716205933 -1.2440272938467284991 -0.013028487987397195311 -0.69376020301610707985 0.49527646541707209815 -0.96520101699513383142;-0.056530122354970707699 0.32718289285494850382 1.4852769229531928019 -1.2136555097610515208 0.49822845956365058306 0.73098672660260033407 -0.21934663641783028187 -0.40750084674227682324 1.0923083662502053315 -0.61644982441038276288;0.92811450179241328229 -0.81492721526779454688 0.11991384727881532202 -0.61419025175991937004 0.32545006508909540832 0.089236958376448849428 -0.81068711484245359333 -0.63137660436129827701 1.1098014592347862362 0.65023134704485407998;1.1505037091326306697 -0.6252318435965279475 0.58455768419871045882 0.078074506453689823671 0.58222123914491552554 -0.17003122926950686722 -1.1831021832499817314 0.58505255437178227407 1.1484132344097117695 -0.23819064834264316866;6.6344787923685810682 0.27922136540072745037 3.1674901340694989749 0.3503046777909632481 2.0447696445445222579 -1.2968253334648696118 -1.4069645818475482457 0.27306418438468649246 0.43041471127744923564 1.2398657098945111699;-0.80097639605312231925 -0.78479090802889728273 1.7373175688876465461 0.27829400368956608292 0.34936001293527318978 -0.52473038327039522866 0.65626789647290140195 -0.96408211644100438864 -0.88247851610310901194 -0.81133519114430097119;0.86416084169634144185 -0.54799566598328752765 0.58995262530557723846 0.11532934398122113295 -0.7030364192937086365 0.46886478343307136374 -0.54371727185737961374 -0.22207515298271490733 0.074219107997237673824 -0.63930860888353813198;-0.96146252168643209224 1.3494796748316366664 -0.18093023004415562105 0.5462488148773883001 0.54817452498821228613 0.3118751747325460566 0.2727753974535679915 -0.41129266940208458747 0.49887990154168543322 -0.6259237722261803416;1.0429636841091491917 -1.0594854821221206809 -0.011497163651186619732 -0.42903564451925313428 -0.49031036881078521317 0.022521508648599655733 0.17208578194243798198 0.39045090632370410555 -0.31843180219554784172 -0.8624709708180452461;-0.31244018990013328052 0.08166421126849705836 0.068198146486872349148 0.20680899905941912964 0.84405517308509969698 -0.96623954102986364667 -0.72504524235443723601 0.63865362524555613355 0.82718504024474437397 0.40370324740219154513;-0.28340873772193331259 -0.24449541911742248002 0.24229363080567795086 1.2704398153439553365 -0.1381735547022087951 0.19442353010409338387 0.020109093804628365432 0.46988207567641437912 -1.5385692862035311723 0.11483791490611043595];

% Layer 4
b4 = 0.33467876161874171581;
LW4_3 = [0.95641853070714044627 -0.75831275042002410647 -1.1409746650458654216 -0.78245043222766486046 1.2872188040252316998 -0.44902828291839591568 0.033701334369232234522 -0.58335653920403129913 -0.003638450687830499259 -0.034578485828643062971 0.033416324564767209415 -0.38849865022838298012 0.29683110207566792971 1.0224817090329660907 1.0045178401798162682 0.1938077189378104026 -0.00013821717029277439705 -0.88187465049960456209 -0.29893448531605526508 0.37151638438011880261];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999931;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
