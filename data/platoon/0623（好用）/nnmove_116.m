function [Y,Xf,Af] = nnmove_116(X,~,~)
%NNMOVE_116 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:07:14.
% 
% [Y] = nnmove_116(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.85918092085871;-1.99763696099884];
x1_step1.gain = [0.0522252737181727;0.148213484472979;0.500572177293996];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.7000381537967603762;-3.3305386971017272302;-2.8132310314590851519;-3.0447885614562832934;-2.7193204607689289709;1.5500385898939939011;1.3567839115266233652;1.1349990327272232449;1.0458088990564704535;0.18941885876006051004;-0.14086360923779958632;1.1327074858618275677;-0.88672294333103862662;-0.52759331491003602643;-1.6240877748031472549;-2.0955257289065518655;2.6600890272257928792;-2.9816005068933519873;3.4502206262489574229;-3.462548802785828439];
IW1_1 = [-2.4088072645727316434 -2.4312706888393935678 -1.8226145493029366484;0.96027706713788951731 -2.3779526129886074948 2.9291542237223899825;1.4736174873612124525 2.1757678356514271734 2.7369158606462753447;-4.3577412062491271971e-06 1.3059919729909434949 -3.4200365366274931844;4.394255712422801885 0.12137554493256604016 1.5725021050045662196;-2.4580637339839737088 -2.3792745118345011157 -1.2858102337259260661;-3.3882467814696610731 -1.5608746930731638436 1.3568801185898122785;-2.7196012183238589266 1.5388783145169258049 -1.9246709549591580757;-2.975554391083545358 2.1456022373876537657 2.2435050545170875935;5.6936351979210373386 0.46682575918010427163 -0.64711386008506999179;-0.04418195021812107437 -3.5020710401879560081 2.1187090468868330362;2.8492846387796380014 2.5718550786319935852 -0.87552833981209221559;-1.9116897476509624454 2.4391596783148874472 -2.2984799544284379991;-4.5368481926778203572 -1.6594794218838171407 -0.67317874656369947051;-0.63163392744810520352 -3.1950468954643658215 -1.5972775200965492193;-1.5933615354384833562 -2.9829140795203734626 -1.703057146898595553;1.074806664632156572 -2.0829286606741117538 -3.3020362504063944797;-3.7580186214426065661 -0.36950105992768017549 -0.37468346484472941915;0.58410251851543582013 -3.3762320599378585761 -1.4327672102099628937;-2.7643675419498623391 -1.0892459920209554003 -3.2609800203339003311];

% Layer 2
b2 = [-1.8495957614060860585;-1.4743748199989523684;0.99468725167890548189;0.74105117607763326681;0.17528630913673026726;0.38363472382787766612;0.57237148918027191957;0.91943778021535838008;-1.3204219789189399759;-1.7861036677650201643];
LW2_1 = [0.26104159519656755517 -0.51483422210763185589 -0.52729722703779302595 -0.48242731620707868245 -0.98795901714770117952 -0.34213005127164164421 0.53431220919859656604 0.6878850147491881728 0.78780591926928811297 -0.27744773230011904319 -0.2987265964593585621 0.24504652665460180394 -1.1921032721846365199 0.87378408137281649015 -0.24741090636063262087 -0.37370979604781201511 0.66206228158126212424 0.32915396747655795151 -0.32383864747229923475 0.10974921088779891754;-0.18682568719418685133 0.036991576948803735203 0.17916193358946688741 0.52032035221195627184 -0.088914969488679093668 -0.17624398422261347563 0.46342076440639795587 -0.18520328986973483287 -0.56195924797747676127 -0.02977540504751698125 -0.061747470307795759847 -0.4443831060578904979 -0.47472909849840455587 0.40484002364555499165 0.12951978420781057322 -0.069617774277531810356 -0.021438848274463497001 0.061615938600177826145 0.19163706497730931266 0.1999969379880824627;-0.5077773271910664965 -0.24375461894510241923 -0.56354467300596944312 0.21621385673424819984 -0.33437287137801996462 -0.57201471472038922794 0.46052391140930903912 -0.29756844330801413001 0.0043336192097030781789 -0.40024742874944185811 0.91031873436952892575 0.043716124342216416965 -0.61475138551054608893 -0.011186629226774833304 -0.42805691362579523229 -0.59297951219588262983 0.45486465238025530766 -0.18101410723202229769 -0.043522458686512735526 -0.17273188002600001201;-0.37389156283166036232 0.38219802314324041737 0.37672480578135958407 -0.46450285852710904155 0.94013790038109057434 -0.26852632334655418545 -0.518261052766689434 0.70017341259425780464 0.21481860682101533433 0.44489630441654992588 -0.19829604838614062201 -0.25485693143971260843 0.017297276826150558005 0.4000579382562792774 -0.46720440243747485276 -0.17256039558477037632 0.19679959772866828516 -0.2758857318327330721 0.11669163521181488696 0.18896197295599048704;0.027421940153333317081 0.020337815018964110203 0.048220258524349669804 0.8959638667833597081 -0.40952722397385521447 -0.41407521876541275585 -0.5756792684531403248 0.27264980859891940757 0.16773446202438377362 0.27065722515663809267 0.21446620588365244986 -0.47575755414702930457 0.49440730747474120887 -1.4962025867939148238 -0.54091236891629723704 -0.54817565214746510893 0.14321371011201372569 0.37653562887980007723 -0.63880376677338035485 0.43351506906761422266;0.43864500317659566031 0.098040567619319826664 -0.286311672948973861 -0.72676358579693334239 -0.78146239560918684397 0.13007657922867441047 -0.13340736922592533187 0.34221843061054868507 -0.49589385050591566761 -0.47378672102478458505 0.21150972949515522981 0.42640399451593347102 -0.36611324022127511579 -0.9540471024331844685 -0.071732363765918349952 -0.18304126584534008426 -0.017542247622909169086 -0.23009900727084856009 -0.29309009022748466755 -0.31967362703364149423;0.1552302237974961252 0.020275334628287112332 0.063819610262091028274 -0.58933005966659635089 0.18465214067061055947 0.27875093781379417512 0.0086643365956532592681 0.33033562743387401284 0.27145607275496208555 0.12714475523972088022 0.49114568103695599444 -0.49214121067007621235 0.32394495686813662427 -0.28143801461715839407 -0.70494332007622173553 -0.12417238336100441809 -0.081664033170413874441 -0.58210436388527020402 0.59372580114017947661 -0.060459409399461851164;0.24462908504329550219 0.51892652154471019532 -0.16848725012115228772 1.3341721490247879789 -2.2240949500386890669 0.40489474636255312623 0.31207870751140398546 -0.41790249922838967889 2.1177783346134266829 -4.578779138882274502 1.1840981168218001063 -1.1377273712853210874 -0.26878814783937260424 2.6276761053667998524 0.15010572185375850585 0.56601386800027819746 -1.7308563172919002593 -0.057268328245153640732 -0.030841528018151979917 1.1930900378285538288;-0.50489872459278062333 0.18978544792980039935 0.36759397887544492667 0.18022421773233840425 0.50410794234084610466 -0.0067026230518816365747 -0.45112219860297286811 -0.34971701158362150652 -0.079412289785589035285 0.38684198874322484052 -0.42222801515073649092 -0.12781608212420528248 0.13769563546911056662 -0.52776798146675296675 0.51880908319715512977 0.46397638236832627889 -0.33652503208995226958 -0.23373895556022292186 -0.0019508585990456338202 0.018309026768393004553;-0.27089438243157143438 0.30004984326863826105 -0.050289689147999812324 -0.69727470928506918302 0.43566681703848963991 0.0062246772291378819203 -0.55283274156524275789 0.37349637899303222976 -0.45078905975802124884 -0.009023386308204083342 -0.37562220095581122514 -0.10910139585936330653 0.20346414064452938986 0.7412282611983317393 0.28537594373637192868 0.16949680044037462867 -0.24725053897427698435 0.60184821881921612974 0.034124522394094726485 -0.049707909643984138359];

% Layer 3
b3 = [1.915374202706675133;1.7034644507794656221;-1.5405915612385474578;-1.5996706846918105072;-1.3759978586755721164;-1.0784344376700552015;-0.52981530585143965517;-0.58968359785233326331;-0.28108044868982440256;0.08769584528294410708;0.089731743698137175769;-0.136819920919558774;0.72124935927345223963;0.33419022597895986504;-0.66469498111157332421;1.3611022512746633328;1.3479371714969328178;1.5221798417122038849;1.7345133715531393381;2.1254272961949678411];
LW3_2 = [-0.35554830580191720824 -0.031013855126410860841 -0.81907486284175567981 -0.054482388489138097731 -0.64889079097027146936 -0.10941948098039941395 1.0251693583170116142 -0.08535262895948730888 -0.94141542310988202136 0.59498728653206445216;-0.87398687693719090408 -0.45230936113450764813 0.41135024804772274409 -0.71250460755479971819 -0.6719296789485454946 0.79374040226860831382 0.64878637134427230571 -0.49895829383304673987 -0.35382703598928383348 0.17741501229980025101;0.10134464992743258405 -0.60876674904055316784 -0.4215797528141257966 0.87851248392627478978 1.0271459329818326545 -0.34026807891665583616 0.65525433644841823977 0.48286161540622635213 0.11754083593290456933 -0.89908158265969007061;0.33867236565907704593 -0.16901801901856364219 0.32194158212180917777 -0.37226044598048541046 -0.72050222041415279417 -1.1656706439031103706 0.01626350969950107056 -1.0155459682650191944 0.048817061228252418836 0.69944366839420779591;0.22714548785870902758 0.49023531185674817934 -0.55966640407038137361 -0.42445107405161225378 -0.96974534120777933222 0.38445437147681849055 -0.78221761011606893987 0.29948342708339537044 0.93628192123078102238 0.5522282447637643088;0.61834754244338085982 1.3267180093097019622 -0.60690390781062752978 0.16067649106203837905 -0.63698558523154491517 0.3921394167437105005 -0.49632376103691033808 0.71707623500234385361 -0.073214627663995154871 0.085805915626533391105;0.65630752192228147823 -0.72421812700292531595 0.61747404900811897477 -0.12741858837105907165 -0.36051209537703582386 -0.19399553250752751832 1.0836368103569837817 1.137225100298489 0.6410864840995441627 0.54697852273875646745;2.3546907707337045856 0.039232046632836969913 0.8095291173036032184 -1.1861999923328101492 -1.9015968123023609948 -0.070124045141946825255 -0.33281055676153448175 4.2932182979307471626 0.35495925263499750191 -0.80490190094036495605;0.4584307098555280291 0.67650893688748725552 -0.66199004253342663695 0.20368558998834659923 -0.3663304003447649948 -0.59490657494457954702 -0.8730584798981544381 -0.81671111652958738869 0.67161379903192441887 0.19692141735611071174;-0.15893864233888890802 0.72226968182558470843 -0.090403630053832437219 0.37909160440215111665 -0.57865075579153302243 -0.27173487594843159787 0.88405532416830046039 -0.39731274549671891094 0.89486818799786616019 0.71749515520097206789;0.82017150055587328961 -0.36802939420582680974 0.29419711309345142336 -1.0619492833537917953 -0.5467851897229770719 0.15147917171772642964 0.14838161135334729246 0.79878876189852898726 0.25646457521447452166 1.0743678846959827666;-0.93991413531781753399 0.62813946460682879014 -0.15726838976347429222 0.52636302723621408717 0.84899458452654485985 -0.43150457001327813256 0.29541505002778284394 0.0045765771321130237215 -0.9978806128029497069 -0.35605576684421286204;-0.029205278820281711794 -0.48543641619444449775 -0.48393174543628908468 -0.76362910853719179194 0.31322834134897359348 0.68537527965830780108 1.0654927435715468853 -0.63645369338994273178 0.074780797569382079226 0.54856298818093274239;-0.091897644347891757621 0.90766168334845442889 -0.72662083528598098159 0.012223100093962078333 -0.2512547247355756963 0.69790035525789317905 -0.65578488895979147877 -2.0735498766693667427 -0.062431413696320811613 -0.67709427639432573365;-0.18521104961601711492 0.86122948621960304649 1.1160141735124813334 -0.43380664153201242694 -0.2710859254271997254 0.61357158611469897469 -0.41664402177631337798 0.4756979964167624142 0.21888704542469894498 -0.42792181052182021173;0.41074365228343462375 -0.79298629364215189597 -0.61556650577347238329 -0.31927960785105191643 -0.74116548150300787245 0.74162003092892603284 0.90589462218611738198 0.048405372603374942353 0.14781965335243599236 0.32503976022732383733;0.22746290832748455868 -0.32995490605370531023 0.73834891112944345259 -0.89085428343835015852 -0.97260328135450524467 0.21760350981797141334 0.95294110489444328049 -0.23277771682907230644 -0.22605650205660568486 0.19454345546783205489;0.15644156024851529896 0.58521298409838151677 0.73138399500987150148 -0.16156931241939975763 0.81289897279444855993 -0.020648169798194913882 1.0204198121212444406 0.3706126683901303509 -0.71188089244450480919 -0.42963748907847076897;0.26177533309617850854 -0.059858917465414135384 0.79624357752346885952 -0.9953560729441208732 -0.21716298723022120498 0.52538874525635725909 0.38371009977866982199 -0.62588675802519599944 0.083346116571161726894 0.93212926683042141018;0.52389258313164877023 0.69221862086688379367 -0.096476837485351282786 0.6787879263684263309 0.027634956375977109272 -0.16741187512664482129 0.96571001299576819665 0.11541272192331164526 -0.61457673840801507747 0.12054848867272052737];

% Layer 4
b4 = 0.8397833245280046377;
LW4_3 = [0.02834850852681019065 0.41107322225388598369 -0.054756578387366160177 -0.53633318769110616131 -0.2969458512794152516 0.0023308047893891058536 0.23728388560377058902 -1.1817813026631067697 -0.48346225591965674706 -0.051707845342708190495 0.17057619757793740511 0.13801665062386977989 -0.030590922113035243918 0.095806066951006713106 -0.0021453112999225611851 -0.51207408756890382406 -0.56845083578231203614 -0.76152949984041673481 -0.38834724858062830144 -0.42818487023927387369];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999931;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
