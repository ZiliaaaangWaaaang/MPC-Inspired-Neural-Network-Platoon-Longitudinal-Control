function [Y,Xf,Af] = nnmove_118(X,~,~)
%NNMOVE_118 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:07:18.
% 
% [Y] = nnmove_118(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.85918092085871;-1.99763696099884];
x1_step1.gain = [0.0522252737181727;0.148213484472979;0.500572177293996];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.7355318479966648226;2.9386265282579633329;-2.4253652681838460126;2.9590821019584865326;2.9466733821691803996;-2.3259722116378531709;0.44625827651004307262;-0.56500369179199705361;0.24671185423481384325;-0.0028788051577842040107;-0.082862773325008964864;0.43469337976628286135;-0.59920832738187657096;1.4462779732626493967;-1.9567163802232370173;-2.1704600279008179342;2.620824425235291244;-2.3860557185635453692;3.4745615696290261809;3.6163156950823815983];
IW1_1 = [-2.0645395602914629052 -1.3243026275418996462 3.5604693926944395166;-2.0677098250639898147 2.4027302868535236335 2.7992307367713826771;5.2464845722435295983 0.28890288535133767933 1.6138288200841219844;-2.0502892312037439559 -1.0854603831761970856 -3.0486624222049614197;-0.49736696528426749264 -1.2665873831815188666 -3.2110487798991314001;1.1585931439738073045 1.6697759167453931628 -2.978538877609959723;-3.8991561400462955156 -2.0746603678817314709 0.21698064795469568233;3.9197778139083276905 -1.3436367262311226245 -0.65446095317620289755;-2.1357990012279342018 -1.5719238897571328195 -2.2332435999631976564;-2.429339572239143763 -1.2156741802622623716 2.498476513941113808;2.0408048391344615347 -2.9036233343388628825 0.93931795726327782514;2.8729215572645476762 -0.7772633589150383937 2.2411361155987017391;-2.6257725109961023158 -0.28527909464052447763 2.7955301094949560614;3.6101336722668651014 -0.54778511609826130435 -1.4810479962693738898;-2.4978266579833641181 2.2856954744929511847 1.6506818467975177267;-6.1587907635340704005 1.0474145622800636879 -0.72824487673611482119;3.8177438731473229971 1.1569769369612534771 -2.6366690941845449814;-3.0500212826444208503 -1.9615831715532248136 -1.5601222106089580599;2.3419226952191194435 0.56627126699475038851 -3.3811459204838687498;2.3342358540743628481 2.8989662708047094775 1.357526030044423182];

% Layer 2
b2 = [-1.2206658434172035221;1.0696769951494560225;-0.77812783442901456432;0.59169223844975249449;0.079837553726359825057;-0.24321346022212497751;0.41088540299926767929;-1.0110945775719593076;-1.1406284191901094882;1.6221875333333561908];
LW2_1 = [0.95101804490125196878 -0.38871924028876969626 2.3373263506935582079 -1.9037032988009745527 -0.95782565366038330268 0.78304270722197466537 0.31162934388471347225 1.5846345110390627209 -0.14950891730262130808 -0.069553032328077357693 -0.03378726935558865746 -0.40282860738468695416 0.36858960136473328806 1.4721690428238207726 -0.94451939094299053323 2.1669186288597108714 2.6600932663236083187 0.040573758265856851857 1.1311100006942895746 1.0818817868986736475;-0.84115558157724845678 0.19077263310658032491 0.73199653022070609865 0.75429837149545786446 0.59551248867174289003 -0.57221134147315233509 -0.88456264071583934339 -1.0768602627398982108 0.70193676355167899938 -0.27150499906694997021 -0.22993639181336406052 0.55427672639448732905 0.23038701164724417758 -0.5499872995795025421 -0.20400186399831640727 0.0034358560914894064817 -0.14858597892608030322 0.20959477916113500306 -0.16245315219252703942 0.28617498215016712315;0.2316608554041068857 0.17305384282618629932 0.25874598895028722012 0.4650112425258793869 0.69188438832760179587 -0.79692064163235776242 -0.73439728620097888268 -0.70813889303654742324 0.62047107004474089109 0.022656554752268083519 -0.4258919810683550744 0.26819546320856341159 0.24271779980667554377 0.67040948531449184866 -0.38718889871435008265 0.49767963479701754492 -0.92051670003096097705 0.59792286522646542757 0.41934250572297548931 0.54880258941164883346;0.1221434272836771362 -0.016782031301115447885 -0.0059624547105577106049 0.67945496813804195924 -0.37962119560001250651 -0.50915378747156259109 -0.11468464034012695874 -0.62458894345167770279 -0.89998560831796670101 -0.40814024827777850568 0.14411033844300932816 0.44040378332486496138 -0.12564627091475438769 0.13250632999923697697 0.32656573554497897449 -0.010982581919112627961 -0.46248155146988328967 -0.1802657417113617544 0.37672503000668339235 0.38730472716511321618;-0.55161802040567420313 -0.58369481868341865916 0.36538150897432825071 -0.14418521102670012191 0.63484804732752719847 0.041149173575813637049 0.0067053206518393713986 0.5974592418883712952 0.34398748263572476169 -0.42376781576443850463 -0.52232089956259675212 -0.082467431735335175458 0.29641186880511039003 -0.63207843429365728749 -0.3143047523616042116 0.4368023440024434989 -0.012046272338780018157 0.20710955555335439082 -0.19225463025093764147 0.39613776299940783865;-0.9551814214916810597 -0.47703604933807375321 -0.81888763847104983906 0.13342934234778908165 -0.10086072951760509386 0.20715679148405036214 0.45698667579448604137 -1.2405898726065547333 -0.3071160455820626245 0.51209313672440104348 0.27982083854885164698 -0.44608003019824304936 -0.11950284045720009629 0.1174538716043152381 0.21041591774941734161 -0.78491028460878142781 -0.74915946191223126149 -0.49076022556345388903 -1.0235137851908437945 0.051372231561589001836;2.1202931589666675904 -0.9801203602616109789 0.45643103418083635914 -0.46533738754846981633 0.13199571701120940692 -0.02920629112734824534 3.3695300128218996782 -0.31661691623959409281 0.34254022943963868819 -0.54640119017082156017 0.89540863323511798999 -0.1388805526392154488 -0.63410967570965393048 -0.0066157662999172233559 0.097996904418428024131 4.2303358003214004412 0.74285751181046943969 0.34905767793904041163 -0.63711240211045805371 0.17026092058008798769;0.09802940092113891779 -0.21581253510599129886 1.4793558262801320691 0.77088705024009096523 0.15587210427046352401 -0.47881182367095703745 -0.033740162120711944538 -0.035069881159765746437 0.86394036722673439588 0.39718086389951673398 -0.10719164909213389769 0.17640075661264900675 0.035313679212032655919 -0.29572798643626646564 -0.42254764953932916205 -0.32249857535728870817 0.25462540244741221906 -0.6957740827732754596 0.27967420602080661496 -0.00053118187634149712645;-0.32285860747453165587 0.02889287674769479633 -0.63960526121650140841 0.5765885990794157312 0.13142676103804476484 -0.08206636994044101685 1.4459681398467272295 0.51093386804297558079 0.26616719125669591195 0.51987596393814050622 -0.39901424821862763181 0.29850617121345646154 0.11146188341849938563 -0.14823628622796511389 -0.16488929651624062434 -0.57561853033429766224 -0.25602157655963653227 0.14780811261380069621 -0.0020003056805768552537 0.47220136436215109921;0.50045118714652736536 0.10481839522483685223 -0.20337355867213138816 0.65830465438574270465 0.2684889242372455187 -0.41417972177130146783 -0.020034447517853701259 0.50726894602554339908 -0.30663164841175338804 -0.4381629249894082867 -0.25650362612680055463 -0.50063761040031673488 -0.041233300548938138508 0.6715066049580423746 -0.54992057034509878033 0.5957511144725879948 -0.19782237102563626774 -0.12271602680104282124 -0.37384309002968857394 -0.42081065209684942463];

% Layer 3
b3 = [-2.0746890657892143039;1.7398039433233050133;-1.431846300598557109;1.0796321384705975799;1.0581087970624269978;-0.96944511156144463904;-0.87074461192623775485;0.5477222722862584714;-0.22846500433521946261;-0.10612571956056539302;0.16872363266806014725;-0.41093246650546277898;0.56900589204299523161;0.24247310597102586516;0.91088500361899660263;-1.0113747019721059939;-1.2154311618358975;-1.5399130260031750339;1.2742029282013200842;2.2405552489097835256];
LW3_2 = [2.5149890007554662752 0.84046951366826549989 -0.14103801697637696755 0.55944772045348978295 0.92224290121115204411 -0.49810215717514222389 3.9898035344094320287 -0.39297028721445914634 -0.74968925044578060835 0.006650348121413351965;-0.2077183671411930721 -0.58833745180389418472 0.14296867026211798613 -0.61547275381414090489 0.40222132516798192459 0.50360598554147162353 -0.25801551751822987546 -0.64116487673981981121 -0.95590681909187835696 -0.24346422257725125471;0.098814847860928131662 0.69248749839073731049 -0.37178378519859989204 -0.72161847396384359854 -0.3797892442236632804 0.71692601338964601076 0.84336512488521653275 -0.78711299336408568905 -0.33801769075821735955 -0.50384053094389935623;-0.80268011332188804463 -0.77788767260901936496 1.1545797967563717901 0.1917477607196120537 0.00864404431248465277 0.43777934979176880148 0.39564014225414489978 -1.0863406194711802133 -0.73418237583269285729 -0.46737735019608689369;-0.14971902033944123334 0.78119228824498665453 -0.18606593503527885103 -0.35044029646933172462 0.75336664279271503553 -0.18584508169157887281 -1.0039478368788932183 -1.1781178679439603396 -0.062036545674087097135 -0.50004006588530203192;1.6729345659110359534 -1.3392343301248139653 -0.30621682772598562972 0.013573451370267204316 -0.35224500936312530541 -0.13350766785889323085 -0.088572248779358098147 0.42031653384167155796 -0.50556270725142760103 0.68860673450575193844;0.68775851717943692343 -0.42437146160924038574 0.82777715372774718361 0.27478385623554618666 0.55812789622723479876 0.037560348630805817649 -0.51865989248726840355 0.43550068661016899663 -0.14989234810524862396 -0.45274346190130526635;-0.76031347564386475568 -0.42793152914913390461 -0.39442617713736916052 0.34774315680755957247 0.28952493669254153463 0.36414109988067949741 -0.79806656953537269406 0.045658919904884860685 -0.72397872002771124222 -0.60151670850487160003;0.40789269586361753817 -0.7406523405569054308 1.0930961146982141052 0.098623373668913258405 0.60952425090619100079 0.49003622387627565615 -1.2643981591007784626 0.46148329710473717791 0.18381394839877801539 -0.35267677713146605711;0.51677403321413639681 -0.9882031234446291279 -0.65380492253397448632 -0.30409039593380682298 0.070623365982046437672 -0.62539807994824270221 -0.77714430143016033359 -0.68162110015761456783 0.105707437535186341 -0.91332881117597020104;-0.028023039743240777538 0.20257748438779010769 -0.70440980034203592997 0.67409110754424084178 0.11926622535771583267 0.4552685866792071101 -0.60192769002999213512 0.91529974257130752857 0.72294105035061839715 -0.27966722518061454261;-0.73323710795482166525 0.30690712482377718873 -0.39850663827703303177 0.4709273679919194211 -0.61898525528152559261 -0.24880762492712327205 -1.2597729319298147654 0.95335330681807683995 -0.22947975520562990948 0.74170181701395876406;-0.041112753833098682199 0.12787834545154286303 0.78409256944468297412 0.76422418258294133597 0.57488903063145591066 -0.76305636282593292119 0.14650759112011665919 -1.229525910957112167 0.63880544399415783996 0.27549433080848978461;1.9909792926183960127 -1.5936097113542835313 -0.13082320842074512957 -0.47961263369535056533 -0.51176518609817456262 -0.33625584213928289001 0.33475267814930276256 0.68346613683642509773 -0.92474813341482009488 -0.53299048304049212454;0.26464912323414807593 -0.62595584695037098655 -0.45902806722026834318 0.90855048935195059645 -0.70204437251907314543 0.47586662135899454595 -0.82070851812993839136 -0.47578211626219335528 0.42314647914132247353 -0.47857631409145712231;-0.17305946048519685321 0.78150389582369772512 0.86751278799760989102 -0.7747180636513609775 -0.1135334919343438248 0.84491220875978911842 0.35521664587561896376 0.73216732864855960106 -0.22761530530896303959 0.88625542040184168702;-2.6734547403323962733 -0.39768808653400683495 -1.524460661363348235 -0.57254751504033651877 -0.72384900079498382119 1.2971237867617915196 0.53193825935903094049 0.29748215192369609206 0.49187504512122243172 0.90431109424815014908;-1.2272726626099266234 0.005983807220166736246 0.19459442236860077791 0.88073558679124386295 0.63191775512054115804 0.83843738431971936986 -0.80389508836018619409 -0.5488471698280836808 0.53673511850182387128 -0.74984869651744501251;0.24313042206736606987 -0.46203914146043040256 1.3107264431738487875 -0.83014087574712280837 0.75143575256097128179 0.18271796932557909932 0.21313801762201045609 0.80558730970231473556 -0.48333009659490794308 -0.42885602645288922741;0.82790897549809139289 -0.02920848933766356445 -0.13303700718396010982 -0.2961839656418601141 0.56656417991754137731 -1.6416430455493562501 -0.29958828603288728543 -0.25296424030719971698 0.85511301959718155619 -0.41166690549834694668];

% Layer 4
b4 = -0.71816450121157393571;
LW4_3 = [-1.2786825687013214647 -0.12263712378379378054 0.41786445994457360742 0.55121865773515754672 -0.18489418086100906091 1.05982170753722027 0.3511583939679742139 0.27527884336314750735 -0.53102813231550993756 0.099961617807698299742 0.34438129416337304178 -0.23896290158663929803 0.41758470760320026693 -0.61632482722797199415 -0.13864543844468177336 -0.0062403163643792187304 -1.2693344338223999657 0.88348833553728667312 0.21597788208300916502 0.6932377582169568786];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999931;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
