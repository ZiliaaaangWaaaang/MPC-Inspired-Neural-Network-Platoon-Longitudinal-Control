function [Y,Xf,Af] = nnmove_119(X,~,~)
%NNMOVE_119 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:07:22.
% 
% [Y] = nnmove_119(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.85918092085871;-1.99763696099884];
x1_step1.gain = [0.0522252737181727;0.148213484472979;0.500572177293996];
x1_step1.ymin = -1;

% Layer 1
b1 = [4.7953815416248222192;2.2034004471959010019;1.2865943876214287478;-0.14851972059800891413;-0.85175385265405612056;-0.93032588630241463967;-1.880666990071054645;-1.8688066763822237526;-1.2801725712822860093;-0.95457964733252043121;0.32175551700122889676;2.2687777507021169576;0.92079784291342725577;1.7884420655760853158;3.4357795634005112717;3.5240428489955855085;-2.0978647215535999315;-3.1500330059145875694;1.9397712468025596344;-4.5229150457139883912];
IW1_1 = [-2.4408709793870313476 1.1264222550115647881 1.26622015753090289;-8.1814665763500027396 -0.80859852424113420888 -1.0557898233804094978;-6.8655256515906772918 -2.1046782594657074128 1.8097443597196509746;3.3535067676457543939 2.8853819255896917539 -1.720225123691895508;4.6653276068605737947 -0.40457948873685922742 -1.6775405612095317665;3.4031229993604878992 -1.3703023184042890659 -0.28771453327570389868;0.61142714569269307479 0.65266241270317315593 -2.072192351627863971;-1.0091831633046994821 2.5854486140930945659 -4.4923194003252806539;5.8413103667685781772 -1.3176566589362934678 3.8748881320753301161;-0.66992789741860325758 1.0887078451481089214 -4.4468631813923913398;-3.3444659268785441597 -0.95435333826074131292 2.5215228718929632024;2.9523993602478628695 4.1376496084345335547 -0.49111286852232743927;3.7278360832524946034 -2.9180023663372192111 2.1529128370096608514;1.3467411662477128953 0.73137567825092020257 -2.6150150521228918699;4.9398275513133924619 -0.35927966354632839829 2.4852534645556576542;0.054341260348117530199 2.4048459161170820941 2.2234564103063467755;-0.11842336533337560756 -4.4624273635852205189 4.7398193102724279768;-4.0994025649475247519 -0.66647731100725626785 -2.185579009882106849;3.8897809877517937061 1.4979525404598867944 -2.5026246195096879532;-2.0037034628969134786 2.2911649407683398749 1.3641413163403524056];

% Layer 2
b2 = [-1.6135335382905846568;-2.3965245080582633364;-0.070340150521314079302;1.0120270371854884761;-0.35801079193886664598;0.63637412054480446688;-2.0730521982103553569;1.2317045488418976174;-1.9589880960599246329;2.057936400072525096];
LW2_1 = [-0.06455244357081500739 1.280027042824186001 -0.46972790754394039281 1.7420261377855841278 -1.2627940608933783118 -0.32384861451373131436 -1.2997876698227683878 0.48527534885319012492 1.1340472207619407552 -0.7177434668582259869 -0.16797680125485725533 -0.14659999147895605431 -0.55426773389328864994 -0.27329810490126899003 1.390825108539149868 -0.53861288762420533871 0.33240131440763293069 -0.12077747578846299847 -1.527566729052732164 0.39916300801637866202;-2.1600142175272725176 0.58794570190286532529 -5.2201212874935762898 -2.2097493266503107634 2.9262377252777826975 -2.3559114172214621341 0.015446996912345661856 0.29036508815341210976 0.31790930170053099957 2.0578788124439557627 0.33546600672254955899 0.53824237054143109216 -2.7530721656415604315 0.61819672912444723067 3.5158874280695133763 -0.57797934507634196599 0.66893394094058211685 -2.050009277914216721 0.069983573152307257392 1.952936002585830666;-1.2636309643355587706 0.66322422605894570946 1.2732770689658077234 -1.1894655796975641682 -1.8629327452954249633 2.2866481438636707679 0.24988610442980341286 -0.23272991632010259222 -0.15974593983338006287 1.7720461655129229328 1.5014839843927938468 -1.2304466923786054888 0.24096464116171248393 -0.09311581478903620257 -0.54574246235567702712 -0.6356344479225117805 -1.041953102329640668 -2.9418952952752044361 -1.4203992997368231066 0.38070723462189093311;1.7802550361594098316 0.37905498493622102885 -3.5818892446505681271 -0.33384454424420917373 2.7652208386792165307 -0.82112848037953301006 -1.3988361786212293314 -0.48706837334664149219 -1.3289953076346927574 -1.310098379458884299 3.3152360377942526881 -2.0934521303323805341 -2.0826173782069417051 0.67310248649831538881 1.920168957810116428 -0.86735281453330892454 0.50852669332345545872 -1.233325928259538129 -0.77914199233002212619 -1.2959766373607302103;0.033096651068061720691 -0.57014447758502673214 -0.060367176727029465966 -1.059840003412527043 0.86388245636677329919 0.56756656881126454905 -0.64858304385544207626 -0.49207931275071381538 0.63066846656709063534 -0.67902397570250827563 -0.21669106345855404516 0.33887247281838744906 0.2633322039960671046 -0.32607295915959416677 0.20465912046798967472 -0.11588460558152322011 -0.14385942729558115483 0.6288619954961788272 -0.97777340781833921302 0.61434551687827421151;0.94124428394308001788 0.20090293385136914761 -0.96402563756385795113 0.47106144512396286306 2.2844474759118922336 -1.3227819293701144066 0.63624686623978077282 1.4426354821475984025 2.205467107475691968 -0.21197765963548453882 0.72347574559932348315 0.97709899355963669709 -0.87829562115379344878 -1.2633880332065507979 0.50939374281313010151 -0.45528486708132098748 -2.1496081864790070881 -0.51058532987124050084 2.1822620929288891745 -0.057996616873920867063;-1.6963168846472902462 -1.6175054922562326354 1.6570363718377036921 -0.26768811733856262558 -1.598134892594132106 -1.1251609964457116586 -0.30635319532318816549 0.70569326387389075261 0.47320507093552982569 -1.8963459130326938418 -1.3865969722733202385 0.57079054768832659938 -0.62939047722507657223 2.4407930213724617907 1.1848677244452345825 -1.7604269711083688765 1.0068466814118064434 0.15437274653636628985 1.140476691048488922 0.87875212134939173492;0.58486097519434587788 2.5177162702763102864 0.23170950767072442944 0.13653816360211837311 -0.46802221238709362794 0.35270668384581488342 2.2928142347438509319 -1.0851299248437900058 0.040283638299152824125 -0.65150157719966228509 -0.10958755212993950834 0.88567892800464598224 0.20807780570296596778 0.49506049043551292321 -0.15109116183624304863 0.46540689979091381945 0.85039859814966767271 -1.0228414723522032403 1.5543358007930163645 0.19359955199712097773;-1.3365910790571560174 0.31093057488994790827 -0.49073454244725439599 -0.89757253410957749118 0.19247398714007568632 0.082454199118912774313 -0.31795866686551155222 -0.6183781519925252157 -1.1061860883237519815 0.0018809546639583759123 0.68548434273864922162 0.32568852343544918426 -0.091703318388680288287 0.14332142603022088312 0.44039613924708581605 -0.13815323049248853793 -0.059014619379728572302 0.91012545659264443287 0.98897019642093386693 0.78821840258588959927;0.99347299097916796917 -7.4125898792358615452 -0.58290569070611386593 0.3893692727888478089 0.090000436406648440246 3.3935166688670967972 -3.5660487233477748958 -0.76177996851144114121 0.70481807646735872286 0.58603701833044119507 -0.13521356625064454016 0.78372061952234017834 -1.7495434182173859039 0.33510000380627047445 0.84154130820094363852 1.3700732677735905085 -1.0783624075622295635 3.3614618428824925012 4.3013152003196699624 -0.45545585321560355663];

% Layer 3
b3 = [1.8631540424220998098;-1.5517296881913347217;-2.025285688340288992;-1.6818869688381943295;1.8304535983873124749;-1.238618107271027613;-0.16080850629646228911;0.71642533920091966415;0.61997609657785723858;0.57892691599684364956;0.37361867406460103069;1.2699187274574150752;-1.2380140593566228979;0.14998262496423531154;0.74808856602617956888;0.70448907396222826272;2.6487632209484321955;1.2020001073425161664;-1.5893844585060936669;-2.6018531751412279363];
LW3_2 = [-0.85026082351297338491 0.093450235440804774179 -0.99241235637200131414 -0.38144421126392502597 -0.86611803436767864639 -1.2894985465790029799 -1.2727898791040150872 -0.32109308511271195119 0.55410224589512024895 0.0099868047679267275829;0.95056485838445747838 0.44070929839306371978 0.71819311746297953558 -0.1915090466971906269 0.32392719046621620826 0.69161562471050530565 -0.38686186760594831746 0.13442099634402765451 0.48532235276373458799 0.67366508967763139015;-0.39869989623879892315 -0.23189348484809618745 -0.53726405233229090896 1.997136700342548199 -0.53635921167866396075 1.0863045431689712927 0.86977675535634946247 -1.5726415710287542371 1.0374526705755646727 1.0750967147206711427;0.10375929214831580705 -1.3643137668478044766 -0.23037224864314861938 -0.51824999263163840091 1.127841872174771165 0.39296413821654313514 1.199457283207030045 1.0873215861159892803 0.6375693884876548756 1.9525904272584408972;-0.70911791496817322411 3.7231411430183758426 -0.055526047668239569832 2.7321877222033195132 -0.0075085456354181921712 -0.32153146602549703692 0.18293324380915926275 0.51748613471675553033 0.50708527291214389177 1.528053043692559454;1.377262004729111089 -0.14242550915301319114 -2.0373808721478847694 0.095377618606616018648 0.21549768753104572849 -1.3030415337409679832 0.31303558851632867777 -1.0332817235758435803 0.40198902012214232649 0.56386859530453659062;0.47113891864818208122 1.7050521159661324866 -1.0415472049845773128 2.798847059345412891 -0.044443034985167592654 -0.81279844143371027254 -0.59757919095412381782 0.357840086460927298 -0.49600301439380090063 0.51625778354647677837;-0.11653994908805384578 -2.0446389838622507362 0.62332866567913558509 -0.9280789813001345534 0.0080320817110788554627 0.13499667245272706229 -0.33784750157456733266 0.48841746082305620424 -0.46728052016763288457 -0.70526647561264088626;-0.3901291911186030581 -0.72877712398003846594 1.5320934985885408253 0.87327718365786388688 -0.19591558812234735609 0.22039297689331988073 -0.19494886738912081681 0.51703839372214954739 -0.38198941451762380428 -1.3174601475912854909;-0.40375580914294845192 0.76879062093886041396 -2.184253378012436464 0.32822052354896197324 -0.72509904786222956208 -0.34224862841516234813 -0.48092697432966374782 0.033310394437169897619 -0.068146406381044008493 -1.0832840277010473695;-0.57257246127595173846 -0.60378973373605793196 0.88037744351751678895 -1.437062105838496695 -0.91470812865448380968 -1.3338577629660699486 0.050179261064711579154 -0.064520464077594499863 -0.71494466866924322179 0.62441383156609786553;-0.57380668419406533065 0.032481855925642913463 1.7224170037204244998 0.31657431670970104243 -0.30445480740062913494 -0.84277459630749373964 -1.1892535045276242389 0.15192050602015633176 -1.5496194380072509933 -0.24491662482447609794;-1.0816713901353716132 0.5119509933777420807 -0.13485413024004030969 1.7864739899164625569 0.2854000610195572829 -0.38809025922562384592 0.11473622418031202697 0.61058127490721381125 0.23468680233044880712 1.0382468047315571713;0.019939658837086954302 1.0803962665445814295 0.47371680556653039673 -2.9733006441098779327 -0.49591406796905551646 0.59974245253274194312 0.5255795775649276802 -0.039668632902103602433 0.19931628643032991977 -0.81195576092321353201;0.47971264992242668157 -0.93627360667721104548 0.84390726425809625688 -0.01678733300714232296 -1.2056319269306130515 0.65416033133528883603 1.4157372160988321852 -0.67103876950393093193 -0.056420437300894694943 -0.97499994304282289193;0.44968817689682055727 0.20693926721180563866 -1.0890422987901253737 0.31486512062175031623 1.809792120284617889 1.0062765395047441608 -1.1495846483775487012 -0.042984385035265255948 -1.1069569537229946299 -0.93371476185835722283;-1.9478466788041379765 0.036770928028386815067 -1.0937158179416195392 1.5397168147708317765 -1.811675808865808035 0.73505538729219910277 -0.56541315051809848402 -0.22248918210956758479 -0.66408673780441729306 -5.6135742911223704965;0.60357017626902542684 1.0470847055301388817 -0.58949099343009170315 2.0093069607715201563 0.46052111510167792474 0.12809287617586317953 -0.50675714240714397896 0.047999386808244011438 0.089688512085223340287 0.64164947133789285161;-1.901674265418386911 -0.51684217918061770014 -0.55743040869654425506 -0.60885313733144863502 -1.5554856171015101207 0.18689538602301661308 -0.12416951195452116674 -0.3563746766895667939 0.7709355702921418807 2.1140646427053542133;0.5064892609566462589 -0.14969174138158700127 0.3118590091851451418 -1.913525737796331283 -0.086516887642591008833 0.3466551767576609433 -0.51480192717711670269 -0.69672162714906071823 1.0490941918882654704 0.12385029258390460594];

% Layer 4
b4 = -0.019201688122896069799;
LW4_3 = [0.76908413069904013604 0.35364830731190194379 0.10963096466433264187 0.093983595055511348626 0.82492366692258844996 -0.93785234558633645552 0.31387410731542270126 -0.13298583037611724778 0.12511632782119047613 0.0054724563399709165445 -0.68144474551261158268 -0.92294194256784378716 -0.70214142124277867385 -0.40812757749057670953 -0.064798403033338697332 0.26436165021370128247 -0.8091921679782730914 -0.64185027446571751852 0.1155904674503161339 -0.14000003826184587163];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999931;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
