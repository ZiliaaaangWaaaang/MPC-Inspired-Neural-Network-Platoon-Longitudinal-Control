function [Y,Xf,Af] = nnmove_12(X,~,~)
%NNMOVE_12 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:04:00.
% 
% [Y] = nnmove_12(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-13.2925490923537;-6.70139767883548;-1.99738196042707];
x1_step1.gain = [0.0638195875959219;0.168202204644631;0.502184479042526];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.7756393598845057191;-3.4173130619173468503;2.981252956584530267;2.4581230512056646553;-2.3459734482377121445;2.1963186016538762679;-1.3333954666505387632;-0.75565687622085531139;-0.16513660315968267667;-0.81970951310126527467;-0.012472993698061181703;-0.24107895098436946113;1.0769703223030879791;-1.2600073364664952091;-1.3231671814965475509;-2.5458596538322506575;2.7025557252447347523;-2.8946217091018175971;-3.3873526846889201458;-3.9464390463211143079];
IW1_1 = [-1.6803695443956847555 -3.1397802646838872676 1.7630565786123668648;1.7556624406022582896 3.332440628590771059 0.14353614215988796943;-0.30504856256414930593 -0.34551308941467839819 -3.8113502171555757592;-2.1004770373236087977 -3.1599501586168039502 -0.92269085952935159245;0.21105712212148305951 3.9048745840880276781 0.98800500449491046595;-1.3677964509107722879 -3.1327478472098699847 -1.3021122026847100628;0.2049598436202727525 2.2651076160065253262 -3.0384049467117986154;2.4751869475218200023 1.9396973060558757584 -1.9040244215161923336;-3.9282342383223038951 -1.6353045510012038655 -0.076143420038491033131;1.7587397710821432995 3.3788565866983724106 1.7546903249185139551;2.0097805359955938087 2.9304428384338687685 -1.3859201646190446588;-0.41919747254337780262 -3.8338151419387909158 0.87098991759575883354;2.4556378585803373404 2.5182263445756944975 -1.7892093267872601903;-1.0326940370788111334 2.6640530981560082147 2.7963465612854019327;-2.8215070726171256332 -0.33720104314013371605 -3.0247617004628510884;-0.34034453722114482721 -0.31501572099717989328 -3.9042604709889947578;2.6442292572325336586 -1.9167864711197706296 1.7965815343582358654;-1.1756328326335454548 2.6060815210648664575 -2.5954757055055819315;-1.3949921979481261225 -2.9045318346676700649 -1.9731200076617492201;-1.1869356446140251204 -1.0167358798310304202 -4.0706532332712273003];

% Layer 2
b2 = [1.7458194641509772183;1.4776579454484439768;1.2251260300700654859;0.60727370144851755551;-0.12054816253067526799;0.22722362467033838107;-0.10081860670873434016;0.74486122760457451619;1.2711955015825846527;1.4815057030148346406];
LW2_1 = [0.099589813798991178029 -0.74834078166993334147 -0.30242130266180283771 0.42394778086114559557 -0.56038834239971591078 0.71294400789938883189 0.042934031464848775028 -0.24552576015959612366 0.465520312223403121 0.12326848805447410129 0.44544237376532386241 -0.46663393108860617975 0.063607284251186849144 0.20731423443744204094 -0.38139907823711960422 0.20737494011354401513 0.26019105592448382724 -0.10616362469243487143 -0.045933017180255511502 -0.099501662629518983216;0.37956367204856877873 0.42737667023816344747 0.21686510877677689368 0.50720935762632579635 -0.035470841771504224571 0.20513688156551035391 0.29761289689002579095 -0.61140642756477636688 0.077183522771720011746 0.58599446879728378512 -0.10369806226476807609 0.31112992447676957042 -0.059195596180685955412 0.91671540128244122236 -0.065371707661966399483 0.46348602436132979587 0.052876438767907055216 0.54204936777217238575 -0.41575574650136853938 -0.14365905063724876412;-0.1953743699872014794 -0.7530655088599511604 -0.11337155429387350825 0.27003997202234758523 0.35852492222458232085 0.28309024044088904049 -0.29631281400948433769 -0.08430347348019397169 0.33562701627209101662 -0.2585738737908473972 -0.2034788082043565427 -0.2289426797959197013 0.045965620780143441604 -0.72392113339096497704 0.13048606549188576653 0.17731270831116388575 -0.021059167143914491599 -0.68220409735929699035 -0.87383237914596390006 -0.58257680856300919636;-0.15284638910593767447 -0.5099127107838152817 -0.012304874598189356055 0.60774654693019203311 0.44828535217587023309 0.098233040010228478423 -0.15924911048593068386 0.26339885519169481398 0.65306609069397902889 -0.40358489330082847335 0.30308223844494841526 -0.91216322901828650327 -0.073883356828214050149 -0.4590298029834714022 -0.081551351733532437271 0.085769367659397466319 -0.061075889326482092623 0.47723076131019559476 0.13733582896629939474 -0.18430732494481558148;0.22600494353684000282 -0.31590369113251132172 -0.967447743093902357 0.97468248545068048028 0.015332511115991938333 -0.097427782636870130517 0.19270926186386025392 0.078050152153714663639 -1.3241275197058031132 0.69895482548657794641 0.49260300365317960525 0.27274350885235232322 -0.84884146053870779269 -0.96487314196112683451 0.27286995550996762105 0.16228676756363710765 -0.6736659897299334121 -0.29559441585652812545 -0.15520369755559026981 0.75876531617729625623;0.19745962151759141601 -0.70852923863748029643 -0.71422989420451088449 0.24021458706822551576 -0.34734479799409229139 0.48516311254301525135 0.64312434337665635997 0.050407891774837718102 0.49477456096842947764 0.10064909167022327574 0.48546598388209299957 0.55313607144007337357 -0.27501134510785063547 -0.21990892650408008779 0.24241263721344044613 -0.46456935448591496485 -0.0042620452984483249773 -0.054797506686042538049 -0.74306586710408606411 -0.093085036656117531306;0.14732698693410445356 0.18228609092040087836 0.56987365800185574294 -0.3492464928633187693 -0.22645928280549698641 -0.26073933881073640961 -0.24448476496093560217 0.34394930418624014568 0.55927793764532829357 -0.27491223428423422481 0.45423077719651044903 -0.3876687400911872361 0.16466181421761671988 0.17999864865928777435 0.41950819991949045429 0.73381969621622467059 -0.49252012882137397032 0.95367376454881247483 -0.23931972863772027482 -0.83304487640375435298;0.66175863739421869614 0.077011210045354189235 -1.0651495138503703775 -0.57464145624349405317 -1.0097055685834435135 -0.80617828159938498267 0.49870075026469534718 -0.20046400599923386299 -0.93913566145919824546 0.11765456010392728869 0.28474373807696395922 -0.30840618774894967835 0.23487776140330071661 0.083198527095052446367 0.18562195090262589847 0.77086502270493373334 0.24366259279463475806 -0.047433772049962102946 0.75974171094665088333 -2.1082819773687759835;0.68379793815680733893 0.082366073378174989306 -0.37077100563362375141 -0.67651180993229420579 0.64896673180899655531 -0.33300844748990798827 0.16931778548805284657 -0.52640044506376437727 0.30434529159300438561 -0.69215530614658593578 0.48501620017147328845 -0.90345859877350898071 -0.14738962813310527156 -0.24485096893757837822 -0.47877831740601339838 -0.37452520313597836843 -0.25909601651007979628 0.4405683274191319887 -0.43052082202014624324 -0.021798135086088108597;0.42729762664522719096 -0.37368853358450498936 1.0648224362175295887 -0.62235671210679077703 0.02297454092818643559 -0.33432169437980757687 0.5017417290855640255 -0.51424628081884904418 -1.6789359935974366156 0.47970100694597284097 0.47827066751953478674 0.26451807236018010094 -0.38785397371197372074 -1.2707622274961285491 0.10597296908322792475 0.39578559919842370984 0.32022161728917208912 0.21296767911552066943 -0.2960336164321694663 -0.0071790377295531592958];

% Layer 3
b3 = [1.9374869920115347366;1.7236891264524527578;1.6500450734673866027;-1.3777243833095400571;1.126696613553380244;-0.99420376960146361611;0.84365341795042858575;0.28916536552904748003;-0.29309236159087642681;-0.010568635295742116395;-0.0083781332715753484286;-0.17992733909011529581;0.59613405662793061968;0.60183995337285067784;0.93520446260349898715;-1.1821728369523272217;1.2390946724987952354;1.489987963288375461;1.6822161810842979346;1.950842384631453319];
LW3_2 = [-1.0210978264117960279 -0.50045651891124864896 0.41946373227398786598 0.61839272421191016083 -0.67649683839795848872 -0.2260824498099104074 0.85628775431033565813 0.27419330492479576655 -0.33197484817385403133 0.33632932699825918155;-0.44674380731209634154 0.39070375446582727985 -0.85054492816499505103 -0.26478700151977940802 -0.27967022573783556494 -0.48769086564730079747 -0.30403114734757330506 -1.0592302144532370622 0.083822925750630619679 -0.40230142593480838764;-0.24152599727822493536 0.71704660489644667098 0.25401572993647797416 -0.84614844401880906499 -0.236738013230903932 0.45389533944808752031 -0.30362210528584987479 -0.60050393091903953025 -0.68587204096674725395 -0.087608343648028136341;0.24130564660424366763 -0.22874031828083443707 -0.55971869539925467318 0.93512720942637583832 0.13539165451643600524 -0.27710707038713805472 -0.89750058261634924062 0.60839267852040179729 -0.53199692831475320354 -1.0015270597925751694;-0.64134703097969203434 -0.64248276914758273293 0.84102619881911278021 -0.086516326512230873336 -0.60248000170583160262 0.50384381634911368231 -0.70597559508141027873 -0.3450678847264572191 0.1461461802534886889 0.87520855219698556748;0.40309945694256787974 0.75876841806450767702 -0.31021247421050812676 0.070038470932544505398 0.52880535481100165995 -0.7692631491557175849 0.75885876634972226906 0.30692499175276971579 -0.63814222622509064742 -0.69245127508024317819;-0.014506069637086883156 -0.54258435671430316205 -0.71605992655905359445 0.42472491882746432612 -0.64332906582071902601 0.2328148907679417623 -0.36036385803121734339 -0.74624310656633252581 1.034286995288019595 0.32615949014558992536;-1.0719714145513663528 -0.16687677055054858655 -0.86391339564103919457 -0.45465765118176326709 0.34629956075444229269 -0.33992714488818948082 -0.62120875898835847817 -0.3301526073486749091 -0.43940998440161421756 0.77869677374866086428;0.43378741542217152949 -0.8808741550728806935 -0.18890688548585526929 0.49527427211872926405 0.043784859537081492753 0.78990209029199487389 -0.37922688076901778231 -0.38418689037909115047 0.97219223148379096955 -0.32125713350936097035;-0.20876037236900416016 -0.47215342518951763928 -0.9164027820642487443 0.58686568466604793759 0.25299041780268177737 -0.49537388374213214837 0.21935958102089345156 -0.88261395685876053996 -0.95649595548904831066 -0.050649328295322121329;-0.71672943810251943386 -0.76648484638080061071 0.84350313916300845296 -0.58439115687226261819 0.06055556501456149654 -0.37591507914542349189 -0.50525987895695689822 0.56611185442171918503 0.25751262233364569099 0.81412067018933298446;-0.55065513034817925586 -0.73040080219824388141 0.77774659834687476234 0.95404838787710399828 0.31860045603672981773 -0.49253101310744318297 0.58830234167187567262 -0.5191068842070424294 0.31353963976492893462 0.48045001793957009539;0.72414947592225953343 -0.42814866987597521852 -0.77476139700216484218 -0.057321370535467604246 0.49998610077323019096 -0.51352339139603364604 -0.30559932042448612055 1.6244816604758540723 0.57061886891223378981 -0.68721922385373879205;0.65879035561644072594 -0.33292351718059903787 -0.65611659298162605669 -0.77461719318982402704 -0.81390783781247333373 0.66235343651982936386 0.49998546700017687527 0.34119737886413370465 -0.097504324653122725897 0.40980849226614673997;0.2526117129160401209 -0.30844766560190528537 0.21391861453751484512 0.5861332653047365282 2.1029906848535220298 -0.060062093085489952349 0.28868420369921715674 -0.054009221258227768647 -0.98160970687393156453 1.9147269101091641819;-0.00024663983774255490017 -0.21725021980353437234 -0.39964147518894477251 1.0074756302820910836 -0.27454773086257394654 -0.5606149101457371664 -0.73557207052482587173 0.71089926924975777034 0.63718691445650355032 0.78863641069583145793;0.7531657751066308526 -0.71896087702912558903 0.60075763507053947521 0.26362025236401936956 -0.30893416497684422772 0.84301470758181717979 0.42386218796717117785 0.271556359312779938 -0.77078716911903377706 0.61238064085351751054;0.018757123838026894952 -0.67411325094196794527 -0.80950278445989998222 -0.22975796877689003139 -0.14950115695602297916 -0.55351294722939936577 1.0033830446416558413 -0.1147094190282078735 0.82611924184904750312 0.036613269686775092027;0.91387026583874730878 0.35100220402666282293 0.89720429232024201394 -0.52517527541787223377 -0.39005814522583837078 -0.18470449314709735944 0.97305633331258400975 -0.29667610227624419128 -0.17543406928669003086 0.54515970155203519187;0.41298841457800161692 -0.90330659163760407271 -0.41028347812486148927 0.76534179715016670276 -0.43429269020456251482 -0.48220424386477084289 0.74345140430768441586 -0.35128576545420553412 -0.84463759160027984674 -0.89620742969971967096];

% Layer 4
b4 = -0.60891219589677436641;
LW4_3 = [0.37289192950985472486 0.62218273689125158654 -0.061717819372559129532 -0.58311162522272230735 -0.39185931861948192223 0.45893476454134801701 -0.4372228318348514442 -0.085141343678002967543 -0.28486585673834446952 0.092568786885142986809 -0.067095833104058588692 0.16539478852256608854 0.79353303838295874417 0.22443046404147334871 1.7760658124576520489 0.95645770951609399013 -0.92281845727458289286 0.080924413665088845704 0.7231867529612306944 -0.72477364203164218459];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999945;
y1_step1.xoffset = -2.00000000000019;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
