function [Y,Xf,Af] = nnmove_130(X,~,~)
%NNMOVE_130 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:07:53.
% 
% [Y] = nnmove_130(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.85918092085871;-1.99763696099884];
x1_step1.gain = [0.0522252737181727;0.148213484472979;0.500572177293996];
x1_step1.ymin = -1;

% Layer 1
b1 = [-3.2453511391575249334;-3.9605443514941462979;-3.3980292484749923254;-3.6765436974911396284;-2.2042283202660835073;2.4433792659219775167;2.2065625178653327509;0.48899681440693831824;-0.11045039149456875593;-0.7677018406058330191;-1.6418006595223315625;-1.1444032151254062146;0.85674790214314233694;-1.555021532421312358;1.4356250601772202469;-3.5134436757691442921;3.0394242923969954084;2.16039937592092679;3.9330233657200626141;3.8402215662249452599];
IW1_1 = [2.0920722916847616091 -2.4472423119876660635 2.1216203256109262831;2.5865591620404986273 2.5338730364203292389 0.16821980378003453804;0.77082891930632380095 -0.22704183208478662115 2.1721303765430035604;0.93505846757599520025 0.8186620831422014577 3.8138309992327741327;0.68404185692264607432 -0.85957485239698094848 3.0912123718233974756;-3.0228209131728331904 -1.7050481753896331583 2.468439584991237723;-2.3404278077798004176 -3.7914374088930680173 -2.8134347655137559308;-4.1749221811384753522 1.9019507111397055965 0.86136243130781398047;-6.5355071725173354835 -2.2363529888667148526 -0.11428266799238237517;-0.86277615649790384555 -1.6467883672774701331 -2.6963395479348153394;2.367580590497037285 1.2967681893934479564 -2.5042067668524619073;-3.3355636421840069161 2.1286154208690009071 -0.026596317547086353178;0.30466246739775953989 -1.3305689892877721192 -3.1600319468560233993;-3.2404204977541666288 -3.3761066785610776009 -0.23133239165850408292;3.4086134084279455791 -0.52025466280385668227 2.0317302840082329674;-5.3962367633179857407 1.1457463686855975382 -2.0312069523248039715;1.5421152870579621919 -2.665709132108865731 -2.2504076376144648286;5.3591698628742108212 3.6603639831918273195 -1.8606566865107576625;3.2476249234704712698 -0.57370964905401866663 0.38831579276404781798;3.9007971009172019983 -1.4463720125743206868 2.5825480330536461082];

% Layer 2
b2 = [1.419362578249907525;0.92921182060226592547;1.1980348280942136885;0.95749944558194111099;0.021264602369539059579;-0.93459602742933445274;-0.14856991260733795612;-1.2042248113539482102;-1.1722798924572694901;-1.1478609411972930943];
LW2_1 = [0.73351543998754031861 0.53138194387537840413 -0.020739655423464641026 0.25375747583283247977 -0.19122011301935179506 0.50851775584889791215 -0.51506227577028174114 -0.81083973878312431971 0.9210243898183442246 -0.83438154248361584564 0.015382538613962172189 -0.71879190070189136197 -0.1915034575332892619 0.56760459699211884832 0.2951985434332645708 -0.68445375431205102146 -0.081295382960257789318 -0.067709652259183419898 -0.67664218447322721506 -0.11644504644641381907;-1.129450215078291242 0.061951964354713368044 -0.57311409536855095759 -0.22247776024723064925 -1.2280540411829075076 1.7287398319221976006 1.1627139036309013242 -1.1737293674413460387 -1.3688631282469638784 0.22405657763064479315 -0.1451180296965699501 -0.46061163297206020317 -0.0022168997574718591476 -0.68961628761203808136 -1.180681781571588207 0.8857303882717744159 0.88643071893616032231 -0.99097870715996672075 1.4427431297615822547 -1.2066622957583814646;0.60666280885553847124 0.23705968082044576173 0.43086289862563292852 0.50603508423842291641 0.42701715130398582021 0.43750469263550834098 0.24732898611552739387 0.42613326610683388562 2.1028248112589293939 -0.80274436995721232257 0.19251150975184300185 -0.66332760088457143333 -0.74008986744991844819 1.0982670764721456091 -0.41245389923660757958 -0.47484255931106794657 0.08990626678455988785 -0.24700023020568703802 0.014608581342313430029 0.99738133456132394006;0.488923546238523965 -0.39981433429465107476 -0.93309632618176174823 -0.74374641234503025 -0.60299456698517905906 -0.086389939678203547802 -0.033362905053359245833 -0.62815692703908199146 0.72554354520017794172 0.37586989567235429277 0.81980644090199705776 0.3870980762939976727 0.64228570031920573236 1.0378489769841798829 0.84888240292275873866 0.031361466155546788293 0.2035311080863841382 0.4730834302680579917 -0.12888307085909120331 0.010923107436255678759;-3.6154414334477733561 0.48183202023011573178 0.14167304645243641859 -1.248311210422951234 0.87357289544275551485 -1.7624185058177863628 1.6598975710239500803 4.4107069118409949482 1.6934752839294029414 -1.0980078621705784414 -0.50409527175162727186 0.044620061976330345488 -0.15009866905520669045 1.0300442519157781973 0.82945949034561383684 0.99812009421844738455 0.32741037742168865865 -3.6678598893787586199 0.98424271275042718443 -0.01569417503973163236;0.26352682577388086838 0.41341428132519780769 -0.51505119691870071552 0.44142617248224025328 -1.1207603249225728259 0.32707773018523839115 -1.4468741187610139054 0.050029995704883062357 -0.38680339982833078505 -0.72610865042284844506 -0.45302285074376907881 0.20186506814099813845 0.10112807526752531917 -0.58720722411334458357 0.45118609208827975543 0.15754945376557041858 -1.7039859811608220053 0.88109337541145160699 -1.3069724592365217219 -0.41954998113497543599;-3.2364063019081497075 0.19489321711516002789 -0.83627375727638708636 0.059794185807850640246 0.47566876783933481621 3.7680107137106388926 -3.060830012753203544 1.6283149317741876239 3.9371827736364863881 -0.88125124457384118593 -1.1759938213403502427 0.37152064532231976468 -1.1964988989314864209 0.099533213985115817635 1.1159635964585901124 3.5125466749019613744 1.2145748571697356777 -0.29104291473767085474 1.6229093490985062598 -1.8635573384249077833;-0.64787746916442301437 0.042348684940685700495 -0.17268255021916534275 -1.0342044522038902343 -0.42065527007539960103 -1.8353178424347962316 1.0482524589442363538 0.46779968353636769418 0.50517964184784691639 0.19320824750709059137 0.45175935511865283889 0.99786468071983180916 -0.22636693091758203211 0.26106811337205426682 -1.5061099991250845864 0.80281969271936093335 -0.25642709425131676726 0.048399606195324143543 -0.22769202239213146011 -0.085605095675889170126;0.049923322731240518668 -0.015399954860222730274 0.77342177453137039844 2.7175932611675128747 1.1468825369891382238 0.38387832568611229833 -1.2573787884024678618 -0.49756618032990546086 0.92955597819508417601 0.46699811916145672619 -0.97244792721573147798 -1.7694426332853661066 -0.5237549800900012098 -0.70867828839812674335 -0.085016619087830050394 0.1862752614350584035 -0.024885672468857818196 -1.1601970896223927632 -0.12730518197271237235 -0.39158583794310591886;-0.74317034219197042333 -0.49995986878523746011 0.0057258177868381113923 -0.28699987598694687296 0.9483825166112898053 -0.16397040669813178759 0.28150487174628274767 0.26307572736814355263 2.4927907788428216307 0.13836453891724581622 0.3458092407393397183 0.15200145620255417489 0.19427474460068111517 -0.15900741882833474561 0.065495418201665239755 0.33853971549206085534 -0.25383164152592263552 -0.0037159707504496007624 -0.12651207096476851932 0.11511617151130859593];

% Layer 3
b3 = [-1.2601903588855019045;1.6979566486092925182;-2.312041028847971802;-0.99292225912778853125;1.8826615042227639041;-0.57134162145972333668;-0.022603142537933051948;0.17050325353384779281;0.32158290827068641837;0.6387701947945254588;-0.40329862411355410501;-0.12186039188112404719;-0.37050723328580770222;-1.0801993324905032612;-1.6771598754768455297;-0.61456970833903723506;0.57950891224529499368;2.2992373772432506129;-1.9341016236991404043;-1.5844143598179070143];
LW3_2 = [1.0500338029419573616 -0.31350370003572708422 1.560383956082205037 0.28369395008238901257 -0.037675203338192492231 0.35100316345095672332 1.1035747371910891168 -0.33045806570908353716 0.60074051688314467068 0.81939443846545345629;-0.3103361154208013617 0.99590887578308551209 0.97623027383515204036 0.78246710279656728204 1.2022774588420366282 -0.68857262656130402423 -1.411366044303404399 0.46386415745966502744 -1.1303808055973130209 1.2655480327641832616;-0.58831895887224960884 -0.69198829807367867595 -1.609756401875356735 -0.058351606966241295615 -0.026800115037895238385 -0.38552426838976300294 1.0549705433048719438 -0.36962125032733655905 0.98887678180410987228 -0.13416164775666064579;0.45621458626417266125 0.63599496742013117423 0.077470969805048042756 0.45975114523002852396 -1.276878152752336959 -0.28150865466277336102 0.1478753088242042435 0.51475674709412500007 -0.085764416082785760453 -1.28057291794035355;-0.22402424938628856532 -0.48588884031855184009 -0.42306972467968062546 0.93412337390997690623 -0.98199909611909186324 1.2317522378710394904 -0.60033558041900103586 0.0045998617373164494421 -1.4307877160662576532 -0.55066219022367135505;0.99951530813798117325 0.16517268449184946411 0.65903438230254574037 -0.29386015347163690903 0.19723357740477437394 0.75382032718621694301 -0.32983421640645504969 -1.0605841197556660216 0.11769357114233952588 0.52596714286087775658;-0.048188268761244663907 -2.2730025680576892988 -1.0336165463673936404 -0.44416073907385117403 -0.81535686567224940902 0.34280169933417009576 3.814357176349527645 -0.068827270292740730384 1.8610724471897357457 -0.82929313859889131066;-0.63201767291743005117 0.36553913594917253338 -0.56684833246874810619 1.3172549125300769823 0.26435305609526632553 0.53128397049673892205 -0.061737033903128360479 1.1324261704061038269 -1.0643957363057827692 0.56162626549616523342;1.2125470339412121046 -0.048780489025763498767 -0.068770191908928607338 -1.0566695570638311441 -0.22900565732877728453 0.08767992090867177124 1.3593427594079230403 -0.023704216256572180344 1.0882696581298207938 0.56572188152333557909;-1.4810609532828469259 -0.87129947878056757116 -0.085140921396828980749 -0.74739298815928478792 -0.50240085599786377113 -0.67240525352275160031 -4.6275790789329880326 -2.0487709800926920956 -2.0814519107008453425 -0.00028990160554870358922;-1.4899476301258496314 0.5482654098853984026 -1.0127149413895926156 -0.40488492563279998571 -0.11255326979028840162 -0.37671672412055218215 -0.53903854713837806578 -0.60253351730878823567 0.17242721130550658915 0.57217757406438796153;-1.3162136750563975252 -0.17782079980836715261 -0.41590472533923444898 -0.48091854567968977952 0.95059136377859065892 -0.54907015183113394574 -0.75616865715623760025 0.1990614815022418993 -0.17770771202102131348 -0.48563425729632797578;0.48580289976416546338 -1.2199669608363337137 -1.0277762265897738558 -0.1599321300932592671 -1.1631979700700838531 0.04709949163868590305 -0.17303332274781013655 1.2287618972191820532 0.69367449747854614817 0.77533201499903570131;-1.4330282675943455395 -0.33931942724082858609 0.17191677258362922376 0.98461535040676317898 -0.064079439927172326952 -0.6371983789194080039 -0.49981756473269750574 -0.30410941875924329958 0.37631255557636344999 0.2376597726283670442;-1.1351859408913420602 0.68161918226131024134 -0.94656321692885947439 -0.77749445238106351663 0.87330157344130121544 -0.34334986206097373174 -0.08396708840399683127 0.98480848587825309259 0.58231349030115542309 -1.0994342288835738941;0.20869717667737497369 0.991815714375826607 -1.0027299894856043228 -0.39807870070480927405 0.26283770281713814132 -0.20300686837437534327 -0.91897630939383190274 0.21224096326267502532 -0.61949706956941863467 -0.45364562714223743978;-0.65563548855985998021 -0.95243023873524967904 -1.1629750785761761023 -0.12322600664858983366 1.1772152797012673808 0.39747573737024066709 -0.53571333981723978646 0.41758394407564930484 0.048549333200915631426 0.86456320804840269822;-0.21924058951524291738 1.8801527116453917721 0.054323067647823103377 1.9683276883853166872 -4.7250553872046037185 -0.74059374997478610858 -0.80828835643901930652 -0.86889905627722219261 -2.1874368175861311769 -0.060297743680778816133;-0.74105149162804717644 -1.1477882098330591809 0.30089077849505091455 0.24793606392472664068 -1.6251071878124632164 -1.0142948426901079451 -0.47667508532677815847 0.83935134018265034062 -0.11514828179168221101 0.89488778659464895959;-0.23494839132548911431 1.3139935927501045221 -0.76647446558128806693 1.2780252738283415237 -0.38813157685425142551 -0.3128715230112213419 0.32994103171195093838 0.37454199800320853164 0.28697636843085222447 0.7916957310410426274];

% Layer 4
b4 = -0.094182884619380943803;
LW4_3 = [-0.38034019178519801185 0.17001400347651163258 -0.85846569798190863754 -0.03678347990562828157 -0.031021960512211583377 -0.063805377645926683594 1.1724010429364415398 0.076923137369306823774 -0.052360183233798471281 1.0443770715944993288 -0.17273267369962624906 0.35099738827347942705 1.6303102843854444526 -0.19265090174446025673 0.4357216000970113301 -0.46228356810893400652 -0.52985570524104874668 1.1816078605093665033 -0.65694365666400689197 -0.07251854810716534816];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999931;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
