function [Y,Xf,Af] = nnmove_132(X,~,~)
%NNMOVE_132 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:07:59.
% 
% [Y] = nnmove_132(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.85918092085871;-1.99763696099884];
x1_step1.gain = [0.0522252737181727;0.148213484472979;0.500572177293996];
x1_step1.ymin = -1;

% Layer 1
b1 = [-4.2223667053960332041;2.2595424370671217673;2.4869686449090742109;-2.7713314784475859831;-1.8416250112281502549;-1.8706065723549900603;2.218500211702134628;2.694812267321981647;0.0712579714741324588;-0.44396478189768795453;-0.87284210405108519915;-0.37049181733815983453;0.95808430073404482474;-0.045869205113878444569;1.7242486856895458125;2.247755732772135584;3.6439458717491346462;-3.6800431367369843549;-3.8358715476983129555;3.5532658362039102329];
IW1_1 = [1.8509232659683034772 -1.5903405082775370349 -2.3702483664583788858;-2.4133939816137917056 -3.2749767673740035612 -2.2440601466398755193;-4.3236436553517041403 1.8686362798061479928 -0.69026851315762915995;3.4580728021368347669 -2.0856840131843501496 2.4334380655675538208;0.48581804997212507669 -4.7536403369045716616 -1.3052620109560590933;1.8925380366534074739 -2.1947573688131356562 2.4185364395556927519;-1.4868988596346224274 2.1571893519694298469 3.2874672821576607085;-1.0241982535391689346 -0.1494747393380280176 3.402566772195710243;2.1614790238703225356 -3.0895392824233454121 1.5762117031038438419;1.3097273770451269836 -3.9109914610729452633 -1.4232682015292799083;-1.8980984185318041657 0.80673210002269934993 -2.9299319412572333299;1.4856576734697859443 2.7122338265821857028 -1.1616717168735606336;4.0387374894061442987 -0.64857701171872039758 -0.28799183242261461313;8.2283829279820732694 1.9971038677189383304 -0.9247142291678727144;0.21374218839815464777 1.2873423849037661792 -3.3896777761843601695;0.38229923619407651936 -2.1880282284212593247 -3.0430707883402807745;3.2613995411938274671 -1.3108732429449749812 3.7972131752632880541;-3.6089998435246348762 0.38296266378461862878 -2.7436521053467695097;-2.8921154811614506741 -1.6829630123305221456 -0.80790820960154763331;1.0888616297472999417 2.2527800998229072782 -3.9626819735270211176];

% Layer 2
b2 = [1.7450620369494100892;-1.2599549364976498911;-0.96968297321776941722;-1.2340200858286227703;-0.017008352488043745193;0.17364767691032953478;-0.59544166338520376769;-1.0593424494715339979;1.4983222111804122001;-1.5032178760416878838];
LW2_1 = [-0.36202693587501860728 0.33139543576776475664 0.3817174868264954779 -0.50428043661736932091 -0.19099608880726465232 0.38531790480849087421 0.31434126056456274112 0.51942183989578949443 0.14007399787564597804 0.038008022489443363257 0.44455680742501213487 0.2469300120506259244 -0.3432983756086911975 0.15494111472713550937 -0.38216296309897701544 0.08049404696223076694 -0.079801361418246716251 -0.56131598685642758451 -0.53902498104927731859 -0.14510727121552335905;0.40953793848456820914 -0.14142675617862124349 -0.16993365367296767166 0.023779936205754786255 0.47777908445982231189 -0.29986461099575795197 -0.59466014809821032827 -0.52432355986251033553 -0.7030554550582199802 0.33469820940039929358 0.414551566143748218 -0.033183566098685585155 -0.30855416790896755819 0.089103384787992623295 -0.31105283543971751214 -0.38582224811017845623 0.62562617569357159564 -0.38568763120360893826 0.19182016900220524858 -0.10973892571168715471;-0.0053606857113604466925 -0.20967637207288289392 -0.57213108626394293399 0.8173043705313705054 -0.13544745073068473196 0.85530901202973075304 -0.22093605400548577133 0.30925284390633639431 0.60046855354304018437 -0.78930155615894304066 0.023859923878790708501 1.5688618509554996816 0.55048056219706509307 0.66972974473419277786 0.34604927070529184485 0.17506861414570315527 0.73390696787248621558 -0.89202079551945001601 0.1942117630159527486 -0.072448640797185756557;0.9507836566235228215 0.81003374377907100268 0.86359265800399853674 0.7661513985282948358 -1.5537630951023064796 0.31420562000025675786 0.19741241302603068641 1.5789972428457754727 0.13245336216068220869 0.90178434706082777339 0.020636310171718557499 -0.48581008517705026595 0.78648406949449334302 -1.2184755943290288549 -0.323376519326432188 -0.15468308284325896218 0.30005391572332673622 -0.55144846962118032607 -0.071151683036685578476 -1.0607274746828396772;0.0072094139370397873623 0.13105276478936986329 -0.15208774754271800478 0.36571091074338157867 1.7492204213537558832 -0.83950379143434217255 -0.11482121177210653784 0.16404990418644607719 -0.43477013673333653188 -1.425967145256574975 -0.012249004256838544324 -0.82855360324188376264 0.32886877259017971431 -1.0269374363755077173 0.77869062966261071157 0.039088258207882246864 -1.7768751277884755613 0.93527847280446463341 0.45328034989206528182 0.24873026063852882173;0.55654014031453424849 0.65870112391915236483 1.298667133686459696 -0.81793443913928087774 0.59865944277484028913 1.28002755696109638 0.35235402213347799538 -0.41592269655232744219 0.10349076626045525251 0.067439292737842493342 0.13299944950264083743 -1.1393724931135200684 -0.21836681888497025406 -0.89151326322037049987 0.37968236769279972709 -0.19744158286825772008 -1.1223989668788751928 -0.064750622870005769549 0.35570802043745958221 -0.006111352114429688398;-0.41019200901793828606 -0.84542239590467127552 -0.40462097864270907266 1.5830766329999419462 0.066821226072106346128 0.50023168311895416238 -0.27669774428466864524 -0.30804480714693432963 0.81719487015213476688 -1.234724071212576435 0.25380903865126236418 0.91071286730603717707 0.21783301537233290546 0.51724582830181331516 0.074384287891448158669 -1.0128221752219437324 -0.3186947970850454448 -0.27456736741291054571 0.01890874831195722694 -0.90817429589071063667;-0.4563286821563534712 0.64455460317878909837 -1.793847984582650934 2.5905223314889509467 0.22383969493183256128 0.30181060080056071326 -1.2270469447249792161 -0.6407970905693360919 -1.8325392871608083833 1.022529608145695823 -0.021641735408928157447 0.84054808642663836338 1.0997622961507358408 9.1988473683809779402 0.80951631993585249081 0.025272328639695036678 2.5789264924484935904 -3.9191895142180994682 -0.2034210925012434612 1.2299950011214646484;0.070627972263778468487 1.0221125613258270626 1.0253697490325965891 -0.9889563742137206237 0.28749028047498859095 -1.0936618204136863142 0.33515183008196280934 0.051682007209243215062 -0.75997608256123094783 -0.11138094120421755673 0.44227465918268871192 0.27682051656649475646 -0.29237709453451948827 -0.70340851699897666283 0.50357787477065962811 0.9279250302827777297 0.49830044643854459752 0.31303378887423821686 -0.098415930705801193956 -0.31156349680240214006;-0.23807060023045653607 0.23062992873973992003 -0.62272967842640070124 0.72810081581714025667 -0.47391542914999440494 0.74832448652295180391 0.3175502442328456687 -0.11513582898905591612 0.62796655230513509505 0.80584327858628312935 0.1971585525485542445 -0.39471033547074879655 -0.32772654784002758221 -0.1908076296331207844 -0.22351347058200954354 0.4077767241740193338 0.29746402753161671484 -0.36018230437480008854 -0.027017458333021548977 -0.25332135142964817831];

% Layer 3
b3 = [-2.0192751477865389376;-1.3570203979628179258;-1.5942152743494681921;1.3889569237675309932;-0.89037367228913166795;-1.3739896988071689243;-0.78305956516730435002;0.72285891582523953414;0.19516325755163638211;0.19168761602779721409;0.18246269106364779167;-0.41628373760189713026;-0.74730214053973609278;0.85296945650923949866;-0.51341776412898787463;-0.80100341241874628562;1.3878993244261437212;1.8960305415202594048;-2.0915198141851396585;-2.0175424782322184392];
LW3_2 = [0.57141295846829320837 -0.62604535114049342237 0.46904571967098662721 -0.74440708978051717271 -0.24518038007822381963 0.22515462772129579694 0.89722775800439524829 0.59646689835289068427 0.4758490402403581232 0.27366053750391161614;1.0070445666295657627 -0.84745042420919181048 -0.91382540735404538257 -0.27133629502243367115 -0.79118117007862975854 -0.54153350304506475688 0.59258053026552137688 0.23897876961874503499 0.44977132419890336612 1.2222044270817600253;0.63062023752723372905 -0.41244975777452519416 -0.73207852947162432855 -0.38131422033275164107 -0.25727609959931480033 -0.34932884906870265151 -0.27805336809382580343 -0.080550099467270167009 0.80407302389421297928 -0.85016757847088009203;0.087481320123263206501 0.24158025011697140116 -0.50889554025396377401 -0.76578401266166762351 -0.85152414300389533963 -0.3509657537603181332 0.15127140803984248651 0.00024162796035698350799 0.3223326145177484725 0.98304042064524010947;0.6258342375871732699 -0.8317380153469621229 0.34474049357572872365 -0.70219889014581571285 -1.5035648404733017447 0.16532570889119591051 0.55794912076046121463 1.3307945836479040391 -0.77536969944863820547 0.34914952223730882919;-0.41920053576908949955 -0.81470077695629494752 -1.8850526417526296541 1.8517008799979357558 -1.3235167311067483897 -1.2423153088311520431 -0.98921433231146871368 -5.5957172196815401222 1.244301978823628918 -2.2269046054133143642;0.43265974989338101819 -0.4318140967517226092 0.58295546090686434226 1.7226614298419282711 -0.006275040538447664018 -1.7037039324111484806 -0.1831608486208394504 1.9356915667196237241 0.79500863347690109428 -0.33068983659604411773;-0.57863583311339417126 0.21751922619424551852 -0.45530420464261484037 0.063790442710364964052 0.42428642768852459222 -0.25740831925333990116 0.10332137360691701078 -1.5699213569806409474 0.21164544783344740875 -0.8274868810408181341;-0.64464338718050395727 -0.50164562930854561529 -0.8894690291882948463 -0.21487354879450171197 1.5574497937740088283 0.41558335393370965383 0.16100154414407721881 -0.099605376400227527145 -0.15858776756739886848 -0.82800585214978794646;-0.092268688792383729558 0.53774804095646777657 0.034337000425105991541 -0.33183582496809632678 1.6488476305683958945 1.7473384021004296773 -1.0949758021785040984 -0.63873916007319953003 -0.56443818704207382453 0.34441145086251162555;0.29326441782596246455 0.68710243218684941002 0.22202865615784769804 -1.030954390074997562 -0.23947248081603994541 -0.56647125613680815448 -0.53095325421510941588 -1.1552581681578408812 0.52448668421296662512 -0.31213704476021364442;-0.28883817373713310817 0.19503425595399995207 -1.6574001238571982597 1.8544615092966922898 1.1478281614946737044 -1.2755373359702903979 -0.056226107938041169909 -1.4743971137888767231 1.8936456056041766072 -0.77367972861460110323;-1.0446788689902515301 0.90213807419847069635 0.66509132198749143505 -0.48817764174071759387 -0.57612579088120363657 0.48830040489451054242 0.069612435036585929016 -0.32255590512390708291 0.27006908855704314654 0.28684858024621651129;0.9370428903639815843 -0.31326013267619201574 -0.028293392703151197531 -0.27454983079294004167 0.74848803398622376637 0.14279873970759712765 0.47139302925777915032 -0.50571724209261026406 -0.59017429363051399083 1.0152933032081052911;0.30858488993505611697 -0.32752196965334723355 0.24063570325076250045 0.28155718861921052998 -0.8037362439673915171 -0.97730271205290897285 1.0305289370506200974 0.9281529498631041486 -1.2205186540539370021 1.2650775431761218659;-0.24242469453127646339 0.15609208189367926312 -0.11382203428776586918 -0.42428865316050162759 1.3831186262727874769 -0.66776705174485007088 -1.0133637734608156311 -0.80873992710864472944 1.0620961496265364232 -1.0660248614128597922;0.34765990363654153406 0.8604853186707379642 0.33187155745846891319 0.021134191070253129791 -0.49256458230695648881 -0.84672213103124105427 -0.50659674518913100361 0.70705576520168822441 0.69216833472302063957 0.61095818970825133132;0.8853606172936245855 -0.20441735903420801823 0.11680121360956061127 -0.61257520083369210173 -0.74041557473382935139 -1.2176192490737265395 -0.24278329306879578575 -0.096769077070760906034 0.51358063077446436395 -0.30297058521037162349;-1.288638103366011034 0.10651084630675031195 -0.021366385310674917974 -0.43981813746273745735 -0.026069169589201829362 -0.61110262638505574717 -0.57671773622054112174 -0.51281383966455951207 -0.24082122260412533454 0.78167242102613376797;-0.89322432357044634355 0.18624378203358202266 -0.60371149572894733382 -0.51269640081531486775 -0.3272267032217395788 0.20069598260432552905 0.97046782117390573141 0.53861849611250445236 -0.042353594662016082195 0.4038130846391001505];

% Layer 4
b4 = 0.0099129757663777573473;
LW4_3 = [-0.010880096710723123274 -0.012750550510102313939 -0.052106735194049048909 0.033396650468129146505 0.9557926103843827903 -1.0345059172715711515 0.26143037716682565597 0.55957565025961319982 -0.58721223894113483421 0.29802940228017354984 0.047448607346247825833 0.95988495440577270568 -0.76988159877103534701 0.019855761592409038041 0.48369665215723406382 0.50151792423682328703 -0.0039940908165772412083 -0.73954534736260368888 -0.2865988248959253637 0.37281831793445707746];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999931;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
