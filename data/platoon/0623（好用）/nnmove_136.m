function [Y,Xf,Af] = nnmove_136(X,~,~)
%NNMOVE_136 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:08:13.
% 
% [Y] = nnmove_136(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.85918092085871;-1.99763696099884];
x1_step1.gain = [0.0522252737181727;0.148213484472979;0.500572177293996];
x1_step1.ymin = -1;

% Layer 1
b1 = [4.5866185965019123927;2.5492166614662843394;-2.4679900412402315801;4.5375271583717253776;-1.8570229630106742658;-2.1431826572491732286;1.342788905351276485;-0.71131320982971402156;0.01176096511521333883;-0.18261300978220232349;-0.45715355746720498509;-0.03494543851802339729;1.0782629274725108459;0.87151751975155555829;-2.3022813568605622336;-2.0082021163567809197;0.098675519520216942171;-2.9211361065756289435;-3.3272611783139915964;-4.6327713018183764859];
IW1_1 = [-2.115681007502856037 -1.8984976385624607875 -1.5929024052340694517;-3.5001255297237694464 -3.7892639710974993505 -1.0295462215212023427;2.9823828462140746787 4.2259629473843096648 -0.29601010992774351438;-2.8794068379447921302 -1.0471982967199724435 -0.70589539210034135674;3.4593323734785248469 3.8824529968653460621 -0.066643659406817934432;5.4789091028428291708 2.1931900814197367033 -2.117499165147605833;-6.0824308615738260642 -1.5304029993929868514 -0.58721257526626413625;0.99118186248468331812 -3.2025051379775981708 1.5959671426569062014;-4.6682780107052348484 0.28076040858544670797 0.68841465103064913844;3.0459776163751288713 -1.3476007938667136088 0.22927228079653563797;-3.9027904564232316353 -0.12090202628538243568 1.1463524450929671872;0.16352402849078906399 -2.2869545794156302954 0.43639641689530439539;0.17039713688907870415 -2.3330853077815150165 2.6633441352192788187;-4.7383446916842899554 1.7420843190343153761 -1.2411991171335601258;-4.6723587019236534346 -1.1215828874315532104 -1.4214991093849491666;-3.6207085510782550664 1.6542124514501732602 -0.60620010687177283693;4.2707514377108859449 -0.16507951709339513391 -0.33895901735476569039;5.1927591690561678561 1.2697069426105962453 1.4289156086747145658;-0.58487138081510903209 3.72626776848035135 -1.0173320347655632201;-2.0112174623997778333 1.5048072986410989671 2.6249183754698104387];

% Layer 2
b2 = [4.0820969634060908504;-0.93062951062031873395;0.37875683754744232656;1.7575014335189342862;-1.3915928976261140448;0.47774217917181749371;-2.1747652055929616033;-2.1672700351533267238;-1.9251790937263424386;-0.015875838039869596963];
LW2_1 = [1.1527352140570792383 -1.9509270701793994807 1.1298544249094257808 3.0582591190363896949 -3.2618338756552738289 3.0313741175695394503 0.54570346047993467664 0.56498796831000830387 -2.8969299190912196629 -1.9677139460251606984 1.7535247323512384021 1.7604713512330374403 0.23799996294696901256 0.46339242536307467812 0.38009806522862815692 -0.35301891545517127824 -1.0574551477865081761 3.8642867173325479158 4.8820967030293536126 -2.4348663375814032506;-1.2557854336587721544 -2.7889976916563865572 1.6084641201197353855 -0.63983770947182883049 -1.6674474006678892124 0.29699995313957927578 -0.26951627231464186929 -1.5797178841710217689 -2.022761349447311563 0.47927043370434940783 0.13131618690678981132 0.2508004870534701336 0.27858274287148976356 -0.21403015477415596179 1.7961892138164941013 2.3100104679147275277 -0.57688075781705494549 -1.594144929247996112 0.071345011052982076905 -0.16918166332591674794;0.94129242427095793921 -0.87825710192333372728 0.22959770536469545354 -0.4764573173670693107 3.5396509081924989459 1.1102654778659950541 0.16987465219634084734 2.2506001693881292347 0.86831310435630326694 -0.19965788363516578929 1.2691668768582082816 2.3094620709690794058 -1.075249416346687692 1.8643723293220060278 1.3221891198282365032 0.98446675599795729905 -2.3238206934086620414 -4.0107982085469302547 -2.3223458850266482933 -0.065399804194394575707;0.66590072412831879944 1.8760016990018548722 -1.345767855655325862 1.2264658672386687943 -0.86482640201227301002 0.79580771805080063874 1.9897955194147673996 -1.0684990346576568321 -3.6070082117426234269 -2.7992479285631093333 0.14013990067502868353 -0.47138950130909357261 2.0528638198654389768 -4.0367468206284398136 -0.27284616517404008951 0.6547066209813402482 0.035608217327968989807 -1.1343624068032009955 2.4293392968199452042 -1.4844933827649773317;-0.70136613615136744748 0.55706949256175986029 2.9560665970695132465 0.72109563707604951155 1.3292106004183312784 4.4659889265962586791 0.69357480372320789996 -1.8039470083297362013 -3.5882180451265912602 -1.0370522700299844576 1.905438245174751577 0.16665046544401607154 -1.6706520547980092672 -0.42096828962160509624 -5.777897670238893113 -4.3573029968863599137 3.35185428910079386 1.0102120080273784275 -2.7001615393232349938 0.11886090275150992812;0.86633234968228589601 -0.76002304210530124973 1.2507253422143633781 -0.40643911026551715615 -1.0601100637588034559 -0.6947265243132109136 0.57786432806728416089 -0.84974003032910561117 0.47580371097722518048 1.948536617824763173 -0.17937899464281159556 0.48698191479243119195 -0.19230607258503928936 0.13429306939430740719 1.7638270355064082917 0.71992418649350520266 0.37954409873907823947 -0.43097949409606861604 -0.082977614814691111333 -0.55615549225703897473;-1.2467561760896190837 0.84302151589319129776 0.62007747958853665082 0.63302858286129337628 -0.30321202078925280077 0.32273237585340514011 1.2005038063958242134 -0.1396370367097214682 -0.68148684019094618591 -0.085662180184631120383 0.28267020339420373398 2.0699094572579359586 -1.5619933650834276762 2.0832746538380786383 -1.8509751503478510948 2.5889909070661172308 0.066506207298863348476 1.5287131184058446731 -2.8081626938302268748 1.8863800676845452475;-1.6534638826026044622 -0.85534296406968535198 0.73442236808525263037 -1.265572966639545216 0.71277190746359175844 0.31916597902159754563 -1.5081885183698933162 1.9430067899725136371 -0.035164998990382966004 -0.56329481357630672989 2.8542275257187865733 0.7779874496379812765 1.0710652778258602513 -0.47263596498950105618 -3.0687243684457974346 0.071347942766298161343 6.5137140413756418056 -1.5114134793402438373 -0.14324324626451759301 1.475563874162106881;0.25912563473978766915 1.7397008701873346581 -0.12272780300856780955 -2.4656375414095732523 0.8648029060997892703 0.041465682228877358273 2.4551071216752800019 0.33502547931529969016 2.7174576758304245239 0.12077422769304015093 -0.63650887278849199724 -1.2901581018050145566 1.4457283162392853271 -0.34644198407351600721 -2.7017373197936453977 -1.2341136110478996279 2.1728722050849427205 2.394133937346312635 -2.7442749473209930855 -0.047226887690474908532;0.59387996218928074121 1.2471480878382394941 -2.3203048857707462282 0.52409364077299180895 -1.766471577710762686 4.9869481058791516048 -7.5780170076202910678 -0.85464046225918199884 -4.0981696651328496372 0.5832370879365385008 -2.2746420312100239514 -0.37612474358946740294 3.3758067966469984533 -1.361973942821922412 1.1991994573906166188 0.48629003179957036584 4.9081563619176504787 2.0530980374971514735 4.5802775154157107096 -1.6566798626179091158];

% Layer 3
b3 = [-0.040491430396438453376;2.8003635360967762402;2.7878463877269861193;1.4073223374857932733;-1.2045299592731195659;-1.7337422799724895306;-1.7305188445140300413;-1.4173303783663109279;-1.8941161988779684489;1.164443670435384437;-0.23400343470528583989;-1.1776048823822713452;-1.0951472452531783031;0.75339993056821685791;1.2175339736963641801;3.9246959533160703515;-0.25105265422268985276;0.40884868866536316911;0.10790454402868814021;-2.9231501304818965359];
LW3_2 = [1.5692463547602391039 1.3347092226728041187 2.2830041769336983926 0.050600879312507153485 1.2055714020456493873 -0.45738603364519936356 -1.010180094394663719 -3.1549266885196880494 -2.0097103512448692975 -2.3274161192735025594;-0.17591149919944640279 -0.19192916705906279407 0.045385645018661900651 1.0390062714935319743 -1.3907976699369564155 2.1489395894443927837 -0.37980618221069428753 0.60672618088049079521 1.1535657732497368588 0.79818537066456884954;-1.0893590619271102948 -0.91186266782466485203 2.434752675356342877 1.4966665637281413304 -0.12810151406210476543 0.48342334402654457692 -1.184601700727560436 -1.9614941421380138742 -0.077642828796234492073 5.4792110808055518589;-2.4790274041405253591 -1.1599348700647937882 -0.93665553351855801445 0.11702613931222544119 1.1698267218335227646 1.2661469013550412654 1.1508962750816347231 -0.61898569760219845914 -0.6540604840318348101 0.2135826269812342304;1.396210982724707339 -0.90626444453647081456 1.0742732239086378865 0.4756363614135880602 -0.62623229148441106329 -1.5298302465872901656 -1.0870196041625610484 0.90976335453383294638 -1.5411346239591099394 1.0538563701413603546;-2.2248879842354072345 -1.7638393163459993307 -0.12272865046765008001 -1.4045485607341385847 0.72751700140229058622 -2.7069987184498138788 -0.55248564038178316071 0.58459401504362429325 1.1394272023529983251 2.7649282490278754842;-2.5404482290767633756 -1.2662798856054946484 -0.33917581602742347124 -2.946537986495013417 1.3327452592818129773 -1.1149404330851662159 1.4551997622349499562 -2.6145396297621257276 -1.069862552513482834 0.44121114203531375253;-0.96249833183476329879 -0.53199824074373502913 1.0915005351790918464 -0.61337359741663921575 0.48824667877156807672 -2.3598410302469803312 -1.65201648723622041 -1.9574273351089361839 -0.41721971821117626034 -0.96162856221845949278;-0.03658875134685764946 1.5060753083906024408 1.6776897804994281849 -0.21325894840759204718 -2.6771151504136039279 -1.3711900592754813211 -2.1067818463173706434 -1.5429654839950033285 4.4547793068805656702 3.8079922668714800693;5.1796541107699347606 -0.8941413670815051562 -2.1482937163716866458 0.5122143365718768715 1.5051762107295691973 -0.33809372352852473664 2.4912180185928116671 3.3217534812830336044 -1.1034196120480004311 0.65302718783195989882;-1.3564326014495422523 -0.61945596820753734413 2.2130554378230149482 1.3561278814039974261 -0.83922355442206775233 -0.8007956956572747087 1.4726142498121970181 4.0032438593854751119 -1.7776360685294645414 0.23772022152991406641;-1.4498341596173556223 -1.3040598879847709046 -3.9290593560572109055 -1.8003662471736165962 -0.36433514944137673774 1.7406458271446560993 0.54102618555779335985 1.8261712245349659423 1.0350688001156336249 1.229778002117022595;-0.64028649214278765545 1.0217746295231981968 2.0721708038331954072 -1.1578678314903194657 5.2180613978717733659 -1.2657582253335264433 0.93711092984502231129 0.49676553035114484613 -1.4458221378182185557 -1.461509586214726486;-1.74808900762313435 -0.13226179712776509056 -3.2763117285283094304 -1.666261130319190098 -0.59308534005857027616 -0.68705332470756785845 -2.0132238744500239314 -1.392960889270588476 -0.43873315263893880589 -0.99185051516208455613;-1.6325041694195989717 0.18267110071296935314 0.34486444613029082484 2.1404320770502089921 -3.8889787343839072875 0.60038200523611695569 0.092366680331689182681 3.6876989281977867741 -1.8687391376930646558 -2.5909964821974686977;-2.3283152675017282363 1.8615804847387809051 1.0741938561728450185 0.84239013713293409147 -1.8282516909692136942 -0.21041253830191555818 0.41686445036217528726 1.6985592572483907414 -1.4944676857306393725 -2.5502974004367611194;-0.53547712188442664338 1.4829849546267734883 -0.34914151464551840265 -1.3853281502952921045 1.2130140299100036216 -1.8950875492014951362 0.40424611601751558876 -1.8138961175066607989 -0.3355383153906523197 -2.7541129104342680911;1.0898890024809697596 -0.96743686581697951876 -1.5547734669229789084 -0.42485288587525316117 -6.8648581008709035345 2.1930917472410178526 -0.20594825940957617316 -2.5139986287187729985 0.31125797605576543958 0.60526779114431950024;-1.8592194370963810446 -0.51321474815759682286 1.4010679156151906177 2.776397754660806072 -1.5036471614204494074 -1.1627205832539768693 -0.81010812063386894444 -3.0100849392780757441 -0.045711316804562987515 0.12183370033033344426;-0.20768263151744301154 -1.0050042408593917731 -2.0708563633559733397 -1.5744303791393710057 -1.2895767997134173211 -1.0197410648851696902 -0.4683312796189221805 -0.01630293389266691817 -0.093780054632988954499 -1.2676987978536189416];

% Layer 4
b4 = 0.73424784137092480307;
LW4_3 = [-0.52091701164898795984 0.017344708814778658085 1.0546365864271529666 0.0011705578067808504808 -0.00081620625579419483781 -0.016529951541728055836 0.012686670573975520476 0.0049918990740444096552 -0.00025193690908542414834 0.0066719041321568603106 0.0010279241046461250371 0.33192809308988185935 0.86475775641278707084 -0.0035205359567240203031 -0.021829997847497374652 0.014997466336311309626 -0.023546470339331358052 -0.14527306973388787181 -0.0094292867964313464846 0.95314254384546637233];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999931;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
