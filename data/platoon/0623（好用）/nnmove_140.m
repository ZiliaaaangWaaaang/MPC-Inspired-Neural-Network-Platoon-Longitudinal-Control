function [Y,Xf,Af] = nnmove_140(X,~,~)
%NNMOVE_140 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:08:25.
% 
% [Y] = nnmove_140(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.85918092085871;-1.99763696099884];
x1_step1.gain = [0.0522252737181727;0.148213484472979;0.500572177293996];
x1_step1.ymin = -1;

% Layer 1
b1 = [-3.3621860554465596849;2.9188170355528502142;-3.2090291821786203208;3.6485769526127396212;-2.035097984643131408;1.7466343258150287543;-0.968584582394211413;0.88116261944254115068;-1.5166713049334210606;0.19550231296013964588;-0.59968514017515817116;-0.83981612283494577742;-1.1274764041428120276;1.4204777457790040973;2.0311294585341261865;-2.5097446518280430716;-2.6644843743595094665;3.1143396426243947772;2.7291768245759606693;3.963218968662121533];
IW1_1 = [2.0414992287420785644 -3.008629015582376276 -1.5973722627756732351;-2.7486355040482437495 -2.679281003892740376 1.9475584756393693464;2.4772421406068714234 1.2287822352712585161 -3.3004325056536112371;-5.2858935168755687428 1.1386161426967058574 -2.484590287343882764;-0.17725964049546907852 3.2890559333741413717 -2.3981080270846932834;-1.4665348948048793076 -3.0733726502687508386 -1.1564782026278854765;1.9896180679550432568 -3.0218907897600519874 2.7898379606938759068;-1.6475788268895015243 0.35805108780211675201 -2.4833532387640397943;2.6356051736595280666 2.1798996806512165314 -1.5353611234865303103;-2.4173412513307228622 1.7089677397899414313 -2.0021622313023708095;-2.654107836441093049 2.4044997591808998649 -1.4923548459898869911;-1.0019525557317885411 3.9998994345112506288 1.0219274270904930013;-1.8141718786074398917 -0.70360342214111304404 -2.1313870236184286888;-0.83776080295940835718 3.3846634146662961662 1.6119223569212648428;0.24792243449725465121 3.6234649896384492074 -1.3559667477416306181;-4.1222321992320569706 -1.9608258293300599995 2.5936586681974875823;-3.3258649190684868024 1.7590213941280921084 0.56215036875513013648;4.3676186654597968229 -0.026723133860266447964 2.0955580060483867122;1.8939885666382234586 3.5054718130475843729 -0.78557126206703242755;3.2011955262671354383 -2.5191696641854641747 2.1990185692782056037];

% Layer 2
b2 = [1.5936035373349675126;-1.3157750990037875294;-0.31331952452743228044;-0.60387377259694252629;0.11365615899300961222;0.15771136549108116798;0.53108552410955522927;-1.0971302820198762795;1.1777645331274555485;-1.4607751361104455157];
LW2_1 = [-0.2442407703453755019 0.58778672037140744511 -0.57967023793532268527 0.52211829816513111169 0.50806813892650082298 0.28919880971513822754 0.44868202836931819766 -0.021384971592745990326 -0.34016767774226247534 0.33903376388479361525 0.16042758259205769367 0.29015788751731258488 -0.39604450312238304033 -0.090006807478532208089 -0.18143925319447287703 0.34685478091756688501 -0.25915836786782753265 -0.32397914337787347971 0.14906391312607047972 0.2756566809652299388;0.61268685831805980158 0.044241546326684109969 -0.037564801671649966641 -0.38360512846038069545 -0.48961852216944967697 -0.29218127892926382128 -0.4617543682882770395 0.04617872314903286729 -0.37578201444751052618 -0.48640717913276260154 -0.31724262585726115127 -0.27907064244053841895 -0.18216440544419881808 0.49948499990336664434 0.65565066085475276481 0.073611822951248559455 0.5844495193676666478 0.1362675883502934282 -0.29618033904719637261 0.032146621471869765707;-0.70993720545548533174 2.2259774598047132876 -2.16021328583669181 4.2012467017130639135 0.19767579818602487585 0.28807878314217594262 0.076766319764584006746 0.56875785884993568242 -1.1362130336482827442 -0.283158223418111199 -0.17989193007493378684 0.1513014032938175546 0.37293676841769274333 0.30011427787259414846 0.11237879389194377344 3.601291411099623474 0.13632980679325651385 -2.6241440800240951603 -0.67228691799337003676 -2.3170168173405158996;0.044256337320107995426 -0.46009784996906066823 -0.56936442977712642399 0.21861062646060694381 -0.067352274813382656538 -0.47918668354407617516 0.18067799515437557578 0.15860207542846718742 -0.42461959125737297471 0.41712580374643992709 1.0699538942702284672 -0.23045525266022967581 0.068063900729489895669 -0.64166596422593280558 -0.29617352504655880541 0.17847945566618761415 0.21699002659117155867 -0.22899650823790407284 -0.35717915597082094958 0.09061450696814851713;-0.32622575267524528408 -0.5460191191133715316 -0.47331450536905456117 1.5185975554870123627 0.8487948922615211611 0.35922327943718018739 0.22551439263629077803 0.22185799844244835644 0.90263402147811433451 0.51900625174275072382 -0.17348637698034202748 0.12900104974713424988 -0.0022840643671062010531 0.87534478271566995566 0.72603052528473777105 0.52523470792126547568 -0.28656488212964897899 -0.69094208747503516044 -0.23548540966599945667 -0.029205798484468879772;0.079270229671036723795 0.71264605595020891204 0.1527821683098144756 -1.1646259174516579993 0.48193366230385459303 0.057188403806160942322 0.16271123177403604143 0.28086034792857755837 1.0379765417399049454 -0.57550273438230781231 -0.11492076090814068445 0.52977525732835184513 -0.63323973445271164451 -0.93775111362929208791 0.85997616041046398561 -0.46398381548050626755 -0.4115737819700510669 0.4538869021535463788 0.6797649419793514447 -0.13449406178705666792;0.36077426472633394861 -0.9248098952411196727 0.080489516776573177825 -0.60075851399590074475 -0.79594328943107539587 -0.32424764535225852891 0.028673591536687623171 0.51044157072573603795 0.91804398299533740424 -0.69129253972747684021 0.025852388346545216585 -0.77670332100949812659 -0.76733634862031141477 0.41509155224252158867 -0.15955708185684699951 -0.63304270159002618001 -0.28419329408529547809 1.8808418773352320041 0.13348279820555633557 0.70270243080648986389;-0.28906041363945533806 -0.11035226286635443915 0.08869597906310852653 -0.34981356960774906417 -0.0026686782077540711737 -0.67403922105747116067 0.16674690451966564519 -0.10773798622728369967 0.63178735397656771156 0.27929295735273723666 -0.19981398158921881425 -0.67050009845930780283 0.35071487607166751399 -0.73801050460300221534 0.35946994939975807082 0.41467302164576375079 0.11806585783936435208 0.0068616934665793683293 -0.57002500206219852696 -0.57763524610595728959;0.4135461012116166124 -0.014392455933230489593 -0.48526445241636223527 0.74040088563660277909 -0.31683065676254007492 -0.40487781639765013653 -1.1120720397410412961 0.12758683984578775283 -0.066853779410064984035 0.28815783693239954699 -0.001784706850639163761 -1.1018252662995378088 -0.25097896297190935844 -0.66077688373117038356 1.0406136940364483223 -0.97552961053581244144 0.44794985224546185476 -0.0024737349226489156045 0.69914357028147966489 -0.61962626762471861852;-0.80142676053845796069 -0.2883884765814551665 -0.064983367098164518394 0.67385341968575640514 0.39298417340022084865 -0.89244732781822710965 -0.35165960619824560007 0.25056299998339343071 -0.029495594639765733425 0.08804203409988732576 -0.047723078925104731041 -0.71132088990526409766 0.51473065843695664512 0.70898951744464311364 -0.21539255409483981651 0.13224324150914454346 0.6169348645241957696 0.54505062640494594817 0.49053757309800610775 0.17291578499569132399];

% Layer 3
b3 = [2.2283580470199684243;1.8158070324171868837;1.7308082372435038554;-1.2816679058309479178;1.109745201030998496;-0.76438294832047426475;0.85551122872429175015;0.38995653017908699089;0.22566895233296915824;-0.054254191978471644209;-0.23783943946488653176;0.36784091289975462402;0.33932588422194842614;0.83441674776237084732;-1.1094141249371418656;1.2496477576974296397;-1.543784102625181287;-1.5348201862085202318;1.435812886813422562;1.9142968762510468306];
LW3_2 = [-0.28350344702087859616 0.28535413790691643854 -0.15719845384753766693 0.27914467397419845396 0.76379889250108612408 0.67909445202923690577 0.44003477363384774224 -1.0796266624892927322 -0.50543762898308952636 -0.25341829890830641636;-0.17382012236432520247 -0.83181449983121047431 -0.94579500853431108798 0.054317380213366968367 0.40054806392274100446 -0.96125530213933840784 1.2152053748444506809 0.19269923838957514484 -1.0665130086648242358 -0.36657618812218034643;-0.19470141683248035069 0.16763301313004949633 -0.20484045756578384001 0.59656902122058608207 0.045555811356988093475 -0.71597589587833720959 -0.31871217656981559729 -0.91706810161957008631 0.35651330001994496754 -1.0429610490656486821;0.81039785098495620286 -0.76614194835809834583 0.048566421605507427428 -0.21939939117314710693 0.017642310893903029312 -0.90988649321729087038 0.32023765459176106729 0.91332607021092693245 0.40630090022021730922 0.98119932860512959483;-0.5014210429369512223 -0.47536803280889583512 -0.928424467231503181 0.011027500999358568964 -0.39925236113496315182 0.51515718820142408774 -0.61463826172012814286 -0.42161942055631573822 -0.21331525326996958469 -0.14082571270391117113;1.0250057538456358586 0.58089747622235865521 -0.38608579464858028274 -0.54558350855384285527 0.031191898277027667319 0.19821084397779631381 0.82458927773889911794 -0.22344637418843896204 0.98554229932507531053 -0.50631090751791063553;-0.12413511659437487245 -0.66725407748446730061 1.0652182892444688189 -0.43791544870300236347 -0.14624557541010138606 -0.65434850102753883139 -0.26557006954249451347 0.51725191822850546952 0.19432121413086869688 1.0927242245203976356;-0.16324894295772832131 0.43789766047921080405 -0.62282756395755978218 0.38565263872508476206 0.12005654126854597985 -0.28495103986362618764 0.63028715260289014388 0.92757823290288665685 0.99654117136403563837 0.9052399756809753617;-0.56412898028141733597 -0.47918332440613903289 5.726413317025309091 -0.82739643678169871865 -1.3294803651220035157 -0.52150533898333228944 -2.7818312974315317909 0.53027286070648804728 -1.123376028503012547 -0.054983884255835335786;0.68584758353081898274 -0.85833360089403953896 -0.19599897990869744047 0.58949870787955938045 0.85042923216830801358 0.36504739600849345216 0.64389706618250419634 -0.79650975280718894211 -0.31203300720811616431 -0.11503585612114494707;-1.097227215203795625 0.67441546119296802431 -0.35632411632965932391 0.13015606542906249521 0.44751830943808967866 -0.2830088662048410586 0.20113245894839942851 -0.33023605453547522082 -0.94097261711024793307 0.91100727990915875143;1.2351090268280524587 -0.16031864925268518585 0.54599605170799136999 -0.53772960666909963567 -0.083064660711474530563 -0.66245303123692211855 0.49748471502178198689 -0.63244544804733637822 0.54715358163941008041 -0.49382120581376726109;-0.063135856652647023846 0.44836384626806591314 0.8371073470341072742 0.45732471742990321584 -0.50283671101414162408 -1.262817213835325747 0.86685818523598812124 0.67254367026784456218 0.60264826677014171619 0.34334231120237196366;0.20609051344185366772 -0.20005757763913392666 0.25362700839301177691 -0.24371582736825736504 0.74992551114631689213 0.3830265884987085756 0.65780546729107902681 0.076858760835434331016 -0.75421888935120684483 -0.79987541307047804739;-1.1016492521704097651 -0.37812677085408913369 -0.46244163837588569965 0.64192437986363859448 -0.63479227480326594346 0.46659159865671595568 -0.41837115514203121469 0.70326400556290413757 -0.0088614543611483242991 0.7286022875398427967;0.25537974311545896811 0.011013928516075383035 0.21217720193121350492 0.23200712789140121028 0.18703919677240590791 -0.062891320962367408542 1.4719474788755335659 0.71476415511710067463 -0.96449135727419954556 0.54742351167033864723;-0.60897815022039036847 -0.022975547366906438201 0.80929507155144375652 0.93526309231517168463 0.19149679839061631292 0.41309501974202350594 0.64898070274975139249 0.98431732868522892055 -0.47002677904956863264 -0.30023537970177460732;-0.08223748064582109274 1.1474077521751264719 0.81722204142891552436 0.25450658825969790788 0.024730950045249635444 -0.13138764552636678085 -0.49750975484358794798 0.2409202356517146093 -0.77080620620633555351 0.78859560266512451765;-0.20596586194943383719 0.45648876182113662381 1.8962396555497800232 -0.19867534975646275464 -1.1720353851155524971 -1.0177370762339497112 -1.796216341466975841 0.62966049601668849789 0.38936484324759274012 -0.16596261603481976543;0.22053612380139414606 -0.71403334540198171165 0.58437920584239733124 0.1189968693987609738 0.48731695923206330701 0.90000957244572254989 0.39008811686476241309 -0.63451004014310641299 0.94515367048958831564 0.48527906544131343969];

% Layer 4
b4 = -0.1156682505375081077;
LW4_3 = [0.49336595951844197661 0.19696150198876594128 -0.31663451075410026236 -0.11857650580791767592 -0.1676129700796625821 0.070227800584947819296 0.0028729287671977327134 0.0051123476942847873722 -1.3265353623173927744 0.047352311401454079409 -0.47140402282415672097 -0.40473226040341192533 -0.21923925911126679322 -0.42260766072673833227 0.42480320044256236756 0.018194914282166577829 0.027255198842165574702 -0.84285614929446028842 0.51175709098610866477 -0.41841412563202412533];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999931;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
