function [Y,Xf,Af] = nnmove_142(X,~,~)
%NNMOVE_142 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:08:29.
% 
% [Y] = nnmove_142(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.85918092085871;-1.99763696099884];
x1_step1.gain = [0.0522252737181727;0.148213484472979;0.500572177293996];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.3372593781758514986;-3.6730448745855066583;2.9121463259859869943;-2.0837067336686621033;1.4585118745436320697;-2.1514422929220193836;-1.9031669631094436657;-1.3944860247831405431;1.3687770913083869839;-0.32455304282639624303;-0.45536818107265591982;0.65248558607710016588;-1.4866745195558892512;1.5795457273525415065;1.4813645052814854441;1.9563686836714664352;-1.9322891863396380874;-2.9758093066263220372;3.4914601394870308226;4.1232645971858179479];
IW1_1 = [-1.9092359935360949663 -2.4222426529476139834 2.511818314777197525;2.6360007719248113034 -2.34473380056302938 -0.2664518683193454196;-2.0051717563548310252 -2.9416360281396789489 -2.0292396531071479338;4.3903725920304923491 -1.4160723529904992724 0.91384486564444111778;-4.2434775143113503404 -0.49858746305580409208 2.0197168270413423663;2.4940500988385427839 -2.1994394213600982901 -1.4688230733589102694;2.2641036128708211805 -2.0920423689536256084 2.413228474928124978;0.28903878119039644323 -3.478269397834454324 1.2255377731725345392;-2.2697304141680709755 1.609916519773499477 2.451821624720182502;0.49776004770210408035 3.0303663537219898139 1.9728461274857989061;4.7021576331080581213 1.4591361635878996594 0.1047487669154920642;0.65083414487947366389 3.5778361564806888673 -0.10580242840619720479;-1.8481705785950965915 -3.1643915441219934159 -1.6371970119515548703;4.4949363801666635254 0.24587738432027161917 0.9529814455215546154;3.3497806606370974514 -1.3626849159030653968 0.61898454287279880415;0.70050907534801887255 1.9812085729190240802 -3.3165634349398547265;-1.0275237387606390715 -3.8924981035517696171 1.2777355472057911889;-1.4395561969165193705 -3.3251650668396552923 0.92355625830539755938;1.6356225152064627348 -0.035454469985858175218 -3.3903433789389127995;0.70698772089445471867 2.9470418133496405488 -1.514006267087055102];

% Layer 2
b2 = [1.7001019035672635393;1.5148700326303441432;-0.46477450963334288048;0.009900351626156454754;-0.29376647614107243012;-0.088852146585457938976;-0.29907753178022833396;-1.0219752247876423557;1.4375857711497346259;1.3997903796432131784];
LW2_1 = [-0.15584105785284355083 0.24509677070131000165 0.43489414491212641245 0.96528160393444584209 0.049131457312999643472 -0.045852528126194613822 -0.21903527339729270129 -0.00086695344435312043929 0.077225740550641616688 -0.65643141065730858941 1.351946974993370576 0.36931721360426605916 0.41260991099426697071 -0.1913491141760806924 -0.58229990076731619197 0.46943699985815162679 0.0093609007266527554519 -0.26008628674256301094 -0.22975912205004478395 0.52776965563356714739;-0.16344359466665950298 0.23161974524443301737 0.3922086940326137694 1.8203290593003700337 -0.17742945661906903143 -0.049640230030449636334 -1.4262463954612289996 0.19241585812865649729 0.0028837753107525906406 -0.062026025273026627604 0.74521751017681492346 0.52169640685047635742 0.93512193490356043668 -0.22614034811875330377 0.3329822175767272463 -0.07767871315926808129 -0.65091540194593966451 -0.24519695980276046132 0.4469319366271249927 0.93686037425060286754;0.95199120975702311576 -0.45863453035272877534 -0.43450745229065429465 0.95707783555453651569 1.9190567529409221503 0.22731857117365683596 0.53393378232165766839 0.40361368096745608991 0.86661244356016742252 -0.31687846531560953656 1.128456670923162708 -0.34189979192248670659 1.5071381104263847917 -2.1852118352441336491 -1.4753413419686920438 0.54486964026707407349 -0.43964683689564992841 -1.197589127417165944 0.56940038712958507272 0.9226477238483388188;-0.50750909264735710735 0.29006138193896691124 -0.59705311634120017406 -0.25677265063470366968 0.91200669587133820215 -0.24660486862439173761 -0.046349074181727442645 0.28818047602973045906 -0.23924721651505220787 -0.34671301861598424754 -0.62618688161518665236 -0.17475942666125959812 0.25274425992337345992 -0.16269583525860945028 0.52132198412461017156 0.46894298428263886391 -0.29252968487702890599 0.4686552064136634832 0.23588389973303447444 -0.44696814997982065032;0.11620811386792398445 0.14130402145950560211 0.64309389376110803749 -1.1713517010222183057 -0.63745851968393152376 -0.36062011443429453639 -0.68884508785751363824 0.096546961956425980667 -0.12394376175467347601 0.92750864349796369179 0.67028341802549107342 -0.061331177191320057629 -0.6883650798310240182 1.8445806446720707239 1.2779803357973824607 -0.8903206968229357976 -0.21662913270995021175 0.084812799426174395601 -0.32330558953313165427 0.034206763664541700587;-0.10149407921840568336 0.24180298712812384188 0.12473371919618647663 0.78835795557385879295 0.31961908260463023357 -0.45581584890578247249 -0.36264463540804714459 -0.31321390343409644119 -0.23753854166976731688 0.14393134829407538966 1.4894912497675110163 0.13877392199960228436 -0.87536783899698600298 1.019550504737902985 0.17349341793973485637 0.41550703530174343259 0.156892320204874397 0.27567464809564007355 -0.051192388613065228919 -0.67826578925638891793;0.32636999837098101818 0.28877083383964424756 -0.38786663553845746044 0.67678101550083580307 0.95411546980718742184 -0.1854170557840151834 -0.19418703527940306408 -0.0091378002040942273715 0.15479086043427076058 -0.53513666621961997194 0.043622965673706527723 -0.068060193094480303522 -0.18306210175362436221 -0.12542328153010054437 -0.98836364011063504442 -0.40121227574367007707 0.32740614946461549239 -0.28111927105146694572 0.88835541778785154232 0.34219759901814400527;-0.0038305850688830182793 0.74597771365617460138 -0.43265606136854911634 0.27372144684760341127 0.34823418469974132261 0.011065264043744178421 -0.1631831441230723323 -0.34745000363055905668 0.6418078639525465201 0.10165547041056630095 0.24512323620104642385 0.058569452395168662695 0.68921990170434199729 -0.071069419291019633733 -0.41334459357541553093 0.11655968067984188996 0.10671130469858432221 0.58746843673174387046 -0.04125327986239424316 -0.49565186895393853472;-0.31605172406758230697 -0.41565818025004891423 0.36319747458964524167 0.42462839539631180852 -0.51053004720503081248 -0.3010148474080126535 0.34848521340711891003 0.28859769862867162837 0.5559994128664071944 -0.048347159334717254575 0.39339865726339462437 -0.80503082794850744364 -0.013761947681813720135 0.71162500734511469069 0.19577147090690225073 -0.36453132400343446484 -0.047665406575084424967 0.29627389756239286278 0.051824318534889543542 -0.1735145727870918142;-0.059970265021657774562 0.62203250860195480332 0.38053963902525933527 -0.60497475428870894909 -1.0341805989973791302 0.28797442548609608615 -0.18178802066537941284 -0.42000921668838347989 -0.010621417136506786094 0.10151883599980261741 -2.3007631394778718104 0.53462688319207385401 -0.52699319994626125929 0.73560526832481520909 -0.73870866023059300609 0.33960982443129522634 0.26578272518606860242 -0.28661791637602718197 0.43915780080555433251 -0.023069170472247296777];

% Layer 3
b3 = [1.8200447261941685717;1.7650269229060810972;-1.4563150636238137992;1.3429777601833037259;-0.9989430526377058861;1.1329815748323355251;-0.64147474987839614435;0.68254584787916861011;0.61091910297157603349;0.39247963273008701357;-0.0099048197112251851193;0.3796347521086711474;-0.6766424991508682707;-0.88806605222490242468;1.1206421169176987718;1.4627293491525850122;1.1582441928098159423;-1.0129521785387882726;1.5914576137154874402;-1.9696734023435991112];
LW3_2 = [-0.67573631378341203479 0.6518470022206357406 0.22930652994835790115 -0.26803639554648017729 -1.0702007371116000201 0.62810535428277436409 -0.9772514766946232001 -4.763462343790325626e-05 0.58380458415923563997 0.45013478686132174511;-0.58801489635158155078 -0.72907315290962948495 -0.47632569341890490522 0.78892785738925441663 0.060403188837723456595 0.19387281563600020085 1.0574714559851241535 -0.26836160217042198672 -0.45665162962297983773 0.8291056250785138193;-0.37901207357288624333 -0.33252320645943661548 -1.2841388776603495092 0.5988681645780002949 1.070824925937464478 -0.69152443674727659406 -0.52873263798290792703 -0.30279944306016443045 1.0278708180608313594 1.1337835908158822029;-0.24078033550208549629 0.17835090423810148752 -0.72714791892399421869 -0.3253186688843401897 -0.54948562010387802523 -0.84657597296124553754 0.63011257969435341408 -0.7772673488794710206 0.86633836448349166304 -0.11097449881289711549;-0.050256085476122161482 -0.37289781689647222285 1.3635355525007875066 0.62826074156942912641 -1.1449558954110548026 0.4633289029430351369 0.77949707379346777625 -0.690209238696811056 0.21703039869400414519 0.32693141565370653634;-0.33585157015313332751 -0.75027487434491746399 1.2197979668247938001 -0.14788715075595354476 -0.24056839796377355034 -0.94651236565744456541 -0.77275253054075654369 -0.3745538524028020344 0.19654632804619925901 -0.70982694023445735976;0.014790576538333296067 -0.09653378449721865262 0.73729340526000575196 0.37217478212429611073 -0.79686838795151604398 -0.6335122838736566564 -0.87297484627086685549 0.42777308359170129748 0.72008647492057675787 -0.59960830099629247592;-0.82126072379047254657 0.87421678513440892466 -0.52058590749816890941 -0.26221177287479568996 -0.56719655635699139928 -0.97477392797499251564 -0.72196388010581080685 0.096944238623141193445 -0.68148689958872354921 0.30339553968883081758;-0.77483939312904748231 0.36653551634283093597 0.99788036215571229715 -0.85026289797285514727 -0.73816174522880062536 -0.1234471340536133499 0.21046660710516254533 -1.191345228310418225 0.3764371154338281289 -0.42204351130811934567;-0.75122545332456946987 0.53073255339651181917 -0.64464248521067590847 0.034110917518345787447 -1.1464151191441300792 -1.0261377225086589782 0.39596613108228184696 -0.48496243455685666968 0.5556355660038492239 0.10613724309968369797;-0.023579302750034395603 -0.52659980500136494008 -0.59799675238013905165 -0.5042502264968501402 0.39357414592214690074 -0.71350511879202993537 0.93394804406953202403 -0.39199481162693672331 -1.0593877853999247307 -0.31862044286574553453;1.0453982955069638372 0.17762779399209752129 -0.25171435934273445056 -0.60469215873340609324 -0.94137306705489454117 0.97198407632254590904 -0.45496177308623714231 -0.44952902217439355548 0.062947702093509041998 -0.46537909760524448499;-0.58702743977659954666 0.66211164099267305616 0.21682547385977266052 -0.5338526796651630324 1.0412988330441728113 0.40733600210888420978 0.96155895311552519455 0.67186573298946306032 0.19395174344052881765 -0.76905817637875883985;-1.3712841070129477838 -1.9459215526558726328 -1.3137772267547760396 0.75642153174577575481 1.4151471957628607434 -1.1853587774948906031 -0.54301714482127083627 -0.33072201500464787349 0.84167983324956996416 2.0033455887844420218;-0.64374436620555364197 0.79398952408741041431 -2.4635677590392339731 0.46968862915398701396 1.2405977076363197131 0.32681490379683220127 -0.70376862482286250966 -0.37199049619052942939 1.2588960876074999362 -0.50692697713943257742;0.62736994487314245994 -0.61739116640479463349 0.40339454337543007023 0.48921764458289279665 -0.17309133731513146048 -0.28103230833400283384 1.0892218124200572227 -0.94884178350682824021 0.47726510576785757811 -0.6045505098650675313;0.3810146762823648503 -0.99116901298270165821 -0.64017638451363079177 -0.058692162087787630442 0.55365083807927140125 1.0028055136865119401 -0.12137294611916930875 0.72099746311054524472 -0.56442053513801071496 0.53453483918322119983;-0.27762827841755322034 1.2201339822367280874 0.25087851104028918714 0.18482120289515713285 -0.57922963023020224149 -0.42856881955138520501 0.3746051699789920697 -0.96038877889126239573 -0.54533525745230104764 1.2917720761191848755;0.33221992029020741555 -0.27345923322706666703 -0.76341593285970532623 0.014413191985935432798 0.35521142874377931165 0.81708540088431858006 -0.1669733331770801299 0.35454325362200911353 -0.72513925720520866491 1.2456451895956373033;-1.100247808128145488 0.066569204627632216908 -0.50952425090549524622 0.48311818178101967325 -0.083198665606870114697 0.0014915992506230983661 -0.17590332388371687777 0.71510150168109998248 0.93124087014933143447 0.38094796781118622775];

% Layer 4
b4 = 0.42244757286307671462;
LW4_3 = [-0.4846088073316 -0.21896247155550674357 -0.16475583953972419704 0.14116467775042240707 0.36733348689047995439 0.21430251262042157578 -0.21661882269828816594 0.36180263496480807861 -0.91831018767653216361 0.5627752051917815912 -0.17127428892500234925 0.019525450679480499394 0.49060363536613221802 -1.230968634914130444 1.4287484878442033853 -1.0490381821139356244 0.5058305547735204577 0.3011847289632129665 -0.17086985570529236722 -0.36678716814159839643];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999931;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
