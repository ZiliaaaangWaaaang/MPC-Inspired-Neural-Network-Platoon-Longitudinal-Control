function [Y,Xf,Af] = nnmove_19(X,~,~)
%NNMOVE_19 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:04:11.
% 
% [Y] = nnmove_19(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-13.2925490923537;-6.70139767883548;-1.99738196042707];
x1_step1.gain = [0.0638195875959219;0.168202204644631;0.502170423671263];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.4361498187649761604;3.735335056748230631;-2.9705323865408503892;2.8134500196004781358;-2.017527301814484364;2.3722209070275241949;1.3802565263975690169;-1.5156819966007994971;0.30949774151955022905;0.4088472820381020556;0.757976637247123608;0.63411943261970638019;-0.48855721534372009707;-1.2167655573324516194;-2.0094280752680977464;-2.2847553303947512049;-2.6889967061505051227;-3.1391048661538567544;-3.4280284690713949125;3.817021308856538564];
IW1_1 = [-1.2153194554184014731 3.8510446610970947567 -1.0886878543128371;-2.2530765120921598665 -3.0708323756248088188 1.277521327976438581;0.75001401941987166921 -2.2534650923987018523 -2.8934486184060279612;-0.54815574326553617723 -3.2353441958887945162 -1.6184951889497862787;3.7463535994867513956 -0.7901053857219998422 -1.0035943307812946745;-0.79857031181500492956 -0.78188313214601046219 -2.8416806866557671185;-3.870210808730427221 -0.58278647944759964794 2.400926804852370644;2.8773369239950437048 0.077053012668620718406 -2.4435310816186928129;-4.724809345007366268 -1.1987298126996488445 -0.17570019758325935988;4.4243543040224464491 1.4165323738694335365 -0.65959669568545342688;-0.013194024147637015837 2.4173048649572832502 2.834496646877994408;2.1245212285480410408 -1.3086447801261065216 -2.6871659086140442518;-1.8492289905626411173 1.5341562852284837959 -2.4463117067445496744;-2.3058766350388744115 -1.7189524677885741344 -2.5661221735814603306;-0.26119049967849566896 -3.9697293603283032581 1.6190934646907455541;-0.80286387224795230377 -3.1205658998515506397 -2.0715040865697469386;-2.1870059808066866225 -0.64470001588784420221 -2.8719198445135249997;-2.387876079008424135 0.38827229935021434493 -2.8760785153787922219;-3.6353726837231410407 0.25003507313765060971 -2.0879787543847525555;2.2957028555502767553 2.6902415971445670095 -1.4416762134220242331];

% Layer 2
b2 = [-1.3024981125420322936;-1.411330046135562899;0.8895364781769449225;0.31534585213743376864;0.00023888213321154004587;-0.094343258244975816695;0.66720955617997357301;-1.0219794299869986443;-1.2006316687287468259;-1.5830715072060579374];
LW2_1 = [0.36691635689342877447 0.68743437515324623543 -0.19169169171918984396 -0.050095181246682718434 0.084746446043784132152 -0.94354931201253688933 0.20507105212621754009 -1.0142009114163956784 0.12918960771601861737 -0.088082861890411867645 0.07093689158324283095 -0.18978373519868349528 -0.58673124554271760545 0.3249004735462533433 0.22736162641125826078 -0.25188393969075728585 -0.19468233749868676941 -0.21189442577423070468 -0.33529810932906517484 -0.22732773078907780873;0.449595242656763594 -1.0263990691149325052 -0.27918579577788560364 0.33083366810374165157 -0.28776919867321582025 0.16063777961309985698 -1.5385272884353577982 0.14216199527254008705 0.4982439961078036772 0.65095402847634964427 0.29610208502547319398 -0.093171989634149549042 0.96414787005873436865 0.0033619418717113704227 0.26568453395839558562 0.43430286192201095208 0.73841948331338647105 -0.46810443181733973894 -1.1458844314624436755 0.21395787907801269712;-0.071948733538645323615 -0.73192751185730953178 -0.19927715428225500904 0.030017025324330214725 -0.36793798627780738286 0.29461307763919558633 0.73608263120058259332 -0.083054400050255605681 -0.80879314820467740343 0.78031736683027719259 -0.26340643587335743625 0.47425619355229020613 0.4173749708886030918 0.085327010582129936278 0.16867959776357804857 0.30697557302705441584 -0.58491637711856081516 0.6737957343997510451 0.032667542083402015263 0.033493988633602679583;-0.10946963083381254511 -0.45764087457256524827 0.2622061979036485746 -0.4983286252823760365 0.56773769427307130275 0.46258891628341086699 0.065957266178635912124 -0.2473257312777017991 -0.96437345280672592818 -0.19038925229022707342 -0.33454963149035316095 -0.60936440364778188261 -0.84272656762005349051 -0.20370286017927199951 0.26752816269325052634 0.25947713896247726062 -0.2900184976203489251 0.27355383748944805955 -0.41962819136183920898 0.51756857828630720153;0.33842577978780341574 0.28201411314832380839 -0.19265814255032029378 -0.17285023276534713932 0.13366366833365553313 -0.15908836980488944013 1.3644161390251419164 0.02469965937216779886 1.2953435337140772887 -1.0764704447880621974 0.059336915674822895972 -0.42272604145843906132 -0.55837546251874015102 -0.1652647027038909866 0.096992849475752068722 0.79182067469201722343 0.14979060259870063954 0.44915389661284588207 1.9433029032262210123 -0.18474546954247894615;-0.13690056744696668667 0.97166204207894779632 -0.36024714230514620628 0.33843375639179262837 -0.04801073981694088666 -0.34449610461667057315 1.0843015715756656459 -1.1490471937548907277 -0.4974261049791600664 -0.78223805208336549821 0.7315888721223406943 -0.6314681448578298717 -0.39590856477410474312 -0.25336902017733498038 -0.13790976270829721773 0.095778295355536308131 0.31107785888164868338 0.56323464529011446622 0.34694320259307881438 0.47877327879221326379;-0.16866810140635485338 0.60342526520848360772 -0.74776311228550917942 0.28765465811269641527 -0.32656392593562111326 1.2798784103050335759 0.3902072838722075443 -0.30122813644564261359 -1.1838584309946074136 1.7528265897826329489 -0.59776589535114543761 -0.14093114917464608093 0.67906641536070677656 1.1567044230939891314 0.71682406009297461313 -0.32456942554814649515 -0.041634911086370920974 0.12384730689504409862 0.28383306732924079574 0.3554610730321328127;-0.58507501571329068035 0.1567568985271248494 -0.0037517410206432647186 -0.63155498992456282625 0.39985590265871234772 -0.018551751955748062295 -0.15479201021323971132 -0.081209184668414119423 -0.26036715006719485244 0.20665870329944929784 0.58825597934599316297 0.50156795651762042798 0.63845112839245510283 -0.44496863929419755435 -0.2420213102009846351 -0.26665096704928026305 -0.31924343364440266324 0.55517740476420041063 -0.29799952404290158681 -0.30954613569070721368;-0.13708563502992698879 -0.4223584119932414227 -0.046346793945984385288 -0.3779687169542380043 -0.31580336014602866657 0.068675748000359887468 -0.17871450512413641909 -0.43121327596659947412 -0.14360295954561072551 -0.37633054553207156978 -0.63529323458247555223 0.81891583092138853228 -0.070395173428069043875 -0.49418817385852692459 -0.40701350092145505144 -0.5567075979016918863 0.12957288238391312385 0.062689888621356951171 -0.3681167134044294742 -0.70055998402859964713;-0.96426508631590757137 -0.3633357568437310392 0.051804911859942875951 0.26650881551794636248 -0.63557830815884230891 -0.8331739812894060071 0.6873011304377650843 -0.020683474498126807467 -2.0973732309905592786 1.6744754337871230465 -0.014841763085007720485 0.24410968114961276165 -0.34292760215122553014 -0.52839311680197786902 1.3183644479069056565 0.048043775605621806546 -0.28249069233206497431 -0.53437278481269812058 -0.39169436479551517083 -0.025074084526105600013];

% Layer 3
b3 = [-2.0010614770494559167;-1.9252997324133818147;-1.5177810805189753118;-1.3767462656565108148;1.2387741259611046996;-1.2093860892895618164;-0.88917406853208236228;0.58131160116467694987;-0.012898272941929434313;0.47149851685716270833;0.15067720833545864001;-0.23139822582254512828;0.37503865200964847659;0.74345985176815676532;-0.70359628098045035038;-1.228091263317816928;-1.4300896271432446127;-1.6627091605746757708;1.6994675717954499383;-2.0321011162869062616];
LW3_2 = [0.37826232219166749937 0.10894145016916931268 -0.73200582507672018462 0.33638725820125914279 0.96369970882621980302 0.7163008995202999607 -1.1391399081047917097 -0.70720644524371534256 0.042046392436174771789 -1.2243602998670706228;0.61854109101926635361 0.15735242233186194638 0.69201903331530600916 0.57916132044546442259 -0.52714777712697946654 -0.25864436174746879837 -0.69551224957592172604 0.53724391987438502305 0.57683072687415193336 -0.66657580901271118456;0.79004322188608178124 0.56885052245152234462 0.372943289456910132 -1.227593608175339801 0.064618956382658784832 -0.32258885176149743046 0.11720617589332202324 0.23104282870224568391 -0.04228871213229800502 0.83783261451543056264;0.33520151423386318479 -0.59964942231180962118 0.77990484450395514138 0.73935037565206662702 -0.45973434610227204011 -0.65081303714247351611 0.64796613463944741085 0.18969340915054641594 0.50969847179130012282 1.0297104336498204002;-0.51740629183594000207 -0.68060707875802628486 0.34044099943603145508 -0.60321159639875954195 0.33933532356428619536 -0.48627918052357788081 -0.15242078256877741871 0.0098282599984515304353 0.68947717843563238738 0.93606879154358291206;0.88471848857759283202 -0.72213605203335129445 0.70995509065717765651 0.38228137196465183933 -0.79392191250579968731 -0.51835510819819985429 -0.12044466005640594441 0.35947045186806553252 -0.40248242039709675177 0.90068249930228305722;0.57417052529036260999 0.7969971204250443364 -0.62854979996222382077 -0.21616936301472652882 0.37912716167253074362 0.25860702855808037626 0.24480377977529269029 -0.68803842123341441006 0.88221662142062884371 0.75437633218683552982;-0.4897287331672365851 0.11141056786677848434 0.16186986504485989524 0.07894082868318598456 1.0008312562621828334 0.86913907514712684943 -0.21180554231490450467 0.093568649721341504155 -0.85892981184507077863 0.65615592371545106154;-0.9893474140121848448 -1.9385864393805685157 0.44183660836569438324 -0.081986348127329869429 2.3489974238282340657 1.4280406673326246914 -2.2271462695536174969 0.72653497486716989151 0.56457090958481692677 -2.2635248545611266202;-0.71520791311543752133 -0.10454744221638405388 -0.048990488297101918158 0.73261714538242561634 0.10577888727282584724 0.75599276305168805479 1.4128077425789602461 0.026124969174941309324 -0.16313523019063913555 -0.16557080023087866749;0.43298720431943160669 -0.94975184925241540324 -0.45722296487810176746 0.57725804394187429924 -0.52928679199446082571 0.86226426580501924768 0.79888297275118580476 0.28793671846426360794 -0.65120034289072281641 -0.40896601526885723032;-0.54379975221192755619 0.38315938722528364302 -0.23111117496905470015 0.53051606319159239078 -0.57167296003189183029 0.85041611193820609849 0.23315152975133304758 -0.68372214239510176181 -0.81390664131034917705 -0.48447695298328102842;0.36663917438897192236 0.49652504526531787699 0.26942476138113463646 -0.9043342934329139382 -0.51881508173647195026 -1.1671611613831274212 -1.4329595130794177127 0.35879091127939721773 -0.15534185975120512468 -0.59858268913551693213;0.0093586307908047269843 -0.64815756914092326202 0.70736004245268579993 0.2219560707508027031 0.23900581864446154845 -0.15263689567459551299 0.75889968556375697606 0.71957546805724836858 -1.0005823238814102183 -0.70921077450424940825;-0.15870388991955225455 -0.53261340737097262465 0.9486592258491265417 0.65435158761083345169 0.29057019967992447906 0.91290233388713182272 0.58495347679008136144 -0.50354139828342048268 -0.75387350713268574953 -0.609269893447774602;-0.33222452592536172444 -0.55925159396514845245 0.30017044542513909855 -0.88462764847538577495 -0.061878122173212694868 -0.61033622806050036314 -0.62559696317612423222 0.77374520753984288302 -0.66105647740884665442 0.37881563859989514365;-0.55045519312482926733 -0.88841397098284902167 0.67371711644608178737 -0.66712282902125985551 0.25930908760313842176 -0.81722378599292766488 -0.30707574920620750447 0.32292950845120915737 -0.02545279669300996167 -0.73403382797225336098;-0.18100237166690150148 -0.67484151035230155458 0.16348548469082771484 0.19489321726301350735 -0.36203802713721078277 0.88185325806033088014 1.0930458724717364571 -0.40795513127862037539 -0.53275229922431110996 1.2987726893241091641;0.44332822880905736751 0.23948257701156247523 -1.0398283948988704672 -0.85575986214266697161 -0.47721915734745701254 0.29253616735097381918 0.71974815523822488483 0.78798590390651368498 0.0808200130828545249 -0.06197790326555678575;0.043701571055827594103 -0.97070972965837276636 -0.51535342488328772514 -0.4818134210964951647 -0.76077025743228265942 -0.55948510211674906678 -0.30346204384921438013 -0.48318828704602473367 -0.4972872400540337412 -0.6876846238096366859];

% Layer 4
b4 = -0.49981320694635289481;
LW4_3 = [-0.32848700899143928877 0.042208647690763920202 -0.12095875484052222293 0.35149834643766836306 -0.073710866798929242094 -1.1628992327924700945 -0.28370058652615764982 0.50555300107977507729 -1.5044581774095016069 0.41608537205025802885 -0.95298666423377931256 0.14226686189486292822 -0.8995504688577922181 -0.88882743883461134971 -0.51678705488149967451 -0.54520863000695263256 -0.25975772164246163642 0.26667492970558698273 0.060280813211618641811 0.46201295303974809769];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999945;
y1_step1.xoffset = -2.00000000000019;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
