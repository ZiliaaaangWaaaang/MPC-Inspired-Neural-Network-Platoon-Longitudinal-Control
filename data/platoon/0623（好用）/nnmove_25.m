function [Y,Xf,Af] = nnmove_25(X,~,~)
%NNMOVE_25 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:04:18.
% 
% [Y] = nnmove_25(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-13.2925490923537;-6.70139767883548;-1.99738196042707];
x1_step1.gain = [0.0638195875959219;0.168202204644631;0.502170423671263];
x1_step1.ymin = -1;

% Layer 1
b1 = [-3.9423559097588571909;3.761216432225333417;2.3359311181519415435;-2.5360633922629283177;-2.2561654462493714313;-3.0740703226161252282;-1.6350900700947041955;-1.512938512294726312;0.8400239325894782727;0.22018206049966371207;-0.30088974417540848005;-1.4728995131887958614;-1.8556282553443772532;0.7942409844248990991;-1.4870370596135817909;2.4267578043015123335;-2.7942702553198799365;-3.236066611758197098;3.0417663948216273617;3.8193099236524910012];
IW1_1 = [2.0251242445337820364 -2.177043710660702569 2.1516810588901558177;-2.6558535574544004376 2.2384167132310728299 0.14860770904786035906;-0.81098800455364228323 0.38147103748456334671 4.1633896781221624295;2.2961178199923577559 -2.8675380719448750888 1.2050679848218062151;2.2993254607239128617 -3.1927339392379741057 1.1359074849710837363;1.7164572123050014785 -1.9523086261037734257 1.8760317419045766663;0.84304732498396905971 3.0502597097783534785 -1.917196156863418155;3.1211976689887159786 0.47277656736732986964 -2.4398040291926399448;-1.5919212023989426363 -2.8128726033528348438 0.3158551122881599893;-2.0698947854142830671 -1.8438402192740508401 2.4338464943582258648;3.1125935801942667958 -2.294104218152960506 -0.79938212893878890508;-2.9831606756683952675 -2.1247795360592096614 -0.82521989265155404336;-1.3822726788805217435 -2.3124559775293009878 -2.8589999680878270816;5.2540007821659360232 1.2977031411182391452 -0.77130012091174504629;-0.52975724885634956074 -3.2074634983599015214 -2.226287356678024576;1.426830818987209204 -3.5629878288971652545 0.44289877937905075544;-0.61230112261678137919 -2.8401184422260077334 -2.2068619368974093931;-2.104289664502698276 2.8974315293254191417 1.1967254552989623484;0.5108184180391506235 0.34207680050855521214 4.2287773594236988117;1.5064300908323728923 -3.8917367943907903438 1.0249748151769824123];

% Layer 2
b2 = [-1.8425476799154241192;0.57987940259414372246;1.276525610588879367;0.39617978885981203208;0.43442629968711932165;-0.24036739373123619523;-0.79840803918562530672;0.65033076325049810062;-1.3243570292895416873;-1.8570086719578844381];
LW2_1 = [0.31246214473171135539 -0.17723374548341036538 -0.54759704465072589485 0.74706890948482984616 0.4676956066312072946 0.079196296246301964294 0.61790855427331303762 0.43555159095281964499 0.13702744410714928769 0.60748981409038249613 -0.58181123801208389779 0.31443193660428031544 -0.52941380653207470441 0.44128780831527270045 -0.26377125929129341397 0.023084500265496618598 0.17092487857681501473 0.09527123706918656787 0.14005019782248703808 0.0020394505566534389986;0.49215832514117308083 -0.49466889709147671139 -0.10949706466774696001 -0.59910025837562974615 -0.84680061522246241612 0.97301753897458298503 0.3990739904666137372 1.062009180652440099 -1.1855598581446049611 -0.090463689267436780961 -0.67787978831340267583 0.14371511646578108423 -1.3115965733346026667 0.2127724275986651592 0.66683768622673211812 -0.40052371397333708103 0.78851517078684385531 0.61498276051724465319 0.76742486441618651405 1.3020207175560036816;-0.65867823890424725963 0.31130652162914645986 -0.29076343938316029369 0.064964919805362508765 0.80015296376523614708 0.034707179740377180899 0.44796630695012717993 0.2218742338112559831 -0.14127319074737593185 -0.46704461805063701707 -0.088388691295559068672 0.12967306165703409992 0.55843733911214499255 1.1376276790074790757 0.20255787887061049712 -0.45865379336725081716 -0.36053670359541417634 0.44321808340682744554 0.60601275863956127754 0.58807034182136130873;-0.17008205654374547455 0.27100690741382771343 -0.058215138888520617799 -0.35673819306947429641 -0.45687975863348800898 0.021573873562286079164 0.62695466741861871629 -0.5368091977498284928 -0.41453264094216468738 -0.25598833809149984519 0.34597676755939499316 0.71189550438559945356 -0.65857355203722134362 -2.455257360713180681 -0.31920066400840457765 0.30456573177225859661 0.0019221352926777936221 0.52222107551943774961 0.43808306277484543312 -0.70328787930714486976;-0.40621241927005052874 0.49535027806160869535 1.3405364490239035646 0.38407425414886164905 -0.33951823072754000465 0.084039957000187459624 -0.11068957845062797618 -0.71526578916671212927 -0.36790156792809680653 -0.2422821324903121909 -0.13343791950346742259 0.52169101974812004396 0.52611037112243241864 -1.3540805480358613089 0.15810641182843887531 -0.19541177352935434897 -0.58518732475084245248 0.40078876461061174741 0.4305291073704580751 -0.37722378783866356011;0.17881440170120624367 -0.054601372184922968012 0.064007059113395922689 0.34247825765221401317 -0.27842009792369348808 -0.098263675532127989221 -0.52070043967594326073 0.42217196126197209516 -0.61492050277696075344 0.28041119368706468595 0.52612541998038730995 0.58527144396425911932 -0.80562271345245894949 0.47993876613793340358 0.49596314210198139127 -0.11407026065339571919 -0.39867980718190093592 -0.24432020062333126287 0.052279771459483370677 0.2226467578557672633;-0.30720913742050987016 0.23622020086700201702 0.31553123073158995116 0.19046788494909397405 0.231864369083507188 0.26337459618540531858 -0.078839261594884954554 -0.032173644344971642772 -0.61139498587420659792 0.51512687759482045369 0.38768630690345540213 0.83623064037171179752 -0.26830812069929244057 -0.38950525172702171739 0.53233619567135193051 0.62964464434830347273 0.52526155906750449098 0.2532985468134263396 0.41510182976591547543 -0.51584043944264690307;0.40810629140140519677 0.38955525395310880432 0.89337925517933869379 0.49831759476204168235 0.54196317133860549831 0.79273326208848982066 -0.18331246255932162614 -0.97737984154445189944 -0.5737262312537045883 0.24437967116837672199 0.19021070227894010252 0.35693393247052301875 0.51717222478751734283 0.11862138553145361308 0.29094821283914573673 -0.094067206291070709634 -0.029721018807001606254 -0.32643272457678318421 -0.1477620929864639221 0.46866732855013654158;-0.36933710921331236454 0.19716104490362287849 0.0473651248125667515 -0.57176415647174450019 -0.37817670008398573955 -0.45184128629929559695 0.5631431476739306996 -1.2277643288059105764 -0.083011630123978108475 0.79731568117085416247 -0.45412517030921223382 1.0653797254726167232 0.52840047674072543327 -2.22438271589293457 -0.29777482524004916797 -1.246050079382038378 -0.088912856048073474202 -0.42521142344944207192 0.21427656277615944602 -0.010485983643292458301;0.16797922705863310711 -0.36880263787821238042 0.32653764964387987924 -0.27191424361755633932 0.47831842475393471226 0.092923907163597135872 0.18587359333144731766 0.49353841869171050094 0.28459315005587237923 0.41533473584301849879 0.26054539990829028717 -0.31955400327830141283 0.32598619468262968191 -0.37089807092868831706 0.31936408899693408125 0.13850174323176145386 -0.1366002483686711011 0.043637979929903120135 0.45553129398180552956 -0.84693451953913323482];

% Layer 3
b3 = [1.6699741534710117463;1.6342531338278158959;1.3029929451724326928;1.5041811575443018167;1.3364839319429349107;-0.87377577702481612487;-0.72375789715846827743;-0.35467456288942439402;-0.42020840675131970743;-0.088072371306542579505;-0.04155547886379183653;-0.3547625826069925048;-0.58390959034342804213;0.79542986883626687344;1.0981581425728261792;1.0903088556891982197;1.618950739872265121;-1.4012891500682593815;1.6466535576811132113;-1.7835174772758726203];
LW3_2 = [-0.14321253146699261527 -0.59175809678401647407 -0.94459384666398160668 0.13605082711171334608 1.4614544550539185774 0.76008731774019588912 -1.0217601069977346739 0.043605334888171608243 1.2970429424397826867 0.38514779895932638176;-0.10529517782765650258 -0.026753048650626158611 0.011041894662724524578 0.32425820273564831542 -0.82658455427203136878 1.2655356279219662774 0.58373304912393586541 0.50312455107833198298 0.54515569905533456385 -0.84627408936858150579;-0.6765359617574404627 -0.85816071850217134909 0.94679309183841275921 -1.1097142521434817386 -1.0633128223713537164 -0.46130711726736772782 -0.50124718152254044146 0.13483100288561256086 0.83924165107690407162 -0.33454606794453567442;-0.64972762053428212425 -0.31084436860124137203 0.0017709167751738246355 -0.035469059059303011117 0.91248748949612734638 0.34234651348008926508 -0.77381910395891895238 -0.55978954947087322669 0.36666184994776362949 0.23335019946538967939;-0.03251785223611963066 1.0836063603235819297 -0.83436652437120761849 -0.89128750414078627973 0.63242932083233394103 -0.29674350114423309055 -0.43081023357296277521 0.17481461954432181427 -0.39300197104510009583 0.25191107193677136911;0.24920619868618051895 1.0686742060804010901 -0.23962483874530882133 1.0874378013233023665 1.1878391320728105551 -0.18376783459071932558 0.85263088255737184973 -0.86539640802696626842 -0.73975512378515251299 -0.40458778198776557122;0.78551844821110239359 0.5775323596098616008 -0.7795516846024033164 -0.64157020680094056786 -0.65479995843342064799 0.44924467485091851282 0.091565520123737947911 0.59338366119248664443 -0.59777446827813851549 0.38416405484157556405;0.65860256446870935054 -0.56989163151534039109 -0.66921179759603455217 -0.21913574030034344009 -0.056880731366981900077 -0.51879831103746665288 0.37864003438817717129 1.0929650390097580548 -0.79389023539026859488 0.093131301435775873387;-0.064939833021904980193 0.73843294525765201808 -1.0179938422226204597 -0.48126299027541369346 -1.054291879211783467 0.48039950832704308992 -0.625597625069159613 0.57960544723104845399 0.21691817067206042857 -0.58069905208724026391;-0.128106524094245805 -0.47895150181997658834 -0.51341241184670582953 -0.026337105135261808242 -0.82215841171537440424 -0.81113550512073473442 0.034391446740704913199 -0.82006344278708853679 1.0817061335292523783 1.1288397995879451141;1.1058789846768601883 0.12493977346653324656 0.41759576906678885777 -0.91119578323710037626 -0.37335230368653082866 -1.2227773513546609241 0.80903309358742847568 -0.75728916315132333015 -0.24945508495053023146 0.37212503488266113205;-0.61371243951610943146 0.78968335572837189407 -0.27414940834201290132 1.2178916706351956556 0.07876488466246486797 0.28798004707352542475 -0.7108144850363017353 -0.74826216535642520178 1.2101490534552699074 0.28407981810722560123;-0.062775280387488335831 -0.49453744611296218681 0.77277189900997200755 -1.5631564508977706662 0.79679373186823831965 -0.52452999137286127063 0.78849326999911462099 0.38981073245316955056 -1.3301668190027200467 0.75503393527820739095;0.62319265138077395427 -1.0685668769291676305 0.56191303898550093443 0.29195495930271558871 -0.48308672196736018867 0.5963901233710248162 -0.67836640993676489142 0.98252173732157022101 -0.47488359875498242779 0.55001440961191905288;0.27011175012854282684 0.65013484145744493414 0.201771475203885442 -0.63903619332903349726 0.6816956566514886795 -0.033602401707230597494 -1.0179534369223510737 -0.45276476776146967751 1.02703056956400407 -0.10266969818341807608;0.56898371786947232742 0.53485362334022612529 -0.48508846087707779837 -0.42894620653849363512 0.2305667474318215393 -0.056985580549520006843 0.63127269388444950948 0.32093884832393260176 0.66382794357169194743 -0.42662355461622547548;0.51267126890885950097 0.76229028733013493024 0.20361184200683990486 0.26013132070653527395 0.86136432564183751381 0.087350990696149155568 0.37049235668270064092 0.0029373869580906347698 -1.5434083713032371588 0.63890788157667743885;-1.1316351383177050138 1.0952372017895442013 -0.39409685764090623961 0.64201676452218092717 0.61111444481553245378 0.10105049526341683408 -0.16856956338719258914 -0.40205027167409296274 0.53117061187240965925 0.1282019181208926828;0.72587917072679430941 -0.53198781774648873366 -0.79998403124853323387 -1.125077639008835062 0.37066476972388284761 0.018122874619131687512 -0.48045248265038997815 0.14863826540630434292 -0.81098375630837771233 0.57524228606763727623;-0.60890711873055558545 0.44505485763170055113 0.6802642911750438337 -0.48864767142332005134 -0.86689418498866666063 0.60485965141376552001 0.6953177593573791615 -0.72433700881061424681 0.63755656377608072027 -0.66721664528688462426];

% Layer 4
b4 = 0.69751392481266394352;
LW4_3 = [-1.2586216531908760441 -0.3930955307453303238 1.2584961328092167943 -0.070185935062241744387 0.43018290779906870336 -1.1336371004275285213 0.056015386295882138579 -0.17288666943845329427 -0.22318611159196191651 -0.71409281470700414207 1.0092127180522925123 0.83258969468790056112 1.2519400222237984099 -1.062947400253382968 -0.61780863047474898764 -0.014113010826966299743 0.72964563386359526653 0.12719944356689449894 -0.38845307921341254431 -0.41600109397875051354];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999945;
y1_step1.xoffset = -2.00000000000019;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
