function [Y,Xf,Af] = nnmove_29(X,~,~)
%NNMOVE_29 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:04:24.
% 
% [Y] = nnmove_29(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-13.2925490923537;-6.70139767883548;-1.99738196042707];
x1_step1.gain = [0.0638195875959219;0.168202204644631;0.502170423671263];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.4767767242684746165;2.9190499080753111727;2.8914456510009531875;2.4394176851621254265;2.1423622526095669194;-1.347122702713960507;-1.6745714892902392457;1.3418793574203775609;0.15218409259002291245;-0.61066785389477118429;-0.3199313951590256333;1.034382650560963901;-1.2654998325760453692;-1.2016864459588492142;-3.711680313928064745;2.8236555112663617173;2.4706866770539934741;3.4848949958774815272;-2.9822526665674393698;3.4963780736677372296];
IW1_1 = [-1.7685325080311864454 -2.0824272980847555736 3.4756498706692302569;-0.97043943679810629188 4.0792826802333692626 -1.4131472474963315822;-0.36018906288816449068 -1.408007379575625384 3.159179594992995721;-2.7243901198703670552 1.5782116915277184521 -2.799065872528709864;-2.868263496880339769 -2.5574069093464268931 0.089544025059635434793;5.3618777705327698158 2.475415919648835672 1.534407658805695629;3.9154762242254479432 0.045252789106439567091 -3.0376770023743091542;-1.9511647316001377028 0.075558723612953501703 -2.9308768463446601693;2.4178702018621782699 2.4126812135061248554 1.474120870830725627;2.9242214288975869607 -2.2281438129118802394 -1.5676919867004539544;-2.8243895494339450458 -1.9774090946112174993 1.7915311658933166239;0.83044222463483596819 2.8140572666670937707 -2.5191403788788462315;-1.2880036486510826332 1.7452702789647511761 -2.8232044934554738624;-2.3785299631987775193 -1.1326202425253653061 2.9219831935884350571;-5.0009847258178554696 -0.203105721639843112 -1.9307123922835531804;3.132437677581369595 -0.7050703762881832537 -0.48249400880757825627;3.3374450340693493366 -1.7108798496739976436 -3.1256462452755888748;1.6839339202395611217 0.28071950047091953628 3.0250239413873618588;-2.5051140884058744618 -3.428855007841131286 0.56745180846444187583;0.2880176168118731006 -4.0515701267301515998 -1.0585669094587550898];

% Layer 2
b2 = [1.5690507741215944382;1.1050000524668561752;1.3863529069677589245;0.010927032285970347814;0.17853113972117018449;0.1681030563387707899;-0.57900298717651255131;-1.048433611005537891;0.84333400983075124113;-1.892969619153652916];
LW2_1 = [-0.37136643698179339079 0.50833482936609430958 -0.84240012231057359582 0.85798634131226436672 0.77844969443032407952 0.17286320014117739774 0.4800870103608706474 -0.25829445580850857178 0.69447611327138103476 0.81308405003761630159 0.46121224335948840523 -0.15235463367434734505 0.092020186759380742658 -0.11135436397925280172 0.49690806490446787214 -0.24588659143408034269 0.83226171134827708897 -0.51015312805829149401 -0.38748882463952405431 -0.088242030344698463296;-0.33536571661389991128 0.0074228733904504237001 0.38057646514825571593 -0.054867329968828405795 -0.4478908744732592595 -0.8386621860519507532 0.13801334081272029208 -0.12722454698030469245 0.81403365589856346851 0.35409855032764359084 0.19341879857243418628 0.12021855082906540702 0.12528036479741053166 0.11072682543289318058 -1.0841864960371752069 0.41028113324075576873 -0.5557012990633100058 -0.31782004455098855633 -0.099126294667350539624 -0.20733715131629695816;0.12440839546605485244 1.0907131703977532844 -0.17252602227278346358 0.25166694384795568196 -0.25374764992327791813 -4.3980553065732523876 0.44766011548673950715 0.45996296297039496181 -0.32689284362113185667 -0.48957666602222593699 -1.3544336794015123804 0.72429494549949402504 0.3499026163885249896 -1.4281277725336036788 -0.81402070428877992825 0.43336211397363166853 -2.6064153765902360327 0.57089099631921147449 0.9602716066462029243 1.2942831102244969355;-0.88871323176401262334 -0.09468644575342549663 -0.57452607705793101722 -0.40045548887848053665 -0.02011750495609105141 0.10657210275711309633 2.9414874530313728229 -0.033963031930201795228 0.64629364851671522452 0.16980197870963634199 -0.33732246963612178003 -0.18708514066008230525 0.38391734367613500334 0.1794912575873317262 -4.0603495299972767185 0.079653007568467271149 -0.023389549528771865633 0.73819971155369867866 0.035431347870204160655 -0.65557374202012297371;-1.265386387633011811 0.35662538260875381591 -0.57483085401606104359 -0.43588469262515350255 -0.20108078562203957063 0.077010615094555118221 0.022717352911241953106 0.33466184877972821043 0.53145947478138177988 -1.1206732706183986092 -0.55150101606835277845 -0.11520198588900389114 -0.30560370139177805981 -0.067213761459662166309 0.34570520592718856356 -0.41427677150079877944 -0.39572486284663210832 -0.60860368585082769144 -0.070343280315778314304 -0.51665925845954874251;0.59316234722983496308 0.065671231213124736659 0.69370631391951598221 -1.0115965999702993816 -0.75250660164166804922 0.23678904354383278896 0.49139821532235411494 0.24916158789824807696 0.1200475310011814567 0.75405842782799770152 0.7310138594799602263 -0.096234973834729897746 0.28265844993740646407 0.11407717867244639154 -0.17617956681947954944 -0.13356280740544693164 -0.077688590120743458711 0.23987859935566571701 -0.59812305575255975132 -0.2760803259019182776;-0.0031539365120853814564 -0.10389139263061090979 -0.026555594101236357912 0.51632392888824840682 0.26964894390020405224 0.90522741709024845402 -0.017748995699908880902 -0.15679265232310818368 0.59224840560944191914 0.57794097930652876816 -0.80449129685564402248 -0.04455324951735442629 0.32920708153382560734 -0.43514946051341968358 -0.17126416680033995643 -0.01372655227512233761 0.39156211338401086808 -1.3545444283501015814 0.35567081203483380536 0.20473004761623986303;-0.89973959391647506667 0.35300263368362244654 -0.14093484809132519886 -0.38677040003739049379 0.09547453445265172145 -0.5452489560955660064 1.0651724566335065703 0.023764811013398636635 0.71527226991848846804 -0.0041736309134070394625 -0.13640550108559126863 0.28168113026782387598 -0.18818118432690525421 0.30607167760191111849 -0.062255480060382249741 -0.062910344676712151579 -0.53329969013616074225 -0.61221654045903384223 -0.16854459238349653316 -0.40710595467808036174;-0.028666784499174792489 -0.20319714064771296491 0.60107103638239933741 -1.0176388766141486464 0.10877457474850753261 0.68762287391517407098 0.079814213771684267007 -0.45645774827009860664 0.59420029307877353375 0.35012780546904559431 0.020039919942946862741 -0.50767099518821734438 -0.065897368268403491709 0.71455809747363785434 -0.022112037142821963642 -0.96734481380481285306 -0.28736407229572707989 -0.9836501504035071175 0.39046631668460130005 -0.36901157986486377016;-0.54992765966578827097 -0.86059440748235571661 -0.53749072616443027695 -0.2116265325239082562 0.019195296698769504645 -0.6829248178363057642 0.42688595454477018531 -0.07523694209365618113 0.4364518309492863013 1.5227915285419448832 0.71715433943383699589 -0.57343086150347610808 0.42518473027006686848 0.30466585025395431785 -0.81631430676767702259 -0.39397677201504177624 0.1636960514813448897 0.20266312537693523255 -1.2932946478649496314 -0.11149149862659185617];

% Layer 3
b3 = [-1.7383743187829505672;-1.9564949991798632478;-1.3402681410464267753;-1.2536221456543790165;1.1387843181505197254;0.96311741608443357521;-0.52344138985785360063;0.84594960394755036592;0.38843066636509093748;0.036181055408371708138;0.33855573097206059785;-0.19261009640757717487;0.71004139873335714306;-0.67110970868353225782;0.80799657776039424117;-1.2583890492730072097;1.6950340120867650739;1.3275144115705128645;-1.6187900219863406992;-1.8125264936835028262];
LW3_2 = [0.87265147388852548627 0.80318277461049869537 -0.041886564694560160516 -0.40234593725369482975 0.055702739356529640258 0.27548651181096589502 -1.345161397404039727 -0.55755993500117240202 0.1001169479652283395 -0.098717259581363805965;0.66089055782047578802 0.47797904926785733659 -0.26558924575469577967 0.30826787606139349762 -0.14824250854706449987 -0.67144460971631192425 -0.2920608990147741113 0.23423314450732471426 -0.13594687872777044824 0.10707151267600309441;0.11528139397614049766 0.51245693163033112505 2.3369710185290615279 -1.3515858890127525616 0.89590316799357117006 1.1423413643619058089 -0.32942273471117033967 -0.58433801778210270328 0.26447849913987675485 -0.49787300982498255975;0.039702633128216570368 -0.68816551448787122158 -0.73455861526716992316 -0.18453535860207845309 0.82092828659810324066 0.5253789772577570627 -0.97944761957913051287 -1.0653642588827580973 0.41087402933944455752 -0.72946253334756838704;-0.089130199250138861244 -0.7250844371634298513 0.7832948143563183141 0.2848046402662827159 0.15622942074207818441 0.89256522691632111943 -0.84015384398061099258 -0.59873952769698068899 0.45214967165033947971 0.52826130277445249028;-0.83407689737307055822 -0.92984599326156769372 3.1324005979968170266 -0.85076968743286651709 0.0095536536796279689782 0.33360842799817252979 -0.22575831292790271565 0.33241276200148195397 0.55477138982368812137 0.73730352070973081968;0.78077104768421279335 0.38667352925960452037 0.014189681860388053333 1.3119852242530531949 1.4146374233326661773 -0.7132816553779049995 0.77563463886089090149 0.77593710918792835329 0.21711710008276399742 0.51913508432938604287;-0.42758457297249075069 0.24217775530031049325 0.68322467240136330879 0.51900656133585798546 -0.66820788286286081359 -0.53713783318692664981 -0.27138914056143376152 -1.0221067437554498536 0.69590972398644435071 0.12800856809029248495;-0.24573887415947012758 -0.86659013914329774408 -0.41847830384917716895 -0.72915814361070718785 0.69023246054903719671 -0.80544761006973331074 -0.76156552938921873164 -0.51769892092515046311 0.38723301060826242903 0.34104964843378515749;-0.064188041981600982289 -0.14595586679664063201 1.0225386119345110103 0.56260590833062362748 -0.27027747991506867464 0.41860156091211359053 -0.53446927212609096625 -0.75173074846234821944 -0.47899209079896953867 -1.2173748212534380997;0.66838480857889093212 -0.16118029568819092212 0.16282493026223310295 -0.75001309071277133533 -0.89015375903089222209 -0.69875830188675713828 -0.49794225152538756918 0.41803388739002766972 -0.63835370177869676933 1.0415092638588252516;-0.99642897587005885285 0.33346070258793308883 -0.52400546815346760177 -1.3304765839941561367 -0.43740724458449753431 -0.33569937411281064454 -0.26698201079008831993 -0.80942683500226919602 0.86891442324398826536 0.41173512339658197012;0.77967854227266775169 0.0061293390943598889675 0.165704992612325408 1.4005354903701829894 0.86857451171612687357 0.60438728847433209612 -0.56352430330893332755 -0.72425221286630059314 0.38969475920519275336 0.76734688222535818447;-0.027594435749792152468 -0.90709199782644167609 0.12298221422497571109 0.041985446392185238329 0.20120108952490131649 -0.73936332029627827023 -0.33523412482125514167 0.73358418939406677683 0.8674826295127510134 0.82498301601649570713;0.4926515711796041197 -0.32378902572568479812 -0.079581699402943420485 0.80085152163601813768 -0.8964365744186874041 -0.77466932251372677687 0.53121702989683583507 -0.7218484224454779774 0.38961690570574414316 -0.018592012345757989722;-0.98014793511355779998 0.66049022133219215114 2.4253326794374769904 0.44777597570924676518 -0.10309976739209564256 -0.89080138170968592437 0.58778911304837155871 -0.15556989392565748198 0.5575869350587663309 -1.2671969890928691527;0.53928428416785600952 -0.45241479190190458937 -1.3752270653819289592 -3.0850694291117131129 0.54413697182473119707 1.5883235655740766124 0.89193835526915232759 -0.45776574717579204821 -0.051076144494174934019 0.43372622079120165539;1.1094972657356529933 -0.031490510827781294234 -1.4953361098473918478 -1.1341214716787102468 0.31181729903361865563 -0.20895038382267633326 -0.57114885965927242317 0.59199017324960900854 0.12865130223815360311 1.0392620771365554955;0.041010074379443650638 -0.29997353547474048252 -0.016617736456439248516 0.92130777104214767181 0.82279360052549010973 0.59736660371752847709 1.0288933915085902715 0.28717722092992581384 0.38596855988897993406 0.63201292927829000323;0.12694452881104226205 0.62086660691515660471 -0.9519847798292112584 0.77239339527397388174 1.0660898364118216453 -0.57649677230644558179 0.44721260058970574436 0.34651280107915194417 0.2728043632295699128 0.0094101997007262679767];

% Layer 4
b4 = 0.30587633184162332789;
LW4_3 = [-0.62703428102862179827 0.31174159024602071666 1.4703162160728491248 -0.85404523632438655856 -0.31868434733858513885 -1.3987168013478559203 -0.58210940482300677079 -0.36050819455458377183 0.15658121599588370465 0.94858633591393493045 0.43449371070632447633 0.80320972498460296851 0.82026442456829584682 0.49802034397269784316 -0.24614013449042496107 -1.3652738078901773822 -1.5694656115628811133 0.71420115473166090325 -0.27069224513564987822 -0.4340522782276841629];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999945;
y1_step1.xoffset = -2.00000000000019;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
