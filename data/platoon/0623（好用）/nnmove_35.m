function [Y,Xf,Af] = nnmove_35(X,~,~)
%NNMOVE_35 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:04:32.
% 
% [Y] = nnmove_35(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-13.2925490923537;-6.70139767883548;-1.99738196042707];
x1_step1.gain = [0.0638195875959219;0.168202204644631;0.502170423671263];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.9072037841285287563;-3.498305412611361298;-3.2220178425505903164;-2.5672230207883650621;-2.4037933004559004502;2.4246744109737634609;1.8985850662890924045;2.1405526603174265254;-0.55877009796484988779;-1.6269611926857965312;-0.050186006885911932374;-1.1101171823718227749;1.2384107639517107913;1.0351475519093227273;-2.1004170605184380172;2.3959354856933887667;-2.7248844183585028134;-3.7401905000879125396;-3.2430992489359811159;3.6113303618152694519];
IW1_1 = [-1.807244174636383871 3.3705668807155722 -0.99896511180802372021;1.0818892165938773786 2.315183288463751321 2.9547937587572592477;0.89021442802055772425 2.4008629510321894962 -2.6684133221510455414;2.5964440730467872598 -2.0318846800512977424 -1.8906904150465204673;3.2111565567106512553 2.1381408774059065259 1.1114217659589284981;-3.4186827807965891601 0.22875235096903390186 1.4313336936048448589;-0.57329057212388878639 2.8514538283388217721 -1.9552359670571215489;-2.7374628371620386424 2.4235373061205960354 0.75513770321922180084;1.3713709259885424885 -1.0373651597615347608 3.3731402190808452701;1.7855156802177198916 -1.1262196109491167118 -2.4824179567468851459;1.3001112206311136177 0.33866369501854426405 3.4376432428487615489;0.10791236386485221488 3.2598001854429297097 1.9870593491010994924;1.2805864265348982922 -3.6802433097553519659 1.1785359445761931507;6.2310945867452289804 1.5752313893434828351 -0.88568453460641527464;-2.9902751170007237924 0.30885373545273370199 2.4659620180119570243;1.0846582740132166833 -2.9688642181187119284 0.72775401138065320961;-2.9939910610365987331 -2.1022643520838246722 0.60604926775524503579;-4.855042546061145714 -0.91613965542853348367 -2.4425748708700512069;-0.42303076629397606823 -2.764883767278865534 3.0421016062820149806;2.8986066257587994599 2.1669509908006965304 -1.7579316027216216334];

% Layer 2
b2 = [1.4699599985940789981;1.2699102891582851882;-1.0167430747574501826;-0.71607029955135192978;0.19217060539440214417;-0.24966249059256295784;-0.30568357304446047706;-0.84094001092126302588;1.2405048366015702932;1.6377316263609114078];
LW2_1 = [0.070125577511172570988 -0.80735310453662800789 0.31836785755281005184 -0.38174523784120595327 -0.27004114731129130744 -0.41456238618923030304 -0.15887707995061173261 0.119094039149804376 -0.13089409298234205847 0.69636071076795102996 0.15764123425082238183 -0.44062711361251755138 0.53804243430664955294 -1.1734516615179499954 0.25303908959027765491 0.062279332936158358913 0.51710617766679778384 0.48175967592893859104 -0.57704211240489167167 -0.35867409451768611506;0.033637229915627939181 0.32781386186836525276 -0.1758024685890535177 -0.16926959476072009347 0.20868646774587212844 -0.48471691968448038512 -0.16310693479121346483 0.017584110628601483384 -0.15190623457086818715 -0.2048021021111435247 0.14301629242122640417 0.15187857222762307652 -0.47720514698171295764 -0.43662943116640229313 -0.22119763736533346044 0.14301736765151482067 -0.11851545695086605769 -0.11005847593280562724 -0.1048371919804876734 -0.4762263507239832272;0.6541088216739791017 0.54034774399258178601 0.45533701614396576707 0.08180596878161869312 -0.99065138617207237903 -0.0025895026768867207556 -0.032904668356125245376 0.82134591685948576956 -0.5766614598048618312 1.0324842237779969789 -0.28940465163572348661 0.026896587758353605185 0.26847135758336765354 2.4767739389126153249 1.4683419422583672276 0.75490500320257014621 0.46780090290831055633 0.21560399666764573645 0.98622612282017707575 -0.036778573884563618701;0.65641060078289859003 0.33235511121096023013 0.2750869039124416715 -0.13418897560545053893 -0.76710707369315211945 -0.77599217530811714916 -0.040320878626271539069 -0.29309602978383519911 0.61890968687544722915 -0.55455894558191165533 0.10493478082074068902 0.87604497834586614324 0.22954257705640629394 -0.9520558770980918073 0.50189990941377893297 -0.41631437496191198155 0.2231160395639669447 -0.20989766708634732817 0.42194258369175685619 -0.55698284369643347169;0.15840313267521671792 -0.018191418394517860219 0.98892921584107473798 -0.31140630947958813923 0.7364551838236675918 0.72786804036561658648 -0.16498049892251850923 0.40575848383681933917 -0.024644806091225948674 0.98920842398173924881 -0.20159761131504602694 0.17894318061599112646 -0.4071068875593359393 0.82509116960076911429 0.64440039693769723961 0.32529907411789077409 -0.51260667704259088584 -1.2978225420766880127 0.18980602355444650686 -0.67751321993442126246;-0.40135811319654257634 -0.4769049868391662117 -0.39874277093329457688 -0.0029155463973431559703 0.4985905353728535272 0.086463520243489189188 -0.20377879952905267325 0.0024990406076329380047 -0.66077133911255958587 -1.112713199214721449 -0.32643632333878896956 -0.70021540741515575501 -0.23838623232504718708 -0.61171455450026535061 0.6594782180243813352 -0.74638525538604527654 0.11537766493415588243 3.8365818927916484071 -0.098492994120893156973 -0.062690449002848730453;-0.075917836125252421975 -0.63554424007732801538 -0.50108897804911456397 0.2171275430530283379 -0.41417989137508542941 0.084976592933259542662 -0.99398754668188205041 -0.21623382929489795568 -0.26105354100787703242 0.28675781701777491861 -0.016221134565436414604 0.02176008614433790761 0.097761599954217806574 -0.91846103983983207186 0.3005208316793108736 0.50229937040045591345 -0.27499413150339174772 0.049810990613856402642 -0.46987047379540530789 0.34292777256838791189;-0.44583957313570315995 0.21053841049110313954 0.16521121252316894878 -0.46470233589287579523 -0.30153251941963232774 -0.40489320792513594505 -0.092826005078511908408 0.12403903169461796829 -0.12744247130792876743 0.22577847495398517541 -0.41299146872460401614 -0.0082686550988277061902 -0.019783082991944672679 -0.40578797318668635707 0.081823147128140913398 0.35849085236396371901 -0.05666012019380176068 1.5636993690785165878 -0.50021553211030322927 0.53525122839066552327;1.0998922052650796921 0.62527577834935055279 -0.43417616164438105342 -0.26538203308458108154 0.8645593069504377004 0.19489100438125375736 0.34539170006244462874 1.4764510306968723352 0.34827222647410382983 0.94721314406938994512 -0.093404608986971920936 0.10460704965679870626 -0.72778908735094571814 -3.1476681168052729198 -0.44961287023831075782 -0.11412966049227754595 0.67424923822913240823 -0.60183617757040752672 -0.51384322764000789352 -0.81633551742306098564;0.58842389334712186244 -0.036605946522209949212 0.27708294282181333834 -0.27942758756714997093 0.17524495962943001381 -0.086777108031350858042 0.008885417703149522603 -0.41191198727869304808 0.15488291840786677644 0.54874854888377966322 0.26411802431973019356 -0.48087306194022333417 0.29432520081975244164 0.54649392717142764031 -0.53050021810566017066 -0.48865038411021377573 0.14881631655524846236 0.055633204623836335356 0.12414971484936075663 0.28996823414230388227];

% Layer 3
b3 = [2.3384288382217901514;1.867821755112737403;-1.7527911658781154536;1.2457223116824496234;1.4619526459080411929;-0.82022729774027980376;0.47558274427361146852;-0.57488984232479345415;-0.43297499245454951211;0.43947194042280429693;0.30125648609279015444;-0.58566310724307968361;0.53736050801572576852;-0.82588278956306060419;-1.0040115055544194256;1.066591071229769927;-1.3377102851715956255;-1.5419140544121758829;-1.7391924786306267592;1.8032032026434754446];
LW3_2 = [-0.81655280846552746876 0.93273258086259214217 0.71491694807683525692 -0.93817176568458682251 -1.2835211082581887698 0.70153306234660273155 -0.93576172561596271393 -0.22619791505278671884 -1.1858130599478657885 0.037951035027973083202;-0.48086634081421747444 0.60247559373002201877 -1.064149895819372027 0.42637544776674396463 0.18117486803986257438 0.64336930339573017434 0.27070255810814763953 -0.55011684822183370969 0.60082664155319887023 -0.21338834734728265308;0.94835761795773876326 -0.0020665249627628071161 0.93568682193138386083 0.55820770520925777625 1.8145575525269892481 -2.9633345052319479684 -0.95155034331361787459 0.050734963446533831721 1.4924533028060946727 -0.09882663763314571137;-0.84198874135250156847 -0.16294066812968518998 -0.052801410480163180061 -0.41301596338842161416 0.58042608891621594314 0.31380790577850226075 -0.55042115403567515308 -1.4841562521041367084 0.38660983878855081919 0.30581483262198849715;-0.41942787283259491682 0.3376805805768004487 1.5811362583588717268 -2.156165696471479265 0.20407483748136881485 -0.16122722329489475035 -0.64898699709710705452 0.43446005860261988074 -1.9748993169885502574 0.18087111969818334134;0.66708584192697317761 0.70985789570324420161 -0.17473747112526738512 -0.78232273353527670423 0.38046798896650291244 -0.34644923415836903491 -0.75884423280960389135 0.25791381800817014813 1.1089545805323384187 0.07735434739173531471;-0.67187667732567479817 -0.63067184192373326734 0.051199706496338814876 0.96536962592280539663 0.62221949726992298313 0.46935858795313245562 0.50328293548573166394 0.73681934724280695459 -0.50974453671539576849 -0.56271987913069088094;0.89654930813491162667 0.42366794929754941768 0.77647538915341662857 0.67083330763987492062 -0.80961587652881872312 0.33447683972607417102 -0.053541240198288549135 -0.5159192552823178568 0.88797896016157473742 0.38908831227152024246;0.07100967152990421416 0.40083796830306334114 1.2261858997933918758 0.50744130239017282147 -0.6936934818262309177 0.68711486939705801458 -0.92084248295015069807 0.85724477987151359581 -0.53038905926508472799 0.26737999316262334171;0.15502743213012579182 0.72410926719321189182 0.94576527078974770291 0.58311183013521150631 0.51864706580051278539 -0.61895945999257828696 -0.013232332628374922703 -0.11703111300260907179 2.1283918505108205821 0.26014198062503024467;0.50739790985851984662 -1.0852743927862955609 -0.33044044996039773077 -0.78349143985867597539 0.47418853119051657119 -0.14811929427444120444 -0.13834309651146695086 0.41559999449434636976 -0.94650983422564827219 -0.45100237595323788842;0.01282574648565826779 -0.46635001224381433804 0.53680091771778504217 0.45374545873991656286 -0.76540786367294888493 -0.74875415070405293427 -0.25982381913335911294 1.2843389551409274407 0.24094191650183754971 -0.5556671034367998141;0.0093110251264644488395 0.058685948684549592291 -0.53101773159509402245 0.6608434843971883188 0.39745254117176048725 0.27345876591335421812 -1.3109751987282798336 0.38575014390434253508 -0.38691303413042088533 0.86343179264255276451;-0.96109888155051392822 0.58652235248687645264 1.3383979101621525931 -0.59886309917307600781 0.53853736232749549462 -0.77999289953299222322 -0.75280158092951532378 0.38008344602518651101 0.74080369851666405534 -0.33870462695618630544;-0.75712563135097654676 0.35595943077598823923 0.13732608641056071042 -0.22522660389074730669 -0.70816229457789481305 0.39269739622796800971 0.57532642036028625032 0.81157391823141278309 0.014849827453572581742 -0.5568976500927191875;0.89414312614677204927 0.32504692111398486576 0.065315228256510191041 0.40406841346194471987 0.39100341810616268123 0.88479674540810360206 0.18696681203346357525 0.73298470534006809896 -0.5232109227331193102 1.0097442805873086957;-0.2876115912955058973 -0.91769625961618550569 -0.20201056636427888735 0.2573614591655233319 0.88555420199321333019 -0.87492798254928905166 0.12166573770597384485 -0.26727234645108144395 -0.82879475790874068686 -0.26685332837468728195;-0.81738128129185949611 0.29751160843219853769 0.89661381017794561377 0.32576488511884388322 0.64804609057753592705 0.37136419584498758795 -0.67781210931990776292 -0.95469590046588703736 0.65415971937976080675 0.90207946215163026249;-0.18212956653288292497 -0.72466724451191011358 -0.90238569388006339977 0.28024601363383883079 0.45378577159102428951 -0.61013784540916093935 -0.67507020958949792711 -0.17019745789746351661 0.59877122983664010647 -0.84103092511518073859;0.56775380360532423651 0.69694953790251901182 0.66119799977717441664 -0.53806156787466563607 -0.52453475706637842091 -0.10755978820700226595 0.30586948229131627475 0.616852845674535466 1.0534564423912144981 -0.81967737638982829385];

% Layer 4
b4 = -0.45768812813960946251;
LW4_3 = [1.0219838503882869851 0.17319973149049083805 1.1405637509076007596 -0.4060972986127652784 1.0774022289297935373 0.17662565878576569345 0.32012078677477623367 0.55573549723176096649 -0.79711035132360608113 -1.1887985757792822739 -0.67474934117486717877 0.63960575619470450004 -0.19878989763188106843 0.62131370094107418733 -0.62690436489179124369 0.32905425306986640921 0.092802515188820836056 -0.8783766469558120793 0.15021364619664612228 -0.29600661027500885236];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999945;
y1_step1.xoffset = -2.00000000000019;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
