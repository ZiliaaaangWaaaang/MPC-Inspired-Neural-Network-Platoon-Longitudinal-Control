function [Y,Xf,Af] = nnmove_36(X,~,~)
%NNMOVE_36 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:04:34.
% 
% [Y] = nnmove_36(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-13.2925490923537;-6.70139767883548;-1.99738196042707];
x1_step1.gain = [0.0638195875959219;0.168202204644631;0.502170423671263];
x1_step1.ymin = -1;

% Layer 1
b1 = [-3.6430944053978024932;3.5777642155800561952;3.5652016738068197377;-2.8294642363730977408;2.4086643671406577916;-1.4068182112512110926;-1.9989142706671199079;-0.80370975912674169628;-1.0207818011290534788;-0.48776434948035130024;-0.66581684829587639562;0.62524748434228338834;1.0401101629152147421;0.93014735721551144998;-2.0706549391069546395;2.563249380173958869;3.0652846967519535859;3.1210439183022118392;3.8862831910674384694;4.0754042361029965136];
IW1_1 = [2.9277179208218733208 -0.6361873216367400774 -2.5217920484833036276;-0.18793274517498084752 -2.0553637505595214741 -3.3158942183707060813;-0.013644786700119471839 -2.0799226669707300275 2.6513020267333144986;1.2271323733494494679 -3.3410780517900833253 -0.94481526652556280244;-1.5446916996890982521 -0.14276293976570852973 -3.4552882549251995314;0.5938427118738422994 3.4705447661489863265 2.4858211595753023637;3.8639164294169225933 -1.5487134664070618673 1.2309365454571701282;3.0057243552983492485 2.5848197478954126893 1.2521851141671265228;1.6447883065576698325 0.38318456951241586239 -2.7278675246166859125;2.4412038053174942576 -2.6570486111527320539 1.5155723226292283634;-2.7812842449761925323 2.1678428544364054531 -1.1893577138785351721;3.160971116630157951 2.1547328888321959361 0.99705232342862282202;1.7796886204009012555 -2.7224527042701414103 2.18162826249419739;4.9321143124494462029 1.2366199184495909602 -0.37467851454308015446;-1.2404056087888610804 -0.83658876605908516488 -3.4694719491543053458;1.8953401388666899496 -2.5823428690198095836 1.0333029525206576249;2.2260638826186842643 2.9942168898656755793 -0.65452762802367736583;1.0158411934117668185 3.0015509987783524082 1.6764448942643237483;2.7516145695831943918 -1.6382969583342081865 -0.60330563174263518444;2.1362071505837403329 2.1871104350247678738 1.4822789842187402698];

% Layer 2
b2 = [1.4939273153828784846;-1.1866912640098019605;0.57411639583868057102;-0.68382129543536285254;0.16223593802536476205;-0.51424491824022611208;-0.4495549328406691636;-1.0023710837281754049;-1.1527326593302520408;-1.5419673418915611496];
LW2_1 = [-0.2376256083219583648 0.39058330122608470036 0.28029537853321867535 -0.34601245798076696314 0.28319453907867198073 -0.064825887194199113828 -0.40100507547551944576 0.4278501270884217389 -0.16218597436415480018 0.38538857607281440387 -0.2725133185298361238 0.95216972243129094355 -0.30307533125703450816 -1.0157307771559271892 -1.0523954355590061649 0.33197154735505401968 -0.30397963074401707084 0.41295082534792426632 -0.54349183861774452708 -0.24193835283615852672;0.69571878961386457441 0.10779912320668062764 0.12946202942289897209 -0.78775070437118854816 -0.49034372463344844117 -0.23658460035119641129 -0.81544082432680331518 0.3818196442622779907 0.24227731746099467891 0.17284736424564392521 -0.53026083549014513263 0.47518830552438567905 -0.19780297763312670867 -1.1679827500530626239 -0.53082509097299024337 0.62587128377376111121 -0.2692617025083898219 0.30560308607506203593 0.094417760266637104638 -0.011966931871465108506;-0.15373841659160789042 -0.27586558963354518292 -0.11640802715487842678 0.31413758054160478839 -0.30618638298719580426 0.71425693451740335238 1.2280171129775161454 0.80000774906388194552 0.13709868942527564384 -0.056431089167089949765 0.030647272035045844407 -0.68680156247051171725 0.6346796868955132398 0.12257344295366490172 -0.60623453183177045123 0.098696864119504262858 -0.34199690081992067947 0.16160070766609974102 0.4269087133269219847 -0.68082675283822113865;0.22496998577365492911 0.58805798288691513154 0.20720634958107292389 -0.7872295896326075848 -0.0336833834074947297 -0.77055705648517980322 1.0736238243864697495 0.59420260693803939045 0.13934789759725052516 -0.14609807715603342904 0.36210071802341731173 0.24349575450891519646 -0.067822318270593401346 1.1333544172695344532 -0.1460279533821006448 0.075975882015210688403 -0.31989159597946142943 0.20486718851410096187 -0.21660719262011318698 0.070937853952686133474;-0.14644934670676976185 -0.018006980502303177039 0.49491508269291073496 0.35849110043408877191 -0.92053644953946556218 0.37435921072939776222 1.0271388006207484711 -0.60087503053555846311 0.89486042147753463993 0.14892524425615705219 -0.39034918771159171635 0.13502816476349424613 -0.46515825813185629478 0.59831223493371665789 0.19586705262262460447 -0.085737784074972456239 0.89481628242530653061 0.075424406958097517384 -0.37048482266415178055 -0.086055892339578471395;0.1173415117546350861 0.043373097191936736683 -0.39200048016727245814 -0.036345533907361574077 0.15966238241966232425 -0.62034920748374333677 -1.5558451051455954861 0.64344147004245921817 0.27502549945104670659 0.241347255227192109 -0.077485122969490130562 0.29001045652391493901 0.44662351327242888477 -1.2713013764160172592 -0.072902546593801936803 0.34737967321116319797 -0.3433987361057476706 -0.28367937910926116496 0.31008647375275977254 -0.12419836911341658459;-0.5836338239863191335 -0.12421925873040752519 -0.56830035947391999152 -0.84079306091772743059 -1.2618833820385393363 0.46169592123334562972 -1.6571884472507827368 -1.0056525123224693274 -0.22122405028447969522 0.62754030590313814031 0.04252793628022993877 -0.62532314582430126304 0.27092300136483077333 -1.8939499576015010884 -0.2460336408581061951 -0.69526686726075437317 -0.6299081166496924844 0.040247067521780643951 -0.79765782753897118695 0.50962399671813007895;-0.10751620984517051838 0.26413386846585590328 0.55436816805595034996 0.60082748907234639901 0.080877255328312455673 0.11196718176788253429 -0.8242566115320457687 0.51950872806954295768 0.34163876881192772883 -0.83086386985448867915 -0.17083612686600901931 0.37869704218264033102 -0.59198494891403852236 1.761111576033781434 0.21944428982047603505 0.35146756602177292583 -0.33496601970179706864 0.28311692897139834058 -0.42325422079618885141 -0.27883911718431292348;-0.39923176351381389759 0.63652185006127615097 -1.0844126215108729205 0.46623151433097503871 0.046923285335289242892 -0.24590512754415289054 -0.76378718103799048134 -0.036353625493578442529 0.66380354834917465467 -0.64673944727175958214 0.5395819793805739506 -0.092311276018668605992 0.51107357864918889767 0.098609956382192165414 0.60792786639874041299 0.29751072265093614355 -0.1744574905667140019 -0.55661370406981269809 -0.76724091184519216391 0.050291596096129674576;-0.099650968725988622876 -0.47253834212766876455 0.23566295052298322221 -0.017844977874177523486 -0.81135451044111828178 -0.2240298723613381171 1.1043780683944435239 0.87737670258741340401 -0.50493982552833349686 0.33467352248909143508 0.15310249103018791494 -0.040284322857729759626 -0.20731445783861787713 0.41883026339670398341 0.36489104424784135627 -0.25631328537438818893 0.44738963279418497709 0.47032960759593839262 0.081712926325884518985 0.37503581428116378182];

% Layer 3
b3 = [-1.9290934104398531623;1.6225332796980362904;-1.2423082241364951095;-1.3760688439686052931;-0.88811266637043007055;-1.1382883066196467503;-0.56064164369939761823;-0.78093606101087065241;-0.41408573540773835342;0.17516752030481536062;0.27094896013280650449;-0.28341521467255142985;0.76855894398812740764;0.45350867816968459811;-0.76111921024729745078;-1.2566550347274907384;0.86372247395180268281;1.4986818445142537914;-1.6858467333758393458;-2.1233648381545320305];
LW3_2 = [0.66185367918991822034 0.64031098708493172644 0.59992776072274078825 -0.62013860613793914123 0.79562550448285551674 -0.33484463401146979944 0.47112275723018509632 -0.54280421900759401321 0.7718767528814162171 0.64521224556403122818;-0.38926927571167996289 0.73053359467803691274 0.28960791917064421241 0.19267595660376804489 0.76934440458590169776 0.85562390848644698238 -0.35778843861919507052 -1.1750673959799675661 -0.083573235290459832458 0.59450559054699059214;0.00094494439922561824629 -0.66300331650543531392 -0.32828728731977990796 -0.25999166190934297482 0.53375362336929432772 0.96387645876450778193 1.0562950907124804001 -1.1651700315782225204 0.98630974736463283836 -0.64258129551368881049;0.10914556495520272295 0.4923917229339033752 0.14953873276948473348 0.52126175076497749394 -0.63629416687120887719 0.63624588729905895423 0.69982828799345841997 -0.72771295119756929104 -0.43352040622323234631 0.55011280910989068804;0.78001487692669391194 0.054921635305394213289 0.187015694813263883 0.15727325432809052819 -0.70195474601344276522 1.028210751937676859 0.14755089869179199846 -1.2449956545300799871 -0.12669426264468067189 -0.74559146898138217718;0.72677692588469566815 -0.86402263631291975621 0.40119757568785890944 0.94166210791188598161 0.51197527963973699094 0.29363781433891633643 -0.48514445105500220157 1.1382068176369282142 0.22513106165423016347 -0.38537512835207904383;0.71408999008702933597 -0.35938305216723603897 -1.0392901828779632645 -0.48176790116661571961 -0.15340191768799835148 -0.11186541325254983903 -0.30555215409003039229 1.0291218847677032766 0.70793953219097904839 -0.16825281445940404312;-0.1037709638930893602 0.45711101683320365385 0.33483837632445423438 -0.43893401477394539123 0.69005953879459314138 0.63058956690215750562 0.74562444556187723599 -0.18346274123899847242 -0.7436554470748119039 0.20779043601685781573;0.4476064465810292714 -0.38769843334743997465 -1.1087774851962322042 0.42022654950387505757 -0.80263475197379785531 -0.83411570996345352214 -0.52242161357809091538 0.23568994022404718414 0.8242113866130631461 -0.24413898612455664505;0.12340250229056511089 -1.1442526996615010049 0.49400029791037702864 0.63332167147982754152 0.55914895427065558486 -0.43341898511699888941 -2.3998028385810057372 0.60778009179966174802 0.066013060815071022969 1.6491512578993055005;0.158402660962090297 -0.48409364013757827383 0.86301410615153062444 -0.29457891542988606792 -0.93393624767932159614 -0.95587472684094054731 0.34487327517515886655 0.58489997402549431804 -0.057002489740826063624 -0.40257382039818895292;-0.34094873258886287948 1.3445995827415211377 -0.13286330359721931771 -0.46807910490975013218 0.47750370320149637671 0.89668218666854648813 -0.26242519621923410256 0.2702443464606745227 -0.31739296030443692187 -0.55721436316896244545;1.7629708495712181904 0.78247138410258243457 -0.56442374476461620869 -0.79992165039891283129 -0.35241880848716705676 0.99157576641088285285 1.1075239470269901965 -1.2088620776361604925 0.17274191077759695756 0.39231946770358977483;0.10605839810797210165 0.43780014516285592485 -0.059717052445540846906 -0.032926380647309821947 -1.0976565444854469167 0.28621815790038707128 -0.61671131920693700312 -1.4552852875178556857 0.057599586308342429208 -0.24418505342216720311;-0.91406115070104188014 0.83198901780997447375 -0.14547234557287455625 -0.57978582696828639964 -0.48694544403326978088 -0.55280379700900750262 0.53252815905743622338 0.19592986797081399231 0.35774569859564686602 -0.9031650442535691381;-0.23381969887056441859 0.71678927779369594475 0.25028895924958260988 0.36158732824287592722 -0.59311399290448918453 -0.68854490198856410643 0.62242229886569688802 0.88308856341276054103 -0.45315933912327405197 -0.47083752201614509358;-0.05284078647289892211 -0.28039568043002344178 -0.92398859549198131269 -0.60253036732677534015 -0.96661793828937225825 -0.99586958438762906987 0.76047091927162890901 0.3739141244006309317 0.4794923512963603085 0.20004071029742589993;0.4408866129944510881 0.33887886407750866802 -0.49111180376177560047 0.050593699743520292866 -0.49562073999406613956 -0.80723658698881850526 0.37098877146020942108 -0.15813938033915853065 -1.0628184896802366222 -0.90758756781707783379;-0.59194614630630371099 -0.47143083125017998247 0.11097118325114571635 -0.78028086540018659623 0.47329362510292294353 0.38788396857422297037 -0.43935345256993096896 0.53020974581239288526 0.42975979207315756492 0.6586448710763489478;-1.0189030170926982599 -0.52742004830344912936 -0.33528211718209977033 -0.87585690880752786747 0.51562143373214353037 -0.17405988529676127974 0.71045953614844881141 -0.26882077631049089428 0.42292080055142022843 -0.0021363378331781470061];

% Layer 4
b4 = -0.14822603793747887724;
LW4_3 = [-0.50830974553324459464 -0.23845239541641058412 -0.4063146781257535034 -0.10424265610915825486 0.32267930444256570643 -1.2715586999683099467 0.46816172793090371496 0.050159547769359269509 -0.27682008132036101111 1.1843079667161386936 0.23498321692913140546 0.16950619411051690011 -1.1527288454846613686 0.34078120645964887769 0.27876945567637162471 -0.36816904748982831608 -0.43685044073278511689 -0.21403885882683953978 0.43948701012640101204 -0.22172212601167956558];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999945;
y1_step1.xoffset = -2.00000000000019;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
