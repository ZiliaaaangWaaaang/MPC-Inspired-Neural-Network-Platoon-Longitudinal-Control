function [Y,Xf,Af] = nnmove_46(X,~,~)
%NNMOVE_46 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:04:47.
% 
% [Y] = nnmove_46(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.70139767883548;-1.99738196042707];
x1_step1.gain = [0.053913604005474;0.149967019141203;0.50069484362843];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.617300763513517925;3.6312789407236816253;2.9053063682199606887;-3.4223016519968698645;-2.1199584007504319594;1.5757583108303023778;1.0980961174378200962;0.78556827091093750504;0.98838820937046800719;0.26681236012822928672;0.61780712663786541139;0.54041985426886551824;-1.1185612937934517053;1.3572691868046828922;-1.8376069895881461669;-2.5760516818128982308;2.0989453939871656196;-2.4662495666512671555;-3.689589945281773975;-3.7091030459896217053];
IW1_1 = [-0.006838830533054694738 3.3923912602052790355 2.0624760781541171539;-0.53032920260922200573 -2.2674979485804067636 -2.9213826077190292452;-2.3853948475981674449 2.2835120170816178842 -1.5404995950759121648;2.7754049764512336296 -0.14948265426628465358 3.2143757632137801572;0.2669377989362536896 4.0334196981706229579 -0.49297591273324636862;-3.4661606510777787094 1.3064240725632738638 2.48636138849510413;-0.64926905872785667384 -2.486097104211707709 2.6951902423690183852;-1.8535800192463074421 2.883170528684539935 -1.6306812040487745907;0.24893199159223428074 3.5124060513043704468 0.33937505406099188754;-2.106907942313267057 -2.0658252127703020662 -2.1521990188563515645;0.80937883130993926173 -3.1540039307381557698 -2.1391286907459283739;1.4180628225972720102 3.2732458459708735354 -1.451749347630346243;-5.2436588275674251847 -1.423095567809401496 -0.71333655172560272995;2.0343841348577065276 2.318161931445783086 1.8878103677201323318;0.21521343198103451422 1.314386542013079584 3.5197875853839262206;-2.7928187443327079365 0.35572569129554892919 3.1384805074023374161;4.3319694552610057414 1.9476846342771065856 -2.3822729973705345508;-4.076176724237828175 -0.88171968555669533174 -1.883256069916176223;-2.3027703584505241352 2.7756151031455753575 0.12280090202117133202;-0.48226416629801643898 0.91602105728949501096 3.7594870048415609531];

% Layer 2
b2 = [1.5222247996371816026;1.3048384013548253169;-1.5125476218884397195;-0.62432617588160777;-0.50495950176497306217;-0.099501141771994275342;0.56851522140566856933;0.86300210212483152716;1.3575481967259281912;-1.4665004773166545604];
LW2_1 = [-0.63565990740689337635 -0.4600793569055762755 0.55626403920877420806 0.26330801190066255302 -0.11749946643754262399 0.77908949315830944293 -0.17035105577614581551 0.39650106821208558339 0.2900955367544676422 -0.18968026739935572866 -0.71839583754164682006 -0.19058558709921302743 0.73975986237539148593 0.086568043775804306983 0.24053806193681012693 0.04713386357210568034 0.40874540145431365046 -0.33867549686580122881 0.62196426369665913647 -0.12688725127283798089;-0.14210170662035767619 -0.36493597696234220118 0.21641490338486121803 -0.32815433530783494342 -0.61440116428568181117 -0.11969108346762297179 -0.009110669226604937998 -0.27481556138633667086 0.21881937820737903944 -0.1564685940171391676 0.63215769286042977626 -0.34959061781151268278 0.0001575354999572460557 -0.33374427237165593674 0.14501991093254085197 -0.12928939646577422562 0.79331917605482382694 -0.32417799058398405476 -0.66759831901732458181 -0.63937381623018074706;-0.27790549326919861128 -0.43911581152997047894 -1.5487326264216676464 1.8393024720366588642 0.067865240219105643638 -2.0892430979240397271 0.033226667798656170372 0.48008229419020165274 0.21093426734202314066 -0.40936858069308129648 0.37010836020881643371 0.00023021374886564478779 -2.6862723801433476822 0.9636086035808971717 0.16595611215919239823 -1.8216211250632057261 2.9546429455758054239 -0.36927386580686233364 0.36002559850160187338 -0.026099962383082566525;0.32432604038776197131 -0.21256132745817271634 -0.35916255123290502516 -0.63768772948736285322 1.0481251431726970047 0.24375956871307946638 -0.81866853052227095411 0.037406507557519882989 0.010563597858103030563 -0.15553459076814482587 -0.35557266008035920413 -0.072405455475073585148 0.84526307581227588805 0.0079195853976715899214 -0.60339945269946670958 0.21776706686310179362 0.17396430397570150639 -0.8389527133170886497 0.32451487541744516996 -0.098317335388176482769;-0.038507888127604021633 -0.90888665338497343082 0.44089253522285132281 0.11337476385339927132 -0.15121796074022697542 -0.37859957542812316955 -0.50440660551168436943 0.21270781835815327776 0.68097002201837864011 0.56091525907267258955 -0.35704359184608702726 0.65144400177419414799 -1.1260890311039795098 0.34253563907853040726 -0.0015741669432147858965 0.047542576848542114631 0.24707933612813268165 -0.58022881504878076608 0.095460954371300185684 0.84952834039053037873;0.11439841999922090165 0.14374387659855220045 0.63671863762331792902 0.33117450328129904857 -0.18362763598900977424 0.067581733703622220988 0.25183149125493209386 -0.17710086726469484453 0.90202127691337197213 0.20537210314289244817 -0.67861107741006754246 -0.36108986113807073348 -0.78464338964389657161 -0.13737891846862027023 -0.018498128272982992948 0.25654077936293639972 -0.32109588375759179346 -0.37627495188933468562 -0.37813905156197302748 0.50382410280595824048;0.22032037718702840445 -0.37789355259928752995 1.0677877049692143796 -1.5022273519899271843 0.10328755839526833349 -0.17717832541937739155 0.46148924888574494041 -0.56824029742043968838 -0.43752348851103156635 0.022382466163741499693 0.14949589739196020299 0.84305992185390798976 0.062380969571318278799 0.055168119728674462621 -0.08083301148665036906 0.58693940441697334265 -1.2248919694456763541 0.17836575989545075394 0.024909799574213853379 -0.36374598371877076008;0.39574504904444679498 -0.22815093445007300632 0.34743138717598393006 -0.39487360671057886163 0.064404037236791902843 0.085035375534712159817 0.19775191925956464578 0.081421504415956552636 -0.072137550766848537731 0.16530269499766350738 0.30963041625720000294 -0.42841197129971336777 0.049373108900485566941 0.24950709133995158107 -0.80114142390077869305 0.33489309845799741794 0.92197416800733178466 0.35813732763119332514 -0.10630604549525086988 -0.45666878202141802934;0.13341190651453407878 -0.091027394095799088469 0.14898794579875265787 -0.30143959537269360283 0.12501042017834218534 0.50451560177257726014 -0.022813304486648720848 0.48016068477796913783 -0.48538427724230992499 -0.45933764263981863296 -0.39378616456216775088 -0.32610527791790333563 -0.27340708781905165292 0.18871330066310670892 -0.31328739924746662471 -0.36327031789394254035 -0.019384355651550725513 -0.11065235573830806137 -0.74658147136055064141 -0.479210939131158975;-0.59599464790321132757 0.69974239437948393405 0.44822041750071633937 -0.35120984037760433205 -0.39567597418546562871 -1.5834525614608629951 0.081879858795683796435 -0.15083520722097809585 -0.18228723676037716928 0.84534676048892032352 -0.178002907249762643 0.15017697047977937586 -1.9977090417942504619 0.65036952692383864782 -0.42262090679291108852 0.28951902705698584484 -0.96170845802371707212 -1.3426559457727074154 0.16275050550975542207 -0.18055865539887716587];

% Layer 3
b3 = [1.9771739756825459366;-1.9046326901870846982;1.5400643103234126219;1.3444473649399228954;1.2556174195032829832;1.1044160367843756099;0.57041915370946527641;0.32158739903199318189;0.25551701238783469661;-0.077356936644127086145;-0.14082709038450388905;0.12718754962276596077;0.25038999479702372941;-0.80803218921308650469;-0.92861775257319201238;1.1385958986999846765;1.3437376716384423769;-1.7417797325811879006;1.7559342744686141646;-1.5721159925487737663];
LW3_2 = [-0.0084868367975555192295 0.74192739844915267522 -0.17693951406184754704 -0.79563737377024201791 0.71543309588527426168 -0.75715737808492544758 0.23447033509031006693 -0.67507609412033842133 0.7320057793659305867 -0.44852641394203845993;0.022148307242474119666 0.093222385335597568456 -2.532069653792567987 -1.0805279076646159275 0.28410154227421846596 1.2020481139939243054 1.6421950378640437496 -0.87632280432442744011 0.025658378115930465663 1.5159165329819839219;-0.68978327414853601862 -0.27405447378382075119 0.062574257545725001095 0.72298576267775482851 0.94970983361496508213 0.79578996916481647972 0.42177226995130956411 0.51571902925513313232 0.80166525815196043592 -0.3942338513091420138;-0.64969220668906046967 0.25467316397965333863 0.007365125550742656485 0.84248147608901324812 -0.15025573193958707829 -0.92641889263453636172 0.51356764450048297821 -0.15248181679181477266 -0.70190235688366242606 0.43667480589311841177;-0.13040691044363128537 0.7619532547218293983 0.73308338532229910811 0.39252300863890488003 -1.0185228069699969744 -0.40055443421171138541 0.56257573507890490383 -0.52111235176978853989 0.76723608984933167054 -0.80337995244405513429;0.36663742705092983165 0.7791991620927868345 0.46943014977700037171 0.4662795825859640253 -0.62671168949887878785 0.20769917847029042979 -0.69960015103995565333 0.1436721984270710184 -0.64516793290877982869 -1.2299857525899358102;-0.89958398316475829404 -0.36642497910193316812 -0.34285351513865131023 0.41574160674175308916 -0.2031228300763872896 -0.71922033188706735451 -0.042719488631188691496 0.69818277850034715648 -0.67634612957891437901 0.84432266129712485458;-1.1241433651872529964 0.26328301494780398384 -0.083505632758909112412 0.37933778050820737837 0.20256777860820576742 -0.6973334124164373149 0.36391515408902713746 -0.41794983843846211791 -0.54242343707369444772 1.1120546579174499513;-0.20501752911803286517 0.79290801587998926969 0.32706138366056725086 0.89815267775285234642 -1.242617282302242776 0.84132285406325668653 -0.51836495308233498935 -0.35314280050413632273 0.85367793620911813779 0.14234035885206164362;-0.23597236905311286259 -0.93415225234950227673 -0.55744404448933726481 -0.73339980550357897204 -0.50616622160860769153 -0.13673746419259460994 0.80064458875872968058 0.70493303966511577929 -0.24658735820045077358 1.0138266722441049428;-1.4019693485021886836 -0.24784261457815154328 0.56863380435347476993 0.38614605724157352595 -0.32574177599390713445 -1.0577658207755658015 1.0184063186062957129 0.027483446714922012133 -0.24771007489392529721 0.83036787933223654701;0.61381730894914554586 -0.32925499666528623699 0.45152140269535706585 0.70053936492639035105 0.26873608142271626642 -0.55743542633758413896 0.38673133676344528808 -1.1060575497481295315 0.10436450436381244922 -0.3600275541900562204;0.16253970130236131131 -0.74340945048507811599 0.54496519766656015271 -0.93798066078266362222 0.50701698778450210447 -0.93587790403369952585 0.62585962217912260996 -0.61362836351083283049 -0.82656874457988427363 -0.51909779302145719893;-0.84878963796729289815 -0.67209679826439605588 0.066097317788627540924 0.37092285932146906724 0.41026932582076708345 0.98926292221943734617 -0.062155119848269858862 0.73209377295560940091 -0.56398160308788647388 -0.53900453247335733398;-0.75509689483870978677 0.0037533962835441846487 0.82782098457714836659 0.6340511635804894075 0.22529379144831912507 -1.1167327260988584303 0.34433274737235197716 -0.028071128612566456639 -0.60327560504713262368 -0.072703616131648760024;0.64851703595808429803 0.99741236249178766293 -0.59961022766607963153 0.11291030783916436442 0.43730069945410871002 -0.31532723885167984745 0.35944261802377824866 0.049512776225712373801 0.59245616907847675758 1.0260188118856643502;0.37312904349080655564 -0.77649008246042205972 -0.89846258885858465426 0.30402226591256992227 -0.32372453518230803748 -0.9805972682723430589 -0.073908327469169879387 -0.90468660458404470681 -0.77480141280479342125 -0.72389882368302671534;-0.3358149641664832652 -0.13074224028571479472 -2.5481667317506602188 1.2425524904480222954 0.88033022670655236563 -1.1530847605508010023 -0.94257655705976872706 -0.029791637713685925615 0.38970401826976280857 -1.4910712350036137153;0.27341777883332563093 -0.45517940303113396672 -0.28886341869844972541 -0.93605455018824534896 -0.43008887891496472289 -0.050190018054293031313 -0.14576124159077832876 0.81556192123191639798 -0.60616806736157635704 0.89868802858813789936;-0.18487848763944270125 0.98985543064690806325 -0.093061374661877610537 -0.18376271782211425765 -0.49327244123518626528 0.22079602727527725126 -1.0327423411807559184 1.0168444505162261837 -0.042987601920620198415 -1.2794582181508311614];

% Layer 4
b4 = -0.42103793262202493519;
LW4_3 = [-0.83407606366594233549 -1.3003486670747641529 0.67595996487787168849 0.097105161257172611933 -0.74282903458845661593 -0.4579488298693774051 -0.23282774322025565072 -0.66267391072670900343 -0.96433689952469037188 0.3902962788778266412 0.49100221332923438267 0.45099838028552180491 -0.75513737610911912945 -0.76829917242563816604 -0.047213208034474964114 -0.17795513447156277587 -0.067706967893574401818 -1.3344046904105872908 0.00046717477832834003459 0.31439190052947985077];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999934;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
