function [Y,Xf,Af] = nnmove_48(X,~,~)
%NNMOVE_48 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:04:50.
% 
% [Y] = nnmove_48(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.70139767883548;-1.99738196042707];
x1_step1.gain = [0.053913604005474;0.149967019141203;0.50069484362843];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.545887106261675914;-3.7187078612904094221;3.9273041819096432548;1.8912307790090150394;1.5523398367199485737;2.3609573340438236855;-1.2841688970614895116;-1.2059541800619419938;-0.45045123701613287714;0.064619858741767788324;-0.30007716992631960906;-0.11895289945269243992;2.4100207562703594988;0.12393667320396903331;2.4570296562017057695;3.2607373119220119939;-2.9489485106695445538;-2.8914139048628753059;-4.5047162688277238018;-4.0728054449429667017];
IW1_1 = [-3.5986167850362216214 1.8085681072204282671 1.0352720637782693025;1.1264998687392862031 1.5075972275941809109 3.0271568823099719303;-0.55308507234587667156 -2.7791830374482420218 3.8128041234178664531;-0.83100040281306331025 -2.3646094937865536068 2.895224379654933955;-1.7879262627514451722 3.2453666977984512165 -0.83672272098367328486;-3.574102123611703874 0.64496234091106907638 0.63428573094808449184;3.8808581943117133051 -0.018133082073160652903 -0.61326031024682547965;1.9892806571097467749 -1.9937045441840408611 3.084562788916115128;-2.9916526494938291414 1.3374207163202307402 -1.8625490569507772154;-0.34736012817305678135 3.4799383143241984229 1.9991873161787854229;2.1023499331015331748 2.2795620840246848537 1.2263618364621140522;-2.9626284035352763446 1.8942553571601390416 1.1274921098478700721;2.0015194982396922185 0.67250651970084751596 -2.5572317122127996569;5.1928906985072966762 1.0455042294788443602 -0.38482933962393989225;2.6307038499082899818 2.4352406563293187425 1.3784034135781753072;1.3598385706241258308 2.4316740090760875503 -1.5642793606343068369;-0.5740210922717912112 -2.5454008699347703271 -2.2910888955656139032;-2.11870943520376942 -3.4377462743797981837 -0.47448623165211578634;-0.70537977978662536049 -3.1263600826410469224 -0.08369252557345108201;-0.53128178455873387165 -2.7879540893823184788 -2.1262741359241865702];

% Layer 2
b2 = [-1.2049291845436960191;-0.87569281747455118836;1.1303008305934083566;0.62159146099321060941;0.21770387879065017378;0.39111392920304438592;0.47334209387756448484;-1.2298286095539334717;-1.1789980205548635794;1.6312462579574560362];
LW2_1 = [0.85139826838867582737 0.72390605700182675264 0.076898025877056533361 -1.2120832883538710245 -0.88320864261675946505 -0.56123299146663829795 -0.41232782115964761172 -0.13885107758598957961 0.38972685710449822549 -0.20103402131587674861 1.2604965609520937253 -0.46039976088906042762 0.73533889340883440422 3.3622287572080562512 -0.5301194118421678203 -1.2127438987546843574 -0.72247348983259496169 -0.35445210845176089443 -0.96514752295504113722 0.14588590762323483396;0.48799562399086438003 0.39108063594220499049 0.52516173577396962902 0.14992573152392379976 -0.51013439240950841924 -0.34244457928694532756 2.2128732491642342239 -0.1064460327936888745 1.1396107885364248347 0.34035287956780058138 0.22121634262758793632 -0.61412026790085350036 0.58682860165065409142 0.99760723780317517306 1.0904218443501121349 -0.035579082444294113374 -0.18979793896888502713 -0.15506489198791048589 0.22660702271715940648 -1.0935953281600034881;0.22034141108699650813 0.99871675438327323082 1.8621548897128772371 0.35623955786544703184 -0.66660858649021981215 -0.47508114252868444138 -0.17111098354240045216 -1.3594273415133297789 0.72971633131903712588 0.025964821859012464367 0.30677828925356870338 0.86653243582492356367 -0.79779250567670723093 0.82231088439717359151 -0.28199183933458882301 -0.68009827908843656363 0.17991301033568721235 -0.29729292000069401647 -0.095267860825578615236 -0.20508523670896530722;-0.80224625528584325718 -0.61482332357278601798 -0.86482124967811491167 -0.02767231279353982859 0.68028433808558586016 -0.51478637671461213721 0.20638253518398066988 0.10758432553224249462 -0.4199120768360107836 0.22309433780774082234 0.56580828633992008569 0.12127822479592133276 -0.57103700960876724313 -0.0035428045499375495839 0.60234019530535409803 0.6230733577134329737 -0.63975709457329088536 -0.15159770653515922123 -0.80000425681211451145 0.46626123130813434958;0.80574220690323350436 -0.35846985930049246605 0.96959405723028546653 0.83817048315590159113 -0.22916057146628140972 0.18481149632543608652 0.53377049102178875106 -0.53210331269030963774 0.44649431041485243554 1.9809513685957755857 0.25415237910718835312 1.2863273564838522134 0.49040331387879121383 -1.0494263804816776897 -1.1164856231324280511 -0.1267375096376337773 0.2732872599428561311 -0.72334790437658291751 -1.3252797101180182615 0.0056534445972597525965;-0.076636999468585889628 0.34897685580177484344 1.1522778522678973623 0.047234675236318121594 -0.37461211339621669492 0.12826742609186242428 -0.56980744708503738849 1.2181639069852729929 -0.43152911734817567257 0.011412310291631458728 0.0920877351499632818 0.25089021413009943151 -0.49180558224692549896 -1.5895832523993671526 -0.73243849562295038069 0.48883354426217201505 -0.26579354318626929876 1.6324238698517203883 1.3766623557804262834 0.036455271057071449159;0.41104821155714621472 0.0081270583126534876733 1.3860942995989815607 -0.26117505074475494409 0.10512793599038158798 0.90254431982395622036 -0.48440042227728796753 -0.23096129588655783804 -0.074524826497491564181 0.41321606181068692987 1.1902240579466634163 -0.36866532544207969435 -0.0026936191303580450662 1.1437347625790164063 -0.437214308581070632 -0.36701443560099938912 -0.69914038793104205105 0.83395901183013876334 0.73341111422679960974 -0.44356408491729254484;-0.67701611070360534494 0.045809287745553782523 0.212516245465353526 -0.34868866325134290074 -0.14219081693331248051 -0.43404387427919072229 -0.23108875189431124508 -0.4660859718893491932 0.40022265829389896963 0.33989293386162611199 0.65285043364147432587 0.69481530060999430187 0.15809713886587711817 -0.56585636167779529426 0.19733180877524669761 -0.28654787613805071667 0.6113992158830511281 0.44503077260941609206 0.063253686787624302523 0.76199442282526885784;-0.56357547324400392164 0.12182750842790308898 -0.32150269273794646052 -0.24322321943935679145 -0.44684050754005827377 -0.53394495597610636128 0.69706074364697501178 -0.0097313397016775427667 0.4293793612882566002 -0.21755960499845000689 0.029247377779243684953 0.17315623550640474315 -0.10822670130559218504 -0.40399559163821807672 0.077452758141928076951 -0.054360087305267222602 -0.22988754377804432316 -0.3882125113360107016 0.58523498783032734671 -0.07244732212350595002;0.70998666995840431504 -0.034467627002859782537 0.038746932543757967027 -0.33877357626207343921 0.38824212418049924844 -0.14827239986602797073 -1.2573686546907820727 0.38534628825529326779 -0.75079511525162367924 0.075134507600522926207 0.55319917832124965162 -0.25696264450434608273 -0.53472385843156766683 -0.14592755950731020609 -0.88971243173898684198 0.072829149970486992127 -0.59932633154400949405 -0.66307235715330103965 -0.67152218512237327186 0.095275974228593657278];

% Layer 3
b3 = [1.7153674620214762747;-1.8865572091166866731;0.99725872805753079664;-1.6369730506509401202;-0.70659433471242893976;0.86100116443828611512;-0.6229786456864619959;0.63334599659650769876;0.13369899121168371536;0.23766010415208216333;-0.19965366795575195669;-0.06955155575383251132;0.031754408190133531775;-0.55653684148417048583;-1.3035127969138116111;-1.2460779191749906669;1.2058965355343693737;-1.5183201873922866909;1.6632053885903825829;-2.2971801492958543456];
LW3_2 = [0.39726071045965233308 0.62570429705600316694 -0.88905624335737254427 -0.99077891457917421913 0.19152757952024787591 -0.62077320750998954413 -0.34323629970151808832 1.0634895872644780646 0.9198869683940450459 0.26814327251377056971;0.44838099168200934441 0.099851965735029898918 0.40444308838840276055 -0.58318071413598826513 0.16649120308602233242 1.1655831384410588747 0.18699324066400849209 0.9779809309632030434 -0.53853568904797244343 0.33972384580490394557;0.46750929857089013053 -0.46345552135036566233 1.3576326456603311499 0.33099269441916817636 -0.32012290904486984111 0.77112658262408129151 0.056172486679847533075 0.35382895886704984756 1.6096093387004930531 -0.27993484080226621602;-0.14874972771513964021 0.77071994575602253974 -0.85016947571219314561 0.22237693099426233956 -0.20149570603504121658 0.087839304207118426571 -0.47337763970134921765 0.54440825203844767088 -0.30067154909446902611 0.09325896239507427965;2.0062418722447348252 -1.2286866933189741768 -0.62538267327877805624 -0.46302941111138024022 0.70135954108838027832 -0.3955080695094378429 -0.89461597735796694053 -0.56525715032977852381 -0.84245232821195514816 0.85245558854679703842;1.4051101030908863532 0.94769214254572264888 0.84023283269902460102 -0.87444818683299219142 -0.093389245556977806828 0.52816673918519740916 0.79852704124579731992 0.17517496795578216262 -0.13992003740866934547 0.56909301853235594315;-0.18117437321965099151 -0.6747014023081024936 0.77896584367681898087 -0.38572914217353843069 -1.1639925852921166882 0.30655765761951825343 -0.13391370533186319758 -0.36852076279452128382 0.77684767024447465289 -0.27048210850370268954;-0.61430769500571336117 0.081976661659675806315 -0.24415462756092956575 -0.52764366980112176186 0.27474930079656167958 0.34222021700308297154 1.3599930534337829613 0.79225913404522607664 -0.20464385831803857951 0.024535690892616750236;-0.90273497526911972155 1.1540138832202440078 -0.48166357249072283553 -0.06873219488889513451 0.24445427216356452327 -0.16178380181222143386 0.25212452021124287516 0.98793048077392076056 -0.46282995806751731083 -0.14537680396125773896;-1.1025440801745121089 -0.19672761756610865347 -0.28002254412260635386 0.24132545914777778218 -0.22258387780064109451 0.2012470216329695083 -1.6164642514671516693 0.51529182917269156228 0.50589551695905266016 0.96922784551171725642;-0.46316312423757149963 1.030658957505883766 -0.34338278950822437308 -0.61852058207033289161 -0.86578052638430136323 0.36679217465745106441 1.0943641889653532573 -0.59934947684545925028 -0.57865247362166960521 -0.73990510804799358713;-0.42432783463064732699 0.9068616610731895511 -1.0588281254443723256 -0.084073012760318963088 1.2587011525384623756 0.54393933825772688984 0.50119323291228889961 0.37893037958276037935 -0.13101802190272651694 -0.72802381327243570475;2.4464935870352060299 1.1083608065073538018 1.305785564578055391 0.021783976908206617584 -1.5043244155611197321 -1.7408324399900247936 0.6636339443027580165 -0.92414537224318671349 0.15299829319919694415 -0.65631352504499063105;-0.074877725270323367002 0.41877901389554639255 1.0183845873545924743 1.1434213164560531606 -0.8143489922988875751 0.82226565755937008895 0.12896706053210324483 -0.6705738787449769811 -0.23928144034061113454 0.2903850706552101868;-0.32514296771330952751 -0.079104647454055376787 -0.033891713450456321943 -0.89923796380147702489 -0.12398533855996539399 -0.1931908985518911992 -0.89116570359904412335 -0.23440399085059265838 -0.27242502180327088368 0.55163617104502071786;-0.32139392318161941198 -0.45435476186847001401 -0.33631771834511359209 -0.38638378819296020916 -0.56382259676196078146 -0.86608563021441931085 0.18264791149226575206 0.4959656816851401584 1.1500394407357437121 0.33955210008672093158;-0.19420079064167697358 0.43113143840900036707 0.047368674962756401881 -1.2164931407504449012 -1.3407074450249076847 -0.96919360719349478828 -0.079058586712463227442 -0.96848620112543815086 0.14174343340674014358 -0.64460198300964188789;-0.72521266843715359585 0.76331692989001453942 0.43445394337189130463 0.14402417064303779659 -0.0022523401207499753676 0.7414746205505845511 -0.90547665280909894747 0.82194422068376804535 0.2583993383333131888 -0.42670040973544925977;0.42070958356627113917 0.60499272432697959179 -0.37210257451092992875 -1.3121199987130327536 -1.0964674746823455109 0.34952647777951650898 0.0569899855889107812 0.61033564665556461204 0.39054138872495203216 0.45979358694612493252;-0.56821835365538386764 -0.031685181161281009143 0.72728002948590120269 0.56250289949909804132 -0.31316442141156408674 -0.15385526054366197024 0.52817314646501856146 0.030863976946898661474 0.47689974204294705018 -0.98840618401853963526];

% Layer 4
b4 = -0.50479908168952791758;
LW4_3 = [-0.38788971970957725199 -0.12609982786509621455 0.0083282924669193254125 -0.011059913158776829567 0.040810023417407637059 -0.6190550372838382609 0.55103269819485600767 -0.16472706837051218076 0.40834651541459249247 -0.78415156028261434606 -0.72170079913949403139 0.3200223571663800004 1.1208747414701520917 0.14920094778118053735 0.44517069944750781163 -0.31218009551062431139 0.047712152320096692937 -0.47396866548385063744 0.7318348725864195492 -0.53033504874053649658];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999934;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
