function [Y,Xf,Af] = nnmove_52(X,~,~)
%NNMOVE_52 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:04:55.
% 
% [Y] = nnmove_52(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.70139767883548;-1.99738196042707];
x1_step1.gain = [0.053913604005474;0.149967019141203;0.50069484362843];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.565559993093812885;-3.4304710220989957925;3.0883670623575047998;2.2202367135141614085;-2.0769707176470597609;1.6036573289250555252;-1.0528959220605007552;-1.0599283366280662921;-0.90536130364141309546;-0.60264240712363947861;0.1943619367431407563;0.78766605605073125584;1.7575739356763631083;2.1065315639015782523;-1.3558648023252688475;-2.3242558945583087215;2.0669054732007978714;-3.3635417010343036104;-3.5065638631462312524;-4.0042382378907923624];
IW1_1 = [-3.5476074519650553363 1.1075585767354132471 -1.8584067342890924213;2.2685467486042769636 -2.4363343690261931584 1.575447172186072331;-1.460122093251140063 1.1403571492038455659 -3.1521581794955544353;-4.2176646778713857699 1.0077485133249342031 -0.91865424406982509886;1.7188523211698127913 1.9913286167128458892 -2.9217514608815311483;-0.7492402684223088416 -0.91512663069416877448 -3.6370422359699023929;3.7070915440669001129 -1.4408070044559997402 -2.2050318834036350957;3.1666265761207244012 1.6142529294947689511 1.0902727780514029909;2.2316250089580456084 1.7281989736041660777 -2.1241697822060641165;3.3162758747289773353 2.0469475167145327887 -0.70098138159270662051;-0.19814902489683278164 3.0234968847172005724 -1.927716256314534915;1.6984310721332376293 0.60215238770719636818 -3.0033295195522122789;1.5467591301416461214 1.4200919024796792023 2.844663100217788454;1.3161569697087924791 -0.93639744297091831449 2.749370514564674739;-0.40877959311257106023 -0.55624923134566850447 3.8738582934408323233;-2.1699945984970105961 -2.045559521709527484 2.2967422173063298807;3.1296535634296511752 1.9770259343436189514 2.4065408244460715359;-2.4835391559999515643 2.4126488672962294046 0.67361159994992769739;-1.9829244069253448846 2.1129394619924708465 2.2468207056122593279;-1.6351198559360804463 -2.1126674839382615367 -2.5758924976416945896];

% Layer 2
b2 = [2.1962190026255550279;-1.0548380110769541851;-0.79083280962725277519;-0.46928571225531895417;-0.30102165815730957954;0.32732736768348347223;-0.16647495083710145414;-0.83178946104460360633;1.2915745178397151083;-1.6026608901329928436];
LW2_1 = [-0.70361406554250383039 -0.15138808448011023544 -0.32888980447125987228 -1.8256391699744793922 -0.051081497911007814339 0.56429356792752638494 0.80181803000655282876 1.6996979081475822593 -0.33237824988025671535 -0.21725221255712579005 0.51406171585107096611 0.2149651943027583445 -0.39533809346303078192 -0.34804113869145653082 0.06273706601092965407 -1.9399149278540255281 -0.47300193103194621003 -0.52521894407316516151 -0.17461760645123441948 -0.45642229061121214473;0.39584769234978600672 0.059872084372906732297 0.49529492519380041715 -0.57778025723989479001 0.36804707944405801179 -0.25936185009953011127 -0.6292181883129328579 0.16855380315166873517 0.27850347953232196252 -0.065429045713668934625 0.30666366269226003061 0.046595492023059133235 0.26430896849034074547 0.24129545757635917358 -0.31204755077533757879 0.87557401470355011863 0.020466258818236132688 -0.75382344236530074433 -0.052212197558133749409 -0.42739758458040094657;0.3172760558093315475 -0.29437521917485026668 -0.48274287046632941012 0.38490090366003498756 0.27672615193778393738 -0.016579624451672752422 -0.35270294889643943881 -1.1597834285129917653 0.099685863450642300809 -0.11038810161188195025 0.57786148485909660799 -0.16773163021067374889 -0.54713110650701612947 -0.12438091101441260677 -0.34084403447735078796 0.68873333444430950845 0.6960509124366472955 -0.35194381339834468481 0.25998845706589851501 0.3212966583041728108;0.44606775623961147925 0.54901782115411801311 -0.29677823399043623542 -0.14945744828549883954 0.06675985947870172188 -0.63089807714321888277 0.3448303484619593684 0.92808427495681156127 0.073281439705613862778 0.43628422469379773974 -0.13102787456266079547 -0.20981962778588622576 0.54822324528181198833 0.36643415998862671756 -0.34586612238852337819 0.16962556687024701874 -0.11862660180176544389 0.23655879751926783827 -0.16269660161047316826 0.13239394521997704945;0.25612433980231030795 0.25421639357284009364 0.33542778531173139678 0.35029226383620998275 0.57390190924851824938 0.13067435209449332345 0.46266862098917987955 -0.52225071790717414455 0.065247564516898323705 -1.1276591958733441778 0.064286979599499291527 -0.27907298856830242695 -0.34656659873539563677 -0.24175609771255504588 -0.25129608171015987983 -0.82233094024700192914 -0.0072087839368405164792 0.36718007975483457628 0.29052245027291551116 0.52890075031442096432;0.73100484972426915675 -0.37235424370265624017 0.54066865393762508774 0.38432251237459735815 -0.3773500242769381452 -0.20239644835802536593 0.26625499069910757433 -0.21550068801114136141 0.19174364246916827947 -0.10224901323762966565 -0.18979972488229615579 -0.32880409779559027772 0.19085242074215480468 0.18327727266535054351 0.39372623051205751787 -0.51796094370879808277 0.54081944058338271564 -0.42206777660432787114 -0.63658850642354258831 -0.39602601909507767486;-0.69132028619050522877 -0.13539109607887667153 -0.15445316631510103145 -1.3722052273714573367 -0.60838121836713332513 0.18849884929978405479 -0.75433068617649889909 -0.35430745908950478373 0.55144380565872119782 -0.14231077362619803939 -0.59367289516859489407 0.072449824130421600077 -1.0286881872562947393 -0.059507140834407112884 -0.014077209294195730527 -0.21812482611141076339 -0.1874753684074375315 -0.085262691779802543546 -0.68058943672776739398 -0.51192381273364417904;-0.99067692536852636209 -0.40398049666052471274 0.68394969027178198484 -0.63141903248202790877 -0.19582585870401189587 0.01798758686111100874 0.56128822645558251736 -0.55289572899232386494 -0.37888340051336871772 -0.62826733151274916089 0.29097064816486806205 -0.065859595230718909198 0.45682377923394779096 0.065897620418607166792 0.1423361313053783106 -0.19987928126427151332 0.42719757065796110096 0.46167204266636890919 -0.44818691909160168763 0.46953883873678742278;0.48803443819389019653 0.31756687772743835696 0.30452302486995208586 0.25764134516381959061 -0.2953545199073654981 -0.38848215848160638775 2.0280804827788556643 0.004233777670354689493 0.25481792683453652337 0.60222811294268263627 0.23688787059918350875 -0.64625368551139805717 1.0913498650599959827 0.55335232768892983479 0.50104112764943198322 0.019490602692155634124 1.3880635781675818574 -0.45101340198038047946 -0.3986467132121581658 0.41550955834175007375;-0.25268984111359460432 -0.49245319511375224009 0.58228046395872934404 0.7177861150606720253 -0.66306267716693301217 0.30080230503002508557 -1.3604575663264930618 0.1870314467353935417 -0.18934763187949263386 -0.69439517357596058922 -0.087698999878897093696 0.53311030477764909108 0.21523251374443869155 -0.15406492796766488307 0.16965579523772722492 -0.14959688152467059963 -1.0800436796631092129 -0.45062505322713397593 0.040719656069769481765 -0.07199566793818350241];

% Layer 3
b3 = [-1.9235032244813428104;1.8788415465969319218;1.7273787131702329489;-1.1936925502741775329;1.3716316605819840468;1.0110664613826052527;0.25321328256488806474;0.5711533472354118901;-0.29040979349757356509;0.18656599205905405325;-0.022091544286869154584;0.20479786170874642037;0.47987302320334634942;-0.69003673555341682455;-0.96150972573210991001;1.105959547224866224;1.1227538293991266016;1.5735010561587465805;-1.710163965114996687;1.9238980655285398136];
LW3_2 = [0.50826976056008377203 -0.68871737305962643649 1.0360264839543416038 0.22524656874298285003 -0.52957000750405114342 0.70731934628495019002 0.0095650395502326727992 -0.18337553187166275026 1.1763338762984139052 -0.83725663511396319905;-0.82130336325458108693 0.53705884102806811242 -1.0223277278086979614 -0.81481035658405676081 0.53102414786703000527 0.29035438650476819156 0.87322810095373659678 0.27249177325152318385 0.13332086766240441866 -0.27023234624982284124;-2.1594540435732931805 -0.29757177946457874507 0.79812652083904178646 -0.32080967339212657086 1.001866252370178012 0.6634460147671270569 -0.78741680476198250282 -0.7612290499863533233 -0.40651499306634203412 0.29394448720395227603;0.38902541664696677071 0.46388292517544421623 0.87259879832552744716 -0.13012797526659899972 0.74666357052609433342 0.56660238159452291917 -0.060529806014179107776 0.49151691646703310479 1.2013212857218504848 -0.98588792996990015638;-0.61024980117166982563 -0.26773975907319841339 -0.16436240123205617114 -0.51548562249262097623 0.72265078482875622079 0.044142477817558672948 0.3214744388309251355 -0.89450010706306992692 -0.032852759579321162697 0.30178970567816520987;-0.62382072582411596251 -0.91478408102761699094 0.13590513316609231786 -0.12699843955561787578 0.90630173194199514786 -0.41201201845088419873 0.26371484417956625457 0.81856143908371781226 0.34138819628649008653 -0.49517723723075529607;-0.89733351026560415065 0.063810115634536479501 0.44156920987066894391 -0.011451375668836529312 0.38323788479769660409 -0.77790118619353931795 -0.004091293390265178867 0.73019584431982276218 -0.84095879269944862067 -0.61084959283675499542;-1.0272385859327424207 0.84110215656166564813 -0.42472547124493986725 0.81826914214156520888 -0.090186083673489458867 0.1419927834247827203 0.19698564743585714187 0.032885884574462460883 0.92882085090157617824 -0.89654365708958594361;0.79889675274131854987 -0.58318812175821677091 0.14813169774205894869 -0.025608623398217969513 -0.46481584004404213895 -0.96784319341406666037 -0.27972075827867942666 0.13556701091679151938 0.49446639768310846064 1.0087061321083146126;-1.411109623682589076 -0.62223943289594962902 0.22189603285457853987 0.39669288098437738288 -0.30473897141955685886 -0.24823327767080877182 -1.1375253956475936956 -1.2366549179554819915 1.4433391553156098563 -1.0749113374793344278;-0.29149104648835511 -0.42529641252035915722 0.44443125901492425145 0.37021747319515185826 0.21824811204215821547 -0.58877824613874407689 0.21230480633631637621 -1.0590746547038205616 1.0368970585610615132 -0.3632868041018250671;0.84945653331394765928 0.65698441675024399355 0.54275550893298030175 -0.8024607432031072296 -0.11125188834241493685 0.79207938309573555635 0.5354980697066065165 -0.27055789180016243112 -0.68786270894050205449 -0.36048329190492878205;0.73324617385655521673 -0.79747433230852005082 -0.74347827045661551981 0.28900102002917771316 -0.51857560607330355218 -0.57441990936925191313 -0.17075129886401771429 0.66455357903469580716 0.4466609370073658658 0.62173276072031724571;-0.30558128845750320846 0.6536927641901326691 0.63621064316013442586 -0.85394741666619711218 -0.48087008457510349579 -0.12309088754442755465 0.016389889031597063007 -0.77713859268682217163 -0.45552020242894919466 0.62948129097888649852;0.018962102140101869119 -0.35462613121000585714 -0.72421453858808937376 0.33510337031344517023 -0.7867573207679932068 -0.69866546675302654279 0.18836662869347661764 0.76296425341466311831 0.59603268619697635788 -0.76015225924546026004;0.5483690467278304892 -0.62412490228775163725 -0.72252874162001090586 0.59929829067406337195 -0.42582901710513954008 0.70581716792004700611 -0.70179223116855693476 -0.77366784776705677107 -0.39073405770389740832 0.27696328477899662124;0.50690131854533015954 0.58854781477067386053 0.914913872772767367 -0.60812928204388139175 0.10878380488309691287 -0.43816890429891020009 0.33325809268530903751 0.98216637002178397431 0.71670012985244746506 0.93477388967623087357;0.31945808601843656005 -0.04739354711505842227 0.83041521882916224939 0.21825484835178329823 0.11583932940703116354 0.2520244854153886882 0.89186715478667344392 -0.82669733569221837133 -0.3489744699604949707 0.72026332824796412968;-0.86364791219979186732 -0.94633877432887814063 0.54566054765534333093 0.60652315322521099805 -0.10426019653023141376 0.77577084305387611352 0.38769307114277490323 -0.49583499779358036763 0.078640984489081244835 0.0095157150857315461051;0.44617159111872445321 0.59968215943498148768 -0.77775625155773986386 0.16427241181227361655 -0.87744908898272255815 0.14699702912935502797 -0.028806077501224925524 -0.96050906145859871188 -0.16409696254288694273 0.67709337343914610674];

% Layer 4
b4 = 0.36349549870534081375;
LW4_3 = [0.94100259563407406826 -1.2323678973506539958 -1.1449263265994127359 -0.37554089544536678469 -0.32570943824409209766 -0.030295016415404826121 -0.44051037708142232185 -0.97688515038041467964 -0.24886722812342618183 1.0736557449087644756 -0.19006428017995904978 0.33866047539629040575 0.13643974324638574736 0.0029409806800928077475 -0.11681389875431788528 0.2045145862584596963 1.0617503274587360984 -0.20948086610035357435 0.065361987166062479604 0.044608325253971015112];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999934;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
