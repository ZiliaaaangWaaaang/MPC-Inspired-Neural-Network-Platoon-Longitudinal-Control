function [Y,Xf,Af] = nnmove_55(X,~,~)
%NNMOVE_55 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:05:00.
% 
% [Y] = nnmove_55(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.70139767883548;-1.99738196042707];
x1_step1.gain = [0.053913604005474;0.149967019141203;0.50069484362843];
x1_step1.ymin = -1;

% Layer 1
b1 = [2.6419449371850638464;3.6586399773405404723;3.1652673147473149307;-1.9022213609273721513;1.399199881275254409;2.2630306134594175838;-1.9425558559736193498;-2.0188859596333172952;-0.57451819499252032575;0.24038469276495985638;0.26779718899943671939;0.79444754968234920778;-1.0574748638591917604;-1.5946761357483800747;-1.3686825583410524576;2.5593828991915277271;2.4319455870245230145;2.5165813799440912568;-2.2550209483159564527;3.9638668033632797894];
IW1_1 = [-2.337108148182049483 2.7448482971835015398 -1.5480030260975903289;-1.1547941632435572146 -0.39476076796603293273 -4.0988519851741402888;-3.1587309384553186042 1.742232918130293795 1.3352548386534179858;3.2016929016255182283 -2.6015741001468972726 -0.75808077811261898038;-2.6725140343117566033 -3.3909104206292628447 -0.44352508248073208019;-1.1498956354021752091 -2.2937707025386799842 3.0046665379150860886;-0.66805492758620654836 3.5057732776175334344 -2.6655095430318538341;1.8370013037391819122 -0.38132744333514273505 3.2164760095841260501;0.21710152687324985044 -0.53326865992732119803 3.3559817602344597098;-1.8858615552733342113 1.8709392665742916595 -2.0708959467901095763;-8.8826533124507864869 -1.3393019136555202042 1.2027511328658047063;0.092823772228180237431 1.9046363092944142981 2.1445332114496102882;-0.3368942713786223786 1.344948660840918464 -3.2417399057656917094;-2.0048076095560456444 -1.7869845052269817121 2.8496874148866901955;-2.354251936644719212 -3.6275185618867844539 0.28519356251192001794;2.4265819096976048996 2.2732846735383684944 2.2978873574977454197;3.3114521458820989075 -0.82687484685196466216 -0.85012551498811073092;1.9024955364189388707 3.6415223353987955512 0.89414077704461880636;-3.4461729361206532296 -2.0152432580066954593 1.7623641657762185719;3.4161011939762162548 -2.3817355345141542067 2.0558974705923449555];

% Layer 2
b2 = [1.3495724439462706279;-1.0536544626703263638;-0.85320383464208604529;0.81797221891239957348;-0.20654893619686287565;0.017174159798306023322;0.70576491351397541152;-0.7718648984884577402;-1.4019619170893475868;1.891959215420190743];
LW2_1 = [0.098591553593236347375 0.90045663046474933022 0.48571443821911119976 -1.6837365882886139445 0.15316466839455050719 -0.41703528971981851381 0.47794050275582605769 -1.067500697164718293 0.25333625209622140373 0.015570632764991902339 0.43523567102630572601 -0.20438069185928139926 0.070460031693438854306 -0.65791666553486893854 -0.21189733741670227496 -0.4691470089859812731 0.094589622473865778152 -0.96552418975242648713 0.68248088329690426157 -0.46742846425686102041;0.6433554448953102689 -0.58768176162161278597 0.62267066751645350209 0.074493507819045803875 -0.63370330736661750759 -0.0078720595203260086692 -0.16612688571695843898 0.017343600446615953237 0.060790552342949465137 0.56567230421056824419 -2.1731717056677628541 0.27753219864262135275 0.078565635926849120008 -0.54010552772125575149 -0.67558199845632505021 -0.7266913130748621219 -0.041750827768850230781 0.37312652418378272623 0.097022834917203912286 -0.15598216608057408061;0.92763336908289917293 0.26526086980167540297 0.45792934172914295798 -0.21475580179706321715 0.18723738472377782216 -0.04738212960599282042 0.29506351136787384304 0.75833466095653234706 0.67166226254844085819 0.084003877859242459536 2.2323306047201576519 -0.62328130989720875732 -0.22841407961480808542 -0.59985104883201745274 0.27500509161421610171 0.52084791586743461878 -0.24450218900154899182 0.46955500604075917082 0.1069953196669060913 -1.4632350284719195521;-0.98889708806466203317 0.45115014442613676771 0.52670701007375586578 -0.56061242784686227125 -0.75124429054088404101 -0.096525626711104164923 -0.98934867604802301244 0.2182814173165376348 -0.67320275446451172119 -0.14401991712380812771 -1.3971965148510618882 -1.0156472674306142867 -0.25366449874548646637 -0.95856076611335672144 0.66795842088138723813 0.20883397863108701942 0.10489442260867259948 0.42900657511376888431 0.14917404694123939657 -0.4427990741759319504;0.60147661554984221954 -0.98054884631472782885 -0.90424958089173923526 0.20730091037212497462 -1.2137081140083720854 -0.12830058857737955402 0.50223793588750897943 0.32709279133458457611 -0.18258427370803453904 -0.58608400712677855005 -0.75778736369607802015 0.91947941533622445931 0.58318475094453414709 -0.19726671508134044353 -0.58725496232894869308 0.52991302065165590829 -0.47922807779424758667 -0.23386241504011226477 -0.043108395920409658952 0.35247439756755999385;-2.1519186742216334096 -0.79705437047658467264 -0.13793327975269617514 1.826762067545306234 -0.40447259294271037389 1.1674199527273241284 0.028378451965741079838 -0.90259901057281921588 0.049896104089969681161 1.3456723891558433071 -6.0394991989096133977 0.42021362160743674918 -0.050147986600092557541 0.25018237637680773577 -1.0854094270393146449 0.84207011607479476112 0.34408522831089233263 0.1005619581212246344 -1.0540374990601413252 0.32102986374946979042;0.18280129344648168854 -0.096318806258160610811 0.53040067993394079959 0.33841130834206084588 0.51600415961733037129 0.056031578898899744856 0.45565915432166798071 0.11582229435556805341 -0.091584805176210856703 0.25966998793309392646 -0.13818187328291084426 -0.47148191963465868604 -0.45682866856603765449 0.13810931543780999298 0.13355754268898833992 0.60462236128636270838 0.66956796104023397209 -0.081739365468465205455 -0.42613838332526210451 -0.34595898736397712181;-0.90993824698047931498 0.3470247811369247537 0.64679722190435351425 0.19498754065551762715 0.39638019322145634504 0.61368268493459043889 -1.1110641983454452308 1.0255612327354630686 0.34031532490354571285 -0.22317853122475200811 -4.7591942066613004414 0.089775181658848568489 -0.45590580350628379103 -0.21500395184535742166 -0.9401622356457509655 1.4635163289940495979 0.66250980452599106396 0.36128373289486459541 0.053993520254055751839 2.0370501745857181319;0.2571986670577101064 -0.30420565443227581826 -0.44873270368839884847 0.1985591170292053953 -0.49779572741983701967 -0.27031487351672800479 -0.79111585176534171548 0.26062156835743760519 0.035320888973852881954 0.22886811635635254114 -1.723816977131011452 -1.4624863328234425364 0.51117535698095228902 0.2530094704059046018 -0.53306118312452610564 -0.092602870327957817476 0.42881814636990145395 -0.02655772510163941294 0.29708083207846958107 0.60307775130423313392;0.62480938978256128635 0.76152187282636818466 0.44172511367572342422 -0.24368953268039320048 0.12144542840239425097 -0.040037371080127587275 -0.51362592536519391384 0.40566242100943478155 0.45392115755500478391 -0.12724567442796053118 0.30809355889572159759 0.18542180515669876018 -0.4771784788358423568 -0.51861364593486780628 -0.48695893134284840009 -0.49736891567604168962 -0.1803145042718582447 0.42647334511688961278 -0.3544301841889616056 0.019296001194580008481];

% Layer 3
b3 = [1.4588849018304268501;1.98887473943875559;-1.2173110493071970239;-1.520922165433160389;1.1614412707333261476;-1.1595566221879620716;0.51593313063117307582;-0.036843292692118383147;0.23735633677225945193;-0.32345085766967063279;-0.017899095925860367823;0.44500170256810989144;-0.4401272308493362484;0.35788584914006577042;1.1162626801318569214;0.88641552658951161536;1.3678214462625486458;1.9634298792983007065;-1.7549705685268286448;-1.8488962638272030681];
LW3_2 = [-0.30567503647073202 -1.2495680579820782619 0.22599757237892195705 -0.79219927167379267097 -0.061859965887362519665 -1.6170334054637638399 -0.45865616763906952302 -0.36460430716400143991 0.55997818418065492541 -0.82924399107353663485;-0.71786521974626871234 0.47441169948474853912 1.1804137508839087634 0.39174019835928353128 -0.058808984421925412922 -0.1872087470121530095 0.53491808762895165508 -1.4783507952400860574 0.59188925332824449121 -0.37710139994308972122;-0.34823059750966389725 0.13068909632538217025 0.10961900899625889871 0.2805793142285911701 0.29667851159698027663 2.5036915965325925448 -0.99099303885845002604 0.55202342293348027891 -0.26377336857270222703 1.1061269743632311524;0.24279696956592888846 0.7572715123782470803 0.97431701690894290113 0.26155537166306236374 0.35714615339270022742 -3.1115932742753864559 -0.038937068230893920329 -1.7357564412822974464 -0.77848680501636746687 -0.130758773114759419;-0.17007844654495837822 -0.39158973673363156598 0.72809387613502996039 0.88268123867218428735 0.12553036852281759805 -0.089339635086182020429 0.98523396660966011673 0.40473760732775337923 0.69140976258670350241 0.46309044011511585337;0.18419301564855547482 -0.69402883770926648843 0.72052073986814535456 -0.99165063817890775066 0.76679559816799158778 0.67013963982170809963 0.24081954687562984185 0.3880897194097616687 0.28793385053608616664 -0.57588556281673952686;-0.39618142262978250923 0.10186508878351603624 -1.2747712258241954419 -0.58329087627696030172 -0.04991246161443288476 1.303098225530182841 0.53910698715442950668 1.153863997141138853 0.17923992161553201075 -1.152639084501541733;1.1167610615775851457 0.059290715916086138282 0.067838224274010122672 0.4055117965719280404 -0.39930147001852922539 1.4102950668282128177 1.0971813159221142087 -0.35336433796649735495 0.47196239685950586162 1.2254981149768475746;-0.59160696686521507814 -0.32824733833767838487 0.1904149244282054565 -0.30868119175978692148 -0.83893708386441889768 1.2287231068269999223 0.23222178153727338068 -0.25763431413972565087 -0.48189136417503697363 0.60434846410832310237;0.61884397313655481465 1.7049630589140607473 -0.98635400225470759583 -0.38508397952748874005 -0.20751412364494697949 -0.8911613598804462022 -1.280770792723749496 2.8379751518953719724 0.87372104448148479872 -0.77401210360029704116;0.93201766589352319503 1.5157365918570611107 -0.45631508235729312251 0.1223741346100473415 0.37974974578804987502 0.067085710105166104777 -0.20705793704002090072 1.2677492746740035567 1.1283773906469944937 -0.52697594919523549351;1.1396053926898022102 0.66650350139405212246 -1.0084374874242756359 0.81171523345537588412 0.13963850110856620979 -3.0227616312688185829 -0.013492321281084481907 0.35284490633264503634 0.3624237209731949183 0.95421894904774451351;-0.72294010200561142909 1.0308883875955678899 0.02947125211538111425 -1.1886544578080548984 0.40728757051498870601 -0.42575849967919549011 0.28383839124117687946 -0.32340815667071570738 0.37940016908298024312 -0.26444075829282398526;0.1066932636363957243 -0.22567897325035340961 -1.1441729314793556149 -0.45651034674095086752 -0.27905007120576075241 0.84557281863047417669 -0.69055751701597445358 2.2472614139758304574 1.1230209172271867768 -0.44973346235421446382;0.064301070341752419868 0.068872662616752663989 -0.067685575984689549944 0.77858974538619307726 -0.58531087040646856412 -0.87872472152541714063 1.0777622090583598435 -0.27601178784497715224 -0.72308517804097016679 0.26926722175759537636;-0.34971961536877665955 -0.19864026616634791744 -0.023919408210582224911 0.90424984993291412927 1.0797952995284307853 1.1349047654447601552 -0.15255709160391969781 1.124682571930046393 1.1333054526470398571 -0.27611646825140123696;0.52059855288751122337 0.54305590219900956583 -0.5176597678046391815 0.45238160758547441009 0.85004642625779369691 0.1209306761296165128 -0.68393181702521455012 -0.21898503236675795347 -0.20826347948561624301 1.0077815851083460341;1.048864443390804535 -1.8030285840533493147 -0.25195923219989979636 0.32900513318621393832 0.89262950056621148676 -0.032187312042534416134 0.49113412855556498604 0.15788583411684187219 0.33204303079147751143 -0.2626464411368616414;-0.96046443493666300295 0.59846069118275202481 -0.60381685086924508088 -0.7366179235039668205 0.71697846822563116032 0.22668596119652828502 -0.22041973078259360919 0.47871283823014409986 0.38265620960488194724 -0.29207944594509394065;-0.61823059452446149642 0.42038876046417383847 -0.42391862984154515814 0.62163924233282430443 0.033297052758595561961 -0.58425975099339078067 -0.59773435906543137541 -0.44511310263567160916 -0.68628281027350523935 -0.99299260427182389765];

% Layer 4
b4 = -1.1269084768986266099;
LW4_3 = [-0.15007444842706776922 0.25825646647832489755 0.42313041237697457397 -0.90579530017953369114 -0.25933880515549406764 0.27686197812973811772 1.2245196344619753148 0.47892818025580563557 -0.014125484806894452947 1.6746592231140933205 -0.74880872900182360308 -0.89919684497901919418 -0.24550907653615300363 -1.8427112762003248214 0.39695068634684660402 -0.54755571852762174867 0.0038197449307463301853 0.76246362067367390303 -0.28018940916592749435 -0.39284778732724451311];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999934;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
