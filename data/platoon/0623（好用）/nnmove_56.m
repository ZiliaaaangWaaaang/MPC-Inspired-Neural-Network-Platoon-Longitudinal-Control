function [Y,Xf,Af] = nnmove_56(X,~,~)
%NNMOVE_56 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:05:02.
% 
% [Y] = nnmove_56(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.70139767883548;-1.99738196042707];
x1_step1.gain = [0.053913604005474;0.149967019141203;0.50069484362843];
x1_step1.ymin = -1;

% Layer 1
b1 = [-3.4811313656301914321;-4.2731164932782563781;-4.4982303963415706249;3.6839760216401384874;-2.0003586940059139287;-2.4919237052350524664;1.3748148551038257281;0.72068108155544885474;0.16526194789781536998;-0.27981958694502612195;-0.53075796846292400133;-1.0210752692725661994;0.38240568305086319878;1.1818229057486469014;-1.2997681086751011748;2.1217477760965479661;2.2040689490564320252;-2.1184011489670409034;3.1880608664588034884;-4.2917998208304259933];
IW1_1 = [3.0797845192955208837 -3.2375155380697195895 2.2202311562447349935;0.33221850344271264266 -3.139529416164074771 1.0937972498438965907;2.1552603558828837826 1.374734564215808863 -4.612068978731888258;-1.9655365632438939194 2.6054545003409006476 3.70701226967960773;4.046663631743788514 -0.20948145660776743004 -2.7809515422509214488;7.0187185356409020898 0.25083844707548580422 1.2379084726770603897;-2.8137050778894954206 -3.4217915938597016634 -0.98116477824184622492;-7.2321384653872451409 -1.8532972819278825671 1.3979578652168231923;-2.7751243668756222505 -0.34379724569880182328 -2.2338391231920198265;-2.9500294031958360641 0.43442367597400938228 -2.0430276758827337069;2.670943702535660158 4.8048340952133541393 -1.2772017578854899522;-4.8233382550667132094 -2.5699097556016963217 1.3421299303182716578;1.6453579890814313824 2.4558873789903858942 1.5137542364097111847;3.4333067927448182033 -2.1677235184114103106 -1.8543042502655877612;-4.2836716777278089907 1.4214856184941089268 0.1822073709823613108;3.2805482071353764262 1.0687918843804817826 -2.539353268114632467;2.1629024756194077383 4.5132833360411597212 1.1855901047819272787;-3.5551619630005633077 0.34227419255435087564 -1.4854488733398540923;3.1293046893011364773 -4.2695420799461141215 1.024166841116119997;-1.2945873296589676116 2.947171935158008349 -0.58770005410903192189];

% Layer 2
b2 = [-1.3672301780423057327;-1.5254097550833676245;0.58420019822688584732;-0.34746711375358840801;0.12956581355450697002;-0.038340761053290504934;0.23260873562504688628;-1.6971952981190623344;-1.1946180581976160173;2.3880823331321292535];
LW2_1 = [1.3317202454388501476 -0.33933294333102426155 -0.2256006776516873702 0.38418319843826975735 0.41638595369350933639 0.986910116702375384 -1.810010430568988582 0.29711771988227192454 -0.24787139705785293797 0.32271973323962566127 -1.2034661809985158776 -0.99587975329584355055 -0.64640161763586589938 -0.19702258853489837409 -0.41579631092370372691 -0.11838191334535581867 -0.065026988749345510099 -0.72293758142998321148 0.062743718422433036874 -0.28090749292191058428;0.23067171058964683339 0.1787018850917171664 0.17939302549471944359 -0.3910715075944214969 0.05526906291650111186 -0.72158225761899696948 0.42284978174372300774 0.10795963326297958185 -0.37793985167210714105 0.54785077764254541677 0.72129435109081374566 0.5331687019908580849 1.0035157352924124474 -0.34920713867570452038 -0.46608162662009994248 -0.67004108097753023454 0.7302872204251575905 0.10306415953622868886 0.4780049971652255425 0.60655994836474058651;-0.50484736223992066062 -0.97912664474559152339 -2.6095087861172299171 1.6986184889122533104 0.086601307132948765477 0.11721366842935197761 -1.0683981123309216343 -2.7472487729915573418 0.16867112794948480037 -0.47601526371427349549 -0.26919062874076504777 1.8060206778138272465 0.60842279180725622467 0.1756112070955821447 -0.19824217997929372004 -0.11737195903758619597 -0.74746191238891146469 -0.014985881198619380866 0.55241441888118281156 0.13891226155750874272;1.9689447080425710457 0.29762833927012055657 -1.0472057199537316841 -1.2376312967935165776 0.46828122017607415328 1.3186404146298098539 -1.3530679809410246506 1.0269262953186426568 0.67451913696353371641 -0.36117497819579391649 -1.3186092892159388956 -2.3407781989560905167 -0.77778102940370330565 -0.94146220717142048429 0.63536014377411254017 0.11875563418557409656 0.40781715269747625952 -0.24648991306930034817 0.41697071262429591387 -0.40163083249122100149;0.56620892075988227266 0.94714023218397669357 0.35163927186653964885 0.54638336705069956434 -0.060018126080249915855 -1.4287365219525796078 -0.30892261348194732795 -0.080272880708770852354 -0.22165902886991650789 -0.15501573370164534182 0.48993757511928670567 0.96107084108292206714 0.66270147308843430078 -0.73830752337851413003 -0.61570362347690188454 0.12210933394312133149 -0.39391915073443856121 -1.2377814406621130416 -0.46238245606093131279 0.047919073050208038644;1.7395152784720631089 1.1591933987626401592 -2.06095852121535561 0.12468312008960916182 -0.032675560644846050884 3.9747183103549468264 -0.98813646599844229268 -2.3553301714794225852 -0.41328100076662899198 -0.14080574216138638799 0.44279547054120282912 -2.6046787960545345619 0.16604973218986340822 1.6402120888654869724 0.065225164098818497194 2.0270879039692193402 0.69152731833153513463 -0.44670937089336687498 -1.0558577465587053457 -0.19475287480614617008;0.31672182468502724229 -0.093686718741470512151 -0.026819321522905666816 -0.84262178050574476629 -0.55894871109903432327 1.2277070429300056542 -0.21239006585342548594 1.0445515529505586816 -0.24366416451257830178 -0.35045711033793935929 0.76727815646206143363 -1.8339569945002489604 -0.33427625991550014017 0.49371978114840159302 -0.18428164318693124324 0.77714741784392926682 -0.63084984998370730036 0.41167191389859353334 -1.233917889115375921 -0.50550794972581847286;-1.2064091025941117152 1.0457177942866886511 0.23450256295519053551 0.72263257454566343085 2.9087762927427607274 -1.4842055484069702764 -1.9519170787192612337 -6.1507759834875921356 1.1982218109969540176 0.98025185377744428195 -1.5036138696386569524 -0.69857840266028004006 1.1189905840633502798 -0.92168819486253850126 -1.0466121097440150844 0.36294164289126568113 -0.91971138119741069339 -2.360653609109341744 1.3788272143394790792 0.78441274189959897534;-0.98610874849816743115 0.58395590709962119647 -0.25212643326000933053 0.74400127402759597128 -0.23379814610579274792 -1.6899163670991730335 -0.25765855674789800434 -1.2132924791582460067 0.19275635792095813237 0.78618951042037710231 0.034047007742753446213 1.4533012063263130997 0.33014281479833335053 -0.56163498528943722743 -0.31515686267076964411 -1.0416765464260393514 0.68487061609095223336 0.0030785076251811874931 1.1599532826442913169 0.099060572145643496778;1.0085860489314564248 -0.26742138412089144772 0.11000925888698592781 -0.69733765779839274046 0.14841768764256346724 0.51741209673429566784 -0.044687468847878372702 -0.78848595634275409072 0.54895453471061717021 -0.15772110822612384062 0.86208439285387572504 -1.084278463709258844 0.61333126793837555724 0.061149491044424450492 -0.086343458308527104572 -0.62928585960916694209 0.67262569909678404656 0.42405106873834691461 0.14263499478113561558 -0.38192158737005604818];

% Layer 3
b3 = [1.6801124031823235772;2.1221223447258061867;1.3577044306077106217;0.79710864267943204453;0.93685700506232894025;0.43929719590855897948;0.50970225083087439266;-0.38829774274237416343;-0.81585600871016661362;0.17294232415738688968;0.34054160009321771119;-0.70164394802490082093;0.12715773727238308122;-0.64100549210034007963;1.0879261510269950808;1.4633603732230744399;0.95891565711996462618;-1.5445856330066771722;1.6986324557687002557;1.9489434696887204534];
LW3_2 = [-0.22360397586688005034 0.35258470378977696535 -0.75527417507476957148 -0.91981980637297222625 0.38458284079787641296 -0.6109605452529848213 1.4202635483290033669 -0.176691717336822679 -0.082521283491930719212 -0.29850799674317368693;0.29610351258750045034 1.188251132496320972 1.023335300674155679 -2.5430904615532710089 0.92203445349183665858 -3.3439506476089970732 1.969958469654733646 3.7349912772530649008 0.87515061264093541027 1.1959413047511069372;-0.87484757664471679561 0.82969694684819172981 -0.18721223124048816389 -0.29870272443859291478 -1.0824492236346781038 0.63484050301402938921 0.32306872717032314446 0.82993086717156594467 -0.29442409592339086055 -0.70406854067336210878;-0.61000063372858304156 -0.3901127311044625956 -0.28490493224947194273 -0.41697969586509575635 -0.55158077449791909075 1.2212766044648752928 1.0450825860302090931 -0.16667729993178820314 -0.8067454119807485613 0.23459771693383033031;-0.36831792675917751634 -0.7632194224695222351 -0.11305110338736636122 -0.089571677310248384862 -0.8575581079699365894 -1.0350319356260919701 0.18417887645555311438 -0.17795816666726477218 -1.1862581357178492159 -0.4032934856727771189;-0.82990310302924075181 0.31099771510919071993 -0.59054134695816262735 -1.0811730844044400435 -0.87947773384849603495 -0.55306835958593836278 1.196333781780719363 1.1260477401405080133 1.2161190612605050632 1.535237879103617642;-1.5588686361572916539 0.99025810993083451805 1.8306151609738472441 -0.12303000464215903265 -0.8283577719112118487 1.8936451141623855676 -0.48631596703437673934 1.0023337693311320518 -0.49510805751553538245 0.263194982102182784;-1.0930344409218910595 1.1010366348162474726 1.1747380780734866246 -0.36365092323967257437 0.30113645775572828178 0.75422842433976311494 0.98361311866517142644 2.754696870550783494 1.1517928583020990985 -0.20450675759734160408;1.1746727492785706826 0.86368896329887101526 0.36194330737816704513 1.04454365652884551 0.36660619092084401061 -0.13362362311421754901 0.12902346315944313027 -1.4240095960546363951 -0.26571428062031210438 0.28940187643016845875;-0.69830408438455537912 0.64981617099769739543 0.68653105845877004931 -0.45933122608420384747 -0.11733469096743097404 -1.337622503904021265 -0.24454403952494924157 0.099326365096867694215 -0.97057955247617988537 -0.1348345725685865526;0.76366801639577641669 -0.81856021482121388289 -0.21319667475715922689 0.44395274005275259244 0.85476518652011279631 0.67277615921949662781 -0.36261755184391625262 -0.45553588291438895652 0.24853237482848397621 -0.38190670794228237517;-0.74232556380108660754 -0.15333831003083950306 1.8837216585223299781 -1.5357993524807209695 0.80819473921945905737 -0.64490209071107129635 -0.66517138429795219512 4.1688254171091969624 -0.0182344637986773285 0.64882905243494848335;0.40518352618380232277 -0.025328655214385334404 -1.9254231069134148946 1.1762537294499004759 -0.75330815784438698302 0.53136743965241994836 0.64093050665874418126 -3.8251777853206281321 -0.93977689657556162661 -0.25888946415868441253;-0.64778637120432669416 0.79280322546063985989 -0.00080266411562790029172 -0.94772932530130360451 -0.69021248746727759116 0.40069321650342221153 0.99771871012648971622 -0.17738261873705579719 -0.86664784178163067896 0.063507716785328835463;0.36808210854427603209 -0.015738560575069632935 0.59830894067984341511 -1.6454776793627681197 -0.40738078688387829862 0.61583938551100747549 0.63477216706504624444 -0.09211504169437607914 -0.056779140568461894389 0.81132404362394794362;0.098057493621311969667 -1.0881127671177759364 1.28774391164414026 -0.85005261158353384587 0.24495955262274687891 1.8605388909837887734 -0.0090927331971142385386 -1.2462752256009106411 -1.4603811406870192968 0.60344198810863547422;0.23154714959998998203 -0.34313027877084961714 0.44001770812540941247 -0.30996496540856738333 0.11519100469280631194 -1.0216147927589791511 0.59315502521480034659 -0.75346352512693592907 -0.89529774711106335783 0.11108650513895028389;0.11253364961906825448 0.035719194606926039925 -1.597861729708351497 0.6968886334697328433 -0.50047304981386397937 -1.3540785103079284735 0.68365261560529200224 -1.3065004504194361878 0.48994658816747677088 -0.2570880858144656278;0.040159049866211909974 0.67377327751511073561 0.2091867148351299055 -0.99785827417092898273 0.2613927380447965132 1.6784744008142877814 0.62050611054545246059 -1.3206334549287814806 -0.31905063542735789817 0.35999778870166282418;-0.11650637692772886078 0.008374731893296445337 -0.54388179039885098387 -0.33864243425841517032 -0.92704688974296411974 0.15461203894142777626 -0.11454001796635310262 0.76251658569265512444 0.32188771669616789151 -0.96548506440884163116];

% Layer 4
b4 = -0.089198453373046673875;
LW4_3 = [-0.077905261676827902706 -0.74006570909830238225 -0.1424270762925963496 1.0509953245486494122 -0.027121705922064528321 0.21097383382907730631 -0.53051949565522982244 0.37356369465131972207 0.3606994569420133856 0.21706973506744139946 0.13747087389797785217 -0.76360592573668761851 -1.3011441679556179363 0.10021787418509035816 0.44382239476687412871 -1.2707618512714458081 -0.065064278063199434965 -0.73789472779779263778 0.81990043957012281872 0.18447426617904583157];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999934;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
