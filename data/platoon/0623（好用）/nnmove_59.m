function [Y,Xf,Af] = nnmove_59(X,~,~)
%NNMOVE_59 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:05:07.
% 
% [Y] = nnmove_59(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.70139767883548;-1.99738196042707];
x1_step1.gain = [0.053913604005474;0.149967019141203;0.50069484362843];
x1_step1.ymin = -1;

% Layer 1
b1 = [-4.3445889385602267652;-3.1314201921333464362;-3.0896405781833720106;2.295375535720747262;-2.7105338001716243745;1.971242354876387326;-1.924098326189842334;-0.76928334955310351262;0.33466451381732675863;1.1945405307493912606;0.24826514991364972973;-0.50858057042753901378;-1.139184729088369874;-1.8120471753319375985;-2.627871401877670543;2.3712811708724670368;-2.1772684892854128336;3.5512246347370970412;-3.4944335676974245253;3.0319232976960530657];
IW1_1 = [1.1205158888415167606 2.3044588325289647734 2.3380777726959935947;0.54350613955346294137 1.9852670188814256491 -3.1800892736465224964;3.6174178701792643054 0.83011733188418757035 0.14262676046769756644;-3.1125807930850206695 -3.1285432873260567987 1.3827481567098776072;0.32410479182106333162 1.8905464028481868688 -3.2298383027708057469;-4.9891706834850255703 0.1157327039484325748 2.6868684104478974817;6.2264226314235475712 -0.35406018783766446401 0.50861883393659423902;2.4006737445678028031 0.74807350369949310309 -2.7765367692651587994;-2.9094740419603368764 -1.2286509547382442609 2.0711720326339477793;-2.3645465759989212629 3.2346109118490455892 -2.2760251579330832428;-3.0526518793166004251 -2.598085895541816015 -0.8444631862413553014;-0.2159208852464212236 3.0665768840788527605 -2.3119520414036802691;-0.49320494202002912454 0.93508390889003412116 -3.4431079617421067596;-1.877221513764785632 -1.5096192363685181359 3.0175422579663790934;-3.9806563786878248479 -1.2627843042395421325 -2.1988322086816824985;2.0922880644894044089 -2.6401385395412511059 -1.727439472367102935;-3.8026596886312313828 -1.153484156508098879 2.2052136415953533799;3.2875945600474056896 -4.1063466637574190798 1.2606611030848469124;-2.2310518178924891863 -2.9924779128747021062 0.26345523002470688789;2.096753536931613926 -0.18015656280021566382 -4.0578437857517917209];

% Layer 2
b2 = [-1.68861982862243587;1.1841183269010249202;-0.81983806103234058149;-0.25208982409235036748;0.36131033646681315341;-0.047169457677624142267;0.0057577094796266575782;-0.64279874062691955139;1.3315772263396863373;-1.2786025349604899226];
LW2_1 = [0.47350697560270932351 0.40323982041113776154 0.39706688422841235342 0.19583211546339096554 0.26846521506384518618 -0.4468540989729717916 -0.37579716989117450954 -0.44906929967739478426 -0.32425692008953149736 -0.31093724265688643671 0.30041932540794391571 0.46380485605085786105 -0.42140412075262279057 0.087595366487755080276 0.39686634852124053063 0.31960403779841206617 0.034580738771496893902 0.2634696453331099586 -0.31248887992907048439 -0.48759411128771862343;-0.53396670251579647637 0.44861010758141450783 -0.50155589255448018715 0.051002792358681478535 0.33309571893938400011 -0.58765614066493210288 0.14989910758925514833 -0.37247589094502309148 0.42645204342987730328 0.27791484342743372205 0.25398244187345458966 -0.14348570174074529171 0.2133712630817238276 -0.56429767728633106749 -0.3703671022216193931 -0.20246522932984151177 -0.45094620720964717631 0.34841439713631522368 0.088218500927113530086 0.19030811856807317017;-0.11697748439922416031 0.04586495509188297931 0.04012753965087156871 1.0005738498330005726 0.82165234377101181718 0.15185823913750307046 -2.6180235849324096087 0.31609204737170742971 0.61995452986200816348 -0.50447392168523119693 1.3407048854727969811 -0.43001084622869040208 0.39049935431464222191 0.84666285701059507129 0.35908405645646890303 -0.27087370812767724848 1.3536976648531071632 -0.80203872785717467142 -0.57261484088641390056 -0.57814295394117032334;-0.048416365169986402828 -0.71600455965864562291 -0.025455280745560530248 0.53103217985393935674 0.50767305634253534485 0.78486170514192843406 0.59571272235776584481 -0.021675580809700459306 -0.34675822977920395251 -0.21033084382339720109 -0.2088373625723468352 0.0064692686201742533383 0.66826417542322991139 -0.29286928694578379107 0.24416994044335513236 0.098067081507709069621 0.29970799798616937215 -0.62151477829840873213 -0.52179959703320777376 -0.57799090335772429494;0.011920173210289481194 -1.0774797171580852151 -0.34630088745581905085 0.3562016081794007194 -0.99634517538462685771 0.4647521716311224238 -0.28467414988849160107 -0.47985810071295359469 0.23609275613858174414 0.9046808113972928389 -0.038685187820749214471 -0.091183070247801714658 -0.44472252215887864146 -0.63597217000411154775 -0.19147461471722854176 0.28111366010469995835 0.24779895681544361619 -0.48602539152338614103 0.26241739771799638126 -0.39063240684932720725;0.57210060647098681663 0.34869054630773260728 -0.54875627270822047166 -0.046349904684294833401 0.70917323368733431455 -0.25636874593169256542 0.040225505713655303197 -0.30594683281814921694 0.33050716559553433571 0.48813123671868935416 -0.13556754172744925335 0.42680727869793694262 0.84092117813837541362 0.33790916755938599225 -0.1932912061405459847 0.099730505968064708799 0.595956863832949435 -0.45625937402437005685 0.048061380445099076419 0.22322910563974887599;0.65238690664210019499 0.39910583443359004541 0.15239452061344899159 2.3498806421135678413 0.32499762878181193138 4.1322544861469232558 -3.8767777984914957301 0.23644511298876999539 -0.05320293981101398284 -1.0520022667523714066 0.9519396980670624675 -0.45352277555897008154 -0.49572038401144541409 -0.53931197537979957968 3.1772534027294723202 0.4406541067464770367 1.5431057263559262438 -1.9905458582222397279 0.87926051977498398404 0.060387247164773422137;-0.4377400809172900531 0.0022094959894925977895 0.17557146013663585404 0.42955173034240767826 0.21638678395484156614 0.33683835807971285181 -0.62147987746999189262 0.25617095511607590463 -0.54426467510476006506 -0.13307443755706591104 -0.0093670121264160417784 -0.1262827208467843243 0.51083556447117850485 0.68675486604303148663 -0.57320294422947803969 0.85212753849526590155 0.74482603651261758415 -1.0629613234187560433 0.24839865929298149405 -0.74344911784652467635;0.4655823115106071941 -0.3117218083413667018 0.41801098058887681264 0.0013481912034649481177 -0.088461646845794467131 0.0067532258907863655303 -1.0942582793227060289 -0.23676260066005833105 -0.84104431412820579439 1.0600939554242492235 0.07403489664955029137 0.57517719501835873341 -0.3067646036225524786 -1.1339213175438247472 0.1731244723242211514 0.35623645443018014944 0.4388616191386704446 0.22779025675402381212 -0.44707368751070986068 1.53684279423258352;-0.31815868017409315582 0.94582507978783014746 -0.079974100707165138302 0.50762422018786601541 1.2462662155405146436 -0.37604697895724936707 -0.0022661236675644586686 0.37785296604677576227 -0.40440661865581178924 -0.037310752259400462028 -0.29367971208170717823 0.40167373885444329629 0.71407937072205507345 -0.41470693976690686799 -0.62017049001936208619 0.048186970843911054729 0.024699636108121036937 -0.68981624530550855745 -0.12612599512669273039 0.28776733180593488948];

% Layer 3
b3 = [1.1530782423969287986;1.4541129558689853685;1.5153133738408079978;1.4715429963913468914;-1.0816319320725309439;-0.43924299905714492276;0.71806609225654471906;0.64249218550642706038;0.33339824537154505446;0.12433645379911782702;0.37888564261939389199;-0.19950745496486968489;0.77717861887571104695;0.79702027097251515464;-0.86805478211825304324;-1.224286323964711487;-1.4149523371314416398;-1.3383548244185996534;-1.9073937828765241687;-1.8351425891152297609];
LW3_2 = [0.33480637306771265926 -0.42246055358672107705 2.9021697816295226602 0.45592185288947828514 -1.040537583888870854 0.23300774666095044885 5.0200862515609241399 1.3433138218671605291 -0.51070529256853391953 -0.76584069224710416002;0.27019679966803578086 -1.421963733669188823 0.094322992153840296004 0.26330515532391890465 0.21650019493478597776 -0.12579959779071062109 -0.8429855809727854199 0.013246203802001756469 -1.1147373417152679487 0.56869093986400520713;-0.73500348665705750317 0.6104085678487678468 -0.29628665701245632258 -0.71194505681489239635 0.56157931340932121245 0.14547673114559589447 0.41697972122476478773 -0.82477659931222124801 0.51626851671969276047 -0.80128716215305118009;-0.82570600306410690816 -0.37923953197462129117 -1.1176694379678306923 0.51689753398469528989 0.23678881497214984697 -1.0339228568304936751 0.27039472008456794105 0.66733995460909523167 0.29728271533444305952 0.16683932525107814104;0.72060434733901024273 -0.53941050594986539313 -0.37157747939525248571 -0.3934136046352904037 -0.022366236043656013976 -0.96448400835211223203 -0.68255933669059831725 0.22301201463989211993 -0.19969986341588835677 0.89430047401985357514;-0.27793112781934531386 0.15248993452191694775 -0.61738568814275796015 0.059515600940406691854 0.92823150210270177762 1.1733341307743605508 -0.60103853822458563894 0.35717138901369899218 -0.075397519522328787511 0.68190041142393453821;-0.64736058623859804584 0.58414359050167452558 -0.840996557022441249 0.36778436556435917248 -0.56279704672514663244 -0.19682779548675188863 -0.40502087959421401164 0.92576493238815293907 0.70066803973094149427 0.39609724246819077997;-0.65981421754424551818 0.30090890614931559144 -0.50732905414903406438 0.92042149504348813593 -0.69021896177360964053 0.35553631007305475098 0.13316126787282056565 -0.9110475912445996638 -0.36439119922966073384 0.58055494611522906467;-0.22857272082429955229 1.1608316547102439653 0.018561932744841386222 0.055531181595851963895 0.54156851746176370987 0.048826291583995366785 -1.0420368637639878528 0.11019821408651431227 0.62864364447326892549 -0.52680381245481200381;-1.0804186597919251955 0.48442498923621246654 -0.80612770724341931139 -0.31699952272867792935 0.75963325200579778773 -0.70836262591739351802 0.23901326367248909577 0.13313286454773062828 -0.39090768662062480576 -0.143902676900273363;-0.017100505927042486398 -0.61667451650636273541 -0.42281093108554324012 0.0069900074282024382555 0.75312677558523399846 0.90813339844871543427 -0.24524388020243195752 1.1178064682655284301 0.18256008850769994689 0.28869815639596507761;-0.10274724652052816265 0.025585269592677754857 0.57316876006123285148 -0.21150037535125087995 -0.96358888261655328833 -0.99918970258830441811 0.56734948687898578701 -0.075771021598926485696 0.34566557368307032627 -0.8218654157520818293;0.64811210987647238646 0.74808502264600296172 -0.10868237498038330058 0.28315698125222354964 0.020184899322732385157 -0.26350390950339164231 -1.7888065158824104639 -0.93341286193782024849 -0.056808971805802847832 0.89138538753482809973;0.55186265451220262168 -0.72438537437766992166 -0.23315228662885653654 0.68952002038173121345 -0.11194116738725309879 -0.4213792173419193543 0.6110962192166788931 0.70787771796015996895 0.678235001491878986 0.73807016227942534581;-0.58164544109754423573 -0.0023756070234102707496 -0.05310154375484798378 -0.86689668134483566231 1.1676810046752050809 0.44399356045824350803 -0.053148104708611774993 -0.70729335638275647735 0.14632368154031338836 -0.65011531708070557922;0.077415926499544568395 0.41326824521054983386 0.29842212125621736529 -0.47677082887648458698 -0.17212155277033397427 -0.059130575112311498098 1.065544530300821302 -0.50496338486915193222 -0.44858710036922327946 1.1765228146086386118;0.010706353970697390574 -0.88562742602296962158 0.85602508639284424774 -0.81857332062449794652 -0.21422252102983097011 0.58948274912112319512 0.20673301071029079323 -0.53842647910767649222 -0.64824502799449645885 -6.0082702204620336284e-05;-1.1406050051009326562 0.55112232511856695805 -2.6296317399212583155 -0.5773614205250309217 -0.59459555228182303654 0.88875355040821413244 -2.8093600837377108448 -0.94005335867687445095 -1.3537399447227824734 -0.10808151933247570065;-0.62234796487287391553 -1.1439025091869734485 0.47624992751879380304 -0.36110955028070179651 -0.24957903628901201287 0.64841939889626021287 0.59127320909486746903 0.13079550029395817234 0.55091945734729308448 -0.071259600755911714498;-0.59935556251041610665 -0.62882191621329630582 -0.13776448948036745801 -0.27208499380259021372 -0.74324578993986412101 -0.82791172513060129479 0.3547767761671532516 0.73298289358927837256 -0.99112902284897863581 0.25212693571729616338];

% Layer 4
b4 = -0.033904203024554109558;
LW4_3 = [-0.66815972908889098569 0.069672775476274595441 -0.57964992871753684422 -0.60891832067395501582 -0.13121917990107187513 0.37300632166276476154 -0.0031676078260332004091 0.030415713477251662272 0.2122084165780576126 0.046108137778672841911 -0.20070785961059114944 0.30027324128427651528 -0.29177321160986913196 0.11627959602489325308 0.018813381554858153027 0.24177783546635875367 -1.0246294633515042882 0.6147022562419056646 -0.43573012357924789661 0.36458697281457258521];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999934;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
