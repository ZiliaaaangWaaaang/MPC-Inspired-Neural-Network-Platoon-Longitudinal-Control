function [Y,Xf,Af] = nnmove_62(X,~,~)
%NNMOVE_62 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:05:11.
% 
% [Y] = nnmove_62(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.70139767883548;-1.99738196042707];
x1_step1.gain = [0.053913604005474;0.149967019141203;0.50069484362843];
x1_step1.ymin = -1;

% Layer 1
b1 = [-3.807454413013774186;3.6192613902255637015;-3.3918366329082347832;2.6645235621905478673;2.8227204015632896272;2.3498225175862810232;1.5758131823091385826;-0.98649597669684463419;0.93871783000558450816;-0.087974965138431227007;-0.017083311671638533313;-1.3359322069007886213;-1.4969659089931341978;-1.9802465341182775571;-1.6592895752041316726;2.8095718266996372314;2.5499565868376325994;3.0392808886867137552;-2.7348084821391576149;-4.2428987583460848754];
IW1_1 = [2.0990666528516590539 3.2495214279137507596 0.33589966016100342161;-2.9725499758290747643 0.856735572577649096 -2.9286333269688786807;-0.40199037405921739241 2.9623630451064437707 -1.9934689130382881039;-0.24864895312692864016 -1.1889837766268285257 -3.4363845753950688078;-2.9849393660855461086 -0.34320750429070862042 -2.4965702838168990496;-2.2299045543983617712 2.8863249575919769363 0.43611594704050155036;-0.50714678871052121245 -1.5816022860175633635 2.8795142649188538719;1.7644280059308561359 1.346589364518628873 2.9421991316758826507;-1.4952311711535490879 -2.5931685339640675458 0.12949559042461539216;3.3504299174790634908 -0.85595339987564755813 -1.4140161871715823949;2.4388328267808629946 1.4726141362987172911 -2.6469574850442025848;-6.6020143828505357675 -0.097861135912467867026 -0.23425336405487903746;-1.7868712412645464394 -3.8139771852120003537 -0.077494495920033282244;-1.988533024792291215 -0.23127647376848681215 2.9260126430708237599;-2.8847659997849044444 -2.5509025130901874512 1.157136428066445788;1.6744947324170595948 0.24822832561704105681 -3.2336783449825574621;3.6007091436552411956 -1.1390682300833943064 -0.58929123595445154216;2.4696800642799243697 2.6830438080074627827 -1.1438738769092557934;-0.83008607716172444491 -3.3053223120981791716 1.8258616019615194759;0.075034303548625072566 -1.975749763733544162 -3.0172217093509345887];

% Layer 2
b2 = [-1.5955178781998471393;-1.0788131516799959186;-1.5374959076090013443;-0.43029924647517614478;0.21927894200753433873;-0.10864006421850885831;-0.58939595363079688717;-0.81723524381154855067;-0.88370189293263723407;1.7632868624774657995];
LW2_1 = [0.12197844082579253899 -0.23605646239290350996 0.39258308525037766135 0.33756856921899097701 0.23812382911135579477 0.54190979436403163838 -0.47652995353647426002 -0.41852098286371625102 -0.14486790762519666242 0.45888466629746577086 0.19923601222268721989 -0.13948660454633568517 0.79031508946598716392 0.46100818165147566807 0.083395451153761970819 0.29076836361995112012 -0.34985699950994503249 0.12977229176940027755 0.49111539832629597102 0.96695726772350654166;-0.010815709926317283035 0.53789277347694641751 -0.51410810978560228524 -0.32747440434723740221 0.92470915300811828974 -0.46818904466004018783 0.48181328897557285096 -0.44503163321235117422 0.31627272076164164583 -0.6419643317907929303 -0.0074956509672638657604 -0.58126897300835134175 0.66371498237633153039 0.67796745384602274953 0.42797214029409041958 -1.1256348873436485825 -0.11985184748903664198 -0.06420573820478579774 -0.051858729238086737068 -0.14687747891206950901;1.0587983059479486592 -0.36204580604676894762 0.05354181791014164804 -0.54862901033100341941 -0.29343563188047727675 1.3108484533925504056 -0.9594622702663033742 -0.38999058521956553314 -1.7615609696618259594 0.20764765370786519849 0.23307386514958475243 -4.8313323996467332222 -0.70301116651245865175 -0.60105308238525900766 -0.12521640563524027989 -0.29218147459589310921 -0.082673531608173977947 -1.0330818290486405431 -0.38932577442897076114 0.64746520970917209592;0.050740013086015625654 0.29776220908417627697 -0.13305228919947439947 -0.1958965689709610547 0.26903677113875595905 0.41806971380186713771 0.033984935207699067117 -0.18999162850481368658 -0.31929367634142408194 0.56729644225999564799 0.41112092775934888644 0.58709902884763909281 -0.66414356228273296878 -0.71496695069971638592 -0.40272710938938927061 0.49775014348514590168 0.076819817448458185827 0.13684168606279956126 0.35880101702181360634 0.020864116113044499368;0.030845347811494141371 -1.0176818003495515796 -0.41470688346756390263 0.42791644626029279319 -0.66989911932554913054 -0.44689920358963325375 -0.095802057474455595831 -0.22642418672674280433 -0.061905654255285720577 -0.88339465415957885153 -0.026459900146285859901 1.3034118791142361715 0.32243490684571185501 -0.60432663573227773934 -0.38959927455719345346 0.88101230610109504404 0.93590314410817876389 0.79443342797316007786 -0.0072731357989417391718 0.11864902904895312241;-0.32720871549028296421 1.4777306866107688954 0.31079862372660571612 0.50560508328022490954 0.40684682015584450188 0.31009098166581888778 -0.10377573163565417813 -0.57963041019032968126 0.47830046536239784194 0.55985117232054448788 0.21153915438648421277 -0.2491980043436067549 0.47359279842112794734 -0.32509843485993628054 -0.36362953428792993416 0.66802180935156496577 0.40198057834751754758 0.30992928950912318475 -0.79251636999262986549 -0.29399288292282232948;-0.72177638797282095418 -0.70967418024080364258 0.25714133671964523042 0.1446521365246355717 0.053412340623355772373 0.36026713273357868772 -0.28386586029831312183 0.14663519371062952446 0.068635073643478206051 -0.055121273968582587544 0.37237609623963369154 0.4603406504639728225 0.89162200569146499163 0.047253511687749348569 -0.84047425171065659466 -0.026127132465375221826 0.34984434204339387442 -0.51674772279133251995 0.13367559045181939825 0.6794506796360082479;-0.31496697325354749974 0.49839741891538608121 -0.24676229837866994754 -0.28262864294212963756 -0.32587069052848977035 -0.78461486696393489826 0.54813101491474636173 0.48809788197196185555 -1.0672317896901653 0.66426234594892075158 -0.16804316765799315325 -0.45779772092874193579 0.39143038603120139385 0.432374965579138959 -1.2156458924025896895 0.018854910712697389719 0.12408675246389977431 0.5147346355278197283 0.46308045134717684688 0.63272251730867790087;-0.76904032594782589793 0.61057032048583581574 0.80404151759302511238 0.35858829753747140101 -0.38545443082599784024 -1.1497207564053479878 -0.85059348300201187421 0.49909812060682379187 -0.47194435183844879456 -0.18252601927420536443 -0.19587114782771120058 0.2809171861912473922 -0.83814836920181068347 0.40800427279161538552 -0.29539410461893422788 -0.097310577925938418486 0.78544447884317103448 0.20032742519075699694 -0.10322003600156121061 0.47864201734951700162;0.051409836324307935096 -1.4195758172763957017 -0.11316828883898465141 0.25388650016325609027 -1.2858168287789040196 -0.43017413451937674962 0.38127434851661046178 -0.59161351833861242078 0.10939459933310936857 1.2608342912049903539 0.27805544187427427838 0.92551693961858194637 -0.36893362241639449106 -0.55804058604622674977 -0.68996082173487649492 0.63821356000224804816 -0.048707034493028607269 0.40480570872101162561 -0.90259101036862010581 -0.162527059989737932];

% Layer 3
b3 = [2.1814826226010226584;1.763717805200909039;1.4833521081073191006;1.2707934755091445655;1.1884672234994688722;0.78468045878648273739;0.65007600070885662724;0.74624968155295412497;-0.3282703331612301656;-0.24702072720093334879;0.11314968926519301806;0.68454223155913818122;0.53960858557029101057;-0.63939488985871850701;-0.97568392405115689225;0.99761469143077885491;-1.223717674263897992;1.3247521180681680608;1.8365745270410771539;-1.852546327542288207];
LW3_2 = [-0.26524956348713035759 -0.59119789645164388947 0.7599024972857717497 -0.26059949024791512207 0.090489550080941769106 -0.4743992472955098072 0.6403978307013015181 -0.88339496726411848027 0.65345918179751849575 -0.0031155046372453223252;-0.5487176507437596662 1.0066603066777968234 3.4783246557259501763 -0.567231862119474739 -0.061802780891105232874 0.74145036469405223301 -0.93867286444959252556 0.93892239965435675408 -1.268289237142649295 0.35780546543774272017;-0.71773662880743638315 -0.38658623009881198929 -0.52127693655927009875 -0.62285842932112278625 0.28827649127423343733 0.89181570766545237294 0.36056400825008305677 0.705155149929402425 -0.50825994993321188531 0.68906077726410353002;-0.19019686652118236725 0.41509587554414989485 -0.94226230830263391081 -0.59056547977856810316 0.68866794282024601515 0.84377381126041184345 0.18465735150312029278 0.75909813307091300594 -0.56266122098782889172 0.45148219583464965776;-0.41167543799221950618 -1.3483382383273048166 0.63482856748093807742 -0.69134645143930473221 1.6308580478187486573 -1.2413009466776492307 0.98680624594180121889 1.690925329996509463 0.78145862965224743846 1.8725051724106975826;-0.66420756693102012136 0.40170842478309992662 1.7564567326624498378 -0.30343723564135621773 -0.1294372956816819964 0.77578309936175948724 -0.30396050413481323638 0.35264868337509003293 0.71394515994434248896 0.9915467271055898868;-0.14269110727489595081 -0.22337741029817625993 0.9153139455135435032 -0.87466761972621154264 0.21769075848594254818 -0.96236191797873327225 -0.45292898454334001856 0.08661635146598051227 0.85615935050647762328 -0.46904293898172855215;-0.49754364920626803492 -0.28926749234898468943 -0.42649058098984177212 0.53276984710865937789 0.065845849494996805396 -1.0350951287240677257 0.50261562563747830268 -0.23696611412749624126 0.019341888477990010209 0.98720746938445402829;0.43256335950907992549 0.81277848654253270766 -0.50384402203472589132 0.892510815751391684 -0.20912562109736904103 -0.95362380668080215518 -0.26107228409621807685 0.28184289342329116312 -0.34689282947572253057 -0.88364640708197406127;0.37102436475586264564 0.38047567758657024894 -0.27195779498599459423 -0.95458865853801000423 -1.0259059047063607828 -0.92160873467625337163 -0.1125994062341093005 0.40319410409343980906 -0.20750310420520562404 0.58559430221086627988;0.59478416954425761265 0.7210752044713016895 0.36270181816507834904 -0.55775616031380226278 0.66498110933379239729 -0.71684923772877395809 0.5852751769695150319 0.58739028174515783842 0.74200245381508145304 0.19464470894072172236;0.18158945957592953491 -0.32453086867331332188 0.26690172513813331667 1.1351653193583635115 -0.47404069061319381584 -0.13026940284933921643 0.92562178115200410833 0.79258358108328019753 -0.11322419626609649124 1.0308800128138133623;0.43190558321759625615 0.43385408014073523209 -0.75088395543619490535 -0.44687683964155894278 -0.26152275158185922521 -0.58682708249441273285 -0.58123832092966398744 0.07115544293742945281 0.82509637379666145307 1.2202937935792721458;-0.87330807227459728015 0.8672813433090800217 0.17700774010571002082 -0.19122378514292784346 -0.60705909441374639179 -0.24397484743956560083 -0.48934516887972595578 -1.0779301936294736208 -0.19288454898446902308 -0.53063641158622287808;-0.39900164344382810233 0.97641382493183526137 0.11619427122727712942 -0.28954906970249483233 -0.84662775720188987449 0.40058656276737558688 -0.96981797868903174553 -0.29515917081916798193 -0.011385055777798943136 -0.49076954433982966641;0.17358067025157461472 0.40962994578086814323 0.64359001147755567906 0.63298604861943286171 0.53201183560689613294 0.82378017642799972187 0.96027361433563507287 -0.25344683872711115669 0.31261416421167859125 -0.47027467116763521648;-0.066689294658519110426 -0.85153902687877880417 -1.5653416489002103251 0.61515942581189353433 0.63237452087893952779 -0.78502628195976642544 1.2722811138751082272 -0.72591832087618146652 -0.655795664738249795 -0.18854412914361309839;0.66096952661581609423 -0.38540360135714607503 -0.20725968278587728055 0.37849423288560973822 0.90939447261316774807 -0.015904440113206522872 -0.8443589798459558704 -0.5945872245401142564 -0.42470713245892394161 0.78605496622866577461;0.74694424638495238167 -1.2008039455226433567 0.57391616137264833686 0.77011566593822422533 0.57942659655248640593 -0.17174119515064878438 0.16107765807490606602 -0.13219232693482618757 0.74624959967202642019 -0.21272865079920216802;-0.9441963992736137623 -0.19376080214255775314 1.306563852551543059 0.60233945076593142787 0.26491516100226480956 -0.64373642890275617479 -0.39753258852532441514 -0.11248442202429737025 -0.62784330429679324759 -0.91972788926479487337];

% Layer 4
b4 = -0.68653840210761296614;
LW4_3 = [-0.0213611631886317134 1.1560527942694578396 0.1038489816688518419 0.26494864009027552232 1.3046224355565319009 -0.76229049723096076185 -0.083608526162141649785 -0.072420251524391104914 -0.57066814571716073523 -0.19751732772812558014 0.24978194237182588244 -0.21504992376237166973 0.60977975903941250557 0.071287973485431199716 0.14478584811790295994 0.22472894450815672496 -0.28246394897572235649 -0.93383898318110547532 0.38933635548041656271 0.2852040291374720038];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999934;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
