function [Y,Xf,Af] = nnmove_64(X,~,~)
%NNMOVE_64 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:05:15.
% 
% [Y] = nnmove_64(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.70139767883548;-1.99738196042707];
x1_step1.gain = [0.053913604005474;0.149967019141203;0.50069484362843];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.9535338373444353088;2.8121909150500496999;2.0801311741181280901;-3.1963701520965144276;2.3997457699689443977;-0.61677571141713272151;-3.2761826105386764318;-2.4337835511822545342;-0.39235189488234306632;0.4931167605511548313;0.71147902660628881133;-0.20397664980417132274;1.5617548234141107599;0.28431722406614967635;1.5670782304959212095;2.5484160178071806335;-3.9491540488864549374;-1.7723970157074477871;3.0154300063681014343;-3.8828795979564456609];
IW1_1 = [-2.5938328486567696629 1.6017195300693389814 -2.2894608378086047651;-3.8384525978087187248 0.67998083293129185645 -1.8166764313302290468;-1.691308642564208764 -4.3268632383190803736 1.9020872338923813238;2.3970503781302832103 -2.6067356319718246738 2.2410008446036986385;-1.6472306248327737155 2.5951956210120075141 -2.018526082574167102;3.664360825373234043 -2.4796427298390133487 0.56304398944825395645;3.777132461557849652 1.0963625637375415955 0.89464336029260116412;0.98261558465328657785 -0.92630484876441809838 -3.2085590416111458012;2.2297581746545107606 0.6484835506210788747 1.8609389331141701351;2.5077725601225808738 2.695457138877687342 1.6503678101821495083;2.219362284894763615 -1.3761953373122499666 -2.5816899105466335484;-4.248302530126983001 2.3784587314982106321 1.2783755093967470451;1.9718525444766479282 -0.94544639221050774669 3.3092232190171615436;1.7032164915193510613 -2.9551715673658600636 -0.76374338654717577324;5.9218371041554913603 0.97833226067805412196 0.97297432989974086404;3.9018485607891650879 2.4227740441892553491 -2.5059428384484956354;-3.033889871124787696 2.0627854156700613508 0.59664005673535436269;-3.1947803737282125525 2.9817011108814264198 -0.75074374388808540193;4.3762134421838769782 3.2055324372366631458 2.0665133958703321149;-3.0438261810298308241 0.64804883665119661362 -1.889039256455101512];

% Layer 2
b2 = [1.9034999649187502868;1.4772816441732676829;-0.85349655163276838543;0.20245753901787866269;0.68397600103521760673;-0.5036793616854575717;-0.85418569114872799908;-0.94843171877361065469;1.5267904446368343319;1.9036328088412497461];
LW2_1 = [0.19877329711326058304 0.10057892545552947483 -0.99540281088166626677 -0.098215286554776681793 0.51308206492717123304 1.2573007883598161794 0.15525256788328878343 1.5165757871973553073 -0.11359674101960608172 -1.2649836717253484242 -0.54992408826017202816 -0.87014170323180806133 0.04180500989450069288 0.28711825498507964616 2.2116528010463212262 -0.17754495018225485703 -0.80507282509486732813 -0.69993149769697926565 -0.32790188395920677467 -0.004771287661319234541;0.096036023693712641025 -0.75955979004096563223 -0.42371673043186969254 -0.96708196756301278985 0.093777110570581440063 0.91646227537366276028 0.26142890240789273815 0.49654825043781947169 -0.91037443737150924861 -0.77574137021169997652 -0.24019441631060550746 0.33639154924817132875 -0.2126087354516065786 -0.0077044684084199132473 0.44233215757016824954 1.7972485256211567783 -0.53028277694812553378 -0.9724539832374710091 0.16513909218222361242 0.074327215006805100184;0.19910029131989859241 0.2043073506240166981 -0.21335612547319882104 -0.83870988140115632081 0.24801945811823525312 1.1226244353830898692 -0.16835898837760562841 -0.11291693187862172909 0.07738007323782902791 -1.8005218476952296047 0.56261180479558980938 0.59042181379503966276 0.68852921597361160799 -1.2266393170746270336 -2.4444405799189907746 1.0264842978843244925 0.13764832191312187382 -0.33258292322205940117 -0.65940184079612218504 0.80134253905024577236;-0.88743560493009632228 -0.6516157328644947011 1.2523970959267300973 -0.69714549445086937407 -0.5346460115390548884 1.0139603738912628117 -0.51491899444628630444 -0.099069303458331731127 -0.0025152158819568698478 0.68037703316109154894 -0.10005758119860790056 0.11631137350786063811 0.18570361644022595482 -0.86033881327249384086 -3.5691402464541823747 -0.44696083420898691241 -2.323784145201203799 0.53580855164059237872 1.803612464588194797 0.75304614633802358092;1.3860717122309522686 -0.73096421971842651111 0.17938279738238802063 0.74851965208917770056 -0.6907639906166354038 -0.34581020544728618971 0.0028664487460412467479 -1.683686996981977213 0.69152919476233543072 -0.69941808836417607154 0.77549379018230746308 0.26624839553429258121 0.33941710942492120395 -0.0010630564632379997658 -2.6288471151574195339 0.032834974644265393917 0.1343172244200922516 0.17206143860321385097 0.48660991606495096473 -0.32537201132967003003;0.052600960998818203918 1.1742839746960529457 -2.3641799568830146328 0.14265307709052421625 -0.17798020208000345233 0.2292215182151960684 0.31723958368397553453 0.63840208211085380796 0.28721630014250393303 1.2090867386514652093 0.064856437384675391655 -1.1831708359554407028 -0.23013975609579101489 0.73589651470731465288 0.39006029823773374909 0.24396734859290342134 0.54912249734462303952 0.036005258363219820594 -0.8258453405441357198 0.15480224218944138581;-0.58024916860385999939 -0.060925213074260853308 -0.13095304830784196271 -0.95274385981607667695 1.1960207977315451267 0.2122195137250777186 0.52447743640109423247 0.06916873530777445378 -0.93188117025378613967 0.034457780925604857003 0.1513536011016721472 0.37959217900682384883 -1.2626630770677698123 -1.1135698538291198822 0.8974168937685170766 0.8503833837579864996 0.67880127987522098643 -0.25716823738956923195 0.1925512495262904078 0.19287162629933946034;0.41575152281743310567 -0.2498804353781597376 -0.62259146516647134728 -0.045337329842581250428 0.18921739583819541242 0.23737461504958884406 -0.017782547202916880458 -0.73098942831270086185 1.1059304647374053054 0.88881277504977085346 0.52424951627996330128 0.35047155795061463168 0.63217983622695150814 -0.32538925613160157857 0.12118847846261168733 -0.39986593648335577722 -0.61783616185518874797 0.079515601077882372416 0.56923092056569735142 0.59446021913763835709;0.65621174838752416303 0.54640410790229343441 -0.059967175147289893122 -0.52930978990849508747 -0.52994024021241104005 -0.82655155607606778378 -0.16425249627570143174 0.18678110018720744945 0.14096207220452450226 -0.035216264488927062626 -0.32148171348389920077 -0.010519415808921657798 -0.13868145914527604812 -0.05975573266345592105 -0.37448513156372426058 0.1284089495469803166 -0.29432615422050906195 -0.6377542145851092803 0.67622508998424990523 -0.21885834231756973178;1.8391307571841497559 2.1237139639382376366 -0.47603693630048460328 -1.3741082523298282503 -0.26227023368829072147 0.5135453375618256322 1.6248085307236646013 0.60829585885521186839 -0.55038953025759607129 0.018297398886719013628 -0.14870120360161218076 0.25176633931271197309 0.52599285837723763759 0.044801318553316614446 -0.53584978834251595359 -3.875558910171542859 -0.16511664359890149134 0.079793060528784709451 0.055717425476848894683 -0.11824419953335769951];

% Layer 3
b3 = [1.8446530438545911679;0.99748096951936093824;-0.69704757959763541386;-1.4309858772150758632;0.95877612154355029705;1.5271080207187439637;0.70262818473246502204;0.66269216821952359187;0.53581504849578498462;-0.30030091623459131966;0.46443756427184973434;0.19718265605245813288;0.5041297894894745113;-0.82205837217491795066;-1.3387077448664732593;1.3434490009654687093;-1.3415953203716237674;2.1074284306052635252;-1.8344721589714696464;1.8867806708511765112];
LW3_2 = [-0.042720015075772471702 0.60745669804397695035 -0.77436825734241954144 0.5969035685034564942 1.0531098190478282994 -0.81402082736561565124 0.10505803435605712282 0.23628767196618019608 0.61738242382412500397 0.49408647610912237447;-0.52733044918012939029 -0.023110428263371913388 -0.44411867474934907385 -0.99245452496518549168 -1.3487044914561969744 0.14096765744819894639 0.54316695651391178057 -0.45558620761579221581 -1.5966396419269168749 -1.2078261293052949821;0.78394240139370241494 -1.2268860838614141784 0.59614848706828649227 0.1231488777986750327 0.40703283220859770575 -0.17753468575466296864 0.32652375175835263166 -0.13604652526287552838 0.68942240456534653603 5.0290569750702935892;0.54739697119232255673 1.1237471270555567937 1.4751234907910339977 0.43733585783539780101 -0.73032365055233827711 -0.85305913406831768153 -0.087506939986970788681 -0.70537138882281003038 0.51470136875079297578 -0.085093450052145441775;0.709325800099106063 -0.61528743461791468583 0.064774721790177541836 0.50857227031755103397 -0.18103653259466084835 0.38219488140613655514 0.36943830809124827974 0.71496919536975878096 -0.91147175890002296583 -1.6952295606906266912;-1.529571334177030284 -0.79283311675214263037 -0.4227096407753110352 -0.5959273121648418492 -0.94306595687379091153 -0.73209296858833672328 -1.3279073561420853267 -0.087220371302972818373 1.0028900505046589586 0.56871877574099505281;-1.345337154538112534 0.50216074567543078633 -0.4732216937056031858 -1.2751248737726144089 -0.92162516416909601169 0.12087125920351637909 0.46229883625406387182 0.52010482280322334336 0.55166291066606520932 -0.38194229014446845483;0.013267046548124238059 0.31793355268755124632 0.63125058323108851344 -0.025072933563711524013 0.39875290352533232507 -0.36885546927787338234 -0.22083099118884716439 -0.80231207568105566974 1.3506622648461910075 -0.20347659483830790594;0.22211093337125040192 0.55921368238446911292 -0.14425210846970484835 -0.38953290035512511125 1.0237387821490289141 -0.97480266875456844655 0.50329880786578728991 0.47292998514022505097 1.0924989322915938939 0.57910519598980203515;-0.18504500956836350545 -0.85166068787304827215 0.88165163769841337071 0.028264905460943876708 -0.69297648057205529781 -0.13917423371451079217 -0.68056075024237849824 0.54823422483691486295 -0.27894257694810586923 -0.86095862087438790322;0.21858634924907402453 1.0139431270559959852 0.85054784444572362201 0.88230152139972184422 0.70411224130044192115 1.160058705421251446 0.75398836190323015316 -0.85988498935721235927 0.30566969577426167382 0.79176460743926180275;-0.26907710367266585161 0.86442843473216768313 2.0998384639987892619 -0.13920998858388061725 0.86856146538074119334 0.25004071486600731866 -0.28917253046726110188 0.017019941876498891065 0.071945841550647968154 1.7987358560922472872;1.0390129965331404982 0.56183098386141328007 -0.84980956908991767129 -0.74677394471466473913 -0.15029698914246233943 -0.92307872382523237231 0.35472797705866510043 0.03458070511871056546 0.88625036380975563688 -0.86865598126984788774;-0.59510950168960530249 -0.86356928940091159941 0.65662339989954465747 0.07940613416769658206 -0.11877292411990904297 0.38148867216273585345 -0.41405783578782257015 -0.49570883360463419143 0.0028832367607507839412 -0.96199278496184625897;-0.027690843402638797011 0.087576109560296599987 -2.3312111476793768716 -1.1193255907766277435 -2.4013999932695613282 1.9987864203980891808 0.93096996184336444635 0.23770366533612471982 -0.037393305459721505601 0.91286029039956895215;0.76848253653347342595 1.1417126322553334816 -0.29695865624219830448 0.81335789112272338652 0.80774850195573943967 -0.24199858215091296643 -0.15153245061598238919 0.71280960434638274137 0.69648391181078128653 -0.0056245419090051578664;-0.61599442182922314881 -0.5943505604836730738 -1.3245249543024391059 -0.90966985724531412849 -1.069035859321380455 0.14117102455033800346 0.87028876864837934058 0.80448058345203898867 0.63373380395064560222 0.33515889504709700519;1.0063443028116569877 -0.52779834827806981767 0.77585105240235552326 -0.46036454760168743494 -0.153214862816596048 -0.68891082490945676486 -0.074958800788102214474 0.056508485237707753446 0.21305339468371223277 0.33389333600020820736;-0.74584806552116034162 -0.89923590195254599067 0.90525113078077801276 -0.62148728131186681267 0.58213079893016073108 0.3646079773568499105 -0.03601247475355343064 -0.21538502281680477202 -0.93877774372354061416 -0.42264774399128302029;0.89233814226234919875 0.484397205196834435 0.61526206819785611568 -0.19834391474986196036 0.27831205983424700534 0.06224156206909952499 0.22269224079572547126 -0.13348407439846021738 1.2783422594813640405 0.57496757775470852536];

% Layer 4
b4 = -0.11980177408428946406;
LW4_3 = [0.65390060139188710409 -0.31853286371770495045 -1.1027035309430326393 -0.013131820949898630885 -0.51309806505751531791 -0.012578409658723411352 0.027589882058065968301 -0.46632612883930624204 -0.97936074302663211899 0.066439942578364052927 0.18686609081075913896 -0.53751825452771162528 0.0078249581097026808807 0.15510656928995505965 1.2499381233935757951 0.55696874925663908407 -0.45119008094923518382 0.2196323215704479026 -0.83259378125767291579 -0.0135181904228916204];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999934;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
