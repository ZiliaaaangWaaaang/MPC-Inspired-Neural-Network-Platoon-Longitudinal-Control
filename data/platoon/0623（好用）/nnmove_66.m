function [Y,Xf,Af] = nnmove_66(X,~,~)
%NNMOVE_66 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:05:18.
% 
% [Y] = nnmove_66(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.70139767883548;-1.99738196042707];
x1_step1.gain = [0.053913604005474;0.149967019141203;0.50069484362843];
x1_step1.ymin = -1;

% Layer 1
b1 = [-3.9765960946862670689;-2.8242737458317610511;-2.7772526036005436012;2.1100645137907965143;2.6316709589878350961;-2.8076612412936299279;2.0060536422561416892;-1.0984013654251425507;-0.093215594095850451417;0.4692390162229093109;0.71954246696368084901;-0.37145162640979739743;-2.8818797982335100372;-0.32973738860237650217;1.7570497921632937111;-2.2750296252546626796;-2.4088644681376325529;-3.0867686137382781553;3.2392302000911774584;-3.8294879386460518589];
IW1_1 = [1.6468280104555814702 1.2276393022315177372 3.3670213245837223859;2.4956339321357465799 2.8800977717125815225 2.0810580457280889455;0.44882136832564228923 -1.4681379283683073655 -3.5692078395462840668;-4.2599333745033129972 0.91085891956657905055 -1.217844643662436388;-2.9476004872424192982 -2.3158589529428059706 -0.59712710115793321553;0.71952846659399105622 3.2338414922398110996 0.84067300201430883444;-2.0470548755026216625 -1.5640809711031828932 1.8257052488258929124;1.0452863548087558687 -2.9748046676509547481 -0.0023517434334325518913;2.3198158901660761444 -2.0776085513935145244 -1.239911369530660723;2.6839025081121161698 -2.8810652926790076833 1.4541848547441305062;-1.5890129312695080444 3.3870810883286548432 0.37764546330745646374;0.8994018361712458054 -3.1491648049506171247 1.5402508965447940792;-1.6272552672637827786 -2.574557513812032461 -1.2567680759730681661;4.0648659989384468005 2.2178658077490083222 0.09613278001286694463;4.7189383060505862844 -0.0030990630948585992654 1.0934444973761998643;-3.7507774786959813262 0.32979376111803393457 0.12989932419350436188;-1.8415518720720309709 -1.343532007207665302 3.0620878063720180506;-1.8383485080921022625 -3.1750741158636657246 -1.3226935072388537051;1.8677584228002486189 -2.6697568324478968549 1.7605131958271698078;-2.2679467707322995551 -2.4071838324880210358 -1.7787784736171921018];

% Layer 2
b2 = [-1.6699943799904923836;-1.3280776663076583333;0.90490691733850359135;-0.1195382969285901098;0.52698864059541405958;-0.53702035028654981907;0.34119096715845809165;-0.3490969407134828506;-0.87009721329014522162;-1.8119693282719788741];
LW2_1 = [0.31309854006992787756 -0.070022997109933135529 -0.042862136695870460545 -0.49733910584269602762 0.47727682443343516505 -0.014816054104831838031 -0.12124605953058073537 -0.2744819216477820123 0.23042540010520012883 0.27077732833447193395 0.1996925820553680786 -0.55276873270794291138 0.47092803194911370124 -0.16107003090214136454 -0.074298640405420057764 0.39014049042635418063 0.38483040557134828852 -0.49233360207559767607 -0.50370548368659096017 0.56316572635547024195;0.56156516868517503127 0.43182977637972913554 0.18929328806582279565 -0.45588115418148461577 0.31872232233107905541 0.48171419154960470888 0.094670755327448077865 0.48349325902531409271 0.12543879026406973276 0.46904372872254657123 0.4236954460718768134 -0.2940598025223850609 -0.24047071261599353709 -0.38294552587320973558 -0.33027325597938572699 -0.27101224511195443068 -0.03131788954201134012 0.109759448029608353 -0.28947708895809420859 0.53099204044335102104;-0.48036364549817878178 1.0821693529911111664 0.15685326230792423496 1.3110043094260539487 -0.40385093780821001985 0.81810094866936300395 0.23746393604896542939 -0.56822073111615811758 -0.28774401600297239145 0.26141998377222819272 -0.41655557171388035709 0.3696798057834065343 -0.19025125317981184114 -1.1265888890591309046 -0.59192569947073725434 -0.26367721540472188746 0.80363053370873083203 0.21521608595123309371 -0.28125117134887950288 -0.21428567568724940506;0.12365867983398401431 -0.16176940903455555576 0.42162942840816808321 0.03686219864455016898 0.23718645766416354692 -0.75731542196170631431 0.57819848161523890173 0.033996547354021536269 -0.20524289818524898976 -0.46667539725603113254 0.89453829427510478389 0.80485472902774701787 -0.24071461436676505619 0.59894792460944668022 0.07583698561093245305 0.31419015057212573705 -0.1582823383371641246 -0.55344776243222670864 -0.032578043131382919406 -0.16169810035116266578;-0.9857031178266811855 -0.83800275068426233194 -0.31994906295921321515 0.53616317623315234986 0.51079020872735703129 0.35212867912521861324 0.50438610974270714493 0.095848398134399825921 -0.26307997561777562989 0.66099260648558610942 0.58827933717516178724 0.49775729267855589599 -0.50621063825136769498 0.044047644973511698718 -0.36007498625417300175 -0.30260455383052925482 -0.075877111281780901253 -0.68457321328426179452 0.22373036696767550913 -0.41052686265809879007;-0.095703606859368461901 -0.72903348804336176592 -0.32915129832633999163 -1.7155793994040726691 0.22142088891062111644 0.93592002579803657003 0.58256812800181556611 0.26690243484714482047 -0.39501459278302464284 0.23442606201946109001 0.82666134904778776349 -0.49032884846687835312 0.11791752114275937113 0.20191012996450827255 1.0407723491773648306 0.25989297316350701283 0.54611546652351905529 0.35916273530544701176 0.28728032440633055611 0.92195135750853141055;0.36013641406320046068 0.13847970317666416507 1.0931205618938777402 0.18681164894578811131 -0.57169396097625291286 -0.18390106180307308481 0.34446357691626650066 -0.93139290340799374412 -1.0829807002656055559 -0.28530090822976195142 0.4084844442911171325 0.6532000277332538074 0.35779511731076230063 -1.1892564524165347706 -1.1445444337267947077 0.12261465124483417188 1.1515411286373813393 -0.81033857137185749675 0.17284093983870982281 0.11886350432304119973;-0.8264021212757364232 -0.42415903996578568913 0.60052086936561333008 1.6726406616639448721 -0.28309863876945101646 -0.35151442439178981481 0.16214118532316262877 0.58439542767768670739 -1.6138307637257651717 -0.29019696790979182532 -0.41012862099269953298 1.2985307725267583034 -0.14851825627293929744 -1.9399340011282257823 -2.4970681272445629517 -0.10891152494775840909 1.9063257763118148791 -0.081790721927480575237 -0.53409444371997050194 -0.30032762213333397128;-0.14917375177446592915 -0.13029218060221611775 0.65748378369406246247 -0.30207621497617354045 0.090813233549133898226 -0.12284593817582215025 0.2841711398009681977 0.52092635437054568559 0.086169505405380181218 0.20445826770643946158 -0.53159179175939108575 0.017718610695805304955 0.58107172776650428681 -0.66523523199400458328 1.3801760859271618997 -0.34468276042412410165 0.095885403698712928788 -0.85599052066238123793 1.4204398899006200896 -0.65771429634910294482;-1.0101810487400526561 -0.41711322010849816166 -0.8442991747093401278 1.7589394073307937916 -0.5353893996082291773 0.21755237645299357885 1.6129640161330092152 0.018129178220943373973 -1.0236859685983901169 1.1082729622951819071 0.75728226378173590927 0.26914142051694112112 0.23897728738432330586 -2.5024232891440068016 -1.4425821870783108736 0.49095678541719162125 -0.10337646993722558741 -0.81017124866526879501 -0.31329322615587895662 0.40918433307220858364];

% Layer 3
b3 = [2.001442145452596133;1.5517494155648787757;1.3719960195434266481;-1.4573140486063953514;-1.1930351405348871285;0.54234097405862247143;0.93588863319195958468;-0.42704815542322194233;0.20632380301334207751;-0.7713776035694174249;0.13440025174102071537;0.78892561087234724937;-0.42634343380875300289;0.57217839067394360431;1.1255029035007904081;-1.5562000577082772956;-0.85367184808176743704;1.5029839709402459391;1.7399660202736082493;1.5070393739455667514];
LW3_2 = [-0.19787424483088089655 0.25865636703222799619 0.69162334992781071552 -0.48959356493311273484 1.0580070997338282268 -0.67587950730468271399 -0.42435882387359002976 0.29824515805018136927 -0.54688195886160551051 0.94283825467533255438;0.10684490759376390201 -0.49301703311427458321 0.96209604655992109201 -0.91133489548204305031 -0.068239525004733694868 -0.71877033860875638727 -0.4344322438541236564 -0.40582018981502343546 -0.92069709789186182647 -0.24553309863196079443;-0.26254345278178709 -0.0013323515386671133665 0.36853703758134337409 0.72759241502906646382 -0.7337143722777005328 -0.41955901316025778769 -0.89811316183780542932 -0.15417333945353869917 -1.1609735974541703918 -0.68657441804725460877;0.59687598638656258476 0.56382828726873146508 -0.51060261763462300166 0.46572265914031901746 0.30867244723491937819 0.86088637672644041654 -0.36161024142301528839 0.22528743270442624924 -0.90616422816276620544 0.58437747215804658474;0.21083835784607268815 1.0700488063369371083 0.27335248151606017508 -0.18119759853152553331 -0.12297296059397809509 0.27633881423327572024 1.2289079842664083486 0.097149172438483588632 -0.52163120161957410303 0.25108012657021011593;0.1956300926326010603 0.97942525008983116752 0.10494814662281695683 0.068210853675446103672 -0.059320329733898294333 1.3802583845446532163 0.2456846837785980342 -1.3274829440275699444 0.29379179010135492156 0.29430825582653985517;-0.55397382794321470278 -0.7698801168718428789 -1.3359370166277524383 1.0648150272113126036 0.13596952238235968102 -0.59453374780857204396 0.14197656825705942674 -0.63598045929351554317 0.54825471182415241866 0.15621895857082213066;0.34944366680790961421 0.74335531108579011583 0.67706774138079850456 0.099249872359846516567 0.84045890534340050859 -1.2710504965231428365 0.13732170690823852777 1.5291028746259678339 0.52787593091927398348 1.6374898047728470019;-0.20258474518136135312 -0.7817841004344220357 0.79000159414187853812 0.728645159259926678 -0.66371988292663264275 -0.36822479558932563748 -0.29806823603408355572 -0.38816987502164690405 -0.23936617204503637946 -1.0143223972242150221;1.5097858124658369849 0.67056160483047322352 -0.54539938767665063768 -0.23899812752634283508 -0.12001215489095953814 0.8295953931704548312 0.52922804237041931597 -1.2707071900534503417 0.33559007507374938317 -0.60108083469843776037;0.41798190686998776266 -0.2157079050847846291 -0.41092321374617912788 0.25208970546764208898 0.95169443150810673071 0.55482377378024205772 -0.19347676306893632492 0.8489387326900115216 0.84378986121683008381 0.38563280931259652506;-0.047860706111786485706 -1.2410873443770560343 0.30902347098513838208 0.68948979634202545164 0.71517172140847962147 -0.57051517427697284734 0.1439580112913882437 1.1438211104634476989 0.42482243782230322271 0.53243620857094831056;-0.61336836033004915603 -0.36833165244649757053 1.0042345908020116063 0.56137885433012357783 -0.082932568474521697888 -1.067434256276214688 -1.1819326495797728427 -0.063179342030588558909 0.13040385461535258793 -0.13383987380024486846;0.24304947300210014149 -0.74450156088592711612 1.0314836542510772421 0.56673045531698784671 -0.45339238386838176531 -0.11300786540192542251 1.2260916045982748201 0.51282715102889020464 0.37067052872247541195 0.092858084542464996991;0.72617139093890936685 -0.16527794039220772282 0.67622147647999719666 -0.1621208793548833127 0.016237481977907777114 -0.89406437709712760498 1.1684777068797782551 3.1726509078625961813 -0.13233476874077426677 3.383942592328530008;0.0045779595786282246961 -0.37901818631603634291 0.15736508107261937273 -0.17379040675852303055 -0.21033618182141577968 -1.2388195044243131004 0.088291022685455397556 -0.16547183834395098878 0.13092671213806861275 0.54431490787035374801;-1.137789873464977175 -1.1870975982878431143 0.35873344255679878723 -0.47661657633735665662 0.21358389741521277561 -0.49616929623434524732 -0.59382636768101249025 -0.33533419745561982017 -0.34981895985770256052 -1.1786520509915767718;0.41000549629831944953 -1.1546879189502388119 0.10408563796881073471 0.5223320645949863783 0.69042531674048535084 0.99246321738708009885 -0.32583792589719684507 0.27542312003041408142 0.49077541615756359317 0.085361243427683003437;0.77342544028557536073 -0.84298956923805135055 -0.23555549205274839419 0.50629615609775169283 0.39478207566597706135 0.25450822874569412058 -0.15081912744966266549 1.1700447984770125931 -0.59527357166870564775 0.033968285127744322904;0.61437759695629901024 1.1778879179514019082 -0.45205022086102741863 -0.87513661212572235737 0.18660317303877826944 0.43130422240070342976 0.019277813646334251291 -0.31976361193094748891 -0.062711758568302772288 1.3787734387252565949];

% Layer 4
b4 = 0.12934313429035115828;
LW4_3 = [-0.40150325613244292056 0.16720216462848203065 -0.079229472246040641426 0.076483807293757255508 -0.048680453894756267608 -0.10541575669898906042 -0.14115138196214141453 0.026502235679447358474 0.31532263996958787011 -0.27609610968785308627 0.095817017720083705323 -0.48084224875094122575 0.061982013689352050134 0.12693628586719643558 -1.1531559081850695225 -0.18931624062490948202 -0.12341449468392155786 -0.15729124028857804918 0.50637657407415925803 0.27852873698249763779];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999934;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
