function [Y,Xf,Af] = nnmove_68(X,~,~)
%NNMOVE_68 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:05:23.
% 
% [Y] = nnmove_68(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.70139767883548;-1.99738196042707];
x1_step1.gain = [0.053913604005474;0.149967019141203;0.50069484362843];
x1_step1.ymin = -1;

% Layer 1
b1 = [-4.2278384643260942255;3.1058416564326352116;-2.711049745046259396;-3.1881330788846118374;2.5844407696152198461;-1.3224681458868554618;1.9877858399202050776;0.24985605431125618159;0.53072354726203063713;0.14825404176269860179;1.0346313364087549314;-0.27585162767879572998;1.8641339433960502081;-1.6081857305401676683;1.7504548464139022546;-3.3209049502707048696;3.8981655666199315213;3.7371186459909306876;3.6110905262787786896;3.5317452263598587692];
IW1_1 = [0.89946878406597374767 0.031393425938814750742 4.1163567171668669076;0.11719875281838122716 4.1617218268842428586 0.86416981977598605891;3.1897630171364368401 1.6308151933258678845 -2.852159658177964463;1.0257529570936410046 -0.96922211073962571959 -3.1569934369112679917;-4.0554672294157176893 1.6863282435417779048 -0.42379846019450245764;3.4460652772673223687 -1.244583826895733214 -1.4543006650303897942;-3.1877549145040706691 -0.79754858738500000737 2.0870744628554223077;7.6170032689823603533 1.4195317808291896267 -0.90076874215786784106;-1.7207032705974099063 -2.5661370088165349479 -1.7616290944059451729;-3.7858857179895384348 1.5062826972457645791 0.95757832256127162207;-2.6838264473718331793 -2.8190337498305368946 -0.23639157353278208995;0.34629073142661803697 2.7377028591731162876 -2.4817772626132432734;0.39242896270681759674 2.1913986240584608645 -2.9113442649610301594;-4.0693965731410859377 -0.70212260391948899674 2.7087487576158904012;2.0485490327133302202 -3.0001232433072555494 -1.8907318613217189984;-1.3932598732104983785 -0.22557057198030161516 -4.0863861026347247929;-0.17312793864053629966 1.9526141880937126771 -4.4381784523001757137;3.3106821596173916511 -0.48526482257650394025 3.704494937485154793;3.375256179506914922 -1.1314104551156958234 0.033412164533606625305;2.3112633838651421847 -3.5120840709539167257 1.2256781432240051455];

% Layer 2
b2 = [-2.1494972910706886537;1.0128875046225431777;-0.89457553281174850834;-0.74676032011708903813;-0.54902500989904357009;-0.47955640597636089995;0.12637351018938863811;-0.80984581430047708483;-0.79438014049633587366;1.4626042300719759304];
LW2_1 = [0.20871260836120514304 0.34897048323632584577 0.048454993445558508514 -0.091171272872095698858 0.18900463375758028151 0.39173929142530916625 -0.13033175863528512206 0.58003414511488649019 0.36018194535054043337 0.4152699384869860677 -0.085813890513512708358 0.54517925411713374917 -0.38096867672409429062 0.053079223378559657609 0.041574386612074312741 -0.55816621353339213041 0.11049009317629202021 0.52227377394643836883 -0.4616107287560899386 0.1415547476397653881;0.57757121372360342715 -0.48445488038962736255 1.7973422790142210559 0.50005046165183097973 -0.43942960742265024798 0.57375580035833462222 -1.2596029548825664612 1.3116432815693308545 -0.114477699770222624 -0.79889185850994348659 -0.31748867030953414892 0.64917019964854183467 -0.094820668642444080887 0.1926992849281606579 0.053969035072755772164 0.81535187509590034693 -0.25909189024904999421 -0.03081010468972090327 -0.52551504774788548868 -0.22828307056955118859;0.50062215156037026542 0.050749648885430986844 0.78150517578835720922 1.5059181910633068213 0.0046469819418436192696 0.71437457185855812725 -0.69784235158766050322 1.0057883909600981998 0.10270008840459825261 -1.024095196486650261 0.17491945552592794155 0.72899364579404934972 -0.22169226517790338593 -0.81399498504356226913 0.077976439692655857838 -0.022333930221444923264 -0.20310135679397098296 -0.3482759208837131748 0.26227427916551898646 0.58388822784750538109;0.21626683338108215748 -0.59221939363310183158 -0.67404458003315237402 -0.33906325490976563231 1.1908971866752389168 -1.1968239467605121806 -0.12443401423946406914 -1.3068567019259131889 0.17176697120672798635 -0.45046203109304366885 -0.11383868462435525748 -0.057792662510856664115 1.1042539698970426087 -0.12232282277947932603 0.33572754303502155837 -0.51392248985486077562 0.39195652663776209268 0.080399098710188243722 -0.040230929041946576763 -0.45154896415457651537;0.965261666740687585 0.034076799498837580249 1.1929872447664076063 -0.95127055757229772581 -2.5916778931420823007 0.44759208694028773667 -0.72508286657593656876 4.9001195771537879864 -2.1840433737673627945 -1.7811630906195183854 -0.019106865670494212889 1.632503879063979646 0.87590386357382077342 -1.892953234009736363 1.4598918017573425665 -1.1997334053296451195 0.60276990385621798119 3.0900912108405553802 -0.6188709773241035661 -0.32177147550514406671;0.025405549087591627888 -0.37583162341716291888 0.51392358058048670522 0.6859732959853195311 0.027020349287555700535 0.27202505435917034848 -0.33932924941908043648 0.31561939971153979423 -0.36159676039952037829 0.6870781183625341848 -0.28555668015498919532 -0.18699660673755538753 -0.26501751923579341952 0.052904895133560211895 -0.53465695277036096034 0.11552414522973072919 0.15918517928392314498 -0.78264502432279603461 -0.23535800245722685031 0.57097988318309744749;0.20279842682763438155 0.84894683565450845819 -0.30024535363808285693 0.32012448086372785605 0.16441908953424028139 0.43391574727582943316 0.30847558778285066872 -0.534712785858210915 -0.38871547232135317262 -1.150274555679469568 0.98838133440371611638 -0.38773287011566370808 -0.064716950177734433591 0.037536604541545205704 0.13324784054552532564 0.62456413876404759389 -0.98313819073536101723 -0.33725099746332615203 1.0714860236096703794 0.87825999852820535452;0.040715022972038376892 0.80486879095639496384 -0.077036182694721996866 0.29967931629804733795 -0.33853879731056890634 0.52064870456310474722 0.48689712017384961795 0.41998588456865898477 0.033336885611129532525 -0.63101280085280075927 0.57332563578952377981 0.019968115509020879089 -0.15414360508390168025 0.21241214348647063925 0.16650217910170467261 0.16214027488683185885 -0.81042687586382711196 0.52474295400992898575 0.34225919276851413109 -0.044251791841667796612;2.0068908830713998448 1.4253927394727914368 1.2251284791339827063 -0.19667870840709125724 -0.42160471766902390955 -0.19417452044464433847 -1.4275294778554978858 3.6706891023702863386 0.61789408415260393959 -1.4631034032038328085 -2.2987953848644591126 0.51010212576358293646 0.62277519801302627656 -2.8990381051075466701 -1.1173461261765824659 0.97628687255152202251 -2.7411529985417617539 2.3492154928685917703 0.32864056295838395272 2.0165048470888682353;-0.28093627065688986377 -0.080514346303801720417 -0.18089073074863656898 -0.024772018983317118518 0.32595576839575363115 -0.16336804989305067637 0.36363166360312298986 -2.0239353477730075426 0.41105650744301747146 1.5869384041891450021 0.25986865129796798968 0.96642286073807626146 0.16465185037972002169 -0.3390365560031604053 -0.92412759192899140981 -0.41781059526721631148 0.39286528349958199646 -0.024338766894433466054 0.36100201365287176714 -0.14059235471349126878];

% Layer 3
b3 = [-1.5424254747290810919;1.6400520706492573986;1.4194711901500920437;1.9963258905735274951;-1.1567858716586059131;-0.95531828272576602146;-0.85032590354834380886;0.072646741362737313197;-0.7499823002858243548;0.195543923851919349;-0.48725684563563670393;-0.090554885411515587124;0.47552658529947650079;0.97966116310751238938;0.85717184648642308353;1.0878558098417607791;-1.1271862962713186107;1.5056152296851794681;-1.5412342657039979077;1.9579366283065975374];
LW3_2 = [0.61983616303639998968 -1.7554065948395616292 -2.1670316254929611333 0.78495817349406571406 -4.4485934235767077283 0.362058292216296429 -0.18856795978942833547 1.6384710891516638398 -2.1994601327258695989 0.46081623702431068201;-1.387775906909089807 -0.51205425249868508075 -0.19183637989945342972 -0.66907010223918395031 -1.526590520456226896 0.27184597064614079986 -0.13742092469642627761 0.26124124254296521297 -0.04031757146881376902 -0.87945446314942143928;-0.40844819971680668136 -0.33822245923935778666 0.25564820817549649412 -0.31769174348298995225 -0.17504445476645602575 0.39831259428125576072 -1.4786427114449995912 -0.079442645911530038183 -1.2062930819901946933 0.35899103272345306292;-0.94184251380167083312 0.11847371741817284974 0.13467747018392292602 -0.76612378882787135481 -0.79209592598987887957 -0.40729782563749505897 0.69962892168922075076 1.2781157934861115955 -0.40892097632202051294 -0.54077572966895415263;0.46708355648569832574 0.95775616095326132626 -0.32684054606155338307 -0.043457010216366859234 -0.33786186479404162197 0.75039116701413599575 -0.61611693588070115535 -0.046567899323461135752 0.6758009559419128065 -0.78628486397784491668;0.60030655079369665827 -0.52172077363526292437 0.56862648970196871812 0.11471743561209385431 -0.63724334377705471599 0.80345200747716016831 -0.69344852847560389808 0.84833401348649695173 0.52620349076672090494 -0.4509190444946687415;0.65289399362036271146 -0.63833225097908685708 0.78132227003984577873 -0.77767444202854774105 1.7372888040390179754 -0.34564646392276121567 0.39526809305909332837 0.49140995289299677085 0.16655380727043717082 0.77088957868093055392;0.017317925273063201896 0.58565811312987847703 -0.33356671110133828684 -0.4698817674252389609 0.63023366495114130359 1.3589815450486537607 -0.18151282632554779917 0.4612988974591278879 0.92585061468100893212 -0.048281686926920044933;0.7710465345011430216 0.60387268605784272246 0.029489096302296066016 0.87601939225366465269 1.0946317680875654599 -0.26369271531191174063 -0.15557660670323994467 -0.79054219043078710616 -0.45573520431890168769 -1.0031337481024669156;0.7601783684970666588 -0.88813016236180108987 0.19717724981771367343 0.57079225361615371082 -0.046778476472065670666 -0.16225937686683614136 -0.55843632256783448664 -0.14079612379789721577 -0.61924283428856785605 -0.21346465100247827285;-0.33335072929464332203 0.98649169236237777003 0.04802272007598431397 0.12435257041047721727 0.34918852202597971957 0.47960681376479857851 -0.7061532859427185338 0.48563612670464950671 -1.2497450800053409026 -1.3153127891533911153;0.13685872435041518402 -0.44765993178333374214 0.24378711011399112341 -0.92085819989909867278 0.82011334308141337068 -0.13928322909722556933 -0.54855865960848537721 -0.39997013960931282472 -1.7727391778369299136 -0.87914502919612047549;0.33239857519602827862 1.4091417150990588336 -0.43663574324209020183 -0.64828500020486889976 -2.4227811219673069942 -0.49156497336617538396 0.68967659525473756776 1.9256808410803771814 -2.1644218415239349085 0.60074898080033500847;0.21658761686527580603 0.53142571439788288679 -0.82591510779295684852 -0.5039174995582318406 -1.1464579422212517468 -0.71668106813412846279 -0.89868347377005308729 -1.0789675853569566932 -1.4201183531257755011 0.56201061419127407159;0.0085040316903214115823 0.55946750353307739267 0.24022771788846741803 1.1790460858520588339 0.45443411016234330768 -0.11390739670662516914 -0.60327126578401291113 0.74868910361952489829 -0.37784160808211036953 0.90222862545895299302;0.17437317385858280838 0.36485174964346545057 -0.32363598750132233084 -0.3953747319412925787 -0.075655554930191132312 -0.019377247089627180898 1.2638615207724193112 0.091656283852711767368 0.80870505211722609751 0.86015091483135674988;-0.62341280979658542094 -0.30648755367748997669 -0.094845206467743525813 -0.6385716443626786587 0.28888678003585682719 0.21192659495417220938 2.0052091191465799547 0.28422278897633251882 1.1400724154935215626 -0.35111531360593878359;-0.08793972247724343716 -0.73099591135155850274 -0.38843526992317500834 -1.1712059965852792409 -1.5694103305763229539 0.62628748703462144842 -0.055748433595129404106 0.10483436456319158991 0.77643183286925732123 0.53947170153692058925;-0.65479093717741720937 0.08860276530976254894 0.79423881964764286856 0.27753384099197309087 -0.42813559169578269126 0.79230453819358337419 0.39640723078651685096 0.52128767351449956102 -0.77081925477216028941 -0.8976992355933084422;0.20343372549592134146 -0.9230424415719531428 0.30176231947025872193 -0.56209769574842605167 -0.53472690799927946603 0.3788628856381520138 0.43668691101480694439 -0.68426310225816977528 -0.62449145150207607813 0.30650927508338193794];

% Layer 4
b4 = 0.24718412720004928618;
LW4_3 = [-1.18637163019038816 0.82576276457737896042 -1.6942812629037389272 -0.56402066090087232819 0.59583788310808494249 -0.96027632178501942661 0.68104923357545621432 -0.4615558619492842185 0.79001709660253549572 -0.23675528629667277891 -0.52794579536235208828 0.27942051481206009456 0.66986902484828314552 1.1563319007328729526 0.18122073291397439165 0.15346622924851724412 -0.42404762359463149535 0.49213769158754544497 0.65579206048353644309 -0.57934508394977202173];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999934;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
