function [Y,Xf,Af] = nnmove_69(X,~,~)
%NNMOVE_69 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:05:26.
% 
% [Y] = nnmove_69(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.70139767883548;-1.99738196042707];
x1_step1.gain = [0.053913604005474;0.149967019141203;0.50069484362843];
x1_step1.ymin = -1;

% Layer 1
b1 = [4.4062735974467086564;4.0309164440583016287;2.8704184402904715512;2.9555616230335015615;2.2081101101214906102;2.3237130778893209104;-1.026689078640133701;1.8591694098348252595;1.844188005029588906;-0.46566479791234016705;-0.96689510196457706392;0.86846188738899221526;-0.54331102719977586446;-1.8429023892539844187;-2.4981523849179869678;2.7738127209219878289;3.3649381068617074675;-2.3536585937916068012;3.7798313264939000788;-3.953070840315384693];
IW1_1 = [-2.1586950801531039623 -1.9529251104646079273 -1.141560832250672286;-3.2395523989880556925 -0.75194505314392290352 0.87861202664947224417;-1.4215960334516566377 -3.5908727341736716987 -1.5627630022002552135;-4.4845192449795669987 1.5193337631843444324 -1.8011733382973282858;-2.6019434577644906526 2.5114284914434397145 0.83673332498306463023;0.34304006481150650654 -3.7184127569934433133 -1.8128532746446806012;0.960366901570860243 -2.0374382854889554473 2.1371618692779286164;-3.9948139704659211269 -0.86610688713947536765 -1.1512893619077901874;-2.5203288052852261814 1.8002354227253178909 2.5137344240545229646;2.1991884539463746329 0.014374422764947131226 -2.3718796563184998405;2.494711336236202559 -0.86188657795531364858 2.1717444886571404261;2.3881502855039928868 -1.9421499153566197382 2.7345993978923393009;-6.6485789489266062802 -1.805483381880101712 0.015447909190673247276;-1.0511304510866381623 -3.27207450429084723 -1.8220043940560608497;-0.75589568398083173406 2.697144707416125442 -3.3265570109486475303;3.5394275187242940639 -0.0983927578082928328 0.072169074153939180571;-1.1898697597430631934 0.42506632517806580696 4.0799763555733372655;-4.0626195862247964641 -1.4530043647834225418 2.9788635988289149381;2.4557017161542438188 -2.3960988413510313499 2.7615272567122581826;-3.3932218791998995933 -1.4191784831983151882 0.55014457645703640498];

% Layer 2
b2 = [-1.0655838777341921642;-1.3049918509409019762;0.98020293074250364196;-1.0969473968253040663;-0.71814125448547838637;0.11522567374204614743;-1.0769265854182086262;0.87246413484932727744;-1.0188269609607318866;1.4789155206895563399];
LW2_1 = [0.4312485530169843928 -0.19286934951917766856 0.2726674565372122494 2.8626720407465771068 0.60815840650697372549 0.1704656815408163717 -0.92182730933190903944 3.4491739780614460997 0.90603103373554616518 0.59394420669222025566 -0.4765914017959340665 -0.44160608984229243745 0.083467282420044516811 0.30362516458403032704 -0.29079800293979773951 0.28474014085236515337 -0.030945299469806494819 3.106533604334648313 -0.0072490722589790348995 -0.24017466372740514657;-0.099176551444083896336 -0.34171340821744533578 -0.097923079693900252907 0.27537320381540675296 -0.25055918267227217378 -0.62705208970309356253 0.33768556049354270243 0.056454918252598670914 0.46419840493586900232 -0.095616507604006514831 0.12898833884751659262 -0.10995986849627768789 -0.15422075514435276689 0.51450536283160386297 0.049874308222235250176 -0.089994610651593628936 0.50401402747319179465 0.42352860244677209556 -0.5548214582066982592 0.76210944193040630612;0.072252114108033074769 0.53960191359361076024 0.029516719248416766613 -0.27575525662466471299 0.29195943426238107898 0.16043570850693270047 0.15484615726456257834 0.48575167596615981269 0.32374486162542975842 -0.53570068142540039346 -0.3916060134509364854 0.25228534907655847386 0.49502608233191924825 -0.66343369857032985504 -0.45229682509441954119 0.5145414651384461191 0.15995822166334319747 -0.55436485650079869725 0.12286232451110856712 -0.015589252235804242075;0.076284161877101436255 -0.73678288284526838314 0.63450824151564666487 -0.86122579587373004895 0.54507736501680226215 -0.70497746356033785808 -0.1132217051987956663 -0.32298943530783325029 -0.22772294247804980571 0.080262649027225324572 -0.36336056010572193031 -0.11669194705651013411 -3.6395639202557861225 -0.64968802753648757786 1.1531761114820173741 -0.31609689769577209439 -1.0721807517680026489 0.42249537268704434601 0.9769539979228180071 0.25256166025739618108;-0.46913274262393384051 -0.70459496670571497567 -0.038505869347536032798 1.0667138479794551209 0.42805160298645739125 -0.95584911510988623817 -0.041147974974256332215 0.32936786081468150122 0.39767406748476397116 -0.0092545761301328424708 -0.11270461495055726642 0.4322884602902006268 -0.60609464208259855589 0.50843062258056315184 0.12947947551946767386 -0.27012639740679444955 -0.41649360071739416345 0.99950721895727878685 -0.050273508013165872643 0.46130937421851897495;0.069798052875289798291 -0.18271743856514008342 -0.015412168134646749007 1.1062627710824657346 -0.17801908574461747237 -0.38850376076835468897 -0.73143706786314921509 0.83384742969981973104 0.2368056777992446349 0.50878044670268396388 -0.33321623799960370382 -0.88390753757740248009 -0.10630039789434742037 0.40517619633704399229 0.63914459279097068922 0.4619940482361821199 -0.73642376148501342836 -0.54600742079425002018 0.16413962941129808804 0.52099789624066583649;-0.52357952156749709705 -0.73808184319503977733 -0.21721441021704115948 0.043209567415988477113 0.47567485620073379771 0.20677325985959515986 -1.0308025836542638043 -0.21004807298379685188 -1.7369154283763050817 -0.041613747021685965066 -0.18992906948648327625 -0.84838746244696383592 -1.9975632372340113019 -0.50917009329223117398 -0.80313496971719633422 0.56599643019814471767 -2.4155026797999412658 0.15351903266985947316 0.40309828484316129193 0.62811939650182080364;-0.017741768073792373028 -0.23493417898766513763 -0.72724837318064450287 1.3292851208241833749 1.596132375609895071 -0.019489686636250027479 1.100796338842280564 2.1285953624414353236 1.4274994162044523094 -0.77178807932063853148 0.6548929416135564896 1.3362853997467827316 4.6578712366566472625 0.59649620837048944466 1.2599794559013575146 -0.35938965381186810388 -0.74811133094800941201 1.9808128509793663241 -1.2347453169052873267 -0.61955325836305707998;-0.28225020790109445201 0.65105626913966352376 -1.1453391638348826564 0.64553684758964480217 0.055637922422213798024 0.4389216085092447206 -0.29383379456635855265 -0.28644368206023029799 -0.068940082163692392725 0.056029693579582061369 -0.85572947066909332836 -0.0054442945056325181899 -1.6902077039487475307 -0.20449819432783061801 0.78293762186383897284 0.47387230820715070534 -0.60854980626558885515 1.3087584504144769149 0.84434920644714084315 -0.49031058973393065736;0.22410842747640122297 0.35668950404548899202 0.0053993287988572738478 -1.7020769260401089618 -0.84740760584013674617 -0.54579489755628551872 -0.23137358270050284448 0.27837428711752670862 -0.49452975558420197988 0.28481644396601735192 0.23236300109251023516 0.26391382441957178528 0.065291985550419109896 -0.46459337928186494882 -0.13516420248842131446 0.5716787848578428477 0.066744300853603028001 -1.8458771292101663342 -0.95442859779531552533 0.3161925682962575257];

% Layer 3
b3 = [2.1825277405687502075;-1.5349896209453173235;1.6241483055819236903;-1.0999105544421854397;1.4748560485432826717;-0.65710843288118325756;0.80631497117936690167;-0.56966113768359893932;0.58294079992077107999;0.27559819281678710201;-0.2271925110329433839;0.13061421713104703901;0.32954812262235255726;0.77845477974993693149;-0.22040061236351171647;-1.0784808133424401699;-1.7029122005179644361;1.6075535661581441538;1.2868385029200331005;-2.0436277962143183373];
LW3_2 = [-0.76420837363481475268 0.34353751052201436655 0.73967260671297418995 0.8394794469072949239 0.24665645370160357852 0.22292791662779884443 -0.535322856248502843 0.65832385651021252393 -1.2115316730609266838 0.75466520742282106049;1.2472459940933171563 -0.43214239774538149019 0.51691000715887602812 -0.75188555897254671923 0.10478245272629502227 0.3187118133641465012 -1.2374712297766037317 1.6202792641026289022 -0.40588890595317461685 -1.3970707294526083508;0.0042816731382502408454 0.24714500765147148775 -0.69847546041143737661 0.18719063810388172908 0.44183861264520368772 1.0595659334719662592 -0.78990356274998430042 -0.088042185280930773672 0.15773506472318823968 -0.61974712359783201698;0.32827722349275956226 -0.12223228094627801299 0.72095625780936967164 0.30197286286779700948 0.80951696167612907651 -0.70347557650784353633 -1.1014596294103080609 -0.88303333667316430411 -0.28370011218972535083 0.49404955331359029502;-1.1136867067685836119 -1.4771216475707518168 -0.61113908031629571305 0.47134465649636619888 -0.53399097293297248523 0.75725387195736804102 -0.1762247974696661279 1.4652509764525063485 0.54466190020398486116 1.0283316304889162929;0.50912441515873285702 -0.10970819343082377495 0.57367860496872036258 0.30875700357545576846 -1.114911256619586899 0.79229120948651809986 -0.70489995956812767641 -0.76509777085622332482 0.69870750767425304772 0.0061685918406519484047;-3.2914646800797888737 -0.73235430211876584305 0.37359451344555200114 -2.8928776536020572863 -0.64598974575578049784 -0.13917575403224793917 -2.2920634063720530804 4.4083672270114924174 -0.7632479607239708308 1.005263990638421312;0.080332221856757618506 -0.28138610702853905643 -0.89121516256635924247 0.79340116922118830711 -0.39835350031151595118 -0.10798135469227784777 1.0754125270731706987 0.71671717650987398773 -0.50574721786218646002 -0.25007970512903948679;-1.3328119758952627905 0.35301753408388669708 0.7090454474475046398 0.21964209307606016863 -0.33754279307185486303 -0.61236506084714126263 1.9087871681090073928 -0.36080478195548359999 0.57954330494946804109 0.60631865263085926721;0.27795589708077783619 0.43810124293012803198 -0.35806182038947531598 0.57180115832931799336 0.26886227371558762966 0.48761816272572183761 1.208974387216075641 -1.753695738259325676 0.34630122589604933614 -0.91090468284903558516;1.471450817252958565 1.1039888314798960156 -0.29406866372227280504 -0.41794601069090331347 0.19432402678482371683 0.064060808917562245268 0.21747507438102262056 -1.7699690050110739037 1.1833374747330616117 -1.5448014447877942423;-0.81413902394772341697 -0.8801342915670690159 -0.25997964505347642694 0.34831599921085731886 -0.82645978489373395082 0.52899868383314507803 -1.1202790824567372407 0.30918984760560597191 0.11966034498442724987 0.97369294941532169574;1.4475739327966197223 0.48192220628430737506 -0.098570654054811412959 0.62130281603257409007 0.40747822410692791095 -0.56922689020528660642 0.55708398646232093476 0.15208711863733823111 -0.092795415696370314729 -0.44598092627375396368;0.024839419135229291041 -0.18372888764602068878 0.40369245018355581767 -0.94249026152025339176 0.20434616665145852177 -0.89412926076541687781 -0.5973899124529568061 -0.54163093732823419657 0.52513808963728314527 0.30348968947694465736;-0.99768342321967984354 -1.3435055663820612004 1.2615152305639576458 0.19744325573895560311 -1.4407377715330784707 -0.66628659985325677795 -0.083437392726642439778 -0.59522863252406899015 0.54730776338718223339 0.18262799348307806602;-0.81250474437629516267 -0.3787548332784342886 0.79232630821482508132 0.44915076457769487206 -0.6271344849123713372 -0.85255391145019854271 0.83439827884659101276 0.19688843580130221955 0.077456824197909363017 0.29125058455776875466;-2.9003864454859700217 -0.23183128293681332099 0.071078830964577385809 1.7622211991578322632 0.70660150180349357019 -0.93232049643749370649 -0.04084228322825302071 -3.3163625035176869105 -1.884845371310583273 0.91905764524980226859;0.23876161226177319841 -0.93655056417618398612 0.88784151823684631655 0.59872577374980551213 -0.56650122944611069897 -0.18496694084220433041 0.10434231712827583827 0.63929583296579117757 0.66022044594832829389 0.42938143403054596092;-0.80013865725891741842 -0.41550860069389128348 -0.52759665668695565621 -1.1992064776071293952 0.015301097116957672328 -0.45282088265440473274 -1.1854943900051202466 0.76844868866847493294 -0.52760367476450287239 -0.027863257831226596883;0.20258677833049923422 1.0171171445401878675 -0.16926047627446499932 -0.33499405183832026145 -0.84471316172335608741 0.12547595402597883085 -0.48446239774264865385 -0.5297618700596692376 -0.82795251621177290424 -0.091474997795582935201];

% Layer 4
b4 = 0.36102923133353326257;
LW4_3 = [1.0414905848583164705 0.89780734296295439112 0.081965982530867911859 0.066218744101543186575 -0.66199573475238071563 -0.083991299071944899857 -1.3655295176000594726 0.038225654630274948087 0.40746852789949050688 -0.60803048668099146656 0.55252797831581756949 0.44622156047183797467 0.013316522188784703923 -0.07482154258057505114 0.054288128343346168936 -0.07641237836081773982 1.5719963673377803648 0.59664882857402201655 -0.44020612694737304427 -0.11751716796401218135];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999934;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
