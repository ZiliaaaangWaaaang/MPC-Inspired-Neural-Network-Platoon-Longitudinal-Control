function [Y,Xf,Af] = nnmove_70(X,~,~)
%NNMOVE_70 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:05:28.
% 
% [Y] = nnmove_70(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.70139767883548;-1.99738196042707];
x1_step1.gain = [0.053913604005474;0.149967019141203;0.50069484362843];
x1_step1.ymin = -1;

% Layer 1
b1 = [-3.7860787047709800746;-3.2658124477845480449;2.9468479849541955318;-2.2825919407896733127;-2.3827565739358127495;-1.8681744489277765098;-0.8510197671804891062;0.45887976802646096575;-0.3734934705121207843;0.32561289218141359347;0.034690836536694816261;0.71431505760254032644;-2.2874316589633578722;-1.9241203795887962258;-2.1827775827771893624;-1.6619012956653000934;2.1970055303321847084;-2.7909282364146918987;-3.4496912070294158958;-4.0013724297310258038];
IW1_1 = [0.22995550446957532809 -1.1901900063746577718 3.9544034543884274413;1.8045533103377495721 0.78891474176377041072 3.6898485380397434419;-3.6177268252352319244 0.93895481500858946067 -2.8190945724717932919;3.4831178720616389199 1.732343287742796667 0.66613482057152806348;5.7553500364249012833 -0.71795325018545774753 1.3306591930125359902;1.5147368491213921704 3.3464976003698967411 -1.8636261583335507197;3.0325639452649535421 -2.174187742375737642 2.2031571214630569777;-4.2562783073815761981 -1.9898314607248737129 0.33673563898932884486;3.3526351968794729785 2.2311153281940572235 0.49401870450908957899;-5.0315726861453207164 1.6651163736847247598 1.5449290085091611502;-2.4432209689957709031 -0.66263639033214316587 2.4124892562354474101;2.1337498531592329343 3.3419869341853369882 0.8693941450427320472;-2.0464677529364316833 1.3387328865693697288 -2.2461787078576151977;-3.1141508294648923005 -2.2428302485538824662 -1.7288042111198980155;-2.3370027239672666042 2.8992050881961888287 -1.9563697854458028669;-2.571565055954872836 1.6791356145569280578 -2.4918950149887888479;5.1380860265498471406 -0.54487234006025597743 1.2834170384321805791;-1.9412677093148849039 -3.3436034357710315845 1.2313360879312074125;-0.80536953536521271868 2.6590009336666691198 2.4783961639843479219;-1.9384811831740755839 -1.7629605416241485027 -2.4510951973844012919];

% Layer 2
b2 = [1.5186075507437446497;-1.4756824975015407908;-1.2417468763695642675;-0.47682615428587438178;0.33697869423259119159;-0.00017699854748838041163;-0.59096767064863109375;-0.8834698103635313382;-1.4116063548647683756;-1.6214368377303909341];
LW2_1 = [-0.59108146426111696226 -0.13011546715354341264 -0.14532979150954841718 0.47733429546649230879 0.065070602480068934215 -0.43389127427274676307 0.62811345072746882501 0.04700074342336797717 0.23824331314453145447 0.47914250332340835303 0.015594260045115212326 0.56833311782480389063 0.11769871111909049888 -0.2758995148715968071 0.16971482073720509098 -0.43061304774382980209 -0.03908676500869149445 -0.16879272303439221692 -0.26949837568308177005 -0.17918142677782608607;0.11156858939138789011 0.35190739724586478365 -0.48063923570616334802 0.28729087424589422328 0.46889702851977455023 0.32483596776983519883 -0.4175151117035790227 -0.10263427246995082687 -0.28039129191817868669 -0.21383532298430274476 0.23336716974488402876 0.060915907924979417754 0.31858450240940366927 0.35975474828239084601 -0.19154407337104226161 -0.25072001280070577156 -0.60619362193587988941 0.81046071844502765025 -0.085318574802308616567 0.54470313439485229523;1.0389697571959879419 -0.42049500100089204357 1.8496878907078675436 0.28004341820356060122 -3.8178404375697256867 -1.1925104099942145375 1.8144211338824207669 2.5986010505267973514 -1.6693138961034525991 2.5395204309320420499 0.02375793040178765525 -0.48144981927056434978 0.19682555610597649021 -0.99515234247962847114 0.22224445060070108227 -0.93081453783216872022 -2.046732483687359494 1.3410517946790625476 -0.22606543534548648178 0.34107977711799503107;0.55421258979221377228 -0.26641212209284070855 0.12025959207046542365 -0.24357057959711483908 -0.4746729113828030977 -0.8123796471040466427 -0.10702294667476694445 0.58376203320279484998 0.47495119679949421299 0.73066403434982241105 -0.19435146094344235568 -0.08215068209511165731 0.54831271339382925412 0.68446696580569177382 -1.087157490179285535 0.22144795712429438117 -0.62605442143998157878 -0.3972294603240991151 0.38786258644836674181 0.76802047119219096771;0.070022352270920851236 0.52718733789106286824 -0.93807555639557416161 -0.62255520867045588407 -0.15010362787834508058 -0.17589452582543407821 0.13474486096575921668 2.4698362402391187409 -0.23614134093121727509 2.0713884850180455111 0.37796753970277452428 -0.76528836006758083066 0.24020531606208903042 1.3261390716852343719 1.149273073612999907 -0.6723792930631173892 -2.0678735761836306573 -0.86530866240768689046 0.08893551059146999338 -0.41251955202873280548;-0.16987146371066785822 0.745863825113126655 0.6941387530289395702 0.17895600240176304241 0.56768525833861893659 0.68764099278032364548 -0.071145546913913393361 -1.0334451952512264672 0.83615063335726791394 -1.396944631116006752 -0.40766087397831651806 0.70063817612376477761 0.19659052002141327864 -0.6342388051435953189 -0.75156509699956897119 0.4830962836524422821 1.5954458200023899916 -0.32847444089099819831 0.36661402061511316752 0.17239241851720707444;-0.30924855221102293124 0.50246352532084848086 0.32285805287254176754 -0.22386642491181915626 -0.60649594656223315692 -0.21264646049500338099 0.38203457071925794875 0.6971978091108538278 -1.0087624267561710045 1.1436294347578492836 -0.14229922448621795672 0.11315289858908450515 0.59463120653354595291 0.068845418481325443283 0.45180259891129548322 0.56965940295635875135 -0.15693904254634122308 -0.21327610565307067447 0.26671460854616074743 -0.32472907137094281227;-0.73424589814825491629 -0.091762685963217613394 -0.37627518070092619284 -0.29041671146998343511 -0.43151245202732713135 0.51366131570298934061 -0.21101641095595227715 -1.0536553057047912674 0.063522654001271827706 -0.0683865627312197355 0.37860502534440809708 0.27916156530343955167 0.72095532686804908451 -0.22683058456740351483 0.078316523378168204084 0.49394617583999106403 0.72128285706603056937 0.62506368771617915048 0.64025495657587905285 0.36030366904184973897;-0.3496772983705960236 -0.29832976375851860684 0.47637846693993562974 0.39740597367100549686 -0.27844957846869794471 -0.04152397729737101334 -0.10828889432814409188 -0.276136714260155125 -1.1172994544197620836 -0.69835854292500598728 0.45386432574838564413 -0.23310961433110863328 -0.20117925356544263948 -0.57897300215123104206 0.25761060325534601567 -0.1691799163933224992 0.35625651103756889038 0.40383468566342056727 0.019610695507535060023 -0.19991758443381632548;-0.65928807744816386727 -1.2263007197156274852 -0.083344270410780518787 -0.51029295889439607592 0.13970343704015081299 -0.68444595308094180464 -0.33530363016395353659 0.51108782889522685888 0.00064752593492690339698 0.10322498358086043546 0.7306242948332296594 -0.11603754106710426064 -0.19356988328375829278 -0.79380761143102973598 0.25565483161855134808 -0.032459190739856577657 0.3694823407893884637 -0.059702965469858232384 0.44604889809127118427 -0.045598255668936216178];

% Layer 3
b3 = [-1.7527496587510302817;-1.7944579964845015496;-1.5799163912977103319;-1.327836787690363396;0.90128402172124688629;-0.63065088357897614024;0.59787468365678153592;0.54898957983753693401;-0.11074544803611741095;-0.20171901451881540934;-0.005665910152658978037;0.19148237639544041233;0.39452864759750638779;-0.96424187142415918039;1.0904104721421747914;1.1735124144931043944;1.259722802215185844;-1.3237179999856483192;1.9153384457304587496;1.5073039775582040001];
LW3_2 = [0.32523716010722542036 -1.0321572090890760443 1.8007296776747760969 0.08021266624938959422 0.48858985736946602962 0.74660739577947154988 1.1945235931492057535 0.89723908526340689917 -0.22425690905074796566 -0.15692220662969452727;-0.067405620531812121543 -0.073955947405886832136 -0.31949887342522836908 0.8523513937586838507 0.20006731026859062017 0.86341760500978403936 0.9636847465191606954 0.24449388600509819325 0.80820699179252730726 0.0088023150444068824771;0.0019812977191600378638 0.8800571521674753761 0.94757298514944454659 0.056933460347119844991 0.12095080097025609489 0.9150829451003035242 -0.76440580068886376797 -0.38478003253680376217 0.019523462387807555274 -0.61644713722329758099;0.23396547127639408248 -0.54702794113965702572 0.36315001306090821664 -1.0029834022422321471 -1.0396963698724934755 -0.17851631441162252312 -0.46224538712274348962 -0.38492304012279837666 0.17629946363935364295 -0.58728927693449717307;-0.74828990838231490557 -0.023569763576965024887 0.74775389211965970215 0.8850423914106253509 -0.53212411482716337474 -1.1049411629628866915 0.37019276292168568077 -0.26602050727093579097 -0.3326362791225532245 -0.53928011516952789606;0.10595488593612559236 -0.73018609192254990692 0.42135806861755303876 -0.50478249054097357185 0.89823881944003336475 0.30028004897833621145 -0.32128168509846122269 -0.64601738175967970967 -1.0849271586175577298 -0.079692065073681095377;-0.77457770463016184515 0.39204521298702404986 0.94177184689901083381 0.47109746193247376 -1.435545274603514887 0.21002632503387702601 0.7497625069523146113 0.31378863444460741716 -0.12701821290005027576 -0.31917216277864662866;-0.28571450518703123134 0.96198773459311071043 0.52207783375938776604 0.093892254415560330583 0.029420394034697986557 -0.74201712902502070524 -0.67199487556395764987 0.68316176820652418922 0.93583665527413695262 -0.40025240534784445323;0.71567624931329876237 0.7377386908894798534 0.62633623228700618935 0.57131404578182209963 -0.26164026003123175279 0.028671947214785512004 1.0385674870944436865 0.74218426686809635395 -0.15674628891849165524 0.11087339824008424216;0.30101426018283350405 -0.17413299749640159808 -1.0769756913502142037 -1.2573204207444708125 -1.0422915342357916835 -0.081683577563723602788 0.17525414379453693736 0.65638142321565473569 -0.62754289752940994873 0.26460287200567622623;0.25954821518764531474 0.60810399042064033903 -0.33100942789664755672 0.38767978061958668912 -0.99844012382280700191 0.17610435058604351211 -0.5733408220893038143 0.40531872018174613936 -0.84025353323368534575 -1.0856656500020267497;-0.35597429960593213183 -1.0894264952682193304 -0.089737831831269668226 0.64127187709000921245 1.0460992739359293857 0.42803513708717882968 -0.37964251360710221661 -0.86546068164371448006 -0.84947941466611798234 0.72793794931035871176;0.53463923971354165854 -0.67927487374702344436 0.73255959037748674678 -0.50992987727177596646 0.42071822478953324609 -0.75024705047755524401 -0.21370047479108311705 -0.70338154829147747638 -0.67920863854791069247 0.032311959459146430418;-0.88245497881851608923 0.024938569312949750156 1.119115361409636078 -0.2499539282251990735 -1.5342380266526900456 1.2055589036545997228 0.37060276489718763093 0.84389476546457020678 0.55460426638681847855 -0.62588293792846261265;0.50359595687562963562 -0.3687727652096772224 -0.80814442180812107175 -0.23792779607804043218 0.63772893369521310714 0.14155027757217589213 0.9720688047887078298 -0.62889506932335381695 -0.43976284005033794422 0.51570133440957421911;0.72809068070229721048 1.0188034241777166322 -0.62596863832745119893 -0.4010502340697146284 0.90055484258084150806 -0.086429893630135395943 -0.72761791982269041767 -0.17023055932594508 0.057604959554198448268 0.34145359959570054098;0.77785568016283002102 0.24533047777690547564 0.22267297754495460338 0.30791815226677499151 -0.55812763194474523942 0.86568280122815344235 0.69432437534219970665 -0.51710307340155259315 -0.31152907242235200469 0.50406321292261679901;-0.69660510951942344882 -0.37599915003393685753 4.7295779421926544828 -1.2623494602474205628 2.8040844079990701054 -1.3045982123587838153 -0.38789810464261575973 -0.62471544621662289387 -0.41749515063274111881 -1.4200655621919249239;0.53744074138968267462 0.25800775250575652686 -0.66887871841745671908 0.6807090309735793765 0.21910001565306871929 -0.20503207934767625487 -0.3019773323372021423 0.71426858007751858892 -0.90155973395945110394 0.75409091692386087669;0.10481917971125637168 1.1183063222234828071 -0.18355195968715129484 0.26006121578507268577 -0.76775823461702574768 1.1357064776516838656 -1.1613738964422712918 -1.0512443381126566067 0.44723114206876735111 -0.0083669773181645444582];

% Layer 4
b4 = 0.54215998030337297919;
LW4_3 = [0.81597210201307868171 0.44373166904498034802 0.33986390761367840652 0.062669730465406914277 -0.41393553468998345313 0.33405457383943737426 0.45289593442791209466 0.20595570283861552863 -0.12686683386062169721 -0.36451100504495465016 -0.10057859531060760194 -0.68525709329153239313 -0.62232319045581252492 -0.97351318687537868879 0.24748099575985962884 0.51461687417184676097 -0.29045496138183324319 -1.0763863917511884427 0.43456908433513941059 0.56878689850966557273];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999934;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
