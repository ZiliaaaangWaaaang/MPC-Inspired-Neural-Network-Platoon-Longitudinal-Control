function [Y,Xf,Af] = nnmove_73(X,~,~)
%NNMOVE_73 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:05:32.
% 
% [Y] = nnmove_73(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.70139767883548;-1.99738196042707];
x1_step1.gain = [0.053913604005474;0.149967019141203;0.500604127399131];
x1_step1.ymin = -1;

% Layer 1
b1 = [-3.923635059843434636;3.4788423779478971909;-2.6877019096064196368;-2.8383183633020867553;2.3259305626116657528;-2.3844161146004201335;1.5711563061752327197;0.22768422653756573149;0.024224356630458715456;0.77472325645417072781;-0.40624868250972251404;-0.80187029384173635904;1.9819760996676951681;0.88821536036051551566;-2.2775811463407320545;1.8476394981490944502;-2.632166914381749212;2.8715999882651299657;-3.273741705790623957;-3.8657752860137168938];
IW1_1 = [1.5208674017700303249 3.0415952762415865429 1.2783957797398395329;-2.8130514555601346949 -1.8917331718901089221 -1.5483782927872171697;4.3701953316605610667 0.16227882720020023188 1.876512778954652072;2.1177549145052148027 2.2490444065142662922 -2.1621961326868479603;-0.45605615765259105432 -3.7466176721797803673 -0.9639722989241670259;1.0885206787159455999 -1.6214237963722075708 -2.8327068421948382593;-2.9115389862019145362 -2.1424441890553449497 0.64581576805395546348;-3.4820557496534383368 -1.8074633362627627875 -0.18613284447085509665;0.046853601253892658562 -2.0868042872817307298 -3.2452765739623448127;-3.0848750572530119207 -2.0047757467833302591 0.99292161210944962502;2.5967825078447410725 -0.38679170860639344731 0.11988658374974836551;3.4785979984638117912 1.6725765216647194844 -0.99979456634436902895;2.5497548954449507086 -0.28323560777584494419 -2.6636371815619712677;3.1110473714574338189 -2.3820673851362643703 0.46637843151992963708;-3.6738774437510088866 1.6543520587837698965 -1.1432247975099927295;-0.11041932065686499431 -1.5856329167275606817 3.5128471132645597841;-2.455748294042622959 2.9615808881814498221 0.033813835134011427375;2.3530580858882683692 -2.7022503505957042869 -1.5057515280238253919;-3.0889241785723031697 2.1999266259303351667 -1.9924372874717983795;-2.6868935776192177656 1.3540078369019568072 2.2281063261937936737];

% Layer 2
b2 = [-1.6987681956873086353;1.0096380222717973307;0.57021042292577450716;0.54461438471246970128;0.28872907885482523849;0.10694348040874031291;0.42465307193034218525;0.6005565858478527641;-1.0391544191277874987;1.560447670792973085];
LW2_1 = [0.44705284853162657877 -0.35391034276185229235 -0.84807458603085272841 -0.088196161680501039548 0.2367118455481899697 0.74927892341530455411 -0.063094173475563619657 0.14573834524637530041 0.35036366226096077314 -0.56699861049418931458 -0.016709393074632972881 0.0012891234186665281869 0.49609460828738999316 0.29455956851332615321 -0.22685778491857855332 -0.052712272296692674889 -0.34809437299292822487 0.12496616848334396455 0.54408148856720339737 -0.39872934759427031137;-0.10836241455538794809 -0.077891193349256843126 2.0852137170708124891 0.51317740714093251775 -0.63855984604062676624 0.40756847464474765808 -0.42615736890415600868 -0.95738765340728215758 0.27445705295484090769 0.86487608806518900817 -0.35389142990391514454 -0.54591667655908693302 1.559394680245974385 -0.38429741182377369357 0.26309406608998170407 0.10223070526702010552 0.0055672322324734763166 0.035142676947585382852 -0.13785997954996373482 -0.27068100722614740761;0.052816343385100952834 -0.0060252644507307719438 1.1149554379995265663 0.79538864557794253241 0.3429807155961559495 0.60557272317906962744 0.20154946760536085471 -0.24533455857713909465 -0.54378980772561369417 0.16515340966638450415 0.030694183038423451804 -0.37320623836275285123 -0.25435491876901755726 0.51841031526289127473 0.41409619815646703245 -0.45270747428091467901 -0.53177545939009496223 -0.27520102455084488602 0.17134902041855387678 0.65273609408007260413;-0.26485524961842438207 -0.54735144298777194116 0.70584155353561273127 -0.9752930561445577462 -0.32386211184753543879 0.0070116431477893099988 0.77123953289989333193 0.35417273191636622354 -0.4135967095563932161 -0.57906072175326472884 0.43469217573892943163 0.60982107102351212902 -0.40550146778372764267 -0.42260470313067705073 -0.48023676565134099103 -0.15783279925900950413 0.090695602508794173624 0.25857927561553140094 -1.0492196289282798016 0.21859739685614401616;-0.24791964402748914442 -0.1465272474448901241 0.6270282836556592132 -0.54625714208355680146 -0.60437235498947261547 0.24845461361496617991 0.47070667840154734041 -0.3323639407582854588 -0.29783378691647249825 -0.3678230646358701672 -0.57580752253129918738 0.0098492021822154159766 -0.11935517384445012978 -1.0340658139014484718 0.88235726248147683393 0.48033880099931214325 -0.012001372682048927487 0.11478666934410647338 0.63142852672686655691 0.24691155936435457696;0.36454041737617809416 -0.74917052372195047649 -0.37457927506243382521 0.12772855983567688032 0.21010511036648618632 -0.23272418924082396985 -0.10589945129242173127 0.87503133107141284341 -0.50604564009584718232 0.47864402948876760835 -0.31790034122089078084 -0.44544782459566834021 -0.60062075063748221471 0.40327558362045551332 0.50100496171198194428 -0.27325917853159065185 0.047250912254493369902 0.75414907595396996065 0.20569400879861649001 0.73249371150092201788;0.4000851556209920612 0.3108418310378884275 0.58720659827167054345 1.997133394897173897 -0.20101989187560709293 -0.43761220256143479324 -1.7256938251769358139 -1.8163946722259414202 0.4705993005871432211 -0.85600644295910255366 0.55373698459033249275 0.75996013760431158079 0.91817462786641501626 0.59259337491229968631 -2.5811764785560722402 -0.16493851469952527933 -0.99410178768724255516 0.39560967420141202044 -1.6270717046838849562 0.67493304380656238273;0.4895477201204383455 -0.79597744178983276253 -0.7288905066187227888 -0.22164966432865659818 0.038003423404843125755 -0.99830001373257148956 0.0072112585354466712806 -0.82881108282100024454 0.12956326240858501153 -0.22798453842264113089 -0.94640163901196594498 -0.062644122475178296017 -0.37435614321792426429 0.14368695005533710374 0.53994300761174296444 -0.092979665767241856389 -0.46637254705654640485 0.020666964307001739476 0.60040363666964313705 0.0055161887535925130388;-0.28872479247333732166 -0.15112174072800266256 0.24509311624291196807 -0.31010272390783105712 0.7457280294929927722 -0.54877660773417302753 0.36435029822778919328 -0.031523322311142742969 0.36779285778465015122 -0.30059282730089448288 0.70124641546281740734 -0.15720383991497210996 -0.69793692934066431377 0.029073074531437162471 0.40107922075293900299 0.48670823376657856851 0.38632443860959408966 -0.024002384411480805898 -0.53075063289148416423 0.33004829179354022717;0.41298617394754599808 -0.30873126682849116875 -1.1392299241379908459 0.96979156295787038999 0.4048629683613260144 1.0810023983870715725 0.45028267088169837695 0.67506945463679912667 -0.069711164512123641179 0.66955546399016074854 -0.17093535960613945313 -0.26790991590729013039 -0.71566551487495788653 -0.17427142319801922077 -0.03984939820908359881 0.34389791935735108952 -0.19543792891472952511 -0.031687746230767289968 1.075865680630754273 0.084866494131832725945];

% Layer 3
b3 = [-2.0428841623631894819;-1.8014998116670573047;-1.5711390457575746815;-1.2637519302420252565;0.98689539315011287623;-1.2769022654162278663;-0.3367596372679137473;-0.23109710605918798443;-0.53333525675958193268;0.044283945408489122642;-0.25412751562955782081;-0.18332239453428658682;-0.83689973993184441081;0.86979931430516488344;-0.71434757696293449403;0.8957558832768869328;-1.890002567726935867;-1.7088688225650459085;-1.6229006296874508575;-1.9768029380966942732];
LW3_2 = [-0.0018607730520412875397 0.70165927970991259777 -0.39541535296149615819 0.062793820998206045791 0.98538637454212985034 0.38849352806403214533 0.55941353153819273203 0.38873239233704548479 -0.39885054008222414756 -0.65644813679974634013;0.70538945516163376048 -0.24643973233770788411 0.67207415268079151449 -0.85436793407988698146 0.061669065435136373454 -0.21891416302204436128 0.76104962166540490731 -0.29226505817301745571 0.53699103583248086746 -0.91139458967457021021;0.17771865417781493313 -0.73068119873372450179 -0.82486330247215577938 1.0210046032090807078 -0.38868684176287549015 -0.3310961036495876364 -1.2370249352980164925 0.76631844831957107722 -0.17367216697128587399 0.30705977751408808363;-0.31046151805320348904 1.2587110362298155053 0.2191602463477257956 -0.12567197803690424718 0.23973450438478030589 0.2006778923559683625 1.3774244281437049153 -0.39813668100312171738 -0.50747861325077547878 -1.223129142813904835;-0.88205204401335624009 0.54223317815814264797 -0.27769185302329152387 0.088330363119141525052 0.7778049317153835629 0.41519760563700064404 0.92919981724599454154 0.43755374035597288662 -0.6326503096128118786 -0.1395741792633398981;0.49793939864628700143 0.39747770785978642216 -0.69607618434357043657 -1.5380149148849477925 0.46255368974836408302 0.62463718050060945686 -0.79940376111281896687 0.7475848465117166386 0.033574311194135904313 0.3729231733336155763;0.12773819306164821419 0.086348622647101525018 0.88409597280160590049 -0.6971648981936177103 -0.49577255414604548545 0.69988567945446367169 0.91414080360477689702 -0.79287966406439858158 -0.79482083151232851836 0.72226022410474022273;0.89387056680736898251 -0.88330470382473647017 0.17373177180157950428 0.80189766025289632712 -0.79528610823954948295 0.47798730812646039734 0.17237213644116994304 0.96973003570104332471 -0.88513666413001457212 0.54762397366754234085;-0.24109808462695397901 0.46115882419747306065 0.32811858747907929335 0.11056755398569785565 0.77826846757237233554 -0.75018913544924126224 1.6138391324965248863 -0.50866766611660574338 -0.46789546429024053698 0.040220898887222550355;-0.62374670404355803122 0.95088440450887756761 -0.46733830939810300231 0.11902593212943710088 -0.84279214380547151642 -0.27754315225609454965 0.44118362794356835721 0.6173237930256391115 -0.94455838761202204346 0.42965771377967432176;-0.53267910572975063488 0.16448925132799638305 0.17824222365750297392 0.51663171835625532058 -0.20163569233157266347 0.58179368924686947206 -0.15691948576307632179 0.84074753310694483321 0.74299732468102397398 -1.456070194618361624;-0.57892588087818530607 0.27756715806652909606 -0.76816835666334626342 0.93141119181259013349 -0.38999083439961118591 -1.0178659876822315766 0.13748210102648747433 0.59336051590339777828 0.49659988187065529086 0.56910876702652224424;0.18017485238070804487 1.9745863048328842204 0.3833090972092428883 0.30850891020663351316 -0.14301354829827597759 -1.0314803232618712237 0.63314914120119436536 -0.75339470661394702944 0.042509038185172716429 -1.6337638451297364917;0.66407983123752512 -1.0005044839911709786 0.32823685207135977482 -0.67028155123773958124 -0.76830586205714124226 -0.63191993121019840451 -0.84554662701727900664 -0.022687178671843014066 0.24141533269259499161 0.5361874576957250671;-0.64662547373322931676 1.1604380191226915109 0.55703405090122215526 -0.35805939462712998989 0.26259455923412511336 -0.57850273283470787788 0.27703465893979584145 0.62510161662385299586 0.26955768747779496053 0.84464340620288946848;0.15971105946842251155 0.69609531254443868242 -0.88806035800872384911 -1.2727815643989548455 0.34643190783738309069 -0.6755857184640899904 0.48848756510340207715 0.34067912661315852274 0.25412454235843068284 -0.098969278050435524618;0.43769352360202845587 0.51473232976202609734 -0.039975156106961749758 -0.089968551655714851245 -0.28267825573070187728 0.78292222537579891917 2.2577601073664910203 0.54834963291609772895 -0.74401206878710979264 1.5946856224502752308;-0.61020799851516427381 -0.65995696633211797799 -0.55768600113983779476 0.91629971069372484482 -0.81092516442091877593 0.015105335151560879414 -0.13453686582144855355 -0.48596511794065472278 -0.32395199069394980951 0.2460538574770241016;-0.97550194869499085026 0.71056324317807129098 0.30728113287297464939 -0.67639159705939899681 0.56888534736627960342 0.48511725968420926769 -0.43410806089308190403 -0.45628267884045203839 0.39302262077850874666 -0.58398915700590514621;-1.0106071777337912732 0.7693226731442392996 -0.043950354414869427511 1.1250912986512680014 0.5746629902296143122 0.031441099987865969712 0.37868450480822135606 -0.10307888150217610346 -0.24279576837715119431 -0.43263983528453586747];

% Layer 4
b4 = 0.73696420428001641056;
LW4_3 = [-0.27512908867878471675 -0.013076792656352646121 0.85024869011857151513 -0.95832410714943405683 0.12690298721638076929 -0.29589029668263672201 0.11316333877741685532 -0.58107245914318206292 0.37474811558167470116 0.52828191916000333261 0.26960627366101674873 -0.23262816281696463427 1.2928673110917945355 -0.0074639014786915397481 -0.36602969662650930438 0.051888917364048624259 1.581492680422121877 -0.40195567445187302402 0.079905797967394151526 0.24701650524719231949];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999934;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
