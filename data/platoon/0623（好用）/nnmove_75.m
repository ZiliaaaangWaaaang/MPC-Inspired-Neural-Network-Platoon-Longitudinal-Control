function [Y,Xf,Af] = nnmove_75(X,~,~)
%NNMOVE_75 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:05:36.
% 
% [Y] = nnmove_75(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.70139767883548;-1.99738196042707];
x1_step1.gain = [0.053913604005474;0.149967019141203;0.500604127399131];
x1_step1.ymin = -1;

% Layer 1
b1 = [-3.4672151635519408153;3.7162751048709701251;3.06685381171214555;-2.7652472583299112507;2.2413279501859717513;1.9098182045735476731;-2.0045807510590099021;0.31796516688161235997;-1.2063888049946400738;-0.92014798446326206971;-0.27986977556498926489;-0.4295623734410665695;1.0478951418190907141;1.9820286143329630679;1.8453048976083037402;-1.5846257747573757602;2.6758657195723398736;-3.0134577955160466445;3.3708230491954132013;3.7099527186588092675];
IW1_1 = [3.350378958995194445 -2.0073135780079853774 2.1003845684806972116;-0.82090591589219552571 2.4025980766079211293 2.3764925217169126093;-1.4306256540750232897 2.7053816540857980044 2.1417199387592944504;3.1322373241414949163 0.95424202571342298107 1.7431879774753085144;-4.2471243320074663075 -0.56528349017437229396 2.3631711671508592865;-1.1329509402754922576 2.4044722204868387294 2.7126752563411566932;2.9179941657317440828 0.94250996944767706509 1.5581938396435346394;-0.49419110398126431249 1.8478127069510141833 2.7157495164946747757;1.6492117044355649735 0.83461777521166313765 -3.1462277557194533451;4.0546565136174841371 0.58501581469394192681 -0.97866975592643656867;-1.5309201768658868836 2.9668260974749194325 -2.1019588801005100187;-1.9222956692994461747 -1.6467140975898397759 2.8786961760016152034;0.0028697702661626724174 1.1220385202348210907 -3.7091080953691841771;2.6756568335494264055 1.3080809214544122376 -1.9661073634653840614;0.17226527435055133397 -3.4754749424446278461 1.2098698298559915632;-0.10036964442172921497 -1.4487144009045473947 3.8819318550944355017;2.8786925856755103403 2.2890373713429403857 -2.6588143485785540321;-0.3527527935008453186 -3.7455991043584813127 0.25244310873451081267;2.8658436178314707909 -0.047847184798052305732 3.0607933658883705874;1.9181613104736565667 2.5103893332263909066 -2.201919947162154223];

% Layer 2
b2 = [-1.8834651510250957074;1.2324779867010378087;-1.0599547008212528709;-0.54754933998626009739;-0.24111396613266966593;0.32979127947583319891;0.42687064550569936427;1.2739969381653557523;1.2553995466841085804;-1.9268147160739601542];
LW2_1 = [0.4917085669600120279 -0.39247421041696989308 0.07521121723170096085 -0.054961510429890246543 0.34522778344388188598 0.48372022345981408042 -0.6547200213357468046 -0.69140852486366821683 -0.15337214135056354003 -0.37784371200369126775 0.054523694184527543571 -0.41256166554715062444 -0.31169794654580518234 0.027548912906199728157 -0.23500493906472674777 -0.19527693009101426691 -0.11196477304102663008 -0.24215877264422822068 -0.51411607685343352347 0.095506245798615135856;-1.3844943070820618924 -0.014925688578025255587 0.31678236484589339383 -0.27335900844230498485 0.035225016703307826527 -0.50447137867272451306 -0.077636564233966476323 -0.82789655418398522269 0.19045000627840807939 -0.15417135969225420622 -0.74079386282538040032 -0.43778259148438697368 0.62357535372239547566 -0.71927859921816139632 -0.3897407718156098988 -0.14126656517531624435 -0.70982223750940243168 0.071494315371135375159 0.33996886162321643399 0.12821238888049879545;-1.0076187873884303592 -0.76247783580847716678 -0.22249674721808801459 -0.41360478431078256945 0.66478051925367487307 0.4647738535396508941 0.22826386413488647387 0.015737570671690636476 -0.25587021003453569445 0.1857563437835188791 0.0076907038470682420606 -0.17867142596871560256 -0.009093900872691559889 -0.38536328332388053441 0.035108365222579450415 0.52348924199538526825 -0.85520685876003399439 -0.083842008553480312782 0.49069955663636249943 -0.72243800276336622712;0.91007289201557739489 0.081204917771979745478 0.17869528823873362389 -0.4348360367200646559 0.51074507321214157596 0.01154819390453977121 0.27613100126800799172 0.64311016595463799117 0.34347618968581727916 0.31940823486863517688 -0.24315511625894581371 -0.60350104275656135666 0.52179428940234773293 0.29173894277406320352 0.31787017981982712556 -0.1373309756014089722 0.84292888128389165114 0.2076573375360662721 0.011900454239906920265 -0.32881853381231301858;0.58441185432961517687 -0.66763295732288396866 -0.32213279030526043023 0.7077559538441088316 0.45724839226431068795 -0.11921977743510298042 -0.14478811113074574468 -0.21817136124206401582 -0.32447318457489965349 -0.27353347186502752209 0.11370612900148359403 0.62432644632305056565 0.23622746782419748457 -0.46497063564637297617 -0.18301686315098986135 -0.81075293029680728374 0.05919278904779684547 0.069136681262733770681 -0.33111473909289274031 0.1277985961567469908;1.5930580991196352514 0.64321517386894444535 -0.0088489843025922540476 0.74952135377302908648 0.24406537096409944287 0.011925600814977779449 1.7454602873872469004 -0.34991702888072856448 0.43655220579651632384 -0.43933604060180969642 -0.40590644300645833953 -0.091048036222728431777 0.76324587295871737513 0.06953804830782706059 0.14275415968599480809 -0.32300171121480525382 0.51375447692245734821 -0.022992604172587621097 -0.11656271559416458983 0.87895750747589962426;1.3457572784847546821 0.031962658157936404968 -0.34336700412273196692 -0.031151417303827123872 -0.72640544209018265143 -0.40718735096323743772 0.50483486565090440745 -0.12741685153183790469 -0.81852857964025249604 0.216707455570065044 0.019772266426453646848 0.16454918320176983859 0.33182170253028298035 0.53959031862275541602 0.030342837223073969993 -0.78979112350462576941 0.83520708618962469227 -0.27917681248736658794 0.9956487571157254246 0.52854147464012946056;1.6032808918762504469 0.42427411912441276298 -0.14108917887219274423 -0.30113409359969389723 0.67239968972289410054 -0.54626264875146912647 0.216065301147031541 0.62067586367285776383 0.26043979224111479809 0.85043611180098244162 0.12356902755262830218 -0.38496572170517601164 -0.025019979478471159745 0.21022136665164509184 -0.24839213869830639725 0.46727295374278499107 1.5991143022123448514 -0.0012345086475959859973 -0.78643462999342284014 0.21619216897053383786;0.078899828408294889193 0.35872839432841474583 -0.075957727515536963003 -0.078166651156482580554 -0.34378967240877844613 0.46934087656519402065 -0.39381152574122524346 0.79758889605180571802 -0.61354232385597895494 0.49227669267560569821 0.88007482468595965575 0.24827029570429090533 0.081878580823644520059 -0.4937749668087104693 -0.068450916957750601588 0.40986061484158786694 -0.23314434708846698552 -0.1757690631861956454 0.54980459594139741153 -0.08798212437071527281;-0.25312463864830331284 -0.43378209757103614042 -0.20721381152829204675 0.29083517545921783176 2.327794156753241861 0.41313618839931887106 -0.056551935171714709516 -0.3518972188499401299 0.05024294365793576661 -1.965352045014867377 -0.45990393215025160423 0.031394144405410114029 0.76368133944112515099 -0.16200512390743571078 0.47475071906099342023 -0.64214569240833174746 -0.030690082869080734934 -0.20665672096016518555 -1.8151925456822457505 -0.10048778032850765041];

% Layer 3
b3 = [-1.668595501344888099;1.8829210577237460722;-1.7555185126629033743;1.3805928390888422275;1.1784006469895726976;-0.91888591589167600837;-0.77246335059963855407;-0.7261165036008748741;0.34017926488373118055;0.17495438449516714785;0.081437770202665515917;-0.29497571173093800612;-0.42996165131748637078;0.55427834520769669879;0.60824541485351901748;-0.78247609895830139148;1.2980491309504587072;-1.4402514857284141048;-1.6246156277432335369;1.7773999296959450689];
LW3_2 = [0.09845431826278959464 -0.85513698611465338573 -0.57062123639885298232 0.81712804073689260242 -0.21830074178344346936 -0.59681185958528826241 1.2641907394593210334 0.93817616084817767597 -0.067671344709943903606 0.35406333032574555109;0.16114673710846877386 -0.55366460467338296514 -0.0093059868810769497127 -0.81416292191798933509 0.20678830549635773828 -0.63581034647052481201 -0.1793564900770807935 0.89132365972423588385 0.048963315299993995233 0.41553172518050135453;0.82224834996248974406 0.16057266056505489771 -0.59315239867909030913 -0.2954255240569989005 -0.79235042712067216275 -0.87050212501994050918 -0.62859434915190381954 0.57837356525150773745 -0.39571597710644340617 -0.64679198620879452264;-0.64088640142427255597 0.5608963816495659005 0.47594107377485167509 -0.13224147238325389964 -0.4396282794607225819 0.7086565595198555112 0.49832383466571728015 -0.91857656728682934855 -0.65986142693806659754 -0.86905321250034273106;-0.543682223211596094 -1.0692894791303735325 -0.68631197099911034343 0.35195978359005047897 0.88775776966131680901 0.23018259855261752334 -0.038103767070595533084 -0.36827920610735964679 -0.79604772321670203006 -0.23329807454876375084;0.47630105440620335022 -0.23297729449825563264 0.69699118149074457129 -0.70476267303735262715 0.0043050678341194931892 0.20712832996383787054 -1.1009228060791798054 1.0012435754651927144 -0.16950849942687973293 -0.06609040960961097555;0.37374845489643121477 0.22983003278235275557 0.72627575741600580717 0.36945440082978808771 -0.067123113636715789343 0.2085962156897111508 0.78484940348148701794 0.74570914017695644205 0.36379219577659577256 -0.75839483502155080608;0.31124981977786503329 -0.051814544971704193377 0.40212616799029216041 -0.17799718395226096779 0.44838700880392734494 0.6326427600271093965 0.15635049887494464893 -0.4064860111531697906 -0.77153385606975810607 1.2584335043681589283;-0.52074836250710265784 0.95539182591376836662 -0.87240359088295305057 -0.18508119718040688673 -0.24657960327486527774 -0.51618861467226195838 0.4381252892168805424 0.76634770856524447868 -0.63630276128280716108 0.31261821820829421847;-1.1335594707043730178 0.75514416450788512947 0.24222680296642890019 -0.73120443455958827883 0.47319013502258283621 -0.28640814125267521906 1.6140268280414962199 -1.0090441592402654702 0.87278237235174116471 -2.9302792390718201965;0.50619864835968186867 0.50700100998637620542 0.71063226603716700414 -0.65130452712744335564 -0.73150132225558606169 -0.42274796096311495486 -0.46916071888603011475 0.20427724569472760496 -0.74014780777915223364 0.78995606734463597043;-0.35561771314300510971 0.54194785791466482117 -0.30738265277778747953 0.88413692290080836411 -0.80468292260105267477 0.54181052456095391001 0.71930248042992561697 -0.29153772548492024042 -0.075393514384555604391 0.82288870116740242544;-0.71749153245701524639 0.66639013035669025786 0.66186505414128260494 -0.66450045857057682408 -0.33128834432033194002 0.42305089101562276532 -0.5310704666231990112 -0.41721478283154989075 0.64587050613667562615 0.46865155601620223091;0.52246899888372488885 -0.15326685435126868873 0.76348681551282204794 -0.84413749313522978834 -0.85374920907117279878 0.56153108486307434788 -0.35440466936707959444 -0.26433979847178684652 -0.89024667957017766806 0.58681424962695816205;0.18246533919215549013 -0.28057113890766283149 0.9769201214419117596 -0.42807586083939069832 -0.62124777245969242667 0.87211529883338623215 -1.0327602929778572083 1.0652737835323342619 -0.1939159011544673572 0.57474246937587158968;-0.63779452319103413505 -1.5574875263931817759 -1.4671371232801864171 0.052709488960901836052 0.53048181336287114629 1.8485257314376200011 1.2238265764529179247 2.0138515570372943486 0.35763541146176619501 -0.076751285916744849125;0.76552097304439747916 0.098580944341441684164 0.024905717067884851346 -0.79702199435093556978 0.40903664575275594517 0.32432434410331034691 0.23257218360176099003 0.63569415345470658973 1.1306330041309056167 -0.4554415216750296036;-0.55774907669311524216 0.36607848323978658955 -0.98061313669700456153 -0.37580088522198995538 0.80398366394400333501 -0.85595611293006590437 -0.29619975508622320426 -0.75975350174812417148 -0.38561955277591081215 0.12823142062575512701;0.025533667786845876124 0.1030524273819116432 0.74214400000065239293 0.031280314044920001781 1.0231624208792293729 -0.4388221696887627532 -0.92761085335488668857 -0.0096788733090973372991 -0.7474951245222540841 -0.62041047798102821886;1.0691650380886017491 0.44993055904174827919 0.33674915921363202109 -0.013642997386156669598 -1.0499186142971057567 -0.10598696682679016601 -0.059868047213049079003 -0.90431018593626699698 -0.54388512564649338366 0.58555371343202811119];

% Layer 4
b4 = 0.050716798859601397442;
LW4_3 = [0.2520226518562307394 -0.17952140291999499344 0.47034107466090702143 -0.69211200356520219401 0.0077156162183539944016 0.36550107316376073685 -0.0015378651938043295944 0.20896850348017628751 -0.083388702796524660776 1.2863296996500972469 0.23580344418151560903 0.17817702287559150642 0.40603627610524595237 -0.088976140402682951658 0.098934617174146685659 1.276672739596268924 -0.020040869537239072024 0.085855045106936853094 -0.48958701892231559771 0.0072436779111296166478];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999934;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
