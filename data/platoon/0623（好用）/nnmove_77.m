function [Y,Xf,Af] = nnmove_77(X,~,~)
%NNMOVE_77 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:05:40.
% 
% [Y] = nnmove_77(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.70139767883548;-1.99738196042707];
x1_step1.gain = [0.053913604005474;0.149967019141203;0.500604127399131];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.4331847210072257148;3.7896686331609776843;-4.6773199150094377785;-0.5592224325955403863;3.3982762380265172375;3.1251977579682277408;1.6496913500537848662;-0.58756456822386826655;1.3716211514125498105;-0.13962939773052987502;-0.76223710146324774595;0.73987521098512432083;-0.33095896772203853287;-0.18520483435323895072;-0.02646363272681655221;-2.0284415093202832203;-4.032983502572707657;3.3631031394887691555;-2.7866033450052185572;2.806712719214836671];
IW1_1 = [-2.9739713838571075755 -0.71552995558589083114 2.7661656472863880296;-1.3004288600308429036 2.4200829722059205018 2.2656683470972822647;2.8716657061067554224 -0.71142703507588911371 0.98474062075451451737;5.0651507636345929342 1.777242224093141143 -0.13132538976945035136;-1.91926627466274069 -2.2464526046559183392 -0.025738351422028096088;0.09238787007137298779 -0.17761236135919247769 3.5857706297692457653;-0.44094622466767863234 -3.1807036235236414434 3.5237833887459708571;-2.7449351234484238304 -0.73769219329448409983 2.5887607301205353139;-6.1576830309555266041 1.0348613844450287313 2.4417563195798082099;-3.1840968786915544442 -1.6001353595042249189 0.28410123129099129624;-2.4622357316418912454 -2.4877110203440864211 -2.2216195702136163348;2.2098135261706111088 0.67600387865215083583 2.3705499251989472498;3.3409069533319808443 -3.7866956185347611097 1.4360334122786504452;3.5689800390213464176 -1.1860280716521685029 -0.56436206533935928675;-5.4600501353562176376 -0.22822277501916368725 0.85468862084961338965;-2.3762331074393983066 -4.0368025789558101835 -2.3223661494916827408;-2.0933244228075351678 -1.3320963591330514664 -2.1566050075042957346;3.3682007970201723879 -0.5131812518365043152 -1.7568205085716304126;-1.0787186727683304444 -3.4189852572370988959 2.1763293498417977112;2.1682748625524652653 1.6979260880745743467 -3.3877023413888971426];

% Layer 2
b2 = [-1.8908906267469414164;-1.070034642159081395;-0.49035891269644427126;-0.2471826939590942851;0.78991349870104499153;0.5764160774276412269;-1.3752653435197834675;-0.77915541385952158393;-1.1484582373225808993;-1.834212143655078453];
LW2_1 = [0.21843692199766134854 -0.42069820112053407657 -1.1161272705574674102 -0.97425022739501254687 0.13260965223432413795 -0.54948121618962753043 -0.2097763224232648549 -0.43598911233152015665 1.6137070238698854041 1.1991866193634310722 -0.2231706230643731026 0.37082492342814099562 0.018784992013053964516 -0.19541093156227615224 -1.1159828020230924128 1.1692304171913410205 0.091112831918800929465 -0.22222721174426376956 -0.55072217386709976239 0.072685529913332561081;0.45610098456845926673 0.65343114794617818131 -0.65056006357639328819 1.5125358832718365232 -0.071859624305847691339 0.2312249104752680251 0.38077961048918151921 1.0669168401924060685 0.041595564204447044165 1.6114451043146180709 1.3300978819191475733 0.19192991639794132475 1.8327719499673742476 0.060192192857652412896 1.0024321065346426529 0.62254608131149002936 0.53015294542447954917 0.84190068283726693377 0.59171288132928467896 -0.53749685516293965737;0.90806347498257733442 -0.41404301764724554813 -0.44062352586548059197 -0.68565204213824026969 0.97701323901654679727 -0.36374420398240403518 -0.35278252796597842078 -0.99320428016472683819 -0.087082390332685458145 0.2204585446265338311 0.024102031732252011953 -0.23650786733560366648 -0.031719821580953842799 -1.4132000751938702532 0.6681935790340782777 0.69641794247924160288 0.69407115434895338968 1.3910040804629490996 -0.67630615280453365568 1.0082372005968114337;0.4220132381619151607 0.25481358263967102129 -0.27076373419758148486 1.6779554984074969148 -0.23160404811865414887 -1.4210759160050550065 -0.024161641466880975915 -0.88726417085982456356 0.26214743686693220415 0.13985979280109922529 -0.355931613755592402 -0.17443381515623126998 0.27921180608956513991 -0.84696109433851263226 2.2594496659453811027 0.28469512375611005783 -0.12896942643284523 1.4210406333593645911 0.53489395705878728382 0.27024931719988931622;0.063279160314830523726 -0.24741153458719758462 -0.14163466031835592052 -0.63269076539303714668 1.8706207888695454145 0.94245454457682531491 -0.41048812069206874753 -0.31615436382791739511 0.8307983866430631581 -0.45823177108451890183 -0.37413285875533353053 -0.24805732686116457875 -0.039176011670303698131 -1.4994873236129566685 -0.015004116134192925502 -0.8815251889715908229 -0.45255692258517166149 0.94886348953704924281 -0.19297697087089965562 0.45430393164991605959;0.080271781768427558079 0.89972115990963097421 -0.050749934815538091937 -4.1314924357935902677 0.83290437696336339091 0.22721177041947754338 -0.79618477474391702309 -0.4047375456704590535 1.4011904176524723198 0.54208601142033663312 -0.50769071625390949087 -1.0081867283660186363 -1.0036612892347733794 -1.5144987761744208576 2.6528242418216927412 0.87592634805532842979 0.21392662265780049147 0.51178530862642213073 -1.1391402513449959688 0.46240950185310697451;-0.86906594815176918534 -0.35304576884892024946 -2.1781877285968889169 0.32737717723854886653 0.066573376991095015165 -1.6862562808359062849 0.44437482791122062675 1.4381347244566413668 0.54927755181430715226 1.1372146214650207252 -0.92914401696682524801 0.71549636626872537004 0.73676550313091682121 0.052384094059852892578 -0.2004459809931293246 0.24137016543396039303 1.3971507226919932521 -0.57616741937059623435 -1.2299798959502254991 -0.74694610809985584332;0.43692215691548774714 -0.70056393006290751391 0.6381702208754866934 -3.7767809892813084538 0.30190121740631847835 -1.6778995924735784495 1.3035581201608124058 0.62415263690540645491 5.3325396320073865652 1.5996278285472913527 1.6429111113883334561 -0.0072654713357620144543 1.7970490792997253493 -3.4529816020595109904 0.91178816108705296184 2.2022882303107933488 0.65819009586044618931 0.12522487372909646419 -0.042588548174029211557 1.5415615039487078342;0.028001277541047135677 -0.42925918543243624104 0.024231542955650210019 0.10956789864849428295 -0.24671708069955475273 -2.1192934214350129807 0.02894832162851238358 -0.25346074578388821941 -0.097673955796250461203 1.0677185723411262153 0.69569529256347661939 -1.4447063864639679842 0.29568771350060962799 -0.9212618229432320005 -0.30782037228415498609 0.090364774444007589516 -0.88190287257155797196 0.23167627245204358566 1.0196815962875693806 -0.0041168954823591376313;-0.55683534009940849341 0.030107530202650032575 1.607180893487880402 0.77732627349449212595 -1.2684047683187298361 0.084524722440315558369 1.0911920387388316378 -0.41587910184554138793 -0.095233265061476946034 -0.28412526673270999122 -0.71485725785435738633 0.8334232585776791824 -1.0375205309057486947 -0.57393236265104985439 -0.89215659270870051323 0.97964975658898634236 -0.74753419968619705394 0.44473061788248358095 -0.036708623460034138508 0.86892309089927588506];

% Layer 3
b3 = [-1.8903858006656863999;-1.0647175486008784162;-2.1469311625016680445;-1.6649936165248904185;0.78589481821280948726;1.1249370455512888167;-0.21452265799435676907;-1.0906495190620864033;0.59717830026463414317;0.049915943772001938883;0.4790497200739730066;0.33444577200728287103;-0.43130780660063294807;-0.83156306071481234099;0.92896583632843066081;1.3386257563754317967;0.81201443852476573593;-2.2867321447896458153;1.5183253436263399738;2.6647611861163085223];
LW3_2 = [0.16836163273112425554 -0.99487274384099211311 -0.69505035444725471461 0.81510918433453716236 -1.4012702305283200044 -0.12097971507751169307 -0.5375842964859939288 -0.47702493709078408468 0.060307436785358908837 0.0095207686708867374226;-0.86471228095536123437 -0.78986274606255668651 0.41733779844178092722 -0.42021967557707667895 0.38115259774801057979 0.3998731491105306235 -0.72535341007118370182 -3.9365072444465938339 -1.4575391798812846744 -1.2692127328992632851;0.7392782732893758979 0.12293220209549748922 0.23984135903038736326 -0.37978125891807890113 -0.49274573965043588775 -1.2464287634434756402 -0.53835347467335070704 0.16374838695271379252 0.49117659796995349897 0.52674068070175861234;-0.0198592089444613977 -0.82301323665619263714 -0.36270871704426266291 -0.18008995535502078655 0.53392754997019431507 0.30277998660965510513 0.23374560353240431132 -0.83798982061711568825 -0.49140702420108200998 0.58270159469741200642;-0.78008648964686344573 -0.47470933856409669449 -0.88041909532738593658 -0.24942396468029626178 -0.53451084770787871125 0.49169014372776076449 0.39371599256585365634 -1.3263226419426856761 -1.3781216197608694429 0.10374137853161390088;-1.2197870563338688576 -0.38062042992161898569 -0.79816556005546657193 -0.46443645009071649055 -0.83382420619428643249 -0.31683290354064042038 -0.53901401288149330959 0.59620906853389377122 -0.89440954521278304146 0.84453158633078873052;0.71059563086985177982 0.44293469162034981856 0.41198531101971236357 -1.2218011735924081407 1.0757401823226639959 0.44246176567143669089 -1.1828212937075810451 -0.25029041210471086876 -0.0085240828465341783593 -0.10345040579941258696;0.092398900121310287292 -0.90335273429180762417 -0.92187141584367371383 -2.0803070671800933944 -0.59721630444504647528 1.3169895485686164971 0.87877065686579358683 0.25168231541513036431 0.34969973572362422765 0.55102593107050190646;-0.76239562937319849123 -1.0832218476051489464 1.7827870009497632786 -0.82373780321950351713 0.84013762675771519461 -1.7905739108456557585 0.13803904512686071548 -3.9713217057213023864 -1.5929929699144118604 -0.29329998769516674173;-0.35851992359809004007 0.30486549004109625427 0.64632470052413415473 -0.58225897363410250573 -0.488840590773141348 0.60473490559864795379 -0.8346121839957497679 -0.69591077581231475246 -0.028685523437768450927 -0.76308838863352268511;0.73522768468591037649 1.0698942406632827584 0.83000061216743203918 0.14227744883359533246 1.3167943003786339862 -0.77341895422200124255 -0.91463907918835862798 -0.16504921760344942738 0.45162163957861634067 0.40917267901219245285;0.18011966557455469373 0.44767457957553363768 0.43547682935065606946 0.71462158242227324934 -0.00049925937738989987352 0.70880539609412551716 -0.56591544105044822022 0.052564145968709174994 -0.69487937704852054122 -0.010661774198142036363;0.65707863634229335403 0.12780688465207185045 0.19659861468689876496 -0.018949935464938828106 0.95445390556472087251 -0.23341981350198248713 -0.89057584758554297899 0.22636421941759729548 0.10932474915239473456 0.36880360059778771742;-0.15998032528695482757 -0.14480890576672408865 0.84427129246028909115 0.25776567519217730151 0.044932414547336312072 0.55868409518910211453 -1.9390119279715358758 0.96999430312283618782 0.93062464315411519422 -0.057490832746179512669;0.83672965709443458682 1.0831243251408093631 -0.45833468473626459705 1.4304012030529209554 0.15394400824722798138 -0.87692063097490724477 0.22608535838651752647 2.1312325866938190977 0.93047423000867335308 -0.54960710363079756657;0.50163158611456781788 0.23716772600637597845 -0.28836156368373183634 -0.53284842860708769852 -0.16847506469257508832 -0.21850306257368481977 -0.15866144505381327146 1.039265449706913591 0.16476619020560132056 -0.035376077355616493414;1.3133317149290024695 1.4972873549479561728 1.0363439419144198084 1.0321036504222291796 -0.50324716346964271096 -0.20764968192521693346 0.54729511309294698318 0.40431160372102548095 1.2357014339665961522 -0.66411910980058430631;-0.49635772898100655182 0.58720237942474373671 1.2899285480025675099 -0.50416113336842982573 0.58782908538394706977 -0.84625465057366444643 1.3947286215905501106 -0.59507599838284042093 0.53235086363575656598 -1.2617639512033558269;0.55724535426081667211 0.45552989557980111401 -0.52242151153604443614 -0.14796349825568094749 0.55069549663204908629 -0.15614944098066757538 0.2033210605512527358 1.7086441220087995596 0.01857801369951549153 -0.03146324240997530608;1.5048663959134600532 -0.45920544127236834209 -0.30083021833825324132 -1.3725114793610615482 0.14943758437774190551 -0.70637358953271933704 0.11510645683822506857 2.0159038716990576035 -0.59012313590771203753 -0.15230480525990305884];

% Layer 4
b4 = 0.4327515390821963237;
LW4_3 = [-0.27376261094852960554 -0.95969821451255554745 0.82367386388340335657 -0.3070805107347270857 0.32347158687671517807 0.10065471216240783059 0.45166237017448196411 -0.65992988136302288549 1.6144770282271918571 0.035826420451481960638 -0.52763314718352671839 -0.55094541546270114907 0.61160464080700327472 -0.34712240625840656838 0.451841026213657182 -1.0334633714410701444 0.12039887199138267493 0.081116569179537578727 0.42843383506629673096 -0.3359762108701412342];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999934;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
