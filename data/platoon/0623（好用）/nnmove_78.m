function [Y,Xf,Af] = nnmove_78(X,~,~)
%NNMOVE_78 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:05:42.
% 
% [Y] = nnmove_78(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.70139767883548;-1.99738196042707];
x1_step1.gain = [0.053913604005474;0.149967019141203;0.500604127399131];
x1_step1.ymin = -1;

% Layer 1
b1 = [-4.0600566485149203189;-3.1358453920554314465;3.1057252905905547991;-2.4195523105881791004;1.4930326442911101559;0.092552379108365528948;-1.7590988585548406054;-0.89921240083840925372;-1.5749403318845469624;0.14412702899054269379;-0.77991409175910519913;-0.21698292850743289284;1.4478621859409273043;-1.2941751749615935108;-1.8080854582709346978;-2.4373295495605051819;2.8161584293508830079;-2.7475448511168787391;-3.7134342602509651243;3.8921770702285600763];
IW1_1 = [1.5013298115019590995 0.32661553595005404782 3.7321526123736630254;3.4341038443037015249 -2.3246483704511420321 1.5865365644705897719;-3.7737507516144170872 -1.0332462810898472849 -1.5718932080687113562;1.646292525304861476 2.4846297618225570147 2.9728784989158012486;-2.2627650494985798169 3.0807168466714780486 -1.9687212863130358897;-6.7969854502875595159 -0.74581438765662233514 0.67593056619206626223;1.0334996434928835907 -3.1518006549098114277 1.3183379592947337411;2.9040810115898447741 2.2479862947469415602 -1.094961402214557955;2.2138073345547728543 -2.1076677079006742588 -2.2350920920519192769;-1.4743692536475030419 1.9238596749122123253 -2.590099270703442258;0.61047098573720837145 -2.9920448648149999826 3.3340904083575164663;-1.9876017857965553315 -2.6073736605862380955 1.5955280451196292013;-0.56400426767306388598 -2.3421929722394776441 -3.0098498422311834588;-0.12499215944208307005 2.779946868970853302 1.776983272121562818;-4.2119076774295258758 -1.6022484100846741129 2.0862932074397781967;-3.1391627853857881902 2.618569505949394749 0.73672769655249237264;0.17809962615507082817 -0.30219718286423158382 -4.1226409967025103853;-2.5229980073037885369 -2.722004199868759855 0.0613471533309945527;-0.77503001477481447967 -3.5463686940300784833 0.15859383692185827219;1.9504636451704540079 -2.896540869670846341 -1.3616355838164841963];

% Layer 2
b2 = [-1.568024626018431622;-1.2005487285967029187;-0.97251903788265581241;0.23040824439207774343;0.17025568491786413627;-0.043088147574229955505;-0.8476369919518718099;-0.66831245878426659424;-1.5819063616952397933;1.7986862004820602934];
LW2_1 = [-0.69860219830397463081 -0.099106807624358916886 -0.88320085507865364605 -0.2603220006630139749 0.49156259973810539909 0.19264996853819549294 -0.061416227459205982586 -0.3233027448717750163 -0.23263199880485715965 -0.67556126549237482948 -0.23239554427407538295 0.10231700539882265799 -0.29568248977270389366 -0.45486596868092427082 0.59317737056395725137 -0.20691853655992886729 -0.45111327893806052458 0.38993360896133466564 -0.62316564694257858825 0.38872750798759275748;1.1080373270731020963 0.21153564677022998475 0.16132715324599533613 -0.17495928062173524142 -0.84636863664336992041 0.7900940959621212123 -0.07294841415730848877 -0.67541180425798297282 -0.099966941779136897495 0.55783748739396377125 -0.29190162900754984543 0.2662456363811122606 -0.89879541669928386671 0.50441752121162763967 0.47838611046457213405 0.20624688744122296469 -0.078166543869126844934 -0.30197370264939921158 -0.24595115027441336042 -0.18539290792355295201;0.097161691534687899541 0.21360339389264423882 0.31749684260959837312 0.16094424486773153959 -0.19750045604215571426 0.26391681521312992942 -0.61080350335403132966 0.63291316051574331158 0.55946924325892632979 -0.044754918557364631315 0.069521133566247395041 -0.3254351192803883186 0.20134552438955427567 -0.35819956744165448725 0.64296771675171171534 0.35875569567548276639 0.19468111695099102332 0.34809321430347428539 0.56399223330903225371 -0.0091952871033720642857;-0.34697875860990606833 0.52271254445745229944 -0.18455890346140430003 -0.13739256952220399444 -0.015716105897652231371 -1.4889312858384329274 -0.55413153822314176189 -0.029695588299056933923 -0.2955946067294824009 -0.066635457046513357771 -0.35111756604544674953 -0.88685301399912430664 0.30090502205954638981 1.5148262474238403108 0.1106762019497501276 0.38722690935343961893 0.0071942750884230917408 0.14446148189072263723 -0.12659158869997119701 -0.375574316916685913;0.048891004181658759276 0.48863903273448194842 0.67203610280782966058 -0.018205890601314181354 -0.33243985295394179458 -1.202774303929551758 0.05713409448526685086 1.120630530404491898 -0.32924202653867806756 0.32456690374616636863 -0.23324810242490609524 -0.52039106556148484461 -0.30240928941824768428 0.065053378528111757695 -0.53186093309598436729 -0.23488109438101628657 -0.33610761108099090899 -0.36982887532587632728 0.0031672441900511411061 0.30245731851233448317;-0.19513706908770875326 -0.38478108328542981464 0.22931277173455924534 -0.90980440727004707746 -0.010124454675029479975 -2.5116402049823487452 0.068410751335265224116 1.4619567913336899423 1.0629768106931316574 0.66622964195034362067 0.40105059458800995653 0.59274847231194860431 0.9621199332054325426 1.4392319690892620976 1.6438525669889940684 -0.90987064951080687258 0.25902483661457648134 -0.10912020502561975421 0.27608973923954638341 -0.037451339495871746599;-0.81976842849393460888 -1.2587108939685098807 0.50863839233620911084 -1.3593876311103019194 0.28286720031526418895 1.1853490495356906465 -0.60673962839091533095 0.13804926795061120415 -0.77389835376962079483 0.55021506585075852236 0.11487030432264216939 0.23544377636093441475 -0.56526896739541354631 -0.91879917090772245114 -0.37761962343166510792 -0.14971991099994280683 -0.52003242880124334047 0.10857061181748395295 0.15211569586508041918 -0.8431225392794881035;-0.54962853943963307923 -0.60693503588265085291 -0.81744148746885048062 0.19575491423971630445 -0.1582798389377129411 0.7295620560027716861 -0.57388428775780786495 0.88022547495491998415 0.30475941336464773546 -0.11987640263629115167 0.49120537140724229719 -0.25832877029131501301 0.7375334763204867139 0.52411031111871342336 0.30624122488840399559 -0.1530251708615591455 -0.27111970876742669256 -0.370442542646124362 -0.468542816468845158 0.270179911173136722;1.118605465176640168 1.4705537269345547724 -0.23035855316772746448 -0.67100655426993827124 0.85344314342011984298 -4.4066681545001387121 -0.58739306516684841597 -1.9757149758741014978 -1.4754998532943399692 0.76742929935801385 -0.6477418925147406803 -0.098151381428793607609 -0.44467881910996165384 -0.50660855079316879923 -3.0548261541935461949 -0.21776883017137829701 -0.17603100362954074432 0.39822659795458059673 0.082253722630684644734 -0.68553780705978939469;0.94513661709528817845 0.74321767735773125452 0.69308778808464288623 -0.078143838053726544235 -0.039651900340716875193 -0.14448786936935892333 -0.43526729556800825005 0.97084907961935307252 0.061049482434103075068 -0.30451465990531739747 0.11951975935958426833 -0.39170053092899953517 -0.20057432496005844769 0.56739854009930168477 0.11569017600029708748 -0.29554034269548684621 0.99227116294242878602 -0.037701937202452892595 0.54584420917130960227 0.4722353749210093099];

% Layer 3
b3 = [2.1998661551294773631;-1.8633366110753302181;1.4984419493337419738;-1.2149060080457538824;1.4655167431431759262;0.88972396235634232387;-0.69924024664342765423;-0.48544849040916598915;-0.31414125743274495806;-0.30220917105168926264;-0.35604119244056714466;-0.56754765884360414141;0.69312283531538942949;-0.51055945809386382717;-1.3134667123122609755;1.2292500136986541648;-1.3541497540441813641;1.8628725552191498505;1.3916824828529752445;-2.0838799403103451802];
LW3_2 = [-0.37061732491523463606 -0.52010162135853954535 -0.50664795128173334415 -0.26157599292593924911 -0.27747295374374425503 -1.4819218370908764371 -1.3804734494877430873 -0.60348075276832102709 -1.858817186864642812 -1.2517086790477105485;0.74830154338101206868 0.061541398832329022306 -0.68576503894441764864 -0.38685361902328624373 0.90890936724011095471 -0.026825931856467533088 -0.60394264766527183674 -0.93416630222134278139 0.45022612284688684481 -0.21228029935092321279;-0.27200077458483795656 -0.44821858469221081966 -0.12765351711133771095 0.37037641418529287929 1.2032725874715943792 -0.67591548420610647607 0.057715110063344406133 0.61841498261213867504 0.43490687326523619349 -1.0934442448298247186;0.79063237791476104199 0.7507418577524876957 -0.075287822482548352743 -0.40092621394892735687 0.46281850993615741841 0.47465687159021635599 -0.14947226138386890404 0.30048774439602160546 1.0034747617907171513 -0.59718625101189803939;-0.30600885426097068631 -1.3380446124544218556 -0.30622981215802419497 0.22503954883024135381 -0.20149920137868090886 -0.10991381752116713422 0.94772799539159535698 0.6676447990632896623 2.7428934483572415814 -0.54593175243228775351;-0.54288342442743420246 -0.41516067136268874904 -0.53804428877773236017 0.86368810635945469922 -0.19193013409038009454 -0.79502832774281995132 -0.75697484227441247384 -0.46655071544044146581 -0.28458149105933339129 -0.66905073315244645293;-0.068307672785512432712 -0.51105193476579879874 0.80219986558752143235 -1.0613725031729255299 0.28352522958658082919 1.2775650566949388054 -0.46844466993928052245 -0.16768165459322653676 -0.84774115870424948671 -0.13002846570218606903;0.51076965359592862992 0.32647367007132582772 -0.65369322013340380728 1.2268154440149725559 0.14128441455065404719 -0.38026022839034895329 -0.70117869728033432875 -0.49043356593557962952 0.33144166367117250394 0.83848229337383561877;0.59139144575879587507 -0.26001893439057371937 -1.029411094507594715 -0.087429949674951296101 -0.61746555186726237441 1.656594205454223756 1.4282013894920142505 0.39241702709859976883 0.95571161444064034463 -0.68298440161464979425;-0.55860686965080907918 0.95624161137819174705 0.94964162705686805399 0.78287135499776805414 -0.74963465862202205425 0.060611034932500286454 -0.56219650426543366084 -0.71830545048563121391 -0.59428049438151020478 0.062708352578276171929;0.23186052257962494472 1.4543958925400679583 0.81134378874878143595 -0.20356183256465043563 -0.31268183465844645585 0.060070527428870264253 0.39796099931840245301 -0.72406610612339761257 -0.54306693516419402012 0.98845077719258445104;-0.26699730042299596455 0.86606308090427919222 0.026140367139671157742 -0.85658643637071163468 -0.82292195157826886209 0.47765963587215082287 0.2656068225492250745 -0.56091286585141886256 -0.19856299110291580901 0.29724898866362081673;0.1018731578295446194 -0.59359498153510004137 -0.81324741244089859826 -0.46594439343738019987 -0.14513926175063263102 -0.80776657562232068166 -0.30170856768780279777 0.50699906772412595135 -1.8513132734293820114 -0.63026174058127781841;-0.89807452909744311942 0.62438339320488278616 0.31371718349748456411 -0.80270060374400875602 1.1230834012373582809 -0.62110238926105676427 -0.53883375129249511115 -0.032596230214386477664 -0.94710518286452216596 -0.35788914497813872906;-0.73362678518406676531 0.072164599723677530507 0.83958891039084193597 -0.68718862774783395775 -1.1139662457525942862 -0.053043869964616713331 0.76919948075539268384 -0.31120195695620800347 0.35379587879796198235 0.15591974359415586293;1.0795862671358176232 -0.98962607304078065162 0.11943308560297112575 -0.64681973294524475193 0.336637166056823256 0.49353467849706855741 0.34101156267121446319 0.31451786603666875841 0.4948955283685779194 -0.36687248327333632503;-0.72660075466580797965 0.64194868704551366623 -0.90987805951505473789 0.98686861596987374146 0.73962468387486746124 -0.67729902154800014635 -0.14774347537277682241 -0.31634312150796917162 0.45626067255051155902 -0.40115665785078674643;0.30998509314772365597 -0.27420062765444769282 -0.13206303599520335945 0.62521625510882961052 1.1894026813685607546 -0.54409953246864362075 -0.64879358868956160666 0.32709919507620188739 -0.0035266019395474267062 0.74400945117458361366;1.0558535808229534414 -1.1732989307247356781 0.47064500556325938874 1.0761464534777309687 0.63397699736295676232 0.56250074787292625444 0.062598992049289856054 -0.15488898435631007211 -1.3604956469603282088 0.026092606376628052489;-0.66702029444323618357 -0.31873684867040674717 -0.64098258991099077431 -0.15305506653975448073 -0.59310983838888386988 0.26343795147502191423 0.30744621780968567348 0.49281647984306531374 -0.74992555489182843864 -0.6958967961196033114];

% Layer 4
b4 = 0.68352626615358913487;
LW4_3 = [-1.3392741761518540677 0.37629477882767614627 0.58490382122765738337 -0.48081189447765204648 1.1393911468625834704 -0.39022900230421625478 0.83942584338814918432 0.26118524105968848881 -1.0224726654431715023 -0.55337542086568880517 0.82794080346431653261 0.28883590688687299508 0.58982199976781402029 -1.0552805155117606084 -0.81959977754446533549 -0.46567574874135897467 0.19069416653833975994 -0.56404374025207681953 -0.60342809162862587335 0.22299713564238654584];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999934;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
