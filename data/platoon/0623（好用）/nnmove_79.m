function [Y,Xf,Af] = nnmove_79(X,~,~)
%NNMOVE_79 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:05:44.
% 
% [Y] = nnmove_79(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.70139767883548;-1.99738196042707];
x1_step1.gain = [0.053913604005474;0.149967019141203;0.500604127399131];
x1_step1.ymin = -1;

% Layer 1
b1 = [4.0979066102246672898;-3.1116625520308942576;2.3828599465297264359;2.2245049876324594074;-1.8869484129988196575;-0.42907786969943456645;1.121261450826732009;1.3043662804278277623;-0.11575602450675928634;0.83880670846414751018;0.030076040143520103853;-2.821002280275398455;-0.17216945256499366357;-0.40823863700081153283;-1.738667302999109765;-1.9584169646139075738;3.4074235440819133913;3.0933699205340530192;3.6195691092723971671;-4.0265905298307158588];
IW1_1 = [-0.44979059873936944047 -2.3708478493043734225 -2.2080513924751916655;2.9042563177157418863 1.1307112472093250322 -2.9932914879795600172;-4.0068684080862135843 -0.15315932684117045115 3.047350341824799802;-2.5382253817262618867 -2.9918889531435191032 0.38468868007678147514;2.842993013481744935 2.336761902727589657 -2.3790347174148971376;3.7708362356450533248 -1.8040891144997157625 -1.3559721463870513247;-2.581235259837639795 2.6854392265622371028 -0.75018103175391404047;-3.5617036981120731021 -2.4841004585415507044 1.0679164904217599563;2.7079088811254203861 0.30441067496527390857 -2.5314741831539122607;2.7894385326384596446 1.0201793852778149319 -1.313661722456683556;-2.5262454840076435936 -2.4632297617409046886 1.6112643657155591992;-1.2105409543834377839 -2.4636545268017906452 -3.0867748564933172872;0.88649107432474794077 2.3722224625226542294 2.0256039100221525651;8.1172357337940255206 1.6299735375365107526 -0.66006840041580727707;-3.495875113290052294 1.8012787091922342064 -0.78578757116805753036;-0.72469559953665352303 -4.4176456556678331822 -0.47818536884349926996;3.1436523083979723836 0.92141173860132019602 0.36186923626690148392;2.7932876032759645923 0.80043879449950805505 3.2328491959057461536;3.3083495191841634231 -0.82889859296556767099 0.84974825104442863744;-2.7102568883720041804 -2.4497394598566666346 0.2952704568356957493];

% Layer 2
b2 = [1.8135166568128031628;0.92408762685454670649;-0.72121908662451295058;0.84432597894632710478;-0.49670281647270825287;0.025708435283456631398;0.21865435175073980045;-1.3295026436912458223;1.2043650011736453109;-1.9956453636931663631];
LW2_1 = [-0.32304556737410755618 -0.010605075302370517779 -0.4166669506627961872 -0.033898352870050857399 -1.2131083533365123461 1.2996842900082530292 -1.0640033549058616202 -0.71906146091537714859 -0.4870767619136051052 -0.3526594615103684216 0.35854300871456817879 -0.20280358559270889041 -0.86538475957686955553 1.0607622296422769548 0.40004138849720460858 -0.47948177871102387604 0.35446993692855061076 0.29075381593574622929 0.12579160271155873096 0.14883699950355999686;-0.70520105305373326221 0.58854776555621335365 0.097602857738371406882 0.0084732701337569930888 -0.52633609536174608134 0.43456998347727521237 0.7243256514165918869 0.25518914348808602321 -0.060258997376749466601 -1.2358280540429529282 -0.64119232774280543463 0.61946150067921856852 -0.15875624840914276392 1.3078877823932535396 -0.64899624691934132414 -0.86392056665386030012 -0.3451749914227622007 -0.44352139975910365166 0.43076445950247232997 0.75902061555299404905;0.14739842113972614901 -0.46345263680616993751 -0.17518421565417041652 -0.27272631444564382486 0.066642944769674763994 -0.42285083183332927703 -0.23590799212922991535 -1.0650350113392363927 0.21085608461651614287 0.2015851659944782881 -0.16031372992959336266 0.32292094558257949943 0.66167878817022185434 0.59561317838749927578 -0.4076529396213981471 0.65084388071223331362 0.21068952001623070247 0.9677333540308021842 0.50857052111549105877 0.35177615886245439114;0.23835287244626202074 -0.91906792752982402472 0.93747417136979360741 -0.24865007492143936796 -0.087039153715604986039 -0.6423324955602561781 0.16642801280441918421 -0.74290615594855491377 -0.33233626547271682972 -0.19834750354887317747 0.073978099780128397933 -0.27496188322377657087 -0.27103369911113756041 0.011092700434441795515 -0.33496644473199294056 -0.31705832588719484733 0.25435210236879590706 0.1661865309222511633 0.13861659297970760352 -0.32244251344646585045;-0.56301641559072990173 0.28701858550435477291 -0.58877555002233927794 -0.1236820187784021946 -0.50530170396950324641 0.7881484639003933923 -0.52356357799599284597 -0.47200975697667046926 -0.40420059957795118066 -0.04693566222957049755 -0.75439716439182358254 1.1041781201051936723 -0.65632837868602256215 -0.29047460451408707582 0.46896647196435270466 0.11915097622997292137 -1.0328476681014480132 -0.06898110119920793093 -0.24650361089780337132 -0.029722682788105005136;-0.45339450106727702261 0.02575733528829646235 -0.29852334408345515548 0.12464146094493204486 -0.13862892876049490165 0.15185734197707204118 -0.45036509287759296516 1.1744567593920038906 0.22046995511991940297 -0.026861798866037452788 0.26127878917653862834 0.61998426184252286575 0.011306321655159042722 -0.9290589397955569817 -1.3615556002238065059 -0.33241005779860122171 -0.34874901333833097095 -0.45620899519093682795 -0.2877654210589288275 0.051486182388971291068;0.52213867366957489313 1.4098051927006243211 -2.3756972177562047932 -0.71092123768513793003 -0.36447701383078145998 2.3716501140914414414 0.28098116939744943732 -1.0823056987127801509 -0.71317409367292416977 -0.19864048946681187036 -0.24774128827322353108 -1.7312262544416816556 0.87086642657793500444 3.3790140267052417578 -2.6023221692672793282 -1.2005185674831291287 0.32966328554196011602 2.591911434438190831 0.83189714751062027176 -0.84029839568206343703;-1.1626843501746431109 0.44960061751492796933 -0.17260236522857877461 0.23178528570697279343 -0.77100490627667339627 1.7418440481967825129 -1.4500379777407401694 1.4766834760645513036 -0.55672517119572106914 0.31252506051791861807 1.9606274891140380578 0.5659676522146001032 0.80950375459858536775 6.4144919904903296981 0.16954618680968364108 0.5429445327285075118 -0.88639338013430502006 -0.16241910022744412978 -0.12896640291093194874 0.62092758236784517667;0.41402548674588501854 -0.40352207097095244004 0.21628401706031999407 0.16739755661394720154 -0.12581312711917211344 0.23700934164147113847 -0.036897214316530528577 -0.044589448147629912045 0.0043415994356656856246 -0.1888961086735469197 0.50660530019450200623 0.38881660871700257642 0.64874118374705636025 0.59008896922646425498 -0.28054925862667762226 -0.59692327712381154647 0.66469876004340866515 -0.00060560088515241444762 -0.36236539870278544617 0.40916687445300675696;-0.40829333542200518803 -0.18970028795919827158 0.9010766063721052932 -0.17007647613276122289 0.8466016328507195432 0.53910742218634810641 -0.95967329166216663872 -0.20878821465049959838 -0.05896149597550724708 0.42772374485578257275 -0.55883373310481720964 -0.33611683728334096344 -0.56484932651320363117 0.63129538895763004369 0.26008742504270188078 0.47570213349691981009 -0.43481806501810998933 -1.4003488447744236733 -0.52853524553952035969 -0.19972662626204815139];

% Layer 3
b3 = [2.1187923091527363084;-2.2814306489274844836;-1.7485489724707314885;-1.6386576334887343886;-1.2853241587303518845;0.65058455327479947083;0.4964452146331926885;-0.45614754650990724238;0.030455032579960402556;-0.033828604350002400292;0.24750559351640619155;0.058445808768789825338;-0.51722128996160476877;0.47292734026544053227;-1.1170903348068406125;-1.0881473709635709479;-0.93209301424950130599;1.3883929095390945552;1.7003968375002045388;-1.6418812322965548045];
LW3_2 = [-0.26546577191144737906 0.19894945942009348294 -0.50598584616251718327 0.42584633382977249427 -0.82298524410554985131 -0.92161514208122041758 -1.1308965450706465194 0.48807429597758444917 0.32882597432172611107 0.69461100667130493136;1.1213833412259890387 -0.89134736144986914663 1.4813149532601468383 -0.44905211670616773656 0.42697349474017864956 0.10925664995962167114 0.35485548412259182438 -1.1500292066581718764 -0.28798565324896124862 0.30516579184268388669;0.43040397207438579885 -1.1012295950123398569 -0.97556091765533803351 -0.034298533810880375838 0.51807051238924495262 -0.040694984737535924713 0.14696005437497286494 -2.2412076938784495361 1.042447173840482133 -0.041984482162805911165;-0.026734882519763841086 0.087787962074456063477 0.18919710243869594657 -0.66535867564948758535 0.052417609130689345187 -0.6393405029426394437 0.78042159360903617937 -1.0913687065010511112 -0.31087179875889447977 -0.75084890917574542701;0.25286836256571454395 1.2963560196467303065 -0.1760648480813911676 -0.42655378499525009595 -1.2086721281778858295 0.3046016996171410085 0.48275958459841683545 1.7604637498201303192 0.069177320126377395137 -0.48566260237049863058;-0.42396892278903997031 -0.93026963449376653958 0.39885793213481096631 -1.0748635500628049844 -0.040728982764842130981 -0.053913807920335510282 0.66935733004811970304 -0.098692953128033056309 -0.76879831464462800028 1.1295671155849675849;-0.98126338422443626364 -0.11557005501794062607 0.02291165127423192005 0.49369755540392840087 -0.38404684604308847451 0.18421510247286182471 -0.45170431706107561087 -2.0076165177016349617 -0.85821907968537480826 0.88793857201555137504;1.2444961894062014363 0.44813861280514838414 -0.71571944325267289333 -0.050577452964132241231 -0.48288749761017324413 -0.36329944308653144835 -0.59785865493161205464 1.1224928317110951514 -0.87505228320577344014 -0.64441504102098567941;-0.29928460877935886275 -0.70376968705096187851 0.60316870820483181603 -0.8185078251747488487 -0.14240123787205710704 1.3031111473007037649 -1.6488585420709336304 -1.6034605594143316321 0.5619444416854962876 0.28984097545979681243;0.89234617009457195547 -0.67555931396906010455 0.41352933304145061966 -0.69156978176336325603 -0.14857345734662902315 -0.061716900811562447338 2.1385714014637127178 -0.073829740748077354873 0.79896996903659356359 0.47833746638903940074;-0.62280409278680981533 0.47354384391391840525 0.23444448734532988277 0.93383819989432126363 -0.46114033366792983593 -0.701515844606405925 0.81436123731275755766 -0.89617022233258991637 0.94662929569594012058 0.37862336360522441669;0.58299728980694798253 -0.68965398151508483515 1.2919616753052081126 -1.2294442513418872842 0.65603623054172732765 0.35714784723202575023 -0.59302339083319877133 0.20943865732982666628 -0.16540950106813812059 0.39059782151771527126;-0.24776809298352031607 -0.01372951436528496022 -0.36227118570997168812 0.52079733990771004404 -0.50719605967801917323 -0.49193936429891260698 0.3524761427359797139 0.11771498299140537025 -0.61944263629503648616 -0.61915290475239581625;0.6532313507173543865 0.73724767157238324522 -0.94701209337664549182 -0.52574128822281185336 -0.41930879795251629893 0.37248037875395723084 0.066537334405844417162 -1.303626326824762538 -0.66861661026810659259 1.0132221044286338074;-0.5608299657835036367 -0.42522131782909855513 -0.59420969195513140271 -0.56176085882958082252 -0.40094861332017123212 -0.66073467228355764469 1.2428829022461402865 -0.39586053102532997583 0.48486820877267911012 0.84113243613373622765;-1.1115619778460650302 -0.085686559843838105976 -0.0048447813734425193566 0.29270613149687968457 -0.39366558589702776993 0.64404318023019291317 -2.439296858339970786 -1.073771087169706151 -0.74772495886181988833 0.37290117385737064915;-0.706244225453061647 0.98605209552748218638 -0.31717057009650972965 0.81102091385524843759 0.03932388020097957182 -1.1757840787220832368 0.40264972395123704851 3.2162060901921867284 1.071210328995541472 -0.89883072854202350488;0.90941756287982766782 0.53626794329220195401 -0.075985812860038359773 -1.0560652927710845184 -0.49659314182933356197 -0.91549578459120062313 2.7139670550387364756 -0.71278147576685302322 0.37152111598604470322 0.69760446718702950886;0.44180660032304852614 -0.6428189560682556758 -0.40267640043369762326 0.61952910454230358805 -0.92735001313651121979 0.087443840742917222641 -0.68919757787881108513 -0.55601268073986109819 -0.33884313426475731745 -0.80840918960769403423;-1.2295289278489762719 -0.56439086948049987935 -0.80131811244743300637 0.60905552074837310261 -0.035818024568008061115 0.5142862392175195918 -0.38705183541620319376 0.65946730353314009232 -0.24183041110961306375 -0.64223318080494162796];

% Layer 4
b4 = 0.58612049991650772007;
LW4_3 = [0.62829842715220729499 1.4526795842166728701 0.8495449307683914375 -0.21787687801756316919 0.75828529708410330468 0.70918443447444134975 0.90809315154343839271 -0.25552544440883900867 -0.91427393152297820045 -0.86213800069577828378 -0.28486976458575236082 -0.52446903067717887126 0.18112586502639474451 0.12913900369939257384 -0.34534932399761125721 -1.8980121646516669998 1.2064989911711121451 -1.0714900760740591057 0.12433483671027120709 -0.2293397749441053457];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999934;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
