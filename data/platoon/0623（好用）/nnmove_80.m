function [Y,Xf,Af] = nnmove_80(X,~,~)
%NNMOVE_80 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:05:46.
% 
% [Y] = nnmove_80(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.70139767883548;-1.99738196042707];
x1_step1.gain = [0.053913604005474;0.149967019141203;0.500604127399131];
x1_step1.ymin = -1;

% Layer 1
b1 = [4.1797154025219125373;3.5441730009410750135;3.1127106674194036096;2.6798618651030605697;-2.0502840640081361201;1.3177424246915692141;-1.6215876030809894814;0.7886785553764915635;1.2062344440693841818;0.028224583860246774125;-0.090536876633813198612;1.1575773205784614106;-0.079111978735966828613;-0.10464473041878503967;-1.7614137114529839767;2.5050438507798507004;2.1471119564139131697;-2.7254022177246111092;-3.4413122248946454995;3.4591017658895828468];
IW1_1 = [-2.5730217055135251591 -1.2986001769888795287 -2.0136069248641712548;-1.715772508220962056 -2.8771203649924639301 -1.5715415721618077871;-1.9696356657944853463 2.7963722825976682351 1.2561270347169912753;-3.3856229750020654379 -1.6256518678186642202 0.046594240270632747425;2.5858506114446995205 -1.2077485687460187691 -2.5371132652691614773;-2.1290905937689221794 -2.7478478808862756289 -1.5588483179468082263;4.6689042933217317355 -1.2306601152376397401 0.40533222211172892369;-4.1818781149608073022 0.14622437652900935334 0.22417307028514821265;-2.0322634665805736631 2.1867382951758664866 -2.6821819189674140915;-2.0857671695823953861 0.065261992587524755849 -3.1645066846520277792;4.6154548889443303139 0.27528517371298094618 -0.75110963627265658893;1.1210861488845618172 -3.7344353202779330125 -0.97133276609788921085;-3.4497282160376849802 1.4093966492616272213 -0.72901898499119210939;-4.2876512746076906879 -1.7640605196976977265 -0.10037303285208407089;-3.2178339525368917506 2.388388046056949765 -0.2359108378430841424;0.10449303624722076911 -3.1386036106551147284 -1.8750967422519100314;2.8046545525243429253 0.85199381502739024441 -2.8360884893124711503;-0.86549183898499659762 2.7148641136982263333 -2.86303691819565298;-3.0957053231891626943 1.6136730329275381646 1.4556470761849487072;2.8782633557298904492 0.82305739445809733557 3.1043495357513593014];

% Layer 2
b2 = [1.8659642434356660257;1.4504049872908613139;-1.0540429127624082462;0.14159913524299647114;0.1169043077564845684;-0.28476883128404928414;-0.71412479455184429966;0.65339146543504300624;-1.1013637000764460172;-1.3987881335869942756];
LW2_1 = [-0.32200362603170457065 -0.16591114875654183747 0.85496018139473028974 -0.12686502774583363617 -0.48726611135663505658 0.50389332584453283559 -0.11859674077155349381 0.33906791793434820637 -0.32154789219597312844 0.15513215961856671732 0.17694678795842050389 0.43668988349372839242 -0.26042185771324971588 0.28668587198853340281 -0.24783396137616181543 0.53505502122999870629 -0.34272597705878926622 -0.12111108239074229453 0.4146501802984167151 0.17383566768337782582;0.093713652524912607888 -0.20166229926230216929 -0.5261929391748504381 0.28380524420013425457 -0.034064420687540668264 0.89776608669066249035 -0.50895480055874009473 -0.25319979913800694238 1.2470882697157454899 0.45467632437705185477 -0.44055050469212975184 0.55911357132459327257 -0.58790664087641386626 0.10214584205850792131 -0.12651964745714472382 -0.010783007331023899966 -0.56283339971776469302 0.063333331529594805165 0.14092700068222677179 0.95948881463760427035;-0.32658739866327152201 0.36851700781358298631 0.35171286692196196411 -0.077665013712069630447 0.41776418819757998868 -0.027980382153211927343 0.43138244398293007498 -0.51165573412231135642 0.97230354868428459092 0.23613163678946438861 1.4250540715726645047 -0.46992340227682422027 -0.2026905103851470713 -1.5746808057117764879 -0.41418328492291522913 0.24453252914274448138 0.35983255160237981318 -0.52703463795920912904 -0.35836560601871469967 1.0160257088515862733;-0.39061443356429448315 -0.53826762092706714746 -0.33680341871641544804 -0.41145211170425266545 0.03632998780904461017 0.73451035927928709501 -1.33328970449672779 0.16423531977166483387 0.028136045929073254246 -0.67961900288217735877 -1.4108931610130472922 0.18456728148814677271 0.13615342606713981555 0.57354986010220165848 -0.3102268301751476276 0.73425142583909941418 0.010114175228767702253 -0.6814285575412027951 0.9426994212479931079 0.31342897597555924305;0.22322359215086420847 0.3723772590706845298 0.062157703147664729315 0.34878676450006257381 0.86899435584566941948 -0.53151077269600188746 2.2888845970310365274 -1.9130995941003214877 1.1208546989600574051 -0.11732245640623226168 2.5324650432960442714 -0.30571628826685026681 2.0332221680350746063 -2.6688834697738972324 -1.2540477035003154693 -0.18234351310802102142 0.46417017344410099744 -0.23050172857298642515 -0.24637804201653221159 0.6784758029117249345;-0.24591708362981742897 0.42444133729018279633 -0.51945424907934367731 -0.010229023631515178974 -0.32929771754865672095 -0.26152774425721486695 -0.55265975825741586736 0.425856304322554724 -0.92437776796354831355 -0.49460825763824572965 -0.5194545462290137694 -0.36624586155613531036 -0.22954598152810862244 1.4632136492764880042 -0.026659588815992618649 0.07750575545285783019 -0.67886886285809133756 -0.36545030449962134789 -0.47580568627731423259 0.56011147258108395786;-0.40290374256948913168 -0.48044680911640991194 -0.15348590301100870081 -0.31211960896709883828 0.12976997494266323541 -0.18878812369288835993 -0.20239080583486251941 -0.30893717053327207633 0.16854543670317967408 0.058805789535694853731 0.27731088041058549187 1.1079487691735774302 0.62935973571129932846 0.65900515936194126176 -0.10248983347952962675 -0.4173699735107267994 -0.22160786779672117519 1.2464017662335105108 -0.073462549950598476922 -0.5258278385825052581;-0.10929712759644666376 0.069735555594435852389 -0.65764226389854829602 -0.0046334216517397060209 0.38228824685874712719 -0.44923462065609365279 0.18091384723265643841 0.21114742171385064706 0.65234619799741833113 -0.46644811211502401616 0.18866742097664873645 -0.70870210252777554594 -0.18997022280826292295 0.23463289354879776627 0.5363755664670082357 -0.59444483232274270001 -0.12624723896408554524 0.43660802690445571494 0.15440124259541787577 0.24051300137726236428;0.10726338893819223341 0.2459240489307866484 -0.19518565101825888219 0.45900381171752518972 0.087380029172519385616 -0.084362292572390765177 -0.21572607562919324242 -1.1392259901211907458 0.43136185942506261037 0.3317618342008644694 1.0169789702950859933 0.5944787426091482363 -1.0121726219243205591 -0.18041373027052590161 -0.46515997812779752429 -0.076212646375724002468 -0.27913473084531270629 -0.62884964535094689531 0.16898474518185882531 -0.28851871831059422435;-0.18630564590853088136 0.10086562064006612816 -0.20191649829374017089 -0.16087290064522746791 0.11477041570850353425 -0.93784114199367540898 0.45779802854309198379 -1.1893495771820177254 -0.24171638033908804388 -0.098888579025030676206 0.10162089328200415994 0.41572545790313975012 0.14673161199660561538 0.1130946005215220096 -0.0037418045623816859752 -0.053384388953457109772 -0.31947547572555917705 -0.069021822462962803546 -0.83189596706203572385 0.87407585927625919275];

% Layer 3
b3 = [1.9555226886633148009;-1.8270796580478219084;-1.3213848041144589107;-1.336696130633103996;-1.1543542037449654458;-1.0367855090107065408;0.50493946004877032774;0.35182063073906455486;-0.24477923293723335973;0.17288409778936300598;0.024601026643264922028;0.28934440079711631899;-0.49822438201861690699;0.74411343704650356745;1.1304912404338469667;-1.003631472319492568;1.2807278022852093269;1.5199939396579127404;1.8957834422644053163;1.4225506033020860475];
LW3_2 = [-0.39334744525802245452 0.090269233870387891039 -0.95522848987871622484 -0.97010655683933710858 0.35932654034283234568 0.47684670780900079157 -0.53128884446562729682 0.45120200637978985503 -0.22940573838201883117 0.48140277000772119242;0.23884513015709954442 -0.98061201825189658887 0.62031202945526542347 1.497040806215873987 0.34769474918847215195 -0.2467460626361478726 -0.17715602845697805967 0.39939963862156097063 -0.46577846485199408955 0.10739501367350799688;1.0374201778809146735 -0.18391637759224421789 0.96456459148459483544 -0.47937713445105140098 1.6081198225879227426 -0.14858683516674175973 -0.65242889411537119404 0.56519940392479772751 -0.42176891520699566485 0.018524738557888734136;0.43759152748362079022 -0.99068958174884802492 -0.24057608288754919745 -0.44737410063832006024 0.019317670628167186997 0.58572604163604924388 0.71933607524879672468 -0.58942443995809568058 -0.21005185193149492062 0.8181956300051419495;0.33433654562093656493 -0.68315380653692070467 0.78669723129809510098 0.046833385778010182265 0.48109962549378576524 -0.75978112294422184281 0.045684018105277446331 0.15713015797279980545 0.83396475635397315784 -1.3718241191854050332;0.33895151259108052821 1.0485035018419261998 0.35081042921071620144 0.50296866106742621483 -0.43323017705002392352 -0.19290544553060373634 0.85756896027574747166 -0.072361875006183712378 0.78282278198439181338 0.60945158835886270587;-1.0634863409202728324 0.08675222718204576855 0.57459327145726424302 -0.17872325850008929926 -0.31326461321826420958 0.77184322421109341494 0.59757337034134383469 0.49619034658354449485 -0.59359603268205018978 0.67904963558051323336;-0.17892977466293616406 0.50844466662297937987 -0.27434688951024510661 0.2666562369886871231 -1.5883528555141519512 0.93541101870914378225 1.0224963207248898289 -0.8777133944141386479 0.37735323449350272051 0.051149099079812597457;0.7308816445208318191 0.83169280542345958018 -0.64365715670975798268 -0.74868540702912689255 -0.78413846789378216506 -0.64627173174505569975 -0.54314855173264309229 0.13582690737220923238 -0.72527166628166683804 -0.56482766793659522353;-0.76023707328782230697 -1.2107551628842243563 -0.34411958482625992772 -0.80699251153134998749 -0.021217463115522312844 0.19987793954260307805 -0.04365078838870185135 -0.58330804287813109443 0.8562066116817952377 -0.2401985690125191808;0.66528063078556032295 0.30532004503110249383 0.30269296654390992485 0.063141271883295754797 0.09087766623544349387 0.94915650570314935575 -0.66988176053442616276 -0.14753234357816227829 1.0392050238926484607 0.62968627848008629222;0.81737369299505291398 0.78540656389754981426 -0.50491071032225864901 1.5065098778950776204 -1.2200701972105307824 -0.28686535833213305802 0.94943172843205447808 0.026698251469514662493 -0.18257630907826877253 0.21654554347529292313;-0.7874534645782848008 0.14954032074607614966 0.2444147052939616982 0.16732743044295322887 0.65796972743437132092 -0.84218120213912017746 -0.42824510613756072708 0.98414594448748826672 0.059829570881251070702 0.70313220481575633425;0.077718757028173032775 0.098122414823494055747 0.075829994511515119715 -0.13967073756744974311 -0.90927078142992012744 0.93423886252688381759 -0.11162692832443786572 -0.30438515427824663906 1.1826044621914721944 0.91930250428464233003;0.62089974874139330918 -0.027150833880739581178 0.27495808144845262921 0.66640599289480506595 0.89422827577601771143 0.14199055061688359292 -0.38676813790358677281 -0.60950155379538006883 -0.88978769696684745227 -0.32690281345766275534;-0.087663337418220910191 0.90723601008119136857 1.2334138113906145673 -0.95803989126983013502 -0.47551374245945798869 0.20804388289712297255 -0.15072436667642000185 0.76142541023894005914 -0.15319109218197668465 -0.058939808655741318666;-0.021595695678745755602 1.0070665668450127228 -0.26764931962649890496 0.46364295373039238202 -0.80465750385171508352 0.10060611524964080399 -1.0581427057488630439 0.37747709396548040361 -0.049418732508015768279 -0.027567747861635766293;0.36311514312960646578 -0.031401615204005757509 -1.5358347602700928025 -0.57251263375447258852 -2.1146100017804689841 -0.14657626527541328665 0.76056844702240533618 0.30466113122495808163 0.18748056657006006986 0.50997874563563982964;1.0507756652194935043 -0.50474225220408230896 0.67818026498560901594 -0.51050359809353273999 0.67696234156665391346 0.60369278137559845288 -0.40627357578342687683 -0.091395166915533593288 -0.43646454481944568782 -0.16960570268090827128;-0.1587138290425371967 0.29766527169092599214 1.2122922263130033738 -1.1684015870136723603 2.3666094711610705659 -0.13117401124575883697 1.9664249286048223198 0.49875561882922908596 0.18455248298961932085 1.507736090158240394];

% Layer 4
b4 = 0.57385613319340378347;
LW4_3 = [-0.15069211490183978541 -0.58115083236256870336 0.71015816572118539707 -0.23044987985918236051 -0.31794064465168714317 -0.12964409632556397889 0.012427173017381554221 0.2678151362801750035 0.44501213492213725909 0.3226458498817245113 0.0061471379640098220559 0.99994366341764595596 0.032156030574192612237 -0.010478979052855432949 -0.88083500432231220945 0.18448942152602673672 -0.59167998765366647262 -0.49135931927764026073 -0.056462567648603953496 1.1083561235734891159];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999934;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
