function [Y,Xf,Af] = nnmove_93(X,~,~)
%NNMOVE_93 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:06:17.
% 
% [Y] = nnmove_93(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.70139767883548;-1.99738196042707];
x1_step1.gain = [0.053913604005474;0.149967019141203;0.500604127399131];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.6473647358238570071;-2.9123705274380435881;2.6319639507445700133;3.7645091272834223517;2.5870092321585587136;-2.2234225679006733856;2.1107643313950270603;-1.149186546079812965;-0.80390010181046334115;1.0839625642633246017;0.14180611346583252286;2.3245863297057463015;1.7965324385529672924;-2.3581483187693952353;2.3146496742954383308;2.7188827617044033502;-2.669824737190910291;-3.0823781631942703818;3.8318105748107602615;3.3907752442549559113];
IW1_1 = [-0.98199142444147102804 3.6515328902997272742 0.48823463456791110771;4.0164451858545584528 0.46507362131558094287 -3.4871329112620661483;0.4775426381944220533 -4.210505607267447381 1.4593090491206968107;-3.4397921178074848392 -0.18473165445709907595 -3.414633170230202186;-0.46278163698188001796 -3.5447869115406684948 -1.7358514626807932668;7.1671120872325531082 0.22473925569487476772 0.80866330186094237398;-2.6792154645764791887 -2.2046284670904401359 0.071793634056599331394;2.9531903109477504188 -2.453537323947170723 2.4795262604191292688;-3.6062951143350781003 -1.9996151894403084714 -1.3407314011033688583;1.5257974899562416482 -3.7289744294120459323 2.6822098669854872455;3.5335416017945653344 0.47819004674448151171 1.2881164149606785241;8.3004204909090972819 0.55421022557260346542 1.2480286163521663312;0.92934120306368073194 2.9521021601387076316 -3.3208632349489297653;-1.5536779567767531329 3.4277226226895463057 -2.7274455791521763359;5.3101931620397317957 1.1897132374481846906 -3.1904355403086115395;0.72065282009102371585 3.3092700089460183044 1.4638570869208431535;-2.7649330702311689656 -3.2382301025120825422 -2.4516609374278126587;0.16106215817426580705 -3.2104750789802860567 -2.0335317339757508215;2.0094654074023989843 -1.6160575873467015739 -2.3900707947506285578;0.38446674129738983572 2.5564631911334574355 -2.7938204953185796775];

% Layer 2
b2 = [1.5537956730576905073;-1.3436624113638098166;0.60612334484285690372;-0.22888393636259113384;-0.45740582157999631896;0.1931473130289736162;-0.48104809451530311515;-0.70308716421890959936;1.5534640622714381841;1.5712141899545208901];
LW2_1 = [-0.99052431874597801631 0.15004011031465522286 0.50174515172480060876 -2.0849466093927362387 -0.71345447100648384797 3.6420876196640241673 1.1416009105301840876 -1.1735343779228768479 -0.61272246286617781941 -0.95560821834161335797 0.78024293208527606414 0.24458201699918816208 0.079899906830162514826 -0.67722448016328329334 3.5298151731146778509 -0.1814493517027403191 0.67181276038071846557 0.20008634533357214091 -0.099404733005763454279 -0.48279564648793926729;0.083404456005265317775 -1.1605157138534918371 -1.3936435994168430152 -0.63680902891585611236 0.41499228579446939547 0.58662834291350074434 0.030216656892437427501 -0.49041346052911427567 0.87590592433199332412 -0.76734257417244167154 -1.0824106950405809613 -0.85494684308852009202 0.72096433407642646074 -0.7271051318577301803 0.82314940171133954561 0.27600400574967992595 0.98473648157580617735 0.66596148893994255857 -0.44753675480715671142 -0.12003933941612671132;-0.23494891094422212796 1.3880204215857514516 0.41195321088996755821 -0.28404967510316608825 -0.47817608603539019096 1.5233158874416889983 0.028236319900210925943 0.17129504918025145743 -0.67810682771703467697 -0.32436849363798758716 1.0659875182956117801 2.9668402392344654928 0.2813027385600161967 2.0165205434384700922 -0.18866527117181294826 -0.067504157386233859528 -0.37856698666805205233 -0.0070516003424927076876 -0.09691742536506238459 0.75872500772308704153;-0.3185551037446737177 2.929884901412519671 -0.052933619632461265114 -0.19611550190187540532 -0.69590009799501284515 0.65718449693411662427 -0.54584122033935988938 -1.1768159015135783996 -1.6388724211563101552 -1.8343168580009308055 0.029169177394971997075 6.2011741666994781852 0.033420026542609684861 -0.81929481561066053175 0.84468874229846824253 -0.81699266226431876969 -0.32380179110985995994 1.0509082133353844224 0.79816337021584138345 -0.038464298921369356743;0.12887228830073987895 0.031339327836099516167 0.17876374359323699004 -0.31849080644571597931 -0.010412200167383601698 0.48686227700565598564 -0.18329923758794827715 0.48386494101423144221 -0.45402490293418040768 0.36357994927076536795 -0.40295877518393852235 -0.78608030546562968066 0.20623541492314925727 0.13083327744114020552 -0.31585355869784154104 0.51262385003175414688 -0.2214438759217102759 0.86619392363048963723 -0.73750386767768005836 -0.6185109949062703727;-0.16918863101936940097 1.1727357220597420806 -1.3274834112882523129 -0.57960482218244369079 0.18568399837721005774 1.5393489652061278505 0.47774443377507264108 -0.21772404187828323097 0.14880896544860539032 0.7547373991508566915 -0.06910131315444098532 1.2492613332194317799 -0.88100999845669181187 0.018285631677896721503 1.8102539759307862965 -0.14919486617803465189 1.5520738821348469827 -0.17611244196361292014 0.54800706368543083968 0.70209928464248139157;0.075001808982771644985 0.47313106766214690913 1.4392814548038397326 -0.58711135406496439693 -0.21193869015873814665 -0.099119510501926841317 -0.19087453072895055328 -0.64074263260172770185 -0.95758356287918966476 0.038339038299359119721 -1.009317363539466994 0.21404805622787376196 0.37110002599726943373 0.69135969152702247964 0.25048689709777804957 -0.092598022574672339546 0.55286621566632532243 0.20418398692856393195 -0.30339026779899158637 -0.080429137710053180688;-0.57805976338226727762 -0.35602152513514984111 -0.41519512093020366494 -1.6828328045547813474 -0.17128290030637696728 3.7525769269729458699 0.9559473460121299393 -0.33166415624265965789 -0.13546936410884388713 -0.23493828260075957926 0.064919722049540176667 0.13212432303479187956 -1.4823859902837575042 0.2747191036868583125 2.9326191544286062118 -0.48121734909879104736 -0.17574241792444666999 -0.007212431642662268938 0.53629277558163690465 -0.19550563034371729043;-0.51674957039841062922 -0.93525894352194927084 1.2636256480580159156 -0.34598343483444293778 -0.80589234677604115742 1.6539156036199189614 -0.07665980966235320937 -0.19760457837753364618 -1.0612780833553061566 -1.4709807370729068854 0.80872084424190826546 -1.6871656994402319807 1.0078037253289204855 -0.59298977680319342465 1.4407624240646605962 0.7151859363639592182 1.1064739060336092891 0.26475991161964967935 0.33852836288863336067 0.2986493809321835724;0.42239982786127222569 -0.19627366689042080594 0.37453185545529715794 0.33630111036254073387 -0.47625350517325609756 -0.14901710549133823092 0.60837819893848765762 0.11294654496554334955 -0.12570742883603414075 -0.23266912611748924444 0.17321925020090953029 0.3990070635378115127 0.30169631914703948228 0.45701949742082392802 -0.055995966640027719508 0.53631472463506113524 0.45730818481807966602 -0.038165885349224416834 0.530820577172786634 0.24690669622237287895];

% Layer 3
b3 = [-2.0100926014268756248;1.5780939465752421569;1.0999092671160872747;1.5438939221437026905;0.52303335029980424498;-0.39648773848908513973;0.55161467389810314721;0.14180821131508392074;0.22744348161921507101;0.013743892018719349596;0.19334797431043115878;-0.47876183553272899651;0.16646113538192883197;-0.38887395243253503052;-1.2510428634618433463;1.0362378603065729443;-1.6962323315695397863;-1.6898789917457750498;1.0214020994590615743;2.1307716026502379059];
LW3_2 = [0.86409629159958578626 0.45505323229885064062 -0.79481144086234623014 0.422717951530875935 -0.12108023014876349854 0.47969625692770712089 0.8158729630267927968 -0.24371139793378132632 -0.71506209145436694374 0.38115478992361517818;-0.62739948420204427748 -0.7735220278960143192 -0.76970324814904378385 -1.7991642105498291127 -0.15339646253643951512 0.0012754831000895152336 -1.4409053303931653733 -0.2373860020936219839 -0.47439760613324033489 -0.71555048636751150681;-0.37671587878593498777 0.074073970246293710518 -1.5681622114074662555 -2.6003865828005316985 0.32175434650206424791 -0.82688470690617443815 -1.8993105043479689975 0.80265976234364388997 1.3759231339779245396 -1.0443321124883320206;-0.61219339146344853297 0.59379014011078434798 0.18290855562221125519 0.42122996459220279908 -0.83389769059487006686 -0.17375610562082957622 -0.58705214442115760676 -0.7377162138600040775 -0.58409518361808754339 -0.45167472103264449945;-1.9299700193286226657 0.45111787298753680542 -0.78499287312648835524 -1.0043224089558191459 0.40972573974435555488 -0.58236495435979029889 -0.20716315301026100304 -4.1757118112263054144 -3.1575565640803393563 0.14235740659739420932;1.8053111289680401352 0.26371542765584932155 0.59662508246702250503 0.65871085726097955426 -1.171587547855459821 1.2082033883228144866 0.4119219491112910414 0.10620072456021056873 1.4930276839361389385 1.3414746123356569019;-0.60338016397326066365 -0.36904809363172824677 -1.384722738181835 0.72140931955110310092 0.091682889006810527888 -0.77006433580921773707 -0.18675839703427718486 1.2781938368382743665 -0.81516201938665688864 0.048797502413671374477;0.049926472999748970627 0.115865525430872085 0.29828861486309010687 -0.3523186143803855308 0.74846755885312099554 -1.2955736672231092932 0.4247428768250319786 0.89244159376016340968 0.61429509773381341109 0.051538517701407444982;2.0065028424306596833 0.20044395508799320305 0.71222756099110129391 -1.2210091094383399568 -1.1504937505554377886 0.90142614216347738409 0.34752232381044523279 0.42624849733639580407 0.89573595303882391772 -0.022166584855263297277;1.5387879786855247488 0.0044980270349556693635 0.59555785609323574903 -0.23610764325160779609 0.68542027673677474731 -1.0131115109172981192 0.017244854903482494113 -0.21671418961211846854 0.55150029574745351724 -0.63775484524714443069;0.61022263185038427835 1.1595942504185277055 0.74004897535608671344 0.49093296811415182423 -0.55091690223546518901 -0.1528609770852689953 -0.57409937846261638317 0.69112264717302684947 -0.20497389797986209636 -0.018442540304126724127;-0.984702362726188829 -0.54418236522517582365 -0.37812182727324955556 -0.99013682118187484882 -0.78250548355294258229 1.0511463245624577123 -0.45425480484254759928 -0.22603405890863795258 0.31531851198253663116 0.023622284775883638924;0.77348116441094783013 1.0806048686238591827 0.42864307304558973977 -0.33611464645815808394 -0.32851774494613317223 0.87716595658326546037 0.80938926249863674123 0.15529454747099419309 0.23093427155977375165 0.52688110756889894315;-0.87153019407360543536 -1.6738892019296103264 -0.69615606681652331122 -1.8727305478146871742 0.55397392252600374807 0.12123216247545755275 0.64760493814635888832 -0.16620847662586052396 0.13564000766401329567 0.052024369437243520031;-0.47995345203291189806 0.68960677994971952831 -0.16326123973578465787 0.42276013461922296033 1.1717728152044315504 0.1250326001799258735 0.96896045134099351159 0.15030236157829351962 -1.0153276762999006166 0.17903021158660695211;0.93175912879199151995 0.183513964716725958 1.85345145075219353 2.3847201577829850727 -0.69745770648842186912 0.90800957894472911214 1.9658150639761626799 -1.2786097820633848254 -1.3739956153697261421 -0.83654231966003522736;-0.32018113720644236775 -0.10276059534635920145 -0.54495325765056712441 0.74619005035462926401 0.2340947397011462483 0.13780216965972624799 -0.26867617179359271073 0.74279181064207966401 -0.41669195322933405556 -1.1698439326633693902;-0.78591801089892332488 -0.58383193804028243878 0.087202041311138747681 -0.26894220714769595526 1.1564578948599422148 0.65906689219130853985 0.60502847486377875352 0.062495962383686688713 0.37205034804662734382 -0.12879516301136048617;0.31177453643194480426 -0.77887654981929421716 -0.92757582042058039917 -0.91967741153555615519 -0.035444020560593127167 -1.0190677857729426581 -0.64265996149054660513 1.0965264588219123532 -0.91211567344902833021 -1.0051259472181230947;-0.65190284689641642135 0.43637762194277018857 -0.24238102727573751505 -1.8448954448522558724 0.67413995396123194137 -0.0073809725802209177198 -0.68161601924164105792 0.54881060199881592787 -0.49140157706318088326 0.59389145688503741649];

% Layer 4
b4 = 0.4597560202616198799;
LW4_3 = [0.070125254703814296486 0.53687276869325728512 -2.0083921236001960331 0.24113596264063572039 -1.0647187557071977615 0.52346505818096700224 -0.58162868742594986404 0.057465211459631154733 -0.72709020770730403704 -0.80042344198442361147 -0.49630079347749955776 -0.92543126354959348578 0.34818410935374644044 -0.47763399537821271679 0.40974008847866133509 -1.3261887847742859226 0.27237476249162595465 -0.1771866169844901473 0.68853730155562431481 0.28535450910133103308];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999934;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
