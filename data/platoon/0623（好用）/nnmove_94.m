function [Y,Xf,Af] = nnmove_94(X,~,~)
%NNMOVE_94 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:06:19.
% 
% [Y] = nnmove_94(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.70139767883548;-1.99738196042707];
x1_step1.gain = [0.053913604005474;0.149967019141203;0.500604127399131];
x1_step1.ymin = -1;

% Layer 1
b1 = [-3.7250680573812400276;3.2397485027860111195;3.3480572022189272197;-2.3463787628309424882;2.5022800940802829572;0.28797933047806062445;1.9688430283817910382;-0.42760268546491281283;-0.36395755543371871576;-0.62027150334474212556;-0.20424576004624514503;1.1283848116386179239;1.4197147358792316929;-0.81792262272427007641;1.3369863730032152116;-2.1346196017665581834;3.3582132874009231749;-3.5637961289947863719;3.0957321634931491694;-3.7626711419170688622];
IW1_1 = [1.879179761010212113 2.6831438526012902912 -2.3652944240907740614;-2.0652580495511996261 -3.2935387377993703417 -0.46887562446869957;-3.4537088151150450166 -0.56902976726456233614 1.2401673337964065347;3.9305744034971916712 -0.35934632571653046806 -2.8916365328209079344;-1.2440722401856327828 3.3006222225974983786 -0.67966164585715616031;-0.68211911269113245648 3.5333548290409990678 -2.4752270938604765682;-0.75160893367826553391 -2.8120591899416340631 -2.3411759715909346014;2.8185983441270314742 2.4927461801209340742 0.44896743686237483573;0.029994079462508524414 -2.9178009586843791645 -2.0329513407763459831;0.43596464907625481766 4.0312525467974031912 0.25314732253791022432;7.6097427675684636839 1.259704501806438115 -1.0370301160002235452;-0.10786400984660245161 2.8608984361178095845 -1.7741900020420993123;0.73669803280519330357 2.6306744325382052097 2.4904986098933035166;-3.2652772176239084345 2.5835410237907225905 0.47800878219809977976;0.85243789371618527984 -3.8186274105539261825 1.1310557868165385109;-1.9261088187322801257 2.5023554938002501302 -1.6677275483306730486;3.9291286080474145948 0.50728121107276880064 2.9779690642820897395;-1.9030371629187829985 -2.1295725101984022132 -1.7689813768759530266;-0.96075446575193845788 2.2068648195950739677 -3.0179954036758322999;-3.7953900813628389521 -0.73614001175642107544 0.38367141074548144486];

% Layer 2
b2 = [-1.7831698613639945794;-1.2749397064159246895;1.381158898332035978;0.79933415446070765764;-0.53626683992231782838;0.22713711510843467845;0.20665596741735239861;1.0930052059135948461;-1.1498485336218140507;1.2865133401362542909];
LW2_1 = [0.31052674490677367736 -0.0022495976445883452549 0.17752509328853532944 0.66360528505863092263 -0.94140534128107433709 0.097936296299622596639 -0.42130680606343701156 0.16250062855883817825 0.085745428767394937797 -0.27211561276529583342 -0.53122945234695484462 -0.53118000895213124402 0.14828685273180772231 0.48853599852071433185 0.4319215419789332322 0.43410328681597354361 -0.27900710964804720238 -0.22914176644354397605 -0.40863870458297851807 0.14143272423153915862;0.53156090749626383474 -0.45832343627618971071 -0.45645952136914041963 0.14794182598147603835 -0.46455039743405257546 0.12254359452789709284 -0.36739358722795129042 -0.40698160503016644896 -0.0038998697632829080507 0.57018428188647363175 0.24736344803880319643 0.50022372991842312118 0.177922089340992573 -0.13246541826006175135 0.01332358549067883674 -0.43159990891628863263 -0.50571383036020234325 0.15454453122207778559 -0.25850711908848789111 0.21487110959720084891;-0.58618115274230886413 0.84587304708532484732 0.47032469025370959859 -0.4926982693613839448 -0.33646481307203729427 0.016094749844381125992 0.56265704818649187047 -0.11883572794615128443 0.80864412747180713925 -1.0196341531611974318 -0.26272726288081627022 0.44378877673129640824 0.1676339252346491504 -0.8146071482785325335 -0.12617935889842474273 0.16457824597574541303 0.81899033205101856581 -0.59544831790624874746 0.73657000745011758092 -0.053879821716257020325;-0.67257425684713001424 -0.47665938585140371631 0.26929247982427279018 -0.083565620026275683196 0.8694805790087092312 0.32833491091047617427 -0.16496307016436073667 -1.1085590528876190231 0.34476048964297395516 -0.24907777663588043238 -3.0814867463437947137 1.4306368677780418874 -0.57459995664006169314 -0.22150187554237538157 -0.45185605398957490175 0.079420499374926123437 -0.53375733677173453628 -0.52512508916636990719 0.71527147319279482662 -0.70170564603864837849;1.0583926871395392677 -0.11265047773968518696 0.39606853835663863306 -0.58406127567970345105 1.3891235907996946075 -0.70448286153817563093 0.33603905142450851695 -1.1710638552270127288 -0.044094578594509874214 -0.29251050958152019499 -1.2066754535208230603 0.49305215128749618758 -0.36486227806194515555 0.6224847031827092092 0.84248990549871582978 -0.41883587396058619134 -0.75106294149995311837 0.021524951518699927261 1.3476788155523278245 0.8608683456746584195;-0.74066095801838915946 1.0380307704365245858 0.20262774829890806139 0.0033810309364895479479 -0.57630019866625781244 -0.75579535044018641976 -0.1136724895642853006 0.51795332683751593716 0.44933248763214883592 -0.53518160024924588125 -2.0934801955518613781 0.22712531948705177998 0.28163891669460910938 1.0941711560963480743 -0.76511974101983948326 -0.1046895288128825291 -1.6016806047667297985 -0.13458304486950353751 0.26569530689483883412 -0.93910793449238760822;0.36744410694582335664 -0.56581023528669116551 0.02351669963130361557 0.97448900959843076652 0.88946097959098768815 -0.054728813754279494186 0.2152955087009059687 -0.59657253096600770803 -0.18232754714137536234 0.42784010966716251589 -0.43482011118664443128 -0.28960372457480787478 -0.90784101890585855443 -0.38259303430222674214 -0.11390805470495693474 0.80127164184110510892 -0.38805296208639145084 0.50679632491581971809 0.71002076434658778492 0.14053793296330707729;0.36711481991994532326 0.45119940010605708025 0.018100181792224081384 0.10832289625525917676 0.48409266514809490278 -0.37709003003340924032 0.1467071617428511443 -0.13181901525197697866 -0.16495688877403458239 -0.038072291242279704404 0.13165791000687965262 0.63051734677038018262 -1.2562508183956690999 -0.34430680937915703055 -0.97835749106803993058 0.47300458298643910382 0.47850255698876137389 -0.76774976718526088959 0.85485833647210951458 -0.44292664579893242793;-0.38557936324854491517 0.11782406788362272121 -0.4558831845206373079 -1.7736966135076188689 1.2918965176820307317 -0.70217246552354206646 0.075837289299244325935 -0.73029158459279119864 0.41182221006869562663 -0.77283508740892292721 -1.7587328375902935296 -0.92761489575989597434 -0.44462459676676580056 1.4048727416839401627 -0.58611038643636326206 0.57928553955664519037 -2.9344349407845200517 -0.46466219165953220882 0.57285506711244216227 -0.36918456826710077667;1.1235264422725881328 -0.072989057469634854858 -0.41493686625044506888 -1.5888847207563796537 1.4597938354272081973 -1.8298889247526970436 -0.15012545468452753727 -1.6536881830113141501 0.77204822135568618169 0.42163963154144706857 -5.1306972344251722262 -0.53061792233813465103 0.064763188083316783339 1.1808354511065901615 1.1133086354198280521 0.69355498878986254763 -1.8453944542108120519 0.10226162789518683516 1.2636265951862708512 0.56528029850290739677];

% Layer 3
b3 = [2.0149739378184334804;1.7402677415040641584;1.4906958516023489647;0.89628370979308280564;1.0758192033741911242;1.0406051660696193917;1.1032104177919974664;-0.79707803281302980203;0.23185240868696049832;-0.098040016784130115668;0.052316185536325471306;0.3506532765206822333;-0.83569741686854748242;-0.68710405960631903977;-1.0491855689297329146;-0.83849210200529677994;1.267138497209225223;-1.5735197840002179692;1.8476584091156302847;-2.1501070233003480858];
LW3_2 = [-0.93519583421594199013 0.31405091430026610411 0.85482830398469888955 0.33848879658039049412 0.21557404423736459265 -0.76882783201889115521 -0.28115261595974577746 0.52514632142496742162 -0.32360119541343185245 0.53138390626405751505;-0.84431894915557170744 0.21705783019684471435 0.84580899306366452706 -0.19257818599716985952 0.59090733484315238755 0.462876199495982521 0.65696489561650317501 0.58706400500037381196 -0.81716926167415404603 -0.28908399832930109508;-0.15603712374113845596 -0.98017894431597096805 0.14109486323709843902 -0.24630021441744584521 0.5137890265067079909 0.97418132877019136817 0.011697878394579776934 0.86206579636762126206 -0.22722982400371621869 -0.70718584012298235653;-0.29772830208482681247 1.1290618454852230368 -1.0043094706447643905 -0.4029985283216602765 -0.52558899240965273325 -0.6519017634851922427 0.81906038002799819164 -0.52571660686406218588 -1.0948925884881739456 1.7341492104806004448;-0.43960449423672198765 -0.62143481075300444072 0.97172545840315205368 0.10646195971523256252 -0.93957074262443962542 0.70997234410981968633 0.32911914250644436208 0.5234907701124996704 -0.29901101563936383076 0.26648817673197677802;-1.1314025107127982928 0.23609967981711857399 0.16556969265781010248 -0.50111789077731538899 0.13535294211223899974 1.3323162106235582058 0.29170965396840314865 0.21285645024068514108 0.36253012821325630854 -0.51184024478764600374;-1.3393359146867374054 -0.58952228399713479945 0.94412061113278422653 -0.16987727963060580971 -0.20275210216723393852 0.97645147028481393825 0.30949302951546664442 -0.83872566756583477598 0.30897503762905909053 0.0065768364982268789909;1.2278403419893979542 -0.60483019135783588904 -0.74013315451759764674 -0.45384682841478518611 0.71424347061484749766 -0.058517777740213994253 -0.20470526553072734832 -0.51812355261730269618 1.2689611563216456336 -0.64129077661921940479;-0.16403426173824547929 0.59016187639985473457 -0.93614649838126962056 1.80279134803170904 -0.05552620110636496964 0.38956569932010759461 -0.069538519894765615792 0.46368617578694554249 -1.2556443765782998589 1.6672959212325777489;-0.36037347688622844988 -0.18243241918388602985 -0.015217587847705896231 0.51137463243125347301 -1.0033864604084283823 -0.53505597636937984873 -0.3528939827774528748 0.28208082287730273929 -0.10010919277786253789 -1.0879571428405225841;0.1220420398651169136 0.89875701329678203688 -0.72948816383575010303 0.25758153567676139728 0.50929511300779517491 0.17032143293724943955 -0.02819763254501651481 0.24051124132879553308 0.86647198441335548935 1.1810579658739142062;0.37009685663352143159 -0.79969127842654386118 -0.60307046852396972714 1.42707034081908124 0.68325267170013315177 -0.036187202617234501267 -1.2565356422318099128 -0.015690937724876827253 0.35267346456189246906 2.2604897474562721804;-0.60748182530135286239 0.21744657013058091288 -1.0209599850804518262 2.8807489692040002538 0.71370321266603320431 0.015631118871735731612 -1.2792331171430024739 0.10415472296127380181 -0.23842886342136559996 2.822194685026093719;-0.91482719960834080197 -0.48931521498629765299 0.81714046449725685761 0.50112282377936834266 -0.040965009655724068938 0.87153732108072778928 0.46230382176977086184 0.5706753358305657331 -0.83232421785461818686 0.012193125514646208432;-0.096788551453045490458 0.57479141091272234476 -0.68014143067900312278 0.36576716174634249512 -0.11518877585514564199 0.36221633358226784649 -0.39691615956237591423 0.46108257317665507502 2.9173491430205609198 3.2886574282853686668;-1.1327812515487758471 -0.28485136628328439068 1.0027973232849110019 -1.6884829015010243136 0.048477861588681663008 -0.19470402632158836931 -0.32501596151610001595 0.51088296789580411872 1.2787527988256610634 -0.073901448123749616248;0.38168486194258860467 0.72695756895916330276 -0.2611817240665498252 -1.0294125645695459959 -1.416730349556506896 1.4579928015324639112 0.91980264859155080881 0.022220174631633463069 -1.0974653621400232151 -0.39440750064075286163;-0.59722461574325003131 0.74256470985913314298 0.4115196106256150399 0.49112380255625781578 -0.33657666747350079017 -0.93369750194812750621 0.7824095205368974959 -0.47205379233932437399 -0.30915150175056532733 0.24435989566243604409;0.49808521904437891292 -0.8033505067595404503 -0.53377350749412233455 0.60793433815381203722 -0.70136410085838507555 0.99369100324392867218 -0.24723991431566158528 -0.15057484178566762911 -0.17499769550843641275 0.072975505741756957478;-0.85487586228019718515 0.79206663810712818474 0.29626224670709611075 -0.25780295262768110343 1.3490802913065054192 -1.0169187616804655772 0.31978287076880618223 -0.20165925170308313108 -0.9637186389411664944 0.28653450304525185377];

% Layer 4
b4 = 0.54326986122670617441;
LW4_3 = [0.61545079611048958412 -0.62015006086537827201 0.09009180851974223081 -1.2840368566360746971 -1.0434902280571787259 -0.26470257607625696794 -0.44240212928982369789 -0.86582500219088776028 -0.94215875509299429336 0.44116359932599025218 1.1836623847618799044 1.2375997338211877086 -0.93570542383727983715 -0.81181536664010467419 -0.80629848086809452479 -0.94093531865631963029 0.3238003367920759823 0.12326046740121368583 0.025170840945045014347 -0.82860106426424218196];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999934;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
