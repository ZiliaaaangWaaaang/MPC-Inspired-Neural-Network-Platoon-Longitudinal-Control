function [Y,Xf,Af] = nnmove_99(X,~,~)
%NNMOVE_99 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:06:34.
% 
% [Y] = nnmove_99(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.70139767883548;-1.99738196042707];
x1_step1.gain = [0.053913604005474;0.149967019141203;0.500604127399131];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.90525467449277075;-3.2200997009516738601;2.8540883743083158564;2.8367882857892166015;2.0868861426652105528;2.495030059749324014;2.7821323751562534454;0.65557381811731407772;-0.01341741659470804815;-0.48658814541554051836;-0.18168960706427075835;-0.10820566214810996286;-1.7390380704730592498;-2.5432126845824827299;-2.6586629440870543917;-2.6921745064970217243;-2.7679683508248333901;-2.5822789437396074241;-3.3509170054117296544;4.0419920141952614401];
IW1_1 = [-0.36529703190990969741 2.8828794986907153586 2.2535220312120007868;2.1136031599540454629 2.9950771008967880249 -3.063897869974824939;-1.0626528422794110362 1.5345632396994695057 -3.1081448874582777719;-3.4488488413427234036 -0.86662610124927841326 0.66037585759635741844;-1.2801004935541382412 3.639057546092475004 -1.5799958400961333638;-2.0088791579326872316 1.3380009274451865053 3.4221120158863911342;-2.7509701811727214071 -0.20733850576104120855 -2.7492792533274408306;-3.6338321756682763208 1.5647266303963263123 1.0409911501766153652;1.0016894845420667437 -3.4462730554643390413 1.9520030728050155044;-2.1734869924224917703 1.354010131576736331 -2.7229361526333315524;7.0071524140011591797 1.7118224464311073696 -0.57687810894102808934;1.2807854603015711437 3.3492785609316131357 -0.013944783549608196285;-2.5905221325481804229 0.097134850357792998365 -2.6252650904344827509;-2.7613120151449201956 0.078721419133037068283 2.8499845129748710981;-3.4510496749273871231 -0.80070662524139568639 -2.2567669625760071739;-0.8116251169738020188 -3.0487837961648147633 -1.4612635486372700377;-4.4230188385020694497 0.49638469069593649241 -2.1424892337259167086;-3.0413249630895795583 0.69389458528163205919 3.1366457823632027946;-2.0817806611762401658 -0.7569321487369292667 2.9591842410217745751;3.2475965172296414885 0.54919538539193824001 1.4465345091501262687];

% Layer 2
b2 = [1.7213192062040023611;1.2354017108303805283;1.2531571387458935174;0.1206677876138136235;-0.11690018024134296581;-0.18252858186363424275;0.44957315703382771943;0.85529372109801216073;1.2688745880650054154;1.0527185066213764486];
LW2_1 = [-0.41307714805625811438 0.76693957251242961259 0.20349297288207887635 0.17285438499801192291 0.6963112896515153416 0.28471411934218010531 -0.062046691150805799442 -0.35429391242192725953 0.72157355654309396353 -0.18385180207495979698 0.53453627849651674797 0.18486483201859371661 -0.031515053526834625741 0.36196457514443974857 0.48083761216817333395 0.31555558225641872072 0.43281876644944616839 -0.44569774194495104247 -0.10399143942896396653 0.41038212391658845934;-0.23881393509836806865 -0.61282325201211063082 0.57352256595345585399 -0.10527547694903703623 0.59265173933047277099 -0.1802090235404296692 0.15100930671165072039 0.85870014618933554473 -0.1209485705964761515 0.38751843366928440116 -2.508005047014770561 0.61515021144117454366 -0.56068335555338499887 -0.64962267833547215901 0.23807603388471856865 -0.053369890858603746819 0.37586593460589173832 -0.32296061451825319732 -0.44105873173793846975 0.2559177145985141455;0.34975418738227032067 0.40211373736376798682 -0.21813014802221941668 -0.23369558447946053859 -0.22497851276656821717 -0.56068613761520336158 0.044019093854270857635 0.51561673135193641926 0.91455314970237533423 -0.20118795341683565203 -1.2506184429897815313 -0.27427994009361494898 -0.22568948599756807893 0.25711255763500012739 1.1062032910590504642 -0.15542773620299474291 1.3615052927576725139 0.56358286035354587806 -0.30432482381480724376 0.55975489290756197391;-0.59540831349358280811 0.41937902971810775421 0.082362422707623256235 -0.54298948825759463244 -0.36417643633157065208 0.086788947243594927183 -0.0044938491834041003475 0.19045078099703272034 0.55587026078961654374 0.22653782664047650286 -0.64024725414819794178 0.39638090599567238348 0.095499504242894911465 0.025523504587523931225 -0.38962735731563474806 0.22108296020013237793 0.15676659096265815885 0.89165007022767595046 0.20896857936600368721 -0.7094801782075227381;0.42800794067934988529 -0.098078756999428917673 0.31211239441239430059 0.43124492618867554805 0.64319835393148749869 -0.33094593288385315555 -0.14424872561688764638 -0.50532238362471815218 0.78432309243457221104 0.097295066057984935792 0.041989530622516188507 -0.6413221371936954629 -0.22036844201730027004 0.33539080184438174737 -1.2767757924948424098 0.21565884459012055197 -0.84747047565653144119 0.0086129464904723430918 0.011433840790086875067 0.11039295340383942223;-0.35433950450316431535 -0.27422605634978447497 0.19505038645599490077 -0.30609930218962300152 0.62398407370053632359 -0.056652793156267873542 0.28450867039810062709 0.025107537883463638267 0.2181375968538620258 0.12144870829041387594 1.1272673437686655529 0.62792925050708292556 0.15767172360002426612 0.090209080309849268287 -1.0684494914147031341 -0.092623131724672916332 -0.48611274267740700594 0.59567669044500681785 -0.14946148015608112791 -0.4015062832151367056;0.039872631013857261217 -0.36119889780590985762 0.3431339737264550438 -0.42914014011692935835 -0.96978351384184280359 0.43735006295463241255 0.27416545422336024984 0.083023752616454865594 -0.028210016738925199759 -0.37398507770139916007 -0.10690929843473186145 -0.53333087947999868739 0.35540934299877691149 -0.78729083712055725197 -0.028214505964244431663 0.29659733058486809076 -0.21630839440120164241 -0.6444385946801101106 -0.47358690325996571913 -0.51774379291830474603;0.31269486517068273423 0.58970752474068433013 0.71448668745548959969 0.23586372519188511521 0.28935155000476975307 0.26595118510874415918 -0.51400606526923797723 -0.47315681306972606768 0.18415296837371872285 -0.38488441562725811407 -0.35146201681693040042 -0.59326038772534384069 -0.19259790568580739678 -0.52412072652576247034 0.9272467657222770443 0.34006459452693810208 -0.015823001260164008125 -0.27892468328213460005 -0.44620841739443511953 -0.41238478536829409338;0.31671600620650985913 -0.28107001903212514016 0.0087263591901403925188 0.2016888115738197651 0.5336662703728944912 -0.30783433644114865935 1.2486601821954341762 -1.2207548920520459035 0.076234081194552993921 0.48234321981225741771 1.3093595159657769322 -0.021579124374894190219 0.57648467569192507476 -0.86649903554537133221 0.44542824440232903216 0.11108879514706253289 -0.0073090361307615973885 -0.9123595075226477169 0.012896248212601811936 0.12693226802442514334;-0.0097411389437930887003 -1.2906914103474924627 1.541974617011413029 -0.63711738044406551751 0.46929871364973135828 1.9441195368961836643 2.1370741506395960485 1.2008431310787908153 1.9362188957756769625 -0.22647393733986753706 -4.8265153039422026282 0.0078454712057476200249 -1.0610137936000909598 0.35434584772518906703 0.92780135629708693212 0.097618991993792786355 3.1054917110643849298 0.75988342674169184754 0.14382284819487789473 -0.26765979563695335708];

% Layer 3
b3 = [1.9663095166689250615;1.0010853099165557545;1.6086497331354996376;1.2647608911247700814;1.0465406315850547259;0.57115761484327265407;-0.58541622251250691189;-0.65710443614085622954;-0.46474563637500243551;0.33033497083824453489;-0.2676610106892921559;-0.52072104997580392904;0.5014291891709505844;0.69033842990343430301;-0.90205945627381889373;-1.1430156950930261406;1.4101279982963494941;-1.5579521662140058957;-1.8445682201776536502;1.6024611699384592178];
LW3_2 = [-0.78755586240569175338 -1.0835083253667447956 -2.1180727821685656487 0.1191523456204847814 1.3957181408913426068 0.6505132637249969596 -0.10470668349556823407 -0.75680925073571048145 2.3291529972970250739 -5.1437391306941284697;-0.54478716274036909084 0.97539280756148505347 -1.2954198620412804566 0.0034641041018041822397 0.18880987788908437652 0.60384755434491854675 -2.0579518430223724401 0.69303614612979258514 -0.49804371085421939025 -1.2940318171953539839;-0.22669227806913189172 -0.61892781867552204567 0.18623705747864185978 0.63495264655383920616 0.3029722175411425078 1.514383784379160991 -0.52007885841392353932 -0.077010007784258982522 1.0140376204357037793 -1.2535520254018750475;-0.34521009141999653425 -0.68380541707290198872 0.7022194088841163806 -0.65750273455201224682 0.83315517692404494898 -0.62250326922042864553 0.70405239498310001611 0.2514702091127314354 -0.023013009399620636131 0.50935233461273754507;-0.28286663494880082137 0.70565367152317670651 -1.0036627281485099861 0.33003074033844281843 0.57911217251512803195 0.26088514824144343196 -0.92694380755007776962 0.69911642172015897589 0.65692526653126881442 0.04684014910409338428;-1.1972144181388917339 0.03228243869797323834 0.45224149186866396954 0.8413152892215816081 0.35959802302715893063 -0.38040403892449825562 0.49398686157555926624 0.88804593053752345355 -0.10511295829162962956 0.97981192198066957566;0.89606188456587065883 -1.1983815278504230672 0.56051015395365222371 0.2971284058151116847 0.40074145913252717799 0.060951774957091642282 -1.026414758003239891 -0.45262387821815303068 -0.48250785300596049643 0.6557861494644346978;0.54996103822874509159 0.33890244041084227611 -0.93848563537625806497 0.86422929681600280105 -0.90628792524673051911 0.59721592094448916477 -0.41352289422400118069 0.41921116120889068135 0.15857398111631007542 -0.012320005804529798876;0.42790135270947937673 0.77393781698772456945 0.65285477523439516823 0.6374845927524511735 -0.56281896857230750975 0.16398973966245677936 -0.68607674425165521281 -0.52810081153185028935 -0.3981780824772866989 0.50371433726894232485;0.75275567550366906389 1.501886358093480256 0.15716660645325594703 -0.42636726139064518026 0.7161422688033072248 0.25592389507652524294 -0.59332712980167734429 0.39740005301304276442 0.63599894838662085483 0.73797102713142415098;-1.0242161904299145192 0.74712199499428877392 -0.44070562046378358723 0.11374755888834500728 0.23533067455510484067 0.5534953645850453352 0.019562111256336708887 -0.34515899844301106691 -1.0441117301727209643 -0.17806472981695864455;-0.083475486365154616397 -0.012656134326979146323 -0.65871008693311206006 0.042815106864710142376 -0.41394642370874401571 -0.080147673402026803346 0.10894408509209946301 0.16430612930048513198 1.3337174373531710536 0.88097933409184980835;0.50935063082445997118 0.76846014811722873628 0.81705409538255802104 -0.7691985804344757538 -0.37797692881004596455 -0.13360883661538663914 0.32887156160360947466 -0.64233418229488303819 -0.97696044401421899828 0.38723834786492933313;0.84183814201795370558 0.3327246795450390926 -0.2323956430270200102 0.13679813873625137899 0.062573395024718619917 0.38989647355252993188 0.96389748093117011418 0.17596229473683958067 -1.3220567351783418797 -0.010105704652548997552;-0.15624243139876214936 -0.75146580319332112463 0.35479197316794724992 0.7204298521148615464 -0.20205068776460929914 -0.51943826713747698332 -0.60979944810928310428 -0.41384029420303697355 -0.87770093990026565312 -0.84987611342980484697;-0.39484722919394310559 0.42474560618473372609 -0.0044003719029874557855 -0.5540971710548611151 0.57881172067190878039 -1.2442928332869316321 -0.18175909307427262629 -0.96724423695488292996 -0.57567763196989019114 1.1580822047557759458;1.1487226249129622868 0.42999263764184458836 -0.57019811299665890125 -0.42826657466044015798 -0.17792192479390411819 -0.1394227546535186657 -0.45553377153948604317 -0.89391121695364950117 0.28275197468842833137 0.43542462519311692093;-0.68239742549017512463 -0.65049040376547750952 0.447401151835689459 0.64267487260675715266 0.7434693506795253537 -1.106945137979616911 0.62064311354881640526 0.84076792452483162243 0.24079421781485307874 0.15645055450574710254;-1.0442319693918458157 0.21420774660370803244 -0.17951830613665201164 -0.93658275804919466356 0.73534494567408226207 0.027307580030382742897 0.061576575765618341007 0.14959682171186297617 -0.44048798590844495671 -1.1276389080065529757;0.48007309339846654384 -0.14748877202689983368 -0.42874774583715058451 0.15848316453996791342 -0.69147142114190984774 1.0338218912865557719 -0.68901375380719120933 0.23412355808327200979 -0.33799457762000184591 0.5095780782828387423];

% Layer 4
b4 = -0.13242179832179989951;
LW4_3 = [1.1712339985526660779 -1.0297996796142789844 0.55773312793907459106 -0.014025100600328504336 -0.33553194679226194808 -0.70028132142950383354 1.1083377518909938164 -0.099382745951896819814 -0.2171102661728005756 0.71573224260734835678 -0.20070398123957905456 0.2167948588550130673 0.1757830354476592194 -0.022768803959051547164 -0.24735635551720108749 0.50163628484965205878 0.25856856114179460615 0.50225544664911481174 0.3209103370115093945 0.83262783856804634119];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999934;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
