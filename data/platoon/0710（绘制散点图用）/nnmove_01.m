function [Y,Xf,Af] = nnmove_01(X,~,~)
%NNMOVE_01 neural network simulation function.
%
% Auto-generated by MATLAB, 09-Jul-2024 21:22:56.
% 
% [Y] = nnmove_01(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-5.55556726554176;0.231332173210256;-1.96702427502467];
x1_step1.gain = [0.362032509331926;0.909523628528329;0.670668004856469];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.7949852288689340796;3.402803933480970322;2.9815690492877711115;-2.5906852174962917701;2.1188556676340066787;-1.7589308085643662327;-1.4092353590945880804;1.0442150169047206276;0.61145302266093537469;0.24289582917950228169;0.22459412952940577268;0.54317600979655067395;-1.0410067566982468268;1.3719107802123828854;1.8901605740042433101;2.1286526495341799858;2.5945881530384449221;-3.0889524686537641607;-3.3674806244263204569;-3.7810555073384435332];
IW1_1 = [-0.79010022098242160826 3.1467033232844645596 -1.9880677453907280583;-1.866841809456295298 1.5716070925732996688 2.9122534555873236251;-0.14464033403848319814 2.9531590383417412049 2.4030315657599925494;1.884413484337749356 -3.0381295016306615331 1.306441369018724874;-2.6604836999464258618 -1.2436236194496650409 -2.4827571658042386638;1.9556948059120999872 0.09623863945382893359 3.2864054845707220132;2.5188282732036402223 -0.046709339073553034216 -2.8607299777668497853;-3.1355499159942668008 0.57454611023091295419 -2.0376469237843553017;-2.069369784223202835 2.1834913378708593612 2.33046810294040041;-0.38004345266010536308 3.6640870997960974798 0.87577387766365211164;0.14566858545164185212 -3.4773648388070936832 -1.4679919324943588865;2.5195837089308259493 0.21776115610769139486 -2.8243630530867660511;-1.3216816240398099325 -1.9160381501950498606 -2.9807459755762018005;3.5525643296998516973 -0.21816394783928907963 1.3732018550333686679;2.2548105393231097082 -2.1831890497521166949 -2.0443197852037475748;2.1936604514413531319 0.9930243473931511522 2.9905895484951883212;1.4221456558440879192 -3.1923502959248444277 1.4424906647783106717;-2.1442285698917471493 -2.5708480373827899967 -1.6402752582240702761;-3.6406566293217665908 -1.1682214915012767431 0.018945991328614061877;-1.2709379602148314081 2.9033681094884515872 2.1331388240513553534];

% Layer 2
b2 = [-1.5620892280022418142;1.1492954972948352665;-0.8183619901304974853;-0.46106575535834803947;-0.14786566031405570798;0.10732628556326376246;-0.46032288646166968915;0.879702245933871807;-1.2081889520359960777;1.5966824561727783749];
LW2_1 = [0.3801882491440968237 0.30976132088066682391 -0.37935817611039440722 -0.43778585635381261909 0.38637063372739394174 -0.046405111851406832812 0.56649002073265974921 -0.30879902594149666317 -0.14573786623279874619 0.16576021776879712455 0.23979211144834275404 0.50948164391689854114 -0.36396529039672631534 -0.28704152333474258763 -0.26538449915442952065 -0.17341757261495138742 0.39444127184703181577 -0.4726583302757653704 0.374274204942431854 -0.29755391332884539857;-0.35771928210963960248 0.23457399957740923679 0.31892286927123819629 0.66061089409871387446 0.11573241510706044899 0.52277353205824372839 0.16399301525714299332 -0.68181673460065872483 -0.20087294586480142211 -0.051962343122481768898 -0.051366333380530676544 0.17611317350427535544 -0.18160058491145955606 -0.33248267860916413952 -0.51947378113087172569 -0.20331219495990035528 0.091964770561749606403 0.49534830987891093068 0.16245636996190676582 -0.5431012731963836826;0.46854577399605479293 0.27259841427015502058 0.32354705099059594131 -0.22786526402932258395 -0.34626000254567590453 0.4739006011989360112 0.35440204223739674161 -0.086910086306629330544 0.53097271422467917645 0.3084924250426390735 -0.38700421310296273525 -0.35809579866680041338 -0.5092722089018894005 0.10896018103722161785 0.50715381473698339931 0.32720848222747894729 0.43091284708047272733 0.44628314086763726243 -0.32733648987069713376 0.099413294426896517408;0.10282887454018249662 0.66874164682813053151 -0.11650743264985911896 0.016381883820693186882 0.56611424569785517846 0.27847539972798784902 0.33850646954958946155 0.012812156628832329849 0.60512265198801773458 0.10085137044972666831 -0.50129142409603988373 0.0064283564256084127497 0.47310989841263922928 -0.17471465586997461661 0.32066591275461653332 0.18194457246193085354 0.34132688472472516583 0.013693066756029066006 -0.42272158631372297455 0.42515736881649240919;0.38854982724796810478 0.32805939006359002841 -0.16250538911590745039 0.53823690554024272714 -0.22121439478792112587 0.28224314872844397106 -0.63660765529732943335 -0.39655966156452959748 -0.39500680205519239641 0.11303601418350237018 -0.15615344446297949044 0.1649134446548067845 -0.59989687330392027498 -0.51129256744930273726 0.0075485567789870732999 0.20744344006112108714 -0.36711401306394342292 -0.087545099211965127228 -0.29696516629691205313 0.37393978574291969474;-0.0087515553143153630711 0.2263605370102380332 -0.20483518904051523091 -0.032066113795150119614 0.54772228848612580787 -0.5000309602878784121 -0.093347588207868884003 -0.44677875830236790655 0.60694792417765563997 -0.26108140771184834561 -0.34211371460329637051 -0.045927906288529003753 0.40080281910606974094 0.48045533982959631736 0.47577149791138650947 -0.20987791874408495696 -0.15516330020922769473 0.12485913651245968137 0.37710898184954833035 0.52371887914774584161;-0.3777500125078362414 -0.37522834414701372596 0.42396121002113867915 0.10019570840000613376 -0.53152320662941188179 0.55049582842799760218 -0.51256941748711060125 0.26566505812451884916 0.53371120583090048139 0.066694850022497781383 -0.25960552544942161468 -0.42490143282426473537 -0.27082973524467446325 -0.019245404215407969917 -0.32586158120070324307 -0.015097978855673516163 -0.37448862350884870587 -0.20402493452284792275 -0.10149235759451695482 0.4430455586878287999;0.57790631225250643777 0.20729702576249148249 0.10137642655617648546 0.24579634915979431398 -0.42017367189618104462 0.11449043062800226545 -0.46329204249448163733 0.16962185309947008793 -0.35898951655951655271 0.4581682453682013878 -0.059012589200960488545 0.12409540024822446336 -0.019334614514534859131 -0.54970133489430184071 -0.11230943095144851895 -0.411885550691385105 0.42852661573395933736 0.54942145347867987759 -0.33554782796728149785 -0.30372777919825999504;-0.42998648585421017643 0.42917890380587664367 -0.35065409416366738471 -0.40703362092524830729 -0.52162708930994439172 0.52860404269423033607 -0.48467548270201049609 0.33896216445465793266 -0.3907433159115479282 -0.37069765897103279517 -0.22912754249906461257 0.063678652634514373854 0.1043701897334932821 -0.010101134070984386232 -0.286174051235075666 -0.1363089703576774725 0.47808049397646523726 0.46206717559900073455 -0.1287747557657442643 -0.3386937120599069484;0.31904821195691734914 0.28304828350832600403 -0.55346064475861866949 -0.54028323929150212646 0.23383138726959756815 -0.38009088009561492472 0.07902474848082442771 0.099425043212299141215 -0.15650337766938215989 0.19736295852120724903 0.28176410915404226376 0.22970842836303190238 0.48360522289392232631 -0.062272214165743661196 0.4379593463766171535 -0.11092234545259822831 0.059267243962352167408 0.45596999034309815269 -0.35205391189656276563 -0.62126884821625294464];

% Layer 3
b3 = [-1.944701899776061671;-1.5546491095937764459;1.5266439733151671021;-1.2281597201953560194;1.0803215869478426381;-0.94557546706275852344;0.77938442089078641128;0.51941481226924723913;0.23009046186554651947;-0.039410186990294471254;-0.18369143969088166934;-0.18618732566529797023;-0.37181269968277474991;0.72931198834679544785;-0.92391679402528292808;-1.0426213343138421852;1.3671563821425452012;1.4674362769375468574;-1.5708828114670669862;1.8924746804985579374];
LW3_2 = [0.04251253783881811521 -0.37868134808044184858 -0.27205627924553177355 -0.23244648193154088256 0.60198856665561684132 -0.2690835562782722401 0.99445802173378439193 -0.8204652218822012788 -0.86701167501031117801 0.54789600973858720856;0.93787439668070493592 -0.46620338554381418605 0.54564806045308145155 -1.057923288468476386 0.1001786459450743072 -0.38998092602320033606 -0.39456351349328944167 0.88397781783407036738 0.0066151725028888233582 0.4324889593762825668;-0.88292312937305972298 -0.61108847338231697677 -0.22178265110441813812 -0.40434082027200940468 0.5333299146520649181 0.67128364954729780045 0.42073605310596084994 0.074092880411294539944 0.79934015074818365321 0.71423034210078051309;0.13500106532675745785 -0.53555237284119217023 0.58640547092772377091 -0.33621194017030753276 0.88786164230060216074 0.37780025908102132792 0.6673751430218645142 -0.20490596585328696433 -0.94897000715833468298 0.7674558148886019282;-0.14955061307961028949 0.24170484398173608387 -0.50203807177188752853 -0.97661729493507287714 -0.77383463321279155611 0.33993410888475600329 -0.98669145705114003064 -0.4765423620979410968 0.55372891894997056106 0.31145864426124569846;0.91665089526602250292 0.35914315168157551206 -0.47726514397561586867 -0.17935728252290480955 -0.89000320920277031789 0.056472317331992247236 0.56964246715613775507 0.16289821591265851719 1.0757057062009447446 -0.22394541024176747857;-0.29232131081635837067 0.96563899934354457955 -0.92060610758325400749 -0.23384934025994405515 0.19656609206095676523 0.83579966719862708313 0.42370250465181674704 0.32443199734383326716 0.70436096882175303069 -0.10101044146953075398;-0.9598281361578815396 0.62087473433047091209 0.15646624150744170567 0.55633615304737704665 0.7442003426910824837 -0.69643375861769607482 0.11928701772590717678 -0.59516593198982037372 0.67493879386211208526 -0.064946539195542343781;-0.062015606760235639228 -1.1587035005730361714 0.1624453431765398026 -0.34752162042339379555 -0.22174393594596181201 -0.11515822448176539494 0.3094275221891477079 0.69762518105771209598 -1.1142945296758930418 -0.23676746364219136698;0.51129790171830657997 -0.62377837474211494939 -0.55996629508382178564 -0.24633802754516340161 0.22209949365812939326 -0.94521919322687653064 0.94808646843875843402 -0.48548357592801638649 -0.32509747826046930808 -0.45615072659006927758;-0.8310327959438581491 0.52129285284074589057 -0.22788153850837158942 -0.77335773146031216996 0.77756588598470566254 -0.73928768457470916964 0.58125959550905570428 -0.38720856510121320904 0.3971282076690045848 0.50766560018958550859;-0.78578634190761464939 -0.10211346490281167365 -0.15279864839831069911 0.55623914472449287327 -0.57835565721770365588 -0.21894645678167551361 0.46627119065051519931 -0.61415941788562411485 -0.81211137542891931318 -0.82498185987892780346;-0.47387572074655942567 -0.63548452116261244793 0.5478893132542577149 -0.06037018821209032271 0.8640453740500174673 -0.24365563628383493655 -0.82640738171817718083 -0.33120311534968260858 0.70385102822050571447 0.72711523846619674494;0.54778877818426852109 -0.29984541647750334592 -0.13434782032337752589 -0.95985028239154046581 0.14321184764438291137 -0.31029913635999589738 1.0281451467009634637 -0.74733143710594962528 0.57280708063717711287 -0.14089676874088144509;-0.8378843373558346741 0.60011125251996166874 0.8671744660603842858 0.46081124013109925341 0.19507836231922875969 0.52942611649513648953 -0.63081691553279439777 0.50832981409737898471 -0.16776428808722707031 -0.68478571969540569242;-1.2039285707345364074 0.40096213812912401275 0.061478405391716839379 0.97478030260591941314 0.58016819559451904276 -0.51577952666669601989 0.61330925189441931611 0.11271857937916376913 -0.33625788494154579267 0.099539683943306700442;0.67418016626925003631 -0.7238963531001872953 0.70360387325649942358 -0.076255969509490845182 0.69662195742884813754 -0.31344076663971442986 0.73841263617205399328 -0.58838365038999584922 -0.36849175516460086488 -0.48686517469002849046;0.60125514117308609396 -0.64753340767292077995 -0.92896760205588180259 0.29792580430946230541 0.70563455630526061846 -0.83749999926124574223 -0.62758937307074447176 0.11298052276739489752 -0.41261667023562281775 0.2138563355381077058;-0.060122165055368034792 0.55450537303000080325 -0.69523919633119568573 0.81241553091192175717 -0.91838386306095587397 -0.65302206355098790791 -0.9040043572773034386 0.46457768038784680309 0.093240063463866984517 -0.32270256618399817405;0.86746660478595882804 -0.28865863826681209536 0.45546696863846469761 -0.56916198168817344616 -0.44332776712951288411 0.54779280999481816394 -0.32533645113757614364 0.77675409390198646431 -0.70598035606365872052 0.69269342968114622217];

% Layer 4
b4 = -0.32211709868933108281;
LW4_3 = [-0.70223274715541750268 0.35537930050804578119 0.34920771688908508468 0.12602582203358958512 -0.16865721465856942096 -0.58140690725346599876 0.24660078959582731883 0.46637400207711748878 -0.39139991148949954125 0.48234300225939313878 -0.79263697290879731039 0.44138014154799204425 0.59919246990302577061 0.070614928978431773521 -0.20764525289652455142 0.55603132097636975839 0.28872004920365140768 -0.17746615281397670749 0.38770685791600068004 -0.16698794226755014902];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.540718808413209;
y1_step1.xoffset = -2.00000000000002;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
