function [Y,Xf,Af] = nnmove_02(X,~,~)
%NNMOVE_02 neural network simulation function.
%
% Auto-generated by MATLAB, 09-Jul-2024 21:22:57.
% 
% [Y] = nnmove_02(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-6.61109325274275;-1.3712548795899;-1.99944277334353];
x1_step1.gain = [0.302568049848311;0.526102528279579;0.663455562981593];
x1_step1.ymin = -1;

% Layer 1
b1 = [-3.7634165871606186649;-3.4520521663675509672;-3.0714335958076848243;2.6719650762349766993;2.2948125319184380366;-1.9467291158304402821;1.4131120632879665688;0.9940944815012119351;-0.58202290839915260534;-0.12688106204690957624;-0.13772988428520899218;-0.65225205488015336464;-1.1447815650195667381;-1.4321577625075101459;-1.755009721496658015;-2.0823188845733549002;-2.6151355371518292259;-2.9970947486575605367;-3.2786673878799521553;3.7708133045278278139];
IW1_1 = [2.534391793935603765 2.3117057910013278921 1.6533824510020489473;2.7083992569168415798 -1.6670651615239124865 -1.9965108881282347397;1.886634705728845729 0.28095523495008911663 3.1989762999901363294;-0.82413395748640549954 -2.6473333656155118021 2.5430076431953456684;-1.195197368555471984 2.3801039290914149937 2.6708670152529245811;2.9002835008513780934 2.4318159427871108846 0.48174066448266877893;-2.7842071860572543684 -0.71298887930191190421 -2.4636219679718807107;-2.1203343883264205161 1.6309161081120946424 2.6586308224915953247;1.0223453432759288528 1.846241104198149241 3.1797595044529924913;2.7084489349042226713 1.2632514207904663728 -2.3747504467961326746;-3.4904756007181658717 -0.62585261428613525592 -1.365297368138786327;-3.7467927119064952102 0.40805908105703836419 0.52646309641380417688;-3.1051434044898016396 -1.213694158547558466 -1.7856547411803571634;-1.4700693238215003511 3.0929753633797800738 1.2462945679334096472;-2.9295571802322579735 -0.83408770414054411724 -2.2803255793702152943;-3.3207560513973639615 1.6526920197101444554 -1.1513403866275826459;-2.2873014879809514532 -2.9012049729442304091 0.76428588329220259467;-2.387403835863921131 -2.4488030303546852728 -1.6144756640761348532;-0.97950868877469388085 3.5925767303599309699 0.18686313272817842157;2.7053091742562767053 2.6723075036794057269 0.3070652272429524321];

% Layer 2
b2 = [-1.5773895141351603755;1.2582355709587333958;0.88287601714843289002;-0.53182300897522172267;-0.046335812709626597594;-0.23399524769132734603;0.55882187997974619442;-0.93460218695872465666;1.1049418116871057016;1.5058414211579316255];
LW2_1 = [0.19369208767088080814 -0.5072265354148639549 0.020408329897506100048 -0.45660245044795189084 0.31810166610708534574 0.81914902642039355563 -0.1129120450703803985 -0.32460381289322853826 0.057411809023609948477 -0.22109958166408741342 -0.35820319521750615399 0.36354712786601228736 -0.15260822182875338759 -0.020245441224848968742 -0.58005683837155397331 -0.64891984251528656014 -0.41465266607801637422 -0.26124875718594608998 -0.38441366042565566774 -0.64546842976013452109;-0.40276789113196626024 -0.21495911179406576585 0.53721305917030259813 0.36030671022791965763 -0.4213352382797467266 0.10039911083810100501 -0.058870173145065506082 -0.065382431312911937216 -0.42763122475056608573 0.13351688355322996471 -0.32649356640217597203 0.32239163849818408547 -0.16392917849190494217 0.40765790922926098405 -0.12290649614541768186 0.47567632740514503853 -0.37816573142347431613 -0.51162978763138422522 -0.068911113418025748967 0.39391921270135932254;-0.46173798369906526862 -0.1408258158311108954 0.56706307485850171446 -0.020756184062386245914 -0.10105895193139681487 -0.51868505113569163267 -0.22690023697308148165 -0.083336988244123694214 -0.65545836870993612333 -0.36128480717444266812 -0.50414897644203826577 0.13849927462304104098 0.34273922701973136284 -0.25760262083767448971 -0.10335758857000311439 0.48128705321689196905 -0.40448282530757023734 0.3277075980587205728 0.0053913562749927828113 -0.34033120778276138019;0.27728237812064693291 0.53689887015384973878 -0.19031130720747715945 -0.40652141795412294334 0.188672058803494469 -0.43436817610278893875 0.0098513992916100714264 -0.12563971055907718899 -0.40028085137919489078 0.29052623241460689973 -0.43299863191318238576 0.24691715379440645761 -0.48133253030526723659 0.30103238131965892599 0.18459611797881250728 0.66278584275394747394 0.020097536492572634637 -0.61958487256744310123 0.27036359429590117731 0.20496010702877104359;-0.049078635479308768685 -0.40331624426170797904 -0.70513614321814810371 0.26936429913634624134 0.66357983888126881311 0.50390563611740546435 -0.15126004992596531196 -0.22584854375433488505 -0.058956711488241837771 -0.3313768467274524343 0.50352391719667988212 -0.33029903869601728861 0.23834797746436087174 -0.028891778109106633354 -0.26317956965183669782 0.15871434623770766525 -0.07009633537258741498 -0.52153630870781486628 0.35851257239733852478 0.37147453295782101312;-0.23527586626774155132 0.13440049064005465951 -0.081903467535858351378 0.65044703509711365719 0.35025916914319304984 0.30557799143315239609 -0.068235467662022306068 0.51739471953980609165 0.4722057136994742832 0.035104440832269163952 0.42465395031946462368 0.20763266560444462727 0.40727400241124789293 -0.52247973480083342857 0.54364488156241685957 -0.29662729791106073884 0.22071258040315275273 -0.39273691763313356429 -0.10709977795126526812 -0.19331009834643056444;0.026839701588988126163 -0.15920500045941743394 0.18469670413483182947 -0.14682809114200051637 -0.70486693615566975435 0.70029823706699956265 -0.42686425557563173472 -0.0767184896437548558 -0.27495748565873256997 -0.11406317164194534897 0.44533618826219978359 -0.09402538542008095912 -0.01651325736901455149 -0.27572130715026954562 -0.019173040900354758331 -0.56156056362282347205 -0.075065223719754325948 -0.1374819865820524345 -0.48525053445168769839 -0.40580834090763051591;-0.25051294394317025205 0.41848302523761099492 0.24187734642988031886 0.36643628674953948599 -0.32257098000337719457 0.26775513466754308212 -0.16187078660162651511 -0.45844942120895154636 -0.11201706558881127651 -0.29686050564578725375 0.12271931236109859253 0.20259174125002091249 -0.7935405402503209471 -0.2236495071712641669 -0.22398951050200005541 -0.19210543283407024995 0.54004210907000016473 0.2468624245297801334 -0.20221754138944600387 0.49393961271884984088;0.13211247243501486603 0.38018867053385774213 0.091892275044092155967 -0.7516966552872692553 -0.02142262114851161206 -0.29438234207137992104 -0.39806765004866712099 -0.19152235845337978182 -0.43226347672291398627 -0.36887199794635527894 0.44172688170668783503 -0.40080128496204214805 -0.208930217500864851 0.31522315837354841772 0.13979261778928853133 0.18692438702460831279 0.65710877787583965581 -0.19796919005745047815 0.60299583591949834638 0.22656067807723581642;0.16960766586133241285 -0.49135380297924008408 -0.47755568890765337509 0.23648293087585067762 0.39560835846778663605 0.24210716811886293098 0.22966336219045990763 0.19089038813421480012 0.34665678915007491767 -0.52533450804063908102 0.57999307769706187621 0.11618051308772803232 -0.1539699119899487767 0.067852025684727410026 -0.12255519737729217433 0.32813500073813983704 0.030381480465671732716 0.20103714752056880966 0.68819962509858534361 -0.41579335370734210597];

% Layer 3
b3 = [1.9293547350181223798;-1.6762315578212303446;1.4782585933494478692;-1.2979406867924241364;-1.0415871258459237225;0.9097693199652286955;0.69621083601523980899;0.38361113443182887073;-0.31834076487576656866;-0.099219781554989977534;-0.10099391928178928779;0.19915556107424586818;0.52301174988170107127;-0.62843146569716945571;0.92563303328557255956;-1.1496136843526296722;1.3543398651948477251;-1.5288483115490643094;-1.7164815186964168525;1.9285046438007975578];
LW3_2 = [-0.41791317324744337025 0.8782867222198089685 0.74274356077039138668 0.88862082371262984815 0.17635308983668415705 0.42225123995153907019 0.33701837937631812236 0.73802246233708423961 0.50403428125802840487 0.33377879632276058475;0.64031803906134066029 -0.7346202554699210463 0.73615382334393453245 -0.48513451117858896744 -0.41316150340078949821 -0.74902099428174095941 0.21005106201691034484 0.7009427369312758449 -0.46647447010980769289 0.59722013673226104213;-0.89383885075299762679 -0.44275049503422042596 -0.76585986267077887923 0.51683361901555735507 0.76868995854346022778 0.48433719985657297524 -0.56885267771198244624 -0.22573953207891703232 0.18814371852073669134 0.69539967013198533685;0.74348992116450485224 -0.35010723622988804138 0.18258992718944655476 0.77739813944720170813 0.37906173964422279488 -0.16965449793472545115 -0.80096212501127150851 1.1450789708615265461 -0.045448348970482776998 -0.34214463610712564368;0.65759673906316584713 0.99282073328125897138 -0.37418130340254596167 -0.1636625388039539275 0.63743618146422365012 0.59322004075793177691 0.2347985937574422477 -0.36574635126241417105 0.12040706001242694467 0.73307140404824788771;-0.33895987440791841561 0.57098532445000482749 -0.85768379301499630962 0.17911384387276205188 -0.27284615822625180037 0.53039066855660932376 -1.0145473840337349003 0.57973631982475948288 -0.10976670467649010665 0.78968505399610156026;-0.75914115975062279595 -0.19409059514950263714 0.85221015932833377171 -0.085445741901978858324 -0.60425950018084295667 -0.19428363522853087098 0.76893128547116806892 -0.040953686233662286997 -0.29123864003076305185 -0.80986228271026861059;-1.3878580237907993666 -0.52763271431125613464 0.61390676356037010564 0.57798834604092563794 -0.30147012577606058237 -0.22250737420395960697 -0.34093951921953880024 0.15368243362321887258 -0.5865600200219756033 0.51553188962890816871;0.56950551236586732795 -0.76771598730145573786 -0.68725534597820392424 0.55494391631810591203 0.31757199831533816647 0.77855366414344495674 -0.7496562208399161209 -0.57920084824108974964 0.20530679571231036373 -0.46329742238503274221;0.8907001663383278256 0.3237252546421058863 -0.40453904500972170943 0.48545585962991355533 -0.65430083813180739405 0.09942184367060295791 -0.82852504081208566689 0.61956195624824283996 -0.11772929138954664474 0.84900141456641364801;-0.56456490356531474628 0.29501874528477628479 0.2972615572967020614 -0.84981982207066586454 0.31107786556575922621 -0.86600661033680037537 0.59971991911429622935 -1.0472531754341489751 0.20991543938090412302 -0.070737099320579421846;0.55379058488401333715 0.88734748920056405463 0.16527329125434930823 0.60419486764374308319 0.10887844549219723167 0.46794225866967331662 -0.48591273432953341338 0.43294146423117085831 -0.088154101232701648216 1.1108986033214705014;0.56508159496400767186 -0.83747331324290685828 0.65981754438902417981 0.93876173686495045789 0.6584206858600504253 -0.50236118354666037256 0.17332650711909192154 0.44903172251383766111 0.39752975248965249921 -0.18430798713458468319;-0.3990490209463350979 -0.37314085272011615624 0.75051970416929580932 0.18726672787899628636 0.76405486368039954304 0.74005241179168035348 -0.43255756869441192025 0.63757852853081642408 -0.71976637045353164535 0.68040080750865639114;1.0441472874171868757 0.009508574050014768908 1.1853069954251773677 -0.24460162024830639504 0.27921067773940921874 -0.32241700325947098005 -0.076029228332454443229 -0.16411863229837092559 -0.42441920001969540843 0.76958150461256213948;-0.85921643122747126675 -0.81944655198981308786 -0.68276310976596688018 0.95254468183098783829 -0.40425372696156636199 0.65396908498220673867 -0.058322661274569906342 -0.017677856452641180218 0.35982011310929684633 0.066767371670242769977;0.16459332142351898454 0.95833790645930183594 0.61907086263345656452 0.58023042666336221984 -0.13717615146605802168 0.092944252519924580591 -0.43491999748232607059 -0.31186953281565338303 0.99065394575447851544 0.58710896161675496518;-0.77754103500219096112 -0.076595326809747343866 0.52695604548800745182 -0.90937347465123297141 0.95224013452170985783 -0.42767279296687760182 0.47178355916905362344 -0.53919012067707494662 -0.029472365269905043128 -0.33370613771365931211;-0.52202903212780782383 -0.9269987277674963666 0.71280470239039261937 -0.45110884777739723717 -0.69233427390332857865 0.29404487268144480216 0.27245670941832472733 0.68028643108929287564 -0.61376654273890451918 0.30607444005364725648;0.96184976078506423391 -0.76387287824391281177 0.81677790546274042782 -0.25329487362520880511 -0.16052344437666571375 0.21741190488516898283 0.5830848648490166708 0.53843196952832261815 -0.78966095853796025583 -0.38717765792626368526];

% Layer 4
b4 = -0.78789301123537769378;
LW4_3 = [-0.77921690184535707946 -0.87795278148189359602 -0.076644753447830851756 0.2599849698884845739 -0.438285701030343533 -0.43498736477650729038 -0.30384903676546859419 -0.59454030618232633909 0.64570362831044791907 -0.056937481339015778847 0.076297583946277669487 0.89240518728952500371 0.4454156189066690863 0.083688446088129628264 0.9522831781248538574 0.53554103396103114321 0.59683693401643711507 0.1043165758630072576 0.01568336295956260229 0.6846608960695604873];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.526912312948892;
y1_step1.xoffset = -2.00000000000002;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
