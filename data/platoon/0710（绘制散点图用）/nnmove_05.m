function [Y,Xf,Af] = nnmove_05(X,~,~)
%NNMOVE_05 neural network simulation function.
%
% Auto-generated by MATLAB, 09-Jul-2024 21:22:59.
% 
% [Y] = nnmove_05(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-9.27187740505682;-1.3712548795899;-1.99944277334353];
x1_step1.gain = [0.211713351521246;0.371601079107786;0.502842242153086];
x1_step1.ymin = -1;

% Layer 1
b1 = [-3.761119445526670102;3.3710844339138992254;-2.7447488716483259275;-2.4358442714638086635;-2.3952855886550614706;-1.6539443112238241262;1.5252173250138363336;-0.96061040175962886245;-0.59517752820982072759;0.26201899331400968496;0.036472835996665106673;0.67351299319758073381;0.90500416978123632283;-1.3741084153856715222;1.795833888136092682;2.3194879793049407724;2.4482299762616732686;2.9896209147205738965;-3.4162743600341056727;3.7752959562413597183];
IW1_1 = [1.1425494363050263669 -2.4584426882712446805 -2.6893014147280811521;-2.6301169660846492881 2.5308827436079801565 0.85663853891585184375;2.8511880321347349287 3.032755394917855174 -1.0879056120681513953;2.8194754869769416139 -1.3323548357082490856 -2.2161365347377066648;3.1426406455295512465 0.066432616708780881098 1.8815042177430840731;2.4303590779920898335 -1.9583998643618991675 2.4034132132883145871;-2.8420914365573231031 1.8266252810441796495 -1.6603781841339013692;0.38341330269129492159 1.1371435049963647401 -3.4894418371227948761;2.2569376032579850921 0.30979004776370627772 2.8767939932237251988;-2.5234624363181357154 2.8022773762180399615 0.71430424713790396929;1.9445130615364576432 3.0283093273660304234 0.43083199396197574549;2.5910283772998212726 1.3561077102088543445 -2.4311542257750913265;1.7842628044545389976 -3.0152196230968546509 -1.5246983577188111258;-2.629796647932868936 -0.14694599078020489924 2.7381913816813270302;2.5655540929495113112 -2.0608699426852248315 -1.9255754170003052117;2.0099151720147281353 -0.2604523930463889525 3.4619836335362652591;0.4039762408789936976 1.9468683914326014861 3.4327317934461416549;0.68456816632951467128 3.2120904409998116691 -1.9352710400442589833;-2.116303648941239679 -2.0545502799638470925 -2.3038139538677202545;1.2363102761793436368 2.2770333230692125781 2.7936504405254609651];

% Layer 2
b2 = [-1.3881989583811549238;-1.2129743984072849372;0.9566646108646181812;0.53181909686178274743;-0.28874413784684205275;0.21347868816929330138;-0.6433778018528930609;0.72395190405257214827;1.200558700630145692;-1.6088048045249525586];
LW2_1 = [0.36571110664631145681 -0.19517234987342083063 -1.526894666506980025 -0.18183781240688023928 -0.39332730180522307295 0.092995973287358230097 0.73392940323532218638 -0.37341051730433272304 -0.071074194803244533647 -0.042588371985401829445 0.3300844855419677315 0.1191884523877625307 0.27596438391928762579 0.46988561671878842363 0.08550931025057617596 0.18228436732055511293 -0.74534258741289827199 0.49242207179232622138 -0.19710379607117212153 -0.0031820602396267060746;0.096489671221374945231 0.46559085654326459736 -0.25543348228644197073 0.019190710215693643215 0.27804155325434248835 0.49663480080581323683 -0.5571959482862995916 0.29135030843264420053 -0.65185441703751312303 0.16840152510320718915 0.20292191733562481293 0.0006478541420166959372 -0.086043363965056421372 0.11663565830715824645 0.4347835275550055445 -1.0824987088843391891 0.03706230028329444981 -0.34449301215295885514 0.27972077822288310411 0.074336791623026740594;-0.23982035717286370735 0.10084680912921248352 -0.64187978383103083679 -0.04044401915471775022 -0.18906600530264941473 -0.034516504831137599651 -0.33296861065922989109 -0.33464597355545683266 0.44336012630733701023 -0.76832862526263356884 -0.23389858726943460465 0.32167864758120667812 0.62742719121362733325 -0.45552629833698071726 -0.37648224201181978987 0.46329932018319092135 0.76353259239853421558 0.013349128968743564569 0.35135272785804116946 0.42707816241585833117;-0.022195237636604064208 0.64676278294829936399 -0.0019598216970892709012 -0.35822337072573112726 0.18431358738242883955 -0.60905468628789549701 -0.1762283316277477585 -0.16830345442615704532 -0.31957595494438284511 0.37551615567331197987 0.3084898827922670228 0.57849015468979825272 0.53173508856828977098 0.01624387883948692074 -0.061879322669251342337 0.20317746718213691715 0.41625781633324188125 0.36192724787601954217 0.23758430469748925695 0.30513138180870985616;0.20650556703330227859 -0.28857389450238524198 -0.67321414591168249331 0.42702736167561627934 -0.42684283920893006936 -0.39172544616380733373 0.14097386052664712119 0.2036165684074883464 -0.036750094240477551577 -0.12653584153735353279 -0.46062468365461639586 0.76996426000059803307 -0.10239308874739899702 -0.14175458108029928561 0.081664550541437438969 0.72102619834210268657 0.34642159907411207431 -0.09962490153325118114 0.56149537707423580191 -0.3381228878276207328;0.22025919848947980717 -0.060438613627060773503 -0.51649473855095184849 0.21165109157041825383 -0.05350339671046448059 0.23840183372976020415 0.59522785122243748734 0.19825700435916690512 -0.25617353623621441638 0.15501682899397228876 -0.5065214594605745857 0.048160736463763884063 0.68908541786089549941 -0.37175956861361325601 -0.068636602858871867405 -0.37440943199034060207 0.34062305681468285634 -0.10332807985784947524 -0.5069933471499008526 0.31870655312367651701;-0.033271204332535574133 -0.6471254819981002715 0.20462657381798554646 -0.35519010282407109669 0.54758673022874848613 -0.12692465721103002307 -0.54561331034659854566 -0.37256092081819036643 -0.63173239452072593725 -0.20755376761520771822 0.26571878098827017567 0.086422279647512978418 0.23367269213202052081 -0.10925928095022535702 -0.39689848215315687296 -0.054015446983325741959 -0.45409820282534196778 -0.63942928606967852634 0.37989600612610308072 -0.047361643466916528156;0.22348879643402885797 -0.48578394259380824893 -0.34486796668699415402 -0.37277363242144162525 0.47739887181095480573 0.62656416932880243387 0.20979026658237609482 0.31295184964115096982 0.19126888664017765995 -0.45591212000053776832 -0.71179682751514383732 -0.32500492974520939216 -0.20282332748742099016 -0.2771531908265627564 -0.11261020219418695076 0.37295243710683539939 -0.51029918591610190504 -0.74727026344561120474 0.40452946590500737933 -0.067060762265644308089;0.0033117764190309672591 -0.07609617818074292106 0.94331174129799133521 -0.41574713690112236053 -0.10878335397810634522 0.17605938736235146602 -0.4044974067451298505 -0.14055687445292797122 -0.098884507870115684325 0.58962203926779954699 0.36840911162286599234 -0.0027138333031502389833 -0.7065535493564315539 0.04738940456940971685 0.071579289758512645858 0.16906984798637392231 0.6612101338710325571 0.29439112791744104225 -0.29065037324612413849 0.60049417080050881967;-0.045166104245677921036 -0.33498245188975472875 -0.32845898183561678119 0.19115092065716551839 -0.23762616959256843696 0.35378573459877366014 -0.4455347764664984167 0.16358024602615964249 0.48797634526718336456 0.14273620643552803466 0.12312511434070208538 0.27422574750094691476 0.36464639955154565243 0.60645097472708830999 0.4587305078778078915 0.06042036861309985768 0.0065531690200996747103 -0.42637458339344613822 -0.36604638856255555801 -0.19382048569671522786];

% Layer 3
b3 = [1.8864991523519036853;1.6955329924053212931;1.4579567804893620586;-1.41996274316170501;-1.1843986524941159111;0.87686861837310803303;0.71984882991158349874;0.4245436313116395799;-0.32615298566479405951;-0.079990426652307516919;-0.26408183338164747944;-0.49735435588884413516;-0.50333630292697806308;0.63331840264203864699;-1.104844109792745499;-1.0327084981518022122;-1.5474860174556093195;1.4956912919323654965;-1.5828211115217074578;-1.9436610025156850767];
LW3_2 = [-0.70032403897370443246 -0.70234490272418759194 -0.047183475649857822831 -0.86271621558705346988 -0.41248653437026872037 0.86762979636826531582 0.1226729988112685299 -0.97916308715569666532 -0.15145496880087722102 0.098956268639467992454;-0.34958920098500251283 0.17668606866324873539 0.66609281850959578541 0.73876442071695924696 -0.71282297000151351174 -0.57019557631261630348 -0.51626227997566231931 0.71386490578425509934 0.31094497436453499839 -0.8565604719183793625;-0.099691118862218569552 1.1003545034893873478 0.81153923234197866687 0.6911148263458221086 -0.5969145576474699233 0.052935829316920486598 -0.58505141843668950763 0.19722489243002819248 -0.24358523586798497274 0.61658078358304613253;0.45570136624321133656 -0.42117538417528110894 -0.12019266969274459977 -0.90736084739033651125 0.63533666519167597553 0.4070669665573956042 0.28293155784911871997 -0.35150947781536506787 0.88091512412104788776 -0.41285409204073664213;0.10546070905185239708 0.91961798545160700069 0.92864269084084649641 0.64103521392656126476 0.42019918007274098537 0.97824322501009208786 0.16232737367048397092 0.43856619682375619362 0.28091791279122685365 -0.82365505725697429895;-0.11981885254332326485 0.89141456394123130824 0.53659986682495774968 0.98622014529902135571 0.48050697839072664674 -0.084945210388466654838 0.42691082899467347467 0.98795920325687625052 -0.2671578951488197684 -0.34073485919089829821;-0.74882059400932809989 -0.082849991401041364614 -0.21726602740430123184 -0.93010542559920339478 0.92422865567198175807 0.38912007406869664194 0.68713752263820304655 -0.17674474729839045883 0.47645681799380135146 -0.51443399635404807313;-0.63173660541513210198 -0.93189126308951442113 -0.84253438474110131651 -1.045054881404822833 0.56482065261115022015 -0.53689975462804473416 0.50629278507235164764 0.038194132567951961932 0.42928721496637201049 0.22828637784949382117;0.75827519000363663437 -0.06590532277734807709 -0.70736338511088259207 -0.29832066083872477158 -0.88237447545512359692 -0.87986526326329750347 0.1393180128727921907 0.21460220706877117247 0.85690340416770061083 -0.21616601066364371508;0.67208935253321921977 -0.30656773450199736875 -0.030833370620037475057 -0.84854742564765361923 0.33495595475918760187 0.7602310307839030834 0.25563988156892275549 0.25440794485687773241 0.61623275882559436223 0.68004712877584738706;0.0027592054858031588027 -0.39322660771716144712 -0.975354755936826745 -0.52252074843604534582 0.17644471230822561525 -0.55113232859190541824 -0.1709647949872600825 -0.36442153984282715795 0.34474960653457820126 1.1618725006099528407;-1.0159730427999229541 -0.34284954519321242383 -0.63188105067709632312 -0.04331666001501754959 -0.28891691848545875132 -0.16016944532559468373 1.3519354971151178457 -0.37369337905495758623 0.78584358930062192528 -0.020762007249478794252;0.037427285598819221013 -0.23303358328686737955 0.33710951192252386344 0.89382823601081073939 0.63743808110810862289 0.096108003150862847397 0.72541026062620117543 -0.78603977752141340751 0.82531646567058791764 -0.23610330390708936243;1.2108842764497085298 -0.93544362416907189672 0.24472809186543659221 0.6135261643892615524 0.35555551667177837105 -0.076353480052366820563 0.78903525695218901248 -0.1468628098325354403 0.80881929463814417058 0.30383515414192324711;-0.41297882198352403593 -0.78041713058916373225 -0.29597609031286148396 0.078395398408490635234 0.76319206020850061112 -0.63681595774243671126 1.0430551345889058634 0.70493309083182986718 0.63274723095185370081 -0.31919340364059284321;-0.37409451380585551084 0.83738088312668301771 -1.0155947320053084759 0.69395585577203133809 0.24563563213693212495 -0.42498232787858358783 -0.53109607505460187937 -0.78968406150911041319 -0.24880130774743935973 0.56190992556962537918;-0.93394701808226698869 -0.63320771236749306965 0.54618081435957310799 -0.50846392368696857744 0.57874692486720646922 -0.32141110147721735357 0.53718123166758746656 -0.79522324158156254548 0.18308306441938501652 0.84927432682428394273;0.15799451860961705174 0.34088429181594676054 0.70535837103849252649 0.11188123777553909965 0.41245783744177788588 0.82967276109075038804 -0.94600884658284600803 -0.89562284099834532647 -0.26816840796502156019 -0.53050412926871404196;-0.30145410867696742496 0.49054009174457152698 -0.85813196606716635184 0.41374125703025854683 0.86936703839536699778 1.0038450533643554774 -0.17430922615143215615 0.11545277964864221476 0.20773392319861705424 -0.59551097705692856987;-0.58969820273811313083 -0.37352425925995991207 0.052522304868510748255 0.45409587062710887739 -0.58373228833868373577 -0.59181416666046160469 -0.67373917397067961677 0.10477679678786913642 0.80846544044677504104 0.53380100139597430609];

% Layer 4
b4 = 0.72598985148894212838;
LW4_3 = [-0.55352658535913912274 -0.81073862481446645756 0.39941375299336107085 0.33540905425364292425 1.0545032901870825537 0.20650786463238474111 0.11121570026933320918 0.87583690305083616856 0.16334079243784052626 -0.73183519436780286593 -0.65628498007831481686 0.69941308463614682012 0.15386836018997313014 0.88906421612616648442 0.81562865661742645074 -0.50865932048917894548 0.75090416809453464086 0.073504312871029431342 -0.20037280885498576222 0.89851492030410218259];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999996;
y1_step1.xoffset = -2.00000000000003;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
