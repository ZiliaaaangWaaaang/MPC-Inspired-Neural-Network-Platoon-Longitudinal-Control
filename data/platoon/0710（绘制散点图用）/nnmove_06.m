function [Y,Xf,Af] = nnmove_06(X,~,~)
%NNMOVE_06 neural network simulation function.
%
% Auto-generated by MATLAB, 09-Jul-2024 21:23:00.
% 
% [Y] = nnmove_06(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-9.27187740505682;-1.3712548795899;-1.99999468395731];
x1_step1.gain = [0.211713351521246;0.371601079107786;0.502772476446125];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.6586872206927951723;-3.0690398787761257182;1.9852864515760471065;-2.9328172834881360842;3.4065292607264336944;-2.1187834533792249125;2.1451701026058165311;-1.1173639140239537415;1.6418092229246110669;0.33339225174817210817;0.40487235796633197493;0.52692838494622729062;1.4979557880263858483;-1.3565775984423060763;1.7556456991413378343;3.0036042308953487812;2.1479822642102268659;-2.7220608724353660968;3.1742515081713937874;3.9020096960997285862];
IW1_1 = [-0.30724707822758390297 -0.1120357576092353008 -3.8286865331828079384;3.4503080655938918042 0.0089763160517815545475 1.8886168489589891806;-2.4122996311276372339 -0.87020320350850499658 3.7219303181891469912;0.2835509546416878357 -3.5139228156678816717 0.24851182305696986607;-2.805423260738753477 -1.4020695909440266114 1.6153588661436011353;3.8445260980378197502 -2.4886456724988126332 -0.81081103648953445351;-2.0493357617532561576 2.2737626076192931635 1.6165317336094044975;2.2773714000102276422 -2.5091934777422606473 1.3392483945152466873;-3.2375005564058585428 -2.2905596280638200746 -1.6862340765886230098;-0.37431282414295169447 -2.9339107921373308585 -2.6389890196002649958;1.8182398699528539154 -1.5654957417370505279 2.9728714670025762068;1.7408129780348253757 0.64576213959291894895 3.3584782144444105256;2.5839088209093441506 -0.7660214123303821232 -2.5843116340206391257;-3.2769837980284228784 1.1181587764688425413 1.3392656323934324369;1.8295227405236165197 1.0356382494697986552 -3.2042890409336037827;1.7556862562798416505 2.7700313730695924619 1.3777627414538329287;0.65360648660325149084 3.128277901630430069 2.3295602133925519261;-1.0183268079028779951 2.676062099446158804 -2.8955354052046606839;1.9233415044749806455 -3.134503544169278566 -1.4257948579113490783;0.39666183755551692736 -1.6970205964148830091 3.3433516754948620076];

% Layer 2
b2 = [1.1309909244601357159;-1.1340776934660208308;-0.91275327907460768184;-0.88447613007072445335;0.19182809574655551588;-0.33294907194796341532;0.48161072775285462821;0.67781011725530648793;-0.88569909667097523887;1.6614228407391520292];
LW2_1 = [-0.56338082396943189867 -0.086370471841390308865 0.13676786046328121005 -0.44303096466027702682 0.61259867249022603719 1.6847542485080975183 -0.72495369499447470663 -0.32637696017461514941 -1.400909522826583542 0.20740824982323624592 -0.26449937087612573894 -0.67113723746996101216 -0.20206594114381182248 -0.15473430401077065133 -0.58160540072372690634 0.36600034828011285271 -0.4153028922767432185 0.66309671612347742542 0.34139333368257257506 0.31116090445908273221;0.74106576690354464265 -0.0796734849945285456 -0.75920447519335798603 -0.11934782848016339818 0.8800680988368043689 0.77134325063353303964 -0.053654134043521060915 -0.092949706589003588952 -1.3621324549050211061 -0.89844761678075801825 -0.30337970532028585291 -0.36288225305009952359 0.31907044342142726334 -0.51867475062365053784 0.31710704201231876276 -0.1332424445639577848 -0.72432799284459248312 -0.024643559325677612259 -0.10211793201091588779 0.26510585652011292579;0.35595520582719847313 -0.66698333303577639342 0.054585981303521720343 0.14388356051072825892 -0.54187917153785591928 -0.5767491187718316592 0.17793641145834548922 0.59755525440399803738 0.20840487707495308767 -0.50977042747412459889 -0.48826516981829570785 0.51942178627557389348 0.44009298031046195643 0.367742058031591601 -0.10379100185324377503 -0.61396467852896774442 0.39408472804378019694 -0.14081414420679944088 -0.49233829898912945255 0.40980290335646674116;0.53976070581616542032 0.45707366441473795682 0.88632354742043384377 0.71440173452067334825 0.21186565170632784549 0.040626501676944808128 0.69375804714168520793 0.02783312630117014061 0.83356913711161695346 0.019329360352580017557 0.72015812685689195582 0.15260589197136117945 0.11875595483843197353 0.51991778037423541647 0.19662357908113539673 -0.35318498770404094245 -0.24232287487464598819 -0.072671009255435625729 -0.31917881417339655226 -0.77468827462373468506;-0.041462384740378291359 0.45428961837314651984 0.08346920277374207664 -0.58257880061302136365 -0.64063913102863312421 -0.12986808841233310474 -0.011152704037289467784 -0.30514976472733246204 0.065069118271193854275 0.78488511248673542564 -0.22475816169496659613 -0.9288940803037311067 0.67676440644948843151 -0.52425861600512557725 -0.041695900468346314138 0.71798690866241343667 0.12715583852067857684 0.048728418963957062515 0.015663898142486993442 -0.063418119590395838348;-0.4743602257452367299 -0.27235593472385044578 0.36591968732826390953 -0.46286004589415297161 0.94606189885304237119 0.51019130027734649335 0.2890204520044052372 -0.31804201842498919239 -0.83909204597557152105 -0.4846067489086292035 -0.048007376354416084197 0.48517600386350895336 0.44595602805575290661 -0.27321889863837495183 0.13273903168778214412 -0.3398250198304435532 0.64954330899542889188 -0.11832232678839554874 0.034155945550754795992 0.38411249296174576617;0.33736681869883250462 -0.12770441286916053847 0.081715812801748957672 -0.22741244794582185507 1.1918611676876857963 0.46936456881424476473 -0.79640037284881948221 0.25788191888299633048 1.7905797450527254355 0.63128777230156407629 0.78894249670988092493 0.28716667401745665789 -0.56124746782366186082 -0.70572979054220641437 -0.4081512629757152455 -0.23291050941055352341 -0.42590314395751299736 -1.2854689177214777551 -0.70551492255397618703 0.089094714881969822029;0.10733344818017151456 0.64031060070983469856 0.28705742388815441712 -0.22219205383084375538 0.25772370576683095722 0.34953073412195817538 -0.26018435027410857785 0.62455480762447390664 0.28869854863268024081 0.75116211936973931174 0.10423622140608218567 -0.45142062203037963686 -0.41674586345424136091 0.17955725229633776041 -0.16415714716552573527 -0.25048115906336682057 0.40644635805543599671 -0.099342748511361309016 -0.27521616840094031975 0.37892663064330350808;-0.27945984488658393019 -0.6733217904961282807 -0.32815705684477142201 -0.051464655057136508842 -0.20774785331965781032 -0.99356381869173737709 0.0502605832059758173 -0.51018404085632584888 -0.42829850992184842484 0.85756514668699712622 -0.65663484313083486654 0.25394259488386988766 0.86797696430606530171 -0.059389070916834540981 0.58395551557066804893 0.16210425518745125162 0.38053843422175759326 0.17429066649083690965 -0.0314874007505366732 0.57932050297581672016;0.23673895537350680973 0.040880660795880610636 -0.12514725846187477187 -0.23343475816688943891 -0.11574095915911819521 -0.12263922793581087667 0.23918299296280629007 -0.53121853276439234826 0.72837752091896756923 -0.26291587503934149561 0.19539288994461798121 -0.40982535395563257641 0.098741508766955393694 0.0062209731386573914255 0.38490557494600802224 -0.26382757840548848316 -0.29876755671061594466 -0.55426244254034939818 0.35121587539884957518 0.42715961307138128333];

% Layer 3
b3 = [-1.9111741364236933816;1.3830846568416070852;-1.6001596877304420374;1.4347478463533134274;-1.0250404867601186076;-0.96084536972259881882;0.48122732584365152109;0.6946286402520759351;0.28663947896766633905;-0.33463246364763166163;0.25634829084717736247;0.30081580403252872191;0.22753280146037005438;-0.84829168642858887583;0.96123341679531881798;0.93972701425883053972;1.1157544122439391199;-1.7464975461990108752;1.831004967712033249;-1.901315929559989959];
LW3_2 = [0.82522684395531087365 -0.9481447477287319181 0.3317033370992972241 -0.005625462044466285165 -0.17188939258156923917 0.60427874403967352102 0.26284540903744835205 0.66211695190774633168 0.8598984863979524107 0.36710338016429577834;-0.69268284352551146021 -0.37375103739191262164 -0.2981060658281465825 1.4545785864879816618 -0.32815813012189887221 1.0220664800404781758 -0.47383615593947858713 0.21174443593350991688 -0.26526492089616610093 -0.65147037536687846249;1.6994155509082187194 0.34644762988365268574 -0.56212061825637515966 0.67048872442273454997 0.38649720395159403719 0.33853991342939843134 -0.99002932330677129169 -0.81177531022776405756 0.21040801206793621758 -0.22600585647950291457;-0.26007245187579447476 0.61941271949505394279 0.23917487368307865925 0.33230626481523373172 -1.1580832246791594731 0.59857365716730059901 0.237546132830781076 -0.3007683062985120892 -0.1434680303807371049 0.026135734037445415567;0.97793510025746921421 -0.24636142916610120901 0.58110124575357502419 0.54505818873847289296 -0.71274211611343252226 0.87371413091304273024 -0.63661436994081721519 -0.32839611130103002479 -0.53757826859886659321 -0.047570828900581993426;0.1608478018080370664 0.013640040351972988059 -0.44439693165553029175 -0.70502768959364692236 -0.39201372922204280602 -0.92243663515228280225 1.00178493456001938 -0.61130187459761109459 -0.72941473420123859039 0.54856834208847315981;-0.76434180833608456052 1.2014680610335941591 -0.876645026370383329 -0.24657595085544825597 -0.46568677758998633376 0.24091954681935387472 -0.63227670145987080463 0.12840579290525724887 -0.30773684334410311703 -1.3379773962471603888;0.13702095183461868166 -1.0255913040935158431 0.34699533318952835437 -0.22439552257595637985 0.012766757087844306587 0.76920011737167259813 0.70013716856025876023 0.43458252331870950158 0.40570151611925264756 1.0641535779664421657;-1.0445533886117728262 0.13236930234649849081 -0.64277070480459885804 0.41276937423931642224 -0.48045311465615908597 1.0209449916006811954 1.3429971985636097731 0.46506492812427496775 0.74863398978984863064 -0.47355151321542465759;-0.15073274466398467464 0.14554818803340593969 0.29574064186041415514 0.57418488001309686553 -1.2572320409084454251 -0.58249315609568330654 -0.78049913399597059538 -0.36806187859596800616 1.6364015685525450383 0.41199520345946966104;0.96439023812513180456 0.32654370315772662803 -0.4925922503702420685 0.089329390024702026718 -0.26601058387638104596 -0.70703246209839198944 0.16154693947416784439 0.57368253446810602014 0.68131648668535849112 0.22077018526142178079;0.25689085447831350173 -0.22657750671726115121 -0.91826856506608522945 0.60746063250263770961 -0.58927920769558439495 0.30215835584326911079 0.43798483026943840768 -0.62611348992166471206 0.024711417993724445891 1.0620471975384997432;0.69927162850897617297 0.84034934640467973122 -0.40242017469199126145 -0.43159848010468138124 -0.2498912075128764676 -0.040800448304235764629 -1.5263558182791390205 0.94806259642565182677 -0.13501063183412190249 -0.87119711235972507879;-0.66324969641960984656 -0.59512564735486350731 0.20894473032895988229 0.012215138046365859453 -1.067994985085503945 0.050441137370988202437 0.45584351720129190344 -0.5787089837652105162 -0.8822124934893407211 0.27427796875129750731;1.5281990647793977089 0.24696116537203560704 0.13467701803641740632 0.30239276970656264742 0.41447721679814775175 0.12068708524196725129 0.66682897421128084492 0.8325615670320233308 0.77520216671899244698 0.046871475657377842383;0.48521033606056546139 -1.4460898632310397183 0.69858354698375602077 -0.28644838264351601964 0.60379868227479338572 -0.24780543199576668401 -0.75985953190805211044 -0.46448857502544438347 0.52943903197330366428 0.27604504364747856071;-0.046006264863550951072 -1.0658730714022348618 -0.38898409733684885525 0.30519454829702469256 -0.58299876762388025409 -0.98464967770388889257 -0.83931987585867395829 0.63880487489616533114 -0.0023369938124351737063 0.65909541332438636996;-0.43003258592884419098 0.80759237367687530806 -0.06029859568163221939 1.1273140647292092531 -0.0075458016150778319669 -0.50096741570664793386 -0.54173173769302807035 -0.33654911386174279908 0.51615958132813199999 0.32398428516018823453;0.8195538354029311412 0.092343639079804071268 -0.84257636883637299086 -0.18534956739686342386 0.8212712775182827718 -0.77601905912383339903 0.37519248021581302899 -0.40952682862341777126 0.18580763923516024905 0.16748264802856718814;-0.21516627391681167336 -0.79842864022813142544 0.52260975935781384116 0.50686146714725344165 -0.60102464315027037678 -0.5678819068426789185 -0.69497649233792835322 0.014706886191817970105 0.64501684826088079294 -0.8718715528517516633];

% Layer 4
b4 = 0.53581771319866011716;
LW4_3 = [0.12920750643330802809 -0.087765529598690272817 1.1103780280531641012 0.21520589466423487024 -0.74231263100392264054 -0.089598293078080940011 0.56224229340294207269 -0.35678011671770004654 0.33379892210918832296 -0.014509477929969656629 0.15237934091763874478 0.26494748684786251225 0.84477494586292245504 0.12844464818918793769 0.053017529836582290292 0.53682089684470823965 0.13905381519374090948 0.35423386273630008692 -0.1524826069998621858 0.088368572698799455201];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999996;
y1_step1.xoffset = -2.00000000000003;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
