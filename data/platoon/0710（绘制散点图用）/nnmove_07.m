function [Y,Xf,Af] = nnmove_07(X,~,~)
%NNMOVE_07 neural network simulation function.
%
% Auto-generated by MATLAB, 09-Jul-2024 21:23:01.
% 
% [Y] = nnmove_07(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-9.27187740505682;-1.3712548795899;-1.99999468395731];
x1_step1.gain = [0.211713351521246;0.371601079107786;0.502772476446125];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.780026973836421611;3.6245559810501988274;-2.2273458001642088;-2.5513498623752717265;1.8423516333305594017;1.940589864098202888;0.78772293972108953231;-0.86659659851805403985;-0.27508168797550930362;-0.11943870064946621179;0.0015947786074519965105;0.70209048291943410014;0.95380888525741225337;-1.4108769824986271413;1.783901933306257348;2.3459968862667222034;-2.9535200075165164435;-3.016372190438112888;3.3979714077544254103;3.7883258687927718888];
IW1_1 = [-1.2607109880778128996 0.35600478211651243043 3.420676880306916523;-0.63509280407935309043 -2.4893483809308332155 2.3637813423614764119;2.8400707788437218326 2.2193232234079323106 -2.5102985790469531935;2.9730304946784507081 -2.2743461162481750648 -0.94926207140483098712;-1.1750310421773457747 -3.446714873313340366 1.9564972684931061231;-4.1573124317323406629 -0.21891599167922859426 0.17391348560782479704;-3.3835512407737677876 1.1837405312699227355 1.670840587699091051;1.1085853805760750301 2.7098763709973630043 2.5649927403807399884;0.60181945138601966594 1.4021449485209189767 3.4170188668173611113;2.4071629880975029536 -3.0258191774445033495 0.15656815641994137334;1.9595134613169271631 1.3863930246018123515 -2.9113925228190282724;2.1275822375102313444 -3.1050851978860025682 0.39255827611394578103;0.93292253247631939939 3.334921485819979825 2.1683960540104285641;-2.0078821857958564223 0.80946722130741455281 3.14970875020873331;2.8848363004861177217 0.67420521560593382748 -2.3504683588929138338;2.5877541900461125124 0.90728964412764168124 -2.5071089914267310483;-1.6222621681436710794 2.3578463948321348731 -2.18724048049510289;-2.222322937077160887 -2.3346577467343170298 1.961373732043936835;1.8836040313951392111 3.1411604404612969432 1.0491407434083062089;2.4647366754406423439 -2.2773697608251235458 -1.7970806614980665561];

% Layer 2
b2 = [-1.8818440784960814849;1.4211581013735619106;-0.93511619774280463346;0.35363167776377940621;0.074298035277681279132;0.13421177139379183996;0.49122035109984291124;0.95428915892114662967;-1.1481480768220160282;1.7142277484153070066];
LW2_1 = [0.3243457370849255339 -0.23389496383159241732 0.15681121852283499973 0.26231455473481762874 0.77043141756548050303 -0.59053708284528971806 0.57035844719519790402 -0.023837811316268664452 -0.21528955697613708087 -0.18365617998556729717 -0.1549466011636754792 -0.20183879608392316096 -0.21499214351124124045 0.038583374725459800014 -0.71401451479359312469 0.14173009427485314116 -0.012951513565920731719 0.049884118315955100487 -0.055383223567000150478 -0.5499996568117789808;-0.58005571421099211271 -0.43821202502817446778 0.52667551785649591167 -0.47442508002065553185 -0.24202083824285003377 0.40313289984628264406 0.32852168415689431136 0.12035832501421409035 0.21283416816302483388 -0.30532976000176437203 -0.34433686578924443955 0.038257496134957838518 -0.21191429919593590681 0.41241979608693424275 0.51219739637153594014 -0.30145378780869469537 -0.38472539732663396661 -0.269123541295850921 0.10124677404441853601 0.68217790016474011416;0.18862039738450053772 0.48288618391338411495 0.66784854661177883717 0.063915269199767685282 -0.24200024999145003379 0.51125101757850877071 0.73692912735774629418 0.067432753262732472721 0.78941438403083696862 -0.221705200660242574 -0.13422810939833465516 -0.091872030195039700029 -0.71413918379790952695 0.85370750766282732513 0.40484352174890725351 0.16667420993566223197 -0.14311606337488119722 -0.28911833347963705743 -0.02942503365013383887 -0.59747852668750778271;-0.32987110710169781358 0.60655526273159388051 0.10347157136931868504 0.16774930188005651721 0.28147558960445900889 -0.15560906605484653431 -0.12715531290793730124 0.54439942485895220781 0.044678616041529853331 0.20734966383544323199 -0.42307190425858776095 -0.64020632757108963951 0.13486351126855883331 0.63267685522826433431 -0.1404603090525261555 -0.19036791145707460116 0.97851699763544164323 0.69958969144811522511 -0.036886918645903106484 0.33629656431435533959;-0.024425185343306510255 -0.28925980165393694321 -0.27570173009242887607 0.014698829786737137304 -0.13181146838108795394 1.8625413137213022718 0.038928917913035973597 -0.061067003888685099378 0.24845487528010637424 0.76941781261346575693 0.00048332075241211414074 0.21096141670755319542 -0.78920901518019770382 -0.27445031991827101292 -0.3780565707116396168 0.59472419638787976659 0.81376475065578013357 -0.49118866511530329122 0.5776982347564918463 -0.20546359831137706031;-0.074913668937758082222 -0.095240864816907355728 0.25770478789523654228 -0.84967994741548991122 -0.032300989556879634856 0.34825033411167294339 0.54037009775145361523 -0.68864336789324176458 -0.49931977041831687725 -0.71193897666288130655 0.39597648528810591717 0.15006227883802478185 0.44552367539415183018 0.50703451291786394428 -0.14501536068379244915 0.3827099259174375212 -0.5352411304691777616 -0.56215736745395383789 -0.12133670206211391585 0.4119836095192553338;0.41640241458810905995 0.47236360259582610421 0.66821907655565360162 0.21024830154980997388 0.097344693901982470852 -0.36144501688329838673 -0.46608596680617619956 0.83824629984888976431 0.46797162525381130749 0.3035833208284199336 0.15025490478934916405 0.14203162469006144764 0.80327485265654563484 0.23800176337043679742 -0.24162302031638119293 -0.19677491397112636951 0.016368198604633819176 0.0405048030362702427 -0.46861296318535777816 0.21035103307788913241;0.18035919660502996997 -0.39197610462057141945 0.0058684309040334843577 -0.23914315805748651012 0.48280292388635914769 0.22870886874046797432 -0.19413001524724060598 -0.47691192620554750947 -0.35236723877785508519 0.40111332567316831943 -0.023061209583769930881 -0.46375851429062914244 0.25907063590604456627 -0.25167275423562157632 0.62725339969067317458 0.1910143905305599632 -0.23413594782716840026 -0.5541894932607850377 0.18922637252723850665 0.64695099756387353107;-0.5224123014864259229 -0.15853843023592503747 -0.42882020790004077293 -0.3525748954705533178 0.025745893122787744112 0.0099178174108871669512 0.2445821933419144445 0.28690432134131799158 -0.38012853122998618849 -0.05218798448602448431 -0.7420313407124170535 0.79093584719279830253 -0.14925636644218320814 0.35250928720545965378 0.095476922961119786715 0.50871954517931705642 0.16689767870966651375 -0.42877184459449041443 -0.26303682724733240539 -0.2818130625184061544;0.46020609832383668758 0.21868103334671873395 -0.3184240537041865271 -0.082558173732756187646 0.16538860946290090403 -0.036453619959152930297 -0.19587293840672176382 0.56308623065512442007 0.18181652320508467913 -0.3862128092711539229 0.33754044112667130895 0.38662388135455810767 -0.32308114167804896644 -0.72416253797515384161 -0.48427378171650858896 -0.39754412358270208028 -0.04856283117010617989 -0.26155884153360908773 0.81059247658681488069 0.19531714158546004123];

% Layer 3
b3 = [1.8743130670082805977;1.6131703530411682923;1.5549374621568723409;-1.3300890159709859439;1.1817694111272694091;0.81446614831939490031;0.7470432042273519313;0.7082976138304851732;-0.28677265791301270736;-0.20312929997047909914;0.079194461487908540676;-0.307930488890648002;0.45251932659549254367;0.73053610371896104958;-0.91862287087563065935;-0.97603349327460597884;-1.3280007353878187093;-1.6719230114162459966;1.7369411891539343618;-2.1084969889336102611];
LW3_2 = [-0.41723889746676856571 0.3165154649090561878 0.98493358943962727725 0.53260106524087358348 -0.91596635123337155626 -0.45851845214916114868 -0.79851804114064117712 -0.29422257940252127817 0.44365049705010256575 0.12103762075686438915;-0.96713433261212022884 -0.24556021993877780174 -0.24813307404492435104 0.094267978270989205569 -0.67073389621548129558 0.58758262681104789227 1.0458728305904678724 -0.028786426504052959469 -0.59191740531223047128 0.46301323370029778825;-0.26098892597560313655 0.30051962738262250063 0.86627029830472301875 -0.65570841379285860206 -0.24848912055316776937 0.49070736163705869215 -0.86913894708861760829 0.92293236015086332902 -0.41881176431384958825 0.17777799164686336475;0.44937219260966765333 -0.10975555499073590127 -0.31728122327613156317 0.64936917093219082009 0.30245212832025286653 -0.65678565834602653517 0.4226202417884202811 0.31057358746426422247 1.3053490631022883761 -0.5530714702928725135;-0.29430652208275365211 0.61656288141320436669 -0.94860190533498012222 -0.84545011929092661607 -0.20053767324014756812 0.65442136932111727443 -0.08708622205731426924 0.13151656082596693831 -0.063133437031743150358 0.97981512614213150947;0.039510157604205682624 0.050498356036388782064 -0.20270430703131309125 1.0764918295176673091 -0.89946187724442627776 0.22448926416034331588 -0.4425269680035551767 -0.14097755330854824796 0.98896614778259506195 -0.54641439388087009732;-0.41695319209278924877 0.8801106645683350882 1.2020604365520424217 0.6404520061742409176 0.61623341509396167837 -0.68568237286281974452 -0.18404249852246193364 0.18895021690513341683 0.50129561642441033964 -0.6873249714643581143;-0.68092556269097570532 -0.72360524888009369882 0.17073774141577460761 -0.90881591697506025618 -0.39821523773037498239 -0.54167041700207585464 0.60549850888387091175 1.1216402294630198888 -0.12513500342471706173 0.071474693864455068892;0.82744377023853954434 1.2251653642373108166 -0.51391637335346329607 0.30638087061399416067 -0.486499439423692559 -0.25718563050997345076 -0.59916707469520646967 -0.16387272283601481138 0.020115011486964033682 -0.40975659431073074845;0.67878913008363395143 -0.32728994048454296273 -0.2071951284945540428 0.79690552812523285375 -1.3527755772700575942 0.3250837303641971876 -0.14325048462333575539 0.63306903954709470295 -1.0085162538283094502 -0.37848690281536101487;-0.38710356355407249396 -0.68883808859321093987 -0.28836961842493213926 -0.99676902564672464901 0.61965741234449378538 0.1226165759245968212 0.60787118806401763127 -0.39805810876353020511 0.70318474321410384675 0.97581235658132725597;-0.6439961102608672272 0.25846969022085453105 0.30298795661541511048 -0.63431022827564476074 0.47605549701157118259 0.13500580825838934262 -0.53968734269805307413 0.86917597915089839233 -0.19357060239275233893 1.0609784895379259506;0.90109938218684193512 0.91658091826116205869 -0.14884651563803047436 -0.83316839820988841669 -0.054168102120758399032 -0.30448161916535559923 -0.72604494081001802464 -0.4333092020518286569 -0.37734211032298603516 -0.28116276711851045933;0.30611180463196824286 0.48576328014682340628 -0.50252185703719065568 -0.28172308049924515982 0.36599654051531654853 -0.95306288761933044551 0.79175461654320244964 0.60654823460220730347 0.34960631850842954771 0.84795616662198125546;-0.22508698940317461989 0.63827323879356812064 0.41797700781829011385 -0.18348422293115715376 -0.61074786023819649383 -0.58085071060249504615 -0.59234548164910538759 0.61827610942737609712 0.76970130837332040308 0.82179033529877565378;-0.55882577650679732262 -0.18873927379800672921 -0.73541395289858679796 -0.75472654181707177212 9.2143873769808502805e-05 0.2941881456896979774 0.33689261403193410116 -0.6961236207101446638 -0.3100876731215684301 0.94953173676482216514;-0.24206699257729649699 -0.41186921572236578903 0.54497179541638940403 -0.82276241243744496767 -0.42700821814035766488 0.51338598189632766999 0.75332877113382279433 -0.68339682773345633571 0.54843762791718941862 -0.76956138050672295847;0.076759130779319797999 0.58515695944294165987 -0.7295317935421243849 -0.70672828457329139873 -0.086363216056736358262 0.2226520387837350734 0.60430405724021374336 -0.32318385483639922029 1.1209698674074348723 -0.69734700273496574852;0.11898387772077410884 0.56611881913314965331 -0.51835823743720244039 -0.92287693630669898059 -0.75017883834940768395 -0.57200209648265132323 -0.74860975935759921374 0.30298764345260159603 -0.72752877579973196376 -0.2300093705656174603;-0.39009625029019767695 0.66245205750713120896 -0.64621915148495312486 0.72566935020499734321 0.36969119711201786638 0.46463813584870544693 0.59391245374800227808 -0.70773543895173962603 0.84335934757779484894 0.25243527206476679137];

% Layer 4
b4 = -0.52674962762036392494;
LW4_3 = [0.3117748124157905254 1.0214939801183271495 -0.27466332963609763063 0.40762912491291009021 0.49475187125015596123 0.37272165256246198028 -0.2831374465576889099 0.65926046781469194169 0.29404681080442734986 1.1099292458113756421 -0.342715533062376565 -0.32439022302775999407 0.45564061892132423637 0.34674850754889829929 0.15788976456722161879 -0.0050399464639762289742 0.094426929302763890073 -0.60415107935389411598 -0.27400644222045561493 0.80930174892185868796];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999996;
y1_step1.xoffset = -2.00000000000003;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
