function [Y,Xf,Af] = nnmove_08(X,~,~)
%NNMOVE_08 neural network simulation function.
%
% Auto-generated by MATLAB, 09-Jul-2024 21:23:03.
% 
% [Y] = nnmove_08(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-9.27187740505682;-1.3712548795899;-1.99999468395731];
x1_step1.gain = [0.173193988943191;0.371601079107786;0.502772476446125];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.8278720462857691587;-3.718830961457697537;3.0297453329851289361;-2.4718453009383862806;2.5682925753006817793;1.628935105468732214;1.1337933416371275275;0.49119985724431364238;0.34115554598917696705;-0.23313900811632698451;0.15837856862876367736;0.45953465864780129735;-1.1251418328669382518;1.7122877324598306803;-1.9359656657140333902;-2.2730625624782354599;2.617837401104674111;2.8075998132826200937;3.3017869872204275161;3.6912307435861579918];
IW1_1 = [-1.162369708175186922 2.3759318293405802258 -2.6748417090251450645;1.6171997269897642191 -2.5663875227005852331 -1.7523947327677522612;-0.75985647170321479749 -3.7697516896681935172 0.99062362890177202424;2.9256618864427430537 -1.9476613281075296769 1.4118909134517898529;-1.0504018050762311542 1.5928390111906538529 -2.9996322736613465487;-2.3945406262260831021 -3.0096189205123535793 -0.32108346505166612816;-0.12435026821806600961 -3.5490322949561958765 -1.6302606683116758202;-4.3545778351530808337 -0.96937295543663504205 -0.35542343903866319144;-0.88119058485197698793 -3.3589793757104429162 -1.5994908616616596575;1.0322742500870252247 3.4321025156448858873 4.3792851063950721281e-05;-0.95256198654900514633 2.6764788168834559023 2.2044621846411516231;2.1012007599046973461 -1.9637646693545252052 -2.2303719871986751322;-1.8508495655416536962 3.4663593840932014345 -0.29725859833731205217;2.7032722792772490017 0.57815449228344661936 2.6604667418693948022;-2.4052812222034658518 -2.5277839029082205258 -1.2166070548640481874;-1.7291161047794105787 -1.1160601312423832354 -3.3661495884413499269;1.3421147117274281335 -2.5014801838157669778 2.5331235327242027644;0.18894161859575311913 3.7917131148691880504 0.20042540463556954289;2.0784908138194162497 3.0383129177907317597 1.280324685628763115;0.036993752870503264496 -2.0351530348968411843 -3.2770812090225898139];

% Layer 2
b2 = [1.6348047262661258294;1.5164999652662940477;-0.81024129848185266756;-0.46906534181345926893;0.24974975148677311387;-0.15533953394788213576;-0.41730913868174684955;0.83305485520478006478;1.0581000504217030755;-1.6956091402269153345];
LW2_1 = [-0.20060691674541125673 0.34386462325264477435 0.0079492130969168878218 0.17525046779938269204 0.020142341548125382994 -0.22085450453745064658 -0.57173134230362643304 -0.97970838570927032407 -0.53608725708970728085 0.44753103690196643916 0.27834441652639535514 -0.28991443038728587078 0.77503755721016964753 0.59764898747376205002 0.27389456891874636169 -0.49413349216854968171 -0.62268930513292364282 0.20383628875305548345 0.048379126059861742026 0.5917242488314023996;-0.02199839542255766292 -0.55342449308306007616 0.12586735316200683976 -0.032423129098198069653 -0.00047586158392819768179 1.1298792105629273941 -0.047009183581975311217 0.72086451414416030659 0.3824101503210284303 -0.41547410335343065713 0.6335493789422369515 -0.66467149233229050331 0.34082739735017875127 -0.40122555300628987007 -0.28347766461415024875 0.66948765263891740762 -0.03120117791538077473 -0.53854389878240838119 0.068977508597726860939 -0.28399557559865001855;0.12458783773969757391 0.033902734628072757339 0.42519207792211866082 -0.081300621221895172375 -0.2576459829014841052 0.2153003984833898321 -0.34093073119054595477 0.24899810983781184293 -0.079553261547664261277 0.70943739535455430101 0.02158303341401715536 -0.062923612504103373921 1.0192590132434278249 0.363573558517608586 -0.40021600788519923197 -0.17571339161842436383 -0.41243833117248612785 0.47269543288471954634 -0.40886424011698524472 -0.43678837522315661079;0.30740078588880376254 0.043789942256862911252 -1.0941513025680045246 -0.18249656685397452893 -0.20148256389454491377 -0.41034846711790901042 -0.57985971619757625817 0.31932019631481711741 -0.038938548502767685033 0.77835309932737528626 0.40651891697287162453 0.25846313069332532697 0.031983356864440773415 -0.56216476881115773345 0.14895948738092090746 0.61512782357687634249 -0.13850895856353440116 -0.52187059885710695983 0.09002119172932394886 -0.092358785545888819057;-0.80597197670352405119 0.22620182186986409478 -0.62528984382733199254 -0.12683148172850267077 0.051494176791870294174 -0.1848504909899037485 0.084269048295521800651 0.38909597147383273574 0.47953836779415681679 -0.50804721736230018525 0.78289474368105660407 0.32985006783788306528 0.19320001901619396345 0.25959827978108601654 -0.019482771440235292087 -0.57305219255906003628 0.18696794849361866864 -0.38207297785988159067 -0.22976731303936737127 -0.32165160464996978007;-0.34951150603251873727 -0.09907851341263641809 0.88435340692874220281 -0.3829967238845360944 -0.23479558906017089503 0.25015263292303602238 -0.53665659587750025317 -0.4675362960379865207 0.29393492229219336798 -0.49806499973197887465 0.44810301681759345804 0.41702014260075287444 -0.076690461342086235774 0.1851418431164575662 -0.21035101225525346114 -0.40874061562283098281 0.10753277858114197729 0.19656424889195980854 0.29309938262060059033 0.34365700356341000177;-0.33426598511725202911 -0.26372898542831652025 0.086137679165622843547 -0.23439335541280492681 0.12551316265882891954 -0.20662805479676452092 -0.41559466445699022596 -0.51240625387369542754 0.26666051758356146273 -0.30649740806797898252 0.47000628039816050308 0.66298744245593765889 -0.49902072894235216527 0.52930862494095798354 -0.42714364193842180306 -0.4588239173106865576 0.49007706267088813057 0.11875911619373143158 -0.48694329247821316331 0.11391772423890832167;0.56057058200643794521 0.64046114384521612983 -0.0047833547173749850143 -0.26583376229994593043 0.0058929485007584592876 0.21459558871890732634 -0.32513944942837946783 0.32408599282657885032 -0.36568895609724427764 0.061845526828060548574 -0.29149100731155364041 -0.30392650218594036149 0.2409261820176454294 -0.0064029833703106242906 0.41656667962972293573 -0.53492696648119719693 -0.33276166485948061036 0.65251142267071815528 0.51168550469273021974 0.28876928378908500727;-0.1581390091564333078 0.098630569981508792177 0.54987474045650297505 -0.48536559341932061784 -0.47051612724814412259 -0.65788141611238704076 -0.020219198408561778885 -0.46279614121738493759 0.422825911355109052 -0.5177538912728262277 0.14709000481701955954 0.16076449006817888909 0.73783171096538879841 0.33639306616092862212 0.078122116105480837733 -0.2767771533666946171 0.44747487440356326083 -0.50747981911515527287 0.31058193305160231024 0.32407662309686641189;-0.73393945486446499071 -0.14715353497483404932 -0.49312775625873778163 0.71702662355906543468 -0.090447013930332512133 -0.47579146714792530659 -0.62276921365888981974 -0.084922994836662851759 -0.013547875476464554464 0.42659902382733033699 0.19373888738935901577 -0.68534064280535123004 0.23960275948297374282 0.16129437146452005325 -0.13431525512197850514 0.42105706486772936925 -0.40119999724119115303 0.010669285418974867527 0.22126869914553734531 0.14301138921881875743];

% Layer 3
b3 = [1.9387555448224842447;1.8686315013754835057;-1.4839870519201299182;1.2084173454199853559;1.1972812500923710743;-0.85134375449312693629;0.78169426373813555298;-0.57470542363038912281;0.3922837177783176088;-0.15342229505985729987;0.14010139870164567411;0.45909627672750336069;0.49403454946033853457;-0.77127254299088476852;0.93051163890783761268;-1.0955624146145397368;-1.2708646531160971982;-1.4575701586301399448;1.8300844103972966348;1.8977867925576605845];
LW3_2 = [-0.94631308784315293359 0.37244872939125156508 0.085401781291777126293 -0.1099758800506540346 -0.13444593928087275603 0.98146333181088851738 1.129634811008781714 0.58148878098180412088 -0.09809494425170137144 -0.31553080670866212598;-0.29078187403167332636 -0.81913407351540601375 0.91034819456002691318 0.69262039079235326877 0.63394299338064152849 -0.47428916561147432818 0.24383933092440307489 0.13675153735368197894 -0.67924869794783726551 -0.12897141395714331602;0.49309897927797263772 -0.4654659361788658356 0.35188725750037386231 0.722906009121752402 -0.10501146399409978793 -0.14315760861456761077 -0.25592069309430526269 -0.93558426199343169838 0.86603064852183053723 0.87585698760556873754;-0.28284143235739672706 0.98867315811249978363 0.01670922311539045288 -0.49251827384950569444 -0.40682037508274004889 0.63245610801898488607 0.74073937051204841175 0.75216461878490326054 0.30955599696464147774 0.9023875568041354045;-0.90416125703594418805 -0.39474820576885255585 0.90949280800830245575 0.80018838118988266928 0.41956391936989312352 -0.56847911755601487904 -0.65729121400503998096 0.099590758356820310859 -0.58837462586959898836 0.19822745551928075414;0.98498525018227289785 -1.0308919959119533516 0.2777304481003942116 -0.73787672492429701165 0.30839597530065343545 0.94238153397928803301 0.50866366735537138499 0.34583322075717215505 1.0324258856384269656 -0.63382664178514025455;-0.7904100493635054514 -0.65369554387879624802 1.0910081657254149246 -0.68523557524222167281 -0.44760232976658609338 -0.68926745971127478807 0.31532038995222205768 -0.59556504964499201726 0.11827320499762854211 -0.10754976239591572396;0.3708918235060064128 -0.75120616969791220718 -0.82383831257030626372 0.13045858896107612179 0.33885483167255686654 0.3083927558965674498 0.0127950410474580549 -1.1020009549824230088 -0.2310682657282559227 0.55264899148832091758;0.09052480473265939187 -0.47970294243745498219 -0.18334813796648505302 -1.1801927925151665111 -1.0751277923024014083 0.0026989521814609921876 0.36176504152308469608 -0.7069883739582876192 0.405147130276743761 0.74916325509072090316;0.38736205256170075373 -0.3790348554763154354 0.88989358714326172173 -0.041872399440957011607 -0.72728096218249349558 -0.19019363659561211444 -1.0327689723049489068 -0.086854846091382234552 0.053607930373631429433 0.83549323153796628549;0.45521778654438804779 -0.22621022140280178103 0.28191760351994971101 0.065739930946286107005 0.42296622795810556728 0.5769330219960611128 -0.58034426155236262801 0.79548830069235532125 0.94755015747698201345 -1.0111915098143122727;0.47550132650719889593 0.69245873377843436547 0.36672005844212618442 -0.8135090610668749278 -0.35873109345846732054 -0.16807477155202293906 0.018410192819341780757 -0.63565687070864851371 0.96247712520849548756 0.59371271214573506647;1.2749600036436985473 -0.036639256733597400095 0.59196197502969649662 -0.058482953724812485052 -0.50587389160686380141 -0.59192273162280295562 1.0255826247709782795 0.48543206138087591217 0.58287032213291756211 -0.56349948404143568315;-0.31610926271810585453 0.71890732996005912714 0.49100808382541671904 -0.085306021698061854086 0.38301887176646015609 -0.46679723652310423088 0.83010065790139619946 1.0111145901147962078 0.67950327647355301952 0.46072781432980186578;0.48971524187600184996 -0.72824298656697972199 -0.44636388490132400397 0.82570701008863689463 -0.41791744463556007583 -0.82231083754535905239 -0.46160171526261795094 0.74413643800820905572 -0.41584275356630895359 0.18726609112311970451;-0.67973963055053643334 0.094807791743939037743 0.38536696021968536163 -0.60079795967541638202 0.69772723084593646359 -0.28723779589259818001 -0.73959540509542875952 0.067257070264415977356 -0.59280493373111076139 0.90821617075041227718;-0.37856049220702847613 -0.70973388327903441652 -0.85070375791532526488 0.089674744001848452624 -0.89164827989443917744 -0.062300196836154772551 0.11426202291716616721 0.4924166195679828828 0.90412179530665015559 -0.96028969230144878289;-0.87729614484321960521 -0.14538083867869591725 0.87890729025085279069 0.50696323215403860107 -0.26974736743928851013 -0.43206367308460968957 0.85087488801961652651 0.40779161023130050534 -0.47933148656914170704 0.60778910911581907062;0.30602102862371549641 -0.0361406910162683781 0.73303413087442981233 -0.53183136270755548836 -0.4030549928615737576 -0.37665212674608478105 -0.99603568772771200468 -0.2591821526217947258 0.4575500119958446632 -0.96120648452049961552;0.2631598245335090569 0.5343331989429043194 -0.76995008309678980574 -0.38656339290227231809 0.14652573799815574174 -0.3163007507981767108 0.41639773326575829637 -1.0634948930678551626 -0.10961092987499830576 -1.0080978349070881528];

% Layer 4
b4 = -0.13896814193665896209;
LW4_3 = [-0.87226824276644177036 -0.48277565754905160667 -0.35248573058106097422 -0.38786829368062542001 -0.48224279339533854261 1.200109926612339839 0.89178056338449163132 0.35938912390095523186 0.64326746850068183825 1.0933520389123017047 0.60302796157676408217 -0.56205678401463632365 -0.76777019474560892487 -0.30564470234837765039 0.45054249260192957838 -0.73080188717690297562 -0.6383525263264621108 0.38269760697483468093 0.65785060398716299623 0.087437999950630770907];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999996;
y1_step1.xoffset = -2.00000000000003;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
