function [Y,Xf,Af] = nnmove_09(X,~,~)
%NNMOVE_09 neural network simulation function.
%
% Auto-generated by MATLAB, 09-Jul-2024 21:23:04.
% 
% [Y] = nnmove_09(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-9.27187740505682;-3.65799721531803;-1.99999468395731];
x1_step1.gain = [0.104758804509858;0.260795022164707;0.50000722551666];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.9957661549124052769;3.7045315251865109651;3.0153092256919431513;-2.4175684614704797681;1.9207801724536466281;1.6902040971161562677;1.0931830443077343862;1.6557357411799145108;-0.0063438366980456961652;0.090270234701028420621;-1.0977809908485467449;-0.71419532902413240816;-1.1244758085431980632;1.1792709010191364527;2.3917860492420319751;-2.1425117120200569687;2.7901717885236645422;-2.9770689372658254435;-2.8773147860363792461;-3.865617108963293802];
IW1_1 = [-1.2137445184508393048 -2.9564861077670361311 -1.6861482812163148814;-3.1165309955478188719 -1.2723591407404022391 1.2305072415803048891;-2.0438088602912687364 2.8156736924588714466 1.4714154244499608737;0.13077191311115138328 2.7239150731079053713 -3.0003286043974042308;-3.0718922894484794739 2.2297886926846066658 -0.95011755932343255893;-1.412416585047494344 3.0757248422914287289 1.7599668179540743917;-3.2133052745910890557 0.64767697683760838689 1.8999165679668028606;-1.2829438970170834455 -3.1620171931887308681 -0.63291608955386435831;-1.3551475876993632763 -2.2079092336439845035 -2.6630798489164653198;-0.77830610564339131052 -0.66224214726405516984 3.682478256717650833;4.32372310298219098 -0.25094407217303454916 0.65899720921448512456;-2.0988450940327028071 1.9414997272857474897 -2.554417802764131995;-0.95321017073905722761 0.76338086480395983546 3.5945905013890175894;0.10215022827860859023 -1.0261985625527889621 3.8134282093508917733;0.28904520731613142503 2.8245576893083228498 -2.1268602812578394357;-2.1795238264846790166 3.0196683404296389419 -0.21776395217974295337;3.5363338120753615712 -0.094449964413579265421 -1.0717307036763938921;-2.635441610038519844 -0.86460917120278746317 2.6452571096019372732;-0.88646635236928905677 -1.4600678748223991921 -3.5992354211295629618;-1.0482738615776017177 -1.3365711309606780333 3.3434594072026628808];

% Layer 2
b2 = [1.6209910935666096421;1.1850511703662351959;0.75702940396434537096;-0.57979905073706916596;0.27206937370804290532;-0.23322107497579400159;-0.53078949969738131731;0.81581479933164258167;1.2812729439633305795;-1.6575983214544025568];
LW2_1 = [-0.30004564148380230559 0.44207770145042735166 0.53278097052979778159 -0.54662772475997445376 -0.47514883913186489739 -0.16811319531312582387 -0.46743280924515134833 0.071951426792301445556 -0.48468189461390953632 0.089855302877286699625 0.28929470686483138575 0.12927517941633032139 0.1716295738223687084 -0.15901960399877868024 0.33295428133473708998 -0.020660215383540021794 -0.52078389503908772973 -0.16407549262892109909 -0.50305863530549066454 -0.4120525016773392557;-0.038601495598302705547 -0.57050062799315637285 0.043546895097725246693 0.36558120051805909068 0.029943021169872009041 -0.79631669445314967604 -0.37062967530990598153 0.2188043346817648005 0.50870127374925033781 -0.30110338032034816846 -0.018012461833271598 0.16474415481832369035 -0.3068031669575804754 0.45232149079813277481 -0.092168515756766628 0.35784568834600466447 0.11754476977851660568 -0.01829717125141607989 -0.21696361307577163857 -0.3855297403920011079;-0.18352160907741266183 -0.0945475991760963419 -0.093619495408310410278 -0.74839459979871436612 -0.25876222663481401876 0.097940193964649299718 0.41460273023706400997 0.26736903926939614706 0.19204105161615642183 -0.59121964263159942909 0.72246777496808534114 -0.62874696640949956361 -0.36021738069695069528 -0.42217113750063617328 -0.43790635909775182943 0.28696110294381788064 0.057714081938004396788 -0.074090911204803697188 0.18018447927378158924 -0.20285579688134941501;0.14504587965476156697 -0.40237046435714829418 -0.078950720211892783107 0.035523329370104071712 0.81016202742592968722 0.052997980381495599089 -0.22868523203583066006 -0.46958572960711775224 -0.6940213505213542744 0.21232037848509571765 0.12241950099877343949 -0.17888358626349931679 0.42685588874244034807 -0.04968564702582400211 0.44782617036342536876 0.46087375302801053545 0.25649198925332605814 -0.56866870556743731591 0.10657188732087373439 0.49385633597716604992;-0.40962497304505218754 -0.39519846989940088378 0.54876468324471106008 0.51411122275022991257 0.22066811469443692317 -0.065336201889097805795 -0.52776876329110744557 0.50241337722220402728 0.38214241092660605759 0.27517679830588848144 -0.079705348723680291556 -0.28795089065628742819 0.15059495366830394358 -0.37814720096880760636 -0.0062672262106647572133 -0.062440869065382820224 0.38204764861537393594 0.23196649489065654381 0.36801718215479362062 -0.089813174710516002763;-0.22213974468716871091 0.59138915915323442274 0.37446220245064992804 0.56446272541452258142 -0.30910489327449541808 -0.26303338632897249605 0.10005800004586173912 0.27063138610793546768 -0.52691766944580109566 -0.43649192003956371888 0.39794274378040550566 -0.10620865509745075483 0.43087461526775833187 0.013548655552447594341 0.36122002639186878703 -0.26776354137533298072 -0.27940586499589209479 -0.36146984037182661176 -0.37852825712905652233 0.48455795467016937739;-0.22449936615861712519 0.10379162446865763947 0.2755354968449185149 0.15153273164161815134 0.63525087979144134742 0.43734570784231285856 -0.49650068276672465473 -0.34157040920617798285 -0.31034821533768419677 -0.37233641393934052699 0.93357010968190246025 0.30942343561720508927 0.42667703314445254437 -0.44053155501985352682 -0.41899192993964884391 -0.055294425288360662951 0.24586997007302818785 0.42439891090284370678 -1.0610858601065296103 0.39621484923778849119;0.25721167419081580885 -0.38880520185349842777 0.16157010579731362343 0.29115165873853321443 -0.4057593232471597422 -0.035494482077894705385 0.22353776495461957774 0.19852675626134236309 -0.42800264119291764331 0.019514730789750925344 -0.40952181577415541769 -0.95324450034040686397 0.34064739686478373581 0.19158602073290578738 -0.42085625805993620574 -0.19618391454892256109 -0.18773893393462146029 -0.4681558623557051102 0.046322608501262622915 -0.25599048224838211185;0.26152390165688232937 0.61675933432973306658 0.19145703976493105847 0.21070483065609255102 0.38742840456843152808 0.10239325961411899213 0.079688271071125929557 -0.56339194197422703958 -0.38677944242243655903 -0.49125000929305584485 -0.081153759323535343273 -0.33924155706724812287 0.60539805476282859686 -0.12009537804761939717 0.41053934996855356854 0.23430700072997578953 -0.42073537393566712295 0.25170572021195980472 -0.35454669507144354057 0.019065908232860567101;-0.095231533432714385312 -0.14898018874383200938 -0.48604080786136072412 -0.54398040826998261821 -0.11547566797536056027 -0.62215118241769018503 -0.55064719932343442199 0.3864045427191912796 -0.45379036060255684149 -0.30354501719322007913 -0.15948390049132396551 -0.098372553911825880157 -0.49817847431956813198 -0.027123141135672594604 -0.46492587080414243816 0.045626750176081060095 0.41513032658890186566 0.12861053988035317519 -0.043130069488753294826 0.41294484462651287471];

% Layer 3
b3 = [2.0132177587732704716;1.6255669884667496294;-1.361312297727845344;1.2959319625846981161;1.0208310773163957741;0.97786861493230259335;0.55842275499912319425;0.56856293329420370952;0.08781305396019345455;-0.021691013464466706723;0.10791512991221861861;0.17247120866994919419;0.44477995152058608097;-0.8514129720637942933;0.99238810550676681554;-1.1133126775842254741;1.2716570069685215749;-1.3680917768007163637;-1.7159696824981329755;1.8733359700930725111];
LW3_2 = [-0.17446571034630428687 -0.21372002325418570923 0.62615646616627185228 0.58989315351491633521 0.19799591292846868695 -0.7154320107161068476 0.70545994078107621128 -0.01822750209255280876 -0.70418486842384631075 -0.98739969666605487131;-0.41247979827305947254 -0.49754670672126571906 1.1266562404282487453 0.32826319126333508569 -0.68942959449962915031 0.59544836457965411025 -0.82317885890004571792 0.65695491860638943749 -0.41270938372255921989 -0.57281834969662237533;0.95984703018180561607 -0.54681217096246936826 -0.56867623594126082143 -0.76832908267338118069 0.83715368692877401013 0.038388595690911200831 0.9845875776693389092 -0.80138015750198743348 -0.072667904290189808125 -0.24477438053196526324;-0.49669753542076111597 0.78346905790558396543 0.45496101829422724849 -0.43891490218214074259 -0.79617711565777260496 -0.43861718500513957597 -0.30134332203459912591 0.99467997108530981087 0.57481155954804785679 -0.28031616007475462782;-0.43708126551550458005 0.081930443222702362127 0.20440019277279963816 1.1038403477495253302 0.58920074361001073537 0.99542372490520414363 -0.66138202649751254292 0.14931504765009059876 -0.61902172309190406363 -0.045489500190902823484;-0.39310670750308629451 -0.63090531627175905349 -0.41072341771023324064 -0.61178587238498605139 -0.75382902801992501818 0.21686840985416150351 -0.82992996151403175542 -0.74800713011646335904 0.72561886083235493938 0.074749351300403471532;-0.70478586138663334992 -0.1406510450958595726 -0.33419726254574710911 -0.83222077726771115369 0.85546422938261079683 -0.81530539450312955463 -0.96125853944407424478 -0.59290000387072749888 -0.36005892113459037063 0.18825323060277396325;0.032610312025187562779 0.43542172805012779868 0.40480162426542543042 -0.95794667744609207638 -0.39181656443530032963 0.57971566808694985351 -0.33187597829334941624 0.05652349458675443028 0.4654432807823093432 -1.2412660450376113985;-0.33340216471019895605 0.46416142883097194494 0.14850671514099134107 0.251317958451034551 -0.64258502725644350839 -0.25717458422810701713 0.45934140869543155228 -1.0855089292891060282 -0.35352843875235845372 1.0945510008615846331;-0.80021133937635158251 -0.65536594585501639632 -0.74459777997448872711 -0.69842660674489587258 -0.048080446687015318541 0.48882921662254491535 -0.88879538056355988918 -0.47294157692501664902 -0.34615645632657771058 -0.66594767872394700081;0.14160145227988371608 0.74716931454195778528 0.56767220724393485654 -0.76960915881729552446 -0.62294171005484966219 0.59279653171905066777 0.24530921836091676425 -0.64222524060700714177 -0.51359554198275525483 -0.79587126852578271574;0.087350552113773793916 0.59032801847805271844 0.58059269222716081149 0.58086117651359991942 0.57481917856577502413 0.38686936762577295301 -0.56094800236913977542 -0.84297022088679018914 -0.22469558625518609718 -0.0011301334193729219851;0.95606975803934146629 0.7478524632748492218 0.34695645578004979948 -0.5559508454497589236 -0.90902940020401223897 0.16975063050338770609 0.056313761706841616861 0.41840126126248983196 -0.05385706277964444344 0.68569297647016913544;-0.29962567188184768829 0.21865912094909190078 -0.015136621098080373093 0.96798219896977411025 -0.033360001606281303177 0.95719263637385243459 -0.72398648076081706382 -0.81123324369027971503 0.54680131518191743556 -0.25313831754830129483;0.81926437115080996687 -0.67500340584331497418 -0.68567388329527489965 -0.91572357319535935272 -0.23335967100262672291 0.16733171568332932955 -0.27781867900038770269 0.84739723071486028338 -0.50831455501407118991 -0.29127784067766221421;-0.20898067534732550632 -0.70408964362299664153 -0.59677685061672458566 -0.3853899928153755039 -0.99988205490288695199 0.087686277347343424826 -0.8418094481496489756 -0.61448747429305583534 0.61223729006249805185 0.11562515804640864647;0.94185082876678272168 0.64668570677185699402 -0.32869758026696421771 -0.85002980662420990488 0.13866382306798588631 0.42692504089139260426 0.24423800492048097777 0.084671600038115912845 0.73044737663580439069 0.7628289628714686188;-0.10763119374922437699 0.89999736598993484993 0.7944173406558794337 -0.79792166947341980343 -0.81744464132818306368 -0.33244191126257688351 -0.72108982710273716865 -0.34308692174814714448 0.63759632270110133678 0.12026661783379585802;-0.51522372662696724888 -0.60848967169749490491 -0.76891253092039379968 -0.62673780935814760173 0.13596296162469212465 0.231754113004397716 0.61514617523087611328 -0.53512202259974406271 0.78362101551813356792 -0.93853016829186186598;0.60678226732657059017 -0.15680735156048597467 0.16248118797369684452 1.0260665509585116251 0.0029503418853122245595 -0.16580721342538881635 1.0037388687557609046 1.0190328495132019437 -0.003809808747632566564 -0.29767628617121150159];

% Layer 4
b4 = -0.12093839915821347208;
LW4_3 = [0.24356562133026093964 -0.81634140924877796053 0.75131954329452788066 0.4384932466713226118 -0.20314144624195409894 0.29876037266547078586 -1.0095414595440685979 0.78004548034322196415 -0.80172583465898172861 -0.7344890473751920501 -0.13552566870000742894 -0.057520120250798834061 -0.44695419255269880354 -0.040332617672751695792 0.034003549508521122013 -0.028314123170319564077 -0.45646500623666508289 0.14816676786989141368 0.27254408043146394203 -0.10955894471578458971];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999991;
y1_step1.xoffset = -2.00000000000003;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
