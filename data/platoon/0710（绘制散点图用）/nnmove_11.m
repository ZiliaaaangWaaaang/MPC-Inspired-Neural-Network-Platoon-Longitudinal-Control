function [Y,Xf,Af] = nnmove_11(X,~,~)
%NNMOVE_11 neural network simulation function.
%
% Auto-generated by MATLAB, 09-Jul-2024 21:23:06.
% 
% [Y] = nnmove_11(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-9.27187740505682;-3.65799721531803;-1.99999468395731];
x1_step1.gain = [0.104758804509858;0.259072168169289;0.50000722551666];
x1_step1.ymin = -1;

% Layer 1
b1 = [-3.9875569065837042082;-3.5515893782107443855;-3.2765756699178281153;2.9755422926444801135;-1.8737239897925732635;1.6704736017728671893;1.876328952642634107;-1.3098376120016954616;-0.054153972273198763832;1.0218369491439664998;0.21449073945894656101;-1.943309505695920647;0.5996428047552957441;1.7652190895877855059;-1.4710226459818822597;-2.0777576398191310858;2.2743882736059144456;2.0238914557799669858;3.7270214466785378526;4.0185765677435476562];
IW1_1 = [1.265354214919667708 -1.324392238097420238 -3.1472099410192373448;0.20845856650530034115 2.0514498989188623135 -3.229712660041218264;2.991037912039621105 1.2031087661881889606 1.7487736748484969951;-1.8602565918510560738 -2.246486307754180789 -1.9935486404591371556;3.1650207790098936478 -1.9696540220646898689 -1.2308950323455745135;-2.8650564364310975307 0.09715100306853234613 2.5882340738843589989;-1.8183338712958538874 -2.3850563817976424552 -1.7617507871113613493;2.7515986579796707368 1.818038698010851828 -2.4597032737659949575;-2.9220722877329108336 -1.5232886663325000409 2.0386826093505301394;-0.99156754418782899752 3.5182718715930079156 0.8876660717874078621;1.3514777612677268959 -2.3903942288054591536 2.3115510612947138824;-2.8389055215643272945 -2.6364914314732410539 0.84809818205278275638;-0.3276863430072403105 -1.7868918040940853231 -3.272376180149565883;0.53595174158420633148 -3.5483526353141980891 0.35729282818862495574;-1.3833554246029051704 2.7069410637825290777 2.4532171052124684962;-3.124767160642424102 0.27656799250529323642 2.3163562940792252753;3.392098388698654432 -1.9715788750933735951 0.22795213224231991589;4.3202647346990099564 1.3020009394790064139 1.6503178017669650757;2.8229856429646180693 2.0633642355393897461 -0.4085355054345815029;0.99838344238188703184 -3.2264141037063973627 -1.1670965717808468032];

% Layer 2
b2 = [1.6652154078260332781;1.436948087664233098;-0.99940962081692152896;-0.62660414291658772523;0.21698321372923876083;0.087928577810739233511;-0.35687923557637313277;-0.78828224546585390353;1.0545469537295379947;1.7409206026461898631];
LW2_1 = [-0.58352781089195548958 -0.40758293208819296183 -0.040621632020685950748 0.5480833495484510598 -0.30317910676314785423 -0.37366449055284001179 0.04516361002158295751 -0.17341357119125541675 0.19190606437878388046 -0.32586856625516447128 0.31081677350176967201 0.092177036813844523411 0.55742129570393195159 0.082748503029185849211 -0.43930211062078128315 -0.43679393407144417871 -0.23507072985289220735 0.46214096759854639274 0.22062353524898389856 -0.41036068945756204451;-0.35911666492158944575 0.38378253036539444754 0.099668538109730475671 -0.22029345672830405456 -0.41286020746200974285 -0.94871604949176036037 -0.41175989041427257797 -0.14154428331071572389 0.63863750823512932531 0.080740228637112998467 0.030327158716489267115 -0.39926919691185136507 -1.2438694792291118407 -0.030952747161056958641 -0.015975098144828937113 0.19262691419654290326 0.95323402648107902202 1.9999872915618142066 -0.27391756345317597177 0.4249490318314383952;0.50169083099617139965 0.44873074632839865528 -0.43769600426191196396 -0.67977579984635072563 -0.052722797189362187453 -0.38003663556818684244 -0.15952753785745973913 0.60615253985829942174 0.18428613505497326575 -0.35632120782252935109 1.009237488175361408 -0.44838785982493878368 -0.47553203649769781869 -0.0075362992382471344702 0.61677502989661281418 0.07859511900147360397 0.021461332204952526803 -0.41448813752694069201 -0.26335022794018575487 -0.010218948835401586717;0.52902918690033173821 -0.38303226338383905558 0.73796305197716949298 -0.43727160590306107801 -0.10484474277191450919 0.7108585830366107583 0.067426864190779534081 -0.75172396207662217638 -0.0014970609937382615279 -0.52063124781334157998 -0.58807190094674743897 -0.54141805763068762136 0.056569178297959613055 0.6909234875537692 0.17495565100370708 0.52419067247396300413 -0.34175055640117957267 -0.86934833077367024146 0.13843201847837141583 -0.16870973759193994002;-0.46810510838122715294 -0.10718968397322539698 -0.090146987358864130724 -0.30223314717825355835 -0.43465378613547456244 0.02182844383181695852 0.32919643843915713521 -1.1597564784372766944 0.12274631419031702129 -0.0099031791225925713124 0.080168516002688677835 0.35169340465638820881 -0.58204432356120805458 1.2023211413641365919 -0.58507545185492360051 0.48785227217379639741 0.49001792635742452697 -1.5911515384147254526 0.22837643454779424368 -0.12380074195384238589;0.60813045364037998652 -0.9812274612988713951 0.70778146734029157017 0.12502828932081927471 0.20279046077639517609 0.7434047970247295023 -0.43697769780705475462 -0.60548813879590479559 -1.087697550213507558 -0.33643940550793111077 0.071609444995663212863 -0.30256099918974221907 -0.56982541078734738615 -0.33277133747302667377 -0.13061549693983898202 -0.68801884332198881555 -0.028778839936358140833 -0.0040063219114085495132 -0.053927806670789051047 -0.5977562472907421709;-0.080299172507819344125 0.8774549643506731611 -0.21437281540753735931 -0.18304611538730225506 -1.1289457382435106325 0.11765834421591250813 0.87293928727269987089 0.68496086627606533881 -0.19483661093087872862 0.35610479007533818452 0.25594404554174088329 1.0689529474362853279 -1.058902977835552317 -0.39197138150557098157 -0.24137025912180493092 -0.29732127025184040825 0.15529734740213815836 0.69032157376525093984 0.64874576906816872057 0.50191996851278708469;-0.48745486011454303155 0.44986942786966849228 -0.2383585446958270404 0.29692670528934805851 -0.035803313804891871708 0.22286237613631165733 0.49412752347223387606 -0.1719766613413350187 0.45367623386297484256 0.84722984990208760614 -0.16084385114341678835 0.52351994615971886304 1.1538854451259596967 -0.37028803610920935085 -0.10189463154375139053 -0.43924068492864482005 0.063918105173533495966 0.27175724013853280736 -0.24935851266797184889 0.5314431301666110441;0.58921061362331883515 0.73339857416456843975 -0.32083650829363014045 -0.49752780892696124582 0.18212425294487175065 -0.36160627415186746836 -0.23131765300665996232 0.59181590726207422559 0.17809343121767917673 0.51508411404148435331 0.01717574771738839684 -0.7753268096976205781 0.25056021521113830408 -0.013058871460856054381 -0.58902157545594946431 -0.30093203968488213551 0.30675104066412001158 -0.19751032114379959981 -0.68916026879284308926 -0.066958529290678220347;0.33215395472139680466 -0.30347454986199057236 -0.97593509026539448925 0.16285918517079214785 -0.02871934439173607842 0.088790739583757966047 0.041285845573928711683 -0.065153434433180612562 -0.31013221129939705367 -0.68865009776590213608 0.14235432514241916357 -0.26449336005529167082 -0.069983725450818601299 -0.48642529534194256513 -0.50218971219157781949 0.43506418877382002641 -0.38444502640781808012 -0.069787265047079313773 0.26305020019446656576 0.098010337593967461478];

% Layer 3
b3 = [-2.0696974450817831048;-1.8478477154205792399;1.4305002088341749467;-1.2511769894308830686;1.0303754792315209521;0.87369003263606181964;0.600986998952971474;-0.37175627548794099031;-0.31494352635003403096;0.074655278669850097528;-0.16210738162978405308;0.31108888206768692264;-0.59741131022403504147;-0.89956838937562144665;-0.68340522879297116443;-1.2251454685537161993;-1.2922405263135818831;-1.418655900293137595;-1.701742602466657317;1.976230463989784969];
LW3_2 = [0.13451246634699301485 0.62743224032790767541 0.54422836121121231923 -0.014274007316220324246 0.92819991074752827842 0.58995047252178822728 0.21295821872002204667 0.41635064982867675543 -0.6240147327700383828 0.14573556779747495749;0.40755846133900180961 -0.91565313022579131186 -0.82011011764440699956 -0.58138454619149271263 -0.71852342353504905503 -0.44550015155579175685 0.61245356744499290791 -0.43767260127531842917 -0.47159109255686881834 0.35524625181782898409;-0.91160375443260044381 0.89380323131051508945 1.6201031860779675497 -0.38197372820799285753 -0.12391248204236414432 0.70117642339001928775 0.68864367834226392073 -0.27778765454130804891 0.50469225000886186461 0.18549080406803561405;0.52280754532014217517 0.62320747775039686545 0.97328074926181429305 1.2757306462538198222 -0.71536853758088325694 -0.63632123165675524845 1.1067867970227744934 -0.042345683344802903525 0.88564892409349593727 -0.17695915114624613529;-0.31409720267132412719 -1.2297608235642516483 -0.31200548565913499566 0.65105914173413714785 0.7303399576310035668 0.48812598657119621315 0.68111594219089433011 0.33491163519535521731 -0.81905498456779013416 0.16628121971824288972;-0.26726109802904152168 -0.62380480676115135363 -0.92915384753659513439 -0.23711158851808614156 0.52188246868556253943 -0.32479228834513856894 -0.052307651148302172772 -0.78169499248828799853 -0.87867006307158834755 -0.32482679473377523705;-0.72344334158352330277 -0.88856824572201287271 0.24999698008996831811 -0.66099747141878406609 -0.53236579291541041847 0.23090357948337827954 -0.11231364140805240315 0.31597279002476180709 0.63397019296721546233 -0.93351899778026914412;0.4642647677791376104 0.21713801114586178675 -0.92161165670786104887 0.47310618008669103052 1.1075581532916487504 0.61778456532678560631 0.25937503511164178294 -0.67304113663893927466 0.40760610839954319884 0.24000700853017556402;0.079255682541990168932 0.91955073032558087842 0.11171227072203794572 0.73323540885032301162 -0.62268040886090214592 -0.69290816703186353109 0.71122552792061755067 0.69271308576772738785 0.044380419496491296805 -0.020546702347916376286;-0.64018165195708964799 0.4376855635372099429 0.018235118685732028265 0.50440487077804463389 0.83597308014669724496 -0.52419406269398205467 -0.69873150854125964937 0.26141522362128660761 0.69928528925028365926 0.83050164430606654431;0.072829945623918534992 -0.5484325933037744738 0.58423445243449567688 0.44869135628800838056 0.42469728852247962125 -0.50289270179752099121 -0.5899519206757817269 -0.86101005840865707519 -0.79896652887423114109 0.4962680009302994355;0.8085363359540491679 0.58946336785248387713 0.25962712646123881077 0.33391050573059771756 0.79389090931072059387 0.41653414328616783502 -0.56246425296547808426 -0.82486343629093872298 0.68565475550261723026 -0.42140357747060136484;-0.62069159402550799776 -0.27158348917974534098 -0.15561455708012186805 0.07465249419796811392 -0.57317395594081277377 -0.26073090557578837423 0.94348759955778882524 -1.3250556352645423974 0.16262044869484948428 -0.74449727780982455361;-0.94348128998053548688 0.090588282668696701316 -0.38920057286603643165 0.028469963534439431119 0.60857835901095636011 -0.50471524506408094179 0.13419162544182625108 -1.0639358997529275719 -0.84703481189832807718 0.38917275380855276268;0.11986330230737210489 -0.55734600474705697781 0.50255920115830143846 0.50095949226578417868 0.33957187045171211004 0.16264741939294755091 -0.61445081562872749803 0.98270493905296263382 -0.14114190162493614467 1.0817864388578148915;-0.87984898456079940754 -0.59312501274955742314 -0.35763484494898462041 0.87248002730302820495 0.275459048349344926 -0.0062561511783724311347 -0.63313043839163962723 0.55805663460112731045 -0.79509598526551095166 0.0514625593063648204;-0.64654832806050244187 -0.42343503155955736217 0.95994045723702903228 0.7472587252117049994 -0.057790651092471501116 0.029443055823353814909 -0.79316079344953471786 -0.47254000092908649 -0.78885391360692369567 0.079465593663295655547;-0.33905457545041256529 0.23094841856588296802 0.73122035757538583756 0.55628106665046195278 -1.0188162748502955779 0.95388843914527265966 -0.38113778157753014364 0.025565358076910838642 0.71493972101876457348 -0.17829834079751641362;-0.21026816254861196986 0.74165139009102609702 -0.64246990069077847263 -0.80937405523887684389 -0.28394884342639870045 -0.5511663625295111224 -0.3736904417850042126 0.82233638380610096785 0.57654808912978106061 0.80493175167961394934;0.14699027319024560168 0.70934204335391393137 0.41628439287881452424 0.075027130012666198855 1.1078289668461194228 -0.18000223944054777325 0.77087303930528972007 -0.14125929021267441543 -0.43413879231641433476 -0.76897495958716277631];

% Layer 4
b4 = -0.36849635328342755791;
LW4_3 = [0.1426322980744038349 0.17723254740838670362 1.1525127115418269952 0.63956932821392953326 -0.61974370178113880048 0.099016505825353151593 0.034265680187061928197 -0.26479394515589893544 -0.12601869856423819627 0.042597633694825907946 -0.11447604972805199008 0.12110752766832437455 -1.2756334892228793354 -0.14653275760655370963 0.11969537116927779496 -0.040430744022039180607 -0.19541777732390472333 -0.01895154178866796657 -0.41941843640337639343 0.257636258667146123];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999991;
y1_step1.xoffset = -2.00000000000003;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
