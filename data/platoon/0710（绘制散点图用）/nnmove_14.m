function [Y,Xf,Af] = nnmove_14(X,~,~)
%NNMOVE_14 neural network simulation function.
%
% Auto-generated by MATLAB, 09-Jul-2024 21:23:09.
% 
% [Y] = nnmove_14(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-9.27187740505682;-3.65799721531803;-1.99999468395731];
x1_step1.gain = [0.104758804509858;0.259072168169289;0.50000722551666];
x1_step1.ymin = -1;

% Layer 1
b1 = [-3.8188638040375364469;-3.5115447873642140486;3.1365105742041041736;2.7073429941071096572;-2.2108843229203554159;-2.0527095787088325274;-1.3540443064335094814;0.34271772208003548066;-0.60967555597991163197;0.21164522664707810518;0.29372897358666838485;-1.062078172458058134;-1.4984137794459824189;-1.9156104584155244641;-1.7550100291832633204;2.1922443225972787495;2.3945279452954002508;2.9089881799260450812;3.2940226106918801818;3.5213809774531190655];
IW1_1 = [1.8804927128597108688 -1.7998767463153388935 2.7384019296693100642;3.3267578696804185334 1.3725910516429937758 0.68892423857150675293;-0.15753941451880967839 -2.4476573556663980824 -2.6823308606553819544;-1.11453040019086691 1.7607076211950027922 -3.1321844950608479508;1.3070120618524525558 -3.5128225945012103715 0.59612834921676183253;2.0243549389020434326 3.7116452083998878742 -0.98243723502049518093;2.0024557266536731071 -2.8129795227521228185 1.4894306330548445771;-3.1638963676205613673 -1.9896131893444146677 -0.97978604966400750786;1.664179805274874635 2.6356518420519816637 2.1846219641725848071;-4.0956268812700269422 0.14375621392922185993 1.5109236740738789528;0.50794666331247972924 -3.4387694363080139048 -1.6791180873623434699;-0.18864035883988600206 1.4570324002643628702 3.4331909082974920722;-1.2338648846268904791 -2.6836387087264124141 -2.3478900743663868589;-2.8420669243560130468 2.1869363449889704931 0.94697646718963301993;-2.4450640246656907273 2.7329182905137283655 -1.019135165940068033;3.5286016018598229671 -0.78687568859092549278 1.5124133483046713344;1.6353821018848222479 -3.1968015997542553741 1.3629089395830658038;2.1948567445360054329 -2.4513070841463808769 -1.9123223333205703334;2.6070054089482419535 2.8212924947525563901 0.69825634054581842136;3.7848795673746886692 -1.0624090837752915295 1.2458089397127118936];

% Layer 2
b2 = [1.5990321390673609692;1.3037404053023367023;0.95102475059088453779;-0.4641163760050888154;0.054707313742383766042;-0.073605435018014184201;-0.6000842261473503525;0.79293061722873747765;-1.335814560155034636;1.402334495285336935];
LW2_1 = [-0.59788855275764241082 0.54166483408815424561 0.32699492983903799548 -0.0056523425329366855374 0.19729234413307086826 1.0441701750312848418 0.24611195938931695881 -0.56817008480088349032 0.34118583421057668836 0.17929695997322689371 -0.8820819458550351877 0.3656898536258972876 -1.0166579010317480236 -0.29262795557255738554 -0.50121025210437386566 0.15556442887828059174 0.15225302189602640812 -0.0069575172203608440236 0.089686889672723452138 0.31185912137911386832;-0.62621842591591725391 -0.098374973245831623392 0.37233017351852931709 0.14906562369732517803 0.44735189912533440681 0.64910088640032492791 0.061739374430756027712 0.29329204831041577606 0.21278725968291872794 0.060739196638501677383 0.074666092523266863745 -0.056715867401293439121 -0.44211255774997576529 -0.23005559982193737878 -0.20193655415745770387 0.18779914105881309605 0.46116639202049203305 -0.03679240070637392751 0.64527917574291016045 -0.32905910318323716712;-0.018723053454085727271 0.26398369374442631763 -0.44561535211584341054 -0.37602296304204074762 -0.54664811378646460671 -0.066711113558026807757 -0.21193522140270570908 0.087259881933514527041 -0.51418375077426170527 -0.051028239386903456731 -0.47037757583420691798 0.17536950677582482938 0.16380727721755525272 0.35705693104487051803 0.59350853403309333789 -0.27943126113882132966 0.29276098880704298777 0.52693854876337953286 0.22151346665561277849 -0.43914430470204340873;0.1122851336280891732 0.32914946299693353948 -0.34349582173214332492 -0.18963481381079794197 0.50826568113815706607 0.64402411096725986628 0.019440867391301550754 -0.49016226398792001051 0.51569300441697940585 -0.14739548790050491234 0.003767970553078147343 0.33595496555794801541 0.4006970504548875156 0.29286980800600997954 0.063386876885313581109 0.21718669926905379008 -0.19075926549637015062 0.10928643215413055834 -0.38430542764937541955 0.75117573082125044248;-0.24626982708623054719 -0.15970879065231399774 -0.27016984878525768243 -0.12693397708734238671 -0.17960893091163274149 -1.0649933258672621417 0.87686263065966207897 1.0633405991950952707 -0.53065671214550980128 1.4043896371780595356 -0.092172498553366399854 0.41298719040025966276 0.24158200966497436757 1.2769253391326287339 -0.1794902630300578561 -0.24133294714952066573 -0.32629974872163597377 0.35848160104551884952 0.28269617771314003996 -1.3665775463662905853;-0.24252102806553835213 0.058661807319076365863 -0.18790650142741338602 -0.23520908870753476361 -0.081365717212263224956 0.66367354595412786367 -0.20925242858615270003 -0.40898019793979001335 0.11692303301851382502 -0.89787110722533014506 -0.24420271415625949274 -0.19851184135665569941 0.072428036653017890956 -0.23248062682069126073 0.28688487223392195036 0.17966646311081158061 -0.20650141157482793108 0.55154122484323819808 0.78432641427400773271 0.1164806616600531225;-0.3450218271581975138 -0.30846635125918409059 0.068574776059568423592 -0.36867994512918955685 0.41191748665429267495 1.1015148921770239188 -0.14522548843422877773 -0.19480632395153721359 0.13291873079753757647 -1.1819996491091449009 0.17360773321351671838 -0.41715885635762722794 0.58472189822610876053 0.083782117319043239445 0.27424958518586239897 -0.337002984082705348 0.19346912660229884096 0.33688068077603267048 -0.72177941520223831695 -0.2097528176569471714;0.03642432241492449263 -0.35861271284276274862 -0.14654007380213621148 0.19397615736316964341 0.2474080878834552244 0.42130255360390739261 0.14768696147219986803 -0.85290289300979382769 0.49472909648818441664 -0.46719018555961455696 0.35941655926113108555 -0.3135432691503985958 -0.17214171669844358092 -0.14995212902736396177 0.43272010756514434071 -0.62918292364832184571 -0.38713754694845797788 0.60915605458339017186 -0.082059474814657445974 0.23821990850573238063;-0.12191713254033618996 0.34969393545247773325 -0.6383479682051951265 -0.46604877940402866798 -0.14974450400205763234 -0.5832849670115767271 -0.44930217790610477158 -0.1508807314424137902 0.38973800325935531452 -0.23230518037816696997 0.076691422225700786597 0.12788859222400680848 0.4991145011753127525 0.09135351735996503908 -0.045715666711605117134 0.37509544142601364269 0.20869642665257667757 -0.51840187026302608775 -0.40747153208247693934 -0.23618042518170959121;0.62045160210087069164 0.068110678598409662987 0.062912141908916197064 -0.3512302410585690926 -0.058933332278744365862 0.11264944562409628936 0.17619465294322186888 -0.1984172875813143555 0.13776034582305762832 -0.64388787896405275113 -0.58202145665058135915 -0.38906176007604237332 0.66925657079912581615 -0.70974627268274259606 -0.39061068473561855185 0.13988152684892268818 -0.40841902241106492477 0.61264806333066601507 -0.014722694309763834086 -0.28778886584997159792];

% Layer 3
b3 = [-1.9537899739445290237;1.756469525707174073;-1.5057033382758304718;-1.248737153277372558;-1.1971974341922488883;0.89479311273975958851;0.769437912586338979;-0.52997139567783169145;-0.42713455479941264681;-0.067285594124543546268;-0.13553972753296733567;0.19639186137252992448;0.49971673119862231038;0.72777756639303681219;0.86836571776017346114;-1.146468056921034151;-1.4765234677318483936;1.5017117132486930142;-1.7250474540017006753;1.7943889978715505951];
LW3_2 = [0.02536201414010641822 0.27845724620393019766 0.57889516467427726276 0.86223654615605060947 -0.2144184659432026574 0.48463819242228306505 0.88232679810100278495 0.73045999052360943704 -0.39288168983154958536 -0.61483650913368215196;-0.83725268454138979113 -0.4085706353696364479 0.59022886771543103812 0.024011918816940761717 0.073128811638289326069 -0.057275703060426397251 0.76198772321247099093 0.47282469865310206014 0.79037043307409604598 0.77557922190365313764;0.81180983690838970368 -0.56833556966525489162 -0.45090364428941009933 0.089922086134628403942 0.23977131968878936941 0.8193089183828828892 -0.70904277046051666922 0.61159291990322528498 0.1654187577607416082 0.73458025957681416518;0.69336777762677181958 -0.90867739119164936401 0.1821576670357418215 -0.518323341395693582 -0.61672790713133507357 0.56403282975517099462 -0.55777251447718256827 -0.13459943804768934039 -0.15951875920756172778 -0.82111333989539381228;0.067709782358475550934 0.043738711727979204258 -0.68836774488194407695 -0.85340530894100230519 0.0044741194817314606375 0.52096006913798365012 -1.055229609176957517 0.66485905133391232091 -0.41295657561051096751 0.24255358148983535704;-0.70107406470116762076 -0.41574293838420162128 -0.41694503151815670572 -1.009493348739682661 -0.38801105874663754935 -0.2616922353751817143 0.14980722420049524812 0.90712537220221667322 0.91580501802391556243 -0.1310876059797120019;-0.61058960668994466392 0.53636733840032280174 -0.56966470689648318615 -0.55741648121529741022 1.5161558502403862381 0.6342594576022938524 -0.9988195604830953922 0.3204002279530903663 0.92684504502736608789 -0.058421055485770277682;0.12845282447656022895 0.13762554296257992204 -0.31547632997429253532 1.0527261180490139481 -0.8206137390935073217 -0.14037593508574774948 -0.33107471164240870332 -0.42331777105707846243 -0.80191421736334034254 0.84039908550162034651;0.93964904252611014535 -4.1164025269447993352e-05 0.45994002978458603526 -0.73460347296388495142 -0.1909475297124675619 0.49970460915500292121 0.56591402050370642751 -1.0994552499804941537 0.1651591659140463908 0.67251694017019092442;0.099011516043458966396 -0.02773550796266036414 -0.69001459167337042544 -0.59201084185730690201 1.0090149008148376897 0.839690689782938815 -1.0338415399099067926 0.48266579322835923005 -0.53238288028322966472 0.11471122166348501903;-0.14734146023844213458 0.94293013054036545206 0.95233279458229269654 0.70948409617004037919 -0.44436741961428194436 1.0008411333689639644 -0.020458669098200585323 0.64507909626637893741 0.61789666692870537368 -0.47563211223199053368;0.80312583179789687193 -0.85717794044819339838 0.36504213024156151324 -0.24018664229921038444 0.07164109425916176388 -0.58885356834917512714 1.0618194253253732118 0.24269626743607672359 -0.42100980828021222768 -0.65931161211965938485;0.70789229832609246174 -0.83094409297698712535 0.2374832748013842032 -0.8143348058738480999 0.11635635641361456727 0.53366087483988566831 0.79073160550164467431 0.14903694198855993447 -0.81766388647014498492 0.18039142895289136947;1.0592085949250138466 -0.10479993331012170399 0.089366750434178673923 -0.42297074973493786754 -0.77011733223574574403 0.22818582164191281159 0.69884253677030871987 -0.69742747220785172857 -0.80512609734018647512 -0.87777048912520494461;0.22626191459933256422 0.57550674863697270922 -0.073438453869162520493 -1.1853392760354071189 -0.42808334108320333922 0.48642202334389689211 -0.017628311347823943933 -0.42755486592204156038 -0.32813885209658322228 -1.0062575595359870562;-0.10043625990109594781 0.62900233727213095136 0.42731079066172661385 -0.89351671411542332724 -0.50644520723798081008 -0.72339415642506865733 -0.26384173214846151634 -0.73588395863788436113 0.62283924018022518432 1.0740173762360427645;-0.56292894645775160001 0.0848874420832285842 0.78691321847010231583 0.24505217912818100245 2.0457017448759522438 0.3218774887896438397 -0.64521160571791902338 0.40445590595525005018 -0.27640031625374517077 0.77557705518642894305;0.24005806048896391469 0.70485556120043757478 -0.74048486162015692003 -0.53359672443379202456 0.33034408209854648764 0.67732862602503784988 -0.88485472771129802805 0.53275200305298231473 -0.56596261796543168021 0.46984336990079000884;-0.06370481779398784461 0.4381466164700356658 -0.39543696117054483175 0.74715610239682372917 0.37321881280928381752 0.94133066771926432459 0.86041264221419822 -0.17162311281364953097 0.81506090919243667781 0.39336944925860156674;1.2020667203709445303 -0.62893385069821627908 -0.014114486153720955108 0.011883245766519865555 -0.22152663191705795898 -0.11841174813665478194 -1.0455506702685009035 -0.58013583484676445323 1.0585703920190283611 -0.30589294816745932204];

% Layer 4
b4 = 0.076251656691524782872;
LW4_3 = [-0.11506933046887547756 -0.212163923981953495 0.69562565191532566011 -0.34790880761167514157 0.12458524591747253962 0.6107489184525466408 -0.98227439265288407633 -0.40743542708273794428 -0.56405160715466684529 -0.67012264837129353889 0.83824581280847554332 0.795293674477888346 0.0059109290207837511186 -0.68268969843546301046 0.23166539664601576431 0.99095652532134326229 -0.75023529588510762256 0.90511556017407901464 0.22152172832995856155 1.0353154553332899468];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999991;
y1_step1.xoffset = -2.00000000000003;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
