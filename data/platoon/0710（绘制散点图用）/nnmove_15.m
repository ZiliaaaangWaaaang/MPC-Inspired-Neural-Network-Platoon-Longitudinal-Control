function [Y,Xf,Af] = nnmove_15(X,~,~)
%NNMOVE_15 neural network simulation function.
%
% Auto-generated by MATLAB, 09-Jul-2024 21:23:10.
% 
% [Y] = nnmove_15(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-9.27187740505682;-3.65799721531803;-1.99999468395731];
x1_step1.gain = [0.104758804509858;0.259072168169289;0.50000722551666];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.9624916353069208341;-3.1429142390296149756;3.094057793862651895;2.8672497011654680676;-3.0946233657088191293;-1.7099895314858575279;1.531362650491842281;-1.0340498370694168884;0.93282957143888911578;-0.39944733703320428608;-0.3246199966432541939;1.7373079929134533916;-1.431950422261398348;-0.30181879304203368397;-1.9334539744957479623;-1.9057439619563980582;-2.1854966581075996324;3.1531838804807037491;3.319300846616576095;4.3723363885681978402];
IW1_1 = [-2.786910112844744436 -2.441829668299648759 -0.04349273343113405077;2.0834521567985770929 -3.403203041697532516 0.28525587656998152575;-2.0995055159129174527 2.8893725396800267191 -1.0391163394941018705;-1.661328359746820027 -0.84547241068009082454 -3.0652348913514315676;1.1845722911056579818 2.6077140845754658294 -1.9212682480646301464;4.1344379274379381428 0.10131215193948893416 0.53205771898781772933;-1.6511546706863855505 -0.26688668033277479497 3.5888734208899455425;0.6799449264717133401 -3.3850702526935090297 -1.801280697832417621;-0.075701558024302534333 -1.6783701212663828528 -2.9831947412611654613;-0.37020982946028374583 3.0209814273670785312 -1.8188994990785123385;1.3229553137576008925 -3.6102492710663867115 0.35829767493618974727;0.44888940268663890532 -1.9698336525763278093 2.7459266585037411801;-1.738003580451375818 -2.727089033667522866 1.7438262892689420092;-5.5498562211045703307 -1.0358048799751620184 0.76197883980553537953;-2.4585594939933326231 -1.1713787548488421297 -1.9712142160948349368;-0.84248297094074231506 -3.8302094038934160203 0.10906896849826948348;-1.0969166661792437711 2.396441245842861445 2.5567188516635290796;2.0630739760253300474 -1.2688590307665439383 -2.7637322595547932913;0.7257045874872103397 3.5713352625115772909 1.4695764009477791934;2.7102697013807399706 0.45660705212259800057 -1.9290092321414331611];

% Layer 2
b2 = [-1.8247373045285826265;1.1213463286030671551;0.63788215814432813744;-0.54196112103542315452;-0.48184542477687519746;0.085182008716089718803;0.62585510778469488624;0.62782757855742266084;1.3857683558825675263;-1.4321065697995347676];
LW2_1 = [-0.35283394584059324384 0.12633743334460920127 0.0010604629218821182493 -0.25101736880013231223 -0.34014923635617594355 0.4855703595063061706 -0.46324150980006495448 0.39946585217133895318 0.66766673809416821062 -0.10887926999351493773 0.53306024685745601044 -0.29743594022660085896 -0.40174491385911936803 -0.021822910154744964289 -0.30024942363163342751 -0.094125091286339640506 0.39190455352977593417 -0.69704789670646338795 0.50659459446681742723 0.09436711717311092873;-0.15407999557427784487 0.50937542000586888413 -0.57663985060510669634 0.32299233155768058978 -2.0587273611145113783 0.13860882668051657807 -0.43346059478815901489 -0.18271367632045312779 -0.23253289248644348763 -0.44948138171699159038 0.79774609690460807077 -0.34109396384278750647 -0.13161599838955717612 1.894837981533622262 0.210837362507282855 -0.40535837082529985187 -0.11222407398051834071 0.042746405236086137958 0.22368019422787649431 0.26532051973100917452;-0.58263487113389511585 0.088564374495815417765 -0.2448507280972474498 0.8046645383608171942 0.34372222467323343409 -1.562002459321492065 -0.027920559407584422118 0.54313005317855489462 0.097720772934890606787 -0.84674179698874174615 0.066762533511015922927 0.16198929004114570596 0.5348519935546652837 3.0388263946831406415 1.2893705099663235192 -0.29366181119475204264 -0.22250706914686921301 -0.25105143145282798889 -0.30144322723772815076 -0.65652507095472723009;0.15150795128090471797 0.49011591564552781097 -0.25328165732113394615 -0.37120505715081975051 -0.49139052524406306999 0.88357946527186936869 0.27000461157802552181 0.10211000002985133606 -0.77276831444032589857 -0.86737264794526858225 -0.01407675667256965378 0.21998095164364359078 -0.96329213920087797263 0.91158469174170553284 -0.46923409809277977223 -0.2736373294378150467 -0.25088447850184730781 -0.081350643553669568786 -0.374401323823285892 0.081265723773012152331;0.089963255015977267037 0.26278549089108010905 -0.25971170724287456766 -0.73775881876218529776 0.012707288102910729161 0.42405806907579246534 0.14195441044637471806 -0.1235408937964117132 -0.059504619203718148168 0.1822815214079447077 -0.74431966308294539303 0.14480240882647629763 0.31186919389671646785 -0.23665055923923614123 0.12732002701836264702 -0.28948489938540056254 0.71618592560010019277 -0.53286485825166285402 -0.5219139299194252013 -0.54362980605140531765;-0.24468737248141222973 -0.23964338658247955061 -0.38786064082335031111 0.17473919551337913081 -0.24860309724094240003 0.21022372122998256305 -0.523629028768969218 0.55266344347660445457 -0.11055678353111542123 0.074909501651668958244 -0.40327513621419519563 -0.21933579529257496432 -0.21352035574020297726 0.33607444151177545688 0.14391022175704040742 -0.22321243154652833929 -0.085403536723128684049 0.50062007139625808172 0.11361149969545336624 0.44361473396498357635;0.47132809967359878822 -0.30057633278813844502 -0.025312988686705565483 -0.2502873534061533789 -0.13291477400120307872 -0.86387698451419814294 -0.63041852430748623881 0.3589878698561274617 0.39051734103597729453 -0.22497721604990214561 -0.1803156442882813959 0.0096487556334184203244 0.62270158430157473983 -0.33681959557345086953 1.4128272517958213594 -0.12552539644157553744 -0.17419838066972218038 0.40533099377847725542 -0.50661289659591612899 0.47761410657814262759;-0.43211067561247934465 0.36374984965182316499 -0.068217636267094164393 -0.48148461218168164821 -0.62643103854690129761 0.30066441944672822606 0.82512488043286269512 -0.3013605059350155102 0.52936716323392030148 -0.49202797104787421301 0.65170001209965733313 0.31928466094171292777 0.39801729992384826673 2.1789518391911237849 -0.21749412935395395774 0.32886808061334993347 -0.26600796810448273932 0.16681318505550460363 -0.29063299738916137382 -0.14614791780677527377;0.33030939537564313335 -0.87476702605474376817 0.21605725676234333044 0.040185904507778341666 0.26149520516434310302 -0.85761005809425772117 -0.58474000126035019509 -0.52426365507437611146 0.23130878103659335832 0.25594485765584573667 -0.56831113058120508175 -0.18695314414618421917 -0.21416670749864577528 0.19569101946270156533 -0.26858502207111561999 0.33483950015740138184 -0.33529173532910322431 -0.18385417981192073156 -0.42258637207699328853 -0.24031482148627278383;0.050235816236967198445 0.28722919872068719549 0.59397227223606630098 -0.37055866832486000773 1.9956357855123210143 0.020594621878837159751 -0.49896882517769763909 -0.28883888876302743487 0.24140185853127829607 0.044893093301128221551 0.094910976430025204009 -0.025361181624338986762 -0.50814785437840248594 0.96065843333746603339 1.5029383196899273045 -0.20637578079360718863 -0.12534162864143760796 0.33282062646894139402 -0.51963606511508153574 -0.21073040584444152623];

% Layer 3
b3 = [2.0644034402710156328;-1.427995406645709453;1.4098669321486669848;1.6746044594106801462;1.4070123222520269923;-1.0558005220456063711;-0.71781531215596316997;-0.20812770767233154667;-0.34622127524167262136;-0.33391990605932503344;-0.24139491013555622323;0.44316481187019085564;0.73652207506827016559;0.46472420774628581119;-1.0000118574481240419;1.1929603400824744242;1.5263640816650958509;1.83650176971770418;-1.8792547498398608496;2.1185699203831314108];
LW3_2 = [-0.91631213473952510817 0.083214325986358542164 -0.30090558450435006543 -0.62743307916739876617 -0.095550704548915871284 0.36575444667993278758 0.98988037238094739312 0.30350290023455661625 0.66844421496263828342 0.52814991587849757781;-0.23073577311448617566 -0.80719870956554395924 -0.71535692808488637873 0.66140388787962656192 0.10243500244146708233 -0.28182104969229559988 0.86749893332604821605 0.18650325974275103191 1.0931268188359535287 0.68728992712039271851;-0.58136617808445179012 0.084436376325837989021 0.81147811298949368286 0.70792385129395285492 -0.028805701596256477748 0.66296596607382618505 0.69081721706249221704 0.78789319758168419039 0.65075202339245374894 -0.22691814784966007901;-0.28709318117654974989 0.64121166632689119425 -1.0229617508035120377 -0.30006990751441742216 -0.67907194851270380465 -0.40663789153444518387 -0.61755638588555783475 0.56813253629570470427 0.95615770879172456986 0.47197860337679786724;-0.37234794932851628113 -0.35909046506563796486 -0.46151084096867750484 0.67295382280174653733 -0.41074006631196224859 0.025292256430322512806 0.20094718331935312872 0.75776407740193685303 0.87427133266256651378 0.94947323031328823006;0.81178315772568254705 -0.11557592037951655572 0.52483658327548921019 1.3039252013700142196 -0.55516875718662705985 -0.22178542728033212583 0.26399646802236720333 0.67003770647623972501 -0.27223257743813977783 0.6481461849077949644;0.20705435147384540495 0.27459031772223790879 -0.061675268306661402973 -0.83539509522846777667 0.902494721763105745 -0.43554225185166089984 -0.49812628021953836432 -0.85732181180112854157 -0.12974580876730937296 -1.2663579456745031049;0.28260465770905446314 0.48032857609422063838 0.59521171838990871716 -0.58535900597524936906 0.16836653006513901953 -0.91951350699083500562 0.68187474429660555053 -0.83552867620223114642 0.091516713093618237695 0.87514149551417386164;0.8944908246900300508 -0.57087475076746718727 0.06863572808338988529 -0.66470707144261520494 0.5218579987629854422 0.96517599173778001465 -0.11072754152924661752 0.29120611780739974472 -0.34301997531393274565 -0.24805715353281498903;-0.54499719129971757603 -0.61084862132052786254 0.34361215502218239726 -1.0350651825917209781 -0.28955767701997542352 0.79158982289871249183 0.10827716973143919343 -0.46467732502494263347 0.23246430097840969919 0.92240306635105928645;0.25621663715851888954 -0.92618499226732053931 -1.1228024696850325004 -0.71441523297998643649 -0.69069951105465676733 -0.44638233961766615732 -0.051966323139829684319 -0.65961901290087865402 0.38855637027702316644 -1.1595753778116908439;0.63081437681516450144 0.47749982836607790526 0.0062115702091873770813 0.59304173292395678807 0.25721163500871963015 0.40215135310348887332 -0.74973533670060188427 0.40385174503086357367 -0.15805899353127475515 0.96194479432605994873;0.38623862644166445657 0.86495524894515174452 -0.90572417284133932558 -0.40369778050675797498 0.14258879639876076428 0.70082702880707881121 -0.083622895780980754932 -0.6084782205302045055 -0.52071934794157348492 0.6501258614353994103;0.89324731077984842464 -0.58497523920616001369 0.42409751463084116585 0.63476676300766810002 1.1875702345612255684 -0.8440450232377976203 0.47101058274907187107 -0.15094180630190648373 0.2647949298790347461 0.50623095309792953689;-0.2829175465243037868 -2.0244689149286676511 -1.4425006388209420383 0.33714488182123597548 0.2677577741102327713 -0.32092424805614688799 0.42526551116519156759 0.50727258106362060897 0.4336619417986389835 1.4914742850683624376;1.1200618232645511707 0.32267423701673497716 2.002677946113926577 -0.57228227538036446909 -0.026764912322850092224 -0.57600473833619947328 0.45222568010475272526 0.70268310816958556853 -0.38492466682425519053 1.3865322133699211626;0.22865600815230899268 0.64411618634796985461 0.16707318669182211202 -0.37502893703252349056 -0.69016701738479269146 0.41866467293634918034 -0.17649682556028081781 -0.76202038064071908607 0.5178077677610760654 -0.58982335071136504645;0.39598801308565090284 -1.0610216963017560232 -0.79474509804062576368 0.65439004783205034776 0.21714560178858233197 -0.0017841544802447602269 -0.41075905061255446604 -0.17041881456352822588 0.55931091967849022595 0.40286618604443757974;-0.47062925853204728988 0.31127952518263130033 -0.86862272769133852535 0.56703054478129522042 -0.70698210535432948198 -0.26852865133918157881 0.028729976617475762313 -0.7163108117637155825 -0.99835618756884625391 0.34793662087390725413;0.22511502876358877034 -0.092363674047787266974 0.2454082082052622682 -0.48777020676646221098 -0.79513538170338660116 0.070913383080200675934 0.70156644689637759349 0.24993806918960301267 1.0527169299448790873 0.72674944411099839936];

% Layer 4
b4 = -0.48429162208382831034;
LW4_3 = [0.76301847883794327032 -0.50010976207868773624 0.78087108221136802833 -0.72055736117425772669 -0.34613285152363409969 -0.63712453590082540611 0.58147793933269720235 0.2780967289223951755 0.15974848198952823486 0.08257148743830639015 -0.66337374413439564869 -0.073047485841457829303 -0.37649815390571356177 -0.15468763532484142154 0.74007446349656447193 -1.1222244688816653824 0.44343934601553480768 0.36286795661353671294 0.65518845973690409412 0.079951513065485341203];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999991;
y1_step1.xoffset = -2.00000000000003;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
