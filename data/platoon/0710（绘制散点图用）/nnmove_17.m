function [Y,Xf,Af] = nnmove_17(X,~,~)
%NNMOVE_17 neural network simulation function.
%
% Auto-generated by MATLAB, 09-Jul-2024 21:23:12.
% 
% [Y] = nnmove_17(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-9.27187740505682;-3.65799721531803;-1.99999468395731];
x1_step1.gain = [0.104758804509858;0.259072168169289;0.50000722551666];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.9103526614401711292;3.2162593369682923594;3.0353395605402613278;3.0365786619636105925;2.2394540958708084588;1.9109887907697755693;-1.5142520283045370899;1.0514163624467041114;0.40724300303115279487;-0.062163204742921779333;0.035011894609412064217;0.45683747202876667792;-1.273042013114363602;1.4024854687929562136;-1.0838497640657946963;-2.0448941768730470869;2.5000540940240272292;-2.903893577309488272;-3.4429127426569543502;-3.8934418224872380243];
IW1_1 = [-3.2274475141776650666 -0.34866866246892225245 -1.6208191459670606704;-1.2511783243108518526 0.77402077973099603359 -3.640035104885746442;-0.96578498404592760807 2.5712671310034829197 2.5643085854402327683;-3.0298675423448555577 1.374739760233199215 1.4218286130456578853;-2.2961817407794664625 2.1243308484270304604 -1.9948848942298746945;-1.7194259814279635457 1.7190365898879693685 2.8378623596061207657;1.6914319410982108227 3.4089081601871562555 0.55959752043233945695;-2.5612390416991219766 -2.0171440089851904176 2.0224767567969230697;-0.56833123961601661467 -2.8668839460109447614 -2.5049978490636513051;2.892430424049992066 2.1689380761167722511 -1.3209565912897218709;2.2983187480121922697 -2.0626379588459786696 -2.4705263691422389982;1.5452346167868042937 -2.5238006240038299843 2.7065642238151563781;-1.5552628173776958942 3.3647639991101332413 0.16493498684550411681;1.3650736084625474387 -0.21042367346756393753 -3.610087844883048902;-3.7930114970862955914 0.69394703437330140794 -1.3978797844555197472;-1.8502207312705489795 -2.2044268946681619958 2.6472582800134283332;1.7122080681273037506 2.253898660981743074 2.570317875270515362;-3.4883955830172381773 1.4927372651854082797 -0.901250949364743148;-3.3073941013603791461 1.8719173954399894733 -0.78269346316106513939;-0.22370567695508550288 2.1222399656622137343 -3.0086405877286326316];

% Layer 2
b2 = [1.4641502222248845566;1.1743795109886376871;0.95105560849093950804;-0.25018488436520058826;-0.28484966137508394013;-0.27196884217809685902;0.66712124203867073646;1.0470060081348318004;-1.1911520939756152782;1.6558932000787691674];
LW2_1 = [-0.38051939580435245603 -0.62667689019349492874 -0.58331821315930842964 -0.16328543514222126909 -0.53427174815555489307 -0.72161904769343998556 -0.71880504189999749887 0.80932647494495491003 0.62272199474492706539 -0.4578050022664503782 0.9454351300573222705 0.041533464379115592191 0.020265944175057028914 0.090941163144036510357 0.53970591707324622188 0.24248547401589296002 -0.12043390892822163074 -0.2111467920008753274 -0.10246758534478025982 0.36552999468357355584;-0.14865469415730028779 -0.21769691948745872878 -0.56058255932019807055 -0.34482265476754436762 0.028505588797155395619 0.33703306860433818182 -0.14736922881918421147 -0.40812846133070612709 -0.40914107269515570531 0.080818079965371977802 0.28111552912921222713 0.44069679462462174602 -0.35612735107874426976 0.65987569459966310959 0.38779792608881313853 -0.55136910808722738864 -0.51850152056433396197 -0.068411223180591021475 0.61571184572032289228 -0.18452643224773460084;-0.31957860631997847545 -0.20599619052143325337 -0.24545130919333407737 -0.31492933616449403367 -0.068380265578116453118 -0.085323948882137692906 -0.34836996564598249337 -0.40870444518696902314 1.217284350363003087 -0.40016350473017431311 0.015344380719029548921 -0.44954365096234477628 -0.81047639617209155105 -0.11137842756803070787 0.19120558394209563602 -0.13018104810645622638 0.39737496762798407701 0.64191977645329134639 0.85458199798101963651 -0.31281704952074734782;-0.040293990024533737904 0.31295461124249068785 0.51636014806226437912 0.32097862630751783364 0.89231589928070209616 0.15014377440143858444 -0.58906487386141259677 -0.16657784718817802982 -0.56266428435120519058 0.74597752558345242768 0.03922485453293503288 0.58665493517749789376 0.65408426980124800831 0.24129827376912871273 0.18050309077177631445 -0.26400997668433151544 -0.60423553410926733598 0.72281717501645648127 0.064035117524486984131 -0.26255969050265659526;0.21615496185751439939 -0.35461205731157646737 0.22351240803132152446 0.43961865817260892264 -0.077640521763094647034 0.35189287002988689501 -0.96601525685119637998 0.2916518941491361705 -0.043068606144203241959 0.033395122354417786092 -0.58233471014531423826 0.21845037637591355195 -0.43084014220129873696 -0.2512119417632116547 -0.07423737758900048056 -0.2566509462725166113 0.41268044623118305125 0.92688750917140760865 0.64545070779466828803 -0.81114023836033755099;-0.52406701652802578639 0.5893641200423668236 0.17565400937305997164 -0.23817741975800893472 -0.26943555603356472705 0.57287351408886066917 0.21632569288523795237 -0.46816377372392242728 -0.17904370015929488291 0.081106109552374294758 0.66615146549450177105 -0.063243148662629825041 0.2825793040372096554 -0.014679610337768753126 -0.098778552080838730176 -0.56198258269643242002 -0.22549903651135297378 0.19475991839404888095 0.0016296502075592474157 -0.023558996302102855336;0.15414144928108197696 0.0081205281343066544608 0.5062311103038147353 0.29427963868723594487 0.12182303916864239968 -0.12793238564135203661 -0.014459891267944988136 -0.62561414472771115225 0.069184675851747451381 -0.29637696605990171417 0.75712870573965640464 0.092533788697714280946 -0.016267471305315063523 0.75383148998860427525 0.78184046412604468745 0.54805593318697531924 -0.33783309435773906104 0.50433408116036337887 -0.030581671215501975147 0.45507976885794737543;0.15018129034634461472 -0.13474857591072997298 -0.19602156925792599274 0.12706543986863427786 -0.34197723931144102805 0.51969206208021245796 -0.20694437783384442286 0.11601279307290093823 0.81441911082630857877 -0.39547251542862732476 -0.54632815538985624038 -0.56739619003837860056 -0.64447769060148429876 -0.4489747204479782039 0.37808996350697415822 0.34150317939099422704 0.66021354325170533706 0.4103156680916760779 0.25438397711435334347 0.52507454297947087074;-0.20836758683497069722 -0.19498779432776833231 -0.1287204536447578429 0.20658421971615323343 -0.24298958101426976208 -0.45046177723316765951 0.43054936844685604003 0.47530232145200146388 -0.69475558689484484542 0.45944117276485590962 0.57720617143886832068 -0.23815969705614098428 -0.34025963831713157415 -0.075951658467082350246 -0.53209014980906510495 -0.55279746729075951439 0.60152433650697445522 -0.5207093789462754474 0.10231432143926939837 -0.55088658317282501731;0.64180992483238141766 0.58151545745427846157 0.53368058595989298354 -0.15187128328139762323 -0.49795496473436684504 0.57913212575542860616 0.341438954505375869 -0.17021420819807361879 0.31875555881347333864 -0.14985316254965969085 -0.18392371043594665792 0.24320840894838310908 -0.183523521859574823 0.32851246852856408331 -0.39352647807829460591 0.30316158130804982118 -0.14481862331672989974 0.036345738089830506579 -0.1179391346815808761 0.13301596130709725241];

% Layer 3
b3 = [-1.7463818256668452999;1.7934474372822337696;1.4973988788829979413;-1.2717878379402294264;-0.86734545013635633293;0.85917065129912306709;-0.60181608250929763404;0.49827967396485345342;0.45330824213935816402;0.033830629946075121972;-0.15527958274528314009;-0.10477989552763652958;-0.53400656897742615481;-0.66477244271814461829;0.90758654994371490421;1.1632486967887625262;1.3750338204756831217;1.2445573452317109098;1.8081704201043518054;-1.9025031857303207339];
LW3_2 = [0.57991594235242893696 -0.78345174861769995012 0.45744930826521962297 -0.20160242534912831136 0.94022098605373960467 -0.57044702966794824661 -0.76116694409431218116 -0.88409171192817237461 0.28745440372316238831 -0.11876020466197986791;-0.099583179803500163074 0.68070432164539762532 0.61999397558560587207 0.014188714715440923358 -0.86445428663962131655 0.43612458725426583861 0.73908009778844907522 -0.63974903494518475799 -0.46641483227998875583 0.50018790336627616533;-0.065859217315096404977 0.73557073360000324591 -0.73164802931930861263 -0.28686573574609602888 0.21744577553992433527 0.67663307946172568386 0.35280632607946305068 0.70193183238633671817 -0.77131104100135872148 0.7687961092866668622;0.65831106772308156661 -0.58866869155780043865 -0.86656876064492238676 0.29443487117170691336 -0.66714274079276336682 0.33612233016545289832 -0.26717066140612849567 0.2445573957082463612 -0.69082674815232514298 -0.91463796589600032672;0.22727870561664986759 -0.9838553114963077828 -1.3820202888395498597 0.37071558184165631644 -0.57419666684333403595 -0.44729750327502532103 -0.12572629013416400379 0.62678894582309574446 -0.079774699214190003538 0.42936619536090414595;-0.60509346161269661479 -0.47290398528819288515 -0.88927141394385056383 -0.35908772812753386727 -0.64206773353222412748 -0.5425012700457276793 -0.28228529359378062846 -0.59883787576499436511 -0.52014202294418099282 0.41459953117518688614;1.0991630495154804947 -0.64064772481890608358 0.3192306199353644458 -1.1227558937846615628 -0.088824385459679508492 0.54788218060674220844 0.36890662646721794626 0.25580774718070448115 0.64217000182373129569 0.029027607465245405111;-0.15123681181776638116 0.75467648282619603783 0.014040634568674978389 0.71634093991779401733 0.89286366987164278441 -1.2008044335290111171 -0.53573265707004458225 0.511767330315822222 0.40802569467159333083 -0.42704886081105170037;-0.26048339437560513732 -0.67358290757213501454 0.087367201229147317676 -0.44106037098128214602 0.080495693709982704678 0.57750496908461013135 1.057753775872921187 -0.55664504959947169738 0.80041708841034409083 0.68005459396599543531;-0.36319693633966082524 -0.80221006058873123301 -0.9222004062851546502 0.53294248012693690164 0.6165007485206335236 -0.53166031658846979457 -0.26000543840696721531 0.70646735296438678553 0.63039992444881209899 0.012381498569748364269;0.82315885311308811811 -0.12497734186458540895 0.64552589057902409753 -0.57621171281175054268 -0.073096286084181810727 0.8734126819798814223 -0.43268651376826994248 -0.11000431032202739878 -0.72543860959407546751 -0.86475782835693892903;-0.86161844507455254139 -0.20510313209941055668 0.89725380581474900588 0.14712737583289786647 0.33081448757701398256 -0.82360285429094459708 -0.69176102220905000273 -0.62113348179404848093 -0.80703726854954371817 0.73814099404992117304;-0.18899664736793669872 0.71987544377210455071 -0.16686178091684097935 -0.64573249126198029035 0.60056150766395666185 -0.46704784005551158721 -0.33839585853189374509 0.81942929790498719722 -0.58087368876658174166 -0.85899501306090020325;-0.013198682687606613784 -0.42065940302325488531 -0.07329354888373001975 -0.75666271234179027783 0.84527786736457266592 -0.717538435600738711 0.65212956984386760695 0.59645510604559970336 0.25832886036199070867 -1.0221790895268285659;0.6999529394185391995 0.60080471418808112372 -0.75088296625186934374 -0.67040952803420961192 0.045425691834814756198 -0.77828044459151624057 -0.31141312507913870844 0.44867203562924679039 -0.094348800532701684873 -0.57201189155617837567;0.60995121186155298876 -0.67075835896656266222 -0.35179444645507468303 -0.93840243966041381185 -0.38791973916529426392 0.1014886950647425623 -0.4951543209330208084 -0.75898029154974788746 -0.61485786098321770776 0.73525197162712607746;0.27611022785778438493 0.08722033748218160909 0.38895152484911305057 -0.70307870990594745209 -0.043488192964963097442 0.69727663459400912593 0.031566957083370233983 0.26728490269686827618 -0.8433854814328808347 0.94426356552436652159;0.86649849540632106759 -0.39391486269184927682 0.15306761490648046475 -1.0860327209522775416 -0.36819753734452614902 0.26609491044553235106 0.61423440725848854616 -0.7318654648605443791 0.86132984813254331868 -0.57534347110293293515;0.72503788381042910682 0.97757390762683671337 -0.37032464695147260247 0.92542637143377526332 1.0018596666176979859 0.24103725873303233351 -0.4729607308337752114 0.33034881667904614222 0.3465099251684151116 -0.65525669851353995909;-0.23006327334059231693 -0.37736869961818675367 0.002607803462664516625 0.50036324960231637338 0.52668125360602535689 0.064003394343539743438 -0.96421431665470325179 -0.2826079141639603054 -1.4102863639453939726 0.51205129164171425682];

% Layer 4
b4 = -0.20111859877728016643;
LW4_3 = [0.20050540195242885777 0.32143936430245328983 0.043721245087449345235 -0.37936218162091228656 0.54068602362761275515 0.31469582024921011199 -0.33864164065099838785 0.31430879957987833961 0.57398108018446059031 0.2416378039696483182 -0.57153918608350462449 -1.0507712379031710626 0.042170686478306726452 -0.19509605564600349115 0.35305730448887046036 -0.25649816132627917264 -0.42543349309269140601 -0.3191414894737106267 -1.0145909015520828689 -0.76995980078803416546];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999991;
y1_step1.xoffset = -2.00000000000003;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
