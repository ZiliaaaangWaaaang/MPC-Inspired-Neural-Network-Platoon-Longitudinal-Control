function [Y,Xf,Af] = nnmove_18(X,~,~)
%NNMOVE_18 neural network simulation function.
%
% Auto-generated by MATLAB, 09-Jul-2024 21:23:13.
% 
% [Y] = nnmove_18(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-9.27187740505682;-3.65799721531803;-1.99999468395731];
x1_step1.gain = [0.104758804509858;0.259072168169289;0.50000722551666];
x1_step1.ymin = -1;

% Layer 1
b1 = [-3.8604261556157215551;-3.5619352247861022498;-2.5608189334595437003;-2.6569701772370399873;2.442930963929573096;-2.0909654819676717352;1.4153340822837134905;1.0071419179187526272;-0.33682254838211045378;-0.026657551671593296416;-0.0042740688481731695103;-1.5127677346047410101;0.879839680769061383;-1.6924057433187429389;-1.4432626990312693582;2.377718947065627475;-2.6669254747774999714;-3.4442513678136044142;-3.7724319182947265716;-3.9027992992345148515];
IW1_1 = [3.5048480266193773325 -1.250022225298445866 0.21938927197495022847;3.2863503740455368707 1.4898851663493746234 -0.65356649238769959354;3.1663520940355325273 1.2248077711629472564 -2.5839847308185297514;2.1141995524924590555 -2.9346596459961795667 1.1410018230148395446;-2.2665700959944703463 -2.0545568762567802956 1.9979462611056526544;1.2402072523257219316 1.1373011302341280437 -3.1203306186047661264;-2.7388211065866756577 0.25895602282184454479 2.4856917798841364764;-3.7873758788782585505 -1.215233693124573966 -0.45443763782564783327;1.4955848145038377339 2.5126734004121931143 -1.7881353837728704015;-2.2329038650152552847 1.5545384993122706163 -2.7650882261539830864;1.5095475937085187645 -2.8386942682569271668 -2.7713366555804550551;-4.0664825069616350461 0.18622061376753024087 0.020751338051685469521;2.457888440578187339 1.5105162728788481541 2.4963617221677991687;-1.2598132924424934043 3.3720626258541330778 0.68275100455230885999;-0.765275764442798212 -3.1607256786397122106 -2.5677704456216536855;2.4031681042724581943 1.4561147713853599406 2.6714124771325411523;-2.7125431393460037732 -2.3587396754396667831 1.162875931173012356;-1.5974193588247682651 -1.7501112232703111005 -2.4925893036804329661;-0.1071219050958666652 -3.2915166111708642482 -1.118371722930077361;-1.1498431828357307261 0.98289969742145721909 3.3593078306377504028];

% Layer 2
b2 = [-1.6938399991248058729;1.3637187282187539505;-0.93616597018866021251;0.7134281995896981643;-0.33794404816177125994;0.10288368110398948829;-0.46999858253225201832;0.91047328189891896244;-1.3259563346244036541;1.5589674134802555816];
LW2_1 = [0.42426781170766014739 0.35677367574341101175 0.064760448390609792746 -0.03506510181904485407 0.55627640244043852213 0.36431175856723224671 -0.38302180083693326829 -0.33232259966785288041 0.75068573133924731966 -0.30741553374039970459 0.01019733834671221126 -0.76145697422017033507 -0.42309946571048223651 -0.57782713554792264343 0.51529683768075851269 -0.32398771301808831913 -0.11692182960883386322 -0.51297483837493174086 0.088422573374951823899 -0.059313366472379010219;-0.62952625849387833235 0.043555678790215567042 -0.6544493040384643523 -0.51574469344212259259 0.63764764813396035414 -0.3392167560770904533 0.2787785476107027538 0.35900188999214532881 0.54967066293256783283 -0.15445382509964478146 -0.23522529107916073654 0.090609667624101566941 -0.31576225269835572762 -0.023196347624280851812 -0.03538767433320714334 0.17424120190718711543 0.18903321800776815009 -0.47305474278585563086 0.12347374321181789347 0.38542844705889772738;0.13294182502409765401 0.042508855761371144855 0.58470643274215994278 0.078037167882965691179 0.44992159534590053793 -0.14886821109505946059 0.48733883680372663827 -1.1821971318088926317 -0.25898902778735416463 -0.19816700352677552033 -0.31359208163751917109 -0.71197825849731355419 -0.11145030049320900356 -0.30727345458190591376 0.078728752321317568841 -0.2483305559551552133 -0.22661108121184359021 0.29717722796043849476 0.25008803443473914818 0.2739577690862775583;-0.54416055350013692316 0.10984639826239944727 1.0035194821888970829 -0.37929562862723126271 -0.41764494016710740354 0.27214444979705698646 -0.65775149373947106035 -0.75757323722948777256 1.090120131044216123 0.069915884982360287925 0.46087129573623625278 -0.43839128552824380147 -0.15409408108540609272 1.1559283291952133776 -0.017102900611299483996 -0.66801659807270152847 -0.77107660919872000882 0.27227887239379111595 -0.6537299081957047564 0.67877852102966862446;0.26335165264104415384 0.33888034712520082037 -0.93588034608482539856 -0.49048315290722460658 0.78291144257433598064 -0.0028738307476682766438 0.70628770787122441277 -0.63762242985161909914 0.17309484675330830128 0.12674980572355729058 -0.68774916136768526886 0.40905152312955306293 0.38777587871929414254 0.21307055190643492404 0.6461232714792999321 -0.16456916055773015972 -0.89317682913623797081 -0.4604921219845052871 0.10899572241050735355 -0.39932194875158633085;-0.33546833109304230458 -0.038432902719060732522 -0.033161927586345528451 0.11175983610877214536 -0.63038930013139293784 0.23551135607611062284 0.63965014164379085937 0.53174396731460049637 -1.6739199085512315168 0.10488481589545277373 -0.11018403146823306515 1.7026076222662847037 -0.7103322150663086143 -0.45544770795754729864 0.13066478386815968959 -0.64613148173867451796 0.63805135369687915325 -0.57728714278142978511 -0.49302266243144338143 0.38683652034059545777;-0.082594715810568847258 -0.55596759873213696945 -0.24759631212829177893 0.17937911949576834658 -0.87616098809058162722 0.60649418532327081799 0.18172406801498880435 0.66956122752888913574 -0.11982134245924659643 0.041013785048630915786 0.34156272950970373303 -0.41247622994201044166 -0.71336638097161264582 -0.52198686219974466116 -0.56757179050805339759 0.21437692810326472448 -0.29435823662520915756 -0.55919221303078614493 0.0096572803180245674753 -0.30562209288262837115;0.66254654489316056054 -0.096928301145408124473 -0.56615025627676318631 -0.72189443744350145771 0.65714296998769339275 -0.13403638638768444746 0.61830416374025598536 0.39195604732908334578 -0.27009043247520136966 -0.000342056104997098126 -1.5035368248819562798 0.9315231855136468786 0.59017113212170824177 -0.24543864481848504111 1.155317862117405614 -0.77365532280825077827 -0.62944496369556024451 -0.24487522688192006615 -0.094044509913457502437 0.54916576673070793824;0.022829026089760614399 -0.23247509405077051992 0.52161483102266703593 0.74230919891909286079 0.52829589496635986912 0.24313681155800823119 0.45980803900782707405 0.38156192275691647176 0.072972211286713023481 -0.28191824536929366296 0.18722273581193304981 -0.53153218018785930443 0.4447151262657996762 -0.56328217515466483256 -0.17632863670887705121 -0.29398217489704514538 0.26085062839278827518 -0.36548993156960180029 -0.25288134892170721635 0.020142100223885860827;0.41826733774819002676 0.065547891741347757977 -0.71582068744585491959 -0.10711312382538434873 -0.38972622434895021204 -0.033337402976653940367 0.9810128463826545131 0.041932323351689289315 -0.045387438764338497443 0.083200035982614412022 -1.1712155488136779535 0.51033066954576167262 -0.42810545633304653013 -0.19426633072672472302 -0.35903323700595585199 -0.53334219903278179409 -0.34280603825222838443 -0.082405202001362781727 0.41506372584918915791 0.34629949102797380478];

% Layer 3
b3 = [1.8992649426007788271;-1.6985188150218581971;1.5534257602727148395;1.4466694529530286228;1.0104233365433936687;0.91614604586411485521;-0.66544332558341179329;0.54736918325698158405;0.29668280473800279218;0.23464802233947743004;0.1089525090695985382;-0.27025808558051156449;0.47757309972868366987;0.9449037915932256837;0.93352737125965989939;-1.0856639064023165808;1.22951578001339068;1.5696266800971903077;-1.6425641051762440714;-1.6997255311242089881];
LW3_2 = [-0.32485067025683372899 0.20189340047652656884 -0.21995346353682657115 0.82242211622981520325 -0.41924823992606841117 -0.85870828140906241277 -0.21955771926600542443 0.60826775148491052381 -0.079249790498990710375 1.219357579366197708;0.46430576109345561564 0.28395013804569335658 -1.349880586055385967 -0.31230527838718619149 0.96543082805463753537 -1.0368777319561524042 0.64038046746605670201 -0.67563386448355233771 0.40653106040774772412 -0.55679713433484945284;-0.96377328687531949036 -0.10529741801461782458 -0.39678370965094356126 -0.84055374311194386294 -0.50517571147019224576 -0.27353273428591728944 0.64855290384885366795 -0.48298419700498934626 -0.20681882453608560479 1.0058506580079902282;-0.29276329659649508175 -0.53045400443376689026 0.19129582582888896014 1.5254417759998688542 -0.64771781366994463092 0.60773072189639032459 -0.36068116179722020664 -0.28406228186221527121 0.40199889411492112368 -0.070494405323057091062;0.07306836961923167395 -0.44215504859576254537 0.71986752817101051782 1.0882299330268678794 -0.36429174099254857389 -0.29550893397175137522 0.28761715888482697334 -0.69583782154911366646 -0.6128257601460580517 0.84574979711260189763;-0.90962909417850779104 -0.13813585574375394915 1.3570876149562229873 0.4611315883243804481 0.62237122723000182223 0.069172512414742509668 0.090725395306341230506 0.99753477660267786398 0.1928308827429725536 -0.82316504431468950909;0.58278298248538318305 0.28664267323064818171 0.49152656179424081273 -0.315348309362259549 0.18759716523020703027 -0.65162545717342534868 -1.1343905465896202411 -0.22103037911305195573 1.0788049648300139793 -0.39044479722049396653;-0.45809709916185242795 -0.16495397259326560757 0.44968621352205601083 1.0470026656877775562 -0.7677223742129536399 -0.079946586170125288895 -1.1236523621633702774 -0.36090025168569384029 -0.025646706745102814534 -0.30021133700906016406;-0.96715116769426512366 0.69761287402818616954 -0.84764060151157594181 0.018799257589108941957 -0.16320274630307218811 -0.011289302684507729335 0.38430366220998601889 -0.84275880880340703349 -0.74459723446501124844 -0.033112949010080196255;-0.79135278024189725787 0.24882609544883566022 0.51230233645831568801 -0.06305402179486575831 -1.3484655897128292601 -1.784009608901127919 -0.62723801400816336926 -1.10833494598653437 0.32686333104693077178 0.13159051032180213436;0.90753390119462884478 0.52122956850564416964 0.85575935858607143913 -0.58354319058320880398 0.50979931770723374562 0.74715706969253026237 -0.29972614533885871824 0.33554208353233094808 -0.089998076181587699507 -0.56686438215304935095;-0.75985287715450555712 -0.32712556966687922344 0.71498124192221912399 -0.57962666299582954466 0.60313530427948947032 0.21795377944710353502 -1.0849428098682267763 0.6505518275195910638 0.611036849313680408 -0.08617856309209687149;0.55650292746237994823 0.23804180598288260384 0.38845702303004375766 -0.12640534814832551924 -1.054066046622299746 0.7675865115004747441 -0.82220536670723842754 -0.21840534150059487395 0.78385588816242712795 -0.66459362160859414281;0.67865500268135303674 0.973799435917843903 0.55750374662766799538 -0.63175980891155070207 -0.65711088071081735773 0.8257226460116378064 0.26126239972296178005 0.33577648887826755386 0.46838457600606603348 1.0400358384127212918;0.70231988282902746423 -0.67213538756783508532 -0.16653163464881015621 0.45579511983730847113 -0.87468379125662587548 -0.047401422315836667931 0.16626459113982816618 0.26044585559495359028 1.1334824490503969674 -0.98372310474875668262;-0.68783737655109755682 -0.17533723804125148082 -0.64955545683783610933 -0.5791174457296139888 -0.41291513538629581737 0.82847452937470422718 0.64149627221481786421 -1.8610489345529483973 -0.14624214365700380358 -0.58516701429978201787;0.30871698001279607171 0.30037504605424286686 0.81131003540221291459 -0.90877165353452482588 -0.59384278984683380731 0.70570574535167052144 0.66153930577921815637 0.020776892488501903788 -0.49755648398553986578 -0.30607538438208908849;0.19955201834700680985 -0.45563995384985045423 0.58959840868706847594 0.69659439788537103055 -0.64374553014745705681 0.26048240560661228837 0.92373165098491616387 0.0037253106229570105354 0.70753074898393308878 -0.16398872182402290942;-0.79888320198954088092 -0.21568765367189254856 -0.37603199634230854986 -0.35384775271730722901 1.0205020202789027994 0.23130941979489277882 0.68324268082818828685 -0.43452850118230151866 0.37359468837385639839 -1.1014885879356062226;-0.2374993517950000077 0.023036031224268685436 0.5839680943113267908 0.40575969178326115605 -0.53299018537694198283 0.37490166723971840579 1.2415761798104663072 -0.17147693907638741906 0.48319139039933495239 0.68921641341012296333];

% Layer 4
b4 = -0.089185864285670435336;
LW4_3 = [-0.6204894287360318561 0.62942781320167195958 -0.61131129452276755654 -0.37380515099383782029 0.49122163489206477349 0.79905551631444793337 -0.36144063308498891596 -0.32105352044564416936 -0.10537470427781782389 0.85472949056775704424 0.021516362767681370544 0.3115527856951600949 -1.0642974206423563288 -0.86636556430305422527 -0.61393607643089065373 1.0521717939463113289 0.22325335682977640039 0.21876049425725657693 -0.57134361465396010793 -0.30622035045921092156];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999991;
y1_step1.xoffset = -2.00000000000003;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
