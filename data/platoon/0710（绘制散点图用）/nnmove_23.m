function [Y,Xf,Af] = nnmove_23(X,~,~)
%NNMOVE_23 neural network simulation function.
%
% Auto-generated by MATLAB, 09-Jul-2024 21:23:17.
% 
% [Y] = nnmove_23(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-9.27187740505682;-3.65799721531803;-1.99999468395731];
x1_step1.gain = [0.104758804509858;0.259072168169289;0.50000722551666];
x1_step1.ymin = -1;

% Layer 1
b1 = [-3.3411202940302771047;-3.4409651664167237861;-3.6018961885464175765;-2.6756571126878325728;-2.4698792555542996574;1.9973106457897500388;-0.1291482249689381856;-1.2219139474018405611;0.51074335788663205449;0.13236581791713866729;0.30079953940893899844;0.7112496562127695876;1.312487841702086433;-1.0065709361989387816;1.7926135932376940918;2.3960502464154500579;-2.3129952221218346153;2.6138248956767275999;3.5783950719740498236;3.932364188775767655];
IW1_1 = [2.7365631786807536052 2.3163792335992474669 -1.8536446280862914904;2.0619232353692140691 -1.656125325737099363 2.6597484927483687756;1.5940450544208488726 2.9264253076013901911 -0.1116730544966700045;2.3678153014509506491 -2.123827057831725984 -2.0416076544721009078;3.6013110508675629795 1.4079461594796041091 0.77546513197490118952;-0.54277697222407417232 1.7056214199554413646 3.2814683460818838689;1.9591416490445341392 2.8270792851005785984 -1.9595361420057550994;0.52383744560634337706 2.9846943358539661517 -1.8859276750724198735;-3.447321567401747 -1.0077919425250116969 -0.45731639036745302951;2.9326061463998009948 -1.4490257490465709989 1.7365266864145436632;1.9886217484581989456 2.8099752417704402241 -1.6779906802761532791;1.6931681643701170792 -3.1117751504777908522 -0.26173435493783814287;0.39760845748003098565 -1.8401925055702599288 2.9758323674422584304;-2.7770403310184321732 -1.9835500828241323656 0.40006562510261639565;1.1691614731014012829 -3.0120378942785572818 1.8912018573429698609;2.9243777073754495532 1.6386747209070275932 2.3397047969016568914;-0.30243084691478383519 -2.025674939345653236 -3.3323745100640635997;3.1387025600580944484 -1.6713656283592357443 0.29736307423217311907;3.1145788960912099697 1.7381814635868573227 0.5169953971737681897;2.2151363187945438682 2.501370019200429784 -2.0378848337048540706];

% Layer 2
b2 = [-1.4313080102024315909;1.2631803052384369401;-0.7192607277438752833;-0.67072434108517797746;-0.29992503977030693374;-0.44364266730933932248;0.5397343285137139457;-0.87718911331154147959;1.3602625823336123023;-1.7412149676516495145];
LW2_1 = [0.17794810698569810126 -0.012462549521724673729 -0.18581244456605872095 -0.39095385808623123181 -0.39117284250370704113 0.35971671108441599651 -0.83057689831636005717 -0.22092523071465730578 -0.90642481127079332914 0.5859106706345060811 -0.5775233248589466406 0.13514743341550500277 -0.55089404308528588938 1.0964406362267968831 0.25158182626314939956 0.43952396161118451046 -0.078872628100418298858 0.54755946296036606125 -0.18782122532962156058 -0.5800353948594305642;-0.34405147267204194694 -0.47402348670913274642 -0.40018559412446286228 0.24406706792559781927 0.45785694309831070914 -0.4206058762132595108 -0.0093008783737620944615 0.51461048606104320413 -0.13366055387794989473 0.58052735154034762477 0.070595822271681998861 -0.20333999082632034372 -0.13861126396242234859 0.2399547392187884598 0.23343918182142009421 0.48612024584152957463 -0.26857818370210573278 0.14862177665886680544 0.59730645972712725911 0.27904804526626036942;0.088029098675515338179 0.33756953327656802344 -0.063201317255736869094 0.39297993591415314452 0.041155729765414511556 -0.33616719518148457935 0.14794172237627714606 0.59785867507896239825 0.079181296514694646249 -0.099332718300472577777 0.067768480802372244032 -0.12118626711018014308 -0.19608289142272558592 0.6600386908969747557 -0.13973899288990879186 0.62024855771613962574 -0.25908163162344555186 0.63714107591651969464 0.39667226577522507469 0.24599998314497695251;0.0083186516031598933818 -0.59959161566195473547 -0.77802705135469130138 -0.22635983178004359662 0.10752662743942321966 0.54973832628041829906 0.082838399454034705727 -0.33652102870769712295 1.5589695580065796587 -0.38192711955426195125 -0.46681535063637269456 -0.54993400772027256629 0.14115485733532162627 0.58871526941599572336 0.43897274466055991038 -0.95188747225960335108 -0.37713586833539602949 -0.023779650011093146633 -0.30568089143838439448 -0.98401674223691038002;1.1320955256077225304 -0.10952797301336751612 1.1275209927390568154 -0.54743141918646576194 -0.30494918968311685026 -0.57447826969595072732 0.1476749537387651301 0.29823864866533467133 0.36389894779697595784 -0.77610868599926230438 -0.55020608456273401021 -0.21836187784206778639 -0.29484912525329665112 -0.011868403258329988936 0.15374012728524510951 1.5475294958358436492 0.04560967557899781033 0.88869624046292938768 -0.17279404176451951258 -0.29519241262517170732;0.24418773106013350049 -0.36165144182507280579 0.10743938030927137339 -0.37614023866622381398 0.24543948230039489 -1.0790889218289652085 -0.075041304182432891356 -0.37607919072363116264 0.31301005571939000127 -0.13751742694685026303 0.24147348726124207019 -0.19617946286985266102 0.21038476598311880994 -0.31995848075531935217 -0.061191747468239979235 1.2609445213986492096 0.13530283905635423491 0.46429428588457566374 -0.88838753801978465052 0.040045933669884771489;-0.20354842693995556235 0.03715076227728201369 -0.4687808584686899982 0.1412050013360728884 0.24026867427113568487 0.46497676654927988515 -0.43272893468298900821 0.33999345126050622978 0.54583146346864619414 0.25151850227163696783 -0.68600890476178622013 0.43999472376555992525 0.089113992960380306041 -0.51923296876509839048 -0.20750141265861168915 -1.0216096234772686913 0.68438375443652321728 -0.30570843153755278276 0.29844626250556133273 -0.039120097126951580702;-0.63451186594184338929 0.1416215805325576893 0.11131355192281211508 -0.39989210286227572233 -0.63127344285980113714 0.57632606633809624341 0.37327797630307585353 -0.12653048518491849528 -0.95619192814553077842 -0.027004363552670291454 0.25564605695195874446 0.3242781116641715311 0.1376497883843573744 -0.19128697055377927305 0.0037930579890477667156 -0.11122534964773823918 0.32167742990504527567 0.68103529464443157693 -0.1544607787265387111 -0.26569928674226644949;0.34298836055817349955 -0.74365480523729887707 0.30402514458605045533 -0.6331726845227775291 -1.1104428641368968567 -0.10480884944753569854 -0.57564651789149146044 0.074184022891680065359 0.35824491871150532241 0.30345413299456674983 -0.73695148424015233246 -0.022749968845838144937 0.10718044145056868088 -0.62562153671203601935 0.15663728913368604734 -0.096193836806966789843 -0.1877708370656781256 -0.092319582423245297176 0.23007526679196543817 0.54226930708776777124;-0.038725366352250017998 -0.66023154960169294636 0.049251293916006202989 0.035503648307125275363 -0.55318750398462945839 0.46885228149528079822 0.12390067762573378496 -0.11655546747352801829 0.08497226035390463561 0.78110748728260492868 -0.25320481503892111608 -0.30994728813803218426 0.38641602247274403625 0.077185765961475680252 -0.40598155721593726097 0.58323869319590404547 0.50259230592419612549 -0.0077147657472765871281 -0.03346872160571317395 -1.1017404306592331054];

% Layer 3
b3 = [-2.1460616518099695504;-1.8330328519307645951;-1.5741473688218665661;1.3028596826103824302;-1.0101802330005262842;-0.83554994039174468323;0.67122536885660899486;0.610297683361894161;0.26200318342862038978;-0.097202988997651118552;-0.019085613075800950122;-0.010137625805197796394;0.51871593947257810253;-0.76275745726066546126;1.052806996293542019;-1.2846384693762713525;1.2780184827673499726;-1.4477202109865001667;-1.8651566439250759633;1.8630170985323954991];
LW3_2 = [0.90109636319426589246 -0.078992545425750224086 -0.049841687452143255965 0.02551813619952443199 -0.38059494830611934058 -0.37954949079462657613 -0.88714459606765350141 0.25908306780650308676 -0.88039896617236779175 0.77451442352806687541;0.14755094119922246287 -0.67880135046900924589 -0.57543368408742845421 -0.64088435739519133971 1.2052727265764382469 -0.093110770318199240214 0.39462562793433308972 -0.45005536461806339155 -0.70412986367480789873 0.72019188275621437434;0.81098462222073430805 0.65377199244156480873 0.34128031145381015898 0.90785513011692187124 0.51334968675241832159 0.64848833926358018243 -0.50480245589123373673 -0.049423216323431093389 -0.68669789651829649113 0.49301565032682381773;-0.79718206608176511718 -0.76978370664884898655 0.13324939488098830331 -0.24999215068605903922 0.053034804941415832069 -0.6175522051104599397 -0.78964678912048003045 -0.24823809716615968801 0.61549095002771359031 -0.66214441741208007741;-0.058516988281738187283 0.87917237253301105948 0.58820515664348760332 0.67859420948560900122 -0.84201764673762524716 -0.45202767002636440319 -0.94319649776748948344 -0.1322322099892903613 -0.49667367794386330093 -0.032739705313659911434;-0.016357820610160767744 0.82669762307487737463 0.70370893557710612054 -0.89650060599357550561 0.075324182317784899032 0.088053054565459060177 -0.34815152086753253791 1.241405599227176193 -0.48830854398470568967 -0.42543404275468066356;-0.71785862638902386834 -0.40173354569310815165 -0.4906556946946482034 -0.0045218141957829218608 0.051567474359884388213 -0.55497915127637720278 -0.55758657790420151912 0.33714748895419704988 -0.64428782425596065053 -1.3374440890589851527;-1.0125743415398902325 -0.3235607293958181474 -0.62038168478556909857 0.11489803071989460048 0.67929874755476882253 0.55398538902303773312 0.58282562023893536018 0.41384669003570045964 -0.54255370373763167624 0.42069701292926603431;-0.40608533839006460964 -0.66115437730975012975 1.0199150709632509582 -0.67197452776021227017 -0.1364091569599383269 -0.48463255071310945565 -0.18846295554497802249 -0.48451046010814124987 0.67873704971703319178 -0.7796578403864927731;0.57577799356207237658 1.0030925599956028726 0.14877897935893652503 0.20755063983296459518 -1.4041395810003782785 0.54195180822520139241 -0.69792236205730651122 0.70024665669845898019 -0.85463887714101460791 0.067275334447873313959;-0.88515719302279982639 0.16421838606289382301 0.65758800014620466534 -0.47862611690120809849 1.1346869681884990122 0.28240672146278689159 0.39676972266535770473 0.24204265350733530915 0.51038927084555052449 0.57343291372328508704;-1.0762477256526601366 -0.22608528215301956776 0.51830708361144517404 -0.83116836325154541676 0.087341322937647555835 0.59864040801120388391 0.63649415893416094736 -0.91492283343599267731 -0.18476884767197684911 -0.54487049548554788991;0.66023021640688328571 -0.0036230511399225843322 0.89485373554890534908 0.3193612427592976144 0.60363170656563358563 -0.36622875096081697333 -0.966465071424949973 -0.37312817753310872915 -0.64489530439370124082 -0.53182818704620160588;-1.1424891819953106875 -0.099506796298376609666 -0.4519213938352770743 0.67401333725889844839 -0.84172843734985780539 -0.91711940792863899663 -0.039788157138706918559 0.21232365555686269487 -0.15167266412407617859 -0.46005845353300467426;0.78907725542645101857 0.38187622301137941205 0.017081606417031644507 -0.12896619661933986234 -0.76141440471161170311 -0.99417407367605747925 0.32397327575851353476 -0.19818988589525171617 -0.5690297533018801035 -0.337409570130892289;-0.80306011159890189344 -1.005165570253691909 0.037407825319696143274 -0.52413676278377641093 -0.041198471933911171017 -0.54916936616313072328 0.51728461484994514574 0.9150359539200139114 -0.10625247463487637323 0.51910431995670347494;0.76645206284223332815 0.36581859863188009863 0.50522590845027515183 -1.2085341942650040803 -0.1282639369468192847 -0.21994366290398076336 0.62056663320844629439 0.00023214651275370442804 0.77408446061939928384 -0.83528796342967526201;-0.51345423265372824861 0.13285401113939712681 0.82374928771475774969 -1.1093708475747594555 1.2341773863822806945 1.0740852535533715884 0.20167759573624097214 -0.55461275396725162601 -0.40598510431284351441 -0.2810381173181936143;-0.28543328944171825201 0.41336582030272883692 0.49360920962316690019 -0.54511982375337009188 -0.46738143045953439714 0.81320369717600826664 0.38274718348400338375 0.27285698781976575056 -0.7268940676363440101 0.8354164836060854471;0.076155994770968196694 0.049042265772926849077 -0.12791245155178310178 -1.0886002338537126288 -0.36883228322475858363 1.0498296275780332198 0.28099157748094183429 -1.2316285320544202442 -0.070334899159685548842 0.1020499278386804709];

% Layer 4
b4 = -0.66584466392288921277;
LW4_3 = [0.81629863922595924386 -0.59121697613617008038 -0.61168862765340081822 0.32879016022870927172 -0.10486027704108100145 0.32271077123926267261 0.71629138548959303545 0.19716258803482217266 0.51490957051501873298 0.69786524338341238138 -0.40610455699026959397 -0.1458397959165975144 0.2659209033749975748 -0.40770516840524767543 -0.37244948401858291032 0.17852731632812171569 0.24796216758929862101 1.0104674806139590792 0.095034367413771150823 0.61749602696595062845];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999991;
y1_step1.xoffset = -2.00000000000003;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
