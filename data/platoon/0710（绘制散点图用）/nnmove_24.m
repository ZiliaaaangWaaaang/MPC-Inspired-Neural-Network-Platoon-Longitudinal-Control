function [Y,Xf,Af] = nnmove_24(X,~,~)
%NNMOVE_24 neural network simulation function.
%
% Auto-generated by MATLAB, 09-Jul-2024 21:23:18.
% 
% [Y] = nnmove_24(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-9.27187740505682;-3.65799721531803;-1.99999468395731];
x1_step1.gain = [0.104758804509858;0.259072168169289;0.50000722551666];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.7447029079912219629;3.3314724373949848868;-3.2263983002554685875;-2.6760540236557841531;-2.4733697982432807372;-1.3869160200033547881;-1.2371088930282883034;1.4360926661822472905;-0.73552683414761221847;0.82546009839604306269;0.099898739994078250559;-1.381564683468309962;1.0427238624939154654;-1.7644678936064464025;0.7624602019633597294;-2.3849618935851504276;-2.1945106456619205559;2.7635214955491251843;-3.3916890778147550378;-4.0799292649735505734];
IW1_1 = [-1.3520013659074185952 -2.6206557821986735668 2.2089724772756920146;-3.4584689636121943579 -0.19582738388667955687 -2.3481074541990629712;0.48756206111648986434 -2.2479319751257333948 2.8791854938433019129;0.4323999119606886099 1.2200573168105957045 3.464528533202138938;0.38783157543506663334 -3.5851773080639612878 -0.87095457543960130842;3.0486512912978911416 2.6007093170673361016 -0.55184486773695484718;1.7692855247973084953 3.0386978910954338673 -1.9755333999962549907;-3.5170348734394427659 -0.12338518766955530737 2.3922200833148372645;0.55192037919581538041 0.53908209102998849716 -3.6219424944719444959;-2.8603934630715932563 0.92292357248036427375 -2.1141502444378050818;2.8684246010047114162 -2.1586412235664527159 0.46144335814011455676;-1.9026068309446815263 -2.4038289350975108327 -2.0251232535712340166;2.7293689430772336557 2.7430657993620686241 0.99696061451213191518;-2.3594273169130826062 3.2352473256943032887 -0.58168315064782583068;2.2606295008061141338 2.9671620960695395119 -1.2769017171599759131;-1.7640939673268651866 -3.3404935059806457609 -0.12394558907306525708;-1.8305282747016560219 2.4422849073573020817 -2.6427257003948514402;2.6205862267700918977 1.9674584846419043149 2.6124629760021136349;-2.5473455964912852245 2.7412013632326091006 0.039860667750534470311;-3.3019719235045603689 2.2107963398972381164 -1.4162973464694785797];

% Layer 2
b2 = [1.7032859173099601513;1.4027388728513057181;-0.37028892769845539457;-0.820053695777683056;0.16064115224395389414;0.75230988617836069832;-0.49698562953808761433;1.1389731885372471609;1.5521335315184863202;1.4385205349458458635];
LW2_1 = [-0.71229434232213906242 1.2316966334785925952 0.11559149641659596797 -0.18799555733061734664 -0.025538654529583725006 -0.053606525149778039285 -0.39375096152883737322 -0.59240565500080522021 -0.05071566397430992551 -0.27828278898853753276 -0.49277159152364446992 0.52622433735422546874 -1.0341677703780354225 -0.11964095506123753609 0.84594093135459158539 0.34478286148043207904 -0.25194922466056107746 -0.15030639336622286795 0.071028679789116686005 -0.4223591602021137259;-0.1126103790142422012 0.75831782807883241215 -0.41786099126246306623 -0.65740457507917926527 0.43073760776916375503 0.32407015534295424697 -0.087053899387964595036 -0.41502347210062162652 0.13137427325275924384 0.1746390643066977888 -0.12350024919639387977 -0.41490978918597071212 -0.78202963778690715024 -0.061372739703828241287 -0.61595841660983829957 -0.18490916647397501182 0.54136484490386604929 -0.49103268226771845661 -0.23242646802336827672 0.036049749896609202537;0.72278804176493194333 0.04355250610649295806 -1.1845629041317273789 0.40781511853431007264 -0.48063769244588455676 -0.78307242256225439991 -0.23785810441571056395 1.9084144590721752177 0.038509853144651148837 0.15416791732551932137 0.12332145379495321191 0.57371871958849285367 -0.34813930192901409999 -0.37595907518024995753 0.42148537165618771283 -0.86394227029665227047 -0.51522262229557913571 -1.5795150470115848496 0.80704258842142517771 2.1986412290273191772;1.2929640921615614957 -0.83792750870601895308 -0.065583010676175113041 0.32683622606148643452 -0.13565286197796166956 -0.72987257158664475831 -0.0026101000952733488525 0.10193675879994178179 -0.10062307187748843751 -0.035610879944758075388 -0.005684444820376506613 0.28461921526528904947 0.043859413473094729929 -0.36285643797270150657 0.51742780845116465027 -0.27645826210765872544 0.13405023229761095505 0.018320185899260058027 0.36212381312173980152 0.038088910281829459203;-0.4071405467502592912 0.34381529505692248749 -0.41907693999113776462 0.02432961931075185158 -0.277206118344211494 0.74476636436813659081 0.059469232380435631258 0.12679166300072958196 0.41285794371817807757 -0.79272791879038095875 -0.19243774587315382041 0.05914614382180147234 0.14245944293064224939 0.23528157657482196008 0.35480378212235053059 -0.24681852804693621417 0.64285694744020649427 0.086685724859635854278 -0.23957491581537096459 -0.25521562986829798847;0.38769984516746613945 -0.30771187673069633206 -0.15984448662173225686 -0.52274380046404633759 0.12475895743764993384 -0.24821373942301699911 -0.1700236052345397153 0.82306196470693426814 -0.00033265630023119989456 0.40174597732261441152 0.17470108729308234108 -0.42145151303408362464 0.038755095326272505363 0.61580578748577885495 0.090468677621721560467 -0.64575073214313061243 -0.077929450328138943904 -0.45512228505596513672 -0.47147681828259818682 -0.21717183446985174888;-0.016222554671728284248 0.8320556497775573046 0.24623050014030262167 -0.38783973296332641123 0.57317439988869633982 -0.80325571677378582169 0.54558253225341613035 1.3892048390442828243 0.36466917996066927632 0.077105328187217048175 -0.13136186274225020165 0.31205112216833286176 -0.12983861238472221844 1.0355177746827795016 -0.57571793057677944638 0.90225505942645722879 -0.3212043213767205585 -0.035707421937983242766 -0.14618190093471447599 0.93993415791157097772;0.19555711876403017446 0.62860766501002196538 -0.24408218981470886089 -0.32222376721841805569 0.35893031731404723139 -0.032856761895471868484 -0.58531456758177191624 -0.051239334299229770397 0.23577540020128204268 0.36615603280007658071 -0.18277223349993354518 0.73284356775390779859 -0.78783749120501533891 0.50024557772926414589 0.046629095220368559083 -0.17077474963110753081 -0.54512899208035547893 -0.13661483258043527478 -0.56867568485084007968 0.27667030378775331334;0.24787085623522867039 -0.013308315703771958494 -0.21324962752948087297 0.30365976603033151271 -0.18375308235007298263 0.93566311029566540114 -0.82619329394566620728 -0.50555203889230071468 0.15007867463324747748 -0.045173680421551551389 -0.67731387490502126258 0.570770538151864959 -0.2477141288447302081 -0.37827433601424298448 -0.40459608162245858098 -0.41104421612183594803 -0.064894173670279858834 0.40397810474414669324 0.36506834976490126765 -0.279661905853520798;-0.51874665145748921624 -0.61309828525838216962 -0.91688307686465175816 -0.36338727130977999114 -0.1347339125504636026 1.5683312683894876649 -0.32957608416832573361 -0.07472631760798892353 0.034341198110832929502 0.17499880865544395481 0.22475717416863671971 0.42377697405634906502 -0.35532463396568692016 -0.299248942593377254 0.65339192268666956842 -0.62744873219449914803 0.10857864406757641862 0.065873865786891111496 0.35518699561395467024 0.084340599563655666016];

% Layer 3
b3 = [-1.9562803919523856777;1.5931823056459324395;1.7016664286572249498;1.6747022831935349796;-0.99272490462189622029;1.0450388971471891164;-0.72552481992665740496;-0.36733291512089288888;-0.26651757213329718699;-0.25532822495491597214;-0.026582877400616010399;-0.2233167279554385265;0.52831984637411433248;0.72235651988625371178;0.98883226105664645544;1.0140721580808171876;1.470294217350240018;-1.4939984037611302448;-2.1052457992335775749;1.9926231325378651604];
LW3_2 = [0.46728656586258066064 -0.35328610987669023524 0.61717811118225907041 -0.020223279155621165515 0.57759097376203971663 -0.60862037347497577322 0.63353207897307339813 0.27086277887668269715 0.73577985269816736924 -0.57574788427182754802;-0.75934749451902461281 -1.0083272064842174753 -0.53294275138314828322 -0.8924290746075372871 -1.1372503181362638713 -0.41139293007204225106 0.28749726131417913111 0.3787570664850720692 0.041030238092002548067 0.20055167419327152301;-0.62877272536479089649 0.73100132370959081118 0.2521444157790972973 -0.63723567630641897441 0.70431156733011890392 -0.13451901477476399527 -0.18068807479898732482 0.73496351150487548853 -0.17897666051581503921 -0.54619076312882275381;-0.0089380269341376075015 0.36714232815154124179 0.66981737365922833227 0.72539637001733969779 -0.47405990135336367741 -0.28869581896583262903 0.74264305479120895637 0.8816027523003686639 1.0205139983002138315 0.33808527553765593821;0.50241027164240548153 0.70783772470005779098 -0.87561858212506216148 -0.2503685630585175681 -0.25225356337451948496 0.8375734412321726996 -0.76198858324518159435 -0.8121656377840633656 0.65870803799140553725 -0.39976879622677008452;-0.61290304406642726054 0.079393706189671009454 -0.67737985053665072943 0.64647233812252891116 -0.5746538833523670009 -0.38402780589634660791 0.52851972909663891276 -0.72707117436521651044 -0.81403401150259346863 -0.060864309867246120522;0.22016671930144765534 0.77095393953249735652 0.76875536375284614365 0.47735789267001721425 0.10767919106750742375 -0.95268315917988666275 -0.13910633016985790578 0.35616920196293905265 0.075506181958389192999 0.3645102007344796502;0.38545931753603707159 0.69519801611092413296 -0.64079570427722210013 -0.38755252623065411521 -0.51706993376713639154 -0.73512434897987299909 -0.7007673951408590618 0.75305596021293519371 0.2623950975077730674 0.62106703993668932462;0.13531282396727342676 0.55319642855873685239 -1.0996905363462341487 0.069925699220943673962 -0.023174642303553070338 0.60641158332366151829 0.5700647421245872426 0.75592567032708457564 0.66892509159843516198 0.18809861638821379071;-1.3006134555614423665 -0.41466263424075694433 0.73143035362285302448 -0.1736785762942715805 0.49445782865731335853 -0.1088005751397016635 -0.041121932183408878292 -0.41106741965438708952 -0.87590923288130417834 -0.02903664559463592712;-1.4273524063952340857 -0.86417996886227754771 -2.4681932682109648525 0.44666014050796043477 0.2627194158895618803 -0.11805120332824568796 -2.1788563236922295907 -0.37854924569551795521 1.38267637665938814 1.7248859298281820074;-0.81635692450163110934 -0.097912585777098826156 -0.64543905099640164202 0.59651204755111253419 0.047949574166642104645 -0.5721899641806339476 -0.24573894538834803458 -0.090564123315716796303 0.62738335124032695855 -1.3878854667765549991;0.78811090272438688586 -0.47087089835022555295 0.34927388990413804626 0.68818380424313618793 1.0811249734055576877 0.29835646943820609556 0.71358601357068840443 0.32602368949105453577 -0.59001559864516528453 0.26522974752843664348;0.53687068359931855444 -0.65659658531815634497 -0.76345852062836327967 -0.04051819074811451038 -0.12381252321224753277 0.42039268568161836104 0.84730281506266724723 0.46484984246398192154 0.46106140735260731089 0.93137527344375503624;0.30244964505124510845 1.3390987622459777917 -0.66751784449879392191 0.58380664042205177022 0.83210050259116397076 -0.60505720616732538986 -0.026537052333373063739 -0.33590442553344479482 -0.36912601044650839022 -0.4891546575887394388;0.85262625398121960618 -0.44607389670767982892 0.52131350505152507235 -0.5576542927059000565 -0.85136421680268148382 -0.14367612734726961654 -0.89852353034009502242 -0.48054309691464830445 -0.33766345135347491935 0.50990690078415312758;0.071123249648575526116 0.59126196814028841864 0.76884680806609861925 -0.57377249926131079771 -0.47484559936414838521 0.89868556656902665036 0.26592958762429502739 0.5333832405163823065 0.53579661514289045332 0.77142914538464302243;-0.38083941678347010829 0.76887584327271440987 -0.048316304596157835793 1.372903025778541064 0.30348089803376693263 -0.68930765319241527056 0.25212770148924590341 -0.16829471163133924438 -0.024595227165776663986 -0.62619544885348910057;-1.0500860440865706913 0.063212874549639808119 0.47771319744930607065 -0.10205474295760123826 0.43596474619082897783 -0.11649344593706867368 0.048368987159238902018 0.67230020800602863229 -0.34187240971475085782 0.86094096607101444629;0.82656622511931943098 0.37041700804261579183 0.5489288155244010925 0.40297556214177887579 0.71644175824914335671 -0.53347755723610101874 0.13876699715066448393 -0.86651677738056909206 0.51308528071425707484 0.09123375087089144464];

% Layer 4
b4 = 0.53487687758141844174;
LW4_3 = [0.14551827996582170077 0.2497812307199342996 0.043100628805284521561 -0.51640399352144739087 -0.45677353706632650709 0.071859808834719346438 0.10568712712784725238 0.11025660346724691641 -0.22042281474856134649 0.48207166634801118521 1.2185704118101001736 -0.4165707864870473176 -0.39401962710509502719 0.11249338223009427984 0.38432963289513560889 0.10009221543015330014 0.31340863396913076766 0.10916388303094912149 -0.38407368316979606515 -0.21648356487480291399];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999991;
y1_step1.xoffset = -2.00000000000003;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
