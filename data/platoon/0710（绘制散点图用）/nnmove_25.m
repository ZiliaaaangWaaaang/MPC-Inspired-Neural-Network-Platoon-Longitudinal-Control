function [Y,Xf,Af] = nnmove_25(X,~,~)
%NNMOVE_25 neural network simulation function.
%
% Auto-generated by MATLAB, 09-Jul-2024 21:23:19.
% 
% [Y] = nnmove_25(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-9.27187740505682;-3.65799721531803;-1.99999468395731];
x1_step1.gain = [0.104758804509858;0.259072168169289;0.50000722551666];
x1_step1.ymin = -1;

% Layer 1
b1 = [-4.2745195586220434691;-3.4496790400711700997;-2.9319990762177350341;2.5819391569233007822;2.4693261872307874505;1.7090859096002433137;1.3867411945225236458;0.80499849701383507927;-0.86313241061850420888;0.21539645498084805664;0.0070190917138695865796;0.41461379664656777821;1.2746194656038474236;-1.428375311085002819;1.9528608348352400892;-1.864557301927293409;-2.608388529444026549;2.7550918782556443887;3.5027469938209350175;3.931796218502594531];
IW1_1 = [2.0401692619109592641 2.5001701844932422425 -1.0570722717440819149;1.2092434421213369422 -3.5619098680178842287 -0.15580380380422631514;2.427507400680751104 2.8924643333824811009 0.53971403242244253562;-2.5192540313653712936 2.2225818399736358977 1.7631569869751739787;-2.4700686288633613152 -1.2763192766800175448 2.6204364144547938054;-1.3992725024142622647 3.2244170099866815704 -1.3718951540779713572;-1.7501941167472940819 3.2614610515088924281 0.75417165979762978978;-2.7178702623804662508 1.1177762308198915253 2.4697375090777433648;2.1033457681081606516 -2.4461680092885997873 -1.9205474041920762573;-3.0265919100485576543 -2.1632570679763483135 -0.14304756222033962465;-2.1270552222905063644 2.8649960404205887521 -1.4538957182438048132;3.6695823591365486216 1.7375114030479934524 0.27946115209750727049;0.36214698145682733266 2.3846940585201368279 -2.9429800096909057849;0.035796532681752514515 1.2198819481737990245 3.5005802105600363205;-0.0092798564319809782874 3.4085668304343625934 -1.5716305160069963254;-2.5597636597132455982 2.9256682409237702025 0.85107936126847338887;-0.24522375449356398347 -2.3241939788775085596 -3.0388508337217308153;1.0834536603663551535 3.7988834795851507131 0.73089527622383054783;2.1782780209901830837 -1.5233684538065817016 -2.6075309466892493404;2.3014236751328862596 1.8252393393165287083 -2.3474146204352659417];

% Layer 2
b2 = [1.5831845915420326154;-1.3243676034647184903;0.85566768426784367563;-0.59838356777524859265;-0.18971378314296316603;-0.060459457812222637541;0.34181735175978300578;0.77110724227419058519;1.3086598354055374305;1.5281021366153990648];
LW2_1 = [-0.31744007344500313472 0.48498201177541672147 0.021702963497932398901 -0.25928007405214764658 -0.79054477613630980137 -0.48449914338590260865 -0.52958961140758598063 -0.40375623482134359588 0.16372374363525138419 0.017823194918626932004 -0.18013816071458654822 -0.13036983590680231715 -0.17478813302828982712 0.31734093250367190198 -0.66021070689281202704 0.66928373401639240647 0.0067113376632163181806 0.68451373452621655513 0.52115024794779496453 0.1173925409626045413;0.74390796303729855854 0.26869236376487781737 0.37818403766441160974 0.24284631057559408207 -0.17765589741214909969 -0.46404722450202884332 0.045094766133260112684 0.29246299303201223063 -0.26596049814477379369 0.35030865014720302675 0.45123564097680129992 0.63055676336524424386 0.3049131783429696041 0.066885683353521338534 -0.30100329942064246724 0.0048614858621189686871 -0.14042642665135113278 -0.11616100323863737254 -0.341355311949005924 0.14304137300361816076;-0.13418770875115454411 0.35002426072749892594 0.14085940480328262847 0.17853631511124376519 -0.083146395504882675276 0.20021865713342845705 0.38511131619920346836 -0.36083496086344540865 -0.20696079521232371712 -0.26363943712281379117 -0.046415934815713197348 -0.61405141719975220305 0.28439923908519648688 -0.64817569310608635913 -0.71724492133561590368 0.15021259898474886851 -0.28151426808842067162 0.28086943057626950759 0.32241340414525143654 0.26820347661177140752;-0.06667507720741193411 -0.2986190553631481448 -0.50173210094695497308 -0.40291998005385798454 0.67697893906496220406 -0.45133519991220222289 -0.49737688117984346636 0.077217309462892139149 -0.31431872529052434784 0.42130313472929803442 0.13201429143225576479 -0.45631882374226007126 0.33710925782684403318 -0.43356162643211471064 0.39268117519305512086 0.93701396979020734612 -0.060759271739097737985 -0.31166669944111996537 0.28560701681774569582 -0.73182424667474921254;0.51214821461064119479 0.2268016906361184637 0.27434559775045480601 -0.0044281830195821124396 0.14150996803655160883 0.086082990342737558676 -0.58631042157618862287 -0.50024925633120520541 0.41251004156928527955 0.35497846402953131539 -0.30342238249846192888 -0.2537379460788579677 -0.59196008582265768894 0.47091596599476165386 -0.21137118507718419269 0.57755565644672934855 -0.10545614871511281574 0.43111899787023172381 -0.29910554270962574908 0.018545295303975743717;-0.63076760877667759075 -0.66072760458138957151 0.31460062056803578256 -0.089995056668323233917 0.11621337687144205064 0.49716945292394221223 0.5427983469162050989 0.061397600931478835129 -0.27157358032201428522 -0.13452882130185492282 0.35491522840756883905 -0.21202836112425604842 0.012211366195237546156 0.039273826642265467768 0.36708983938261025015 -0.0034565128663057061165 -0.32439479308485963394 0.038130387401498405664 -0.49129601151841095774 -0.10870325614676859538;0.20153522278484684027 -0.48042831833897897686 -0.21199293255647663758 0.18047011651640379459 -0.54308444690765100837 0.42333141478917590828 0.12518019482002942788 0.89056608498044875777 0.092409700553509985244 0.68776018444503272953 -0.14541964185649197683 -1.3910660486568560135 0.54916390630186473487 0.48315158766584243022 -0.16023636500545776484 0.56198361566610610662 0.090135725997087745576 -0.42004756079409982794 -0.32206802293151370886 -0.79263772418670830344;-0.086331944216506584233 -0.15276041891819647223 0.84388649374093571698 -0.013567571047717065166 0.78445001557215110477 0.12669712024707838194 0.47868245272164278159 0.14378931589394478019 0.27306581912057081851 -0.01815338433678700264 -0.40072536796957153316 -0.35855507373354156275 -0.14519306324637357153 0.31248928726145236423 -0.53927281222771683566 -0.16769358219555610678 -0.21574243259321021493 0.32397180214860493708 -0.29457931932867947866 -0.24917847458922348647;0.032572892511149871553 -0.174369323673974147 0.37436003311288668094 -0.38279941589907401367 0.36415556931610582048 0.40759758844097643271 0.60420406382342883855 -0.30842620396711700748 -0.35437845039550402992 0.2793107614908217351 0.41012523014216545336 -0.54309214701921804114 -0.74097177363529143079 -0.54069872984936984128 0.28140590895020589635 -0.31865420320365417384 0.083059955847807814822 -0.68199922695255010829 0.087933961338547070308 0.17815608328027360274;-0.077813197529199337743 -0.065999528992074896205 -0.063051341467383434369 0.24745537427287880861 -0.18502472135290046196 -0.62652267613759349274 -0.63539285755913677001 -0.88039239042204986418 -0.081920726424846448954 -0.56512318127451066641 -0.062164282330918085862 0.7570988692905697981 0.36480871261087366442 0.46034417153407891643 -0.61923594192994879659 -0.079845409948980136661 0.11035854085532612046 -0.3322268277502689604 -0.65346939124653946607 0.49161365049732724808];

% Layer 3
b3 = [1.9185275232905492082;1.864502817199141127;1.5683784758035870244;1.2926059141029668798;0.93178150487133126756;-0.93584793670200983051;0.97434428969241559937;-0.3909629831162710345;-0.28456559534561787217;-0.04132453593071319653;0.084579498895666890834;0.28090188642637187177;-0.36629700222672778587;-0.69308347382871937636;0.95015923954778280791;1.0579989609807529671;1.4243342347977319129;1.5275140135465867797;1.6583719896626931689;-1.8552253293764768838];
LW3_2 = [-0.10048425838140638555 -0.80595793004918170332 0.1908654541972969465 0.81872530487911132635 0.46756936376701746516 -0.56434315430301684735 -0.095754413046659464515 -0.40560699328796395724 0.57789935550774962358 1.0433947327318466858;-0.67367037234912696686 -0.21731079481479451121 0.96046361775614375045 -0.65477102147638921448 0.60178918080942045421 0.67628980172847086294 -0.29849342161742797863 -0.3342686158371059868 0.66071833514542854804 -0.3757432741009296695;-0.18244636340257214258 0.4191783050458277593 0.34448806755195193752 0.47098527079734736622 -0.78698163971224677216 -0.61578795693516641396 0.28813410232266567501 0.54124355038593485734 1.0266559741757379509 0.67627952983926831187;-0.795812948383532337 -0.87599265943688486846 0.54183972097225663322 0.65055469096511842064 -0.64185038790360460226 -0.2184145911764864556 -0.68176945943318434384 0.051451471815734645121 0.53009118835016699745 0.48095070301258074918;-0.12485203606107181384 -0.24267189870662267404 -1.0012069611877336683 -0.66630818917047718308 0.87554315777841662527 -0.38181847008070834981 -0.64028765577935997655 0.2000168347242581024 0.3816397139739217681 -0.6826004165576874394;0.93016475430099032629 -0.7267640723680733883 -0.7867067474299517249 -0.072136022111757389097 0.64285671249673792538 -0.28128427923562021595 -0.34693694602824409756 0.62997325149306915293 0.7013806968229937544 -0.0061218013992367908277;-0.60307850691257247622 -0.48033198233872737015 -0.31509912481822188735 -1.0036966012443646612 -0.64836484635320834613 0.5087443792360824002 -0.81023318565577140404 -0.36511730924041407853 0.38346275982601313315 0.74962690872099324579;0.041868837877599096586 0.28588577305350432178 -0.71722224015346336401 -0.10485064322958048688 0.19081535284000913921 0.13259390199942125421 -0.68179129561635154477 -0.93152252531708856775 0.65774761753787158725 0.62598114004045524172;0.96284651038120405708 0.13935358098191702458 -0.24404864844105633725 0.14728225480583514995 0.3922414903607584491 0.2923526738961291227 -0.1071530159568187951 0.65490527389227881638 1.2081497738757571714 0.096560875450019498234;1.1018431995987851835 0.12754899458191532036 -0.35100660002109973501 0.5811618049684319498 0.036207593086092164369 -0.20386905440701519332 1.0013938853771444659 0.75144832325296118114 1.3101131370375760365 -1.1136176483290154415;0.53676052754285996649 -0.71219123897491709574 0.77375577690552066468 -0.87756900323955977505 -0.36421595242173404605 -0.74875051276490123264 -0.046856024186265575471 -0.23642977587709188003 0.21315429336107347136 -0.68016045711848138744;0.54015458198414367796 -0.95377815939154098057 0.8454840300502372008 0.43372320162791955234 0.6407038275417831219 0.76659164373267763004 0.30010718641170941456 -0.10769895770808597668 0.59860274563582460683 0.01034842778718205944;-0.44818138780995275816 0.15206463105668724389 -0.46632798463008712231 -0.55981424611598951113 -0.72930365541176189748 -0.91227218378380237063 0.95967863874526115886 -0.058365147462833416592 0.94894893221334797317 -0.13821157809926551407;-0.65331383279691279675 -0.83830057396694557248 0.056145178181701976827 0.77237403153578620962 -0.35986816844472907517 0.63914021806041643181 -0.7243918172531580435 -0.25282009198967747565 -0.026248909595706811093 0.84996601955345141288;0.36397968435935534881 0.92664899090054031472 -0.65797060093909498502 0.5448397804028541902 0.53799874899230160086 0.56259116553990251575 -0.20856526792052176855 0.43974714826501914988 0.64701156750902533155 0.65032105588093913617;0.034712669090871756117 0.054570985021218501587 0.10811868048008307919 -0.98254900966201741408 0.22960810945498913438 1.0742776263060869191 0.85650738884999932932 0.5290136669165063088 0.51072118993641590912 -0.46129201324107166338;0.065720309730586137786 -0.47312101424926417126 1.0275067221440732368 0.71971322071531962372 -0.71767063535864694668 -0.6898281190723787315 0.58379791714207096565 0.020970567408381567132 0.69408330734720924404 0.22171689839855077131;0.27647785397237117921 0.42628046701988098199 0.34098940694476387314 0.9764153604901071315 -0.62991029498293049649 0.13818507925531603453 0.16837381159191353031 -0.84481883654567269115 1.0642655654854769054 0.20156414781523093738;0.10204333320469452517 0.0062292584520149234251 0.79248708155238445361 -0.82918742162722647304 0.36429111066268327068 0.25793690449226547301 -0.98189105761006112427 0.36646657032568097367 -0.17865807783902218353 -1.0651300529595648658;-0.66136741102849727625 -0.078276574331761827885 0.93328572580687585436 1.188636984472056124 -0.22041887122274106403 0.61278368109582137535 1.0783740121682565682 0.54160781039857663899 -0.022028733946430716778 -0.1554616814619027565];

% Layer 4
b4 = 0.32310376509245908316;
LW4_3 = [-0.28785071232582837286 0.76212930390458888397 0.13264866105815031894 -0.38672540870629162901 0.2333843500686907102 -0.14209078446132761275 0.39854609832436954653 0.59951176158126051607 0.24131511036516656299 -1.2972602060693716464 -0.67122319946733455254 0.1553747635379458536 -0.61375302079659799226 0.11231326367742547334 -0.26253956958914770325 -0.1233842809911939592 0.78321168510439709287 -0.44217430897487358665 -0.53217271427072898593 0.94343304062872024307];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999991;
y1_step1.xoffset = -2.00000000000003;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
