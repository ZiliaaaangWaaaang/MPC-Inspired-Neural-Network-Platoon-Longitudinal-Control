function [Y,Xf,Af] = nnmove_26(X,~,~)
%NNMOVE_26 neural network simulation function.
%
% Auto-generated by MATLAB, 09-Jul-2024 21:23:20.
% 
% [Y] = nnmove_26(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-9.27187740505682;-3.65799721531803;-1.99999468395731];
x1_step1.gain = [0.104758804509858;0.259072168169289;0.50000722551666];
x1_step1.ymin = -1;

% Layer 1
b1 = [-3.8249054940103484057;-3.4775715985420601051;-2.8707161956921543045;2.5771112385667458433;2.2437230101815788252;-1.8521691669735849128;-1.3679835949061993627;-1.0757183851689482434;0.68366318723514618583;0.037773187915051138763;0.18947480917236370068;-0.61168942638456236249;1.2465322810516901164;-1.3994354934806139124;1.7684251735814635609;2.1245271957572051669;-2.6633567968366653744;-2.9981731759226222245;-3.3720943649395480612;-3.8063263723023461615];
IW1_1 = [0.69544893128014917405 3.0139439117870296947 2.1648040616123567226;3.3801126135001262618 0.54254842467714969878 -1.483098257972450984;1.5422133963635802356 -2.8240539117617395881 2.1503310560638371207;-2.1899882160804025055 2.6109826908444735416 1.7203860890468989364;-0.49514118111759164442 -1.1267420993352597058 -3.5771874276208772692;2.3443703040986823005 -2.3082051707274833241 1.8542716326002963712;2.4713790053482656006 -2.8723715935661418008 -0.36119216156541922302;2.7545230710698977994 -2.5949148445679570685 -0.21775985131048472554;-3.2364857641796596077 1.877930138912517366 -0.54207847673262388177;-1.1645368593129952206 -2.0889925759759053747 2.9623776362164866427;3.3245711104329376262 2.0084359171855892257 0.41438897611197350601;-2.5021164445981938229 -2.6520379231846273882 1.0318823069722813379;3.388183125703145393 -1.039135793374333705 1.0385400470482988311;-0.66635922396250202304 -2.5283308040316576637 2.7111844285989130654;1.8018745185789823982 -3.1171558130381780138 1.273156702496610615;0.80389840886956398514 -3.1299896638478719169 -2.0665228375091770907;-2.549733934983214656 2.8036276151779153665 0.27038527560388153637;-0.44073033163137026458 3.5885159454968178494 1.2336092330804948602;-3.1497147421165325731 -0.64034505547608344678 2.0617317486200543719;-3.3490052233834335382 0.88370719246315776463 1.5497823738542770844];

% Layer 2
b2 = [-1.571143736646277933;1.2702047918249421699;0.93908817207196637611;-0.44174242321707191117;0.24257384918722932343;-0.1698973885772729342;0.5413494350756349327;-0.89178692950847093801;1.1429600315759975704;-1.5532680328750587684];
LW2_1 = [0.69542305582413577181 -0.018071596083068193483 -0.2021686826924368463 0.19644178821611710251 0.15529411247514729455 0.49609414672325036211 -0.076296301840128713523 0.044020225637600073065 -0.41739066061402418928 -0.30493673651983022044 -0.098808616678971117331 0.39320361759245514577 0.4277881756460015783 -0.40369065197832221248 -0.063016774254658486365 0.15578028361831236515 0.57822374541770282796 0.44230941249085986566 0.18038846279269835082 0.49967440083314018651;-0.042911931816807455387 -0.18530375654955075215 0.41714720909306313157 0.1266460641479224547 -0.56981532344783381028 -0.42440934509811112374 0.35673967928239691538 0.25361263941541878353 0.31829809042390999618 0.17284452200113142872 -1.000473714820929505 0.051848130690608236482 -0.0063747841059150723783 0.48532680651597193133 0.035459970858269566907 -0.40356631001546400261 0.70793873785587535519 -0.37076266664648094284 -0.036255212963084697264 -0.57168861850422458826;-0.31692229151637441031 0.0032370187541659180101 0.060436253800961237115 -0.32658439115152737564 0.052892943005338907692 -0.41281406262196751467 -0.58482908336993888465 0.55122539003275228264 -0.10944291571740272229 0.32014637632891851382 -0.38515734222201736259 0.17342070064973819088 0.68676312071138156945 -0.16721920161340403377 0.4814723384073217316 -0.26428185597571907106 0.067205241174884466915 0.42852252857744443926 -0.20503665446760735436 -0.076176483002395697919;0.21063083884349165231 0.36139007463502365036 0.45178595780883151756 0.33190857212134866616 -0.16688812446149245416 0.068103373702241384868 -0.32053457018786202237 0.096224698825408960801 -0.1877817664496986283 -0.17455083615226704707 0.68346149723605842397 0.031556779222671887952 0.51729891730203492184 -0.2748753277734426459 -0.26810772003792143758 -0.44019251292226702077 -0.19516417997830987074 0.46015418385016104708 -0.32329610322128210509 -0.6615781278268952903;-0.24707071503151187275 0.10830941806681181061 0.39818191963378113396 0.093705093099997860406 0.40852463108998748886 -0.2902845199446366653 -0.21559013966637247117 -0.56001127755939716923 0.20150689621915213179 0.55715530687404735133 -0.66413420995710070738 0.11041883647601706542 -0.26095720289148266469 -0.28425886770514507962 -0.36505541088554310791 0.48985538458678956619 0.34611603802759682846 -0.068351544032907329829 0.22447579060733946488 -0.200339843161554787;-0.27691106286089189892 -0.22307318339881715419 -0.0083435643887534213098 0.49423164372531164235 -0.37457464574411830638 -0.39116148530900363145 0.15362442344471077815 -0.069164083435088868912 0.25498612579683704871 0.49685697682671126074 -0.35200967687782908078 0.4478683260512001385 -0.49978728949362305478 0.064983587095272285494 0.30477424771541922199 -0.25888731729248398716 -0.58982135124124923653 -0.072037851563392846233 0.52762353702499353858 0.60427385544596501354;0.48981341510861903243 0.51599234582950870287 -0.45988160952509271606 0.4092436817052239606 -0.23271409519362454277 -0.59688459061794063576 0.40066729179492144297 -0.1534598925831997529 -0.043673551369632065966 0.00062249331521830545549 0.69993995225467653398 0.0432875902314633354 -0.38124268574475023152 0.060396099621768478682 0.3471266834443361704 -0.073923322489215362308 -0.16387070739186967994 -0.020447395585798448098 -0.26026202473256820902 0.16661335890250858482;-0.57035081402191756261 0.43836250189586389858 -0.35816110633935605012 0.19932435573979986887 0.12917475893566646161 0.23237506098685692391 -0.6687138154112209909 0.12681172442952873269 0.15209006200638230943 -0.14448742198006855886 0.14276832217592344554 -0.1402601160876773001 -0.066417387062911559248 -0.34588588418292814941 -0.78628791477933257514 -0.53886515710578808402 0.32824282804892712662 -0.27035525700549822847 -0.084728488556653158703 -0.022384561663368756496;0.27847851749138197164 -0.51204701443552680384 0.32834379118262690955 -0.49014987343778959605 -0.43189101967153459283 0.49200283303701863868 0.19762799922657511842 0.40221558236294935318 0.32449124929851741461 0.54995991735568827696 0.34488436974315744843 -0.23392894907393388393 -0.41763047747444032032 0.36723063806473021931 0.03431508781506640432 -0.081668730373952544421 -0.13241247446686521538 0.45955452966493121059 -0.16970776861067549124 0.36501173987019425171;-0.079584940061507847275 0.4571260281162545791 -0.62119632828732307406 -0.30537153715012149702 0.052949136535200475029 0.24836050851596674915 0.39614685679118849526 -0.21153700015616974661 0.53128598850061914405 0.22124334489800207004 0.74996842709225230994 -0.058455921334144497759 -0.16833314108189859071 0.31305085106232161118 -0.69797637246684041124 0.10447922868328082813 -0.38030386812663891094 0.078881609899931162677 -0.27222002302777476013 -0.21688065691348959452];

% Layer 3
b3 = [-1.8892160211550754756;1.6832098631990610738;1.5257254690352446413;-1.2828375316034617004;1.1909053868034180645;0.87063036784887093411;-0.56646489961626611542;-0.54465512983068131714;0.19854537644129005569;-0.24175695351962914192;0.15067163339572500758;-0.28804779616899794936;-0.47453076336866134577;-0.61645006516328626489;0.89511503005317472059;1.1536948204585464328;1.179822171555059418;1.544270706439627272;-1.6007975836930836699;1.9306837226859610013];
LW3_2 = [0.087661679069821474286 -0.84864325087696601546 0.59494265551806180259 0.10542293457966826764 0.6498995135377647614 0.56141192679089579887 0.80758418046926860878 0.49174294457902550937 0.16027811274852604706 0.9045496494567946133;-0.65348413552478934463 0.46420844353737017451 0.95579315464423253434 -0.49090026079945275894 -0.06829797306706368587 -0.11374924059375708663 0.73697412909262072223 -0.29206875687359462601 0.551071149886236622 -0.90387408609302155593;-0.44816328845083902577 0.81879651865831171165 0.45197949574167251008 0.57453348556171179862 -0.98930065233250796819 -0.69494386521235962384 -0.39043003313243107577 0.48364263543531588185 -0.44632165129838724527 0.0011466704700266274527;0.68404093199037852013 0.25924402827181153297 -0.43863233039912324918 0.63096968160641786483 -0.083892855993105475143 0.27063240617902561969 0.8609656710823646586 0.73663868319986935962 0.64983601891183928601 0.82320022803367109976;-1.1500550881975737383 -0.28843860441500818181 -0.75908326090284283794 -0.55724334002028130808 -0.2378398378864510776 -0.88061307593096826984 -0.14133483303317992408 -0.12354231640328840192 0.24580842600188956837 0.47934076855441631881;-0.71383260411113791388 0.42785440182599754344 0.56931081235931479956 -0.200911875384211569 -0.38406615796363169357 0.70843579096662590011 -0.45006718449006166693 -0.8769892211135086324 -0.47869065421541789895 -0.8543694989936410078;0.19588616905995520634 0.8348842050838366502 0.43579579692094216892 -0.19354162985338091429 0.72459425213075379091 0.40486900047081508802 0.69320978275500766408 -0.85596631637518971747 0.2451609182880332416 -0.77336641896312585676;0.35282166637507256235 -0.56111940431499041093 -0.16274287653748173432 0.70971007268502717125 -0.35785549848455372457 0.87195741692851791438 0.70061082746386360576 -0.23659863853245938214 0.24702707487979683187 -1.026340771147931541;-0.32980220159463990992 -0.047634903771392796135 -0.6865706109661249279 0.070311981782791105333 -0.89704456286702982659 -0.45064530958325849097 -0.80216303236169284041 0.25351884529322527007 -0.85007665962115752656 0.54939804876001607781;0.91196817364198312639 0.56833484987027416135 0.94822220820923264206 -0.18451937881603880376 0.54946883914816679884 -0.31301865901303094208 0.771496220643923869 -0.20961341983115117094 -0.10756671828092005672 -0.53830170724136827687;0.071582003820029327379 0.013344426602627797868 0.53045715753365041412 0.02315557198854176213 -0.99968995073425215292 -0.99455018872594169732 0.40037032130242589112 0.41918487908010959586 -0.7024706134170782823 -0.24549557137722782807;-0.62391273520432699584 0.043565323204348568864 -0.070517794632307992386 -0.89158538314656254897 -0.65114336955005636121 -0.0080155061160283227334 -0.3720484741323837885 -0.81051712785898888392 0.66383177729736397854 -0.7078165409085482862;-0.10161186342838375574 0.42540021008525413793 0.039429611597230684872 0.63580611403792886005 -0.78004606124015307689 -0.075015855635155864745 -0.85301625209533527006 0.31592761413236691848 1.0679398269533277865 -0.67599137839623946178;-0.62641473343676923324 -0.056868457554544490917 -0.89379791918951490004 -0.5424160955653417604 -0.81522885965956948251 0.10299182805292109166 0.54579524973577131508 0.11655745899839795032 -0.80836729427573217333 0.398363065141280559;0.54494509789070777472 0.93245693554990483065 -0.95028914101480299603 -0.64479678174013355108 -0.69919303610221716916 -0.30369901470056576143 0.64441625115352862974 -0.21772830591721528681 -0.20697308791133994799 0.055400172220922298816;0.4745134760509998606 -1.1287979927782754164 0.32611657990140224816 0.45191920864556928139 -0.42130001663350763463 0.23914554865048337495 0.9707844727116471395 -0.11288852507206351139 0.0082615098784841085877 -0.51620933117395517709;0.20222437501541379312 -0.70049301224263138543 -1.0467516358596469228 -0.29256595465074403117 0.35859753143160877364 -0.4919520952670206615 0.86114275809871765333 -0.88994702128788738538 0.050420434346950038229 -0.17831907028149382444;0.86683769562676871168 -0.084526261631745439051 0.3745708061814088663 -0.52033846444538434106 -0.77643082075542546594 -0.22541237700662425381 -0.7803600558787007202 -0.93547745138666860143 0.00050181673309128904323 -0.39527905165628601791;-0.5362657044642280546 0.47995324178894765987 0.24424360199464834054 -0.85453594897525186891 -0.92126995821075563509 -0.52182331368981704767 0.043280201555807126801 -0.13776363526965582085 -0.37190170883816514591 -1.3046059904176816602;0.17366000015274588031 0.55999327098239215506 -0.78794346012490046327 -0.32506429247495427504 -0.78254088955734590893 0.72878175453878779599 0.37182853571369706147 -0.56968410744397068868 -0.25427345636621045966 -0.8522181408960154414];

% Layer 4
b4 = -0.46681143492825649677;
LW4_3 = [-0.031820954847137823684 -0.4165386817526653962 -0.36553240006326487288 -0.3506004078911921229 0.88252928294010690724 -0.24599184993403061528 -0.62989753274642967806 0.26852474489630295817 -0.57255478110643653888 -0.98585290396522429202 0.51418219723195668358 -0.4469127973049163427 -0.29333152674201501409 -0.52401258006472850592 0.63154814280775861679 0.73566367414646283152 -0.61506033773269364051 0.79908577256972346259 -0.70649747589964340122 0.60876788082708011007];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999991;
y1_step1.xoffset = -2.00000000000003;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
