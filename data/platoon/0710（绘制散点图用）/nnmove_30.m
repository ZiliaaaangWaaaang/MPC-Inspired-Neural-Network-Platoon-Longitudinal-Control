function [Y,Xf,Af] = nnmove_30(X,~,~)
%NNMOVE_30 neural network simulation function.
%
% Auto-generated by MATLAB, 09-Jul-2024 21:23:24.
% 
% [Y] = nnmove_30(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-9.27187740505682;-3.65799721531803;-1.99999468395731];
x1_step1.gain = [0.104758804509858;0.255650892831276;0.50000722551666];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.634127670661355225;3.3333038778878982811;3.2109432568641831374;-2.4228175537345313373;-2.5631399875301958957;1.4175280713493976226;-1.3449791882320853986;-0.87459654848373546976;-0.3418857076532978434;-0.69515908293244066396;-0.088097642165945982962;-0.59299157505528088397;-0.78629994091146782065;-1.0927380918812086286;2.2866931898523636946;-2.2372321638761305529;-2.5967414069158372136;2.8480998371156966975;3.349765309941144853;3.8095216699243401592];
IW1_1 = [-2.99331376529023796 0.61774427361597916697 2.4632562713591181769;-0.59552542925718077171 2.5456477963101620254 -2.7880533475872679716;-2.0655089024197974545 -2.9882266069898504313 0.15706754505262501831;1.2935802719699411867 -3.1482062772042653798 1.9626540805698280412;2.7719910919263774929 -1.9813058902701021768 1.1319581278600969743;-4.244239940993797866 -0.094085329922679275527 -0.32256480173591761673;1.6633956324596215204 -1.7087267872016045356 -3.0048246964275788784;1.4008451123844520847 -1.9884076564793005115 -2.9356272970938950273;-0.34554694520059092699 2.6312095859391604336 2.7147195671141091111;1.0151823952187044586 2.8895212496428883675 2.2919563519960304276;0.21388971745591497942 -3.5357339058352872385 1.2170539065539058843;-3.0744743416586137741 0.7791259236717311687 -1.8160537145216661958;-3.9802749612789041223 -1.293364185708910874 -0.40511866993655137881;-3.2328563317200336158 -2.2986749763097447108 -1.6052855038827005263;-0.16910933369814235006 -0.94624516421895754625 3.2744910792588264314;-2.988766085219255686 0.77103052716631725882 2.2052550397716106367;-2.7293113640028541234 2.8152072130897614066 0.59993181601024037075;1.3031235712911406477 -1.4676740304575217611 -3.3825538982102862917;0.83218376675646787977 3.6273893696327865754 -1.1956414014358094366;1.6583020033502824386 1.0350392455682058124 -3.2907996861953976442];

% Layer 2
b2 = [-1.3626189736845932821;1.168145046015196975;-0.95225608387745053207;-0.71735808099644193803;-0.2132535884584016439;-0.26340965756047413082;-0.69171869445471267923;-0.82962847041369891521;1.3610085832935363559;-1.7857686305801534488];
LW2_1 = [0.50554073962407619636 -0.17264901780297181588 0.030191520963502319064 0.28326673329802676271 -0.029192381549217820413 0.23488945359682786296 -0.032163362577180609758 0.042561941450805565457 -0.14409729613740152043 -0.26551848781249021147 0.75045860401214536939 0.32194600799066286356 0.74016556944009115337 -0.055011486179545376896 0.083709405721064958361 -0.4745831282567660736 0.35575902662225855622 -0.40112732803571005125 0.084524740872729917096 0.61442484172723788038;-0.18401700933645398495 0.2079808926327055274 -0.48376595296824087544 0.098971750653710596768 -0.29056636298248239569 -0.77786455343996985246 0.56686362173636961614 0.51100979574875216027 -0.54606940084410160452 0.63654954887154602261 0.24605442044674866175 0.12300431164767010317 -0.60560380483202336244 -1.1812834946513068868 -0.18133720596600630404 0.68946788149082416375 -0.26921698625316398124 0.18585797837108858355 0.3830467618407285002 -0.084310485471568025195;0.033297176845274674417 -0.069362407972011111412 0.021639942973329440168 0.30347121341289284846 0.27717572827453473838 -1.7285729077187874658 -0.20192454594550393598 0.24653932176050577518 0.29809445344258750366 0.45372331833719142802 -0.42666747932934279142 0.087148577889339592928 -0.50533957959540831695 -0.28670293698882892697 0.67693264257282970142 0.058626748205188053409 0.47342420244793420592 0.14575440006117851288 0.39033600039780652624 0.54422714888039835923;0.30487818875347200143 0.24831890470566400642 0.20097870326969555221 -0.54626681847126634661 0.44544202877933714024 0.13601009357548327072 0.52913190153844968933 -0.12750480160905275362 -0.14853312236262936064 0.57862754413075023763 -0.15836588646177768291 0.39432371815669159387 -0.46003004696450133792 -0.23935612509673423465 -0.30652032572543719269 0.69164160379584749272 -0.088914686508370546769 0.25975280707447828688 0.13575324090339463412 -0.0043584739659925653132;0.33539837445205600286 -0.27115263242527504195 0.37614372326092232468 -0.042614314237902010951 -0.29320539244797783063 0.94344220207468632022 -0.34346214148937609378 0.43252140345696749035 -0.047641679075386418607 -0.33424746654940795665 0.059896146706066737131 0.37100258771965322069 0.17928318118076200238 0.27804705600983503633 -0.095436700872277749341 -0.23088798776465119245 -0.52406923005465910759 -0.63425436915890165412 -0.0087450724847119142707 0.14964734049413822015;0.053372868394429097416 -0.20210322111856007798 -0.88054558683302641686 -0.31559092875213545781 -0.2028712849228408166 0.25134144844038824873 -0.33978559344867703684 0.34023655869927538209 -0.096184217251987252917 0.68772183415330756517 -0.070751981434371821744 -0.08522950420594289922 -0.028763762336111969864 -0.41505502361754281759 0.36975749560065918065 0.033504383710742817459 0.50925088998752210401 0.22711536874401141994 -0.67190072231772435263 0.13883586478925338814;-0.76369026404573725486 0.098841854890114877463 -0.48484379638823860148 -0.42701581902784285782 0.099829411075535334774 -0.83318414509526006473 0.17906863313126980541 -0.42700277752833670775 0.015222626470310666666 -0.21549177394521309981 0.76420882102754561505 -0.26418942941792722401 -0.53669679196358111017 -0.070413421327794475935 -0.10146635358885219835 0.3020645941589241712 0.6761795291368386529 -0.21179760989600077137 -0.12742328079994713619 -0.35443549893076392587;-0.024554968887801391364 0.37058047619572737075 -0.20410188488814959284 -0.38087552890374831716 -0.26906036102427227652 -0.49202452396528523204 -0.35284350505468592418 -0.46530781513387176052 0.42356826945769987525 0.17834682063633353066 -0.27086618266790202236 -0.050199696462020305943 2.345317090881030353 1.4309958679029357587 -0.89118258741549871704 -0.64462843068871444885 1.1239440293500719825 0.10840671444843327786 -0.4892060979710804447 -0.3471992250837552807;0.48209862018404475714 -0.24983297389065464711 0.075583571106653868465 0.426486171722772478 0.41068061248491544157 0.37023541416726435394 0.57023653380507743904 0.33353303503376763306 0.26885797961274182644 0.52773476815504760662 -0.13057712914346067401 -0.57729381187924144747 -0.72729790048869857877 0.27807014834296484018 0.42618443893224539076 0.39327361844878755415 0.52886072440498321789 -0.038744002979184358204 0.012694049642419619889 0.16808486853323545418;-0.72057917683516303775 -0.19502949331394109356 -0.34127428429929423936 0.56424291248552715938 0.12911955042159881102 1.0930241952174013509 -0.33131970344377303928 -0.48211643855603752984 0.70172549007318740788 -0.12475616572455705544 -0.23353358729866000032 -0.015945978741311706006 -0.015456274379356496618 0.044566032915906703127 0.73857627654214907942 0.23040757524519794863 -0.22493455247838359257 0.18254900565782139488 -0.50415328469738096562 0.27297085559884121109];

% Layer 3
b3 = [1.9857890347111206708;-1.7460719649805940268;-1.5071706451962840756;1.2546120255570865076;-1.1757426246640276801;-0.74756150750703709296;-0.54467402668565856327;0.6548023828230467025;-0.35142829909063461047;0.045141996787038278505;0.16563330246042418104;-0.38601318297897063703;0.35348942552318896038;-0.6483908166587870614;0.74355700818293424259;-1.0835730716022442532;-1.2718221282007347028;1.6890969644271924821;1.5451946197349000212;1.909586767654188888];
LW3_2 = [-0.09998171320879410684 0.78536858847024515473 -0.59605061915269474948 0.020510551998455254369 0.76320224269847281029 -0.52945192463573020891 0.8534442358356433278 -0.61298407520643272139 -0.29353491295388178806 0.40386353860178958453;0.28107154889392210739 -0.67614213643908516183 -0.85408235400054366426 -0.23310765346715903168 0.4691723150216064453 0.66281952657980247601 0.78577310727134264123 0.061949425899282560548 0.61953961814106972561 -0.31683395811679998522;0.67460790674289927704 0.82425721542651719798 -0.28316138594407863627 0.41650621658584230378 0.88084567537033864326 0.65540806065930501401 0.28553388255506323423 0.02994272026188754543 0.74497864332672070198 -0.61768598290631149261;-0.013396182260899953953 0.19312523874297274351 -0.34315199032935572721 -0.5138614927295904744 -0.60756308229399058618 -0.63400784354006889387 -0.71172589679441233823 0.80884884635632869898 0.78811758911774998371 0.96889783787604377707;0.55574632723265293688 0.5739973537598973552 1.2322115079417148564 0.48185264473071237612 -0.36924428225986100083 -1.1402824360870316145 -0.74013246969953039311 -0.41265252403611524246 -0.11394241212643230199 0.2581150212693405499;0.16784328052193994707 0.17551702347455960806 1.1490931362083725009 -0.31278179295227898082 -0.63979763498473407601 -0.62708279386495868746 0.59647717351680851205 -0.052982232650760824333 -0.81856346763789900045 -0.79755600925181102667;0.46363507768452427715 -1.0880051633603065042 0.26611887906663173053 -0.41026611572783211468 0.44657631024242999684 -0.74948999610641720004 0.43441407326005210265 1.1171761982878640751 0.85923028132673717749 -0.4613625864002492416;-0.84673649069497647357 -0.7759812963942899211 -0.14526101071180291813 -0.639683167354000215 0.65789346135499537915 0.8075978307852934579 -0.64683814444521170461 -0.3974213900959574497 0.39801085186463847077 -0.36096082779985538824;0.11549196542814373079 -0.95384370251173389299 0.69940882391943004492 -0.1891942808129850051 -0.79895129567095624079 0.22935055780913762846 0.36168948979918758013 0.013271272611079770742 0.8537904875195183596 -0.6712159652585817371;-0.17047626239975297024 -0.32999230781231164711 -0.54958469403388809926 -0.69676750364989026298 0.89560717561735869729 -0.55272205298546872587 -0.28364959415891338734 0.94204194120092499265 -0.52698482857179573813 0.52047186790719657257;0.81739982353574791585 1.040644906570809658 0.014056451725469756506 -0.43714761245779582 -1.0758035191961019539 0.31428028605861130229 0.1991902193498245599 0.33006738024297055389 0.34337936683886505218 -0.037391184669351928971;-0.048902715125971912835 0.072031672267167251578 0.43064173764245777809 -0.12912463108965874237 0.37345499187250308371 1.012596701033756208 -0.92035988541840063615 -0.52165957781549965322 -0.23139816711888971934 0.88068197223351996072;0.77605367233118560666 0.64867312677199906457 0.15605672518866714471 0.81300089970080524626 -0.78278436699012265976 -0.19423659968341577819 0.6594287386142471119 0.77813602605624410113 0.2900572707215330337 0.86954746015031803008;-0.55608991564697718424 -0.69312052425348780194 -1.1720776653558717673 0.34851717657756003943 -0.30347975672949467629 -0.091632897635566729067 -0.62767938182302918104 0.25720845517944534997 0.55452426767961460197 0.80615968649196867446;0.87426283979546604019 -0.97636252739005224832 0.075776254279478330589 -1.1673234545980388788 0.41623499785643897075 -0.021887487668478484981 0.44965966846712235316 0.52636878642094264702 -0.82484549520675787271 -0.059115860504512264539;-0.582595034950138424 0.62351850177655665508 0.81120231773320727875 -0.51482475581625442018 -0.74250075629374945319 0.45028583545152778278 -0.70772783936040262187 0.073026063261075621624 0.61262582800865073018 -0.5850103579913358276;-0.14639425649435833243 0.56434390235471776354 -0.12984321058612713351 -0.81092382180173072648 0.8211786868714446852 0.78578512400060374077 0.91971038969431473387 0.020674610167547149281 0.73118127343511241101 0.034796638763753176549;0.75583878741787002831 -0.80041739723342930635 0.87682475309741692016 -0.5360367188444628006 -0.70154339696469736332 -0.4167280425032338087 -0.99387905522751840426 1.5588143759802162158 0.46801327851865137664 0.30054712831585861377;0.71996431501372482042 0.82452577531430681912 -1.0237027047952247383 -0.14679651929583739656 -0.92133369071677972961 -0.10061967553390273322 -0.74460440206348765813 0.36282578045010005496 0.097686054804297969834 0.10545459989847419391;0.062298496326920055344 0.91926290160613022273 0.29666009335230275612 -0.4176479549920528167 0.66744654250579416033 -0.835415075956996378 0.085950842426034360089 0.19732217731111995063 0.20421823475618011701 0.89162106505048832616];

% Layer 4
b4 = -0.29584868988066920226;
LW4_3 = [-0.14044576789674254047 -0.6780895458657307806 -0.33949467914660724777 -0.37804096222504540714 0.91159072149617348391 -0.54171902425551909932 0.64470424621544286659 0.42297312014392657309 0.69491427207602307625 -0.2964766104958481141 -0.19246281545452156858 -0.42473622793692300537 -0.67928864591085902358 -0.20350618363493599983 -0.41942273139975011498 0.02431652246274321888 -0.43722193684399757174 -1.1319979117472831476 -0.85396449280499753254 0.01115472274418115306];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999991;
y1_step1.xoffset = -2.00000000000003;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
