function [Y,Xf,Af] = nnmove_32(X,~,~)
%NNMOVE_32 neural network simulation function.
%
% Auto-generated by MATLAB, 09-Jul-2024 21:23:26.
% 
% [Y] = nnmove_32(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-9.27187740505682;-3.65799721531803;-1.99999468395731];
x1_step1.gain = [0.104758804509858;0.255650892831276;0.50000722551666];
x1_step1.ymin = -1;

% Layer 1
b1 = [-3.4554137619078848509;3.4668347314011627169;3.5781363881066901023;2.4135250637293603759;-2.4082766147053979999;-1.2656012281114707996;-0.23712417211649158832;1.2486793063766996603;-0.77565975869718828406;0.031107977375500507622;0.75548097383448020725;-0.2284487234604473116;0.73907303364008802848;0.88922122626096744558;1.5883853862600105789;-2.3080000543123224688;2.5441469368139864038;-2.3801998564700883598;-3.2119148050894348323;3.9119520866350434574];
IW1_1 = [0.61335481301981065183 -1.3587247746800323878 -3.6020546472025838369;-2.5434458883390451689 1.2188542709862633107 2.4888106545296531102;-1.368858935719773795 0.14577293209016206621 -3.3429942946052340069;-1.1756975709910089112 2.8729674732017724814 -2.682418869453453425;0.4855920531688404651 3.8556546804790512439 -0.92113437608837134274;0.2324498299102659149 3.0773553077589834714 2.0201081247914185468;4.2249445428632590449 -0.067974814815702583326 -1.7930903583351933683;-2.049126085802371211 -1.1149312325919427114 2.9830646841062020691;1.4710769584767502405 2.7336640061451915606 -1.6094053530037328859;0.89851178212049398475 2.379142935324508823 -2.8668525082571654217;-0.058427118982322508167 -0.60275525300426713304 -3.6111636971726186474;-2.9487429698388512023 1.0342264129960274666 1.3927369695334759214;3.1386779662058406082 2.6975661234727454918 0.36220442211936615395;2.7705505467932329822 -2.8847721694682793014 0.53242499429166256775;2.7563441659474334777 -0.79134645011166682149 2.9214417837628263719;-1.604258625598507626 2.3286561524745659213 -2.3076129954040962566;0.7435326854197519264 -1.9892177408900968416 -3.1373352834251591048;-3.6352173471293891538 -1.7953523685450289982 -0.31740856419973556557;-2.4493462973257980053 -2.8008770668036766516 0.94045517285918756034;1.4502708120006220227 -1.7238947433782603191 2.7309708718888985324];

% Layer 2
b2 = [1.5091353352867851179;1.2602309931271897803;-1.0285333944327281763;0.32844452668602674983;-0.32657620857010577486;-0.11336052941829913299;0.36375407999698972095;0.92722644698363265725;1.2538610529032021557;-1.4492951489353520511];
LW2_1 = [-0.030584133717612427272 0.217788792644492607 0.19351173082674069659 0.0624566415071102915 -0.47572247648012350174 0.058432502247906976944 0.060805364112884847938 -0.41316093571239170812 -0.097923635683575760424 0.29150327572774231699 0.44775962087649145982 0.79742187432829547689 -1.0008003956780093802 -0.65748458844641410881 -0.16617305210448859998 0.14659662067939896457 0.44707289469045385921 0.38916049584466799738 0.21648317967225275127 0.34196863354014545022;0.32635200429725752524 -0.1411079461369606769 -0.45704343541748121416 -0.4131539030970380888 -0.69426610961071455463 -1.07298122437903376 0.51583203164513402594 0.30613144639748629539 0.2160369134666668689 0.11360890366842760213 -0.38671421781230425063 -0.36363252516772742728 -0.31266586509752813949 -0.6989374982841384254 0.13312468679343103517 0.054331433825276109761 0.0857575329344888726 -0.22758393697651091436 -0.13782919039742819178 -0.33808776117141337014;0.33253370402594029098 -0.23225284389908207316 1.0566985084554225693 0.8953231329349056189 -0.5426289665916423921 0.6498369445263223465 0.99441008788364293469 0.072236006832360935559 -0.14924519218768203532 -0.54230107943214811428 0.3924078155341277907 -0.93770243091620830711 -0.044322759925313995333 0.65040371245686556811 0.28781208286570536536 -0.24409166791502631688 -0.11809698426964874984 -0.02811181453484574988 0.16299676602478785359 -0.099650916515166720888;-0.25462719108258397016 -0.22623265877924217393 0.10040715928867154083 0.37395819192769302886 -0.25111293704911175073 0.44264823769880284887 -0.040967333334554621727 0.091735532589194507258 0.38705882239963868008 -0.34341855605502913384 -0.056900471881085268322 0.018879380361995518056 -0.97728829840925224293 -0.24831208883562549961 -0.29862805923305424383 -0.91218075201543746822 -0.15262311285651791737 0.23992205347220943445 0.47773180906934181733 0.578415493585828;0.54573623792818592992 0.489707670433584763 0.48573190551786626923 0.2589899896902239651 -0.98419712012895788078 -0.09950188007491604647 0.55807910407985916734 -0.61594930445384610262 0.0081978649137924939488 0.3831031442782406593 -0.13325704051068781864 0.73628503717227422598 0.77807214502534849387 -0.028224352560495290232 -0.23292519118177137938 0.33629072480913524412 0.25567120099943030365 0.11520097397337802914 0.29020632365452209145 -0.088382407167782797708;1.0983420811291650931 -0.27491226547217167964 1.5402876414130670657 -0.22414121442345208424 -0.88119352788024585266 -0.46771303427369409489 -1.4073784804205440313 -0.32084531552363265705 -0.44869164841098069241 0.048837817128608407291 0.36025868923675269384 0.78172039391732484059 -1.303460956128737358 0.54719522042055979139 -0.081221282635559041707 0.21333762211401291475 -0.37828687270073180215 -0.92021772124227341205 -0.091656993237991118972 -1.5733822440967457634;0.11472215219496688376 -0.56605122422847697905 0.18408740679065194179 0.11099117374002478997 0.67752103263171192804 0.32746294927155000787 0.94198045047871448165 -0.33357944406296130557 -0.25426340624623156028 0.39622328809517848303 0.45246362574175730265 -0.0033565897840284394937 -0.24995662895168130335 -0.12753962904038507187 -0.10421001047058281452 0.33796814073491182606 -0.43660058043419930351 0.42722696281539812579 0.34333069051216974499 0.49559781576893741084;0.40354108429491292176 -0.4434471628430609047 -0.96008852927033505598 0.012073719160809681661 -0.14509074038336430834 -0.7822457960363359275 -0.3000022840158473314 0.17958642213954867373 0.26864869133030849779 -0.0870199829263775676 0.24751836406300839477 1.0171049335000339475 -0.38072689977093793212 -0.41419412125214732923 0.41139082960967776614 -0.23839886868860185598 0.64426401721702286629 0.088697697500035033169 0.052146094796836704732 0.34576871976078971116;-0.12345991522794379225 -0.033134036895764586161 -0.27837027442666301136 0.49408990043669137604 0.23456912272888111315 0.075776338010798735545 -0.45698119012064969402 -0.61562396439052735619 -0.50365899141968817343 0.65909931723258807779 1.1359130121011984382 1.0169471021076454953 0.92172576312281939703 0.26019162754918201408 0.25340577260910024382 0.018333354920603332772 0.1217015323255578596 0.014027287851871118179 -0.44630941382227751202 0.021521881283191431761;-0.32072567849893984793 -0.22840542675831398967 0.57681627455322270759 0.64952536483814049539 0.54025133009115633431 0.19421934682371952419 1.6113730953022145087 -0.22353057314370869402 0.37172568136549083428 0.28762046366765620098 0.45669049063004590883 0.33662773993205058476 -1.3568318197355895283 -0.16628234463005187038 -0.36249174457570487728 -0.41867067573713379058 -0.3338202156934751974 0.32934824975786708423 0.26017837812881483561 -0.19555477637453244633];

% Layer 3
b3 = [1.6549041251099405603;-1.4483561440575156709;-1.430168705986530675;1.4370401938232291172;1.0205980739468778484;-0.93928447756741362262;-0.51489494232367116755;0.45675261583936266341;0.34522582361602899281;0.21295434263955401177;0.29496235459854136529;-0.57518795554642665468;-0.72565485151862685331;0.62033522807578656;1.090319180709665714;1.1353826442004049113;-1.1978710964701460018;-1.7366949925317436421;1.8593267046279804422;-1.9198592921903878672];
LW3_2 = [-0.54832750607904046092 -0.76788284917765992077 0.17627074781570584161 -0.49039787290210956616 -0.48927197436816260989 -1.6650669377600868515 0.65749534427238998102 -0.45440127775255328979 -1.0484027373257021054 0.55329189495135655541;0.73851531401188041936 -0.17966599556530063464 -0.15419454188928005678 -1.0953117571467072544 -0.34079540943948410936 0.29478517157467143406 -0.84025580602465421709 -1.2389277558434965698 -0.23176024053744506692 -0.52206594485834234565;0.70376400950713369209 0.5793584391475998796 0.40266477543295992048 1.246243064622208907 0.10461014154925510344 0.19698123544212881031 -0.86209896298029009554 0.14367579003711664076 -1.3659505639714089043 0.1832716770647482285;-0.03711432869273983276 -0.32111598128872481661 0.49267107482155125808 0.25206951502900798445 -0.76801288560921543436 1.5340193272586384321 -1.078807142735164426 0.62967699815232625049 0.093496260296315886196 -1.5878196014876526654;-0.057443091133812879123 -0.71814663716957194417 -0.70467873818301440814 -0.14640062670707240655 0.54586399873440316632 -0.19850735709416503227 0.64967667939051498838 0.86885418123790991718 0.86743920351561110138 0.4682326611234463587;0.64455954084495481471 0.72148690622566102881 -0.14599953271928334253 0.62576123688414131419 0.76117726315322731256 -0.028468292332364173586 -0.46746418952342344566 -0.20729284510646914241 0.13592568471356392124 1.0141409345713252588;0.67424096889006501776 0.39845741825313590878 0.91074970644003139242 1.1332820475552125572 0.17445034836883197005 -1.6786528669205962316 -0.58889972071213825267 0.65112516399494757557 0.19817887236244521865 0.15327330543673589602;-0.0053601821533730779207 -0.016481958238029937452 -0.97883661447402658951 -0.28208354441369737353 1.0290396476544343418 -0.41354030206538849868 0.78934830953782197938 0.51310129225207323778 -0.025830298999920283526 -0.89659851600338447142;-0.61345586225286863336 0.6479234912117870504 -1.3792367288244471446 -0.13573262402789762482 -0.75083927021802177038 0.31870628190615285513 -0.83329866369366989431 0.11218775886969362121 -0.39992530263154968395 -0.18206621156526525684;-0.2165260475688661479 -0.089496911484242921975 0.59346216015212926997 0.86515192239695570819 -0.69876933798833706923 0.38012388720274825626 -0.077068864601823647287 -0.73319353433400591413 -0.82207863479560272513 -0.8672727656147122266;0.67869750799462480462 0.80097502449731861063 -0.88290858852360265541 0.71087944957655690992 0.59640658567746906993 -0.60296828100598920397 -0.29423130557029264498 0.15004065829507673424 0.77822916814386289275 -0.40677767216031229802;-0.91233517718891710135 0.073666253426422745321 -0.58492465489881539931 0.85716461715378844399 -0.30581905551293614431 0.099133576876873491512 -0.29255763378213756054 1.1744731091441225068 0.36055790991535885404 0.70387131751156450932;-0.98978689116714402285 -0.42781630990715757701 -0.34682308662707050928 -0.86183210026764478506 -0.59343083226956139242 0.84671322563862982946 -0.0095777472884776681389 0.53241790939747080103 0.45776614228919854099 0.53196422245953600694;0.67012255316667124205 0.25027526032099317588 -0.70067165510436624221 0.24578561489393660477 -1.074920943969624787 -0.25825063356275324011 1.0827704506079733893 -0.12731087921265474283 0.2707832878662256304 -0.6456852758986240115;0.33276842071337170426 0.10384580752921475366 -0.19340088585741455063 -0.82508169980291656831 0.0059517347423747868351 -0.04434083770212218778 -0.79669544538752701257 0.90152331023504261864 1.1353437914976114431 -0.23245092836815742232;0.96574049786572291332 0.50399917785127568148 -0.8799372865414204492 -0.089450874443540731584 -0.51051350781257398559 0.62180670961959849663 -1.055054363224448899 -0.3381191395308804637 -0.72238708604429002769 -0.44431081768474750548;0.12418749438238106675 0.28742506941014606126 -0.36851971619674717129 0.75809953542596353326 0.58095571384609789867 -0.91335199935668853755 -1.1333759791484585566 0.17564743038111055307 -0.39350998431693273716 0.11110460520557613462;-0.93310445903977934368 -0.56874762854773885934 0.26105149823429418809 -0.13073797602978950994 -0.36100072390195081518 0.35160361436476667008 1.0690501648828338865 -0.61696366369836774801 0.62199623884962906839 -0.46623680670085715372;0.29140539505414986277 -0.73050111995757793792 0.01380664698024294812 -0.33012710309746284842 0.24386262242229767017 0.89354063341329870163 0.49683042455852877151 -1.0105990406047431485 -0.50946632897020249775 -0.2272911940220927185;-0.66700884643944169383 0.44203641968803897289 0.750883890462193615 -0.32377325662416323038 -0.48542494521357187898 -0.064981116908611913363 0.74316776602576384292 0.43877781956741174207 0.81178679433216471839 -0.59160721555731132781];

% Layer 4
b4 = 0.85383210771533191163;
LW4_3 = [0.40275697807801924544 -0.13948648817968406499 -0.6278252525945652307 -0.74092029433369277491 0.010678641341563280265 -0.074963854593418796646 0.60807828709752254071 0.034922767695655144993 -0.12144817023827765567 -0.018222674736901839365 -0.17936221726570575341 -0.20866998794086097369 0.1053566989822021932 -0.10736966813269284426 -0.44693646468692294071 0.69915279792284057425 0.095617241028658206403 0.72714073075421503667 -0.33179058026140156867 -0.31132593591444990277];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999991;
y1_step1.xoffset = -2.00000000000003;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
