function [Y,Xf,Af] = nnmove_34(X,~,~)
%NNMOVE_34 neural network simulation function.
%
% Auto-generated by MATLAB, 09-Jul-2024 21:23:29.
% 
% [Y] = nnmove_34(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-9.8820989364874;-3.65799721531803;-1.99999468395731];
x1_step1.gain = [0.10151410520026;0.255650892831276;0.50000722551666];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.9571857305774744695;3.2744632088086089716;2.8108461008342451315;-2.2016473154184938998;1.4286969525169894712;1.3470351113183880454;1.9952982358970412502;0.87547183579164977729;-1.7265125141656465502;-0.75129192414001533251;-0.57469088773621967992;-0.0083264500450959642863;1.1267505174429333081;-0.85953230940016500661;1.0141086113749335773;-2.9366657990905711273;3.1292972393696376621;3.1458699723984793195;-2.2365962316797638465;-4.0032589751745497608];
IW1_1 = [-2.2353545103558420948 -2.1555372944183095463 -1.9683694021384896544;-0.62648579745906207705 -3.682753084802323329 3.0647791374985691171;-2.4822332745944803989 -1.9266422905471061178 -2.3920425655146435595;1.5761367646987418656 -3.9992732885601331994 -0.4620733271069815129;-1.7923700802804620746 -2.6869888960937506894 -2.2951211309148322748;-2.663228169627923414 -1.391180486832645613 -2.5870567250684870508;-2.5646486752364858752 2.2728595579017074613 2.3184501655587164137;-1.9588627917375673881 3.2240187911328264114 -0.84294710846943199378;2.186644060056229133 0.015045943941443852554 -2.8905792148853159951;2.0579917225859887253 1.2143762526495616161 3.215948445726275029;0.25746599581844686888 -1.0207112584147055578 -3.0645163830460888654;-4.3227585909345513926 -2.9127958608025568132 -0.64954199419892522105;0.75651560479547730331 2.0160633056207108993 -2.9073457745414712505;-0.98222482730787208371 -2.6516011652349873451 -2.5887372821478793483;3.7715431395076262078 1.0258847488849407448 -1.4938967572276793394;-0.73105885306160700576 -1.6678745457654020612 -2.9441749715520666442;3.0451421887845562253 -3.2893915669491606835 0.003427635624589980487;3.2694064382808747382 0.9770000583503862801 -1.6310292414251155169;-4.5524888423554550343 -0.88852383038655879943 -0.88119665350738818344;-2.2089646838751186841 2.7778351694473495392 1.1771814706377425885];

% Layer 2
b2 = [1.3428237278563066592;-1.2377528747797776898;-0.78720030350185865586;-0.29476180984665101281;0.16342831161765192238;0.079284861371554896103;0.67576152064305239353;0.93795912261018321576;1.2031526023155192373;-1.6260390344522746009];
LW2_1 = [-0.47134333863950300669 -0.64868774616140856271 -0.41492749114955163048 0.92726666291008963405 0.13543259213323138868 0.43489753155842869603 0.14875436591049268076 -0.95657037666083477578 1.1670351033856236622 -0.17894714990238869134 0.37548180315845702815 1.0357825441704295866 -0.49529851454587497939 0.6081750963849389402 0.34864820563875897896 0.44285975612094530263 -1.922732353041809894 -0.43048886445535977652 -0.2609619947930361672 0.31065423133594516347;0.31410212977997015171 -0.70732728662017529953 -0.097832847971185354918 0.30675737892669735496 -0.30242184598681459695 0.46658434149338023911 -0.25733125278468776953 0.31068453144355784312 -0.16509000953484104235 0.37575003784751409563 -0.50727272519801480666 -0.0056906149128009096 -0.20872803738601855561 -0.52469304073082601025 -0.23293649102897312497 -0.044746496243951591754 -0.023522493131779061842 0.23042881416403146466 -0.32113771630638365817 -0.35158691279158171827;0.62597417586503423248 -0.14061315676198257729 -0.35885749314577747304 -0.31678336302848514316 0.74243600697025335933 -0.19667518701935693404 0.48272345432861257786 0.068376857989641326441 0.81756415242174906854 -0.10274675664964967592 0.21291448118015104951 -0.41437734452578672828 0.35392382719067932983 -0.24880453247200551292 0.39898989689684710713 -0.39481952221664584624 1.3272778928718993452 0.37058705936733832287 0.50077675716811076434 0.20645466738576997989;0.7767721577298779545 -0.72785648884366860312 0.10872775458668157422 -1.8961334940437184482 -0.47508176758617359781 0.23782281195544408003 -1.27992474600138606 0.082277581032214358592 -2.1159523037697751668 -0.59749119040238884981 -0.69559645233387656926 2.2821119209799642924 -0.26952110711315002689 -0.59241422278581634675 -0.80208682995147861927 0.53592699230981410974 -1.207393917861113497 -0.024194666028140944525 -0.42097138262966038447 -0.78876821178676093105;-0.43517561644243718533 -0.14282611632543362745 0.57387634803783149628 -0.22563811510988243669 -0.49446365070555364785 0.45494403344606842987 0.54289187374138059283 0.89237945402068419298 -0.5986483155180055693 -0.1251836825140900944 0.061337092108314929251 -0.11126465596602497232 0.78715493221015520042 -0.12901074511091711883 0.6649786404783053495 -0.34695953577793187117 0.0089753561180757231164 -0.097742409740088312398 0.070944619033203037972 -0.3795861853995212698;0.43876931448634992616 -0.90639134470725779558 -0.40203280366215649044 -0.49912195433403927503 -0.12504162040088462327 -0.31159906434331019476 0.52137421609414325019 0.022431257690703892971 0.25347315638254014347 -0.17538673882830932427 -0.52283058767004519929 1.7328706843222767553 0.13914946754009846486 -0.1716681666856360311 -0.76954071194973339143 0.67292287533626793383 -0.96726430681554909086 0.5245555782673015921 0.34168899137245639652 0.70800411834602849925;0.31225606114528370316 0.52826634891580215303 0.42140427594243934362 0.42711130495828264486 0.22665857606647410449 0.2245638706479145541 0.33847407504058318883 0.89011079796025971422 -0.23815645318892542104 -0.6749713987352832234 0.019012595157704561405 -0.81485949955950276458 0.54066744058996696332 -0.011726231500136760286 0.1067506643793838389 0.13949890001743803225 -0.36942411402131836162 -0.41885570651146375454 -0.27509701778132544803 -0.44143596328090034531;0.51529885722030766004 0.84118391787397506221 -0.049866075092597834939 0.072076020686632158441 -0.15082268725234054818 0.22257929516338681442 -0.48532780470920944271 0.10856269271837254431 -0.63716052594911087859 0.063723034005609968666 0.10199720071190396253 -0.062280167728950501516 -0.4123781367295493161 0.4327079635346613995 -0.32619845572579952986 -0.16559169024525180469 0.01648398017229095458 -0.24530815730250477014 -0.24118637811612150812 0.44025293204964749405;0.12457525770867640402 0.076991514346653938672 0.58584684603534964431 0.14192310949327618941 -0.19951167202736311279 -0.18942200188266053451 -0.67176509532817185733 0.23461433894990604831 -0.41589753251875799522 0.12620006245816331458 -0.34380480057134460425 -0.011805221558198559714 -0.26466072582988264816 0.47157566683071849845 -0.75377214002791315117 -0.030793347285576335576 0.37410710075783265571 0.37588226853580641862 1.2435913772146767187 0.38871449407543534615;-0.39198481159161363552 -0.19780684248655699964 0.13344906812890708347 -0.57900729008653628593 -0.39355897111765508756 0.52893626567792217941 -0.30355857345200570885 -0.12015685529647830709 0.40215139405788813409 -0.15049987699405278918 -0.21202333176372653578 -0.51781629659566807966 -0.31869129900524773014 0.59066378772110827988 -0.19719503561454729268 0.40595130924729727617 -0.35629084585048670375 -0.36241799272580460523 -0.0038728487942205121891 0.094357850308652638227];

% Layer 3
b3 = [1.876367841176820761;-1.66332836542499507;1.8112944444550207468;-1.299291147921616485;-1.0025176210379489472;-0.92620054704204057838;0.46284471600954030235;-0.24411998083176142393;-0.37298150954717479433;-0.16829778050383017995;-0.16379284022276088817;-0.29842515536298530598;0.73136137071033402446;-0.58941514578709197636;-1.3561160632520774527;-1.0081756447658074549;-1.3861450453161019425;-1.5466911119009589815;1.6141254345787987567;-1.7308418212424412364];
LW3_2 = [-0.30876740458387152977 -0.42779836559333062063 0.37371666859981256259 -0.0089112705133214432929 0.26924841198866200642 0.90805500226359125993 1.1907503075309591178 -0.59303840743526692325 -0.4561751866047211168 0.41696642353440294126;0.78227811338441943789 0.52726363881959092961 0.44553926322249853831 0.20419134904328570257 0.90773099589228012363 -0.62310735193334976234 -0.8037716331158921701 0.4939462004854885957 0.5692819115475158398 0.15982093595726773461;-0.62091898702409686894 0.23340033336303642186 0.2082816069612919152 -0.16217357680912047879 -0.49322150840347905865 -0.50461738787013399321 1.2335893186812731948 -0.0030766434066782136734 0.1341247980947758156 -0.23444143679909387745;0.075779188792423832211 0.37266029076017376243 0.64576173279170678843 -0.92859402908695343193 -0.94939008742851505041 0.27998997599836411565 0.057052312086270692837 0.037079258926586804168 0.51080881622638518724 -0.10561912360496167329;0.84854753131736537775 0.084813495766387872465 0.26801664392402613224 1.9307687910193516156 1.0377130739485451727 0.2153052882668481105 0.2980122611712356373 -0.13933690176173635367 -0.046185769042732506551 0.83791462163898533522;0.56710316165483065642 -0.019728811700344021235 0.21046538445911538995 0.39143898247519498534 0.7396355710612134704 -0.26317981458358402636 0.15410244137112791285 -0.66848536581969131287 -0.43984391807084205483 -0.91429513324460165435;-0.4403732020630092836 0.123170675820052547 -1.1530176685795077152 -0.27624788564874769303 -0.15783070360802836651 0.26261454672561329593 0.28196226002700419677 -0.79995712277200403673 0.44222766749410169496 1.2068638291958582176;0.12304637955111366598 -1.0075330282124388415 0.3257748209640097814 1.3436904631529955623 -0.56964153042959242423 0.0019751725982943106608 -0.097393385321122405429 -0.94248257255711787028 -0.61418414358329931346 0.49613994175980391521;0.4928081722769591666 0.048478044543976472891 0.22299940554417410632 -0.63118452868934260547 -0.41942292404766812197 -0.47111591123129298309 -0.83956605669001937997 0.5879007787559000775 -0.48947207882848253746 1.1606509394729711548;0.7543245133065216157 -0.43799780180430369914 0.77212052662150110205 0.2715241866734720011 0.20957432013233207035 -0.26598424220018634934 0.7471867292059807264 -0.5078453611252434774 -0.4760235222121882992 -0.22673972784383711332;-0.45459662941808770542 0.66710678345233642705 -0.59280318645932172927 0.451417073486450382 0.22732093911383899343 -0.2400967189337838148 -0.095968393307094210232 0.85750277299059851632 0.66159845229422109547 0.92000478516192751854;-0.85973526410568001932 -0.95257691469552174812 0.49897337741908642794 -0.74288558030682061428 -0.78952579337143125038 -0.56130883109392071262 0.55601394799907299937 0.64732485635934222667 -0.24284066118301589343 0.41567938324158437702;0.19965045800255071251 0.66940876815573691072 1.2722956874432280738 -0.53861884189726338956 0.6281105612429837004 0.66153604376080810123 0.74717433279012379632 0.41518681490556830216 0.4885824485688895491 -0.14591471666578983979;-0.23804087613690025349 -0.22563210898428984197 -0.24155323378346471586 0.2794246661117566477 0.74949794914756551201 -0.67158268486301009315 -0.6454623096668943294 0.48195981571113394315 0.1867510805511813643 -1.2779590062624199831;-2.6655033476917338042 0.29990279725542623446 -1.1765094486234255466 -3.0122081363365800222 0.60671232238761541034 -1.9179150822987653946 0.87270698164342641601 -0.053329291825525163007 -1.546611221909655054 0.77053973702327083206;-0.3949823876523479993 -0.19186118711404862025 -0.63536557801405513235 1.0451717885357050264 0.25464420401200055233 -0.83258735018781437898 -0.8201345910614792345 -0.054554630647936447341 -0.57008392284500153391 0.63204640306147452655;-0.68143257042755522868 -0.62492255321367540244 0.67395440284813346032 -0.38409191644610735095 -0.10192888113992745747 0.31862112842681511449 -0.32893329931238557418 0.99097356877865883096 -0.63740632502854976948 0.75086801545245862588;-1.1668999865645033331 -0.49102467296451962619 0.81591468632018848695 -0.36528049459354333672 0.45654824212636896386 -0.0070761508436859603052 -0.15831953487896996413 0.41842945888325361325 -0.32540631421006860347 0.97771223926191308529;0.53316062426651500417 -0.26291513130051447078 0.18369890182078130181 -0.086711995877465156135 -0.16587867826065599841 1.004696629195956703 -0.38757252884017834305 0.1770667281635219803 -1.1696520678474386923 -1.0593118058028281325;-0.10646967831110756841 0.89928152723882592845 0.092626687863391149458 1.2136872778081813085 1.1414634071912497237 0.32588359936834981889 -0.13211488876164068085 -1.2078508030610093371 -0.19863068296034180893 -0.4148894197599526934];

% Layer 4
b4 = -0.43650272052122107702;
LW4_3 = [0.27272734932437170396 0.18535466772337461094 0.4569040779590822221 -0.39107696533998764776 0.59508636926766567132 0.03756868183257951882 0.30928646677855697877 -0.44012821879310981554 -0.12141555129574475858 -0.1468297875182972001 -0.43385634946769324749 0.56654907194183679042 -0.51157102167936718828 -0.14958486148726393705 1.2321276936748890574 -0.37633921952909155095 0.226975571728959713 -0.5839446974474687968 -0.39634191224299586409 0.16239362694332176718];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999991;
y1_step1.xoffset = -2.00000000000004;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
