function [Y,Xf,Af] = nnmove_36(X,~,~)
%NNMOVE_36 neural network simulation function.
%
% Auto-generated by MATLAB, 09-Jul-2024 21:23:31.
% 
% [Y] = nnmove_36(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-9.8820989364874;-4.17631009264064;-1.99999468395731];
x1_step1.gain = [0.10151410520026;0.23976556688107;0.50000722551666];
x1_step1.ymin = -1;

% Layer 1
b1 = [-3.8288193776463952389;3.38568879912109022;3.1322126134473986525;-2.825258716651961155;-2.3645229153541498235;1.852886195451591167;-1.225707449655148773;0.47284799899113882926;0.37192242513860723774;-0.24083490206794191946;-0.10037537525142836703;0.79280051182345057104;1.0921399579436110727;1.4655968395156218076;-1.9410446945249542061;-2.6715525164830187244;-3.0722704960391382656;-3.5753718437314563339;-3.3451491008681570882;3.8604949382866267094];
IW1_1 = [3.3966616973283381142 -1.3378888616389741362 -0.87670224744463209898;-2.7190733785690333058 2.1042601926398005752 1.7576352763803864132;-3.5764685311392327982 0.49105426492436748953 1.0205099085518078983;0.32648305148514417118 -2.5635811709714895201 2.7504738440610059236;2.1759926286140625074 -2.8266881110412147571 1.0535227417707435649;-3.6705312102159224352 -1.7388733980223649578 1.699859787388572796;4.5558480768151117246 1.5022005585565965102 0.9226857874104489321;-1.3615882231736502472 -3.2563496719918934019 1.6418345636751887628;-3.5713582633909783937 0.50309883680508926673 1.8159612542813252656;-2.8458299893133998104 -2.5444783907308385906 -0.798245080782350791;-1.8120595430579449214 2.2739134766506658991 2.0619449583061055797;2.5597674381243429309 0.86039751008239795382 -2.4931418356122678759;1.2839446685184103814 -1.7805330851442420226 -2.9895304886894358276;0.73074408289772485592 -0.73337767547106635924 -3.5750205982400515836;-0.35120877003815598183 -3.0994192225093946114 -2.1093031797548151829;-3.5379989985162803023 1.5815246219546235107 -0.52143561430406304424;-3.8264416952730235799 0.48695921263420283154 -1.6240185817115793121;-1.474090336055790651 -2.6281793694956210317 1.911847258937054761;-0.053858497487409590088 3.1778271756557257 2.0921211789099380951;0.64231653944129163403 -3.4194304267326836033 -1.4981338668933099623];

% Layer 2
b2 = [-1.5264712899308423566;1.3420839354873799198;1.0074083653905701041;0.56571550119116909006;0.20752981764411840282;-0.23814537765217355658;-0.5518721919943895271;1.0302170949463607119;-1.0015547939783002729;-1.7271475579739246076];
LW2_1 = [-0.053623774180464003902 -0.32220520253238055242 -0.019865099108309962339 -0.46834851731401705432 0.20341874706299714615 0.60239579530738907032 0.16812954555255776867 -0.58976474315922888803 -0.37234001738683580873 0.44149623609896782028 0.1891883602419592858 0.5153350165772063729 -0.16623729855751767648 0.51461207263286856683 -0.049431828581089909402 0.23679592641758537286 0.84744938401815872453 0.49272263945906868976 0.11312580792741228075 0.32545773752586282246;-0.14963936638557692738 0.49712746877333158224 -0.26047006927074733973 -0.2127942059925105045 -0.39316480512800122682 -0.019177690371210660142 1.0831594852438459764 -0.57445759211250335685 -0.044516114192962162599 -0.19190795436933127949 -0.38451223873977213863 0.24905044498953796128 -0.19745432621951589103 0.72826797167262569133 -0.46333887576846699563 0.16252149736376481082 0.048001018823892946386 0.80576818232897395866 -0.41859474534874507867 -0.19624748538797878727;-0.38671187115798838496 0.53344911643863246464 0.18096497652802051581 0.85698329187772881443 0.22503405433367629218 0.3231362104367568322 0.23823642566458419489 -0.17626804076972046875 -0.53505245599688600056 0.39878277354687058365 -0.45452825839589222623 0.042691871156459171299 0.16901593029865810691 0.52387815524546577084 -0.56974565696635615097 0.3603577638638159053 0.049427810196290666855 0.021082993075232842051 0.40618329129079144835 -0.10406995939952808083;-0.27696612839644169091 0.11119814483312874531 0.58907240081038303448 -0.058322993598844290186 -0.098793706916501661253 0.20339241651196326988 -0.13031471502852043365 0.16289685612634707823 -0.65620899480469840892 -1.0033956560868957375 -0.34099279437972118689 0.50027535690171964777 -0.18520500882079171667 -0.28112162713863619867 -0.59913014535555764173 -0.1784495048402794104 0.43525823689348597245 0.24191933014296546078 -0.14223510942876885221 0.018500172170024350993;-0.20678185478728516866 -0.67620827510150893769 -0.11776045091705178436 -0.55377927043893482306 -0.022015380675835586471 0.11776163669694147962 -0.26046152782092446554 -0.37911583952420113697 -0.086392228332791948242 0.76592148100311663317 0.1299156042114308629 -0.3339586062474498851 0.62107258617717520099 -0.25280708711948152168 0.03682756006964042067 0.44364301599339739379 0.16349383539282799638 -0.61608639151510835585 0.45199113201540086493 -0.28020403222286455192;-0.33264790218302103808 0.13323976279959587332 -0.15878013609238103565 1.1048544717167745333 -0.31278378226314451638 0.4042445476859797826 -2.5845144436933673582 0.55926695518389923922 0.85758118112795667098 0.77835688590389373598 0.39376384420653326446 -0.090429453952949850892 0.1021262395374381432 -0.35508804415196504323 0.20998721032343023452 1.2729639051968151264 0.98127593998727546953 -0.31081802376044825875 0.55014403010494017376 0.22807124638096362701;-0.053912962304151712534 0.47941570337079530972 -0.33336005269233337511 0.56759460538826567166 0.35779390332040084122 -2.6038031623621513688 0.64408355166183484108 -0.17844428537267953416 -0.66853049790223528781 -1.6389758465194881332 -0.31636802119344131778 0.48615239286318973067 -0.3218736316286504584 0.22243562320411447431 0.031052023351102565202 -1.2547947892313617846 -2.1631415177362804947 0.023582997547730650406 -0.15976177322504481193 0.24927637449080264354;0.42360012063991481224 0.45698265364796225585 0.23391895756057864975 0.25748920354474291727 -0.15963419441389467557 0.21221673982468503006 1.0492836274332377755 -0.3355365052612115373 -0.64752894424811313634 0.57627518796566612469 0.26621134269632934499 0.54783681012363782958 -0.091895640620139329435 0.20019893938975663605 -0.086819940621094923716 -0.054610589399509190667 0.20744500414263142285 -0.45879206001511896318 -0.42709900625664076745 -0.31199275248702729169;-0.55106554817173025729 -0.14132715474985885207 -0.60717683751084383648 0.18290834962347110593 0.060943999929090414414 1.2297567103998072735 -0.18734553118090338519 -0.27602703145033025134 1.2065383719733582257 0.86254599098198991847 -0.127948889938783672 -1.0597214999608297603 0.17036966626672570002 0.031805946318513876603 0.50809108350791720721 -0.17805656907779482401 0.80715287444822081397 -0.57865201271708976982 -0.38955875262672318149 0.62729419067960201506;-0.36568718803773181403 0.43327458306782096198 -0.72594845900478266465 0.15347241713212714243 0.55121506063199354752 0.26895053927880563371 0.94898420017503148927 0.83503829406925833556 0.37972527555762713991 0.70334196128035553208 -0.13345265128403441257 -0.062119952896910038409 -0.58871240551750081416 -0.62275487557171171904 0.04557168387897062023 -0.031434358185438548983 -0.40111852441790218915 0.88954960621166101475 0.22339476724379705996 -0.65542199445733861918];

% Layer 3
b3 = [-1.9843239765797564544;-1.663134031898635623;1.4634139163227575242;1.3019655371416365419;1.1844675405556566172;-0.98433231156912559534;-0.70306180429701725654;-0.39668857961656323052;0.55827290183724764816;-0.16395871577917853212;-0.11588029183209434814;0.18020889755617883199;-0.39723171388503097923;0.50406724000255098694;0.8857691773210084607;-1.1326514277127301966;1.5008808648316152023;1.4880760817581095701;1.4892989367587801119;2.187983559676540235];
LW3_2 = [0.10190250223048483158 -0.083700199585969095595 0.37792313543350114502 0.40323534307020780787 -0.29472675968295192206 1.1425759663518231246 -2.4288489398234860417 0.0066936896230083454962 -1.4178511046492363601 0.74477775658925604585;0.18232493003467836745 1.07712157994147395 -0.45632114428147912966 0.36895869920133145259 0.24418839387851623557 -1.8911193168469166981 -0.80032525875056814701 0.78512259474380652335 1.0351110653470694256 0.71328426839057657016;0.0066550363039325271738 -0.737685137500096344 0.46076658504461281973 -0.80809596725785248772 -0.14836918157889431025 -0.63146442560840054803 0.6469534528162318443 0.69480681046850700788 0.78968463573533964617 0.32590612991433592915;-0.53773341096659088567 0.052648127817307904808 0.68467372041978724617 0.5946173359016713178 0.88679514375049617314 -0.58533676264459522098 -0.32206037847238211391 0.024610501495423795643 -0.72267435300119631236 -0.85231274152317926251;-0.24509724502984406302 -0.47838492049926278904 1.1100773516027686583 0.95876871020887510788 -0.27212830360428014176 0.61415606768284203287 0.33760687152651647214 -0.37679647671662441777 -0.2298658602246035354 0.61617577139073742565;0.76789198209989384392 -0.40772040591519137509 0.52411419984110674264 0.47533742582778421015 -0.45007277189580030541 -0.62850661949079367208 1.2481351873422394938 0.28564821304557636017 0.69491094121253493832 -0.20287394774223424521;0.19312112896714014876 -0.020148317963441915446 1.0899122457576619905 -0.77649476522598637196 -0.46874249940381573776 -0.16531543817645352745 0.086434312451211442463 0.20512317798759488463 0.31084210411073981417 0.82899462883283325798;0.51224134022205869421 -0.43113636727921889058 -0.71600628707771540871 -0.035999200923439819699 0.16355192358820486165 -0.54148095216172653643 0.98380089529761238776 0.28131488684650429732 0.22997042286245572562 -1.2222504824664384149;-0.53973051038752517528 1.019938320205941551 -0.3030499071682944412 -0.50290826058364701545 0.77326952956511529891 -0.92220486680975211069 -0.03887931351602403468 0.38229578490993981754 -0.0038297233724427226509 -0.66001125371428526201;0.87007433333460204583 0.50912750105668869161 -0.63183101127417085063 0.10511651549622376411 -0.63580088519621169585 -0.6744302267144893781 0.1853367558070591059 -0.90607022094110978294 -0.080297114693400381547 0.95610099271745785376;-0.28096366037427794593 -0.20799800011992622406 -0.28601687429469796475 -1.1204641765107679063 -0.59433980639395034284 0.54146998368518661771 -0.075463916863762678378 -0.48876444237173721774 0.76317767938220937296 -1.16828556440846687;0.99084975064645930409 -0.31653110622049057676 0.18950171173055294083 -0.964426938760551411 0.90738694245983286812 -0.41034978146637718366 -0.74672170006267246656 0.73853186808351045656 0.17574849496344124855 -0.035412750095462332267;-0.52528074529768542522 -0.10107407686593228302 0.69874345992219355495 -0.32944371935428584663 0.46096378187424730255 -0.11756269442217180676 0.12144315643411771055 0.9943842292120617099 -0.85106966640808845437 -0.97304349988960492368;0.0067927638090277782032 -0.34497203149183647275 0.77665228126348895277 0.046400689454646162901 0.51102693496126627704 -1.4091634655675475685 -0.058809772667239308686 -0.54800136622318129653 1.1347597353217453442 0.87102269828129841311;0.44245236246256880452 -0.71761898275031643646 0.11955748288063564044 -0.96640721098049242599 -1.1815071656397715394 -0.69021768268907435218 -0.076087020631780549751 0.47434985366193266332 0.2022116140708566101 -0.11002193303026111537;-0.27029706623250138176 0.27510369880349294647 0.76671426159257582977 0.39219681494858832371 -0.98009822695146353588 -0.15984031250887290043 1.118519807317563064 -0.54908186043032491952 -0.2749648833513220203 -0.0030572749958396976122;0.22024580507229657433 -0.16096299538391931061 1.012729833117729239 0.74233754896631687359 0.70397812101722057054 0.40995801009788651603 -0.56964888641398747637 0.5009443640593209679 -0.61934166312418148514 0.1209373831087943163;0.69183253212358186701 -0.39863310615358321654 -0.15784431735497533866 -0.21206082546365245811 0.83688063892479824801 -0.047073797798833215411 1.1362918015281151529 0.72278380061186853212 0.70013616440776105243 -0.52690668050575684145;1.0891126659253724807 0.85315281608142656822 -0.74880575641620961136 -0.85823291605182983055 -0.81565274717518809755 0.99701601265143513508 0.086748189466527944602 0.57049040894306202176 1.2657539079371751267 0.10512707274364782584;0.51791121554110364222 -1.2421762417922936894 -0.27428531502565184352 -0.7546695688075009123 -0.35845632089824214228 1.649487625155001469 -0.21391522992127209868 0.72346142115165290587 -0.93700667576496066147 -0.8541679959722746629];

% Layer 4
b4 = 0.050421641199508385189;
LW4_3 = [-1.5507137321458561718 -1.3146398979124360729 0.17345623183056907424 -0.5645644958640970712 0.35415816198427496619 -0.40078786784562936418 0.39127653047226024219 0.673724716046725014 0.3730879661024149585 0.61190318679018762538 -1.1862374350467694839 -0.090868094944882030206 0.21234500809180964498 -0.6119837086294382944 -0.20431882747596233352 -0.73340013364077671909 -0.46948039337439784191 -0.54245430331974242577 0.57969074730450032007 -1.7168305853784848747];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999991;
y1_step1.xoffset = -2.00000000000004;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
