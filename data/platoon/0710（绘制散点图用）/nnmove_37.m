function [Y,Xf,Af] = nnmove_37(X,~,~)
%NNMOVE_37 neural network simulation function.
%
% Auto-generated by MATLAB, 09-Jul-2024 21:23:33.
% 
% [Y] = nnmove_37(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-9.8820989364874;-4.17631009264064;-1.99999468395731];
x1_step1.gain = [0.10151410520026;0.23976556688107;0.50000722551666];
x1_step1.ymin = -1;

% Layer 1
b1 = [-3.9956707861971816342;-3.750120326888568556;3.370919765132996293;-2.7307554610673085982;-2.4639833487652849087;-1.5348930102693796318;-1.3345842031046404319;-0.096261997581957206571;-1.3023481587434879714;0.58679928844006201683;-0.15798746341164490725;1.8442697566834536094;1.4285594324882044948;-0.65363115337349875222;1.5339764091551220115;2.313103021744875587;-2.1638958347670658178;-2.536075151230898328;3.7234938302148168354;3.8851894910619728662];
IW1_1 = [4.248682956243198916 -1.4308331203158497491 1.4872257634839878282;1.9164157876616310094 -2.2609537857954165041 -2.036763212529784095;-0.30539887126081721735 -3.6597698328284979929 1.9410070871214031296;2.2275979121849114328 2.1718425623254131729 1.8307862144789135428;3.0325742222503988543 2.0289369684225304624 -0.82547413422034821018;0.91299752023418445646 2.7937543318039215201 2.1832867948780498857;3.1612034511543578574 0.97108396324794710175 2.4315031291340938324;4.466209575747567051 1.5775647498411842218 -0.15509947177616431602;1.821853769803835732 -3.0009660569595379975 1.3875017196283563337;-2.4036783852187815214 -2.4708182569862109368 -1.4181268056257256838;3.0720971857671801608 -1.8930903259503926161 1.3993498464321432184;3.501545474950506609 0.053154712506876589106 0.81281243709851558332;2.189311923179109165 2.6229570812639524391 1.8066009545673491488;-2.2328712719475278803 3.1620761564324948445 0.55762196663378060801;2.5553766475890751231 -1.019558765210685003 2.7597911055920905099;0.2292199159984753265 0.72177703113652746936 3.4380032234254893631;-3.2055461809537377782 -1.6646591304953768375 -1.9937753346237070406;-1.530499891213753072 2.2285263909031511886 -3.1539764335380424676;3.5540843043348067098 -1.3434042434431698876 1.8557684042061901586;0.86126364291865831202 -1.9120777032147620034 -3.1430593295805571152];

% Layer 2
b2 = [1.5376269465298457728;-1.1714094435163535657;1.0396914570521316179;0.45929131787995375324;0.3817713121615763372;-0.047096956655878111087;-0.59136923060240154104;0.90940319425508342466;-1.341498966044153196;-1.3679084306667823601];
LW2_1 = [-0.40672076032702841886 -0.11042765093143493138 -0.022023380362046464376 0.24070882378331537321 -0.78745675025237049649 -0.53972851135737631711 -0.36567399551910928501 -0.064216093539779667276 0.049079301571301414686 0.29893821740328951897 -0.18277475805222306859 -0.34805610182233653882 0.29864848717105779707 -0.38595089692069101117 -0.435303893092714278 0.52264412496934653518 -0.42559025348318929582 -0.015443780436395136008 -0.43233860929616552138 0.059247528225774816202;0.24308560489795391635 0.23751178681683052241 0.4952708976950376818 0.10715821235204346651 -0.095220319358737343096 0.31901217588911717771 0.393325047396812566 -0.19889777711485800982 -0.64159198841167652816 -0.21181510780071122202 0.13885118641298396791 -0.63492709593348828356 0.55747113062914244175 0.11689585265699092842 -0.61837662061095821642 -0.60186753080674149086 -0.83475068504725391527 0.27569247915691164064 -0.084193766674097211822 0.3480170816333332251;-0.85820482277742327071 0.18611601420300827314 1.494766523404277736 -0.50629422555491776503 0.34811334217373768318 -0.29758840227342669982 -0.50402828365183127701 -0.70825648130737028918 0.40129006158861663112 0.1999061917645844344 0.34124453527763820571 -0.90792333780697109802 -0.5125748713969561221 0.043278080817702402339 0.35905629699596125493 0.13746082400859724326 0.59559498923309062146 -0.2232190383366593478 -1.5333010464804566197 -0.29858641616319470113;-0.31343111032492199097 0.69701634416592872512 -0.56123319131246540703 0.47910011978066890936 0.42926254037422567622 0.10755956454302892378 -0.7706067300940303566 0.22726587464882710976 0.2264048853889477908 0.33380869580851574296 -0.054514891033345391769 0.70532769805476158709 -0.87278078598447728087 0.20306327008257951672 -0.23008111295707292521 0.389097202446129109 -0.32454056510153017623 0.53942902098048817194 1.2545553913849598615 -0.29467069333006568055;-0.3892385654762613445 -0.81435202344966295396 0.060721390625521454165 -0.27792646096937778655 0.06263788441509224314 -0.22385463171598743437 0.17211547457544454365 -0.18090479405208773067 0.81855794214442822998 0.16748139069924844469 -0.68159358643962186797 -0.41656950853629481912 0.21432253350825408722 0.36326373386792254472 -0.35089246146329872156 0.17852584834845261486 0.31022422571411856218 -0.12665755416032770109 0.55025581396190670347 0.33092010839205437955;-0.83480229342848977225 0.17096188344358820288 0.029979410765024108038 -0.35721472329723091832 -1.1851471812369356318 -0.036513826648068500869 -0.12616816989377738212 -0.63495678124669685527 0.3950419807740084277 -0.56821132115326755674 -0.2753373658760112086 -1.0069128111700758055 -0.36850407431738418929 0.47427150854161320703 0.41958774633336559656 0.49258404397509009121 0.53709738646981497467 -0.47937305919164002743 -1.2566154533780573566 -0.31855932347759802203;-0.92108082190792195387 0.62881795893950087617 0.43678975865831903835 -0.28513009796048577327 0.44359043510459317261 0.5437128612084820567 0.73111913589698440674 -0.58639818934175924614 0.61355987636905584548 0.20069309817671260321 -0.049046160814688780083 0.60766757438289165094 -0.40157469175604176836 0.75570278678191804556 0.074216631773169838837 -0.18635715228626126283 0.1860334141324755941 -0.29975236737793664599 0.5667882834598730879 0.036947459640708120443;2.3690963697984939174 -0.15952645965850750787 0.85133935776241753679 0.52473898054229639598 -0.43173506265898292655 -0.75626301624259817391 -0.77661663445563422492 2.805994859637785499 0.28049932527346332911 -0.97879326336561622846 -0.87525521193493582839 -0.41143146188870272084 0.18453726045406232403 0.28459258651760283021 0.36346841846074989801 0.2570481809897566805 -0.12855660600506704783 -0.10889343973296604362 -0.16036615019640149127 -0.37131529888480202528;-0.48411731854357631377 -0.35440446455782942392 0.12593581706478459981 0.48119967575572497598 -0.4047752001454472115 -0.33747496881530963941 0.17457599223879569084 0.57007261136882503294 0.086735629756641896559 -0.89007829759228673794 -0.65436588502739434503 0.14308248968176170979 0.096818736410265032744 0.27966302951486377015 -0.095270106006331400916 0.058110073786446003741 0.14909509266538059635 0.66911470313636012275 1.0178149109320717702 -0.22578868349319897169;-0.78141848726572626926 -0.91170898414765122464 0.29262790692881568422 0.2903188420529762559 -0.39439671998077791004 -0.5038510771023032575 0.083663202640776701546 -0.94086585850596848868 -0.1992998311580453652 0.45981322353304099337 -0.50251753227451423367 0.087005085331426701423 -0.31691079556024948083 0.0097931598773583865281 -0.4007393073423018981 0.40284783305750665461 -0.62716777645412857822 0.12782689475593528305 -0.034975233969965567604 0.39600192351137791791];

% Layer 3
b3 = [-2.0284074710341961634;1.9798720184261104915;1.4804088737531828635;1.2599188931662488322;1.2997055184593888644;-1.0645767648788868609;-0.82319536812922999847;-0.55940328934819494311;-0.20230259472402559173;0.20524250596485388298;0.20570154677244129049;0.080460871621235774409;-0.85651386266248019652;0.88074249369011459176;-0.96912505928556591517;-1.2460283358907799922;-1.1990692615124527443;1.5510799737420628563;-1.5122404555497386269;-1.9102949628484744427];
LW3_2 = [0.73657594128447723136 -0.96889093962624228684 -1.7412184837506363699 1.2267060727059400094 0.39454444129027965715 -1.7551591010640139601 -0.2755817890257467595 -0.095392971289217753927 1.1346639290468112371 0.16099918797090770339;-0.36104010123873792049 -0.64072577235028282949 0.35265490351639405819 -0.75280053170665239826 0.21397266581992294143 0.85409180174494980786 0.40003500802064267949 -0.66062708971756600729 0.24036947380213063985 -0.73821017335334970788;-1.110604285405142555 0.94805034773484131438 -0.63992513723497468359 0.53208920479108123835 0.52601972709156252783 -0.64988467589684550951 0.55632723430669628328 0.33217515212496306898 0.23096483430511532964 -0.2431832249176207883;-1.0720035580357747396 0.0067877467075029840338 1.4067577966293638436 -0.013210219233859444438 0.89623505195380614996 0.25640353408185939665 -0.34560874076058695215 1.0405214170443821686 -0.018885340749375471858 -0.5710635571567614921;-0.44692392281471854387 -1.024840786199125775 0.31638946175377391512 -1.2868679393745070527 -0.11866713757948676999 0.18390022398399566428 -0.1446157498124668872 0.2146804312892658384 0.81511462876389872978 -0.4878017999120809467;0.59543749634755527289 0.71739559871558589155 0.4892200765333633572 -0.7188183858515518887 -0.22978874791818806878 0.31941225764068448267 1.1856349366951597357 -1.9566324168319524368 -0.86853450672004317568 -0.22269836034452897278;0.37274913374276635869 0.51754567617490421227 0.26155311051301621816 -0.84637854367709641767 0.31765812239757607038 0.40417245487828690198 -0.522433774114621996 -0.74631021285120180409 0.5796886813134154437 1.1519990481715500774;0.26683247786865871287 0.55905035407700220951 -0.59843794408080375202 0.021779979482076543273 -0.83914548211090211893 0.046393192144028823354 0.53477024811592177578 -0.76498613984919794362 -0.058115315578126228169 0.84246704711655273634;0.54478038179786913986 -0.6817849281702705877 -1.2686321827078732571 0.35094400755824767257 -0.5432779094049861035 -0.88842928098658768832 -0.79547187210693259818 -0.20780572881517736517 0.66749757518225183439 -0.018630184900927767438;0.034382358963661485696 1.2255043276259414142 0.36206369285007372616 -0.71970694079825159317 0.019776679786857515042 0.048673424339733532829 0.371392228584313977 -0.58386368356422102543 0.027502727335055321412 1.0248266593583341688;0.90295819385806252999 0.13806430675010766818 0.30886714596891073903 0.55418472892136216856 -0.06205666033710972862 0.74422433231378237739 -1.4296265259806524295 1.1993055318005363397 -0.12975270558168464086 -0.44672954685478211134;-0.034642654516952919863 -0.1112347857559269626 -0.49138909972267658111 -0.68634754700519606807 -1.0328784329848283985 -0.47835384035389960644 -0.43370170705703486869 -0.14990944427844221654 0.66531052381722100009 -0.61692810065785574913;-0.75154953057091022917 -0.87859579897726047815 -0.67226104243566864316 0.82065384502157900926 -0.92250438059165817961 -0.47343063635900412001 -0.58465987253370932386 -1.245103195253730588 -0.3677021195634046502 -0.2148409346349544613;0.67892312106394470117 -1.1094905113816295739 0.52359819020779785337 0.78652449520959788476 0.678470314778007344 0.62965589265768084903 0.4828479640781233595 -0.033787755096673012523 -0.16607123434582782284 -0.46497294509490150194;-0.81747995582763111067 0.28431819134019598039 -0.80602837238368740813 -0.63113504368555473079 0.52861949871020152969 -0.60426940711546295315 0.27326305020498431464 -0.75860057139323278097 0.56381630667765725295 0.44583093471758189485;-0.15037165626611076474 0.9231777301075160258 0.21644626237124484081 0.29842376527450853452 0.826536022687329619 0.68521961726843838569 -0.32484904235409006734 0.54470003664133204158 0.90817639212983958252 -0.16632372384857568859;-0.11568196095930910472 -0.11258814514741362356 -0.52905565926909015051 -0.67158059241451462107 0.42529610491745989398 -0.77892274767099600741 1.1848239351049296708 -1.7769083263687786012 0.92137020108219558345 0.39079863202802023192;0.83347065768238481898 0.32873300299672736369 -0.76956235941516948351 0.073205932915974825104 -0.1215630435084565919 -0.94673303908425365805 0.22702491201009988853 0.49920555346265205188 0.063847022831587399438 1.1217076793996700879;0.019449849541328709246 0.014726730691419064739 0.91596623991901948703 -0.85683225751750069499 0.11368279260110532303 -0.99621385039195320399 -0.045252901684764465506 1.5773977820098641356 0.37745587177387890376 -0.44900226091521538985;-0.35172925944679922505 0.35184661506282977061 -0.47500593809328112149 0.79561448099036580217 -0.62444115243945752525 -0.75509215036879340222 0.25625097876410746212 -0.11889609446971510787 -1.1228506360373295969 -0.35818840236373428176];

% Layer 4
b4 = 0.49255799355460744282;
LW4_3 = [1.1233115379833649161 -0.30710349632296740641 -0.34767595182866645187 -1.0362915640093495195 0.69596962475183432595 -0.98138632091108735089 -0.36708543642981239508 0.11412232563484234205 -1.012825934049858434 0.57161877853380060888 -0.64263967955129497334 -0.2909785561563951739 0.72164883204903285119 0.63355538007601919226 -0.085531909962595853436 0.16121714076887180833 -1.0235483311243784854 0.57231554250144056617 0.56290705618061886994 0.50560436229135585773];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999991;
y1_step1.xoffset = -2.00000000000004;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
