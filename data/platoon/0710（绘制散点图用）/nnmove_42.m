function [Y,Xf,Af] = nnmove_42(X,~,~)
%NNMOVE_42 neural network simulation function.
%
% Auto-generated by MATLAB, 09-Jul-2024 21:23:37.
% 
% [Y] = nnmove_42(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-9.8820989364874;-4.17631009264064;-1.99999468395731];
x1_step1.gain = [0.10151410520026;0.23976556688107;0.50000722551666];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.7402307619798391691;3.6292167996843476274;-3.1030845333093042271;2.5499132316292740796;-1.9853029940192412628;-1.3924582415127775281;1.8251343465551241874;-1.2369126699977017747;-0.32449459632703769874;-0.044333286874702296232;-0.23386925899337246415;-0.30456571793570375029;-0.41227651716695251638;1.4026712292114658087;-1.741571467938013873;-2.4284608190266196992;-2.2974416971162381351;-2.8460143527785120021;-3.4754595257973552869;3.9020827022479891433];
IW1_1 = [-2.4423644378475497518 -2.8553285041149734091 0.8469400247637430823;0.0059801602548054527686 -3.4337092264327084834 0.83449247122461567283;2.390990257284819176 -1.9399998001315441609 2.2332130236319001071;-3.0531721092690360386 2.1740944202528234008 0.81681632067522269569;2.4732145730144012852 -2.9329023221459169513 0.27409098094367712051;2.0822031579812745328 -2.8628901579033674274 -1.1844941566975437652;-2.9817321035703190368 2.1836542204978290904 0.42959945930761150867;3.4231940783421004326 0.11499808191719365635 -2.1314173786418022516;1.1145965341588575104 3.0007914705251321763 1.2101139308894666158;-0.22717236814475633144 0.20411109919064843177 -3.8167598143928684884;2.1923183996755075675 0.44929033308378374389 -2.9133709254532953459;-0.54402139297979035248 1.5581721594373536544 3.3827412291845466719;-3.8292223884861873451 -1.5006274578566400901 0.46134733356416696148;2.4721010485686258917 -2.8890057701510722943 -0.68830650875268040156;-0.80419490291899242695 -2.9674055984911316131 2.3779989686238938162;-2.3276360547631056441 -1.1181939322747136423 2.525035898886828889;-1.6447120993218293794 -1.6319259428578423154 -3.1013155020323872613;-3.2151693407529706725 -0.56895777967714755707 -2.3139299626514966413;-2.9788702909259074936 0.25712800108346856032 2.2448214158591732748;2.1620525281451290489 2.1488064477672152996 1.9785550744207862639];

% Layer 2
b2 = [1.5112643477469767106;-1.3843192829103738717;-0.88842042019735401048;0.12599633809342195012;0.13414964197784248756;-0.29182552310816595176;-0.62755438112751904534;-0.81634545366267174948;-1.4439796337364139145;1.755928148204818795];
LW2_1 = [-0.246340221012392252 -0.16446715030468175844 0.17573707659180110019 -0.38202633877386699135 0.43264812477735475893 -0.68817497766815471927 0.4701752617624085917 0.26201550996943984151 0.43513819126240904644 -0.34519030196933270238 -0.052245465769826568425 0.41900047358014064214 0.36707609461567208831 0.41167895332049242452 -0.076593946796232895147 0.51356521000844979064 -0.01314812465396261211 -0.40912869961284864528 -0.1143175138801687668 0.17031012822520624761;0.31917181653137244313 -0.016388845411434680571 -0.39392472238704762111 -0.64098280887627678837 -0.281568141583907805 -0.68420502604612254416 0.0071535012736645836595 0.94668007749545801666 0.58566765369872930691 -0.43633873738849499047 0.38814640614513390426 -0.23233186982975001511 -0.79371825424670561233 0.034228304232095690951 -0.047937209401808553166 0.17608348023415495986 -0.17817097549662613831 -0.58453832784641357456 -0.061152654641055938234 -0.21789483781404203611;0.082911950814714446834 0.56980334884231775838 -0.56762842448613692881 -0.74602174265858645086 0.28785910209722509467 -0.11106366148286264672 -0.01651309647712364409 0.56355078053282070538 -0.29858470835364830931 -0.18473690411467583172 -0.51887717211597916833 0.20055032010665926889 -0.0746139868859279215 -0.08800196199154988741 -0.33393832221001457095 0.39510926557025455308 -0.6866441712156982069 0.1685472158713612334 0.1111795085303422248 -0.17753322333553112067;-0.51359601116684350242 0.2109654856536271883 -0.37809164698412189853 0.22026753368794402266 -0.22920496506730200781 0.65701333903088832145 -0.002513236948400174222 -0.15862771574908743344 -0.30441309422058970835 -0.39130563265180268173 -0.59252990842158448359 0.44518313784810381595 -0.33711419068040304747 0.50478559696432756532 0.58024628593783278419 0.93318182450653686111 0.2328656704095664054 -0.30891963389592974609 0.36504282421807188186 -0.77487975603747738518;-0.43525837555943935886 0.6593679686614422053 0.43194207003017442981 0.33206887009308111436 -0.62684190103160219998 -0.49855876606840876519 -0.17292559210564648065 1.3690141880830846155 -0.14805529444550880047 -0.17514317625030464964 0.075556967263364430143 0.33603810678169904191 -0.34107361899671001515 0.17761063146781466693 0.012338035805519717569 0.38505464938678063413 -0.47943789225979016599 -0.85328057320204842018 0.023383975104198265887 -0.03816478422408772081;-0.35176228292563127553 -0.6410716788873059846 0.63875443976431556248 0.20215502343096938831 0.35920395192552290187 0.073927677614050779642 0.63105373721244983898 -0.12320819300081271852 -0.038404963312736704883 -0.052463108988302704916 -0.18504985086768702129 -0.23879170834333121598 0.94404373585312251205 -0.14017011505973603347 0.18853257055529332176 0.33365716306309090022 0.081926051451195844311 -0.52668024261141455078 -0.22016295141534097946 -0.50483559869495442385;-0.27677802371790294345 0.15387640477426964281 -0.29429575765858667635 0.59321577763067523392 0.1695015248794237428 0.048388432934840595878 0.22804988089101757565 0.58825234643185397854 0.095680133468735578672 -0.47415558051734790768 -0.32862809611789917108 -0.43380115272187136366 0.45413266646201200238 -0.25553354234996478178 -0.49593790089931738541 -0.42891019066926161507 0.047469615580837308533 0.26472498881020883887 0.034699208135978577838 -0.63512854850245881178;-0.43882891135544682681 0.017118763708554723957 0.4538368574350586937 0.019479571815079997632 -0.19021753562978133134 -0.31260837832667776048 -0.5135589430992874016 -0.012719525731975132171 0.48376185041591507341 0.50293963473831515554 -0.41776915310211548693 -0.10835803645712888121 -1.2903746993578533164 -0.15897334871582138871 0.28077786380029245983 0.042263780054642277606 -0.81401604317015052725 -0.75661516552225838161 0.46882243995464650821 -0.098271008107078269833;-0.54678132505921017703 0.29664741800801774918 -0.90277590559391496239 0.39172339607418227292 -0.54841031506286930242 -0.04832887550393225734 0.14742644201636728729 -0.24932142044027150174 -0.35500423574240846936 -0.48680289464327058946 -0.33871326523023442823 0.23289063587563357816 0.9736619830092300143 0.13464419822422490913 0.84065263821078872741 0.36269917306086330022 -0.081770731297470741761 -0.39193328535854321526 0.32562292124459785159 -0.22710420427738289839;0.14573085164345658815 -0.082837831617572535436 0.24743529498385788412 0.035829774342819371846 0.7205442845962586329 0.49537886243001488795 -0.62984506369093207212 0.38389439417120757581 -0.096626174997703359604 0.13376153188503187019 0.40885013580213525053 0.50381689245930583176 -0.33191455393671653873 -0.45093477182851104956 -0.59547128615918187844 0.10119761402199410616 -0.5624933015067070663 0.45126041105187686409 0.34799961913014548776 -0.2443226557014090139];

% Layer 3
b3 = [-1.9258053632060232463;1.7689738350958914559;1.5271308363663693708;-0.983311397775395446;1.1305006341895260658;-0.9039042790027110863;0.56481484508369661501;-0.56020784329043260552;0.25298555752377893668;-0.1565656705657080261;-0.15426152881434143649;0.096546245382557238646;-0.40243507882486234672;0.75597628441629549645;-0.90564640099372362148;0.96947704849426652451;1.1969268265153441;1.4743213049640397916;1.6061935607617845445;1.873778761224646372];
LW3_2 = [0.19940564089302556527 -0.25158198435955786421 -0.86764820337283810048 0.31850332605987374812 -0.66448178445206673715 0.53735042866029891773 -0.65494585479470990297 0.065206032910487876642 0.89820490764798799344 0.88711238780903478585;-0.32536034931762330968 -1.0214897663730533317 0.74759481368332780793 0.5080681594578050353 -0.37748099140674784557 0.82589094076343994022 -0.036322176206358455786 0.45061627946914134535 0.13879977801402137993 0.61024725786882261236;-0.45113888795510154184 -0.53537378980315508681 0.84738528572991900223 0.50365483140995281897 -0.63316188032457154655 -0.67904894058874909479 -0.50035572379032411394 -0.31552697692378184335 -0.74652605760758283804 -0.49241692070349346588;1.2299153000931049018 0.65537503525391505033 -0.39205726741091950771 0.49416547967470159097 -0.41207207935892486983 -0.66663634109075842193 0.21530345535806416635 0.18648522028529401773 -0.83975087108366963662 1.0487248535649114078;-0.22537037220361275103 -0.5749589208208378821 0.63161478066084630889 -0.30183190852513958058 0.80384824293116285965 -0.32606130453058307372 0.72312537062460890969 0.25914158579419449557 -1.109824363910016487 0.20067445268068812014;0.70222262202258289854 0.20528285318088546063 0.63778513809793979661 0.45293332386657486621 0.78999740389211103864 0.43611889286234661878 0.65573415427916692533 -0.67037849838633500887 1.5800351194603969862 0.011652376174262065595;-0.37822993779763891542 -0.56892345348767203728 0.91018307571651657639 0.29851589224440100434 -0.68005164668714479514 0.88386181669159513685 0.96954889618691852959 -0.1315630637510012968 0.12342269043394189787 0.73466428825931839874;0.27679886331384057074 -0.92155906476975091302 0.043078401707382071861 -0.93316808690731190001 -0.62832601304729618352 -0.81731443111803492307 0.07938739868625169227 0.80210789043672081622 -0.055087645326694273384 0.30768399663967233026;-0.058038080453894497213 -0.37075024595304451047 -0.6778770795278955541 0.51987887361239237816 -1.400594414929829723 -0.66448241445072342426 -0.040446563075653876873 -0.84758418631502918661 -0.22115794956524778558 0.1955526278534044371;0.79563263723663868454 0.19126064740386583551 0.84985033521690545033 -0.531659008280096268 1.2549755875823902507 0.28297914025503617674 0.84062386079645501358 0.00098335668037835381738 -0.78775896495089903215 0.11775785704206995219;-0.1321379250789170845 1.0782244717459725791 -0.53898214894333029701 0.31446657309031333938 1.2480168336175883059 -0.81113732803801519289 0.26231114298330993062 0.50657384473216215959 0.80461250999167388542 -0.040821097623927368736;0.61722011207807003785 0.4898908644861600381 0.4480109394831688352 -0.19726038110582164165 -0.19277071401199560863 0.23058717549660426305 0.35072053202170938579 1.2947648365256063663 0.99528262564036251714 -0.36963204616451900142;-0.29909647512404996528 -1.0613944125909688942 0.47765758842248601246 -0.31634465765255836978 0.74701825135577282211 -0.40935442798599191994 -0.57539837049653452805 0.60039285566986044795 -0.72524866158603873423 -0.25600615810315346943;0.34573180213293680518 0.48782099311544740994 0.48289574955048031324 0.76232541814884946518 -0.68255644326827391577 -0.92771613136974051539 -0.12925589746602889063 0.54091902798582658374 0.43777562139525733054 0.67430195548168281316;-0.78413281152487601666 -0.41060505644086187083 -0.21535377464041186024 -0.69818047908347935504 -0.75558488134235834988 -0.14011544427371078192 -0.25134685155914154864 0.8617822452180347037 0.3592169002010932588 -1.0801251330713763643;0.39197009121893250372 -0.94936812378958046477 -0.31726488068604163928 0.7763126533662955131 0.063816000463743041693 0.18625363304288319877 0.91590577081936097592 0.21501746001407032183 1.0596984351366154353 -0.2209282249444917412;0.058754748053336698643 0.16494407285762985316 0.19457378024495103341 -0.14959124353425529153 -0.35408199178963711828 -0.55732948085241318381 0.31769118631086235016 -0.81971796316689549133 1.0733551141705741649 1.0276980544327203315;0.80974927230552773416 -1.0034793254838174636 0.65345279449927040627 0.021459748332761777179 0.71070022425963108592 -0.77424618746874296349 -0.13525031966066777822 0.40532361162709751312 0.5401107614840426896 -0.61198478650762566655;0.56934698553323193071 -0.047379341554201571951 -0.31932627510071437404 -0.86064958546552383645 -0.2575496848480050005 -0.51819315664171650138 -0.79827641541956817495 0.61355684443683478069 0.6945016366945765407 -0.82045431709691918343;0.59711475954773007846 -0.1468584374608184473 -0.92022614522706369655 0.59532586897757522326 -0.58460232054817551361 -0.84273068434099995816 0.16504428004577298417 -0.14109816968171820517 -0.90086352872849351225 -0.25081509905085802581];

% Layer 4
b4 = -0.22933353775336906555;
LW4_3 = [-0.73112343939847490581 0.59430728947593325362 0.040094691937210581723 0.77280220445585579014 -0.058821145475158827243 -0.89260633772874065084 -0.02174402174088981704 -0.93095725970797527093 1.0433703692541891339 0.92066535435287777389 0.77692230844856047245 0.62200743856887552585 -0.0027095430023195950578 -0.1986133172679865333 0.68003329253935462795 -0.17609408186981878597 0.030150683126959784003 0.53460308815645374292 -0.27646816894382025831 -0.62278711050876922606];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999991;
y1_step1.xoffset = -2.00000000000004;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
