function [Y,Xf,Af] = nnmove_44(X,~,~)
%NNMOVE_44 neural network simulation function.
%
% Auto-generated by MATLAB, 09-Jul-2024 21:23:39.
% 
% [Y] = nnmove_44(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-9.8820989364874;-4.17631009264064;-1.99999468395731];
x1_step1.gain = [0.10151410520026;0.23976556688107;0.50000722551666];
x1_step1.ymin = -1;

% Layer 1
b1 = [-3.6617209340446699173;-3.1740682094266348123;-3.4523488773769819282;2.5978497717996593686;2.0525984106233803317;2.1003152881044209188;-1.3318966432747627593;-0.79898061723878743834;-0.60915125416025162064;-0.31985814057806943866;0.1687738137270654859;-0.21746891572014726002;-1.5279272918599173803;1.3716146513820668407;2.2358054270719467382;-2.6086608267360862357;2.8494870462124319843;-2.9070029318847852018;3.5113578201842354787;3.3710784545577965332];
IW1_1 = [3.5593491886423405113 -1.0533398347992348754 1.7395086721119343842;3.1011897035056668059 -2.0032293442788096094 1.6736137882783788111;1.2049099080549434682 0.56162833605216777588 -3.2057352283457203335;-3.7593264174322333915 0.32918167814631715817 0.49882418926081845134;-1.1963764317876712795 3.5948937537395657671 1.0431260133775077659;-0.034392859678341498875 2.8095736917862557114 1.9316762975062200525;2.3647353107292956587 -2.2581786672565216101 -1.9814143625987477026;3.2758936869809813786 1.895942724236824084 1.4304192856651363197;2.6803643604978102388 -2.5247705024454276668 -1.2154879077831597378;3.6877661694177392704 2.7405137187083350447 0.39623131877669220957;-1.4798890177875878571 2.0602112480542036366 2.1316224277596891312;-2.7442511132573677024 1.7986409385934771787 1.7919471005796583363;-2.6427272011316840228 -3.0910932149336076691 -0.15729986543071342031;3.372586110458171138 -0.97617852379215475089 -1.1441152933650733381;0.78957884894469665404 -1.854884489420622673 3.0669992555206659901;-0.20997503549899021458 -2.8012227346492681868 2.4487485168564813165;1.9834898423396187805 -2.9416519318479079637 -1.2249353712830883811;-4.2912562076670219824 0.39946131699472076093 -1.5395050250982966755;1.0611916508560452765 1.7237394583453435892 -3.0831358733198848121;2.4924061392955980665 3.0025992899809970105 -1.6339020605881731107];

% Layer 2
b2 = [-1.6327929078857390532;1.1737000027389425938;-1.0317622606068819202;-0.81567656952301859086;-0.036081209141789569173;-0.079525220813576880108;0.32466624177480235547;-0.76315532323227563971;1.0911165090547019219;1.7161399865657260833];
LW2_1 = [0.26329908469078272537 -0.50230549083393405407 -0.52380012892822835902 -0.29725587799618397034 -0.29493561067121376595 0.19287430008789777092 0.23276983877829884872 0.37655186470162016477 -0.12253997140042298397 -1.0325759192185333113 0.33184836138422735274 0.070021191247368719246 0.28213948639542563157 -0.22618752876704906196 0.13097496858673676745 0.39058444943458320298 0.4712036065115239869 -0.47172516276794285162 0.20906249865990209069 0.40778844019312399105;-0.054737573083016612119 0.3533463001947407256 0.17962561031354909447 0.42360506766832545233 0.45151511594494242452 -0.11265426549852697313 0.51049056155475425189 0.23640492368187257521 0.56262662187174983242 -0.25978601758794289678 0.11508129780036732703 0.25748038342365198172 -0.030096477687172506349 -0.38969292161439100797 -0.33356529771247439564 -0.24876149625782947861 0.15495564298875147413 -0.27020184180295264698 0.64750481458499831167 0.60007132609745417184;0.2335268340978814694 0.049005206503396264717 0.40354280943016851424 0.048537120625180570077 -0.5680247372237325898 0.11615019935961140574 -0.2518011118795127623 0.028651818745022452489 0.47380376072360846917 -0.0040862188504339289757 -0.37128437343086290179 0.73068779031271435809 -0.052532529299398868228 -0.21623377682329128491 -0.31143552175199001875 0.44865731775290540462 -0.63546562369806991466 0.48756749185397052493 -0.47187620689132042662 -0.51416336379353300146;0.84063534586146726468 -0.78212533351635582513 0.94308584183014376734 0.50440625960306317843 0.39501312536531418829 -0.32428678909881092363 -0.030916014392185667964 -0.95384524692120653544 -1.1608007700521061345 1.6763482787838601684 -0.35238349549449249354 -1.1550922423745415557 0.75888139930853681925 0.18436388619792340449 0.52406989729020647673 -0.5236258725895548416 0.12307590590952344201 -2.435162919671989723 -0.25516872719204336528 -0.51105856272975502819;0.25355174300179539326 0.095904656983614999799 0.72557740963588868155 -0.055390266620540175302 0.17590820877623841723 -0.49612693502718913097 -0.040130281576792409259 -0.58892044106540952786 -0.63912260081461946815 1.0372228942787451444 -0.26141379561156624645 0.2120066429513861872 -0.037460658014212250277 -0.6816249600691310917 -0.30678504500688047463 -0.41101130308181077488 -0.057451134888229060671 0.37599608690422414714 -0.23881912620112330514 0.38119677359417458717;-0.38208334927992021468 0.057616601737376337 0.052972776477306617038 -0.046156871130033361172 -0.0094608345021750597792 0.48358028373605682626 -0.086928395280131215417 0.76200877734370175975 -0.46038222660227107186 -0.43928529552917616741 -0.12130291116459410161 0.50296775614091937534 -0.12774432097349652793 -0.19351683955436344009 -0.4972008073837428932 0.19238584839823386075 0.65454313113552931025 1.2135935550198533317 -0.62297826772707831644 0.30842920773703452753;1.1477986385642284795 1.1338550209278486225 0.45474877077304459716 -0.2054364943086152695 -0.30921742514775751864 -0.58077650664550217741 0.39783405090510315372 1.734400854412256443 0.92582267366851955792 1.2141730443387013239 -0.44572307948713280057 -0.90881840770194410872 -1.2983812124000451149 0.34591658842768469029 0.37972501569982997083 -0.57978876004458401727 -0.30947779553196030911 -0.41894111857227528395 -0.18637757743293367763 0.89891891544758717458;-0.65474542997296947267 0.30993966539608325261 0.64974822513046037731 0.32611355728262436671 0.49698454912304829145 -0.047610900248964818648 0.27765638895218441862 0.056540744546924710801 0.59798619131283170525 1.0483370956941828744 -0.33790733862669769527 -0.05066746698569428442 -0.85633447877196522402 1.165830368081180568 0.21686132410374703294 0.39240799913221230399 -0.89669150211480519452 -0.6164939284545963849 -0.045947204861615353888 -0.092260926101889573214;0.88247713901260016467 -0.10125366763613052878 -0.15192911963080130144 -0.32003905122216563806 -0.59625068294657546097 -0.16974047905651792889 0.59478478601695139449 -0.26196142669709598927 -0.058683366157417836406 -0.1492602896799218315 0.48310864622985544292 0.12070945476475432312 -0.096519292281663851552 -0.50625025593640238242 0.22421758910142189358 0.06713767239448227564 0.18748975355225874773 0.3540227221685874337 -0.25392977050592097088 -0.4351063856856751122;0.16477680136737310468 0.73058867458277720885 -0.03417555509356757365 0.19003692279680506338 -0.50147263437226596849 0.52121700144857774362 0.44481076394998875223 0.022600243191501140361 -0.55263495461130607289 0.89046807830846697041 -0.151531711063903618 0.058142369727806009205 -0.54873651978981996535 0.010884909214442777675 -0.22501674013339767466 -0.18275373654788434896 0.52938520216104645311 0.82521053163126401042 -0.36881094511703066408 -0.15013920339326006226];

% Layer 3
b3 = [1.7692518411836970493;1.8031949699010412225;1.3643015366214370498;-1.2099050275213445449;0.92810683546937577937;0.75574770241789712699;-0.76809110812365255505;-0.60776379048506201652;0.42287070731137149648;-0.3067967818978587502;0.71189337646706851714;-0.53840293813576844961;-0.64149471520275702652;0.83051151648681786899;-0.93194553742264729657;-1.0914111089012499267;1.3694284036558364015;-1.2863137919460378988;-1.419774304422871003;-1.99505234420013422];
LW3_2 = [-0.53442428647794504304 -1.006708685194481534 0.40679386639578490881 -0.6018262061445520672 0.22716226389985369472 -0.70383243177814092117 0.028259340601639915819 -0.44583803378333131118 0.86555074643029827897 -0.60157430731088223919;-0.53629981259493786361 0.85172120484044133715 -0.28870232751669416826 -0.75216589674675093935 -0.70414977443201087759 0.57482919424508061024 0.33205390184388677843 0.2525658096547597764 0.73891598674531944191 0.3775715405182337725;-0.26938808517442536239 0.86657469983884616305 -0.09063874693262992388 0.56182762166685074057 0.39105703499470267914 -1.449738982529409137 -0.18790935333398017804 0.12997148933939506321 0.59702866823228895043 -0.72653102129381963437;0.25805111245041706391 -0.64392662415605550486 0.83180016425769676136 -0.50787389731409304794 -0.98130909904521623766 -0.050871718716706385011 -0.12910704092480518312 0.70542455947785320802 0.49399993169909917068 -0.77727510913543529369;-0.35579394441962663986 -0.15315605460374012714 -0.21718910512109007582 0.64467516937786129017 0.80092726505506051105 -0.73655427817711993654 -0.35354932074720657464 -0.74092315702098532348 0.74012825675751037213 -0.8664032567477437663;-0.96279295773852313634 -0.99524156955985887407 0.82385049452677594495 0.27488708927389798875 0.14620528078311464948 -0.46808090082280989774 0.56985713515456892786 1.3162046102230477995 -0.22026096973051811911 -0.094452952269363399385;1.1248801702302428929 0.32766588456071754631 0.4530426014478188268 1.109013946745095236 -0.24985905478858180806 0.17449822634534647992 0.16378314560784076881 0.24102199481152228322 0.78065547021571646269 -0.076111878751712588875;0.61348178175748968588 -0.72393330710113812376 1.0441570260425030447 -0.78999433581607436672 0.47534834613510590362 -0.15857381110697069126 -0.50337672973556846223 0.10474746557901207233 0.44150511795596247833 -0.6105615655123064478;-0.72555504350762189958 0.57850400603575957703 -0.79368770119357934245 -0.78355544861328174644 0.57546925021735340078 -0.39498986192723734012 0.03396994882482021888 -0.47435886798428550382 -0.41170455832382091277 0.87616294213008738545;1.0256313860666781412 0.51406425049964221685 0.35276770648519967244 -0.066930561722722659024 0.36621269153278573905 0.27782956162053318305 -0.88228573994316839002 0.43826971188985108796 -0.29569986666258529784 -1.1600314708778514117;-0.10865522743115747784 1.1094602764988141796 -1.2645725456284708788 -2.8046879185223207998 -1.0569686996044123095 -0.38869583921266015469 0.91879369135136268465 -0.47161009377499640838 0.45433211393545758217 -0.67867726820930607268;-0.58621435610160133045 0.58005624929675370094 0.6160376174398600746 0.34448574741812132416 -0.42628774053566742541 -0.65769313809673102256 -0.61013480853601032017 -0.43153004851434190181 -0.084626644702407910481 -1.0656595430025836979;-0.52070730717990976189 -0.15540716828652750836 -0.56568693982681272914 0.88422793377735364739 0.44675353568485287603 -0.62346660057522351739 0.19148350138111744356 -0.59052900681439290942 0.71706865345719350557 0.10418639231858345395;0.85080568741356898954 -0.40718738377251428862 0.064361810993796841895 0.54915172897435360344 -0.15947819698041679204 0.52967796903569386302 0.50386058525615551318 -0.72745301320834110381 0.31239374632148186883 0.50928701845831791939;0.18193450580678749429 0.41198120384331055055 0.67014939384390803667 -0.73223613616288851791 0.15543550093630181808 -0.56676032260100039917 1.1528923262007522155 1.3099918612316052702 -0.6511502568597720142 0.3129605331417343872;-0.039198437722846070363 0.88001486367869619087 -0.62347978885433086305 -0.30077073406143983725 0.73965287982699856606 -0.27375716117918813541 1.6499760788190673821 0.36429087642355184595 0.71618222560555722112 0.040310086611405920864;0.12619618461445464286 0.34953663681756913517 0.41680636450964403394 0.35457253833719604152 0.84969121437445649381 0.84790068100974813614 -0.44278029539996321962 -0.17823690050098808801 -0.67687271296000650622 1.1220893317137978773;-0.43188565263292399976 0.84075162752946641653 -1.0692634395861675412 -0.42914344699155321239 -0.98459641371425032919 0.08329826272310798807 -0.76518003836117265415 -0.58645157603230024801 0.51490741331088274446 0.59931961571266501032;-0.65672064328713763981 -0.44267354762282240532 -0.10882811554971164036 -0.7110978472278283169 -0.38385744561330081837 0.12027695953620554103 -1.3487280007979942642 1.0381742486282441451 0.14482451479259389471 1.1709962233932802445;-0.83972386251305575211 0.81768079662455972478 -0.27876400691404779053 -0.27244741113785814202 0.17361769893422859812 0.052542797837215396428 -0.41108071511341559567 0.34869757616775881592 0.83260158287043317671 0.10666030885152502639];

% Layer 4
b4 = 0.23761998760133615227;
LW4_3 = [-0.18946997138845694808 0.36673931874687504262 -0.23117752980869696322 -1.1132747620459935156 -0.1107405098735809168 0.42272004101595228587 0.1445353085150063166 0.31187757047625069839 -0.27855202551384905529 -0.50675600943988452496 -1.3011220445823441505 0.031569685808751954403 -0.46171519302602787027 -0.0026922048867931494542 -0.43152474526113121511 0.86394095593590003457 -0.31557572551449941667 0.36058988803617170182 -0.89854369148474666495 0.52669155662508437832];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999991;
y1_step1.xoffset = -2.00000000000004;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
