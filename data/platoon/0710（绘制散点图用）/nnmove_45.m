function [Y,Xf,Af] = nnmove_45(X,~,~)
%NNMOVE_45 neural network simulation function.
%
% Auto-generated by MATLAB, 09-Jul-2024 21:23:40.
% 
% [Y] = nnmove_45(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-9.8820989364874;-4.17631009264064;-1.99999468395731];
x1_step1.gain = [0.10151410520026;0.23976556688107;0.50000722551666];
x1_step1.ymin = -1;

% Layer 1
b1 = [-4.1408083657416643319;-3.4372161787938924071;-2.910735140030109136;2.8036924609335533987;-2.8131517797490999122;-1.2980549971465022985;0.14836099490207413365;1.2159243455898554043;-0.21719958317505477785;0.10586116412431506584;0.2188132242979979325;0.25843025695052013191;-0.77895235112552219103;-1.4217282470333119093;-1.141826788902243317;-2.3561008872272055648;2.5604981276405185397;-3.0312061992161560831;3.6716101799849822918;-3.8567254184572861142];
IW1_1 = [0.74225773169108066885 -2.4014958884062136413 2.4125379379701072935;1.4881801869822406381 -3.4173805476016130278 -0.49684110192805785999;2.6642512340444848284 2.0274591220385680401 -2.0484508258553852933;-3.6152133448155994166 1.8514675344514810451 -0.40268641328958637571;2.0887803116511021173 1.8182380220504030799 -2.0855870133139009504;0.65012277254540273841 2.3619822351051689147 3.0915027097608911433;-4.366732063287269483 -0.41638987398062532463 1.049398540660296586;-1.3667442957885280741 3.3021787837962999212 -0.28614317481301659862;-3.7987960480521518747 -1.7710151481285738573 -0.12761876520925549694;0.47155482338136006648 -3.1552977389830654253 -2.2308593197552832876;-1.3520396990300009854 -3.4232023281718935159 0.6691069827209938925;3.2287299409626841751 1.4929220508001972423 1.695059875429017815;-2.8577533876518881328 -1.1643688008462638184 2.0972651621115963039;-2.0952157911256388267 0.91061661490176015743 3.1275581392409588233;-1.4986089890068139407 2.7235137221801766216 2.3664871778187981377;-2.3287795682066412262 2.5634303132370566125 1.089904327044844301;1.0390958118479951544 0.52441356223250235047 3.7447512053274549793;-2.2303850753732996637 1.1077448301153456356 -2.7156928306224084047;2.2788506653030129456 2.6403567451049565484 0.62485557600504404441;-3.2159088998659375314 -0.22909772323984750608 1.9528330305935899247];

% Layer 2
b2 = [-1.5984746882449529792;1.0595596023115754214;0.98930792851615856343;0.6551618410745129184;0.72079181829493965683;-0.21900506167988839645;-0.55741624550901658353;0.80308239500844003089;1.3134052209408819678;-1.6393662845692380525];
LW2_1 = [0.33751038282923229161 0.45290178749173726214 0.3111053331492237839 0.36266208274877792528 -0.56835113484525312533 0.56175421767068656198 -0.41476368637805527406 -0.3284133709096926923 -0.24565367910479149471 0.14001445656803265805 -0.38684055295780184203 -0.090058298003211120775 -0.56594778980230231458 -0.50562422194986322843 0.19277976215106892854 0.49994017085840219972 0.042568710672685999841 0.36294092509047387596 -0.014698366812405327941 -0.26711034390648624726;0.10053629385419561582 -0.042914555533186439507 -0.33303051821167684032 -0.53981123132020625288 -0.5699107896675411622 0.65453170875563870812 -0.086775489064993327482 -0.69714262064871712621 -0.021812244597203614416 0.93697229582073648935 -0.14172543814725252487 -0.33767043281720254821 -0.17063909461706461279 -0.14316482934904495306 -0.2148712378063233619 -0.24082756343696404278 0.61522944548019531386 -0.87426564125270012084 -0.75263961396589806885 0.23836321630460469145;-0.32385603269997453868 -0.22904216231998117403 -0.10843668250260811436 0.43242910841098658459 -0.28762978707022446301 0.2873402214101827834 -0.43994862317748284486 -0.4002712429392357163 0.11667417822583826814 -0.18415760616209339573 -0.085939132517230246155 0.017310305800816605526 0.58003538447891089813 -0.55786290760091805652 -0.53179245443110756408 -0.52014285147119088126 0.082979823193658347469 0.50738148162646490302 0.53999919327564660509 0.014415657253975649663;-0.30620607746749695099 -0.14878266923213875894 0.43355512528797601757 -0.1106306701175345103 -0.24257064708338527126 -0.38519267826806891097 -0.32394724285690690291 0.73674623787238313621 -0.66705626124511430142 -0.4057757151637234605 -0.35034712538470519361 0.77957417107221704811 -0.33887759069165418468 0.23438906681176768787 0.0029427206055168755872 0.091326777287514399051 -0.3447823491630689352 0.67325437643674579391 0.017644924454567442046 -0.48113811445662491018;0.02735346413651015135 -0.40040225867539425142 0.14870838352344967204 0.043299269944470954175 0.50066229005989404399 0.32560794745235399628 0.087561817441562245223 -0.90492047675754860858 0.052470010794017619971 -0.52964274477361017457 0.046104619035462382493 -0.56537098802980190193 0.18435310680035163489 -0.26216434494688634071 -0.0036357576113879024222 0.18530310732558896714 0.06546875351184926195 0.22328515805035070718 0.43783489440383710489 -0.65623070505200153946;0.80975374259695120926 -0.25452576526985848382 -0.31941874469485687094 -1.6306138144478941054 -0.41241649812585873258 0.68601878420391426694 -2.5159168784092744708 0.62261201968626711523 -2.1986059633720715922 0.52885660791195687747 -1.3883890721876006591 -0.29402771632614033148 -0.039179184358196228466 -0.25473980357880809944 0.040914553520214703985 -0.30970952139121477042 0.27455946560930971634 -0.28972997234739156225 0.052847017856935990521 -0.43332417929040051296;-0.067212544869298618266 -0.22495458057691100628 -0.22389512319745319413 -0.041795930064168387852 0.7212674487754942021 -0.17816878077351083753 -0.0016552667511753084428 -0.50795681712281681719 -0.77001053463583890579 0.46031383070139320068 0.039225124124680155191 -0.28866466286574787858 -0.88445930372304304434 -0.24341628355182451382 0.68246842460890100313 0.90468910770550603484 0.13116461096958578758 -0.055232310758679750706 0.52418737210635546475 -0.030999189580578775938;0.5741270872422318261 0.28845443769496392772 0.66913742387860286609 -0.022100972089539518139 0.51815899817089694501 0.36509175791624204344 -0.6948872522192885981 -0.1034518947697664476 -0.24636267950932910775 0.21386326128546151448 -0.78488286590794675845 0.69798386945622448163 0.042636184295666727795 -0.4230188377820099932 -0.41964377313318135254 -0.47156276396650953497 0.39745914144172533877 -0.71564187753567232164 0.19219960481663692087 -0.13281283827845061229;0.47095263801913767043 0.23743694595115932833 0.42597779850819311731 0.069501987438809281761 -0.47955084635106992597 -0.065422716766463578919 0.77714286621957129331 -0.6768538924792516509 -0.072426173505245342032 -0.58406197765815326406 0.12218754471875260814 0.14087393737520204073 -0.32073392088779972831 0.072087933154739131103 -0.011507406088288929524 -0.52080099445126615265 0.19678855238380321691 0.58360070218536197473 -0.032397893893651004416 0.043241835091693450743;-0.34274890322385176411 0.25681073293196787777 0.3600337969894572554 -0.12960815072088485711 -0.21586752882077994697 0.19098829993558816276 -0.56659840441469211392 -0.49447558177533790236 0.29907858512194418488 -0.09051406637200244687 0.22370290107848581074 -0.4637263201245031552 0.50331925222119533458 0.48557872949570046739 0.11696785116467846299 -0.23823484664523994492 0.0014401008076710434744 0.50696407678282617848 -0.41444519990445666258 0.4715685233335373816];

% Layer 3
b3 = [-1.8905786148468264329;-1.6856780198080600908;-1.3509110098599261818;1.3865964655385512039;1.1908378608792364872;-0.8963144640694702403;-0.61687149856388323599;-0.57722543795647351939;-0.38267590810878754359;-0.19481893661190971545;-0.12782777060673433667;-0.4337668368572191735;-0.3858739437626871327;0.58580285468958626094;0.88787933004754626687;1.2280658651036058249;-1.029912669666235292;1.3486226290539451433;1.7585132046572136133;-1.9444933648963194095];
LW3_2 = [0.12410255372329777324 0.23944961972996200994 0.89579895504240691917 -0.040352543567822161952 -1.0353035737951461481 -0.013956735310420041729 -0.70187078682897907633 0.47213081786443711341 -0.49359080216616657566 -0.54562762711215984091;0.99056455528172993041 -0.3986183357786308723 -0.56708153899963420486 0.12821949555658077036 -0.28164317316907533373 -0.75761266073814292898 0.50274493941528697327 0.062551496911740528395 -0.80643086266001562379 0.7188913819804024774;0.60735549807222766194 0.49621903442212994539 -0.066806138127480846345 -0.41886443868220646358 0.26989114658242929767 0.57441705302505996489 -0.25276954661182265971 -0.20324532719193780239 0.69862354479225585724 -0.92566967782505438223;-0.25531114097416729436 -0.64584069919958686512 0.55812737734182149563 0.29259182529982147303 0.57254998613609719982 -0.79423580557079287434 0.12504916520912831568 0.99686738491012216734 0.84487082630537579941 0.15043259207480627615;-0.40398297772115077109 0.01435102367492459112 0.91561116571516520946 0.81637316326342912465 -0.68868937197373825132 0.37548256171151161986 0.45535273886802907217 -0.68845326457046041035 -0.65297308966837352973 -0.11164955599791363816;0.23568692874084906652 -0.63935506808199904505 -0.048036083332489314113 0.079493252699141384032 -0.94683031750418933381 -0.50029741163379692903 -0.5639883740608812035 -0.10246583349842507127 -1.0885210666719324912 0.66663124278755547802;0.44707165791785086206 -0.76208364534638350918 0.30365784018272828915 -1.068617231164965764 0.21122203975795150743 0.57002532315700193966 1.1421189560884050795 0.21411702405929175508 -0.11281120664728763736 -0.59777918789318584825;0.77217123849466395846 0.36960011218885258089 -0.66054223059099770321 0.43774703428537586891 0.69686886522379742903 -0.19845601222511149997 -0.3326480773403375224 0.60125929709274550383 0.58643217419277127167 0.95212956788098546124;0.92746240951236669225 -0.64416027472336290227 -0.045411071778745426553 0.059898779553984100865 -0.64607945586487558476 -0.19854311033399285602 0.53080026792476620034 -0.52351897677842840206 -0.71402850213701085647 0.94215678414454362422;0.34656447018763331114 -0.56896201623593745111 0.62430279562807955429 -0.130361815106568385 -0.74528466742753052277 0.90335835583460588616 0.20953998205636911734 -0.32239817943880588746 0.56934129327476712401 0.97479113006278728104;-0.47756644532833703032 0.58971648898144601869 -0.49395123480909503 -0.83667762318284266687 -0.16707270335598806144 -1.3901292419437480952 0.49459237157435698151 1.0324422707138587452 -0.45871591521350718601 0.67590954242727230294;-0.44392258711312970743 -1.2382037999016433094 -0.29087136037166877456 -0.039034888659691249768 -0.6101685305533375292 -2.0012473205818341881 0.11089288126318813665 -1.4338031105639212903 0.6372153312935805447 0.8887831911200658741;-0.6060241569625485214 0.30002985615705535238 -0.14178397207688325787 -0.56494080286806758195 0.44130239532515203038 0.34820496166412323591 0.70497753992419320834 -0.62342601797499974658 0.74244530392523044871 1.0544343737343884193;0.74068394885212074374 -0.45757136200304865392 -0.059855994026057408874 -0.68513769514751399203 -0.96519285319870962159 0.25925012573865452437 -0.56916673763083580617 0.27823896113359469773 0.24958779398451039211 1.0259968008853264099;0.3012258886976966199 0.064755868186837539646 0.57276676389839309422 0.29132825227256337053 1.0547471835365398452 -0.34346203237660660745 -0.57368034223943631389 0.48901478812729609613 -0.72845814503301831166 -0.86470990098895039733;-0.079777535662082760259 -0.27721135876929298147 1.071041619968899905 0.83033526612933528099 0.18314806629974761387 -0.21709079697694258493 0.90562440889811901545 0.18108634216093505431 -0.3024643116500359552 0.76091372191186024132;-1.0407846203489696801 -0.63359412999612219064 -0.77654719855327447586 -0.7789118602837220573 0.98955434216219195775 1.9359142973986875891 0.2146737474219997388 0.54373398992020693932 -0.88415911098809207846 -0.41602473974895248787;0.98999662031121082872 0.1283179576693800894 -0.069205702920081907381 0.26993215329121855728 -0.35720806898576007438 -1.3219614366797540761 -0.16204233799780534686 0.70062143125968356916 0.58032613493206008926 -0.57576625026386385464;0.93021405164582282588 -0.88424109271740958249 0.7339808872309553367 -0.17452760339857553706 -0.33621606751239613287 -0.22891044738942831205 -0.6781751917626841486 0.04304891457255501791 -0.68024852262801749347 -0.32663160609717767358;-0.26510375081741299752 0.43131309182357013832 -0.74054198668488480095 -0.3159310952042698184 -0.48957314766383508431 -0.91945989622372437111 -0.65935571571276130332 -0.49180523503987400025 -0.053338477675371191722 0.85934132842943600217];

% Layer 4
b4 = -0.41761776238980097276;
LW4_3 = [-0.12983683262384965174 0.64642679657678081551 -0.57251334934356234996 -0.55680760897452430402 0.40756155522695863835 0.013046935929770969373 -0.3171184508403058766 0.1182543555453513251 -0.42939902661651019322 -0.20539644973241583115 -0.4523692422474133723 -0.73196870694873761298 0.36072522342812396445 0.13509079391862818809 -0.070520713577421748064 -0.43554395347983143605 0.95424803015370829318 1.2904937876549318343 0.070280085119941909655 0.3636731186766324897];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999991;
y1_step1.xoffset = -2.00000000000004;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
