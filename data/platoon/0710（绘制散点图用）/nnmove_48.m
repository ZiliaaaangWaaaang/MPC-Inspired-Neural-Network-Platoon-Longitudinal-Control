function [Y,Xf,Af] = nnmove_48(X,~,~)
%NNMOVE_48 neural network simulation function.
%
% Auto-generated by MATLAB, 09-Jul-2024 21:23:45.
% 
% [Y] = nnmove_48(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-9.8820989364874;-4.17631009264064;-1.99999468395731];
x1_step1.gain = [0.10151410520026;0.23976556688107;0.50000722551666];
x1_step1.ymin = -1;

% Layer 1
b1 = [-3.4260863377964172471;3.2933634047637179165;2.7414554009807394763;2.9241825548634845511;-2.9904179689052492463;2.3915934196272736756;-2.0575083186879408181;0.33486189350830986022;-0.45644871149121557519;-0.29259805193587290484;-0.023136242130779041681;1.4131191890440018;1.3554499572308447153;-2.1099420044049495004;-1.6259986208153085485;-2.6046107374072038354;-3.2795724750456680674;-2.3980849621941486838;-3.4464580728414202504;4.0899145020817693208];
IW1_1 = [2.70826876362666491 1.347420870315633401 -2.8960455314295558971;-4.2470047023036947564 1.1495688508926842353 -1.5596746312776179622;-3.1851700713421258193 -1.3861187702866928362 2.6188200757815809361;-0.58701294282267169056 2.3136227940403846226 2.8238724190524964186;0.10240580678583680041 2.2680192168538275688 1.7157360532993772839;-3.2330385359849063143 0.51612700131650957047 1.6912648177724047827;1.7001462424436901699 0.69734787594580482928 2.6827843289825894502;-0.59041198732489474921 -3.6455711103903079007 1.5245318554615718831;0.88413249932722248747 3.1251320445495869293 1.8553743590232802951;-3.2877837465379129434 -1.5941884484092783136 0.33341675464949038776;-2.5888285160854227485 2.6609998618933299319 2.2321857724950393553;0.2879210049350590106 3.8819976448453084039 -0.75211315685316948443;2.5930813992713539484 -1.9665881706416101782 1.0760406718515937996;-0.19487337684194225296 3.4575126192753025123 -1.0601556878705842291;-0.95684822774960109903 -3.2366514598317488449 -1.913260983673900073;-2.1564920687871609317 0.80571384511494759106 -3.0149518535423380783;-4.422904182800599493 0.20028599072905822753 -1.9326211647271025473;-3.3897734001082469035 2.1360757975068129788 1.1657031850000827422;-1.9854057821313757515 -2.6255555258207636804 -1.7824536521936735767;0.69987357017495932521 -2.0088676282724939881 3.1757298129200171033];

% Layer 2
b2 = [-1.8851443043896465301;-1.4221832463479784359;0.7686560490236512555;0.79522120044162447616;-0.30255866712853179967;-0.010981943881808014715;-0.98820561972934839456;1.3168523340035407365;1.1051952233279138671;-1.6609275001571786046];
LW2_1 = [0.86016158536412146152 0.30803604541533263772 -0.32941313189741494583 -0.1351485566635278468 0.06274313761020550162 0.48512652056441368797 0.19103901528095762474 0.63917292000748404668 0.62090077276567234854 0.13006821929317888276 0.4054453228729337777 -0.10034813931150943223 0.48216880758256036588 0.027137925345851347803 0.30523874153212060545 0.40223057933255196295 -0.86550184873871649494 0.16256385578828966287 -0.28741523008261410377 -0.29630871834593791592;0.33202147611984184072 -0.55616430809557471093 -0.32854701991046458831 -0.42428791092166268095 0.96008213722599422546 0.34483301029387625203 0.30859274186870594425 -0.12470925925460209227 -0.51568452334675707327 -0.13335174334157109954 0.72784104251995984658 -0.53123259049243265473 0.16329413893537683689 0.036235518806226101052 -0.486098020625553906 -0.40074857309182165821 -0.05438504840569502452 0.26250411523487354737 -0.23003846835358313094 -0.45721909543080380134;-0.79378255455271307106 0.99336952866874717039 0.50964853020955913632 -0.13683308505679389611 0.43986623069875535608 -0.051389059833551159473 0.5967705725934355776 -0.012960298320058304816 0.13719209642966162521 0.8528827494520355712 0.60066110966834951324 0.23410827826922764316 0.11637874207092885337 -0.13449213922034328195 0.12334221974264251986 -0.31170003599230705627 0.79432763109029269621 -0.039867638166693780688 0.5072204742308369374 -0.91936708366596464614;-0.57203803474305803256 0.0015923944136256615138 -0.65463900238813921284 0.42876166908623697394 -0.21467450568127766086 0.29183215963211484034 0.31961045087721129399 0.11283239484382646955 -0.42201319390482056049 0.0094831632276936705245 0.52242184489743859199 0.46309272002992452055 -0.29832373841008935633 -0.37161289756353560465 0.28699610436544814585 0.38149073931251498148 -0.50285685213034436725 -0.13840817753819581459 -0.40187282873056939803 0.27200096924571803836;0.027547417991993634195 0.85553994343457873129 0.47742956679331066683 -0.6374625526771761086 0.16436169129876998518 0.0052523440229711657046 -0.21664334703535617632 -0.045575024827169623165 -0.24210487612705972049 0.6395151484435297462 -0.51219154275844092084 -0.4856960102093871301 0.21293774856570074627 0.058806026399643142322 0.16293031112871936283 0.20204037830274573784 -0.020160479167616152107 -0.3847568194125254859 -0.56375383342084339766 -0.66724957964249365094;0.073457263478721335215 -0.18817057759918193183 -0.19746471747366367566 0.021048609001000844615 0.6318117834374618047 -0.020083599129353965629 0.31847159497295102204 -0.25751267252067477909 0.30604696298017247669 -1.0341132651969831002 -0.78640986130430445833 0.5948971508979906675 0.1766327035226339659 -0.47197259220799170354 0.018112221663523414561 -0.93201413562252921619 0.21996094682686445632 -0.14350039384397519915 0.50127789713812354044 0.6429698548926640056;-0.050752601796351590191 -0.0070134007027168659629 -0.14841805869908719639 0.46480450498701902928 -0.39066655175071507422 0.70844208142620357371 0.058830975748938092729 -0.28030702207016117145 -0.45593084005072542775 -0.78644561543961966077 -0.67322913925722682738 -0.073578515422526011291 0.30842421590437518741 -0.08611919548810187397 -0.2725773121571811175 0.053931730911738057221 1.1161296773919142655 0.0020117949476730280674 0.79069739404477290545 -0.61220440014617305557;-0.18132572410892003334 -0.83781705058009436904 0.12485205147034426909 0.295053357150517781 -0.46438418927811003778 0.54713864871575468296 0.62237269058938604616 0.54649289058785543993 0.14937781464728921987 0.53726547096808896509 -0.020527363280213133806 -0.60636750373525649671 -1.1006499693658684524 -0.24937542652293315237 0.045834164512269730263 0.4345512804522891348 0.81388720347837617552 0.80970738263363861709 0.28888911596622607325 0.42748836790444227907;-0.93110767061536459099 1.0147857110317024532 1.4833898389766551063 -0.072669521158544581052 -0.19933263785981417127 -0.12981856181453466093 -0.71926764114046481957 0.83511477954947732627 -0.9102120643684449286 3.2824054802139492892 1.9941749116731009028 0.97124871190481720795 0.95639345436738887329 -0.059477718970344706229 0.21205271059623520546 -1.0305062172516505914 2.6500039296180921689 0.66559319808073080793 0.38356539175178583356 -1.046022964784278475;0.05408252175669413242 0.18956649567913674836 -0.7298241865162495845 -0.72693519409571227818 0.2576351365028853313 -0.26018667490979663359 0.39761855010807617417 -0.32676206856218120711 -0.81489688272622651244 -0.47252603994288472355 -0.15790384176017296936 -0.33165978718331612374 -0.82205858773195206179 0.33895701027428848384 -0.1622001558071251015 0.46709546159648107633 -0.83081473957448614964 0.01179748957972254382 -0.28928705463755610694 -0.54603629525367081143];

% Layer 3
b3 = [-1.9644280867497740939;1.7827154494507853055;1.6017611201944170762;1.3829708451044115947;0.88647253149023164109;0.89884275938147706331;0.80551621583178123487;-0.37417378866506967316;0.46861456670464479712;-0.11447906946612557144;0.11469426030875706779;0.52045834964839987613;-0.52711713101722101893;-0.4490840365266358658;-1.1152497385561779275;1.0999849523152884778;-1.2912195838321627317;-1.5601477420955387476;1.8629550133521002309;1.8219226827870966812];
LW3_2 = [0.56771135969152886069 -0.82037934861305739087 -0.68016623006529264295 0.066930647250140501425 0.74063006708350842544 -0.50185798256997926625 -0.0052486201974944217061 -0.63380631956526822801 -0.72849644249204981161 0.60172511401693429267;-0.39318072973636553069 0.71048334329554452271 0.78298947033447741095 0.57105096752585493558 -0.088445170184832597182 0.7713602354465700639 0.40110490154636402327 0.17272127914000351412 -0.50879559285799214052 -0.5486783317365122592;-0.10781362823886064817 -0.86162747412133566804 -0.080272794517598167197 0.82854023292356071551 -0.89998856213343925159 0.53174275060325348896 0.56918386042856505824 0.45873012023006198845 -0.18674509938701217004 -0.44386625690282632828;-0.26807839731989835386 0.5274828532535007497 0.11746606320297343917 0.63369297913727351546 0.04391940165047020922 0.67483748631855533517 -0.5371165227610448234 0.76492202536043141237 -0.82374454777059724631 -0.67968850635215505296;-0.48107116875646960263 0.81754729372472900728 -0.65040639483499873563 -0.56804030928212589924 0.37504324991646947884 0.45663420658463149682 0.40155888902384045958 0.21739277223552119778 0.45675321180418015921 1.2930586072055085811;-0.68293672995989362917 -0.49030606505454016331 0.80913465065818368505 0.65845777577004516168 -0.4429659542863128574 -0.023395359054372181357 -0.68919187561000216924 -0.23429570856184725458 -0.64283368528818851662 0.78792157553295538719;0.16538816506133935391 0.20083948866384648824 -1.2481940838899625579 0.99965944563023656499 -0.96319352983641592925 0.3764273702117440501 -1.2775177952775886858 -1.762038181603829079 -3.0437563874191080338 0.82135698974329707234;0.68070798265681109473 -0.29164751180189796287 0.835265521530731192 -0.10886858194242872433 0.28500022307531347465 -0.10473130988578294165 0.93252654243621746488 -0.31663296162267073885 -0.83100505009793268485 -0.46434443168408667812;-0.55145610025952929156 -0.54013472288278485678 0.47453855954753659807 -0.40984048422157154379 -0.56628169258375049555 0.98179318093550294044 0.79239097286204629444 0.53933938391927849221 0.36859432474317066486 -0.10244984594305379944;0.66022036536627159986 0.92226702299900398252 -0.9727853223921574255 -0.57398022943828153064 0.88917501997744852194 -0.81815748716543479357 -0.64405094617301195115 -0.087830144288250672213 -0.32390545270316056792 0.3804145771612662541;0.4196005805397448607 -0.7928882843323747931 0.42250475226395600714 -0.5671314975370679301 -0.64069072380402336542 0.43387346215577765607 0.60353712438200768364 0.91355950951638598134 -0.078057881255462036041 0.67650287441449041825;0.80833989023930175044 0.69677995715301555002 -0.21673312956527160389 -0.013371945348599641873 0.64828833434767374477 -0.34901384502528987053 -1.0945006110968904522 -0.30564798879658572339 -0.85726474602117197499 0.11048696009537296858;-0.75788968173599169376 0.14697824816367077716 0.48285507649216302672 0.33908008372695785937 -0.64268240137481758012 0.76695365067771370526 0.35049239137961224477 0.82472347041925342381 0.30539953163176225548 0.77142826770153816174;-0.83941389143991984589 -0.77525596035660238048 0.60178158283979066301 1.0332475679734709484 0.24049914196000579669 -0.56606864477388274537 -0.14585357028888010222 -0.48434511756737735899 -0.90656653231392947401 0.55518944169552408852;-0.10109374395704441574 0.66646849423271536939 0.87406813522467741162 -0.3232748821336494105 0.1043287817439392251 0.21716456876684989141 -0.6597235688368905393 -0.31521047518867584269 0.43107317918098886356 1.3013444891595622455;0.57877897521028431882 -0.061585068757410495188 -0.11154430266223491763 -0.82469418239152003647 0.0038366068049421834379 -0.64881107245850955234 0.24908237097003713134 0.062258102537171795821 1.9073025827609653149 0.85840339523645448061;-0.8636814454352007564 0.0061108265971614190298 -0.40271170488012619781 -0.42857592612801986842 -0.60074635011397026219 -0.8425990962962113251 0.43053004296858238265 -0.71805353612325584223 0.085584369302203561203 0.67723222743163924431;-0.30708260658354474826 -0.38271421125800014762 0.073865499402286996511 -0.67109559605738433596 1.0524366790588828291 -1.5963285671784783748 -0.25227834906322760267 -0.39091994381601136155 2.6477842950164851565 -0.52522464236975707763;0.099186136606222163881 -0.92268709151366445909 0.30225630081393017878 0.72083769263138075534 0.11280684760382750365 -0.49582693086831636231 0.14469429442533476848 0.49155838149041114482 -0.73807489241095325383 0.68074122496928524129;0.97160543622948558617 -0.8754323394843382955 0.90915281121853719348 -0.043971249112419209804 0.20031642416986855659 0.015530201386218687662 0.64034767156654592846 -0.56656938917769728015 0.25854845169005574723 -0.16092125201522067268];

% Layer 4
b4 = 0.61146574686033250412;
LW4_3 = [-0.10257673662582592056 -0.62569761685384284178 -1.110437898776252208 0.22366785327883390022 0.22543945559153763525 0.11655183339720104341 0.87080316693461035094 0.010664515602561836644 0.03097346949672744737 -0.59050054484593750281 -0.12409898214868510247 0.13532735253449812429 0.11863565415223918664 -0.29895000977987906676 -0.10640204706046144101 0.65204403221561857418 0.083287204759435309875 -0.71199843637429971466 0.55171167158712763889 0.056301743029546227892];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999991;
y1_step1.xoffset = -2.00000000000004;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
