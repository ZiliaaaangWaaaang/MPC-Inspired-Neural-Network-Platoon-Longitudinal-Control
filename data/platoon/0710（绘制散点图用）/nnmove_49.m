function [Y,Xf,Af] = nnmove_49(X,~,~)
%NNMOVE_49 neural network simulation function.
%
% Auto-generated by MATLAB, 09-Jul-2024 21:23:46.
% 
% [Y] = nnmove_49(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-9.8820989364874;-4.17631009264064;-1.99999468395731];
x1_step1.gain = [0.10151410520026;0.23976556688107;0.50000722551666];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.5482463376803514699;3.3710553800289542181;-3.0904707916651363853;2.8751961973878992218;2.1264361550272115053;-0.9640281487052844156;-1.2930136712720916581;0.50426878499203342532;-0.92903681502399793057;-0.56460740879493875877;0.25402718269540319751;-0.55337730066307599941;1.1842659505627299854;1.8127830104816045065;-1.773388303563887991;-2.2093130191382375216;2.9163718956899806756;-3.0395356591458684292;3.2986479539167135044;-3.932313066941055979];
IW1_1 = [-1.9662557107916533994 -0.237399810713574827 3.6459223353381302601;-1.2037349308572100615 -3.7208365152271527521 0.58771721823832878684;2.9233028317097602411 2.3500348341398296093 0.032517894074840479612;-0.77384040407016141394 -3.4929906094415525963 -0.92196642715556553771;-2.6632516014029445905 2.7611747744946750771 -0.80212547013672541585;3.4057445044813894341 2.1465947595204886156 -0.17059539703441320424;1.9455596224184950049 -2.9004641646215043593 -1.530273214569450646;-2.8811413260547560355 1.4128694391340494985 2.091093903006376209;1.2119305055033358087 -2.1761847275790477951 2.6752962995141311708;0.64599578009840519233 -2.0531415472335687866 -2.9837483129287880601;2.6834103604901180518 2.9100088367341676587 1.6247042615357347728;-0.18831111065521138892 -3.0117993173235007021 -2.4090940287545357101;2.1467617402829728412 -1.3713062345424658073 2.7016899158220244459;1.3029306988083397822 2.5008363985409682861 2.5316483168746497512;-0.93861941632120304835 -3.6125205000062798888 1.1597837352517117449;-0.1556007321283265632 -2.7645904970905883502 2.5360753259266437531;3.2753770559817145802 1.6276440850657558634 -1.0443951025790667586;-2.9142535801825175668 1.6115900419792512643 1.741906377162237618;1.5641930363573572915 -3.1333156008444742469 -1.5870805163680548056;-2.2199378613972835517 2.0431838008130935869 -2.2524319964056807031];

% Layer 2
b2 = [-1.408689055397183143;-1.0935735649014000082;0.77444755098459794329;0.58988120025639512178;-0.09973349995914899957;-0.088448118045570067736;0.60498393718169962696;-0.94057235211690559673;1.2165348368864532524;1.7805039634321790931];
LW2_1 = [-0.010162575513767854729 0.18704434780727330345 -0.32181256464583551935 -0.0051507478476190823521 -0.35440348038174407375 0.88392541186860307256 -0.41224483649564325205 -0.67223323615591257241 0.26601891548247225128 0.079570257322706533509 1.0824373568798164591 0.26507400753368492996 -0.060669824261370922103 -0.27119428005144791127 -0.9448502242819406538 -0.13179125604836161578 -0.077069253689512978722 -0.53269992657627007748 -0.35066192947767210741 -0.55423315076624224407;0.15729382178185055685 0.13983091575526734873 -0.0078425366466472364035 0.41177740343720936611 -0.75009264499896544098 1.0685456045524011071 0.2841394183264548956 -0.47693431891028498226 -0.37604552158882875723 -0.38217068987104002575 -0.10075825625058043578 -0.1738625046570629884 0.41659360026766745211 0.13560592639156265893 -0.8121802074559180129 0.47443892334863396743 -0.7130975998165280938 -0.2936442954906627878 0.72230842490140079182 -0.3787606159855865795;-0.50807058418291273227 0.55258512727170172596 -0.26647252552988892615 -0.39215902320086482025 0.78985339257738873542 0.34472131878535050564 0.66330145322583411449 -0.34377701816334316209 -0.68480855680807728447 -0.098343663652934260044 0.85974171583397063223 0.0064008501496824691396 0.065664324424436509853 0.3141413115787652921 -0.49305955185590011336 0.34979412877520810188 0.0068937130652104942202 0.16307881331692611337 0.29745781150525740788 -0.5437972321596700187;-0.21161196032753867846 -0.63222392997401422043 0.52198557978361914689 -0.043761374973778278952 -0.099037631889558122578 0.72505341847538551381 0.55065491525170284781 0.070976714600482812556 0.84237581431704044999 -0.40964829202188324242 0.36921365214559470624 0.005991155488877865018 0.20716672968275268163 0.63371633591831177945 -0.22697145883155819823 -0.059496562669160854564 -0.11338973356488629696 -0.2337036763263277972 -0.0037457647183968259194 -0.4527176774174409557;0.28527484789133455978 -0.286739979485929386 -0.34087436781183971801 -0.13420406524074221521 -0.4236047085948392299 0.36726730823440500995 0.48658739876149337267 0.0080426406426903906954 0.56949503213197805174 0.17365701786708268028 -0.40080258637268240118 -0.18183616881137143473 -0.50230199478183323869 -0.57483211873341855114 0.7813006888919505899 0.3393642168428130379 0.17023758999106064493 0.18826732468132903464 0.54166169840047384554 0.046596950857774890875;-0.64011801715587857142 0.64629458264916195276 0.49473656896237538927 0.21515558864013353824 -0.61706236313502871305 0.036157131694563193758 0.34905387927805486825 -0.14712406179880985202 -0.22143425700133911871 0.2856965975636966415 0.80177297062706354147 -0.23600157555870185377 -0.74697809833251749279 -0.31657664464992602005 0.44373931959288320792 -0.0912020121543609813 -0.069858397441266956163 -0.070495281402558895856 0.34694698420968922425 -0.63895350039478360227;0.84225961934184023772 0.53843811032924737692 0.33439698519300453672 0.029845997360086796296 0.4695689527046861822 -0.23225219655400763941 -0.085287767581404119732 0.84688091134981624553 -0.16887077527960164813 -0.24359870428635974071 -0.70700799891524046537 -0.75728589631289033868 0.31251061013260850174 -0.2849694188170883713 0.31029735638824373911 0.46200051498467065159 -0.33742091587698769262 0.15988639247854391501 0.13939400457970071989 -0.25020591278958487225;-0.44213685703116922809 0.086402895006330526773 0.16505398230982606944 -0.34065281689322268743 -0.52941560503979101515 -0.20929165147850092854 -0.28611453706736528213 0.24157937416163113853 -0.4219180208801238674 0.43969902783736752871 0.73932242190269092941 -0.33792900420931182293 -0.18602597438597295865 0.45342274802987786453 0.30383882688966756813 0.49002224372623676141 -0.49705316882273686829 -0.062437781161882068004 0.096215317744023420854 0.70839518477488372383;0.68843688340217079613 -0.65271542541282512317 0.272545334063539757 -0.80690583230004830906 -0.37186244833373266472 -0.90859085184161225701 0.26145104901487659088 1.1712337606128129242 0.49096776964082372574 -0.011105609162929335615 -0.80302907402670964387 0.4766858021108661414 0.19395795756418438005 -1.0914128192395768924 -0.088682369063443372559 -0.30826636939398516235 0.70564541814623227278 -0.038673598014918306176 -0.27791295921221975673 0.92764509985673193615;0.39990828559924740393 0.12194717649083139377 -0.31627248887824116474 0.35459049248634377793 0.13774663702900982742 -0.30468953161098799587 -0.17693368207357423882 0.80209075745845626049 -0.19039431809422507902 -0.16691076886287248282 -0.76782870170301209534 -0.29612411609197841766 -1.3399403222808994318 -0.13671053886977488356 -0.58555244881105916743 -0.089197867643274572624 -0.42906803986131791806 0.016211461300307483668 0.073760228236192701412 0.75372396399595431582];

% Layer 3
b3 = [1.8882805836447515979;-1.6921670234343106909;-1.564976887683882989;1.2632390350826991909;1.1371324818279384683;0.80323457036436218814;-0.66780030757220432136;-0.57590591293958826036;-0.30733803579648072413;-0.0091567956465457983617;-0.047750896616501496694;0.28933106590243723444;0.047889221698540200556;-0.69154577780533499354;0.94812326865051388403;1.041369403981882158;-1.1865895796704826193;-1.3095248301390949308;-1.5477521684527750789;-1.8605125173159173801];
LW3_2 = [-0.49584225557577793486 -0.57068805715734971518 0.75970319962681964743 0.64422296849485649606 -0.0114590413040042121 -0.21826397615058443225 0.063369514646628571919 -0.93192397180331787432 -1.0358751643272525733 0.12223931966182373376;0.92968843976999060441 -0.50612017981592671845 0.66485135994388722125 0.18256854232095490187 -0.01681716589058884076 0.027435666529251650364 -0.90452936092626812226 0.4838311776687520549 0.47404021124476236615 -0.82516261050218431272;0.67655732966469606104 0.35018108801418645903 -0.10749483781914731528 -0.75306559503762859897 0.42452443253552396563 -0.41463912104505112888 -1.0625716416406054687 -0.93494058562836446225 -0.5168135918955777397 0.36983255274737497631;-0.88543737232372587975 -0.92017561981842743712 0.4893072078657038082 -0.62073511682226700792 -0.39558997696857101101 0.51305124912331734333 -0.8315503997534423597 -0.25643546750070711493 -0.56914301024302793586 0.0081796082459069073545;-0.12765013582532339087 0.22044001347653152667 0.52954620862400991754 -0.4487347962439505733 0.80571483609386984615 0.58638859263186582371 0.44803131257421591194 -0.41539593552857601022 0.73873333379254269015 -0.66330579509635312352;-0.89119931425242815415 -0.42551164550345765836 0.31849009932335198281 0.017552847065805895349 0.83528803307626531272 0.49926110353706515399 0.31993179684856626332 0.31645553247057756074 0.918655349030938706 0.69394190324733839859;0.38245744619286392574 -0.40600148796543056307 0.45575663654563514093 -0.19560805304415487815 -0.73077425608620216746 0.66419780369186365299 -0.79460231836447525744 0.51160109755069937965 -1.0948470130087497587 0.87271111545459167935;0.15421836826484647265 0.66958669852583641013 -0.87920577040500380583 -0.35943477485666414095 0.7945834917283816079 0.49712139951875289334 -0.4203193350536236772 0.1409347818256022622 0.24899449338675544441 1.0386932426077843949;0.56793478406205810671 -0.65030997970553416909 -0.35176767969824007665 0.24355262089138174364 0.80941449078555072205 -0.29858394200423471476 0.70853145350529300739 -0.48382978041645058331 0.88103698903759497529 -0.62387236815551661007;0.27701701151901259035 -0.70766805709524394086 -0.60597030960546849343 1.1073779541824499972 -0.38858363137198448367 0.35367674570384100008 0.952824552136120273 -0.43571112012514007228 -0.34129332402784090528 0.78877557289055788559;-0.27604634914801345902 0.31663160958761910058 -0.74624387962529847851 -0.48038219072180698976 -0.47797200029874187255 -0.88317560983494192151 0.49362353178475976145 0.60636654363073638763 1.7304503728940854312 0.097715973524061944255;0.33710105045547122948 -0.99287571911273042602 -0.32148581781414337089 -0.53841583980329454917 0.39815638114915868906 -0.66656339313787349443 -0.35270512413916565997 -1.0922303113441069744 -0.53657279521903089581 -0.46198727343897466602;0.35074410515007958811 0.18232501254814342806 0.21393506169419723717 0.40763960462919524019 -0.61501239507407823304 -0.77829389602159904094 0.90777027670932364245 0.88707400746739051289 -0.99069096281662460957 -0.88614214510589850438;-0.49566340564002414615 1.1772471462612736914 -0.9650129598270965614 0.22632484263438437666 -0.15517127228172214459 0.044624077865222155914 0.61877521827057413439 -0.22041063917170955477 0.35223560112871127314 -0.62190841385197037638;0.58967553345467926817 0.1160827471324085286 -0.57733098010217143159 0.41652463152320245987 1.0602597033074472321 -0.4434204909619265389 0.33564740225647604621 -0.88203207955023144038 -0.44024767683242033156 0.74919910050173132987;0.54323278801890473311 0.64062821862521568406 0.88356453298741677305 -0.57850022475923235099 -0.25534072450165978818 -0.91310533844771557543 -0.87129227395709607507 0.65470377467347506961 -0.10278820846947249457 -0.48434615140863285232;-1.0121889223661957313 0.67195528243155544512 0.25925555581337794697 -0.75339823009675177534 0.51362098891506102749 -0.31004533725487426477 -0.035467668284107509158 -0.9018750311596599456 -0.43697685111643680411 0.62167327517661052916;-1.0406422011365579205 0.3259585093682517698 0.91690361537278408655 0.59322330689075486454 -0.44391374328910065961 -0.42417763818763321026 0.79003837169102220095 -0.58652917088252454203 0.11965779223014127997 -0.25471545963621738951;-0.7186647435511347437 0.66952189435954301278 -0.53068132003377810335 0.54572769672370513572 0.064226533328913815168 -0.3214044755734923875 0.17911427179201563908 -1.0816436674123244277 -1.1928284636425670051 0.14016729049149895259;-0.95324106449851897516 -1.3568887898453803054 0.41404046654524995219 0.94784047272390103966 0.18736706999575578059 -0.66083338299824134765 -0.44915742996408342114 -0.057047210181070777402 0.61355331672005164467 0.7905507761611094697];

% Layer 4
b4 = -1.1025749013419150479;
LW4_3 = [-0.26815920062831682946 0.027547017300092738884 0.68176815268761392641 0.40282116350626917534 -0.64342523603341639227 0.61444235158541371522 -0.6038997898656346397 -0.96543812217704816359 0.16294667882804503289 0.72581204818904954124 -1.0137587707387407665 -0.96640807488510649392 -0.54512767218645641343 -0.17322646184171014427 0.61739663141237377531 0.73701452540249456913 -0.44851302020674549409 -0.20971882382402765033 -0.85882095794386070775 -0.8911857104215787917];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999991;
y1_step1.xoffset = -2.00000000000004;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
