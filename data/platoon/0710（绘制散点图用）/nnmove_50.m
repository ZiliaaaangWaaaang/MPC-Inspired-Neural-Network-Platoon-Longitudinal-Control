function [Y,Xf,Af] = nnmove_50(X,~,~)
%NNMOVE_50 neural network simulation function.
%
% Auto-generated by MATLAB, 09-Jul-2024 21:23:47.
% 
% [Y] = nnmove_50(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-9.8820989364874;-4.17631009264064;-1.99999468395731];
x1_step1.gain = [0.10151410520026;0.23976556688107;0.50000722551666];
x1_step1.ymin = -1;

% Layer 1
b1 = [4.0535324630671363266;4.0229131147529093582;2.5714339442501557009;-3.0491075927111297439;-1.8722813744427087013;-2.4885935633138913659;2.2084767927592983128;1.3407907722693741537;0.83124224048644346219;-0.078554463736980106869;0.14867525472884751681;-0.27001403061610002032;-0.74355470503060139276;1.5251797686138806043;0.31541197646212926209;-2.562967998375718981;2.7273055596279460744;-3.3111395016254880908;3.9266440522559200588;-3.6407447286026282107];
IW1_1 = [-2.6939121005245731943 1.3758083515962029608 1.8700879419203610965;-1.7798160496362980254 1.2138596102673924193 -2.7591725052969633403;-3.3229675366313116136 -1.6161467955886230641 2.2025273529555269292;0.17249539310725639507 3.1659908024629719314 1.9514692700602849218;0.96322481846253871218 3.0602324540922700713 -1.7748366707526308517;4.3440402736503784809 -1.1788760503397479606 0.35557345632611969677;-0.20537108348152563475 2.4185357228600068424 -2.4121715681916775509;-0.34431600695567055048 3.2244775909005958248 0.7744154049941247564;3.3465716656968020892 2.4109379430020836388 -0.38221204651721552015;1.2474367056738795423 -2.4000518552522183136 1.9362206173295324341;3.2562680653943285591 0.048774913875841166555 1.3278255466789492534;-1.6115561050960547362 1.3405882561193698255 -2.905009964937168121;-2.3442746527376265853 2.8922317289400858442 0.94424527431543880951;2.2999598937533427545 -3.2318986721408364815 0.36121164870256439183;3.8534311985285039093 1.6232173953071860062 0.42068986078850995058;-4.9910880147075529223 1.0101828704731150577 -0.50084084963944663915;2.5000140608611580717 -1.9472542861326662678 -1.7132224839153635809;-2.0542804028837515773 1.9087386761812210612 1.9555913748252500284;0.50922032883491963329 -0.91962667808266451708 3.3379939380426524309;-1.1022420758186164402 2.1802294274213505076 -3.0507193898403444088];

% Layer 2
b2 = [1.7442617108300768614;-1.4933164163764538479;-1.0048730707111932503;-0.70696416831302766326;-0.1657894754615236721;0.5787698995705096161;-0.27337940780424574427;-0.75520939698226619008;-1.4261772411871787014;-1.5757300900451183256];
LW2_1 = [-0.097397809935869300579 0.37633126311115844276 0.01619298308780407758 -0.023918944126324420685 -0.23451680782018535787 1.3898395658409437026 -0.81433895428765445956 -0.11218711332270842052 -0.79258128185168930102 0.015461608615352322865 -0.3189932281877377318 -0.32821423098235497084 -0.14672492502793971214 0.34475362841968232308 -0.72015493853801337831 0.10409777886812089653 0.23645169661773923764 0.065508030684986048864 0.029118291206408956906 0.30939945922881256779;-0.055663500374136372362 -0.21208571575073029147 -0.017762239797612586201 0.060154100427329597334 0.38242872090661311768 -0.7981366609640356824 0.59442476993206416758 -0.084915005000152837811 0.48526589134854364316 -0.22927686983344089389 1.0295755774358030799 0.31202559460534479152 0.35180316873385458765 0.40014507865210063864 -0.24466932874730787373 -0.087160955076748133918 -0.098686844109854662821 0.40298320412791788225 0.39984804581473532004 0.053169924488524561434;-0.022577174568377433861 0.48245059765118164519 0.10434176989896319643 -0.69679809373823731189 -0.55524155085425108691 -0.50452534813442828643 0.22131917804936115934 0.84082770686563113038 -1.0274131515621398592 0.072777400896263735874 -0.18236026096373503247 -0.055836122543205357616 -0.43148268431534031464 -0.27042226907802990876 -0.80321857703677157492 0.11622459749315808275 -0.89148900480997561591 -0.074583308600374417785 0.34330262492583613065 -0.62596136722932294028;0.027574452472348350701 -1.0845897096832382012 -1.8183429927911918256 -0.27083215073304750531 0.45876238555497023119 1.1617157440716341377 1.2559219861073316338 -0.0022501692641983530793 1.6490029188798616122 -0.13472162334929377314 -0.41983889116634831584 0.38732287574277562969 -0.6473521739633406602 -0.17023425888764376346 1.5739243027509468575 -3.2035302137156751456 0.068721057773219504372 0.12045734235765821751 0.54307141054157104243 -0.063888712113983781027;0.24659485083230137104 -0.035965659208043926354 0.4301567327830991827 0.51201983533273109916 -0.075728935538580371967 0.53824897340604249685 0.38601017202077492207 0.43663124806627134911 -0.25908605432646120148 0.094840934228430817665 0.085484260932892477958 -0.20704901748766957326 0.42765808996637960648 0.19122339160311457862 -0.32933270872130043783 -0.58691344054932892416 0.035563659157417625012 -0.058331988490245449686 0.26435498492696662964 -0.16407594978402123553;0.35601758732533744789 0.67310896322710134232 0.80563522910100993091 -0.54977237080005569858 0.16640678538349712445 -0.056553126865448527516 -0.18933254265880955503 -0.59148260634107052702 -0.38876596429601756322 0.62222979425306035317 0.42560820748321021023 -0.23561353406247886877 0.019702175585860071116 0.097119821452793991812 0.58530866285317362241 0.030631198181275277881 0.56741070806162841045 -0.08289463535015349771 -0.42699879427448328428 -0.0022019407424296328496;0.085697229734448737704 -0.48515206568841534596 0.75150822386348448134 -0.62900275571923169871 -0.10499300826656424168 -0.037549316917596754772 0.33849945328851105408 0.018551002202563612181 0.35014401248408527634 -0.89420666569307794003 -0.02292798064458218335 0.21879590526280523477 0.043415997152611823795 -0.29219983323237447292 -0.053674111454795357667 -0.37304145034189661878 0.29822707260819963926 0.098053123757811971872 0.33642143377104366531 -0.45397502075119827714;-0.040795141732727732697 0.97440024446329265295 0.083222550926303456853 0.22321361499039124587 -0.12217714750596347928 -1.8216228082474421601 0.08669538497653683784 -0.13118697883314622832 -0.83741756236836373262 0.2771476186324954849 -0.55364719125968087088 0.076228318098948907866 -0.016484301138466939118 -0.2571074336290081197 -0.39929163595789790575 -0.64934695675371911783 0.61624888468930216767 -0.29899443323570079611 -0.48408000187807853631 -0.15194016216205391556;-0.32309001207952425805 0.26980274689773836583 -0.66348882920283003273 0.77943465961991631463 -0.26878270126347258984 -0.83827164692332911677 -0.17436799779448486358 -0.29326045950522366956 -0.2362621204573191469 0.33952486774414974979 -0.45339427255077563439 -0.18289174740327304725 0.17820405499021341189 0.43173659774930284172 0.38083024091031020264 -0.024838920612658917098 -0.28512603954038268084 0.76488833482491702664 0.3433142252407793138 0.29780498798505211644;-0.37487233141822795535 1.0273601892606423203 -0.136907714853411272 -0.11033655836380507065 -0.30557129902328677984 0.032903880728880091633 0.62645335215183872712 0.077187739826767062801 -0.091712312022660155697 0.4072552652984386401 0.17357511025163871454 0.1492029600309185966 -0.20187358168709235162 -0.99578255415705829723 0.91368231659374876674 -0.12877648208598740931 0.094629737954265422117 -0.33709387014596070564 0.33991239047059779166 -0.1126457767963476575];

% Layer 3
b3 = [-1.8043814561176700906;1.42835017589035429;1.5115144347908608946;-1.2711595978818743813;1.1433316132324096159;0.93077433540853637961;0.74809830275440147851;-0.51572790204659613167;-0.48809790070482977908;0.11234390066630865757;0.38122889171515944584;-0.17349402574622674322;-0.73268843639677716517;0.94012828902188894098;0.40714871665990903793;-1.0078790828537218527;-1.1930805098318573165;1.3909139870991746868;-1.6953776941261453626;-1.9143073299289536937];
LW3_2 = [0.80818728273680728869 0.18549553890004541468 0.71169426430449445053 1.0424953571876136582 -0.68534133763237603532 -0.73864854480842734308 -0.54263651634413634373 0.79263736799417783274 -0.56576640533614297457 0.21927354755986552814;-0.82403256623408571713 -0.14554477318914701978 -0.14030166367611437983 0.7326138193752739225 -0.57544852450291439361 0.24769199845691008965 -0.91738921450651922385 1.014856647474776663 -0.22993590404657832105 0.047321958892512457073;-0.27829810000477284149 -0.94120595622719638307 0.23868246804879120204 0.089083139468230085334 0.43538307505864420888 -0.81305168888620482637 0.68848600985896657445 0.88113782044284016948 -0.65782317256068734146 -0.096555731236855568689;0.54833243832001821172 0.17093942857140664859 -0.12729979113589856565 -0.15847546460734138196 -0.78875494028444559369 -0.22774740388389347334 -0.83413793635399891002 0.85557155256369221696 -0.33090184127821242743 0.3874118219122299478;-0.16571546323240973764 -1.0316622180079504378 0.5512634522984699581 -0.43971011467469328649 0.31219724256290620756 0.12856122709849970853 -0.5037560870432822302 0.30496748459989364566 0.72545253664347542077 -0.15964603140857164254;-0.77244977968000660962 0.14262781672910981867 0.63996148116243223303 0.62291525840319417195 0.18096856454757448418 0.8125941785284132024 -0.64911125095020949516 0.69130520626792524297 -0.81677237598457952394 -0.073607162242475460134;-0.39877345864845059609 -1.0749901855042947041 0.68158020890339010567 0.16195842545473662644 0.077697567145489879192 -0.42461136103530572328 0.66393770620933256765 0.25245405907829981951 -0.062409372174582394832 0.80348330238796328295;-0.022671351099876013019 0.12382037177507211612 -1.2671425915699623399 0.72080574080093173794 -0.37259394459918326881 -0.39788171585371606698 0.28287960833275421768 -0.15146730326416313339 1.0470732634619248635 -0.15462395583651583619;1.299232949952574101 0.26055853663299599621 -0.20263208801880122634 0.53094835927821992794 0.18141692173957918444 0.76307786919876996468 -0.64029034318458721842 -0.5575514277908333316 0.20727486720217333516 0.34675533236776279189;-0.50590799092614713306 -0.50349859600987523223 -0.71718950220074961788 0.41086751153871337028 -0.82311119999990345342 -0.066483657479176574978 0.0090273888232742377502 0.3937197821119139407 -0.79232385217082546003 0.75055348561269696894;-0.34087269964457239668 -0.94680786560676488683 0.27883720313988941131 0.80014098649773612859 0.16044933613646156223 -1.2803085176918156396 0.0060251134775353588219 -0.93979689040898428676 -0.095542226477446909327 -0.76748292304111132012;1.1247886549593322236 -0.21103769465117516724 -0.21634447653529556566 0.82377752386124203365 0.42549208777822739025 0.11910156037514994798 -0.18302149600495656867 0.86278648196740037601 1.1255051345802533636 0.36739033571179446902;-0.1128872345018474832 -0.60725120054927350655 0.52729535736499633103 0.43123197789805345348 -0.17397639917639406981 -0.56976068042788341472 -0.86134195967117299642 0.061566180690381624996 0.21954252587367897864 -0.96087675510028613957;0.823768965678997378 -0.5589785952147560133 0.61055931425868337215 -0.042555068208964333398 -0.43583255057034009372 0.13754372386760599367 0.62929193954385498344 -0.14573036122520008351 0.79390235146203658179 0.37914190616945997458;0.13455079862050012274 -0.06095460454501139963 -1.6569678426055032272 3.7588944815695706225 -0.46235175756036772654 -0.10905977889435966577 0.12480723671995289092 -2.3309839895794643994 0.76598279423665105448 0.25073679771814227912;0.080923270453266693547 -0.31283940254454434271 -0.69313747013722071255 -0.36768214786528924387 0.93136368799903079818 0.64763213273008046755 0.52140974679473561793 -0.19048874863294268378 -1.1023299891493816283 -0.57937570923243220111;-0.9367108246078235112 0.69189457107407037473 0.71567517319955364918 0.35546387405411677962 0.27235943113122207393 -0.44039165527511703324 0.65202823252150821087 0.81095006851936668468 0.71074520941545393793 -0.13229040722942742025;0.68487784836351350837 0.080261015417539063876 -0.3818002222196549833 0.96428059881249028606 -0.33140795787882665335 0.45339300216629563334 -1.000023967731545671 0.45940066949461194623 -0.75427406544390851462 -0.49341348659507272556;-0.6656824263922549445 0.54769712229221911848 0.28376209745840186294 0.39941239268299805198 -0.64516167176652139403 0.37888681700537568675 -0.57530434444710254471 -0.18916892008442218187 1.1672613976493317889 0.54199516778655798532;-0.093969505455898327817 0.089927073186426453866 1.0723336998281416399 0.48740149842836905103 0.32906772088786823138 -0.93608769796953805731 0.22433940271731797611 -0.067803541290107571804 -0.83680219526222832105 -0.11377522820717646257];

% Layer 4
b4 = 0.89683308223914315338;
LW4_3 = [0.74025506656685025053 -0.33658459828147141435 -0.066430510634316070062 -0.51188987671703456428 0.82220739707559176157 0.28247459694529358787 0.45499603394109056076 0.65489453335554959068 0.65778649756515861213 0.32322731859128961407 -0.67499992151619192526 -0.37341622373085719966 0.5710798938324553875 -0.15201406320857049903 1.1627832498785650728 0.26600638846868202014 0.27828286481604541658 0.4880834932479511945 0.11237499202165966705 0.98498099048494280883];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999991;
y1_step1.xoffset = -2.00000000000004;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
