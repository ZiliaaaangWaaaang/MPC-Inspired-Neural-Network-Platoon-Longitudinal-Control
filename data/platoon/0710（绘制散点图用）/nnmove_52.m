function [Y,Xf,Af] = nnmove_52(X,~,~)
%NNMOVE_52 neural network simulation function.
%
% Auto-generated by MATLAB, 09-Jul-2024 21:23:50.
% 
% [Y] = nnmove_52(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-9.8820989364874;-4.17631009264064;-1.99999468395731];
x1_step1.gain = [0.10151410520026;0.23976556688107;0.50000722551666];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.9982483876335908057;-3.3192406494260069394;-2.8613531834536569676;2.2879679565701795951;2.1324580871023370854;2.2430472980181557219;-0.9909577578752453153;1.0145194502377652412;1.5958803990233230152;-0.28232123814519471949;-0.33306310331743593789;0.82787636088440119675;0.64907233093635452459;0.41343913337065552049;1.740827554952439904;-3.1465467681191805482;-1.6476195504961836935;-3.3623443411513971313;2.9374920778254285381;-3.4937974610767268402];
IW1_1 = [-1.9736059809300294798 -1.9834811721517395799 -2.4128503868481359085;3.1126991053858832359 2.1364598376276568992 -0.12815629374325432366;1.3289501606145028845 -2.383066309595375909 -2.3650547953152916136;-1.276745569154091875 1.1513089334126165308 3.641145901827622211;-0.26431487679443810279 4.0751807810968205814 0.057322853940037332698;-2.1397701406229865384 -2.7070413105669892673 -1.5663200869052744668;1.6648221211403282371 3.5611101543492327259 1.0589072993134778233;-1.4870351131058037186 -1.4974076214958023101 -3.3197465288899712377;-4.9784132288764988417 0.63941820536477322889 0.14843536520551495195;-2.6736983979663175859 -2.0212885122429415929 1.3880846893650693463;-2.3783340221143745019 0.015502365231417916669 -2.3411454219278668987;0.045774242100370739206 1.1747130311048079587 -3.3328551018513179471;0.8116732775481535489 2.0160884525003468504 2.9818409535566927637;3.9383376798434981403 2.3433098797261986412 0.73503886589624856107;4.2471092818660292068 1.1774455055885548749 1.2736835787868008296;0.3401808335351551027 0.74437093248656172051 3.3544755594193476078;-3.7510367753898687937 -1.1018012643645767046 2.3285850863474775174;-2.9832698741527168274 1.3160946948838463388 0.52441865840810775179;4.5981211541879529747 -1.9257226049667575118 0.43451791840574133241;-2.5839506166144401433 -1.746517673040644647 2.6514598332495951105];

% Layer 2
b2 = [-1.7428591368619885671;1.2103089725165732116;0.5774610182477002418;-0.78947259652450163525;0.09680099362806629526;0.29401147557818402278;-0.60104853244777445287;-0.81213368182412992713;1.7895192353676161456;-1.8891927116788185259];
LW2_1 = [0.25258402504011712164 0.47348344256986957257 0.061379199249650934211 0.037617812694377687766 -0.07512948526593668519 0.36902414522688736787 -0.15388791927092521084 -0.40830046288790805553 0.11733009957392154243 -0.072642891307682477819 0.21076122949646231008 0.15323717764547498121 0.52266364258196074122 -0.70572120577751740189 0.45360282503604970605 0.16385571524381914443 0.21218220135874740762 0.52900675006351860485 -0.4785284044298114825 -0.1229461603384759405;0.03844262058499224588 -0.46187886792809074166 0.13257924525891270906 -0.55362039070085800052 0.55816287456386293186 0.032810702845458658561 -0.75809731219637221944 -0.31447407455435405499 -0.22007934723486424766 0.81989281082585163674 -0.20578943128043430955 -0.48466730895333470786 -0.45646859289390601111 0.33391827884450031583 0.37957702085657019087 0.24459203219375691418 -0.44328054021059426493 0.070464263153418846275 -0.084057431009508867814 0.65309406231010391775;-0.90129933034934828218 0.22752429872004506506 0.53692401857059623982 0.055704026169425158166 1.055267703277570579 -0.8350604177612651613 0.766878883769440578 -0.18583081793366232337 -0.036838685711573497528 0.46417189552572324374 -0.53181704407803376267 -0.18260305158556694449 0.39878804909549669944 -0.27383478659864957105 0.17446335206451279998 -0.55414514241140822026 0.30077332464397460443 0.15292081497689460901 -0.42206493260623312302 -0.1247103906595953271;0.57487141729500956799 0.19466915278069493733 0.61585659071978271495 -0.67026731322236143829 -0.079787671068221210913 0.40574973474446729416 -0.47395531368054005794 -0.81666465482010963672 0.81524198823104487843 0.24100782472716239524 -1.0482487610486224128 0.46502227695538578267 0.30969034147189211659 0.29134820403733580063 -0.070097031812895241321 1.4268595829072607817 1.5734067957968211893 0.34286163343459824526 -0.53116015673883021364 1.0544844302355369514;0.20686441757711518385 0.69751427169184065935 -0.33951715967403633956 0.26424228474294841895 0.47606186523890314799 -0.16694330926673020543 0.83447464945399840719 -0.5192379550601192717 -0.36988298273317626874 -0.091142344409289866025 -0.020035284603735391967 0.13735378536897188684 0.33137153315649869878 -1.0416715730909302806 -0.41407933985988293335 0.54617869083153103293 -0.082057227267521182235 0.20751669137042086377 0.45016658031252759775 -0.44098009420213307719;0.038563735117189967827 0.17929167049544364465 0.17589974518954931693 0.0078123459524266566922 0.3121572323791182435 0.087995475942728468288 -0.4129286394818486583 -0.17734129070271995032 -0.090064502893818482177 0.52205746238361139255 0.03567741225900550317 -0.14281588011119597526 0.38850905497321608362 -0.84290169861141728269 0.44009898744644149193 0.59962966851710053362 -0.092017644605393356105 0.078553729102649169636 0.78726595990472225672 -0.082643742877360343302;-0.45093249053390410674 -0.55786754877012723064 0.45212415249845133713 0.37045283701810727273 -0.2859594778828108419 0.16128937082237254641 0.2184431347089083042 0.20426686277090294608 -0.12818626116757783628 -1.0731195706727272299 0.53926505348798126072 -0.044847046015969879718 -0.26303483438016156404 -1.2029842502872742926 -1.264749696088296238 0.52201801452813245685 0.0098452622654984466022 0.64181405424974691254 -1.1802932293985888279 -0.31748147310670621346;0.19210228960887754113 0.0060183174338708745818 -0.094598985689101688923 0.19890148570082913371 0.17671491883883699847 -0.45692193928317365037 0.9592576911136632134 -0.50425291624712564875 -0.71643437665850284723 0.30030198447927031191 -0.50228919914127356794 0.068639650685709444056 0.80124846443453479061 -0.18130026607396659832 0.58410300085301225526 -0.019354968602351613205 0.62218837910646695999 -0.20296091429266277517 -0.36800877053923175541 0.086433904449883317;0.63457306826373793829 -0.62910384951001541154 0.74939709875342253032 0.47248674488089059675 0.57950135668437308123 0.33515126688777219233 0.15243242858047059696 0.10748828366348125996 -0.44978404077894562629 2.20102495487798544 -0.36920021953284481997 0.14844467263273783408 0.33386820019988772135 -2.4982883079351831945 -1.6460191344843353445 0.14252451828672063616 0.33552930542857906104 -0.27241367178585479403 -2.1230288546829068075 -0.42081520021727164549;-0.10920282221568429482 -0.36109201602525770047 0.17665705132633641172 0.25130694569289208085 -0.29005792923131301642 1.1768263887016265912 0.35320932623231132697 0.53734200412532906466 3.4820703006232962551 1.6256225567553390654 -0.020504035208416111075 -0.55982767504826047578 -0.68653785600776862097 -0.42667243645014707454 -0.044847503660812852722 -1.3250144473730613992 1.612684540306267289 0.29959038336803106573 0.063442901993573719288 0.48063194116937690836];

% Layer 3
b3 = [-1.8980878043065081417;-1.7335192872447959811;1.460303394381726072;-1.3274126779178256896;1.0827262690703451931;0.80930221143588199073;-0.85037112473949960645;0.62809484635028112187;0.1781970498042597939;0.25041349290519804294;0.017082600572675687989;-0.18210714077764356134;0.17948175151506065572;0.99164577522656938147;-1.0682032162513399598;1.2546197647024175392;1.5245240873010164062;-1.4920102263800261166;2.0866003073584042937;2.0426812588666933834];
LW3_2 = [0.4787815030624136825 0.61890146856437622258 0.38256464055448974326 -0.55681696700241933851 0.26098583396171015636 -1.1440511501631800417 0.47738890218873392124 -0.12600061015600752534 -0.78894587154473283519 0.4834484534974464176;0.8392288987605450723 0.64469320796613227564 -0.013477000602508466126 -0.87750125394945466262 0.61985645392304722368 0.074752034633370961769 0.24020100931944002309 0.86649579939226861747 0.42844624832339400777 0.56655461243522586834;-0.92459444842688154331 0.56556207766721633412 0.24958484181724197026 0.27078902584467107184 -0.30932147990735381349 -0.21894187733865880241 0.92669375985002977458 0.64878556771837414541 0.28910010063465652053 0.28257415066479019128;0.29112930156801436476 0.02838998109079263199 -0.41534287211100595627 0.9604110166658966774 -0.13771174807282290931 0.47285671660834288632 0.783646087058543106 1.1496620541484090516 0.50995504943225500316 0.90945646278557790154;-0.58990012113351841805 1.2395471297990783288 -0.19302878229281084099 0.049626547471360679675 0.30190386517960304813 0.60815277137420675757 -0.18059609401084797398 1.1528605008450079072 0.38372468798285497282 0.065791393953509635928;-0.30679177572392024587 0.0042123869498002508571 0.82788161342300436996 0.53615588124130408865 -1.1214501192746633151 -0.93527327159227569009 0.51653451994759713717 -0.51831777665558254053 0.44782412954750216993 -0.6789557090797796457;0.6091181219223145149 -0.9765201032858081831 -0.73335185398595192918 -0.48228040277588807294 -0.12327498721131228965 -0.19664210279439389706 0.5736939713788351547 0.61404449878809541641 0.080006782124821512747 -0.5078969536003684615;-0.85312236064922997159 -0.48185110360506594462 -0.016772541270403937275 -0.94106736355205711231 -0.43053995971731939818 0.39497091329265654469 -0.45401527353206494464 0.61811761178801472028 -0.58285723390355448359 -0.62367676896441059942;-0.29849559132618763702 -0.73912758015630963815 -0.12465865240495109523 -0.22568721546061493166 0.56969525970003143112 0.47456693143306494242 0.39852338697846007021 -0.41690827240619804384 0.82784888640713982788 1.2282137165812339052;-0.83397016609638752183 -0.20801842550898091977 -0.12838066734812067504 -0.96292791972724345317 0.51566760058936145228 -0.5753767957408862932 0.53008138572201124461 0.36810109572694588165 0.42474980968393766245 0.84377466178799531704;-1.2576853871546018748 0.0237235520954781412 0.59252034231101913253 -1.287754095816944222 0.64446303505809521273 -0.20370586147095570695 -0.40089403561757391836 -0.90358159555879669078 -0.33185905529176401574 2.6391626344265426418;-0.85553098865630428094 -0.56860092019878560876 -0.59454634094049185755 0.75066708369635926079 -0.45795672332144110594 0.41815668461726390737 -0.30318804603470567161 0.36622839912317095568 0.87581000224086891226 -0.91985516802669464731;0.57318220465392222263 -0.1047963103408319635 -1.1408484920950245911 -0.14015327618770329066 -0.2868788940301768009 0.0097227044871741781507 1.026963848981986116 0.74721906649702796166 -0.0015084740312759775671 -0.4797737006617296962;0.59760624281751451026 -0.29103155387358237149 0.29194529091790194508 0.0075944409013878125259 -0.33053963817516701651 -0.067867647438231898382 0.32990402430524612409 0.55745811372170561704 1.1119189810851735079 -0.49494070938075668264;-0.13680191035032510105 0.41313378891592072994 0.94840517275086011484 -2.0500799340207955801 -0.030507202490172549009 0.30194127847490248584 -1.4171838495299602378 0.53861348129078967517 -0.2920092950433449408 -0.15212507186045445828;0.33349647019856543118 0.79909481628302403422 -0.86529150887653838442 -0.78488870399278909407 0.34046326184482178512 0.4758879406842466131 0.34742624640031138927 -0.62480631647040774101 -0.56558498823780489762 -0.2862591273032331074;0.24803393817608454519 -0.37013368974333238359 -0.76422312740574893652 -1.2404989879722929658 -0.74397830598877956465 -0.060219892289263901586 -0.51071496299550234177 -0.63148661788737325828 -0.67737520839613030166 -0.32979886709920019916;0.00055066008884150502434 -0.5866998007879505872 -0.18483683900220559959 1.1276068084825534577 0.4565635851595651884 0.27322707431369996911 0.34616286258694523026 0.91079046604914759566 -0.74186714604086057001 -0.17404948158861635599;0.041659579943238579658 -0.11246736361283350691 -1.2494839006112259394 0.34140988018349788247 0.45714178728903237525 -0.48418135349361646202 -0.020999230737947151976 0.53087528545792117551 0.64891657348510145553 0.61324655384039872263;0.57046806039735975524 0.47368988651473370455 -0.13058621095874906048 -0.66938110530556271804 0.26971794466528720147 1.7067680652951249254 -1.1045844099588779663 0.59558598883392188661 -3.0051301840481881023 -0.2697154104585940404];

% Layer 4
b4 = 0.39444737532157064797;
LW4_3 = [0.076289131931830150846 0.34149623491169189826 -0.60765418027941331403 -0.89810089623946642856 0.30336027042683166854 0.3830718032075359214 0.50246770977973465033 0.31827950124136733523 -0.482371776503274452 0.38342996726293698817 -1.2902915537021357739 -0.29630562481740430059 -0.52856120286644348027 -0.24314900593461813427 -1.661306179844024733 0.67934374285060017407 0.75581564758289776496 0.97562549023039879525 -0.37171243389471492202 1.3546593938269075874];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999991;
y1_step1.xoffset = -2.00000000000004;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
