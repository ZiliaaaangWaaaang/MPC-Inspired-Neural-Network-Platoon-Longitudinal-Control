function [Y,Xf,Af] = nnmove_55(X,~,~)
%NNMOVE_55 neural network simulation function.
%
% Auto-generated by MATLAB, 09-Jul-2024 21:23:55.
% 
% [Y] = nnmove_55(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-9.8820989364874;-4.17631009264064;-1.99999468395731];
x1_step1.gain = [0.10151410520026;0.23976556688107;0.50000722551666];
x1_step1.ymin = -1;

% Layer 1
b1 = [-3.6439088857806720689;-3.7630191352855444364;-2.4733168650256609489;-2.4315829398224897417;2.4886794580285247491;-1.7024083512905818782;1.2087752584804347666;0.69776555102944415321;0.3625336542542474394;-0.730495186798191809;-0.15641067184947407553;-0.19915660746040830809;-0.94374454587380940396;0.25913407503371704843;1.2656830596178307857;-1.9280137292632577584;2.6824364548450012613;3.1152478306655204676;-3.585709866409174662;-3.8750146270159966377];
IW1_1 = [3.1394444810654276168 -1.8988067754285702371 2.0477402565395972367;1.7687361518095374713 1.9819617786797474324 2.0323907706355370806;2.5660212937842903358 -1.0174960013091061128 2.8631846792250028599;2.6914716975824632961 2.6213273980973581523 0.87681656027357235406;0.21433222210701283195 3.6777385327529046322 -0.6269181891593035294;1.6512055137912904357 -3.046829625401598296 -1.5509253464813355095;-0.50247573087184171925 -3.6529778285220260159 0.91650071902830054782;-0.00053701336226448124697 0.14962812934974706325 3.7655292675527229918;-3.6192829296091568736 0.63903076690699034401 1.7392156683568031905;1.2508922376046807123 -3.338281689842474087 0.30740407997078500468;-1.014938443598665474 2.8392238413235784122 1.6948250727981957198;-2.4544860067222513678 2.7109932802877798608 1.3780972333363161741;-3.1344914324955643892 2.4084918326935227384 -0.82783620449208872305;4.3960248532617978157 0.81884571608436484969 -0.46471644018467167525;1.0040312351335198837 3.4115537851863289021 1.0638435778551995625;-1.5852426870686566751 3.0074752634000234686 1.7153452532280035747;1.2936536076642304316 2.5598937098604888085 1.8459067715691701572;2.3199003057365032987 -2.2946970532163506462 -1.7351127459998658686;-0.045113031975165293619 -1.8109828021907115048 3.071132890808296878;-0.52251175892393952882 2.3852003231497640456 -2.7227114965438734551];

% Layer 2
b2 = [-1.5552877417627606338;1.2241024079123652424;0.74359709928747619312;-0.26977127432800795948;-0.12141102346597919259;-0.032903463953933127784;0.37448208287080653189;-0.8557409962790553104;1.295494850445888968;1.674165650464506605];
LW2_1 = [0.27671736615594372255 0.33856226240313280762 0.099265340351580813594 0.43793397108541903817 0.4484067092226422524 -0.35076555697715322557 -0.23527374496169101148 -0.57689624475875811438 0.23577797653202872685 -0.084098210474699106043 -0.061157764934266958812 -0.16490762918342777299 -0.17865209186447991718 0.022140649227073459088 0.52609234416960970471 0.69017196960445592602 -0.52683478344675260807 0.14961316946742883593 0.43685521977355346035 -0.52214267618109955205;-0.2062084829393547869 0.23525851476194381551 0.5410039240174833175 0.37867998472522779174 -0.094527929833152446459 -0.5398282014945889884 0.18735999312351853119 0.10115306874341657706 -0.60205530982021471242 0.30220516622154031117 0.45888787496348104611 -0.41117717513076801339 0.34448704188112039271 0.76852779670667126233 0.22552517792892809445 0.16711744330894023891 0.35281951837779818026 0.078134152915434115783 0.16447325888468125599 -0.83693847808165289237;-0.70064956851805237914 -7.4512837604922698038e-06 -0.36027312001261879715 0.41823569960854933836 -1.0419643297936185267 -0.023214461246244811471 -0.20481712614397543093 -0.11345452470343346529 0.15605573766088612353 0.19688633569547506208 -0.536458677420432406 0.17276000583711670355 -0.98137914046008611901 -1.8629082181295388843 -0.07643061308233130291 0.077822356941010889519 0.33311133099640988231 0.12384860291124329124 0.051134529376842922932 0.57094540714884156607;0.25172264861628490529 -0.6807126784165382638 -0.016900623180668292861 -0.37223981523199345389 -0.089921954939223447401 -0.31500833627099483758 0.58157730752117764439 0.49898856252775303233 0.41963366758793507749 -0.39304294134650180625 -0.33028877604436462923 0.26577043792777121922 0.20888792458459654044 0.21748052629166375604 0.63735757576058871265 0.17533242727581918596 0.35898471253191477359 0.39187608104209487037 -0.67008404493012652114 -0.52080487753098381187;0.80197173505779228986 0.22911184184018132393 0.23911120931032084358 0.23066078212183491192 -0.49811121396247132198 -0.34223413907598942973 -0.39161511523308129012 -0.1453288086617126329 -0.1524612220640899074 -0.32246825503992404549 -0.20726243210776465475 0.40093427395229219723 0.29131497456526234124 -1.1927983316769743549 -0.30474132280051008381 -0.042711096904447423683 -0.1694451948918354045 0.31042387589389508484 -0.18472068765782936883 0.88768161760004438143;0.8221323149796219143 -0.40631071605160606897 1.0682591034255335405 0.34914420328462958398 -0.2292875412020974335 0.89538966202602598976 -1.6809623929780217466 0.44778275266314793157 -1.9307281546963781516 -0.24522471777661236647 0.56387522588942895485 -0.065653390913503043014 0.76070617947656571367 3.2017183643823332595 0.85145832115440189813 -0.13329678633481895078 0.5782978703230136075 -0.19059939915524065635 0.26637216461348073304 -0.12111847268046285753;1.2122122959608698789 -0.48483406104328519159 -0.094946056373593573641 0.40752115449609455089 -0.22436231998443989522 0.30521349535818864673 -0.14554279779573572884 0.16130301185138204434 -1.1668537156622225126 -0.69593843367069174732 0.73988028208372569328 -0.073614864685397948807 -0.31528485928105903779 0.49597768049036855542 0.85171825369405507189 0.34724066751936283337 -0.26416858650934588182 0.023391401416981278533 0.033953991833037898418 -0.78522328996509338506;-0.5568449370724338765 -0.42446873715165839291 0.64458103725083881752 0.26571581902473506709 -0.35250211995745117655 0.015013597866396062586 0.15940454834054190725 -0.07322819678027589485 0.16261821612802890291 -0.42571850158290097665 0.0080830570885484960553 0.22721384816817455365 0.62450623787346115634 -0.33326651068461554672 -0.069665740630096811836 0.3427564915124662881 -0.25672128039619546147 -0.34816674852380519178 -0.00036788094965488696286 0.84719555117412437273;0.2426273307390684475 0.20568702513530498499 -0.25660039155609076778 0.05176565090733625113 -0.42839105322986392732 -0.16429673381574944058 0.19923388628217666985 0.26763578234314516768 -0.70483200779122656687 0.28151604288883347316 -0.064581682353224367787 -0.098955668139395366878 -0.080946885716271940736 0.70717079353003831077 0.36979783145485417561 -0.032107275697596901476 0.1730331141775775794 0.31748375692829400307 -0.022012230967822069699 -0.52827920450906384886;0.67981694714079654585 -0.11096627785262593024 -0.78610444659650113852 0.44310683390672195303 -0.39647000045716285221 -0.0068115346855712882723 -0.12062906209134695301 -0.20501914768778461973 -0.62789407288418286335 -0.72021823174790489119 0.63894047185454050375 -0.73461300635612380994 0.077356287008268562189 -0.71672389234456768126 0.39335025284205116236 0.050616413016348109355 0.14879339564037977195 -0.34111070791413378167 -0.46245330392952144205 -0.40180168708319713433];

% Layer 3
b3 = [1.9923155602369444495;-1.6920198590193868959;-1.5254767158343600642;1.2835361477757025739;-1.1259368577255599586;1.0459183727415859444;0.6320366424690510021;-0.49761733365854154965;0.028109682231137609471;-0.027082614650199798162;0.03157864184547238412;-0.49745253969005620576;0.65659963741202187482;0.66224730201340831215;-0.8323928297544807009;-1.1823558082732981145;-1.266446321939035613;1.6626796686541092107;1.6889589810929417357;1.7598176038689854472];
LW3_2 = [-0.42023911191902851847 -0.74281771116835948465 0.70528782005273982225 -0.11488196036699641067 0.49883304118956051099 0.76179079016454975815 0.13467816297267329317 0.77682588562859944403 0.65929138245979979072 -0.78954882504191847836;0.75902253161615662602 -0.79502482675804853063 -0.73829416725850405268 0.21147682163544245793 0.72966834775009803415 0.16056111172193626713 -0.065982602276639407135 0.65993135027231974998 0.58044573974405733185 -0.66330364604304981047;0.86161196231911696408 0.23139681859288760424 1.0982064083392442111 -0.40271574950428196127 0.56969078163458164443 0.24876884095143805831 0.48646424054214693067 0.77051395374988040921 -0.42287827397982147293 -0.14712081139438679123;-0.95924986858193572736 -0.85008675466551075761 0.95750592980311410862 0.10791647193725444065 1.068559663372145474 -2.2987193265544658693 -0.65633455345118962843 1.0554027385608142353 -0.6274487107455151147 -1.7392872283170754955;0.3883480631168402808 0.77026396317337086916 0.71933575899328550118 -0.54358990891134695289 0.77533598484039001342 -0.50720217776566500767 0.038542424533425538591 0.83585861478296952232 0.49829615796087561863 0.68052349638363518469;-0.8524628800098797976 0.12304921882259893529 0.21923638885836063683 0.23857831858585412665 -0.42393377368904755498 0.33348339651057634647 1.0921688739721135963 0.66854357524393837053 -0.83714674240460595911 -0.034122640984241850437;-0.23042032868534620405 0.36355125176384661678 -0.30858453773696986611 -0.49340387583708950059 0.78657472067413103378 0.03369159554321903699 -0.031574767099373075852 -0.49746280632655731635 1.1946755255782632865 0.27788034956240981188;0.23816982880395745625 -0.14165513852516237181 0.63502256659720590637 -0.3679425141322836823 -0.057084303206470184133 -0.66833719088107446105 -0.27515598777684674436 0.78449129514840809652 0.5531076163949855129 1.1746562829056395039;0.19375965498890418415 -0.27058345696876517916 0.29394936251820674711 0.51984635861304095972 0.74084154409406444142 0.24520333471309085915 1.7121643500863863441 -0.73292484875968499924 0.84509244031790642371 0.550209932910791788;0.47098162537435783737 0.2918679613039196763 -0.91682686741407659614 -0.6744206623383950383 -0.76222325957292891285 0.60110289916266135268 0.052484006580132365472 0.83304924162866778037 -0.65717504294882189697 -0.18581324815672201067;-1.0175558979660761505 0.84638482680853022178 -1.0142526162525766775 -0.28432920234807412818 0.36495145197636619239 -0.0024791611386742367154 0.67454218463045356735 -0.063031480979120563246 0.54478136764221540833 -0.1618745513755932286;-0.27900443647808242931 -0.065342519863393205837 0.61565623276561454169 -0.13302437029640357125 -0.18652678029063704535 -0.6014264278282360765 1.0626990914223988227 -0.12339063316974789586 -1.2782205832216000374 0.057448629688765760759;0.28047236392220786794 -0.32087275201888837417 -0.76158167883867211589 0.15303658677769518826 0.49812016602058317716 -0.9591898076979371579 0.67492230708733025324 0.3974333295821130263 -0.49352285752239100081 0.70198539403614368393;0.78273058143968954337 -0.6367505339102264017 0.99439959604244232416 0.1850523404723188603 0.11250797132551695889 -1.2172174997261890894 -0.6761286169418480041 -0.75945427683713562228 -0.94986717520866170705 -0.54211693719033737793;-0.58860263273197976908 1.2652976129306956476 -0.95204942318116858591 -0.35450011688598748183 -0.6128850404268910701 0.43235392846650111398 -0.26989488025749031053 -0.89095864895255483251 -0.33996104822346767671 -0.25848020553257006204;-0.40265304579189958867 0.58278068521970105564 0.55232407103057445941 0.28964622781875898339 -0.90592314724820233174 -0.46213291723778138209 0.71119392709965278954 0.16889917099577034243 -1.0627520964560104311 0.34124786173016796731;-0.24760123501192957129 0.80619661690883659411 -0.98396393297848994131 0.72437965756137823181 -0.2774178094523375715 -0.046958775044956366229 0.53144663719214735309 -0.74410967566062491407 -0.077566898234940256929 0.15065299977653820451;0.56875334557723067341 0.88459251821967610496 0.20963089778986862544 0.41135105479871825196 -1.0891638408484354272 0.071632642693595746652 0.47483826508770343722 0.5837982407172781496 -0.35411804247155698189 -0.46112964162073682983;0.40739366634375467902 -0.65427075522769095883 -0.37103099522211385741 -0.86028728226085104946 0.04316948609124097308 -0.014097271226022450516 -0.63331996908743526387 0.81909535967677882251 0.53833968793053832425 -0.38733869041724544591;0.94588546929612493663 -0.32030047215535284444 -0.50596916421583937318 0.48864325495961496992 -0.61098388097883227221 1.6714709667917704294 0.79310210650548718103 0.31947392299213317468 -0.68915507116369101315 -0.017141147746309107203];

% Layer 4
b4 = 0.19162760347376686654;
LW4_3 = [-0.49278637843733941182 -0.49603254933865270626 -0.96111350111975724086 -1.6782395140083508078 0.45763834835835448533 -0.44041736138328552164 0.46575898339481547339 -0.7751203038155595193 -0.7325996295321919316 0.26401796543219713254 0.66250336975297940967 0.2334039628327057303 -0.45147545370945274534 0.88600753644393459574 -1.2122918370623243511 0.39098466949326859954 0.34580818112327393887 -0.66917150189795537862 0.087183033870074200244 0.42705835153561766404];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999991;
y1_step1.xoffset = -2.00000000000004;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
