function [Y,Xf,Af] = nnmove_56(X,~,~)
%NNMOVE_56 neural network simulation function.
%
% Auto-generated by MATLAB, 09-Jul-2024 21:23:57.
% 
% [Y] = nnmove_56(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-9.8820989364874;-4.17631009264064;-1.99999468395731];
x1_step1.gain = [0.10151410520026;0.23976556688107;0.50000722551666];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.8834895680608427782;-3.5496830158999848059;-3.5516540870838086974;2.4438040905224478472;1.8877191756132942757;2.5520776785901486683;1.4970592367990489535;-0.16031854237192330603;1.5762611580033116798;0.28405197621041056166;0.74501901382664381668;-0.35733125149068600823;0.56765736674399602801;-0.95850121050624392804;2.1215547033559327694;-2.4049727362299879729;-2.850219742911367149;-2.9049438453052482956;3.4486331774606555634;3.8389474719689058446];
IW1_1 = [-2.799660704275215295 1.4510846247723367952 -2.1669177738260447796;2.1206750597655452673 -2.9856863180870836239 0.89414882708618259599;1.0543772041138874673 -3.016506121009606467 1.5106354832258110932;-0.71067217519982839313 -3.8576757300737871681 0.44144995400894060378;-3.6757022397349681242 -1.964410971905312886 1.7159545978057264559;-2.422245021595697434 2.0196637746084675769 1.3378238041758496735;-2.226925053661093834 -2.0209618196162315584 -2.4805165729865952251;-4.2401647695268875893 -1.8097138879684762092 0.19166649198915830521;-1.9104317166082276369 -0.054100993265889657513 3.4612395673320062173;2.7509541146429890013 -3.2363513964183825422 -0.37209027332557587098;-2.7829730365490679134 1.7927605384892197904 1.468656288285111966;-2.4977471391417580548 -1.1291470862671573183 1.991293687907126575;3.2380182283384115749 -2.2120677724619790538 -0.58038974008145260974;-1.9798876367602347148 2.5112544081768737314 2.0510333779587903713;3.6065922801134648878 -1.3424415610070927762 0.59276087177146230545;-1.1960137458381325803 -1.655345014133264181 3.0379413584472443333;-0.88267330664303300658 -1.3279087468718184795 3.2509237795540326665;-1.9301288204637323531 -1.275373696991420891 3.1465134304946320576;1.2988918249488392576 -3.3586790111133262293 -0.99830991324190554437;3.7756796798469589582 -2.1606705130395842396 1.3575123475358683578];

% Layer 2
b2 = [-1.6955949845875126769;-1.6302567544313890657;-0.89022671076467940754;-0.51490387267115111936;0.38340426090323259656;0.075781715952345382603;0.067130292609859310016;-1.2656867268087108602;1.2557396527049582424;-1.6098418271356049747];
LW2_1 = [0.15319789538924669103 0.65813557462517413565 0.22807998665786002879 0.31934657415457684548 -0.20843536073659651997 -0.61276763607269912892 -0.61871904562917112713 -0.1104630999506122091 -0.19206406233026235286 -0.098558070228725341844 0.53104599336514268781 0.1897842966358818384 0.46749974719932441136 0.326079970000996755 -0.60845465645434027024 0.14902256596985202775 -0.1208717695758917271 -0.1365247210993809357 -0.4136142781210956354 0.15987296017703181428;0.31151132748425164332 -0.20692398276211593222 0.25958018071137378691 0.27535875556296374178 0.73414680027756862302 -0.35562303141531576012 -0.25447762653059685656 -0.039631166116198456029 0.68945307826895307901 0.4783906001301890254 -0.63991493281478295518 0.12467390065313083136 -0.53973903632890529725 -0.29377192410781560739 0.34383011509960736962 -0.66456605017689796 -0.11441643275230910237 -0.3488249072798619288 -0.014206541688448018693 0.10361255277236076922;1.102379009361826423 -0.75581529063180685757 0.062421819327404176603 -0.15890288824792092592 -0.63405065269426330588 0.72430469977221889621 0.0062892913567961679366 0.95798935180593824956 0.028237558558581534601 0.41559895918800882075 0.13953309100094243855 0.24647330953529997255 0.077901123880244102504 0.56887941305884615062 -0.26576117565934453957 0.81850331429725609045 0.59245398684829031488 0.48370684850216688622 -0.46183637786112913259 0.29231370719077059972;0.17804693915425587325 -0.2121898066206557576 -0.072445242046575791806 0.44264036173634091487 0.6855951684839547422 -0.0078298982017122181754 -0.054668982805446797446 0.020490956627712119537 1.2297577808258306487 0.25223701360847322617 -0.56040315745802948832 0.13631359933884024116 0.89341774654181427273 0.12893281594271482904 0.43126999229714035877 -0.29607293550124463843 -0.02831308203240220922 0.53496929606966914239 -0.14083747202829016709 0.50702792569073729112;0.91965186133455079087 -0.046223778639263052304 0.3591573495298070462 -0.41841083892372926689 0.41290965537518892203 0.50789446363606749468 0.991177939895799609 2.0417684666376696434 -1.1940123149867496455 0.67568887302985269905 1.6666607066196719167 -0.11020036307784147889 -0.40637948436220877602 0.81042887297166588123 1.0652926534036464279 -0.2578458807948992848 -0.4257586065946245002 0.31978068383947244602 0.28771077342137224564 -0.4296454621504200988;0.11073610210003523302 -0.42197257116142905531 -0.68130129444089826407 -0.3430564140120467842 2.7093838272009751478 -0.39600200141963370903 0.20251274931440266247 2.3256037021535735931 0.071790136643303525954 0.31211902387025330929 -0.18432984509575905951 0.72054671957550320283 -0.060057995725670651477 -0.069016374777988123701 -1.502928158530523417 0.19778309159527782124 0.23521114506314644288 -0.18257386230509614622 0.52802346901458374617 -2.5387750673190971895;-0.61812884241517462858 0.28290835601245906128 0.40049351303947045011 -0.55686041834580513044 -1.6393648152184432387 0.39221097811571509206 -0.54220245966510827174 -1.2829893697261489649 -0.03233270130968261824 -0.30332241757264599702 -0.04551005309118764941 -0.17073240045357365724 -0.14650957159964980714 -0.60759600474998154418 -0.26476130631396926907 -0.035497937220758696286 0.52482786320433216787 0.42242742292429352746 0.2874328709052497155 1.0381545899011435097;0.26262019901284794354 -0.078229930339823144925 0.7984376656482532475 -0.24201464752765569632 -0.71966001714498240016 0.2966194581206006986 0.91248926590348655719 1.5516642649085718997 -0.017660769739800415146 0.66533282272910709843 0.39088508149456130392 0.30004700247959631421 -0.10123004105932666141 -0.15485918705441276133 0.13975561947401832219 0.59205850795069792092 0.37601084041058258078 0.71283570830233999871 -0.58974427431742182382 -0.38331244917345419498;0.061972943069619236545 -0.15436417889719949992 0.23426742732158609139 0.26699682874696528678 -0.21489404590826421959 0.4093945763673276228 -0.14044774139425114656 -0.73570145617114934833 -0.27166864475400387402 -0.32427136691206959185 -0.41180769200792194384 -0.50753910427736859123 -0.42805957444833397929 -0.45286810448690661968 -0.018709096183176669725 0.021689492188542554285 0.65627783913359760692 -0.17949951266300856467 -0.6819580953534939427 -0.29167380818266519515;-0.25139600887345053826 -0.11251674751241051708 -0.21214477326833716675 -0.48509583612212231474 -0.22794833807605519027 -0.45057735830134965083 -0.31252793808472700832 -0.5403165444661087724 0.45308880555199587681 -0.44634869756859274492 -0.27450966496603995681 0.30514174911222979869 -0.34436869821161142369 -0.12563492840225520819 0.72251631290300821764 -0.23594778308472655337 0.3198558726454500678 0.35845264947502897268 -0.32552428869099619968 0.062386934027193169383];

% Layer 3
b3 = [2.0194354310433495492;1.6332176144368182324;-1.3740811344167460639;1.2890825282526718887;-1.1716844291981782789;0.88796322929470183904;0.14223241280357648564;0.50906603309576192729;-0.36368288443855734116;-0.080165206859696039321;0.36714744327663334511;-0.10921890590797078691;-0.56770481437974895655;-0.6513289743515728869;-1.1961323184637859818;1.203716721397844136;1.6835937605645086013;-1.625432883760722147;-1.5585219852480505232;1.9525835269031510677];
LW3_2 = [-0.88419914340839778077 0.56537784215885189543 0.71550873103359635685 -0.1531978155590187074 -0.40136413188326203194 0.40394432108275363236 0.54888897901684952085 0.90917590795195191156 0.2267582557459759951 -0.090603700575788301275;-0.32830427213821727905 -1.1730184162739092368 0.94702146234503747912 -0.94067193004836957559 0.59576916262274548508 0.49804297840807809639 0.44323151984570774431 0.09892810191420978172 0.015688358235465115625 -0.15334684945525978161;0.16818557977154832694 -0.36258468293052797948 -1.0167144018302494146 1.0136844485966647333 -0.41489181292712823401 -1.182182885445520526 0.50000489726752361808 -1.1206801675563848875 0.39024385569783182071 -0.62322175312734817698;-0.79366877320836604071 -0.030935877635422614346 0.061323269367398160201 1.1055360756403944666 -0.49590102360561050254 -0.6207257048056777915 0.012974894084230775837 -0.90864738357706353877 -0.45281916857372495056 -0.098406921459231036509;0.73880915349526121716 -0.019224728036547310273 0.92112312730129031202 -0.47775345729027263175 -0.42197041467655227454 0.73637219228539863014 0.5307568709506291782 -0.50987773482298670569 0.57051163914603164606 0.44474360708023613631;-1.0104763308650079878 0.31729617212684280148 -0.5334845173141548047 0.0067900148100992901989 -0.40767062461366837534 0.032223632324048963327 0.13199180436195429023 0.68620851310233466069 -0.35491385600267916223 -1.1703075187340288288;0.50728976429000804949 0.20112103074648055023 0.90949122467939869097 -1.6099729054256737282 1.2644174211600913704 -2.6603838160835993065 1.2189516159711506482 0.35478663342191318897 -0.55418425756569611451 0.37108245953000640327;-0.85691623117036630486 0.19077453628867843682 -0.60219306696500407572 0.70052443313365442279 0.29697812948596968852 0.37883865678005224087 -0.60788678546450514162 -0.90584213560931503562 0.3512211180488254425 0.60550399821114220256;0.73649654955317234162 0.90451816297235310138 0.55493614249283240714 0.77118601919200890915 -0.87616674802096117247 0.21645426589658198213 -0.5749951351482245343 -0.44915753346027958992 0.13282680726386977832 0.45658575017992364398;0.7926592912194490026 -0.76436054198718328401 0.63848316292422269136 0.83471705849540978051 -0.51703690204829721999 0.52756283235865586434 -0.1597764017509847867 -0.4134992809763129995 -0.6473399508161129523 -0.24266924538449183291;0.34965876904302573003 0.71799488655781029678 0.69985266410791324709 1.0387241417601182913 -0.59750635970986476497 0.57457252409886161448 -0.1064830332471926877 -0.80990255337485261844 -0.69569040894559408539 -1.1442077013351368286;-1.0908394906420153525 0.051469482288831309991 -0.45489153406461368956 0.19443749488142131332 -1.296612199344420624 0.30332867787576761609 0.23605655693074104051 0.41606843036260809932 -0.30501877004240396385 -0.42086755027188144096;-0.9430016034203638764 -0.54352131231137978951 0.33713942959830872637 0.69668931173327519613 0.53838384895373336825 -0.47268703711797255274 -0.56938982860698361677 -0.24833053560969520213 -0.72019676915401198425 0.44366312568719440401;-0.49378547861192578772 -0.82357281027905615556 0.68937258755471542138 -0.7440033769942111519 0.49526439313115327989 -0.25663632326120966454 -0.80207710790993269612 -0.058034243137740637586 0.43272221614665362655 0.27635610162945778434;0.080204896754099835876 1.2204259123973781875 0.27078678381277221376 -0.42292996685923972544 0.5376983105058820156 0.070145042162597551205 -0.77902528062263154407 0.28991476183425374247 0.32306215804023835636 1.0105325096653752226;0.092598680307315148208 -0.71194795022534806961 -1.3818643468933522467 -0.86832596134738371241 -2.1533682155448783391 -0.90191238632584991297 1.2127440435552241382 -1.3554058481226283206 0.51846941582029093532 0.60183430918745273175;-0.18549397927505797967 -0.92025101165607403608 -0.88364672428940027604 -0.27933141115844345448 -0.68331412774181676806 -1.2623433888290238603 -0.19160615461213587052 0.45010287253063263613 0.21503026627660096204 0.24271741118558748385;-0.65203186830723425249 0.80343285895218230497 0.76202719977135202623 -0.034359989996683472369 0.41090477510044309817 0.0061024707834800660106 0.82583620240825506009 0.89861802395791579023 0.71235728236640794009 0.056580770791875741044;-1.066470940528505551 0.74872386413644065328 0.090686610157265895582 0.63644681512888168218 -0.46596482899951330303 0.83594470382237495709 -0.7551839522791137238 -0.067111586491890473649 0.21632483236663957449 -0.22213154173840152228;0.062731737845758084315 0.62955902881257441717 0.10743338298101390293 -0.2649741765430845275 -1.2583348357064083611 0.021821541816497990601 0.62971363061167928699 -0.51785803910899463887 1.0330624130062893151 0.95953550300637069359];

% Layer 4
b4 = -0.46146880745042156979;
LW4_3 = [0.93865589099877710932 -0.10418686377253108533 0.18899574068478885991 -0.34633880008786044336 -0.29982775605186173795 0.037401718400441034962 1.1155067276343542115 -0.30417975292645660357 -0.19544318253013345799 0.053022644808620567058 1.087436218931817411 -0.4249849524148608948 0.019845196510260395412 -0.18794321654886358974 0.63601688631264741147 1.3003725715980263278 0.41201957875420019972 -0.51425990727408255054 0.21332994593716875231 -0.6946384851460278842];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999991;
y1_step1.xoffset = -2.00000000000004;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
