function [Y,Xf,Af] = nnmove_57(X,~,~)
%NNMOVE_57 neural network simulation function.
%
% Auto-generated by MATLAB, 09-Jul-2024 21:23:58.
% 
% [Y] = nnmove_57(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-9.8820989364874;-4.17631009264064;-1.99999468395731];
x1_step1.gain = [0.10151410520026;0.23976556688107;0.50000722551666];
x1_step1.ymin = -1;

% Layer 1
b1 = [-4.0330368617506442419;3.1326982053504721648;3.1875915471308116089;-2.8331338344001526508;2.6019482383051215635;1.5901389288130389765;1.4309016365454827469;-1.5817072572581944989;-0.67408996298934287239;-0.7705629890325892406;-0.85949559690965549041;0.1060188620772738316;0.92880124374488226557;1.3264557872524300741;-1.7952170062626615632;2.809458090840654787;-2.7467743578616419242;2.799459262352955502;-3.4845483785195274784;3.9060890822082106055];
IW1_1 = [2.510146445312194885 1.5909093288958529033 -1.9346553901452614443;-1.0227085356801086657 2.6103739624323458735 2.6365431707862767574;-2.4041416277845737426 2.9451538827484111671 -0.32160545614010743742;0.7700355908300050567 2.4229912687073777988 2.6657358034001190639;-3.4003135251498437519 1.7124787750663414965 -0.71723286982695366731;-1.0275923307879077928 -3.0014281819583712441 2.4660288392502418553;-1.816936248680332433 1.2588907655555579002 2.7991597593573396274;0.84637325574541011353 -0.35530315128148021175 -3.5380046284749346874;1.1392359693425206935 1.9001700929877618496 -2.8017191920568773611;2.1759283824600634816 1.970661855489634906 2.4380363092695436222;0.2224562101233420186 2.9399826536423740997 2.1948975084160746718;-3.8777841670358816906 -2.1923835321416675903 0.29059732882287242495;0.40490931392283879831 -3.242514884077487558 2.0088177606260355645;2.9837222045939952864 -2.1613566940098767333 1.7846441928010585709;-2.3165742693307027622 2.3665155722105826186 -1.934812224345702214;4.0596639630697870516 0.1272483230767202933 1.7130300943024037164;-2.5788026600782294473 -2.5599238181803825043 1.406684444590649008;0.86968116617256563394 0.20706900227496444211 3.7567711711233733318;-0.94363920712054139006 -0.68089906567053615216 -3.4820883307223664538;0.57382809638678045072 2.2229118495680695311 2.9203429685192410226];

% Layer 2
b2 = [-1.5220881748872108208;1.5309257943583620687;-0.92768303388792172637;0.23319807931060229644;0.16798817446410196919;-0.57036086906922056627;-0.79614329423236274152;0.97185002587862079348;1.1870927403861533111;1.4551303827081585318];
LW2_1 = [0.53622360229890586591 -0.31261483263513978326 -0.09890232644864432876 -0.22795308407240660875 -0.46685654754697464286 0.091679534121042488559 -0.60996379862638705482 -0.13297782930521023781 -0.32398533333548490409 -0.38554062599720917426 -0.13487892785169633414 1.0130499101532102202 0.10516451730109434293 0.55737406777641118616 -0.16407803587554389835 -0.25115187096289298685 -0.010653549123514721025 0.067933922802385360296 0.19875244431278060731 -0.17795378720022630992;-0.69864257318816824771 0.024822454566209836702 -0.34237625653252118374 -0.39087290274467095808 -0.23851391588897105644 0.16664429085183340984 0.71683718277011387876 -0.80332514617450911931 0.19935548601030575466 -1.0786166577001106148 -0.2452303390870889388 0.79180169563028124369 0.51526523450898364942 0.22314610129665482519 -0.44098774055102130109 -1.3884956520250983925 0.45922750422927322012 0.53104828916201884947 0.1256058199892222671 0.18481220551633487093;0.24861268876520503657 -0.045124617064604889694 0.32848186762450920506 0.53489217661250831881 -0.16544147127975489253 0.088172622480143805768 -0.41246194589799756169 -0.46456880812155076921 0.38784824654504423957 0.13600905700708498802 -0.068386245548355428792 -1.4468693881851684147 -0.49950684991036414795 0.1034462066524357432 0.60099622240055183831 0.55012472785278399012 -0.16102584084788967855 -0.48977278359054032819 0.48326883122370517532 -0.45735464376004764109;0.39497516124781562041 0.064219465987926729889 -1.0269895887712907623 0.56805930660756520645 -1.5301665651978679783 0.77721433297460618128 0.37676679041683314164 -0.3603093165384838592 0.26950749424691883283 -0.13643017652064937106 0.46279760414403714464 -0.70079897584393657795 -0.061824536755285479372 -0.38647229210136802013 0.29372350759470311488 0.35505249387071879941 -1.4851595907334542712 0.3444641605888230651 -0.049593881233095521432 -0.89737045207267396307;-0.58485710657322986794 -0.28024531403775865268 0.89563148636408917991 0.14716296430555533825 0.37339702252856604714 -0.64034848385140230587 0.1673361849509574506 -0.011155251340550200595 -0.40520120039513057852 0.12045391526306249708 0.14178958377080758124 2.0716724995401043508 -0.085466145967495826818 0.25050077595232950189 0.054650163782050578676 -1.5768511760926693377 0.12706166027192208889 -0.40519592013624533555 -0.65405272455211738158 -0.22525795904914852619;-0.30273082861120376164 -0.60405004625187352918 -0.49757579872751350747 0.61035830535491786275 0.21159139142130944933 0.0076366049791529149599 -0.72568461692916885752 0.06618376451476595812 -0.43165081466287441581 -0.51631069842031418471 0.51542004760831172661 0.30682900869633117358 0.01485100962234746011 0.42792973196051314888 0.11614223027336323391 -0.089178384604504029598 0.10676033307300500375 -0.054691412454029260382 0.40032736360218296179 0.067455269165305281609;0.59173215647160004593 0.12389898842731984774 -0.41585794561434596961 0.37815538177768159844 0.03866736464412658808 -0.40646291770253212272 -0.70818379931055341903 0.38913680752838214483 0.3774939310375812207 0.038373003089719109893 -0.73242818881066606984 -0.073887959347676862576 0.18775850457004927829 -0.71584195128804828379 0.1306026496737046072 1.9467156357023469582 0.72672682162439183884 -0.096224415313563557706 -0.40836964611401627145 0.11255258145910183865;-0.19510499625282740066 0.098361949303895662711 0.92957860409413828329 0.72112667139514807779 1.3212640848454648701 -0.48442438670217835561 -0.42375881307994900382 0.19786464155270422349 -0.33269311479551944011 -0.29457757094549613663 -0.43537324400433169425 -0.13108101301705610275 0.20882295991234003929 -0.31201629834643490602 -0.18262854529528843583 -0.27816766872434556257 0.70862898736769197594 -0.36791331867830961988 0.02299568707367728726 -0.018678090033588543029;0.017797157572578534146 -0.018089883857924152905 -0.29462771668182546891 -0.50426178822819511804 -0.17316980230075570968 -0.35332772440916609957 -0.29915725475675269962 -0.4783454234821911677 0.76148843867528870355 0.23460365708757305314 -0.1508457576249647436 -0.43500904339956586453 0.53799962080538554776 0.31522435476099264218 -0.26888311563923789071 1.2234622046253325056 0.24249380389980251804 -0.028386539129264407033 -0.4431305217741116631 -0.48993751005430008494;0.21162304281795876748 -0.68407831724978318544 0.63781297487214938524 -0.077820318947895053552 0.13283964421274155332 0.07011061873278710832 0.46468059551265711304 0.40409972581813385917 -0.3064424786990181393 -0.95831700251029239279 -0.3522178861385477644 -0.25747735893246714856 0.063033005587192242336 0.6206784654293070469 -0.32941825620436882005 -0.4071519527753988954 1.2152944787751751576 -0.022298536305153712073 0.42923438806203689788 -0.17592328453232436436];

% Layer 3
b3 = [-1.8335755361084287163;1.5699998009825979484;1.6252303515585049265;-1.2591363859416495607;1.2839208168094389251;1.0494941600574123619;0.73919890009472977166;-0.49405985738735763713;-0.13046428136396420738;-0.017838173279833981211;0.052868838145599270084;0.34055784985894232975;0.49081820584553592646;-0.88386941488738590689;1.0381781584716822664;-1.2781354837440181971;-1.4403309978249916323;1.4234320279275227694;-1.990454620552166265;-1.8734548209397670071];
LW3_2 = [0.96306573249935734093 0.86363467774173696689 0.58595392033710813617 0.66888444873393038126 0.38615764618589515367 -0.66500289462332695667 0.19328621648451277393 -0.31838799535177664257 0.47583717230732403003 -0.65601083849414598692;-0.33062524004694737734 -0.30363065629664398593 -0.9486705796015211245 1.12114924420615103 -0.66695868852245265845 0.2026709375590052542 -0.39896149302986011476 1.4531129792630781417 -0.34654236865398385659 -1.221221581139422474;-0.43443455247659251706 0.019169982100724427404 -0.24330746909698328095 -0.78080213557715694161 0.55329845027763924215 -1.1801193321928691304 0.28871670779524855055 -0.3407009674814420741 -0.6098577300437644233 0.51269067934894851923;0.37099676072434062402 -0.68155974230066751485 0.5485501114664915745 0.27131877966080608644 0.46746803681302928624 0.83931330240666268683 -0.96740404165030002837 0.85519118525467241465 -0.3769891643548218263 0.086740344519841930393;-0.31266092089605823645 -0.01117571441001164248 0.42368006846898770279 -0.25518878381317217086 0.56887325819728018494 -0.25737592292070099464 0.81416198790178107014 0.81181805805540740995 -0.55187305451857415761 0.18485450905727535131;-0.69247224675383711734 0.85327632820301246852 0.12256346251889405075 -0.20648175015181807757 -0.59964998617882003806 0.21941737262866214953 0.6103982769202678238 -0.44760051861479571711 -0.56859182630952609383 0.96825343312300093945;-0.76990254363103660662 1.1714780386814716007 -0.58305444573247844353 -0.040023295717724595433 0.45409543338849756022 0.21641685888322703679 -0.36106920667820574522 0.54385749877113309658 -0.26255492765229265784 0.73793965891167445648;0.30153362694228902363 -0.5937481435371069205 -0.23816772846361186633 1.0565579419900914537 0.36916095897127043646 -0.055086566280975572674 -0.65743842671794072707 -0.47543751605252621006 -0.53996369304763547348 0.27157467376151117611;0.39614002359064393044 0.96578816736867068027 0.30744014667443542166 1.0638677059314647355 -0.85837563760368951193 0.43110652598812854164 -0.049922677449109886805 -0.92077275762980437257 0.41989969277247418677 0.53211263316979973137;-0.071799257313512859779 -0.40800667102652238283 -0.72292175137063430235 1.0096390972493589633 -0.69155158606349587114 0.72912354101410437046 -0.96873744450501486636 0.18505092940088907483 -0.067558322342247137393 0.0026486127152279530933;0.013682950677389600289 0.86746516220033997868 -0.38118205668528082342 -0.66047373321175428806 1.0918581736849206631 -0.030872294217790918758 -0.53982774268197908363 0.42438330993271744518 -0.64251298636963782851 0.057285245852186632287;-0.22324914578148230548 -1.4123326736074084398 0.38981450583769111651 -0.2560821729597156371 -1.0789246697768326566 0.72416590199435137976 1.6172995633405358173 0.97425066858802256142 0.92226396850492042834 -0.68506629452381750944;0.3803380517971789998 1.023468830401268459 0.93112945120908363617 -0.019580937009811040517 -0.19616636005130144715 -0.65498226325079833554 0.85082158348054492958 0.47332543469948240578 -0.10529897109425984114 0.89513802872982661807;-0.80011049414282120473 -0.69178804502977753188 0.68839936389133737915 0.14623288780815851817 -0.82923937034509975774 -0.84427379835257732044 0.0039004488670019519386 -0.60468016855502859652 0.60356045810433200938 -0.80177153867159089984;0.64391892856100907405 0.68684044633023499937 0.56982938888802447952 0.76692711790428924612 0.62074237565018208773 -0.90244321832379159609 -0.18376235406621177493 -0.042652754798711611794 -0.70667389931300816919 -0.49049929273275205688;-0.66496952875005832517 0.29388261041772734128 0.84925610448684607512 0.17678410823032636445 0.097026143426870339881 0.58741760688369071275 0.72556652801514220918 0.81798409148101902666 -0.57391201480468112539 -0.56733148492363727478;-0.46917009563822426044 0.46826560345701673249 -0.33145276922746980119 -0.31239532824192450811 0.21392148210884645576 -0.76780236018542835641 1.0313856452084235737 -0.84649240935977299038 -0.075957612358660733798 -0.65022920318773103077;-0.16552272064626805115 0.084434906005569562715 0.81308139934362400059 0.82997720232498961579 0.58777545452691415395 0.82465381508910862163 -0.80663492083841292768 0.62866259577189897989 -0.21751429740773706167 -1.1850896873762764017;0.14754741093670836749 0.28863710668070780008 0.19593667925636121252 0.27302766532782341002 0.26108275129165159356 -0.54790136153090274185 -0.77353128225359701897 -0.73999372527046591852 -0.63027109333807085356 0.65975596424613358604;-0.90788040490678800776 -0.11248301229778111254 -0.34516560700958370811 0.17476379797637492386 0.52828843253101742672 -0.89599516875768958624 0.37552730601870959459 -0.80350954569636523495 -0.93670710596155370986 -0.1229189385446631394];

% Layer 4
b4 = 0.33572938414682057529;
LW4_3 = [0.60190482572823766905 1.4056279847938646377 -0.025370112778296032008 -0.19061217911730435337 -0.46857954995129058595 0.3596949558476896236 -0.29863509562622747584 0.18760352842674093976 0.36480584195498599875 0.2993045227466964997 0.58324210432776402158 0.83829557348413596962 -0.11864567562339747853 0.28021605984569974979 -0.16189379302326184495 0.56013750597996248004 -0.33129862345338162433 -0.30609503251123781897 -0.25543889394930141545 0.01799498302133122063];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999991;
y1_step1.xoffset = -2.00000000000004;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
