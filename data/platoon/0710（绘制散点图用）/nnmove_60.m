function [Y,Xf,Af] = nnmove_60(X,~,~)
%NNMOVE_60 neural network simulation function.
%
% Auto-generated by MATLAB, 09-Jul-2024 21:24:03.
% 
% [Y] = nnmove_60(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-9.8820989364874;-4.17631009264064;-1.99999468395731];
x1_step1.gain = [0.10151410520026;0.23976556688107;0.50000722551666];
x1_step1.ymin = -1;

% Layer 1
b1 = [-3.7948089267770419575;3.3919092684981984043;-3.6198835873951247244;-2.2750118236880267908;-2.410507604008500504;1.8865636131283676225;-1.2048538475903836087;0.97151383038980054785;0.9048486808789839575;-0.96402526170271096717;-0.11064832974996387238;-0.27304790701992293078;0.30881744596921645307;1.7134415632779513849;-1.693032510974541216;2.1135785138749159096;-2.727684920865100171;2.9269814717455497899;-3.3931789511360319622;3.9722469018975039567];
IW1_1 = [1.3751911366949565174 3.4841326510366852354 -0.90551061226603435372;-2.6620156944983643932 0.96467963254105626447 2.5333524806123621786;1.7790347828532384611 -1.6929283231915606134 2.0481337713190495009;2.4536721927253850595 2.3387111456393734343 -2.2089532075465805327;1.710657048600893626 -1.8391866405793586559 -2.5993951755971678175;-2.5565616144291256617 2.8232899733845080448 -0.36762425467159043357;1.7331743352907564848 -2.1753923374026462589 -2.9019325520461105583;-0.35641186041075734181 -1.6706921501823157605 3.1015831136307649984;-0.061481837513466419676 -0.82076495699223384062 3.7672889213931348706;0.21521350403523029082 3.9694392470013246665 0.80038875538444365088;5.1775418555153356337 1.3849688215710131978 -0.59472840604892673877;-0.40766572859275024276 0.89646633007088361023 -3.6037745342426243944;1.3875501577628668315 1.7632193586599791413 2.9254678401068074933;1.4846301422391610103 0.67023867227846256611 3.2797267448447402494;-1.3344907792555369408 3.1208454784695374151 -1.4823010099155955466;-0.058995559606338628111 -0.73493650338655391874 -3.8361398473333774284;-3.6412149597954410751 -0.24173707791857126925 -1.8488026886662010106;2.8682142443334415205 -0.27815270301313105294 2.4532100123550613091;-2.355085655217668883 1.7631597455128322771 2.2375726748556967749;3.367234135028150277 0.85242927382823641125 0.63669219940939869584];

% Layer 2
b2 = [-1.4576555206859378444;-1.3918696365802074588;-0.89291316741931781031;0.63002865378747507918;-0.036399085042314052729;-0.26632502764140131291;0.58138543072623416474;0.47543578286096532803;-1.3808234699138333124;1.3662189373483004662];
LW2_1 = [0.075199483094644026249 0.57900278023530371563 -0.37668963295955909532 0.30198241918747531498 -0.1258686597758957304 -0.27369676847752677507 -0.66886258533735243326 -0.50775965664375466435 0.13395980104074947659 0.61690400798457256659 -0.67380050881830833021 -0.55416469419415803621 0.10009575662100916871 0.44579771299466491863 -0.12781545265647889509 0.27481729827476281125 -0.57811852766507132451 0.087106432157587190823 -0.029495758881113220973 -0.10095354293679423274;0.66340643810002286607 -0.21707709391600529814 0.081854762407193526474 -0.17428841276513531988 -0.20910118311943001745 0.61096974971118145348 -0.66812757080544882271 0.37687473342870431159 -0.12039124588305152863 -0.34530966920045025326 -1.5493697955502545582 -0.5453160689601436184 0.073963973728906701188 -0.5066287989917875878 0.66163465204873128656 0.4716266701775548853 1.5480972626022331262 -0.62345084260921412866 -0.47048955078890591919 -0.23567450447931689861;0.24343135785966629747 -0.47624248468863805694 0.0098387030220056376217 0.085821390551866785779 -0.52551535884323452574 0.38570626590745688 0.35312412700539042021 -0.12244211955546401016 -0.2184666130765994807 0.2884979093657670246 0.26263013946126001485 0.21835855306348667115 0.21531703412004926657 0.35794640538338368119 0.50407317481393698611 -0.20449271959781886721 -0.79383955964738894817 -0.06383667941671833379 0.72460472806281728264 0.54519178700626946821;-0.31327746711528420276 0.23451079312746264671 -0.32836666726952812301 -0.024765844082805785198 -0.20973882245636527033 0.49753731668925171849 0.18602786908884502703 0.37813741324438165936 -0.36493860814183654018 0.56705182526588138181 -0.51027369296286617661 -0.5021555772542916074 -0.25721550925694175449 -0.74659221739284686858 0.29785049548314407319 0.17536630068895794898 -0.43811951875449761662 0.071161121977595137578 0.044533732850710675 0.6305365462519437747;0.59670688219516798689 -0.27820436314209379125 -0.96496701382515848167 0.17218478751663221504 0.13702451015650532473 0.38427538241867703617 -0.58849124782730977135 0.14727704680756428801 0.38519239880433686629 -0.7745328135328957142 -2.6816419052975364323 0.31543339299469241865 -0.56857296824093761511 0.53466143507604291241 -0.41138804956510149902 0.086895923197973234942 0.68606166411017044382 0.16341865744866881927 -0.43158233687979485893 -0.30409068707377134855;-0.53715121636299756336 -0.52053464593264098248 0.86560737655650732414 -0.25376394119256834303 -0.29813227355062466017 -0.4952752711005197761 -0.2886534020394515565 0.49680429937086467707 -0.011295046010933730909 -0.79242886341207174894 -0.39553523889640690436 -0.37452581643891325047 -0.43329535504508498445 0.26663605107641036307 0.10932265004444818857 0.058638334258962199197 0.35804246767022190889 -0.33365318408202737643 0.025216877632693236733 0.02609893040949544038;0.34062084819923027501 -0.27873366154394174643 0.65178528841334892885 -0.93721077476710590304 -0.17438214698679366244 0.25860611151183915402 0.3375922544797415048 -0.092354233948934549847 0.48549171743297392378 0.57612349537872220573 1.3952276429521781598 -0.28149726611542358334 -0.55512005693170007881 0.117882036435307605 0.1260694248543313134 0.31522115961649271876 -0.11217777348657398395 0.69969798327351429013 0.16728300973801948914 -0.20937736790779229445;0.72140317998759995177 0.25294346063221428977 0.024522780258087992916 -0.59653918181622156425 0.37164416783931691901 0.4868639858072933424 -0.62082282582144399097 0.20626006487281539625 0.089485787158422022691 -0.023971920866737814193 0.7691361187839894642 0.082076542098554902682 0.15886772913656110884 0.52333756281583387882 -0.1411063924555055471 -0.2494575875483898697 -0.36620409499935979714 -0.27100714317668400666 0.17093447841017814226 -0.45938419536965147127;-0.079205383921692545934 0.47867251185553771897 0.23403296142250770706 0.3127257231536060833 0.1543355267556906496 0.47052228634613585401 -0.28991150931653142386 -0.43350037841999072841 0.14851958153662886408 -0.28700897876942382814 0.28688411230575855404 0.13105016884866863003 -0.37793605837685978477 -0.40169442146163092389 -0.65489695432278460796 0.30188022239102346722 0.27849922496632767421 -0.060866569637739911802 0.75335068474082678147 -0.5435567845475755;0.59733590249172308084 0.19236762992422404284 0.67177041563826977999 -0.15711227915115633103 0.23169055763510865154 -0.46130305429609047563 -0.064382292320783227058 0.21384122824332987833 0.23505299339731977604 -0.30144238409833190584 -0.34774325161319102895 0.029660997434716295656 -0.42314603955713075978 -0.11986234840166215543 -0.88580162757595226619 -0.19035795364659346962 0.57087058074484742232 -0.45689848614098332868 0.17273206405714472411 0.30091057917353492002];

% Layer 3
b3 = [-1.882111309073818628;1.6403102772081588068;-1.5834037201139206097;1.2814579141901898396;-0.95575742894128290494;-1.1366302548906601633;0.65223706911348555693;-0.6313846826721459804;-0.40769045996417074829;0.046064865952053023201;0.0035948013277679602417;0.23625241921509970711;-0.81302163081728040517;0.7935559977732180581;-1.0752380570764583645;-1.1234218814504055572;1.3376205820348754383;-1.6297766854105990575;-1.5063107674631879274;1.7232125373501416821];
LW3_2 = [0.40107130334000490324 0.020778456406841505633 -0.41414846211076156157 0.70785575874481010406 -0.24468248979331011506 0.25148761491821025604 0.91205016445459319296 0.54683487795089991135 -0.7174195606484873311 0.83002430625098011507;-0.11771152834194228975 -0.82874291384340736943 0.96583303791291330587 -0.34122148681101388545 1.3002735303076444762 -0.27166612702372316956 -1.2367715434761230586 0.1419921679063135822 0.27114735322679239804 -0.20178479642077590261;0.40444017903673329384 -0.41541783306993951275 -0.16607542853048254394 -0.078046108643546954764 0.94325651370245122695 -0.80802908301193299145 -0.19224603014371619003 -0.37834126212680524448 1.061245956403181756 -0.35980835444725889349;-0.6117651734485246573 0.27069779925352854821 -0.52466963340049110887 0.51746999275878280411 0.55655230539202416029 -0.17317396379973643006 1.1810247962390600929 -0.035592282906244415708 0.66698587664311459466 -0.62970562991209566572;1.016034334690360641 -0.394752181856480866 -0.71410082092584525881 0.88548492893483743416 -0.14166372459236301062 0.56366595144350206681 0.91935481727346390901 -0.070113135990364186534 0.11108461327322245726 0.58386773412217385371;0.21410925922003559707 -0.55683546316801979525 -0.62364591509989186768 0.24876324244071137959 -0.10307383346257076306 0.0083887120243218114835 0.74517959650309251174 0.82981516429449719841 -0.44933458827471961516 0.92043775891624768359;-0.29991469653608904267 -1.2909543303629804623 0.52135379964711281442 -0.026892749090875970458 -0.81839997929550023503 0.23822442436790353115 0.61722576340078527668 0.30867232002317696038 0.57955323842319805827 -1.0159099753254610121;0.15173981154036375596 -0.7223110258866574096 0.60116375468892513378 0.13342565015447563348 -0.81913791535920854603 -0.4415377515454862456 -0.16535567887545807308 0.38908946736101390762 -0.23392230035923919362 1.0558576365192340329;0.062813694973413630729 -0.79042875090581043995 -0.029530211351362158773 -0.35014197674597619114 0.82129029448848478445 -0.44125140369395438045 0.82186716424957118043 0.71883103243177493002 0.074860162569790597575 0.67124601367271130581;-0.1314288384369863838 -1.1357960767346624298 0.7610364975467072135 0.66525368292469744258 -0.56827619267199391828 -0.42578947708875464206 0.3592847097033058934 0.69307281500684780884 -0.17496311071627534961 -0.54734508498667067133;-0.53848284081566233361 0.90973440401028138336 0.44971098477737997401 0.092431259387786415815 0.39090794368214348831 -0.26538828273469988739 -0.30465701747651713349 -0.48868582106683311483 -0.64252628859230276337 -1.0456763059013001183;0.73010868423803687577 1.5223519479383158526 -0.66162534102591563645 -0.065120406049509096946 1.0887827088974075807 -0.14423494001779613161 0.40936251702944453923 -0.41825912004994619808 0.051098140427321039891 0.25168695722747619348;-0.44326321803572354963 -0.42540662698033948619 -0.58231262851898224486 -0.93122559942187621562 -1.5200554262909744541 0.52822530875366091596 1.3892735692577253825 0.67937177747779997627 0.93560889579138439842 0.4678709945331149811;0.39972125686326664962 1.9524618242105771238 -0.30651660491291654598 -0.61256249870550094627 0.95163995378764387745 0.1945613738516348834 0.28994364762257268664 0.34457085457451713806 0.12158706547719577706 0.032776649001830276964;-0.60304148104971189159 -0.47372030567970802029 0.82439522439703205592 -0.70265878637204914892 -0.21882220811684321982 -0.2450800984197256116 -0.22086914226042983489 -0.64098261636702058563 0.82051076788885990432 0.60130100438447653399;-0.39459316836652275073 0.70824886192467217949 0.90696820029549263253 0.49290621478698032343 -0.11720975446678751075 -0.86712955845509875896 0.34092960922745080277 0.79795180465874038234 0.48633573924453971093 0.46206530974042470117;0.16435427552102374604 -0.31248043522399426841 -0.5180352388683480136 0.5968082647038334132 0.69671198689987878794 0.89135358464997505035 -0.62314772649151950468 0.20145707696202524994 0.53339898820132969348 0.84461572897727066334;-0.56520072559404421764 0.58190432587990326141 0.31074216015736710883 0.88438617197070001907 0.085137633159160175378 -0.45116295148684920635 0.98132267775030135315 -0.19463604822768759695 -0.48561961416412374737 -0.41444058777420417217;-0.93178381388167419441 -0.62845060642928018968 -0.52283697319141275717 0.41140051310619074609 -1.1522385476616567868 0.5513344996343173543 0.24058218598485819895 1.0630742775406896161 0.26669387629972896026 0.34293138734203626461;0.56717842565295206736 0.85727278943527029931 0.82034580930562683854 -0.80700550504875656621 0.92844731381058098751 1.171758093952846691 0.10423364005784233055 -0.80931939618158210692 -0.047375111471849404299 -0.27784737721130731147];

% Layer 4
b4 = -0.25240792318736787747;
LW4_3 = [0.23233427214994703536 0.72032172011318695848 -0.026988465259887576414 -0.096045456439778992275 0.20685267745506299986 -0.36002858184614960901 0.88346098055300881224 -0.26322467044767833277 0.087994955827251836178 -0.4583932283697190746 -0.038928957010839961017 -0.69885411877101910605 1.3311570569869786151 0.30465013522672262924 -0.31249481588753585948 -0.18285699918857573065 -0.20361126709679860936 -0.045564562101804990946 -0.76641061425259249251 -0.3440323430537148286];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999991;
y1_step1.xoffset = -2.00000000000004;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
