function [Y,Xf,Af] = nnmove_63(X,~,~)
%NNMOVE_63 neural network simulation function.
%
% Auto-generated by MATLAB, 09-Jul-2024 21:24:09.
% 
% [Y] = nnmove_63(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-9.8820989364874;-4.17631009264064;-1.99999468395731];
x1_step1.gain = [0.10151410520026;0.23976556688107;0.50000722551666];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.818692847378502897;3.494205150232070789;-3.1400659573820082215;3.4185015062256667306;-2.0372725469327011005;1.9039165146043621757;-1.3251235357175163987;2.0502009544751036429;-0.12116543275047121642;0.50033016483200898339;0.23213292148849198893;-1.101378104874079833;-0.32761036979789270873;-1.7448427588943513644;2.5087275192796769652;-2.345404901997161673;2.6215527258762940654;-2.8403027881377229669;3.5427084715051408992;3.5932958226039630745];
IW1_1 = [-2.0524132256514109329 -2.6561302552785215347 -1.7548559473788087892;-3.4732162491189448872 -1.4268234256713838715 -0.71709396752980325562;0.62902090645524344481 -2.2508878206470974703 -2.8086055110170855542;-4.5311925911731636418 -0.35576402728607375847 -2.2484723778690351992;3.3661475332631352053 -1.9455400087159799849 1.2540557695505405444;-1.1052501858906296217 -2.8742220550253056999 -2.3297590036635633659;2.8488699385452549429 1.1815750557665956055 2.3643909084431458112;-2.9078370815174401365 -1.625482339337108062 -2.1788532159640547903;2.7494796298750614483 -1.5755976964501550164 -1.9876897370947881338;1.0715232475947429336 1.0540308682118859629 -3.5444544328856668614;-2.8337267112824680027 1.7962021599457718146 -0.66394456828697312467;-1.5786315792478908815 2.121721207932116382 2.5778345807055349503;-5.2864377152840216212 -1.6529405501795924049 0.18763490432794929785;-1.661197461648042939 2.2567772523727884781 -2.1373152415685123806;1.6326890456808291763 0.58834267700076126051 -3.5819091762725987493;-0.81787659615873409269 3.4879824854213055119 1.7717219017367642486;3.5450682478041311008 -0.78689285486852755813 1.5683318215939929807;-0.19158288475483137292 -2.2935078055210835757 -2.8101631682813188462;2.9401615101455402801 -1.4528530899228502271 -1.583119026748880831;3.5989217125798989017 -2.3092587676291356225 0.9292957742605313376];

% Layer 2
b2 = [-1.4542952555959158811;1.4305999153109940636;-0.66180254819109696207;-0.82518434272767815507;-0.31634488272642719009;0.079718270787373618491;-0.58821507745815526658;-1.0914973414387743045;1.3348524328096431635;-1.8449483112495239645];
LW2_1 = [0.82325326394364661819 0.52680913350646807469 -0.38444850367646027367 0.34176249376652723111 0.44042772548381659004 -0.32861013245594788978 -0.62514303109745772424 -0.021346098635980595426 0.074123063197186950246 0.25637746171167014042 0.55990659265514042264 0.1202296705125514148 -0.06425313383019368163 0.31458898495905651682 -0.14205767398201565865 0.037693668889486137141 -0.55731605577707399313 0.057762405349150239275 0.15169006844225249586 -0.018019047318551043024;-0.4419817563510650138 -0.092637599919355759215 0.45446462693530215171 -0.70952912409879820288 -0.09413211765920045937 -0.14266386675696077213 -0.025217320022762695908 0.33728337461263596664 0.27415670173665329656 0.58748769872533967984 0.55616586705181547678 0.11129437572544813306 -0.15661611236529185409 -0.56155226029157556678 0.088378721979159594047 -0.18775882976282798342 -1.0205228044071152915 0.53363811390485116348 0.86122759475207300017 0.46548511851562590635;0.50541710623388902413 -0.19283642283460042388 -0.50051118491599744242 -0.72900009607081772689 -0.91186994423291656275 -0.14580273154159442694 0.20107287383070307496 -0.64640596703551822522 0.13405577566054990846 0.084836121006080594809 0.088806370488285893416 0.074055455134567252373 -0.11807036738726162106 -0.48680585621723199141 -0.10843929034105409537 0.38818178015793336488 0.71471738386858596481 0.15972712636712574352 0.60875801505656990109 -0.16015076683799953083;0.10254926887325849227 -0.85274521954888338193 0.20459041021073198774 -0.02718511678375314794 -0.87220600830227223987 -0.16732960548880607132 -0.77000430133886144102 -0.042058717609835233331 0.302587589145748459 0.28448360601139294213 0.3281112567004291769 -0.2817697844194919643 -0.29810434378521322163 -0.66867891853080907438 -0.095506898621179031617 0.98278259280032442824 0.8829509976255570658 -0.22384002283548626311 -0.28124533034566301382 -0.40611233020509629466;-0.31919104849108298483 -0.66352450383401040401 -0.071823514263471999186 -0.93931608272825817263 -1.1134667782721587859 -0.34672441253309455034 -0.0094328743361381944821 0.1530437466564244231 0.061465916790738067688 0.2286457497638158809 0.48056207091112768115 0.12679730161794700027 -1.1200568448548047229 0.038606176362492888865 0.50303202696652637993 0.78275136705071279852 0.83383321455339665107 0.061253959283783528111 -0.081027851335704892399 1.1831840543911533725;-0.044636792422815492476 0.010530940351070515459 -0.38876805709534617561 -3.2357514114640224534 -0.077462615140398510816 -0.42541889314012526491 -0.012846207755433380893 -1.7159241426711930867 1.0188426154723362327 -0.93903387285920703054 0.93366129693956667612 -0.94963135825883437935 -1.0910842151960433721 -0.66311191994640694691 2.0371171033800812289 0.5430427701019586717 0.45025564488190111812 0.026866741304332180523 0.4938066553682842752 0.034626841242283656896;-0.25551585677488170001 0.93592001526871371198 0.28665605192239906884 -1.2498333692502576753 0.36741438722840580322 0.1084830145441765259 0.45028391013015306443 -0.73239730845611950016 0.62130619787645913199 0.26196490149358980792 0.86664640324767805435 -0.19859546879512562922 -1.8922498629117581181 0.46850310382072285487 0.15745139010909198207 -0.039313974516864594322 0.5362978013438264302 -0.04274810899779588752 0.22187881580664514658 -0.010564780044612389481;-0.60619548795740108016 0.31980501099806379894 0.0074631703980609261084 0.40191583689221038744 0.20675336508785710499 0.025596874633461556142 -0.63019777625020390044 -0.18907985615508318689 0.63680743392833549787 0.11436996926152170895 -0.23250556941475722383 -0.28022322319277415126 -0.70559894282015944711 0.50981883650375658945 0.20539393379041229193 -0.082912294555263443829 -1.1213328255245196274 0.19517876098711450794 -0.013753709317184354549 -0.018335137314264435271;0.40843405368547641698 0.052456977860397629998 -0.34165036282003929946 0.10903174019872796663 0.53693414504154679534 0.50170755443484449376 -0.29174977100713839206 0.46200070700773193666 -0.070252670979625259085 0.10979741372150493561 -0.24357250382253348153 -0.5234421977640798529 0.38151279173215635332 0.44758929124339591477 -0.84307014954537906615 0.073246084384379323007 -0.15267187929972542149 0.30317585920643808084 -0.36046314773379206642 0.54270566195262381903;-0.19838133788039299943 0.031402532858701384666 0.71775459848569511667 0.71680760999421067048 0.79145865694049954975 0.57637084064575982989 0.87175124576163720569 1.1631623586780197588 0.57478881173586215958 0.9323849758366083984 1.6250264878727502804 0.2681955715532940987 -3.6737325403701341919 1.2252161788684947652 -0.94314735205156174924 0.028128749128446949024 1.0058100540878631701 -0.18645536173104740318 -0.69598874083528827761 1.271985162537763614];

% Layer 3
b3 = [2.5804382385610753481;-1.565053334525390305;1.6764104898248570752;-1.3346644255662021283;-0.98719903739275705057;0.51546293593908432129;-0.51845143048394937146;0.56384968259933554435;0.87227885416088335457;-0.19861729710827033535;-0.18248887981093195321;0.242931058880465095;0.84950565461906635267;0.91364144362118637765;-0.99161796901673338045;0.56832982851729152429;1.3863088790471451706;-1.9175749289378891671;-1.3322674919411150452;-1.8356973242247829337];
LW3_2 = [-1.2886172413461971509 0.27558090136375240631 -0.31732470485344116407 0.67057711301732259024 0.2011933372717011892 -0.10784271245879253898 -0.31596958828657045748 -1.4349601483200102869 -0.11332916838684950478 -2.9271112976028579311;0.49912809998293672376 -1.0434469538308501768 0.37902294789398105479 -0.91527902838188834878 0.51941952672734215124 -0.21487385656552984714 0.20199997040898826084 -0.50276513053775828688 -0.42642292968824296873 -0.083124572795669440795;-0.38686776974236897209 -0.37411479277189851889 -0.63843597837351584445 -0.90189467471892414974 -0.50346690821077921818 -0.17748204423357644144 0.42168918215939715788 0.47714282885330983053 -0.39628162886637252615 0.69319051783742846595;0.82001016614192223653 -0.74784355192022289316 0.17410632080017124368 0.5940784956270085404 0.86244695454939779289 -0.58523713690583756275 0.74568477408123778893 -0.48987606413560425 -0.38618251105109346888 0.52694098378311060582;0.58869905788421972304 -0.47189055124421752652 -0.89603156421604079895 0.4752027996593580772 -0.4894038538400174998 -0.14842595648583903345 0.18741089927316109676 -0.18156120151749038927 0.84682384631836715716 -1.5024286357218836763;-0.32204119769531808215 -0.62467601878570477858 0.16520305532363638301 -0.37222100027360682795 0.8903587123971262729 -0.82459630507532355459 0.73925832101358313064 -1.0715220991625937774 -0.78706564709099069432 -0.64982499343704969164;0.63074758595680846529 0.8965790427885360625 0.80040193316794849832 0.19087691732497852337 0.23092506264633866353 0.24269724482801924292 -0.98169984037773971863 -0.58962339364894233995 -0.032328251910289484972 0.53104593631544794174;-0.71008654597283149545 0.35743651655179181637 1.1416137086648483479 0.46291891446140015498 -0.92085703396069862325 0.125691858169478754 -0.39645726452312868293 -0.043970024854003086912 0.84659851737522595627 -0.87332970213669935955;-0.2586896229212561904 -0.78240638127941153357 0.16568924683421565325 -0.7341302285159378993 0.66561476148015530363 -0.046302915612913934928 -0.79260259125029708382 -0.70988979004516006288 0.61699132717226667921 -0.98356116913185598349;0.51499477573775354067 -0.8910131133732021036 -0.44881217547408885915 0.41413688510475077376 1.2829707315928751132 -0.16692251472409941337 0.18513433798363265748 0.28638149447612559761 -0.20379218205368099248 -0.91229388503915975761;-0.43431055160182491237 0.56052994178699400152 -0.61422383812576408779 -0.69945590369082843996 -0.91790513357797198779 -0.58966932063267729625 -0.37559453174635704098 0.38399078344572057375 -0.91349974886253837436 1.1464307994434188576;0.7086956835010879141 -0.51621756777761473867 0.55795765619481829667 0.14531368707031699916 0.38870319304771161484 0.4561427844634567963 0.96989871190801979495 0.44872677334327848442 0.62707415598246607491 0.72066031475172509513;0.32516869297640649261 -0.4397368763004994574 0.20155393277396066454 1.2394510583055116104 -0.3439325200716595865 -1.2485308821522651535 -0.046747018312180969868 -0.2797819904651434042 0.84945896778148155537 -0.12241368259619689329;0.51244535845187522138 0.16220808112784509958 -0.046797678621948356203 0.6604832163647456067 -0.08326246897757411114 0.52780548218754341772 1.0430837001882959925 -0.52562129350952069284 0.9441649452833797973 -0.55404200832205663385;-1.2798500977087741148 -0.080819779541397518408 0.45730507353686555838 -0.059674966212548107014 0.25807246847042258908 0.098171015592299140651 0.29414709489206886106 0.75118313461865071634 -0.47788967634644113902 0.49679049477395520462;-0.065025227519957554123 -1.07417513274395926 -0.68897296136027041946 0.10063144412837404795 0.73774420211264812863 -0.76462889766771890976 1.1082017589915758027 0.30182160270166613625 -0.90696892166765841203 -0.38896332508840408826;1.3866953645830972786 0.98226274099968435838 0.72529647787387929725 -0.58680955783481991705 -0.8099348695586073843 1.6764266888531518251 0.47091826433433653376 1.3840916720250890926 0.39075908462319353109 1.2864824356613941969;-0.11801832712801431369 -0.74700235663059577629 -0.75165468820751757395 -0.39928868782507531687 -0.55542560434464138819 -1.888328236234627644 0.34217636837665660332 0.42863548488212099841 0.047945599290137377868 -1.0068211790626988567;-0.56027893423463215328 -0.30570877280725966552 -0.37039364337353586354 -1.0643722248707760958 0.48760535839440799499 -1.0994364649464272166 0.95791513557480301166 0.16214833903581782337 -0.52496302727461874316 0.31899732578690598306;-0.10348370561358004316 -0.37104700369387977332 0.093749625113226861539 -0.17676235244803786828 0.89664450757283575832 -0.29820067302262731612 -0.82746974765591907452 -0.7413440526716630341 0.50737986541160318144 -0.94218819036976053649];

% Layer 4
b4 = 0.61809838173905928826;
LW4_3 = [-1.2486558625524548649 0.59355641713745765919 0.15494446831381145091 0.50231072339883853228 -0.37741153855506709425 1.1783959747495817982 -0.17316013245164893486 1.0011566360733141767 -0.5538893096532455651 0.5588330808328094701 0.79532388028331846286 -0.47200699957465558354 0.22544104987757687675 0.24815875816356450234 0.53359887511908998814 -0.49290059721949341931 0.70339200445397764838 -0.64861981712027294567 -0.53398136634092596697 -0.06626743678440233376];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999991;
y1_step1.xoffset = -2.00000000000004;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
