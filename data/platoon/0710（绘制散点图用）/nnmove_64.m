function [Y,Xf,Af] = nnmove_64(X,~,~)
%NNMOVE_64 neural network simulation function.
%
% Auto-generated by MATLAB, 09-Jul-2024 21:24:10.
% 
% [Y] = nnmove_64(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-9.8820989364874;-4.17631009264064;-1.99999468395731];
x1_step1.gain = [0.10151410520026;0.238096945954224;0.50000722551666];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.6199526677173028411;3.6736360818187425714;2.8508027700746239042;-2.9399112653422858621;1.9847803349337453938;-1.5656926192654121444;1.7873359666173376237;-0.12327896608312402527;-1.2426492498534622566;-0.3627544505682053777;-0.44964224612515829582;-0.57067851978682182512;-1.4904885093153132924;0.94546363826431267796;-2.2425691284773545675;-2.6625610940261204007;-2.8853863332423568266;-2.154781518933174489;-3.3825545733485080646;3.8704528524989902927];
IW1_1 = [-3.2624189263314811171 -2.1705976460082547774 -0.68231494333690545506;-0.88270804137290004299 -3.3531164282404657406 1.9139538867443588455;-3.7064837338917602239 -0.47294624297691972847 -2.2123225755965418848;0.68737669784063548661 2.6410356945448230093 2.3925193493637664233;-2.4702023015277552176 -2.230222657938113251 -1.5518029948463800682;2.5376055235672074772 -1.6601316863433737137 -2.9266503763027507112;-1.7332819704297321994 2.8984551592675398268 0.46028628436425800263;3.0081485830106435841 2.3967543282819607775 -0.88191986145876744008;3.7131978550712068099 -1.5748687194239772147 -0.75758855856008344709;3.36917096120829207 -1.9091041822499397185 0.60991052238871457103;1.0183687914352295145 3.1345348200335800826 1.7957721042755652174;-2.2863419305217602684 2.1333789781127543428 2.5752040372897129217;-0.96380199294940416266 -1.8657796603443348449 2.8927014692454489087;4.3998125629161819461 -1.0956147540721254963 -1.2035514997225582601;-1.6042055664873742238 2.9426088248278303716 -1.6627559656764179241;-2.6703720299920634673 2.2099062346875406604 -0.65782389870431745571;-3.3716362953215019971 -0.69658223049661271986 1.3134858312214507947;-3.0640957430034365672 -2.2560470217151538108 1.6562582126339060462;-0.55004496140258973824 1.1038967300679272121 3.5353899933418193591;3.6354729368412979085 -0.012283199837978216185 -0.96642744151875270564];

% Layer 2
b2 = [1.5311516171528418706;-1.4604561016761616887;0.55277157689649147887;0.46808789790140270526;-0.28791861786031019976;-0.17745576758498760039;0.75715443991234243626;0.95489854896406101137;-1.075946134371764451;-1.4152427097683335511];
LW2_1 = [-0.27905439377084628738 0.35982308713144817158 0.37548049924715576342 -0.14788152397287035456 -0.56382015328959544931 -0.54887314674878107112 0.95613995097358495112 0.17315424369703474872 -0.050610230675014182544 0.17438891014799262624 0.28942780307615811886 0.20679613156833270837 0.40391741067473646565 -0.90608228108448496396 -0.57831783172230333268 -0.15209734123997731281 0.19375638959874197376 -0.16012160542382941619 -0.47659991437757870392 -0.38597594631773446405;0.28956025252405392933 -0.37752570131497087402 0.55349776585184418121 0.42183604711114491836 0.82887265359567563472 0.3298690512817558651 0.29139416463928480283 -0.1746773365421717128 -0.34609230977451199696 -0.59748456418513740118 1.6625721130638411172 -0.03511355284094461876 -0.10142454335757120076 2.150759482997132821 0.49359020746365273036 -1.1098086785074054994 0.1189908411382275405 0.52040461942662774586 -0.32157541923972299269 -0.41137667920049098003;-0.56508209908103679275 0.41816412613467424109 1.9172723530675741532 -0.17163604959241576808 0.36720929083239428614 0.78895643925608738289 -0.12558029531254136235 -0.35116233671197577548 -1.5512592506019118321 -0.035751064497437257117 -1.0007715857207977184 1.4607215902472625579 0.35202024395376863009 0.67182663627282546148 -0.22698134042501846852 -0.16511086635363758646 0.6427547082185980365 0.97266606917391884579 0.21736828168713620557 -0.66901312844258287171;-0.081816826544533913235 0.29178623772270134706 -1.8241700090537837919 -0.46115240453607508897 0.042429616174406728502 -0.20357156263846881705 0.47191093945878120897 0.58247662917989784237 1.4027303680500411431 -0.44941162579819160516 0.21856669983988999406 0.21366683328435184808 -0.03814989569172760886 0.35545798159039815323 -0.46459083233580122929 -0.52556345872527532315 0.26196873221445898805 -1.2350179952437918551 0.45034820733030606066 -0.64416458982759738916;-0.042183353608932147583 0.41624240815593449572 0.55054331438622128303 -0.19392516864457903791 -0.49003747187213214653 -0.51064772845947326019 0.30534975448251144847 0.99137279388232180111 -0.41489367585195491284 1.0357121661333668072 -0.6701479352538685097 0.31396010783611472128 -0.27781378468733797238 -0.80819777650834523364 -0.30639552158471844434 0.44570985443293253958 -0.57021372926191082886 0.78522512269311939281 0.89332024718773916927 0.37601684223349540748;0.260760128481074549 -0.65928934071669331729 0.2259222714112910646 0.047342607914889749121 -0.26301051379690898457 0.33033686762539354875 0.077546580414058166597 0.68548757907652368981 0.25468248655751551945 0.18358624824334593417 0.85196761574149670881 0.84649977121888508869 -0.19406563972691129316 0.43642909043777294853 0.47278162302282605856 -0.33492522614404796055 -0.05980488987656039368 0.23853298453701562987 0.64472368689768333461 -0.42013767637036614211;0.19991875589231056232 -1.3419298119625731047 0.22783104662052627853 0.59690520585289119637 0.36339968214594897677 -0.95076616511319533842 0.32861076551950829661 -0.6442599556394393856 -0.97806361559314414222 0.33707530746448338688 0.71935906901666568647 0.38029984984406778326 -0.10470319443586724451 -0.040818893249233212384 -0.32018409252872614967 0.28965132114523911566 0.04375970076457814939 -0.18412484416423813283 0.012020809886519455423 0.35750445251501317134;0.46598274610178319621 0.6979898986560598706 -0.084395865875253675559 -4.2510883777694200014e-05 -0.39966926009214404081 0.20145195061603957121 -0.39599724187046031476 0.26581222666823678402 0.8533389681216982936 0.13627356629493669882 -0.011254892126865697483 -0.19184810851326422609 0.12261634411168013947 0.59526725393412083243 0.95258827719117811217 -0.63085899877862838814 -0.11335071004935920458 0.84674179459099763179 0.51100983413748135575 0.28429441643818870178;-0.44221799952197038408 -0.44215084812510629941 -0.28994385673368239242 -0.56236291067650057141 0.50717602480898715811 0.78996460208167307293 0.12694277667790856978 0.44214473390151964871 -0.09824088612167534984 0.6674803252578008772 -0.73271000150020915154 0.49734495841995213228 0.38490012351329211393 -0.12304143486910765204 0.24035492893668367054 -0.13400903337286196315 -0.65457789862097237599 0.016791507232114047388 0.16540163463660667587 0.44563246528499866894;0.13032982818574678774 -0.7781299502370424559 -0.61170690672469807403 0.14197622825019676207 0.58795939676229957982 0.42477843296201117651 -0.26446495235301231697 0.37150022985488451166 -0.40940240437037994647 -0.634316553361503499 0.35382136359299709572 -0.84366712032005974908 0.58775116161518636826 1.4913729115127014602 0.15427878403979389255 0.50394578814209367579 -0.12996998990082375691 0.15446100818667907184 0.041071682432620090775 0.22441891812027045527];

% Layer 3
b3 = [1.8182069420496655976;1.6598185479817280097;1.6205563633708162108;1.1885955839893884711;-1.2438231418285961016;-0.97737208200565639515;0.44478377555334980276;0.44826165169905368701;0.34751185800621370303;-0.31214155153138295473;0.24823108829890561111;-0.35915735509870427844;-0.43884996002838083662;-0.737780635755276748;0.93654105910721907602;1.3202577526461456436;-1.3827110146615746444;-1.5347545794055843515;1.6645482337498318515;-1.9064116398717227963];
LW3_2 = [-0.96565990105201060523 -0.37136413692353126281 -1.8524026685623014021 1.2571590033601345304 -0.8105728058340909703 -0.55231392950623403593 -0.092970438013716641401 -1.3631151749972671983 -0.11753865784389036508 0.60519566699959259637;-0.67978264266355703516 -0.26899677267510518908 0.38529755822079386762 0.028198897883211636317 1.1612220334185354709 -1.0796856634043485723 -0.068070963229183698018 0.90114295931562427011 0.021610519023028164354 0.8123449326493666911;-0.66644245301885229882 -0.52765569819314528388 0.19766331200868744733 -0.10808932413258495742 0.68432520453809442262 -0.74151946931837298127 -0.48417349355639244246 0.50601093943316832746 0.98871119363097026422 0.72317741776482191707;-0.71175748994845722262 0.76053477058054497206 0.28086051260616445857 0.98720057730863142176 -0.44548877369458428355 -0.024114145738281394377 -0.35379755141010316155 0.54715639272384897218 -0.72157640737682249288 0.71770966131066860072;0.70048335238538339542 0.80378169364222773474 1.2158507874387185499 -1.4267126284855058405 0.60726167229879690623 0.88469329542587160642 -0.41699106799629487297 0.53612723335065826102 0.3001528644300957005 -1.1036767020088611435;0.73751691769598826109 -0.5465912994401183056 1.2390136344796964796 0.83128848327751569958 0.60208042858862043101 0.090970150300054550274 -0.044045270889066553965 0.11551417428945118249 0.25395872172874994765 0.88217476172462561124;-1.1972111514926113696 0.31644783157701089626 1.6969594319787302261 -0.55578622822554535343 0.12473712534233466487 -0.06766955963463477941 0.21322064799035089777 1.0343353956654099957 0.27549954796809045243 -0.6093389324123257289;-0.64451810019092514725 -1.0627756748410095433 0.89518627726340760375 -1.0142274707777914067 0.0027927628996131962855 -0.48085748303831643558 -0.37355777158350528255 -0.60714979055238227357 0.79460018856601866144 0.60769022797892058296;-0.39927947478657033198 -0.19641544325185075759 -1.0464041246855249057 0.24221073424265529561 -0.22534907388407315887 -1.2819880187826961926 0.68717223033837071533 0.31287307303010125636 0.01695950501553028858 0.57990115443582623822;0.14313938351005520144 -0.68723847562740758566 -0.77898885702277809173 -0.61548584711157960925 0.40116246303220842728 -0.19703360778834566602 -0.65910725802251191041 0.44508102566833834812 -0.7867613092043980183 -0.61809998250840858525;0.53875339571784919279 0.10252458194916692913 0.39718839989267418211 0.40943921917075970507 -0.77657409718764436324 0.12846572732280167606 0.097548508672350181525 0.64352121228522396468 -0.085255045238403381891 -0.80604504460005232946;-0.61921721742823920831 0.62728579382149096677 0.92300492096807085218 -0.64629245674659563381 0.72618548615107991751 -0.63507344002248544701 -0.69670206535512579915 -0.20347621807664895144 0.66606905733501631239 -0.6658371853784796901;-0.82414528090870420307 0.603986732603617682 -0.35570683195419311451 -1.2008002020354016093 -0.39564593138054532373 0.48907466258278464721 0.10079960869093217146 0.24158884180528919505 -1.0932208880240033011 -0.99406663949440898786;-0.94394311906681260815 -0.44309187595495086454 0.88679095862074031054 -1.0763386205438894017 -0.92958288887179152393 0.1812668948481148401 0.13673264941434040698 0.41316654519317314032 -0.54361721345336389 0.073875592821331645399;0.1636512893112712641 -0.0071601139562043761636 -0.72884959001887894559 -0.32436370233332229018 -0.36564562335782962998 -0.59642461965265469725 1.1803542215265263593 0.33521619070219971226 -0.93634429667027607724 -0.33474430403179805671;0.77825742698186450852 -2.3661665919975307659 0.082580266743346356084 0.58823431084398536406 0.97488961113588923357 -0.90472838595336924072 -1.8875987560104268148 -1.1545936384804509345 0.29744724876509015532 -1.9257255696682622492;-0.84276042187227651059 0.32762637631696861495 0.5022230273724653804 0.32644746670305940794 -0.56988916427023827982 0.78518175503397369397 0.22918558349161197163 -0.70490499735468958864 0.67037390215760161993 -0.64958191726312941583;-0.4647482812413820108 0.30722452613767253782 -0.41395655511180107222 0.9570523987556186496 -0.38293964921668766088 -0.62593122067847795087 -0.31021813918005419763 0.39045643231003335227 0.24281437792063931269 1.0894588599154906294;0.79735346926579464544 -0.25723226077391431188 -0.78932775762023299482 -0.48623073141626727001 -0.25291845542978708128 -0.72823937108952008224 -0.43237289551420093892 -0.84597331211221238334 -0.27043177558201042521 -0.67989161030318434609;-0.46160316725418215622 -0.27612789503831314253 0.70075166801950683482 0.25291232938094077021 0.2873835682308234496 0.10808649265025721542 -0.9904661370254550512 -0.71319412775831247941 -0.74196830224463661274 0.76043493417504481879];

% Layer 4
b4 = -0.52234198972844136932;
LW4_3 = [1.3781130260771874418 1.0090002590487161527 -0.50742865812555848493 0.059444256770353441632 1.3137267911266807818 -0.80682987352987345364 0.83481860654309070213 -0.61595908863836157376 -0.6362073209844734123 0.87306943604193976149 0.068165675399695285774 -0.57348276703406031451 -0.81835541265615974194 -0.31018969511899008307 -0.50692765022589947321 -1.4095753918644904346 -0.42021208228074141688 0.059778064863397803452 0.312680671854761838 0.24247948005398756166];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999991;
y1_step1.xoffset = -2.00000000000004;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
