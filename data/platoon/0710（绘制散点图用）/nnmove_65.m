function [Y,Xf,Af] = nnmove_65(X,~,~)
%NNMOVE_65 neural network simulation function.
%
% Auto-generated by MATLAB, 09-Jul-2024 21:24:11.
% 
% [Y] = nnmove_65(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-9.8820989364874;-4.17631009264064;-1.99999468395731];
x1_step1.gain = [0.10151410520026;0.238096945954224;0.50000722551666];
x1_step1.ymin = -1;

% Layer 1
b1 = [-4.1030697720938977824;2.7236801919556676843;-2.6224471025594038309;3.5572712544398288337;-2.8115889768386850278;2.0647351330754895038;-1.3498342520741712924;-1.6534323194121585132;-0.54949269632929564899;-0.54164227554341237703;0.12199190091760234167;0.48806339467306825153;-0.56891320454812077667;0.34991328822537515197;0.85518306209184768996;-3.2026955936574705852;3.1404294767483675876;-2.8237014857503570653;-3.7752914250829263665;3.7490707073419917705];
IW1_1 = [2.6176793292247464429 2.2325887555886874125 0.83272782756013574712;-3.0873236593629775903 -0.39623856934993129109 3.1650184636390812365;0.4213834919651471278 1.9571851966406015322 3.1662798078375993249;-1.2719488526352940028 -0.095425181702195327471 2.3856452764011786272;0.93039301879381131055 -2.1103348194489153222 1.6391297873449959255;-0.45863095778492646293 2.5406446533567841328 -2.647863639959778137;0.12681688943478969245 2.4148741535547539883 2.9532661087586249415;0.63972710692319312287 2.7114649440385143464 -1.930695359064506178;2.0438037411124430065 -2.7219844111668978215 0.71167815652702981488;-2.527073012547839781 -0.7466180699370934537 2.4751183728563264097;4.2129483459108811871 1.9295510388798098322 0.14687266325224770935;0.99982254340389431491 -1.7927469912149953668 -2.6718817628632769434;-1.2617391879179964409 0.3040182589331530405 3.7632345180854875899;4.5719360003927498326 1.4356419187469453558 -0.36479321329837921528;1.9046496287462633124 -0.95517260244871038388 3.2143668616637754987;-2.4743559550226348343 0.25833234807310112569 -2.3903968282564163061;1.2887990643306426186 3.8138938376471487324 -0.56309771865950186687;-1.3158376567431129267 3.8374074241101419069 0.34152890291281273738;-0.064185357771909964941 3.2318331959267978526 1.1549324687237907394;2.4068865545824404961 -0.046908436750997588305 3.2764625729524841091];

% Layer 2
b2 = [-1.7313447040115836906;-1.2886509784913025012;-0.99130184306296220687;-0.4126684896979301298;-0.15471610662023951854;0.32825216498329184978;0.14898846832619128122;-1.2096620977661107776;1.4876654762427146128;-0.8586534814741099142];
LW2_1 = [0.32265949896833351351 -0.066664769811187088444 -0.49462744053561624735 0.5240128027273096567 -0.37125649724866471857 -0.55319958438092275976 -0.095576917355139609511 -0.38869433167321348899 -0.37151441119691902548 1.0659473031769091111 0.57654594793611968484 0.071931568986443497615 0.44527455589874259667 0.23293147948144016235 0.0053812182883879403766 0.7871206973900579662 -0.29344007587900755585 1.0539840895166201484 -0.34146761319904073151 0.075351833654948907615;0.6682703559030453988 -0.095282740095716300655 0.12155879708730249478 -0.15197842275097747655 -0.33059067810615877514 0.1907499196006610942 0.30368873722270767201 0.19623778006901534954 0.34297410080524193265 0.31706499143552646647 0.33833878978291076489 -0.19555378712324977819 -0.34764850886350739945 -0.49812664786025945274 0.38962970772321492419 0.49594823813480870545 -0.31222542012844389792 0.18268917325005318286 0.72397174965817356895 -0.19771092071267551415;0.7152793639442804885 -0.67761293157118851482 -0.021790037226091407696 -0.083970250378282443315 0.52375651009347901077 -0.21948361606637636911 -0.17640842260936140384 -0.47459528567466341409 0.84104433909678666392 0.17948903990584877399 0.094755658776004753063 -0.4946870620216842207 0.26400665034231307615 0.47552738523644633162 -0.097164532372310194464 0.20203187620001608615 -0.71613921389583368171 0.19546661887107028011 -0.33879985714272059516 -0.017164089209216241982;0.085897265852281717846 -0.63971060711102634144 -0.028010805815677761177 0.34409543585003216082 -0.56635940952641938839 1.510644610785661035 -0.88675018652092540972 -0.14424556071109012612 -0.020558053051780742632 0.30586869844506886507 0.56456001898667962369 0.24022809757305768619 0.54113272292701564137 0.90818793147524068399 -0.23614845109771195886 1.0515507028841013515 -1.0577083011049366323 -0.42252931268878929361 -0.73794219247179426713 -0.60026249194197711656;0.39218165938470989085 0.032585643288313342891 -0.2546680250596588535 -0.0063665835502195143591 -1.2087264740705780941 1.2826030098837715165 0.13184114904421115333 -0.56440774475056421089 -0.017423240587006266072 0.31650279096252514899 -1.2697732301306690061 -1.1101475260966300329 -0.14394436637436147652 -1.5588298772728401698 -0.059176177736092856752 -0.97983095497711725219 0.021530235641805731822 0.75495115175800686647 -0.02288735308571292551 1.2269444860888467641;-0.078940743780494551651 1.1857482205609537473 0.077825032129067467368 0.53850750197470875769 0.27069756250197402059 -0.96586016826086340537 0.39965571184986037334 -0.97613522092989124523 0.42211389141104593836 0.037421869263801359196 0.82992681758410791204 0.097770500272136032227 0.59044958452748952382 0.80729874483951280517 -0.1170404534187826362 0.63142746894436974081 0.44294778052613692498 1.3115578900454689659 0.12976672991223875409 0.34672040544066806689;0.39371221037897186079 0.22890490968550666895 0.10426688341890995304 0.94330643187066742783 0.76441665200853115003 -0.40702411793427206721 0.41897245008617961526 -0.13103139722195264461 0.49532496967746841854 0.010225857436332037864 -1.7925341944710446729 -0.18050512633263715578 0.040356047212742385266 0.0061376855889836330615 0.014745008379177408642 -0.60356005498525955311 0.73001106109746682904 -0.070516788435454558215 0.39428082696713073751 -0.27357159616178922112;0.017980143649319706156 -0.86187471946438887205 -0.33763914932629857102 -0.087420769130189687757 0.31856048508054740642 -0.21661256679008938919 0.98632870608084610708 -0.46020433586165382378 0.15805037578792424657 0.013030583668623255816 -1.1279778757494276498 0.29421463117848350999 0.051898427001435903927 -0.77722688650758808837 0.57028060007959124889 -0.17500336044175945904 0.60521921022348579289 -0.36215132146110973199 0.40371476840769254801 0.40792708993675574902;0.10489916429694617905 1.3244078103690071213 0.085221356508705811694 -0.1892389134747932411 -0.70621838133126879633 0.19632118882945229221 -0.14491438030240497148 -0.46136423318820724004 0.67841852014246273317 0.98216084697849403984 -2.0220923692799872562 -0.4319077772274086402 -0.27221264121510913014 -2.0427194467271490019 0.85603081808124303898 1.202047237345927444 1.0602732681150708327 1.4309848820764150545 -0.11521313460992209377 -1.5356390761278371215;-0.29812331755679921663 0.82372320245254126991 0.33671425239267477325 -0.24671230443749334049 0.27030670832947290005 -0.92284561792916985912 -0.17572385988817396107 0.99528158613311468184 0.3416476391344104302 0.19007631204413188986 -1.9944523582846895859 0.030896433825810865059 -0.21961266380186827973 1.6214891530133503927 -0.68342797853347159176 -0.45144048925709590048 0.10895469721169789845 0.73562172524479840785 0.15766653881704065232 0.49948577239538083372];

% Layer 3
b3 = [1.8947471652462741787;2.1065649153312824282;-1.3298688443234967238;0.9913053755040974746;1.2767921439715954612;0.85209447990238829096;0.79311075046847179237;-0.6982137164950124042;-0.24056971281629890846;0.0031090173173717872146;0.28328743481465584741;-0.44641722974809122659;-0.41867753583693839703;-0.9662091869217649398;0.42790265124630477711;-1.392361089238287386;1.6600558854922675689;-1.7725569535714282843;-1.3879131814061551609;1.5105523205874995529];
LW3_2 = [-0.83498406231460531313 -0.88617391511170562346 0.5832858235917165457 -0.38982786519127887725 0.31372481529231388553 0.47409803995595639625 0.36499373307949112277 -0.38613693925967951248 -0.45457197435448332135 -0.89419336154492878865;-0.054809052305661874749 -0.50386561724176071042 -1.0996129579321765046 -0.47513747899782921014 -0.05060202670384576773 1.1948326323242486335 0.30901811713967491935 0.42310171910694893693 -0.15819386779506711127 0.95825203854238627521;0.21217183701928057915 -0.75180230679827231288 -0.26381996918327793589 -0.45891496440527301814 0.10614644329624307872 0.10912081533873432826 0.51364150719641810117 -1.0109256821089895872 -0.89805681490269917422 0.24618607858951507827;0.17444588820026296627 0.89228279750842842688 0.59371567201647534873 -0.35942932108392028345 0.4983333646599015232 0.096224372745491545955 0.24006040532268049792 -0.70578493269371633811 1.2058462228429951413 -0.50744405884246057692;-0.65195835175975147546 0.0043980147423135652202 -0.80658740917936255777 0.60308664881950102554 0.40154095134067596673 0.78109181726301457616 0.26396100562028301795 -1.2905765877205521708 1.2605068163835266848 0.34057640790225379712;0.35126158294077830524 0.079822537469353666006 -0.1133678673955944155 0.40233467149826712683 0.51135368497403499433 0.50074358631878679304 0.080745781329789073633 0.039182051437432870167 0.31691269377768460647 -0.78239563529605660186;-0.8596779731477619535 -0.024179087416993379211 0.47257964387369100212 -0.21356959818776705129 -0.59031589344718771173 -0.61192448170153745934 -0.61326972628951936795 -0.011066574535953204589 1.3643063997531215126 0.99376867661124290709;1.1338094832991751915 1.1735447738024338271 0.019677081600209474915 0.59059497643764391484 0.41671234637177745341 0.2788249658655961305 -0.5856519612792605578 0.33571726499442144931 -0.44653721455680206454 0.0048480948737696909906;0.35290730515888424357 -0.54969756094944854929 -0.098787121826677093406 -0.6093804361317435303 -0.47676625017734342027 1.3221269763131917596 0.68984124108778310802 -0.099850043326595666615 0.60918093109976578781 1.0167341022177474041;0.34934740012671622322 -0.010298170990648671322 -1.2245882161088796902 -1.2689315199112760624 0.41156046117351885449 -1.2951876844287311119 1.1661524763741850652 0.21681423899489773999 0.28944428010939859952 1.180488403243139528;-0.0051378243441328672048 0.6424322557448549631 -0.94179535816128134851 0.26504096465219245671 0.98494660116391918869 1.0921902260478286717 -0.084504134535156899544 1.195620842970339881 0.62503542780620757746 -0.35290399322673549065;-0.2007967573080474688 -0.050324131210740002951 -0.67535975695955574594 1.1657332476716291136 0.17797149956832888917 1.0818381117028368354 -0.069892920449516796055 0.55872010049812881327 0.37558667056331718204 -0.42473670355334186555;-1.6983699494872881441 -0.50302966804675164347 -0.45292939144166605159 0.60157340917270341052 -0.69517200875221629719 0.089948733545069006756 1.022868866729081283 0.26505476599629645973 0.37687693483992473764 0.12865802807818962905;0.3200171478997368979 0.32149295941914796115 1.0882221126333242456 0.53534163853420635437 -1.6854341385423268207 0.63590430483429061237 0.12227470436510454177 -0.37465465932835462226 0.35384614867624386569 0.72969417393301827524;1.5508938844712343297 -0.43786114488654881427 1.0047609861685578014 -0.048389200261136008918 1.1563397567702267121 0.52746407119618465842 -0.95989408939729792269 0.25515875918820785095 -0.1863958202701322675 0.20530685063366371779;-0.55243822424031518992 -0.64343689053932595634 0.93943945424342933936 -0.44003540474480712374 0.001199722731834738064 -0.088352746126729608811 0.89662062815671250693 -0.0065680700428591646395 0.28818408429071740162 -0.041216312642324164084;0.54145917813766519799 -0.92227375093380425941 -1.2205243153850320326 -0.27975772838806534093 0.087540387354857696067 -0.33186872124585764521 -0.63706287560607011144 -0.052221507576331253897 0.019852068028883246981 0.38950369199178541679;-0.54121275880509134293 1.0679662212246487929 -0.76343758196963285023 0.20905362503859911683 -0.36304691422937102052 -0.77613870506541682293 -0.34376804206643563067 -0.49670321438640263612 1.3656932841944589008 0.4859791715342451357;-1.0580749474061259541 0.085799096402338806411 -0.075564613544839995263 -0.43091954381141600594 0.23220964444639369262 -0.69270646461953977457 -1.2970545061693921074 -0.21025848335119937116 1.2092248311713567066 0.45817383132990679995;0.77120495234312980148 1.3103340960046543362 1.1156227927513182596 0.011071826420448148409 -1.6649600950960055101 0.027176104155883715197 0.39507485201928022045 -0.78650175828721236027 -2.4856689092295383148 -0.18931805366122977929];

% Layer 4
b4 = -0.16213893704528273276;
LW4_3 = [0.48786653753688957735 -0.032226624033800499447 0.26552790731842051963 0.64384986747545225327 -0.050013336889069760771 -1.1980519476223348008 -0.41609395198255655357 0.039029369109065729926 -0.17568812228975261291 0.026678803638425063749 -0.22695453487586875196 0.40438538488171849039 -0.16545693981231918146 -0.20103179889142200332 0.5585054400297175814 -0.056934813631746586382 0.80067478090902677312 -0.61788876473178266924 0.53175345671798113223 0.91374151368240541515];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999991;
y1_step1.xoffset = -2.00000000000004;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
