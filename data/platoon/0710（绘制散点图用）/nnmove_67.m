function [Y,Xf,Af] = nnmove_67(X,~,~)
%NNMOVE_67 neural network simulation function.
%
% Auto-generated by MATLAB, 09-Jul-2024 21:24:14.
% 
% [Y] = nnmove_67(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-9.8820989364874;-4.17631009264064;-1.99999468395731];
x1_step1.gain = [0.10151410520026;0.238096945954224;0.50000722551666];
x1_step1.ymin = -1;

% Layer 1
b1 = [-3.6329082317849876738;3.6730702754966095824;-2.6143348893194273685;3.0904883806853811201;-2.6305012322230609811;2.3318550756992744155;0.64092212781718682635;-2.2663691094775941792;-0.6325580732643244497;-0.14006207093761707805;0.36644791526811226756;-1.3007703246319468615;-0.96894896568685640048;1.3405156706013363621;-1.7699235268626007933;2.1720673196651874015;-2.9879905419873518113;3.1224765863684380562;-3.1013930332628389941;-3.7403341671235299515];
IW1_1 = [2.6710374445914659702 2.8749320000133131714 0.2661336668404522543;-2.118994536093282921 1.4182211865393949957 2.5245016666001647287;2.9755285395502464318 1.58119387121035615 -2.5242324301272245357;-0.41597539426231744386 3.033770446156078826 -2.2003416747422908095;0.83497160354970545448 3.2173811959261753302 0.9324677785170106814;-0.91353913970404609923 3.0170376449629321414 -1.8400734961422346991;-4.188760647596795117 -2.0967322905840157787 0.59487957323867324266;2.7876040519377158766 1.6639893814463866395 2.6392946483921719825;-1.7401652280205159862 0.82669044598122309875 3.0301656554219493778;2.3614239530038982906 2.8616968818047259226 0.59326569818583729798;2.2727750605515653071 -2.065441585866008456 1.2266274679923847568;-4.3272213832419916812 -0.91671083056381863496 1.7790952630233842768;-2.7919120408880617745 -2.6203136710419325794 1.8138711545926260449;3.9465672451389770536 -1.3998571403429542759 -0.18275227788673334417;-3.7759154859212813449 -1.0953009884896203197 -1.2520852283802892391;1.7991776145039473089 0.80367714496575692884 3.3032626251703769427;-2.373659583606789969 1.6492904681806586087 -2.2940874489540874492;0.26421948205546952337 4.1563096722343049194 -0.26400895131819018813;-1.0886653129521315364 1.1854375164073642779 -3.6694954336360727787;-2.4226127798188956675 3.2468449794652465279 -0.47984540335948588918];

% Layer 2
b2 = [1.4925772942048771696;-1.3632397578613306699;0.92003533065903020383;-0.46336947940057449102;-0.25597743275174228428;0.071056584936287178755;-0.72725114808831803348;0.62662211217942909158;1.4296324616329525448;1.3381044352540429898];
LW2_1 = [-0.097629537326355458893 0.04715754527576627303 -0.74751831996728335117 -0.44603697769692590702 -0.16442004826137862628 0.15815058386391755985 1.8860520256357133917 2.7957540385220385204 -0.43266297999281799758 -0.08889542468038559575 0.20903549054766085158 -2.5342101152163003519 0.46516216898216733444 -1.931565579528744081 1.5471583968123949759 0.28374460022005576487 1.1822734804304642076 -1.4569061614923692893 -0.27189683041328488455 1.1409198719302680036;0.65829107198256453515 -0.41867674238031560296 0.37796960277453467425 0.11868833092866802603 0.60049828240112723687 0.17907423276223027875 -0.24601156865631193527 -0.090194898580210680628 -0.29956473329812038919 0.035894700562542472544 -0.040338772872305223016 0.22037456133084068477 0.25217665021174068274 0.29178192541208958222 0.58551486981056122261 -0.59654253237257215403 -0.064751946981607994003 0.20020608388222885243 0.056923023257303785594 0.49599651186275667269;-0.22772417551215631826 -0.54068428710225335809 0.36326338912022620997 -0.18158077487766419167 0.027912967513929621416 0.18564179697064442376 -0.42732149317319895188 -1.0525634938609549351 -0.83224537982946888981 0.29920329708846099548 0.31210119646485801059 -0.35178833808413229045 0.47172194359577096501 -0.14197171568141370157 0.2760190583513775775 0.13216865902683597178 0.67450090175327759301 -0.21919181599899506541 0.77736910275257431469 -0.11605150620160213648;0.56529655805532297297 0.18789162844824486287 0.12588664209890365608 0.30144645660332602954 0.57596929785723038897 0.19256284147518232253 0.016752595889961547498 0.19797526248298563667 0.2709190469533736545 -0.70169742456824923948 0.1904189152486490122 0.18827896258960588605 -0.028976613534657177929 0.25462177317582934677 0.55343949282113347188 0.13478149728738494928 -0.98452252299909215338 0.29209799239814110416 -0.082366773065552886801 -0.18939325566095063791;0.66739541236184840578 0.1496303569969829883 0.55521735909920044705 0.27601391535531888399 -0.40150788056149083749 0.68632782954871851544 0.65467492993269615909 -0.38200409962287273924 0.12477570875997011368 -0.53889718287572485611 -0.049918635126563644377 0.1039713557697637264 -0.24838526294191642929 -0.04673288759504034412 0.7746203008431149506 -0.20150965025932221497 -0.44946105883695491867 0.32329462087465149489 -0.12911673678411103583 0.51765782673262916713;0.14257550529759693836 0.31705703637934579131 0.37304660467324457507 -0.69439003487985684338 -0.034954952833452949956 -0.40708682014857394682 -0.63473015122198606086 0.25520101084780594247 0.60663059400390573206 0.43390623468670308505 0.54770820432797406863 0.086540298308215024559 0.25302051628325944455 0.33149969354466607419 0.33239800949073750047 0.041203409968896723137 -0.50969793798558249431 -0.44302519681337021451 -0.26327038477758590851 0.61608292979269729805;0.16525532708304502272 0.31437260915626497049 -0.23948059948464298086 -0.96276494666249501364 0.19736618862025770427 0.037434347593866774961 0.30354637693287223055 0.18930828169031696517 0.21534294171749193691 -0.57319507362524590999 0.53992501030445161359 0.10122569478240076024 1.0068289480035437222 0.2177729625550930137 -0.080896123742758757613 0.2579353389078252734 -0.47392733709197532033 0.35901779272233752538 0.18896357801118340847 0.43718904386588047783;0.6718511769471935402 0.27587413388689063787 -0.38188337373869979396 -1.1972456350715285911 -0.12180790949584567595 -0.69545803115330406818 -1.5773262134856007588 0.12578378627362837849 0.18359663411938090261 0.41345865291545069731 -0.40809119546066652262 -0.65581553670173531323 -1.9358021643022496061 -0.046743005816167935984 0.21900122147891509794 0.27711361513301707715 -0.47052513471449874949 0.97230077861690356045 -0.38459579038027580378 0.11923679086265738525;0.3735150301826118957 -0.3184497725106038013 -0.59302616958728771035 0.41593737217797088768 0.025568065783008644964 0.24516991361046747144 0.42982103053477277443 -0.35842517850098620791 0.15417591866635965703 -0.75121928538775195605 0.7953746010179134629 -0.28769868448494978486 -0.051827408881758435522 0.5021155512671847676 0.21524622761929282366 0.19717494967525409089 -0.29634600350149103987 0.093981891699978503674 -0.017523211215695697757 0.60945706319355419378;0.35293204238484193747 0.13599821870245182298 -0.76802013844633509887 -0.38124031155939819282 0.35161767791283116136 0.82708822959183958545 0.27953163332643382599 0.65525209451435428853 -0.2872860138589173884 0.57677675393713623286 0.082033495596912781034 -0.22241543246629502661 0.19332345079202856164 -0.55678581196604559622 1.2300677674185123145 0.21845380538361480749 -0.58997460925547207111 0.20301407329655768441 -0.20830333157973407454 0.21859696907877612659];

% Layer 3
b3 = [-1.8646634660964940267;1.6722231845364430303;-1.9545371428728461893;-1.145911124494344735;0.80609380869723379348;-0.85156643532321762979;-0.59514369334913719278;0.61511567734861127832;0.54098398935914460139;0.29709739189194689368;0.051674844498222016753;-0.10292838879141125163;-0.52010762812136424049;1.0343001371799933619;-0.98214147422046271796;-1.0817841061715707252;-1.5062661011348577045;1.7814215131485036103;1.7930402884037974776;1.9234425365277449949];
LW3_2 = [0.36922245240007139921 -0.4267081504307604356 -1.0693647584617502755 0.90808923718072676046 -0.019608935854200995608 0.62288880743763763714 0.91368593083397475763 0.087279915698346005604 1.0614786579828876523 -0.63110566081141483696;-0.49303260148183553069 0.60807462356271579917 0.22361613243276443064 0.10127006313176538377 -0.41391355077918962069 -0.85757251479807639072 0.79631130818807771554 -0.49732890717203326325 -0.23911030441543426606 0.5536240533290842647;0.16820871712402701847 0.29817553346614084075 -0.44382248005637248145 0.40936023229339685292 0.95914308223927924324 -0.28982870572629393369 0.85872995631786508408 0.17774461670752361719 -0.148587077459094552 0.3773923242147131929;1.2382092248163234505 -1.0072969543307925822 -0.77465694650402583399 0.89188603731983817635 -0.70213829724606580118 0.57466370448599124465 -0.60610222435173510824 0.38507160223854264292 -0.5003529778919061366 -0.54176011904234666616;-1.2217525683293166683 0.0773247660324738878 0.13933567817333808447 0.56944083850031590455 -1.2979789616608734537 0.21430869822728562668 -0.052019292407339053075 -0.18509614104490840214 -1.5182597470439234133 -0.24442812908340150191;0.76313196793463622392 0.015367414952138950396 0.97053368379062954219 -0.077194953695824783391 0.18083714738589104498 -0.79110107457299183586 0.78141153608869295955 -0.39039482042713125054 -0.25383539264289900483 -0.73702467496549439741;1.0910572704682057754 0.9508612084034627765 0.11385519574199651216 0.012128686965496770708 -0.92837496349666670525 0.23237011251183439797 -0.13914817096799578233 0.17491941130057761522 -0.1905869230099076217 0.66162621739127247533;-0.4258368896207919696 0.51639486811623336315 0.32760305928857430535 0.39120732429723531487 -0.92812701809675091091 0.63364773349484193599 -0.83877265097811937178 0.25852693986986358121 0.14536322437864129808 -0.83801215309566878808;-0.4599966668530708902 -0.99870899508538490963 -0.85682226278034179234 -0.8292783339802568543 -0.18569000238892127697 -0.8671857973688726906 0.1193046947340603986 -0.36873559534481897826 -0.11991458445738685523 -0.093014235762729671753;-0.5832936575201143059 0.062483604171057444132 -0.12387805226697320982 -0.85537688500179742679 -0.84537349600724776 0.0023531805302110459302 0.40218175468606115475 0.95218264075689562631 0.42304937011906879052 0.84317361737851559411;0.33986036033983657578 -0.044442713531956286321 -0.74757744908039658327 0.89616750764884589575 -0.90397462546600859667 -0.29065048158788875377 0.79626014502470987555 -0.41501208470688460972 0.71577872743066517369 0.36609190980803213433;-0.15151099659130726205 -0.020237574533437909657 0.67601963880646953609 -0.77832539358970365129 -0.10276940802547962495 -0.6018792342029343212 -1.0341613580299167108 0.12525100370860489662 -0.82907085571108352084 -0.49563737356568454695;-0.064812440255470865624 -0.93608388918254803457 -0.19897756204423477921 0.54832591115349404998 0.24177089528760783987 -0.77526276446276565224 0.35264254246420645433 -0.57141820468165283042 0.8837702285944352143 0.43799223712386953222;2.9193780355775480473 -0.30097190409382895693 -0.53101265891085724924 0.47244754045998388348 0.16940798067331330756 -0.47934523135614043321 0.23219328447785164693 -0.8331784207280986676 0.36780584162431556594 1.9051090243150676784;-0.85837042094914450807 0.56110192925950175269 -0.59297162090368604748 -0.98144633770529332573 0.3775565264530842402 0.41265199003966812619 0.57552707255511825757 0.067926291463050444963 -1.0175974916784709112 0.40593731064629257066;-0.7326181430935170269 0.88816203110072677873 0.79075923342311704722 -0.36838631240454244864 0.11706728674394323297 -0.48687790609865710945 0.51654730979976171135 -0.3275794297159483337 -0.84671351339281319959 -0.34319186902493603597;-0.63456388384052742069 1.039745235452261829 -0.75173134340520497698 -0.77854262589318212751 -0.31557952046117654366 -0.37635996591766135433 0.16253199077104540926 0.017886514258685995427 -0.20036934587539120822 0.52737572785865727276;2.6706107912217262879 -0.3918391800602543662 0.064630490062943690699 0.037295232709345420286 0.73029665124266718301 -1.2285698509298212944 0.19855148547803166958 1.1759205782237560634 0.4751026450451272809 0.40817303054090992021;0.34806730497506355171 -1.1607726646895206724 0.78013919826112188005 -0.53900197845329411717 0.56646891084834083419 -0.17957629552086704083 -0.47494120567907882613 0.52477347878650015822 0.1164412130075458407 -0.21586160793764158639;1.1584798129957007973 0.64107512909965402859 -0.19843472326445976694 0.59206160231542492856 -0.62345435064221355059 0.57180485713339823661 -0.091892910838994978917 -0.49465603473109209798 -0.47018268656543737993 -0.61371534369024560718];

% Layer 4
b4 = -0.038573664930462471523;
LW4_3 = [0.48834376413258789862 -0.44438535005926854682 -0.59786639207001979202 1.0523952562668066335 0.51823372307671355941 0.14771965562141239903 -0.20944083086520187686 -0.39017005562202544677 0.053329582903578559572 -0.1864453337503264585 0.32401677796088740324 0.29000991591142216697 -0.040859373328726016072 -1.0793767668105487267 0.30196544809934389164 -0.73178202448923490575 0.44698355803222528104 1.2353655547537703008 0.037931483108304742125 -0.29941351520925979512];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999991;
y1_step1.xoffset = -2.00000000000004;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
