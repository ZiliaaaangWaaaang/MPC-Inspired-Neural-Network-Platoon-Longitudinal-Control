function [Y,Xf,Af] = nnmove_100(X,~,~)
%NNMOVE_100 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:06:36.
% 
% [Y] = nnmove_100(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.70139767883548;-1.99738196042707];
x1_step1.gain = [0.053913604005474;0.149967019141203;0.500604127399131];
x1_step1.ymin = -1;

% Layer 1
b1 = [-3.6199324331782554154;3.6358129209640943635;3.3057969809625151747;2.9399265989959180168;2.7612111973713568958;1.6255325270523552916;1.7432085980930449587;0.72340986558807429674;-0.071627071544644760337;-0.10640619175582201328;1.2098360614115160061;-0.86646015125603870199;-2.109382144905505907;1.4592984919791096576;0.50484871051599411462;-2.3446809333269911235;2.8563274144464370075;-3.3509066401334206553;3.7439052258232794479;-3.7410380939264902267];
IW1_1 = [2.9028157021993972187 2.0676238981351864332 2.1325114681215335821;-1.333839471977063651 2.5339240078740674633 2.0847976802095007365;-4.5479483025491882486 -0.0204979871040599608 -2.4675983868182167491;0.27215014246999891245 -0.86618945754571274875 -3.5375539384587080249;0.019475240492101333206 -3.2840107902539634743 -1.8073584257533146236;-1.8258360221731648743 -3.1401443986316102119 1.736381853246558693;-1.902945828913349624 -0.31653683674964522288 -3.2519678638971796225;0.004539300745260986189 -1.5175228850418340798 -3.0619893168074572287;2.7565208209332543454 -2.1130048138987072015 0.42555290447789756447;-5.7725573338176596749 -1.7198977837037479066 0.27362617680062456538;2.0649847383217752039 -2.4287787784164964755 -1.864905016360561385;2.7379079165493087622 -2.2972388156199405884 -1.8607706309421727653;-2.1840040960948199356 -0.69121526600434390897 2.5772045943541286306;0.56650737452348409739 0.75484557097607485332 -3.2951757049408425537;5.0992481180756730197 1.0517422985504008004 -0.0082125695406573689938;-3.2217502827803001786 1.6392698640072398408 -0.70445690588884546379;2.7924550215707935052 0.11578680794567891565 2.1886291357949230196;-2.5678630523466430269 -2.7019612513627664363 -1.5956444665981803777;2.391435213159787132 -2.4726402952817552183 -0.86962217408990261092;-3.4756559911773847737 1.36267154381254052 0.90951170116785928776];

% Layer 2
b2 = [-1.6602933429966131307;1.1852790878804475572;1.1304004842867525493;0.15087378213418564665;-0.049867390860434464284;0.45741902036604065174;0.54491079774369699518;0.66385500608671788036;1.3072452749390524041;1.8117445148936810462];
LW2_1 = [0.59590926047276471245 0.25795204766835416743 0.21011782663605615973 0.32991722528216410604 -0.23199596191890281549 -0.28297856397587478616 -0.067170159040502983028 -0.19655906342763795891 0.30434010956950074966 -0.18950557194072650824 -0.0045695252747000930302 0.20952819978323122818 0.29492977347574067526 0.48778643915027058986 -0.27995516398881836739 -0.43112474833735436874 0.18896196346584542836 0.78224815969015670802 -0.51599950826194740383 0.62368991409940122139;0.050992329804220123957 0.58583615486608886513 -0.47043771252806770855 -0.42610521909377563343 0.059602408164972670024 0.95268718160699839004 0.079273109465121963102 0.19915717248916570137 0.66395538969920364636 -1.8931642640249757292 0.74450748532372001964 -0.12167060798370143981 0.88830267804362950113 -0.14249197843108982187 0.35378928446212415393 -0.30907666599199373758 0.29062994220054638728 -0.19696342783812550992 -0.56454886163150586054 0.19422807817309015177;-0.74378557808354117675 0.18076640336856494851 -2.7560204876900913362 1.1501763612053781394 -0.55409932044873477786 -0.29388162432486369946 -0.011673642086201425905 0.21389708106265917231 -0.39314667426319915844 -1.9747242029712896993 -0.57462303532115843741 0.10367455109516880707 -1.1849797273077700144 -0.056009525723071329484 -0.95778634634204806719 0.70824619926002552184 0.098693738967220445701 -0.6114293776593811014 0.27358180587987657173 0.15139900888690871472;-0.89309721870368430352 -0.61249903862226451334 0.16963498303142843238 -0.15609977784302866977 0.79052222443154396281 -0.27601761204482405665 0.7869289748892108749 0.49088243204450876522 -0.88037412678757731577 -0.67757275535728234139 -1.049829141481872119 0.12144768444444256628 0.34726379465116935519 0.68911717513778958377 2.3345277632412124724 -0.35466955636677743868 -0.058380877366562292097 -0.39694239092152855397 -0.46537127418420898284 1.0732524749814558174;-0.065723274538394230171 0.28076629282369269802 -0.058782165440109682142 -0.31481110458550487508 0.22134827731637538029 0.067062465614072100384 -0.031508551613287402726 0.10102315099560793543 -0.61040565406518199065 0.56028682507201610363 0.68367751257752251703 -0.65669573560055993777 -0.34058324317636445855 0.65893490927341469288 0.34237470312607648504 -1.3111355775578288352 0.47908307227459978606 0.56668915281135079365 -0.3375085511675918748 -0.42747379169411736655;0.38312671042308404923 0.43802750441271737225 0.02491666022603971492 -0.60249389977416822894 0.14568827023119390596 0.75819839735675265135 -0.083138996918791327473 0.24038594109798300247 0.28493635312451187636 -0.68124457523934656145 -0.005539563372895385529 -0.073384658691557053123 0.58078754025728795973 -0.13295466584538301325 0.35290625176936130103 -0.47659778427259325007 -0.22056386325276222671 0.22031134907765048681 0.6203975758608111235 -0.40173699066433288252;0.51081879689855680393 0.44604517833961582207 0.41244951291525111525 0.47398987849069496026 0.48623016550858366713 0.61807992208140805079 -0.41731758257314083282 -0.83485637464321404977 0.38877079874436698548 3.2990274108598987013 -0.10481792656918120787 -1.9496410721339390015 -0.91743140167161774112 -0.072034281436365504847 -2.5395440139894760456 0.48191453004780088198 -1.3816481159812892265 -0.67501565032761490226 0.38261317226324015328 0.38822637347448246681;0.93784193753283406902 0.026231295120501620793 1.8665866014607512824 0.083276502837087817976 -0.090567401070777278638 0.30395794999482950161 -0.19771061780833040777 0.31234411746107670904 0.67712929616790284992 -0.041551592060975951759 -0.16058235327729655784 -0.69574611228186267198 0.47806434176719514451 0.4384506012061612501 -0.97308190242489966959 -0.51137340370416639601 -0.8137296331490743162 -0.28675771438039682204 0.12319311279215285071 0.46328010367900668287;0.15096943598915157914 0.051657062823294921938 -0.36057967039626237504 0.89254770066223532154 -1.0130215959872745923 0.3139668527585476876 1.0994402291911549163 0.40556334456429932178 0.53591596084801762512 -0.78735802410079624991 0.80673954039449247144 1.2589327284054565581 -0.25266502603773904889 0.18074290970246847943 0.73806800434952535284 -0.55938182452549323198 -0.3522369349779664871 -0.48707484654123206491 0.1351146793103510102 -0.39169386815678836067;0.40107134513283437816 0.59439663616784732536 0.21592445808045573896 -0.39392466647911766886 -0.30602872164361472063 0.72270827287581096421 0.12763781834947132698 -0.33348826053369662326 -0.20800790977981400975 0.45912391211663317048 0.36431386516228647654 0.13444604855360467455 0.45496803728014151291 -0.076285419001693319241 -0.2061409311293947999 -0.075226414064848576291 0.21701859500201517439 -0.66318578368215419516 0.10736486962382521537 0.12467857102773326206];

% Layer 3
b3 = [1.9263242688571295957;1.4293101827454137709;-1.0658158294603670146;1.1893162601791649191;1.0740445600962862382;0.86682850736054217755;0.64824614649858403048;-0.17766072854267786485;0.37033340961403576896;-0.087295833392572713683;-0.037255427841655197607;-0.38891981243565104664;0.8849463368750311032;-0.44806362702148899713;0.81823803777253956149;0.72713583832977402022;1.7985441250561684523;1.2577573567333981686;-1.8931681332895256009;1.5376254220459979472];
LW3_2 = [-0.8705623040210639374 -0.71334863756265420864 -0.1038114972321590862 0.48003324963927984648 0.77617993581655775337 0.21737349773896696981 0.46838778094128613594 -0.4664034846477356222 -0.33691099520233391829 -0.82894147679842544729;-0.1615490957048945353 -0.71999350151400787201 -0.58566359100792808601 0.13162357110549594008 0.7804502356736046087 0.42818875334117900699 0.130371121263127554 0.94855333237293770754 -0.58650979010503390132 -0.77184817572167851996;-0.14837112023436607733 -1.8252439687669419488 0.042624906212915737724 0.57165857978982670407 0.067846777228666471649 -0.030160373588324868727 1.447963610938092005 -0.72113999886825574936 0.72679282673272971316 -0.53605838571752328914;-0.67866030467980109631 -0.69217076561725310313 -0.62679624526839361476 -0.052507588998555239368 0.5490166645860873329 0.30495592504340623963 0.74420929347871855875 0.70481329974231810009 -0.86526853503425515957 0.55115442160655625514;-0.39393129065617327189 0.38267776753099314035 0.68442050678202503988 -0.75004920127458596379 -0.92804718337103198067 1.0513530581940568887 0.24049382836126598217 -0.2888910244691256235 0.18528905020990424357 0.54000080410177453416;-0.21859287674913982502 -1.5749083260080547486 1.7313512753463973226 0.038535588616326582612 -1.1039860684324975804 0.24529928468320999491 -0.78137306599637768034 -0.38716238379140904824 1.2644303870830266856 0.58363653700971440674;-0.80315403508377003483 -0.98190594971182976192 -0.1430761158903821606 -0.99973663901264830933 0.74801620940262214532 -0.56476833912512103275 -0.61850372781922691168 -0.8383353011725215298 -0.54552776728209240176 0.19937231713797443078;-0.11037009173457346112 -0.80538088051574696635 0.53093182973365038446 -0.18081286357372483575 0.86295917217955919742 0.14712683348797150895 0.78510085002356688744 0.18461147552452308873 0.3007625924707001408 0.79915899215845132009;-0.25377592930532577586 0.8572693490151699347 1.2246791493650464044 0.0713672968949691372 0.15581983059377579881 0.87277883889762530867 -0.33817319372783716247 0.43280805783077724858 0.022759045234800729524 -0.8288974431125809561;0.98270365061068465362 -0.50188458227106957921 -0.5149719644328004664 0.50895465777947623831 -0.33873005891666918554 0.021322219272401694845 -1.1256003140835288967 0.14528264494575771071 -0.10896797789847781357 -1.0446186976108100541;-0.90934320329471152178 -0.8899833570032180674 0.49948001871831554377 0.31053546881636862054 -1.1305010668569905885 -0.74429187892884118849 1.1333597121265606145 -0.20689500831299667549 0.35861904817266915257 0.23542429641837253618;-0.72415564520251851643 -0.48140845798447928772 -0.47759453744701263478 -0.636428177977879872 0.7862609092896852836 0.42724597616326603911 -0.9666083166655786707 -0.55042922411625572199 0.47410156343757564601 -0.02593137891354555663;0.28732039707114909177 -0.52587988598200186008 -2.1167279854776284154 0.81745570301635261945 0.7335817320967421562 0.45095546411797188258 1.4310341012882927814 1.1856098672059902643 -0.57080372399270273842 -0.1865193660734659753;-0.93133675284980721454 -0.64989847346550744245 -0.47683037623405255534 1.0049792368992622738 -0.44932664363949187392 0.23938646584759845637 -0.78157836286229309675 -0.74681046285753127645 0.31703157938726389542 -0.44168933677019922568;0.06694798848986287243 0.48394258161911685168 -0.96904901532618015203 -0.76439684811852304236 -0.64182834529271926005 -0.43676099139266916227 -0.37001604176622321374 1.5281909744040964583 -0.051318576984772795724 0.75506807276609000379;1.3782862730801406226 0.26641431363968742785 0.40861775501935820865 -0.1600696259565612678 0.85893654125785912079 0.55233532993724576698 -1.235991405274757815 -0.5635711905799242194 -0.56340390668429929377 -0.64946646330656820911;0.0085762231495051972907 1.607873617821687473 -0.37920260544866396524 -0.69318149749737156817 -0.22263016648702466105 0.97541304252474891889 -3.1839813720092235982 0.5890216989276867432 -1.0657363642221719946 1.2139873862325822884;0.50165523461615457723 0.75126018254974469279 0.85174039075469021309 0.72584116386932973075 0.307881989390844657 -0.97461195634559805168 0.095735137919296636744 0.48012348862342629774 -1.1721558143268688834 -0.66583453921348234594;0.1347670298694135238 0.69267740160183555176 0.58025671045714422025 1.0402890780343045929 0.24321000145278909299 -0.339691748158480189 -0.55442224313434307348 -0.39161110272974930524 -0.56551237281475874585 0.4826854797469250502;1.3943102668362918894 -0.63861095401702872021 -0.67002141421183991632 -1.1157241202935557212 -0.77054380063380667476 -0.79704655784582012501 -0.64544857090150198342 -0.54498227512965935482 0.04173154112267594279 -0.43991079344952027652];

% Layer 4
b4 = 0.27877308420701951697;
LW4_3 = [-0.45800793291275870844 0.43431178153962596289 0.80942042240570044598 -0.053719811858026357554 0.23809372488159516457 0.84486072654697275119 0.092044837626520145668 -0.34300271463155701523 -0.015932921876131218852 0.4438649482814293612 -0.1802567467930750178 -0.5007546552306610943 -0.80294999116961240926 -0.2409740611878493366 -0.17703832844143024827 -0.44091911583655385432 1.4794941343401235567 -0.37963950290698428303 0.31215064899497152462 0.0060679864793445172436];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999934;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
