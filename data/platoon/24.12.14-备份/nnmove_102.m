function [Y,Xf,Af] = nnmove_102(X,~,~)
%NNMOVE_102 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:06:42.
% 
% [Y] = nnmove_102(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.70139767883548;-1.99738196042707];
x1_step1.gain = [0.053913604005474;0.149967019141203;0.500604127399131];
x1_step1.ymin = -1;

% Layer 1
b1 = [-3.9031320061186884907;-3.6412801942902968122;3.0684701951883286419;2.778101594998246604;-2.3397352663595749611;-0.13265760304809418035;-1.808272138752248015;1.2357138100604216913;-0.65958678955749827644;-0.72747680619576005068;0.72477600222030014177;-0.80994288949533133071;-1.5918955438089856802;-1.5483755298641670439;2.1343733882717437211;-2.8632017129942486378;2.0533563332275450719;4.3326303476103005252;-3.2221160548592875372;4.4240387089274557653];
IW1_1 = [1.081952699192720857 3.53243898688206448 -0.32683063960152652916;3.4366015426044302927 -1.5345276953769457773 0.29659002255172484119;-2.897655678015434777 -2.1408635351998772656 0.68874077523166432613;-3.6410074070305058491 1.8933378115281758181 -1.550517777942403308;1.8315169568311722159 2.4247600888294207344 -2.0579084905323683508;4.7808834447948767021 0.9845584036438328468 -0.49429852418941999659;0.68339776636044491376 -0.92870059777592239847 3.1440705952754122166;-0.56105312069402524244 -3.9852247253511472458 0.97315590741043189738;0.91468972843841078735 2.2303467726623167344 -2.3849866970610622552;1.1719358726164033069 -3.4052281938564665786 0.30488337080113731004;1.1286432719608627817 0.31142806344682910646 3.2542204567744117405;-1.4072283125556885874 -1.0037044092321518729 -4.1771788881316007647;-4.4827175799529985767 0.73563489098394463372 -0.57252322397511246077;-0.86464001485854147244 2.4152459011312394921 2.0929740659210009923;3.5200902767517141534 -1.30805202985797564 1.6077894059568302865;-2.3081218391874460671 -1.9147455055457685003 -1.0649739723852920115;3.1595718792056222135 3.1155155113139567646 -1.7495565315555088315;0.90028948468344471845 -1.1447729508851807179 -2.6816085740860819975;-2.5205179660595953273 -2.251670082717619259 -1.9618725279308442122;1.4120869556901758379 -2.1107760597123306212 1.8556806707613227037];

% Layer 2
b2 = [1.8378900366597359373;1.2236300498557444172;-0.83092754525138479149;-0.70805568454860656757;-0.44343641813475220825;0.018404533192156631582;0.1323718315741306828;0.77251943391664545935;-1.0023539436436383898;-1.9098761580450884789];
LW2_1 = [-0.018863488078987175611 0.29676356399370212857 -0.026472084697869165126 -0.11800829875022988968 0.32778404058886922989 -0.7278432523388125297 0.69862711412905587061 1.1076297580357936656 -0.35386809830936805099 -0.79870897124303918968 0.42251430867688133386 0.34607554449430133481 0.15181503754953060148 0.24816497146203636559 -1.2237793712685081093 0.16750257344935512438 0.16664792731404437509 -0.17654217193328541891 -0.084268771081624727071 -0.072000951508383079225;-0.36619750041981524724 0.33768748798382358656 0.017341564789520140522 0.22646189892341411776 0.064441212193851682422 -0.075813135649997101528 0.68120063720050105793 0.54928529963016448079 -0.16735831844306772731 -0.82245333716929258649 0.31188539780831603387 -0.12916890066479272403 0.86406713233021958942 -0.40476701631616535115 -0.23822630997671637165 0.25441033716565464307 -0.065253624404059545894 0.043461064417060289722 0.8985057729748769928 0.1746568434021002203;0.35130716918849391739 -0.6026758436677120967 0.27541340843617745371 3.1182351879308560783 -0.79096464821219325536 -0.55696012235739533747 0.54125858216616096197 0.14589207370632412131 -0.75961442920906785403 -0.11682538521604111936 -0.33507738609868470414 0.010829864791597979684 1.1427372172130194627 -0.3743127308569735856 -0.24659605051746191773 -0.070969134761601951333 -1.9930997493901405626 -0.072453493301726415443 0.052596365401796775496 0.23253158718065297661;0.30580556854124829602 1.1483124243895037608 -0.30546028896020399612 -0.38311583480107053168 0.30638467830167404049 0.79506732031073634737 0.065655703051069297382 -0.11691142342588348169 -0.42273546460185612572 -0.12909947683554520714 -0.084581230772244817007 -0.28757613963951289549 0.26000571228616864428 0.057525781571599654551 -0.66425884368958809656 0.010836769161396987357 -0.71557670362246372786 0.41298150276814199477 0.27265170741235739138 -0.17893474355619473637;0.69412731637511226879 -0.65189785121733634377 -0.11448359997696483381 -0.32176183348739539891 1.1970937164217925197 0.016544183669993814401 0.040375420479858190048 -0.076790590889576335054 0.17971128780503287103 0.44045111346472343161 0.081810497954037206259 0.39670587351879110782 -0.18139924161519044299 0.063978093108834954705 0.18278067502685532708 -0.16614977534820732363 -0.50434781967541519876 0.33211471587632862557 0.1916473279649207051 -0.93510077142980019271;0.69256177394427842486 0.35929858747590548429 -0.80763756323367819068 -0.18840974678302155332 -0.041358206293868479686 0.35607297881939531381 -0.23615979162773215183 0.17257288418180105616 -0.16923718068741533394 0.31095777972364602171 -0.422745229071819828 0.4597127369633825511 -0.32248896489323591874 0.70376323929167750038 0.019470856659988509951 0.44647356644387953262 -0.53168861520282229005 -0.13674617542500944189 -0.1076065605979810158 -0.16127554677537978001;0.33340654240964712196 0.34908466357369871691 -0.86675153994866471763 -1.1212753668314661137 -0.089724648925394334675 0.16020196251400820042 0.0071274061875552154749 -0.25147359498662452681 -0.1356258443450697182 -0.21380656322301924699 -0.64235871262844201901 -0.28676275931304046063 0.7886206933099617622 -0.29804515061226299899 0.36145538097185830884 0.30397606504244173431 0.167149362882481195 -0.072935838512310918746 -0.26187758315843379098 -0.073328807075080798539;0.4028496221935791155 -0.1167497219756659238 0.093421336354820402881 0.53103333539358177351 -0.84535578898074215104 -1.0274005210018128942 -1.3676336022594151043 0.9365688949432466881 -0.61844597699395631452 -0.50641199755709986885 0.34370299515488100806 -0.1171000494527106861 1.6782397653150964434 -0.33579161500776738558 0.18433660803913759496 0.65040275187021490133 -0.50759084639974927367 0.28060949505208881982 0.22514438627951516292 0.33019041167946683313;-0.71152876499540507194 -0.60952987637305644508 0.89560992788342541626 1.1623619982195156908 -0.07719496382884083463 -3.6067753229229344569 1.4039629113974443353 -0.086772969067729577297 0.32327215785432639183 0.43601902678389981016 -0.084176586069059436412 -0.1976642571510607016 0.80001131515813206363 0.70255791905583886425 -1.6053471219683619342 -0.24803812777993922145 -0.77649113873948649722 0.0022821901199025149132 0.067504549027826030172 -0.081151438238604281517;-0.017909363484643194692 0.59968998348464541692 -0.75377219115020754892 1.3892302622358700948 -0.50008419763235145705 0.84165535961627968575 0.80976073496581091327 0.42353887659706773716 -0.29159795399618126943 -0.30822139653459179609 -0.41933047469082795899 0.77996623375777118792 -0.41110777979095591839 0.54816480557990843181 0.058595320778235350512 0.70752211571245648969 0.17862614869555187846 0.1412396647447073661 -0.41942266217627843794 0.047387526933075470315];

% Layer 3
b3 = [1.9409902500157423244;1.6150032736774100339;1.6319395652887642711;-1.3634273113038299918;1.25456492063994407;-1.0169801753861542615;0.85825735259576152458;0.57956175312941182742;-0.33397833750779548634;-0.20711269471192345071;-0.13667344566992845056;-0.064097010637779505693;0.57312313451500895845;-0.79875912219563838246;0.6767116727741122606;-0.91628527531590187039;1.2795677970832832759;1.780291479479660488;1.7224906980831020675;-2.4037714571123953711];
LW3_2 = [-0.87341788704999656634 0.25932339736239445882 -0.35317527728201569825 -0.56853108900137927506 0.34623845627635235767 0.87545975074365067758 -0.26112128449082877557 0.41744562693461745306 0.90002368490078066277 0.44159669577635873861;-0.8831103440513221603 0.52529992494078114884 -0.18984519601099586472 -0.46380419082470863978 0.26404397209286889492 0.69412341207805317023 -0.78708395038141454325 -0.324742183068168766 0.68717904342079283442 0.6234836690764405942;-0.18966302855649641579 1.0772129112091270997 0.68248321536641831653 -0.39089081087129917691 -0.97826428477356186519 0.42957994370980306931 0.069489493670527008318 0.16816179220108198877 -0.39964403427589889617 -0.64578516325633406048;0.33449720820894690565 0.50506511554356448013 0.19233880986253007461 -0.30272275274965493308 -0.038976487734785722483 1.069488856460155457 0.9071811853421029026 -0.40533791916481187734 0.35147732873308601409 0.74775341142402540484;-0.23348619192827266278 0.14271775356300195337 -0.91728770228442935153 -0.76758033916196510837 -0.38703361060660107507 -1.0100426774396276119 0.29378236956509173883 0.81718173852494990772 0.46219903976734028062 0.55233676427803302111;0.53411523930707172081 0.15875632299394873415 -0.12783197345981692217 0.36112257234227684854 0.10900694563474963572 0.40601459135919854004 0.63119906151652627191 -1.0983789763463447375 0.60348906931079959737 0.87757749073895274794;-0.14511895497067231475 -0.33805778269452180229 0.79960730661895085269 -0.58936036080828013706 0.17702018606908923037 -0.58481524496388259671 -0.26955747926274131743 -0.44807641763314809413 -0.47842714991282253578 0.38705164356169075024;-0.31998657327752588753 0.78575532069973996752 -0.1151375282504107922 0.52972627142522332733 0.80901798637296296057 -0.40111891455307957521 -0.52080616881400532137 -1.1349159537131610076 -0.21381375703286767398 -0.035620998094242649346;0.34574780367019986027 0.58616197196539099323 0.22743357494458724122 -0.31282149667821401717 0.081439183862090258614 0.71014934696743803322 0.63913560728517648801 0.53079007858596827241 0.7530196563199080817 1.1299942378872886994;0.046772803316444573618 -0.78245481173474396019 0.77742533411196101945 0.15057692532931696294 0.77829723826384988872 0.95907925202550647903 -0.7892598390358867011 0.12842773760218603729 0.24391155344240664227 0.20562587685009517391;0.76228899287791485051 -0.51023253121220624173 1.2436384303749794533 -0.49397577331953107516 -0.26492338674604515303 0.52052154745569556571 1.2701954500033521001 0.23381874077827230485 0.89886668329319896475 -0.62392247693916280671;-0.78791034013633465261 0.10614278220329616265 3.1755126989703783558 0.52279831558893175014 -0.17112571056964531735 -0.1528363293533913092 0.15984256545161157348 2.0008715304559263615 3.3751185598582749137 -0.010702614259954130321;0.91867090447235710826 0.69483528879113010124 0.19862409662201990779 0.51782114589679206773 -1.2046123783726891965 -0.33930147553149447859 0.018138859088523431873 0.46228031762340837663 0.45222804618238265917 -0.23918592934946686368;0.0039240907760346183802 0.44435334646798707592 -0.83913373804012680868 -0.37742150953258696289 -0.060968969994429488002 -0.33801888403661606297 -0.00353445503594317827 0.95449225066794474159 -0.12966062933773511712 -1.5936350376898655856;0.76064970245782137503 -0.4971870708998592514 -0.50408012716444894341 0.92668287070120147764 1.127870141033306739 1.0281241483969658645 -0.043929549377714802172 -0.17473832987998721977 0.77466012280806795243 0.50877338857775100678;0.096258283845571016024 0.003615869370702438218 -0.32958151376225736096 0.7833173553684694701 -1.2302357530898733184 -0.36734793867340997942 -0.12709941246700640072 0.47315168100260507345 1.2467655767054151017 0.15981841937386354058;0.48027685405023012866 0.0031549144203393691965 0.54270139269932893278 -0.34345598542398497743 -0.84909496680325835527 -0.55971584657034856303 -0.79650511698117199 0.67592499386013848994 0.60628055678715064847 -0.72327628726212445098;0.67215372948838991718 -0.40520482110040295654 0.55073957877007984063 -0.65991353933400731524 -0.7779591596499528805 0.10337527546164375358 0.53772333774261193984 0.74782214811146530131 -0.82567694758549869949 -0.012415737995254652604;0.37662959574717952416 0.6744587163737421065 -0.49089310757943416252 -0.46185558563762496576 -0.28866369526212154462 -0.82113429205722954229 -0.66208837947273624369 0.34758616725211460841 0.85863381517023440459 -0.64138604292222012315;-0.72146932422881915326 0.11349560335685976442 -0.10450046046331530614 0.89018542039230907914 0.32074509869303657883 -0.58670873038200488381 0.03467996458588556985 -0.72188747919618068138 -0.47589404219854397615 0.85738045869565260304];

% Layer 4
b4 = -0.56594665394225507349;
LW4_3 = [-0.026645402136029051193 0.11955546447634592122 0.46951875421848227043 -0.062576603134083697011 -0.39542694037575704114 0.25506248922121893541 -0.44629559652271644232 -0.046712817639479285725 -0.076526247851742237871 -0.039558678348015685611 0.37176288717398509043 -1.2394244928056499244 -0.0041014465534031331259 -0.0058604261575927393824 -0.8761346471350721643 -0.15738578455145083024 0.86447123794111824235 -0.54790116354168794111 0.35794375250748095008 0.61597174743068550118];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999934;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
