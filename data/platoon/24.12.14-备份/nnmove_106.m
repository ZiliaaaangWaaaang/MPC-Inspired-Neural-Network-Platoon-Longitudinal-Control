function [Y,Xf,Af] = nnmove_106(X,~,~)
%NNMOVE_106 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:06:50.
% 
% [Y] = nnmove_106(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.70139767883548;-1.99738196042707];
x1_step1.gain = [0.053913604005474;0.149967019141203;0.500604127399131];
x1_step1.ymin = -1;

% Layer 1
b1 = [4.8058618737519909203;-2.6622855281530681815;2.3502180666253367214;3.0656399558363998104;-2.3271741272978769821;-1.1896551239074151241;-1.5386814173415821472;1.3656532973279809084;-0.31833935415890118881;-0.0024004445162960560967;0.60312268183907913333;-0.072895766789601718072;-1.3182014209616479405;-2.4742901135058299467;2.5478931294313307276;-2.6586334554717212519;-2.155545497517869169;3.4484668838300063243;-3.5886585928063388096;4.2162279491796894604];
IW1_1 = [-0.61697155753515009469 2.756734264026110548 0.21908095015465639532;2.4741324146137748663 -2.8033291706809264632 0.9881058984427463221;-0.41506772035269356991 -4.2465369977513773847 -0.29353179748043478625;-2.9173536699203674871 0.066378963352635156348 -3.0486071555103300135;2.8727598549136490469 -3.2705022431607795319 2.2490312715375972985;1.4991967031185335912 3.7565267035873182166 -0.39018754590461313114;2.0448696226610088011 -1.9397305040932566467 2.5045640620933995457;-0.25138904000426010032 -2.3508514455474869287 -2.157906863836804412;-2.5475113494370447143 -3.2482908850757179486 0.86621616175557103467;-7.4154374762420252054 -1.1464029742497514608 0.82587925250652216569;1.0648590009626075492 -2.8386952572339851919 2.4589357419574566777;5.3642863741174728887 0.79319691808713688186 -0.56500723650379447438;-0.74772420565655661751 -2.5719782457061470815 -1.5984782367406333847;-3.0236650850668462809 2.2437679845731790529 0.42350570770209811089;2.9107636164506560661 -3.5123575229275219023 0.49791914660637975887;-2.9442819247506544222 0.81636665171206312941 -2.8354033914498981694;-2.2664678576434216239 -2.3746746278609789371 1.7384140437947235291;0.9598454627590153887 -2.9745031118869391662 -1.8716340959583395165;-3.1892777492830650665 -1.7723965026445420712 0.58689933770024604875;0.12471531663085493047 -2.56584955459495756 -2.3456649039492085684];

% Layer 2
b2 = [0.74028719986806335029;0.8123733868050098117;-1.269718639955573769;-0.19195870012688767692;-0.090947613897887191747;-0.0040631860161756266914;-0.88242013774337779708;1.2298537080768530139;1.7018241582143032176;-1.4923854133809584255];
LW2_1 = [-0.96093407617021953104 -0.50393533258469103142 0.0069186991822370105809 0.74886246899173458669 -0.29845708583821095594 -0.65626293360405951738 0.63677214979914498194 0.56110833992593511788 0.1873415363345078688 2.1165229586758202984 0.98874007579380152055 -0.49259088017510288537 -0.30153162556715185083 0.042765945544627537167 0.20508829055537999841 0.21171334469846259108 -0.27706588248432645338 -0.50594930918432268196 1.3011717957923878419 -0.13751365839434392946;-0.29361605292163844849 -0.58157468838680381751 0.54330979541282176104 0.71946080019002178751 -1.1835068616705506361 -1.1491333049428762436 1.3795710921517421177 0.39038197971800669972 -1.281626474280352701 3.2667635503168153122 1.3635578403809369696 -2.9900149628403154267 -0.72775642433776621676 0.70879763060478584435 -1.0012093947765048352 -0.62219059392865605496 -0.53971267327843097661 0.47236520000684240062 0.79229705764426849868 -0.49194373064387914019;-0.19901061836234487656 0.72820375083243771286 -1.0456996440389902947 -0.099510397394441729713 -0.30754914346168960027 0.070499686655580165451 0.2697655468323736927 -0.17201744065096913339 0.0504905601014441624 -0.20344937885448238779 0.62913069426063461531 0.16780525697338069535 -1.4977365972970302366 0.65655200407091030002 -0.78698854710587640149 0.36257083348127011613 -0.041846471226607763472 -0.20636118890749968746 0.38996762073498353329 -0.72738841885979210744;0.26752256811823654781 1.193378796562248656 -0.051020656987455961784 -0.41022459651368964328 -2.0492521940603531938 -0.22190529417926024847 -0.31746289640582742164 0.6844217609158057547 -0.78073543932550504287 -2.7348242735450143392 -0.69523246407012839754 1.9867214079917370206 0.12514624989360279006 -1.1011518407230798111 0.41060078272479055839 -0.089410605645433557931 -1.3198824037689249611 1.0979782720610047342 -0.033118828341811679117 -0.14765599417052641118;-0.43673365083443904666 0.98749588485277661754 -0.83054232660465032723 -0.46417069529989674059 0.4444003059765425645 -0.22315190879304452887 -0.28734025817306407813 1.1501071949839818398 1.4003507854803698418 0.25292409560539896862 -0.18764619693607348383 -1.1116141425089931527 -0.18912951358809057534 -0.33946179362148626302 -0.38539988209738107461 -0.7847956517196964521 -0.389303603288277289 0.37303769872947722952 -0.14699931760453624485 -0.42348993925542627315;0.14521179777388398824 0.22371931048198856473 1.0112026160710876344 1.568764156347022487 -2.1034832580808244806 -1.1834833145009751032 0.74438309219770038005 0.37070054060286095066 -1.4450649826501493767 0.69033350125243797546 1.2572127513122439701 -1.3922368947683843032 1.0521740289037058158 0.15426403090555870778 -0.78833293095497847247 0.38252769842551781476 0.69256148345979295922 0.25623118179877452105 0.32914045749722570244 -0.49296121748779764271;-0.49482845356263271963 0.2065682314097248562 0.76573336078432541196 -0.50200957349679109498 -0.54988773668374135717 0.36253301893136080647 0.058104126933017183343 0.041037516798965695264 -0.45310063373842252021 0.83615096377552955431 0.46320854496946578527 -1.328065620334067054 -0.66182587179742968786 -0.42876612682016934652 0.18939325058951606007 -0.13858550790421581 -0.49893302814853940363 0.32362289985020553651 0.24310104629621850925 -0.54589502459222005726;0.31270998489439683077 -0.69548831912869280014 0.58525430982266657409 -0.44395479392886466607 -0.42226579778947492816 -0.3180718083280346109 -0.47288351221883012654 -0.42704586531900839974 -0.82147753840964599092 0.013567244700546779446 -0.48828971452408687082 0.022757446742988216709 -0.74499944933098105615 -0.078436021693029434054 -0.19495256283443174183 -0.07591939756756749258 0.2630602765772851459 -0.14405165961805060926 -0.63796598956940231417 0.27994260470421356013;0.46059933958423754374 -0.19935319928779463017 0.65074882982353354777 -0.85895991524960768615 0.95589858573265784614 0.28769428047702072515 0.82986852554672863036 -0.81506065821210982314 0.76926153463898483409 3.6063796617106063103 1.3694730829215708834 -1.4034607393715115009 0.29114775431881695367 0.036875841493049621445 -1.3612039994994360459 3.2626490454173375788 -0.6555433731639788153 0.59706806701453440933 -0.63061376273863756214 0.017226457538132265018;-0.56745906533824508333 0.19913633970270780416 0.36850889784289203588 -1.9156516397906562243 1.2089144228717836338 -1.0537609535759331347 0.3715420744053243296 -1.1385972198178504478 0.52685623986236862493 -1.7768550164634959732 -0.043241363569307342263 1.293567304739026147 0.27830793321618696456 0.62144316079276218368 0.23258432482074542502 -0.1762686913886226947 -0.099872860168778235246 -0.62766144069248608339 0.46510507842430737213 -0.27282062907584492262];

% Layer 3
b3 = [-2.424301764765495637;-2.1470608403571098677;-2.0805126682796215576;-0.96021249061661706481;0.60484603887765220342;-1.2246628352942250384;-0.42831099324523741467;-0.48572553236569931956;0.069215110900521570336;0.40073689224147068799;-0.0070206797359221532334;-0.27115496591273352545;-0.47852286217878348129;-1.0703618362290354682;0.98076024663405358961;-1.0172447181696238072;1.161367953862946889;2.0732326342251417017;-2.2128405120054348565;-1.779374642112927507];
LW3_2 = [0.46370050427796571935 -0.5855966743802983876 0.16597386745569914224 -1.1223057755295857696 0.21018785345743287718 -0.50004717196255821232 -0.46823091831035373866 -0.4660598798937004017 0.19975325474745644905 0.60563523535382546292;0.18652165722895927558 -0.80885695413486835559 -0.29704672128192016745 -0.18151671784305128954 0.23514235192672380825 -0.33107711421377067351 -0.32302287391906753244 0.13522301243252107805 -1.202539769075073206 0.48510264214606829691;-0.39713215854947697681 0.69358601397235608577 0.75582889885902881932 -0.66148908009052087564 -0.61498100258581089861 0.96460241014188352615 -0.37173389831131420369 -0.33531971615258299169 -0.84450100458407673099 -0.64633065714709259098;0.50641857369309795089 -0.16285527550995482216 0.45975944360669535049 0.28841549346604272719 1.2086307316004547552 0.49725145135374265726 -0.12723997495371752731 0.53121256862104471175 1.4760003804881696166 -1.60404095280693193;-0.95756215437236036347 0.061813988012523267412 1.1929392057819760975 -0.32709875140541633254 0.51142047637989540565 1.1353218525161106189 0.19411798690251530486 0.023749470750765354354 -0.2822093178044092765 0.85350807446129739464;0.17517662394310831719 -0.09782335441721300151 -0.39232956165104365676 -0.76373094934442609105 -0.49218913239580619479 -0.61875999875288723029 -1.0582324068892823288 -0.031984545011519385782 -0.17545246137650447049 -0.64565978248532185368;0.74775743116212645134 -0.089886922973478985965 0.50483171523235126354 0.9295538269678021992 0.0392906576325859902 -0.85769304492734321776 -0.92355065143972836506 -0.11302216914868849773 1.0215781046100982365 -0.28443001276773788311;0.28559184593482922487 -0.74222837863482904464 -1.1439403877146498978 -0.40475529772787327554 0.68720389350420707508 -0.98923678800696868141 1.2082439147793004874 0.78259427422332028534 -0.94579961213991614599 0.5532803866212465671;0.51268619402719994849 4.9676694273902484156 0.62355285214220967926 -3.2935899401489074911 1.3767969409365232725 0.87567278848415153192 0.515233067129804434 0.25142661153851786349 3.7648016107672299668 -2.9214048531453915558;-0.83744177948470266415 0.077043992830153992801 0.21309217716971712298 -0.2761741586723494013 0.42409178665596392044 -0.82413471933929249857 0.75638340493447209223 0.54693213236845295011 -0.66116791119618900652 -0.3605998303805958427;-0.923326020715235396 1.1836979762283061923 0.55760715661638704521 0.97532313045815888231 0.28875895911249915837 -0.91153480614539783566 -0.76005550472853411481 -0.03279148437537149352 -0.29851825952130378594 0.44094948734360511766;0.90403695919785009849 0.25434250463254848285 0.53577494913168177693 -0.77666231331559765216 -0.30846802857873850678 -0.2771382779152751219 -1.1120541138765895894 -0.60470387620494325809 -0.12144020660061084771 0.90385091076239498786;-0.021403631319498836461 0.56219784414566487118 -0.33928597647890851308 0.79234295166345991568 1.1304591256792055898 0.65102687717104457121 0.8025046318277585522 -0.40251399970411461116 1.5406832290571343957 -1.4953005347932908364;-0.4462719736413126026 -0.79140876175096874778 -0.48808690366206453071 0.15140899817547512352 0.081745023422830742632 0.13086281555733175752 0.18802492712372079198 0.50705791556981372192 -1.3069964833454912334 1.1824711367816080898;1.1990821710224006669 0.30469363272608079862 0.45057071047154689802 0.63301088732065768916 -0.6271498016430601119 0.74639672035861825972 1.0354239396585964705 -0.84895506062424219706 0.6479853904164701861 0.47305577959194961002;-1.0306722309445397467 0.22471834228803563849 0.16507422383527142751 0.065453671333503798957 -1.2855101985706434142 0.53027451139516124101 -0.079421340059623216079 -0.11761069992286356245 -0.37276483506121188549 0.66600678969603910318;-0.087861694736811601913 1.3400628844800390738 1.0690751306790544639 0.18598289022344574595 -1.4634134840848391779 0.49405689560012810979 0.80764002891983011079 -0.37828151102675777739 -1.069494849092973654 0.75983837447210322846;0.65607966880573187485 0.081748912076593210907 -0.32561346480931030456 0.11672753798037899253 0.18604673292175818999 -1.5967812277136812504 -0.63778762323373960896 -0.03889594623789151967 0.80247455931857869516 -0.17040612982324643276;-0.41795807011889091198 -0.36800344896745057488 -0.067557395660863939213 -0.59695340128513341149 -0.4700555410421153324 1.6430675054288788051 0.77388322548693821989 -0.45170435958443255764 -1.4767976532505024956 0.51530827600182427251;-0.67720960786580597368 -0.62893650000534817579 -0.2076290464118386303 -0.5091482245028635667 0.92001711567726474073 -0.28291044200165171851 -0.67714011355356928945 0.77092954615091968673 0.78906689577967681348 0.50693179678678179645];

% Layer 4
b4 = -0.58561269988188069391;
LW4_3 = [-0.45124687596619950103 -0.039161965024317013651 -0.73116741820914832317 -0.46804509131730220872 -0.0047008955447868563254 0.060554203099644238195 -0.01101016607722390267 -0.095533407297831732241 -1.0367472553612309127 0.16090339333545544687 0.024352231809584380662 0.043317548932506576287 0.59557278267227153901 0.1505484898156803919 0.16624092456899450254 -0.0060786709243251264151 0.014573965480514742069 0.97005714370200446517 1.4697793187926997405 0.062091912555407566265];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999934;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
