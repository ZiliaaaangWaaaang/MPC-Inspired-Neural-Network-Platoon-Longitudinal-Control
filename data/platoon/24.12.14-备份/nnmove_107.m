function [Y,Xf,Af] = nnmove_107(X,~,~)
%NNMOVE_107 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:06:53.
% 
% [Y] = nnmove_107(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.70139767883548;-1.99738196042707];
x1_step1.gain = [0.053913604005474;0.149967019141203;0.500604127399131];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.2992168873098774995;3.5654390354191529688;3.3591603216488352679;-2.7575227521292684507;-1.7081452103508925067;-1.953502356618687319;-1.8584651478530638258;0.40726846689653234401;0.40701959970351159201;0.33356390919432377107;0.47440888167781564144;-1.2019000021273094081;-0.49832579420548334115;1.2949867899104183788;1.9080070757388780667;-2.4755851711290834949;-3.1303837729170345128;-2.7696342061264109802;-3.3160097463025968167;-3.2196098215048736257];
IW1_1 = [-1.3256417400300670728 2.4640503801385920113 -2.9276330462536739319;-3.0432327718084426493 1.5387582455214656729 -1.1932702933409589097;-2.1291544978795777787 -2.3515656916800486975 -2.5020135728452363999;2.1567047151752722911 2.2540540836467868324 2.5490507765665775253;2.8327071130049228387 -1.5554617967230219833 2.2224943655369040485;7.3389851747693155559 -0.14920433466816174217 0.64392559159468476526;3.7056279587879306092 0.71211263338255392785 -2.4728267017455078935;-3.9406842692858554678 1.6150724302906793728 1.592341435217961676;-5.5311477860646744986 -2.0289446690184260724 0.39664441650175580323;-3.0656560756864248418 -1.952110707367794129 1.8984456461726082477;-0.033483922325157497446 3.8824070820214626742 -0.5089755776554438782;-0.8467081387231062406 -1.009657193370348871 -3.3440687813032723419;-1.6953233963196927547 3.3193322757461869443 -1.453523861166073905;0.57135748555279886052 -3.5665608955498622201 -1.56855271060457091;4.7635961635036343509 -0.81062845444897901892 0.92601231716797283156;-3.4492994256996869495 -1.3308162369472835707 -2.29224727938849826;-3.5171834494552323136 0.10220152438853197241 -2.8868337841169653402;-3.6171288978542723846 -1.4261882744205189866 0.62650907917995068974;-3.7235625752525058907 0.82708348683744470353 0.98647736214228753937;-1.7963637963798844144 -3.101803262483772361 1.5520929886342760273];

% Layer 2
b2 = [1.6750260675083112893;1.1324958712582617881;1.0948520613581305128;-1.4228104881236702806;-0.053947368424422915967;0.17138820822859865411;-0.88857229095842737987;-0.57006344550087528766;-1.4868416412191938214;-1.6362107122212363741];
LW2_1 = [0.024287487551960761784 0.016384244228914168068 0.39107190216805337579 -0.24599823331444301 0.26502361457435252845 -0.33860464866606210244 1.2949845443751617502 -1.3759212602481303289 -1.6561582911017995734 1.1013060094329176763 -0.26996517449861462401 -0.68072024293662769523 -0.71604258819817812043 -0.14610734765192462392 1.0001489693720144736 -1.8114563871074007562 -0.80816354411011015468 0.6759787131903238766 -0.52375471212607682681 -0.17716307360221289491;-0.68463738807947893683 0.23575145182894943763 -0.10980110744666843337 -0.25468074143284702426 -0.19510590335591540545 -0.074187584396337297177 0.72877753549680779344 -0.012451908602879466215 -0.4697720961899313763 0.30918784351911549058 0.36510269584224280814 -0.10845186227611075536 0.41846574969150973633 -0.27959627135365516803 0.2023645540092073869 -0.69135362335864758432 -0.89760276047567733038 0.64658584017137765709 0.68153794142587820204 0.35198290838771689737;-0.82411604410687877564 0.1398589201027570228 -0.25107939935119366615 0.017424527506171131469 0.19339968463237836027 2.124498667745493119 1.7302367855251314932 -1.4779663090073973386 -3.4300903183165725174 -1.4312871433870615334 -0.27742435467021231421 -0.096148936960539652108 0.33328303644212220469 -0.35613060178534095002 1.8649862192147383944 0.04230976215947755692 -0.42804609660273573724 0.24429860151295762494 -0.58965784224198203312 -0.70139732276787392085;-0.94904406539013630439 -0.12723812633150813345 0.67139943137450797117 0.33259042538627864305 0.46517849379827125311 -3.1378334987579723503 1.1989286842737991723 0.37667401542339273846 2.054227700122629674 -0.059763440900872294437 1.4442003437662123133 -0.28142887163404961548 -0.98012996918510364441 -0.0047083485158832295847 1.4469586984923483719 -1.2538757906923900798 -0.27652890294186016629 0.49816969811705125171 0.79604463165558125848 1.0973832486903207784;0.22833657957387956672 0.38968097840227816642 0.53307413998741748351 -0.61821428886289342408 -0.42539996574206612179 -0.46668362744782737606 0.10409879713098867116 0.01994349046550686691 -0.01679986280135875587 0.22619179459780452968 -0.45556169112686895062 -0.087282481489468877189 -0.25777454629541507458 0.15753088558734948399 0.39131262308690023533 0.20436913567714834472 0.029532523945660086456 -0.42068913553956077678 -0.82749131875946468906 -0.15542487215032163572;0.065882295596264073279 -0.15201202968967555962 0.56355449051875317057 0.21975701276948214624 -1.9431173678571513896 3.0082014250841631053 0.34224487180354351556 -0.68044874680075462248 -1.7899237763618234265 0.42335969212537211126 0.5845429978723920561 0.15884402449046827743 0.795127118711636105 0.47260014779493131343 0.66817181066005515433 -0.41226267271755051569 -2.0868201072806695784 0.21340765227601390941 0.56622636098082101963 -0.45004420030664443741;-0.75483240590237954404 0.25092110433061753927 0.88070870044800053655 0.099475013251104998924 0.21791385777010996438 -1.1445482121648231644 0.52208530317250168018 0.21810348523650277541 -0.68437417244171605546 -0.31814825003167451767 0.13168064976333296312 -0.09333261177094132055 -0.19037773126192106266 -0.31323920226273421763 0.54599635917374889083 -0.65148980323308758322 -0.082104903627386746634 -0.094875394072035046378 0.67420338253686962204 0.42924687973413300224;-0.010501306834037573562 0.48966270940180678384 0.24411501944112085072 0.91449089864337207434 -0.48063435126378450946 0.76978869234772073771 -1.2015522487901144633 -0.02888592069502033538 1.0899843571728831115 0.35226832406082281279 -0.45282739537040139766 0.056943389420548912172 0.048007519930233437389 -0.32099833842998032329 -1.527395271192991677 0.39716999868238778149 1.2484420472399797575 -1.0856595990510753413 -0.97032041721729567207 -0.0048076607935063535651;-0.082403372593905621635 -0.28125343543150577164 -0.38589381831260594069 -0.072502266568098938659 -0.2541135559522313403 0.040046461214077157253 0.55006189293523088946 -0.50531466334325414458 0.20257702097513688444 -0.37319345538475373614 -0.2660499503359267659 -0.47326077777489189424 0.015572183212302768973 -0.60952491927794782978 -0.23515408516600308508 0.3144776604577750323 0.23098989428208388519 0.25364505247593355231 -0.23083233659959512263 -0.040371323567717116998;-0.49532960277018439621 0.19402399990260790763 -0.30021380420651216925 -0.43069530521221643937 -0.29123600338736221893 -0.79647130841511060151 1.1971593301923244557 -0.77873563322276329046 -0.28274438468753598785 -0.48793046322158756256 0.3681717298624214707 -0.046343573889737629812 0.028102166938068440238 -0.16864693511882489219 -0.28851238779724008854 0.74300202847045504484 0.311401074699313829 0.5940494853665490016 0.30684715689827196661 -0.03894788432142598511];

% Layer 3
b3 = [1.9195922117349093483;1.4449271129488681087;-1.5336004191539798214;1.3683668580809880133;-1.2417903717834311017;-0.83998847600592985163;0.84279007600712296799;-0.77574070551937079898;-0.71442472389882538675;-0.17102732060200304121;-0.27465010961865510275;-0.22270543348026566877;0.45210744839246230775;-0.90433702760725542813;-0.35478421881854693698;-1.5977303610027149272;1.2395335376640939096;1.1896601096678882659;1.7844969395687129143;-2.0897622397796729032];
LW3_2 = [-0.28640082583487347367 0.32288449852881362379 -0.83294827341733979065 -0.73067100583710997697 -0.20922863281688186543 -0.30301036274971021589 -0.6282872235610538203 0.88634091068677955949 -0.75170646113442596281 -0.43631685376584555813;-0.79541046033818330052 0.29564146195801616068 0.94446117557173059343 -1.5050850040432888211 -0.51260929556501655391 0.37173035929608649885 -0.44081357388043285184 -0.79877467598552909234 -0.52806424797469320165 -0.34253977845581512485;0.56956328397484845549 -0.23185084492037033588 -0.94618816287298557199 0.59888005960809165273 -0.17544520683081868406 1.0393501908909623666 0.35858725045974482182 -0.99145756100429960345 0.82723019151697507745 -0.11738163992841642302;-0.68924098697120550483 0.54116534372620228588 1.1186070615045768939 -2.3846983617837924641 0.056236724786623476513 2.6008907250778996456 -0.89699446235005408923 0.91351597927436833935 0.94019920674459611654 -0.55995403291659540113;0.75317148997391503151 0.21088104427161066812 -0.072100200483947773922 -0.19889760253427490877 0.27318827612167173591 -0.68425949460003798741 0.75717471012410264564 0.78456649018859903055 -0.22275929930907542587 -0.53118110137397667181;0.42710565978808429088 -0.80920233358461213236 -1.0016364960013806051 1.033664071086868308 0.43062343561824295568 -0.68679639144479465163 0.076424810987414090735 0.74068021357648528014 -0.45409514475141998791 -0.33813387513859372024;0.32954184540962516703 0.095759308104222770619 0.65763837329904206719 1.7397304247136273769 -0.32962097808657725428 -1.0887249519168438194 -0.5363094025379938623 -0.48370694412086934211 0.89900594113955212272 0.50760586412065111794;0.34244334227665412795 0.18817217373757480492 -0.85191100643246597812 -0.37830317386991429984 -0.57628043980599852336 1.0170774451569692953 0.51017921784623021519 1.0918532619542498097 -0.11486605389664719667 -0.24552145249577259078;-0.36477826248566558309 -0.78017726161735112544 0.018553314767964127624 -0.57603778652644144209 0.21164587843008692003 -0.56771205017310033547 -0.56556261849264644059 0.28770319913749153873 0.47670237670585469125 1.1014333841874519582;0.047646667415138753421 -0.69944209542537649771 0.27128019003768655271 0.75612499719617853877 -0.3014104989786766664 0.9600398534845967502 1.0577005507958756603 -0.18833077354516547519 0.15831937824567690609 0.58779374312899468347;-0.11862518404320512855 -0.21103245451965690904 0.42561669638112592517 0.50624831524192093202 -0.6836423697110581843 0.56007417320210950429 0.9351718450047840081 -0.11999440747268599883 -0.58971585796063885621 0.8405811778857784633;-0.50384412930929589614 0.73452612741400613583 -0.18573983089594972573 1.3833241110247591621 0.37174517178235155779 -1.9251513313311239273 -0.74378093665541877844 -0.67214873583595591278 0.33968262464610732287 -0.9841003089393047798;3.6693395766461285312 -0.20750230884853401725 3.3775894350455808457 -0.62999892583902727949 -0.86036206569896644947 0.50322081631166937221 -0.095231260121019983833 -1.9702767098027629267 0.043993081977694303841 0.74830767536605113932;-0.90517963669835921348 0.63116864335576450262 0.3870862381261074292 0.94729429702729550655 -0.054628522969915938035 0.88462412388781863637 0.13934072282670992293 0.7917634232311815401 -0.36544805633425014868 0.51706779186006701643;-0.51573112419481403901 0.25010859375391458759 1.2006880107220236908 1.2942505706815821132 0.78237630876386732304 -0.71827076673901646409 0.54674161013774158491 -0.73327660387535043007 -0.77283234676773504557 -0.71617774291603975012;-0.88241011442666739129 -0.96273504052672176368 -0.19711892137430939154 -0.18903357257322989105 0.44959620058853072555 0.41756762931175883669 -0.42445320230112415505 1.558865933189650832 1.0720405688799867772 -0.37089371849956176419;0.86735228272572750807 -0.75281486227445759685 -0.88068529765211722715 -0.027455265227439833858 -0.79639969310769997968 -0.026313202117963469667 0.15264760057630125112 0.1843670277416716019 -0.56419039220780609067 -0.74900031336548744676;0.82018078815066708387 0.13574742746167975382 -0.85440135515533610633 0.71825242764857388789 0.77200580694694120876 0.053967828487498176182 0.82949878383077835231 -0.61547886154657172053 0.85223248398569884099 -0.46603817764717664351;0.18392132915567493967 0.49542298089178293807 -0.52196994332487045565 0.24497987719960320763 -0.78641392531879039662 -0.80459956867322457441 -0.72218035604808816785 0.18055408245795495636 0.11920207867823692793 -0.66791482825734005413;-0.44582025745065778644 -0.01378600491404725556 -1.5732363035258383199 1.8531471228352818237 0.41356423439313588775 -0.94195717629035891072 1.0105892461878247524 -0.31864569408359671998 -0.015882293011096941526 -0.46373574111998466796];

% Layer 4
b4 = 0.036009794053249472023;
LW4_3 = [0.058113587097922601854 -1.1216720542954543571 -0.27555688119823562587 1.2072804900235400982 -0.011672452432766365973 -0.95988312440011969162 -1.1057705862211295589 -0.2210017058201731166 0.67837576975284463732 -0.28732295676247665561 0.3267265970735390157 1.2732189952085419815 1.0924721148835208062 0.85882487533140650093 -0.62351868824981016015 -0.87648281606054234683 0.30208841200689690032 0.51375212660040381341 -0.086209051185061724709 0.97467457747290864312];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999934;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
