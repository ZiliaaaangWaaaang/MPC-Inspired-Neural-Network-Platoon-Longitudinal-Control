function [Y,Xf,Af] = nnmove_11(X,~,~)
%NNMOVE_11 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:03:59.
% 
% [Y] = nnmove_11(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-13.2925490923537;-6.70139767883548;-1.99738196042707];
x1_step1.gain = [0.0638195875959219;0.168202204644631;0.502184479042526];
x1_step1.ymin = -1;

% Layer 1
b1 = [-3.7623390691269467112;3.5824138750149021604;-3.4437506649951834525;2.3106688148229337365;2.5069289865299295705;-1.215330546998798944;-1.0415645467927723278;0.72101094797478726406;-0.67760772895812548811;0.20332530417386124322;-0.18029961992707874141;1.0373780868142645772;-0.68204706263114489584;0.95476757955171787096;-1.8769267935360534061;1.3642825245995726657;2.4497234093092128404;2.6341646513958099085;2.9740343095280068475;-3.859209128827775892];
IW1_1 = [3.7730544301249344663 -0.52677456690843016407 0.11824073072368269932;-1.6961701628511087758 -3.1403469797446041945 -0.44857274836608657109;2.7989534119071501905 -1.9611004948132633174 0.43113466320464260972;-2.340545913745124107 -3.1479963838637328166 -0.085544662458894998869;-1.9140455310033686054 -0.66946682436962356988 2.9706023528630147723;3.9897619670450596985 -0.399586761979195626 -0.4123765361706067667;0.66272109768450049305 -0.16693431281433357416 -3.731121091003028134;-1.7074775502948800199 -0.48873837824491256354 -3.8529236282226877464;0.87057367504675864378 -1.3654982556550787631 3.4625489858656806064;-2.7205414445980662386 2.7150243448014976799 -1.2548458392537200634;1.6267222714511830883 3.3233891012123923936 -1.7055723982517483339;1.4034640984639743522 2.2313824445367695937 -2.2701750161985327914;-2.3165375522897742044 2.9345001741052647581 -0.80609412626734366913;4.2858119756107466714 -0.027075704402151179462 -0.47908389370854265188;-0.67712919614445443717 -0.33212908643135935494 3.6157069449653085336;3.6434238523734832071 1.3801331176728008909 -0.13128995521064479313;3.0040494159964379328 -1.2353426414005383993 2.1927010471427985649;2.9728773568369408764 -0.32049056301048667317 2.7745354617542545839;3.3003629761739188275 0.91017829942714223446 2.5248769966173378876;-2.9739291205550655306 -2.1320623339619038106 0.43863861371176104953];

% Layer 2
b2 = [-1.4832553057294599608;-1.2343014129511875598;-0.6614807400456580444;0.36358908930602457099;0.23503377024054125655;-0.045557257483014125532;0.7028166932088325547;0.94039225385224178844;1.1689057306978221096;1.4767655176874900924];
LW2_1 = [0.068533586225307738249 -0.0093119030549175235006 -0.56073790609869345047 0.20868389763310099538 -0.67680318465062350164 -0.56508649436085123252 0.78993142208036748464 0.50966127259622562296 0.11192790969930714595 0.4330857000048233818 -0.47437478730541399186 -0.23216242899789965581 0.024590241066105265888 1.4519276678337202924 0.86587256904542764246 -0.088466846061206333429 -0.25244056164874589809 -0.14055294168722476389 0.095328523266999601327 -0.2616734772561938871;0.0082297992422931242479 0.30300237670188179262 -0.4972474104486463431 0.1415835424844393009 0.22459016213644053539 0.36225162706964608716 0.45615689848846480148 0.06597112556478477996 -0.65381679586192487097 -0.77152265229634175991 -0.49974108446971132746 -0.19129237532246995412 0.29827690649206956008 -0.5880844756588490263 0.12901200769284865144 -0.21731586938089814121 0.45210693253688533089 0.62757727813698604979 0.56649342359925913826 0.38074634781327859612;0.12097582364674938638 -0.14513346012677647012 -0.64409876090612494526 0.12139796574377174909 -0.22351589486632958415 -0.4554789878923279911 -0.23708928455116004552 -0.046656487062570341229 0.66348710470438598819 0.20944789425178775288 -0.068112609559683234828 -0.47434938397588866099 -0.09288683153439768192 0.18553621858786309429 -0.094770738148412109192 0.55603600173868439338 -0.50440079431665363341 0.00024539224081574460834 -0.026800849160287791573 -0.73909730734030543164;-0.48870348640768279669 -0.46218378882625194004 0.20566592380822038 -0.38416406152029553001 0.067702016824484748114 0.56207592137887374406 0.30991654325208040088 -0.071607508259827187813 -0.30416712222230646301 0.36584495848009251917 -0.50845617446840751796 -0.33721427909493179031 0.17853552978804906881 0.11507557629679404654 -0.59912348781784807716 -0.72303757383970623795 0.23964834474265761521 0.45229163480906625638 0.014100636455606219144 0.076188261544892707522;-0.54019373367038714395 0.6840499645274762397 0.35070219306893785083 0.036019670718265839326 0.024197458997827145377 -0.32104716396601618023 -0.44950671494880450885 0.10570919701102306221 -0.031016820658473363143 0.046136557987759604926 0.21475901969883695597 -0.55382086682395259558 0.066352115658582677682 0.595241994553051601 -0.10143454965518160227 0.12489355582078683071 -0.36765015409310258798 -0.095141817366068137662 -0.039719903191655185626 0.63870675074452121223;-0.28838484644440676163 0.56655398618000030186 -0.23207130082734736543 -0.83826447304437046171 0.62425861827920980929 -0.65187052927530930724 -0.15641427000973878725 0.2523534132408982722 0.59329564173424631512 0.061223904230218582911 0.2838534090511523611 -0.23986342305730684599 0.30568041924859518099 -0.011202928715723443204 0.34024825066282915476 -0.27623691592781313142 -0.089788420308932206937 -0.054164541278670735869 1.3342328150201405723 0.024733505348241244248;0.12984830834655772258 0.08361101886929213356 -0.41779883440685100515 -0.24892943303344350348 0.42352668418542227524 -0.41509225583036885032 0.16936048383809687579 0.10044800189140914992 0.40948483857197653935 0.41739236092801157429 -0.77089910721244925274 -0.12344278882630951855 -0.14011373093398574174 0.11498647402088543745 -0.41868261026911884892 -0.34208124913115378618 -0.050759406658234855481 0.049433848690587686714 -0.73092307351153629202 -0.38112874276683667008;0.56335771370710197026 -0.2208155125442126665 -0.1040806996891798647 -0.24061423188225949943 -0.76306361218315010841 0.65008308601056452591 0.75001641149215969584 -0.0076079361363404823457 -0.21850443055104631918 -0.31468037990138580939 0.092550118344662674064 0.4442257005862867425 0.26536350297199184922 1.0842410720977773142 0.20212822768227556303 -0.039477071769884693186 -0.37456162135545117975 -0.18082557205028754188 0.56749307340084298446 0.35120163971044465745;0.23603968284391257937 0.035983954941221973911 -0.552443460796582686 -0.55253117317603273051 0.077025744367218040853 -0.45807466011546954521 0.13046473916883177813 -0.053812039932908582729 -0.66527644681282194217 0.55066672162246088629 -0.015304453964104659802 -0.074827198212182907677 -0.62869030530519254274 -0.56546640710496154369 0.22141524930770964397 -0.46348950910202474374 -0.22939736663898499525 0.38875025568639864915 -0.24011824449130345083 0.44682418508826571291;0.65877898048256589014 0.089399340574544808313 0.52002363828571251947 0.60109650877615450337 0.040244478420086729487 -0.29965792482160763521 0.40068049207106309906 0.45308163089882180774 -0.5355439905305106052 0.34471574833204149391 -0.13922753503358159533 -0.5184152469898978266 0.65685741062761771047 1.2570470654030525548 0.62001393109941027593 0.81913416493230850612 -0.09102594416678870537 -0.53110857131669420017 -0.36478910854465407265 0.5063799467545740951];

% Layer 3
b3 = [1.5834685666060808185;-1.7254282790068984355;1.4494308147403911491;1.106298362395914836;-0.95804804642298979633;-0.56227625477300213763;0.40692100008444681558;-0.53891507698109064606;-0.13599015406175796183;-0.17189132283768787657;0.11347243343993176912;0.11606041378385736906;0.35049993549034652585;-0.77259271828087960898;0.94674459949127964808;1.01478722896021889;1.619079060358560973;-1.6002728709508973193;-1.7388404137843067598;-1.9742367346934663885];
LW3_2 = [-0.46854402856839871827 0.34308778365497871743 -0.14854224297477836014 0.50924693349282634802 -0.62246092880563386185 -1.0104946057454127217 0.78422053642058375811 -0.48233462333653798204 -0.73585331468655490461 -1.0399089263276561912;0.30964764013053719394 -0.81671419412875467803 0.32718306286004877892 0.1758646194568135035 0.83136247610080060699 0.63157173481529926828 0.70247165143395795539 0.64759075208041561034 -0.82828250914531031945 -0.30530577252668550381;-0.83814177541051004816 -0.47079586281095919809 0.36067750434037831875 -0.77409881859001616888 0.31416433279918914989 0.64572278863053178544 0.81685701147189981874 0.80250007981967419468 0.12846342206110603068 0.19624537886885207172;-0.21083674379122033238 0.78385325374232495133 -0.55572097584062130071 0.26822508778146308961 -0.1198816401872951215 0.87906768418231817641 0.29015919749901319946 0.80604924303073544056 0.40595694506154311743 -0.46610420405069757921;1.068762183873453564 -0.58124467326523376887 -0.50983465140833661433 0.27940208355104739768 0.17151697006928054434 0.59610123765850564492 1.1167728324833634534 0.95844173845522706578 0.57746703242929975364 -0.1653738429157742551;-0.10108735359652452901 0.13690953951382728304 -1.0810569799456848372 -0.29120968948421144251 0.54596699658874781047 1.0012894894982142802 -0.56035352857942311022 -0.13473460683332105781 1.0482514068136066232 0.50818435184587784637;0.016417826814198874935 0.021169269846217125125 0.5659405870073472844 -0.029816240634929668668 -0.92570256000927819695 -0.74776112178152787102 -0.9792599537314595759 0.55123594318912427781 0.7035121575515937975 -0.56092422958638377128;0.10103592206794771713 -0.69415041967943647006 -0.58533535873848052677 0.46528733248084186425 -0.26204787270286172829 0.72637751279438333984 0.73790822018114654579 -0.61317094214434053612 0.53170361655051001648 -0.87481683608530458329;-0.17130316228872147222 0.46084980045827877992 -0.51731698387997226973 -0.74176731050979505255 -0.19585936374812704108 -0.93107322950329574063 0.83611076717900401079 -0.11409223223436494588 0.95582269525469076843 -0.70939720204939893389;0.24222899383629656334 0.037957125538093799966 -0.82220023238020756295 -0.49341112688131860686 -0.25771692951434593821 -0.26886749920407121417 -0.19201702788424546142 -1.0094801709558725022 -0.97393730105653697482 0.16410054178304775419;0.0055363499327100015521 0.46082992885506052216 -0.42660945649118670042 0.84059496392040999879 -0.18080222119987873763 -0.86641979329011720168 0.58791680409131030771 0.40662040978692465254 0.99776478029319004559 0.12660815508892342418;0.68605723250031536153 0.425204090702128501 -0.20141903451665757463 -0.00089511296728790926656 1.0433794602675199314 0.092489967849329599026 -1.2280088465914538176 0.43356488942272419784 -0.35594445267667884636 0.36350966939603285288;0.60900710894779996885 -0.4918797666692618642 0.67981103579618662458 -0.904976133587980347 0.067187674271775951751 0.30014203770904640534 0.86563920516777437264 -0.60610209745886889365 0.54791553991352714981 0.60612421592621623656;-0.7434637626087846618 0.83668844107364170881 0.50054970519949726349 0.41417333585176824284 -0.65395246906236903506 0.66512936115621401623 0.51043440472643730743 0.67362296223601303424 0.34732901742943411705 -0.30819004967540336581;0.36876582216735870334 -0.50749412031096463593 -0.14173207905151607999 -1.1318121023335321329 -0.77472155061471470461 -0.61443333295674551486 0.10702888332393817317 0.5124434825588225495 0.39641312257470040503 -0.6740426534531628322;0.61526379230338035242 -0.6080029095172276854 0.61217851030683789748 1.0544080114024496631 -0.65497662599489014923 0.68355782843771095703 -0.60033210948245963046 0.19920738533372789325 -0.42321394066152112634 -0.55974661861452756906;0.58951815451430999993 -0.72287678445897385338 0.089517697794086331653 0.26909894679370466308 0.51344497389399734733 -0.60260537958284876581 0.32473779345827769038 0.85176870408601745854 0.84381562700210666073 0.50881415419020870061;-0.31827723691564901998 0.44636938843907630892 -0.77924912438400162351 0.2578076370624389213 -0.93645183389579678135 -0.49790637176194041391 -0.057800892468772874233 0.19413625253284516603 -0.26152704787710773227 0.97403596652399482281;-0.95701250484026567644 -0.06212667853402208118 0.45860578547006430883 0.37837375153277014173 -0.39753260192119116434 -1.0241899353557291086 -0.70202075137324904119 0.039137449235403229397 0.28539719538461211235 0.67092075678152396367;-0.79088066968712611438 -0.15405032045448241451 -0.55882193535494772973 0.016598861596863030698 0.7463356104894116605 -0.40231916596119154939 -0.51057656849010579769 0.34674521549000691945 -0.6116759021253295181 -0.80303104160308214077];

% Layer 4
b4 = 0.45591676745624065692;
LW4_3 = [-0.30494740818444532326 0.66544130250024779993 -0.46657528031818384928 0.097599163111865561149 -0.75286846398300644179 0.52012569219828830303 -0.43685721131075383461 -0.075135260545988472036 -0.70874710718231981321 0.25977349143003714005 -0.011844605521451521957 0.72747688641163055223 -0.49318576576476130802 -0.28794919820207665051 0.01400140843758107545 0.81144594791905322317 0.75469946730729609019 -0.56442635649280203936 0.5460106325150664297 -0.30775665407499291915];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999945;
y1_step1.xoffset = -2.00000000000019;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
