function [Y,Xf,Af] = nnmove_117(X,~,~)
%NNMOVE_117 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:07:17.
% 
% [Y] = nnmove_117(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.85918092085871;-1.99763696099884];
x1_step1.gain = [0.0522252737181727;0.148213484472979;0.500572177293996];
x1_step1.ymin = -1;

% Layer 1
b1 = [-3.191288592706964522;4.537650948002606377;-4.2569621521531857411;-3.5970181317371596741;-3.0126274924753726481;-3.8491206890593447909;1.7232033488372706653;1.0780569793452414729;1.6407391435198266372;-1.6379580773193844756;0.43236476086305958288;0.15381199640931081385;0.61394305812220972829;-1.7890957411657231191;0.10778362710892010201;2.0454464206035196661;-4.008077591425902142;-2.7859715634976973675;-3.6438473657058447763;3.6978702139220001044];
IW1_1 = [4.2298220627729286036 -1.5912077873280856544 1.1121073010093245337;3.5907503396893516445 -3.9279227040157458362 2.7468643971048134489;3.8057033310764802891 -0.45793499667180381785 -0.13364684305151738886;2.9702156404260526834 4.7440551854851342739 -0.10172397257357110312;1.285640534498462495 3.1571830046554230087 1.6257037049174514198;2.973280054670037309 2.4953851662823822721 3.3618018263767024401;-2.9233320684977694981 0.59011228534227810893 -2.7815057821944280114;1.2043684028422700916 0.84633145043946278463 -3.2027456444003239433;-3.5259304939705917725 2.3245635948828091699 -0.77315073417686197566;-1.6112404978182848225 3.6036266749684906507 -2.101278943393943166;-4.4007586731998733498 -0.054646303093210495117 0.48090734297028664423;8.8227259488871929705 1.9506011470545912001 -0.77620788936660312096;0.096133330690221077686 1.9786356148274895084 0.74305904031196046144;0.16776729358227959743 0.57863521626948488663 -2.7115016708103381049;2.9356905499113499225 -2.8014671634740309081 1.8621853514569812749;0.85457222956787670665 -3.373264996482644662 -1.5695018077487543628;-4.1134192317375690706 -2.5024247687490026593 0.2264709900570883172;-1.6408960334650908308 -2.9023017237996455719 3.9742759047342008927;-3.1296136278009254461 -1.7287861536483377645 0.28359056016063355354;2.5555218173289486749 1.7217416189714869201 1.3911000441026981633];

% Layer 2
b2 = [-2.0879072397019760032;-1.8090937696817412927;0.049763482168396905303;0.43392119983392452021;-0.1874757058014218658;-0.0052232618980504030154;-0.32572454624270269496;-1.2033071364838219264;1.7214859890865212844;-0.66115991447214950139];
LW2_1 = [0.36078782812063919794 0.1433240357091165873 -0.18601566376961362059 0.43708253635436600248 0.81868027813573951423 0.19670287727660737409 0.8566733722458681477 0.4089186851092489472 0.021934805229812694843 -0.60156168247701558016 -0.87430611166991878402 -0.70501273459558200241 -0.37093525766693402623 0.083541338478038226767 -0.098813697077170623007 -0.72206156249013886406 0.14427734669045549909 0.23990596507090442002 0.56564788443257252304 -1.3038467718106039328;0.53596643645494734809 0.028132514093670814986 0.059894530554668097555 0.0048335014864044458308 -0.89735723388543253698 0.38957438051121906497 -0.17918206789651955346 0.10889633607091102341 0.94100441070943119382 1.20811509421621599 1.3254421506442224388 3.0772456683832531965 -1.066634735204810891 -0.17969642066497304445 -0.24449267325254953054 -0.26388089636502171098 -0.52313216855453048559 0.056196851783559875759 0.59015566692957688311 -0.28458873183264177253;3.2004504852085258193 -1.3538598173441136474 -1.4352897360363492396 -0.41857639873968227606 -0.17177909078676062427 0.94519726937133252687 1.2012883585676603637 0.20124500593311331342 -1.1417948131959319014 -1.9201270357265189936 -2.5561831774552423724 5.2445385996473765644 0.53016427399993137914 -0.74946565347322102735 -3.1423852679418655676 1.2693064945676706401 -1.0442117516490327933 -1.0882645379079363135 -0.97319034921903335711 0.76589198233119137882;-1.0808143726047130251 -2.7727681370738634925 -1.2949939775931116337 -0.47178758162963713163 0.96302307048378443799 -0.0058180278111193903245 -1.2865816087993913186 0.3698738720591890905 -0.2741100417430953895 -0.73825001019093483556 -1.5794440632771744593 -0.74603423121856360378 -0.19773181652807689246 0.82847452452457970296 0.18633991205112843126 0.84650236685978685891 0.60942578205582464967 -1.0468830953596841571 -0.0131526436846707874 0.81395994745287703065;-0.064782999391891221697 0.61416023859849655508 -0.12986718130685376282 0.85874210865376499058 -0.85833218982614256642 -0.48461298601176205914 -0.51179098219587193519 1.0478008805564109629 0.65488321918320968607 0.012248158974140065797 -1.0489811926539811537 1.4970769246218289528 -0.37745819307161548872 1.6849467920222733763 -0.79870028240478541104 -2.4397677993402679952 -0.95128621722132467031 -0.88455060825374065558 -0.18553112308887026449 -0.566427888068301022;-2.0673841502884693355 -0.13944712648455154236 1.120418997741698508 -0.64014676508076095995 -0.019326585604024181658 0.17568711652377144716 -1.0698330195571001955 -1.0422468982929267156 -1.5775442222396804937 1.0525699548999878363 1.4487545972519171311 -3.0859906298467714159 -1.900437099160513954 -0.51090438979720820267 -0.45025787610191669863 1.4196238180003928342 1.9850624757572237211 -0.20096673779964538409 0.24948783203777347151 0.49448693606871474415;-0.69684248369877666018 0.39612503147120881053 -1.7889100897654612865 -0.40994757898845890498 0.76446842650007518216 -1.0797255376161498663 -0.4114723090006080497 0.75034807917896184648 -0.22372444133836494329 -0.10177088650573840045 -2.0778426110914969271 -0.81596640683354648704 -0.40033666138203366502 1.1111604294904646739 -0.70044250820103481914 -1.2263619486522914226 -0.57303105064401704816 -0.62699849088942849473 -0.6182128848315948666 0.81542259429378960434;0.33917826110385534966 -0.60374777538001889177 0.66896010350023837887 0.4654819132283690708 -0.28474963390890378756 0.18519375375112642756 -1.0118846933698193435 -0.084768001438699142058 0.18612384447572885571 -0.15782586129447778722 -0.53409635850257530798 0.056234210958626504318 -0.92434614434073270051 0.77747013118796948206 -0.26008657320389999557 -0.30531318581510624721 -0.24475069792556611303 0.47596252411914380387 0.42080419190564721799 -0.74771885922747149955;1.1654446283470420997 -1.928293046103592534 0.77954819391040808263 1.4136611630404221085 -0.056791987135646496143 -1.6280333171469483222 0.82734572942255923955 0.69512950600644940469 1.7283619891344470521 0.28447867347048705344 -0.329256986680151853 -2.6665440282939743 1.4586315828698313002 -1.1469875399877773603 1.6370357521655769517 -1.1302712333082882701 -1.3390399941501684999 0.21392829907601207395 -0.049322036136497604542 0.53242668894169553617;-3.6341275772285195345 -2.3418787124783899678 -0.58067137849042993469 0.11720243812742188461 0.33549939150231605778 0.58361599178296663659 -0.16605931359295617034 -1.2179469719271123207 -0.033100472903455850637 0.085872790765855092077 -0.75550136535217071732 -6.3874933853065840594 0.12402905003439448905 -1.0659405208192136438 0.86544978925962112726 2.8800224462812220594 2.0786208047886511885 2.3803702816277354515 -0.89193965478790959711 1.6029399242429580585];

% Layer 3
b3 = [1.964548123863538498;-0.76691341486880970635;1.8811906031290732688;-1.8720475628542392332;-0.81037845988499879191;0.78461553696713581818;0.57917185070892562848;1.1728769673635137671;-1.080420776634710478;-0.55022585400388757115;0.40868885930923393168;0.48245328483898458627;-0.50718046238718306196;0.81574621275304870505;-1.5975367258898149903;1.4395111111965055439;1.5846333949858186774;-1.7362174387766702299;-1.9598458520567614283;0.6277224993446929302];
LW3_2 = [-0.60907802693567458796 -0.59631600202624512885 -0.70508940380215823218 1.0332575729598041381 0.70194219969604332299 0.64792572737607256883 0.30269221834894427525 -0.86770461032158974213 -0.35886438179924057268 -0.45566690837128004388;-0.68410012463758484991 -0.77184547912553180815 -1.3724541124515761137 0.7323385370244449577 0.71455049286193839109 -1.5623862363151552746 -0.058362710995800190505 -0.24323521926771105028 1.6503764742369819718 -0.92515653111942497411;-0.446981996331715703 0.82391312148972539742 -0.34347783870615833379 -0.97845103262722066262 0.40214535141433643828 0.55431726096194244846 -0.17311654681959551261 -0.93410237568938558894 -1.3382903552184590712 0.58547547657869225546;1.1939688880932830539 -1.3944991596582634319 5.173609122665171256 -1.0418372666757522715 -0.14142582606304754389 0.75791138017507542202 -0.62902949357887960602 -0.032658730919851358676 -3.0296803892335142372 -0.0069122706530610825149;0.11268628408018242781 1.3924830117385325057 0.43584890677738602482 0.9691814198616373055 0.63316522682348874707 -1.0871752251966717573 -2.7053042843075876256 -0.72431503976145539259 2.8437903142129519196 -0.21337016208054909727;-0.23817438879817726116 0.50098523632344416079 -0.23933422596834208473 -1.155250940575408336 0.56492213434975435682 -0.05332458421389559694 -0.30547289732236143633 0.3622043852200245162 0.19037184316831790021 -0.92516288463112061891;-0.19612962409254375284 -0.68777004683171916177 0.15980563440140921339 -0.90431456090136186354 -0.4496358216375760386 -0.52822996514118825129 -1.2275302698725698569 0.16920000845278546087 1.810672502273829032 -0.94843953024828420162;-1.4577909018142023445 0.23074330594052908094 -0.55958012776786436593 0.84488105551435377372 -0.037525881312934009082 -0.9035719556270452868 0.55628786727131429579 -0.42045117455914388094 -1.212830183742661383 0.28010610167658400727;1.8394291788693724055 -1.0325969442906282048 -1.8052012416596028288 -1.1674352069228746132 0.90151963545034441427 -0.42525257503417807081 0.16332952652271287564 0.64200494750258441101 0.94224780595386925519 1.0329813687824034307;0.5137945320611506661 0.62972464923144144677 1.2935738369544040882 -0.45027725759201903122 -0.080124456530099891216 -1.2471274657971533895 -1.5159873974412798603 0.77877954108279401346 0.92118331184406521128 1.0632677690840528495;-0.13815320050520879525 -1.7691883387022715457 -0.41800700493665066126 -1.116850042109886143 -0.64309267435215766717 1.0650797181648281597 0.28901340347160220379 -0.99052800886205971675 -1.6840757662830312391 -0.060939759148918443143;0.57347443145850651725 -0.72740848363763810358 1.7735841192509731457 -1.5048915628593917404 -0.48303887476862883421 -0.5286133676251435487 0.013283807562930807777 -0.058161354171660323287 -0.56075264049968298607 0.27297767266459732616;-0.73952293024104442942 0.4667971919776559564 -0.41574316371107461476 -1.3574704856310659817 0.89381425014466797663 0.19392197060897309324 -0.18619249140381427532 0.5281023840680074688 0.12492303373155366764 0.35400764442064075466;0.69530594601723638704 -0.77009584750534465503 -0.51083063770840664297 0.84041177939251854312 -0.96154720971297946708 -0.31287129787303541439 0.22863469333875666156 -0.83030602167911171652 -0.043005504074371390943 0.28763213563523121197;-0.23789271925595381618 -0.01254356449081262849 1.5419742242201839311 0.26456766722755026278 1.2919160760507801822 -0.79394844205465309184 0.21353844698611443298 -0.087914920881028688071 -0.43228232982422737374 1.5114426560756106799;-0.089151361810779955475 0.48188684261276959475 -0.11752726988571016165 -1.7667780171426521463 -0.95668743117644428064 0.00039590071509848587944 -0.91758429178510292346 -0.28415251689337001073 -0.72622091180622139195 -0.85070128157117386181;-0.25651425350825596272 -1.1321137586466163416 0.49695610634943382378 0.41213434126005238367 0.079251066439812195563 0.31762347352985753623 0.90357088008249564215 -1.1461556449934782176 0.31896111265566318149 -0.31525858898572556299;0.14256929334327214653 1.725951717998070345 -0.85157285268838378567 1.1660871174299474173 0.44459697072842196963 1.6224929929654872129 -0.28926277404947381422 0.52175719492538530364 1.6691690915674872731 -4.9664086475643873797;-0.24402994714236678209 -0.72080462485312424281 0.87641720602201411694 -1.0411668327041254667 0.85367710545058905769 0.46496190053566210931 -0.73925353494325174442 1.1193046217953865895 -0.18627538811699673182 -0.23690862396842302107;1.8179149305563111483 -0.18865392720557527806 -0.51654073164881153524 -1.2111055685666407555 -0.54490456282069910099 -0.97824751075222815544 -0.10748353312738463672 1.4892883032064025972 0.3386441081808401754 -0.20992309151184845861];

% Layer 4
b4 = 0.37430703883897703532;
LW4_3 = [0.67724201190734645284 0.020014443873613119163 0.11369561365377252316 1.0127622758937286918 1.1828795345714333553 -0.03495600185238815355 -0.0011192160492195185693 0.2137111421580584758 -0.0230059282990950284 0.021714829450703871522 1.1587602095259863511 -0.0087117805978332730349 0.030616477978337650057 0.12386278522879612396 -0.0014180934251617201107 0.0054297503963185974121 -0.049626163325316850761 1.0945336348977445784 0.00068040403966417722925 0.32460417075266201348];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999931;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
