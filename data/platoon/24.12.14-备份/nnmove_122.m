function [Y,Xf,Af] = nnmove_122(X,~,~)
%NNMOVE_122 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:07:27.
% 
% [Y] = nnmove_122(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.85918092085871;-1.99763696099884];
x1_step1.gain = [0.0522252737181727;0.148213484472979;0.500572177293996];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.636181129430649861;3.6901819718877835186;1.9418078159664466931;2.0156852397840712143;3.1121964547903884224;-2.6476429321842633868;-1.2836519408756832394;1.3631782646973638062;-0.26866138653491522525;-0.34149163349254613165;-0.18131413325049550167;1.1999371185353704394;-0.45396869665165207053;1.3247727742411057328;2.6351000352953510841;3.0194051121647111913;2.8555113212366536324;-3.313908938008722771;-3.5038183990625029196;-3.1016221789564810685];
IW1_1 = [-3.6878104719966042779 -1.4189383609384496054 0.070465642550489177021;-2.9485404694706494055 -1.8119547590789499836 1.2475342532953641594;-3.226228642167215277 2.1935789901434010751 -1.0707411904265120572;-2.1822927954807735951 1.3253256615893287407 3.1993366027611278568;-1.7493753450486884127 2.0932439513229796901 1.9549153767847011753;2.4328048535599422486 2.293361690981725598 -0.321274959969035101;2.1188824752060044787 -3.143969045354544356 -1.2102347863014015772;-1.5301128408687121318 -3.85196041550873014 0.33291647564160065098;2.7985475277344202816 2.3465209856368955954 -1.7188752047217090713;1.4424252587837647077 -2.657455115850890337 -1.4483369210230259139;6.7580644060649772698 1.853466500223554192 -0.32756753414121220214;1.5702534808229486885 2.4192714762394564865 -2.8119055377748161106;-2.4166278110034795645 2.798565036892125768 -1.6447100671771746061;4.4408004369154259194 -1.0007007219952910315 -0.018927553336364782988;1.2531188865436917457 -0.68958701886763562605 2.743994684447668142;2.1375993809607178875 0.1405966716415684159 -3.3325658651439242774;0.5433659437868237907 2.5215239557984436836 2.6907950223879049112;-2.5300895698155478897 -2.1224245499524703185 -2.7273403116867132034;-2.5158212109416506763 2.4173545213872640325 1.3984139771528238949;-2.3236548412321873514 0.54130625078965466379 -3.479711846724542923];

% Layer 2
b2 = [-2.0477051360138207592;1.133503630652468841;-1.3620773352943145174;-1.1617236599110905004;0.74542978858286113031;0.24905897622798975344;0.53874529094717660271;0.93027517310854734855;1.386454955490294072;-1.6241799774094998199];
LW2_1 = [0.13149791861251589054 -0.46275117969548312802 1.0203738663011543419 -0.070963580118704017163 -0.27006156316950485907 0.12174307137630985265 -0.16211698272664670784 0.64067336894922821688 -0.34687444567508779469 -0.54651338377747826769 -1.510129181305418955 -0.22405750800672810663 -0.25097171511252069909 1.0252900521025021252 0.26752653418732075252 0.73140740204251208922 0.16697221649402732568 -0.1501682700646962132 0.45975040725838334232 0.14277031017652025424;-0.87993189511819847048 0.29490661261627787448 0.53911886858945612389 -0.54700476572786105312 0.21934100775076606493 0.5904278462476518774 -0.053305961341521206076 0.088632015564559130105 -0.73845859888960541095 0.54237632801414481509 -1.1115299620111154244 -0.88291663795535990644 -0.3293530262950304377 -1.055054360258295798 0.72188658796916616023 -0.83925648764040383654 0.076402784187207251065 -0.43267957886243946231 -0.13597187367026211668 -0.27887578155064873808;-0.26109824926009472801 -0.61585568684103642045 -0.098725352738186902823 0.016823154127732879715 -0.032975701727775454108 0.062675908883337794197 -0.21479284823721808695 -0.85428523498628661237 -0.3670428739936552609 0.26708562790352341487 -0.94224895667697738944 0.26464154557985208882 0.056689895540842340227 0.21633554722390885283 -0.086535686710023804191 -0.096670404609707785704 -0.36909314113458252526 -0.40861045254484334999 0.78923903901209691014 0.29495877425573097108;-0.222673864981478703 -0.46162402694604998121 0.79157566417009617155 -0.39666817797107201127 -0.60851398330668049486 0.47517230745393346236 -1.1817059624820946961 0.64015387815083191203 1.1413873455952021629 0.56598277685980258322 1.9031718529152543695 0.1922003880771968598 0.23575508950996793001 0.71242172916983270703 1.2371603862253883754 0.52790002024770077416 0.39996857024935494884 0.37292414678536200956 0.12824850973591442327 -1.0337388154934947782;0.4340067694800559539 1.0212438481024412873 0.39523842865420188986 0.041357349581218574852 0.66451813978016172069 0.16848719293853509082 -0.23226692529753595329 -0.087999702661822901129 -0.10035048993333141321 0.82492312645543575123 0.87638115573340968911 0.26829267611282436867 -0.61267543568644433627 0.57168999831012978774 0.91524960195470561608 -0.030684328482024778029 0.13515074619798100874 0.23735650328303203871 -0.38459375619873975571 0.11633088004181874053;0.14086155205958250658 -0.21720218807129457184 -0.3887579822073765623 0.89462460339966776157 0.76739746576130352107 -0.49667869701796463211 -0.49185134040082212348 0.60583227693266417102 0.59464680816687498499 -0.34726866547691276343 -0.42927639977170889418 0.24658515871716624179 -0.58998434964811674597 0.38499475129154570041 -0.55376901928303745581 -0.1418742576423411561 0.090705007643142293583 0.21198158286145052376 -0.44906312169574846838 1.0580358083039191897;0.47154539790683042133 -0.095015011813422631248 1.0639974290460809669 0.58354687163403162753 0.26636370383795476835 -0.81501137309197535519 -0.52118885170306905597 0.50466679834055960807 0.23058380182766255451 0.47334397827510032997 0.14101810165136702269 0.06712044064746121308 0.11975260164981155198 -0.053702043491185333379 0.94767025776293756234 -0.47290797783429389112 0.41516349540752284231 0.46962254452918161807 -0.11905824838314395253 -0.57844840782029571802;0.11663633897297771835 -0.028675226540563501787 1.6633485087809360969 1.1250687850618878993 -0.47315049646589840693 0.07492450997972871507 -0.78365051691244236309 -0.61953300871260674754 0.40555380915111899354 -0.32914021206498883521 -5.3605631336455914493 -1.5788527562517427061 -2.2619357074426300613 -1.6604579497864759841 -0.33733442957016690489 -0.41148464489467501126 -0.43941461080444854659 1.0713926457385747337 0.32066601721113985324 1.2715179421238504975;0.61641986172462970295 0.50759587392281269036 -0.20082295885485756948 -0.10262630594134436457 0.68428977213527431012 -0.50126155731264021576 -0.012152348616247754531 0.46335083586025954672 0.06803251966456433375 0.31056672978367189097 0.53138066081104828875 -0.15179124091816686981 0.52568372138171937102 0.1959449820921678187 0.23296106206758881996 0.18841720297376826632 -0.17016450880103262122 0.025875280364192915911 -0.29703920573937026006 -0.564338768126540824;-0.21560402444025872359 -0.22254358706610249952 0.87541704233187156436 -0.27098484930235972046 -0.56426393764774174233 -0.30460257213099434237 -1.2260186376132384822 0.64722914101769946082 -0.44165612869001574792 -0.85853355138546072478 -0.4768481555479706091 -0.4909575760480741069 -0.06116944406292791625 -0.62754940433591088755 0.27182692534830515951 -0.73765888494227205285 -0.50843714723206068218 -0.28539214719068994874 0.47884139336602915549 -0.26872088854337899955];

% Layer 3
b3 = [-1.8899431857248074618;-1.7265959431976696248;-1.6056524579845694589;1.5102577908425920405;-1.0448750026354438614;-0.65217258785893061912;-1.1066080485762070929;-0.39819408503556957823;-0.16840021041103503396;0.12585917218253864225;0.19226935409260254017;-0.6381199823718657349;0.75959399213734224432;0.78399194712238917671;1.0030831488382163652;1.1587775910772979415;1.2177654955830856665;-1.3857664907354265704;-1.5883392507548135253;1.9145502254652950747];
LW3_2 = [0.60512352234720778732 -1.0431162834708864739 0.71125763224096238968 -0.4046124997197038109 -0.47656122271211687202 -0.28086695400579531068 -0.11019008837737705175 0.67930102561968008779 -0.79207798763186931801 0.2046812379990859132;0.74450959373314129497 -0.99705299404251779283 1.1001929155364467139 0.17265277071547313614 -0.28292278203397430714 -0.39296001741580627309 0.28095010577898432702 -0.4087629857215089868 0.28665825568835340276 -0.23597197479421755384;0.40042958641657055985 -0.85002863385566529431 -0.52393893619804021711 0.67756532779631195584 -0.036454448033422508224 -0.87727772146401228337 0.64073100731991239343 -0.2162844623864551008 -0.75488910083190774447 -0.14404452811022885883;-1.0448128241851784015 -0.45684958900213640254 -0.76514967987283877271 0.16205565060722884607 -0.33798977440784500059 0.24677207208491203083 -0.15739758814155443978 -0.69195431918933281157 0.8383800886970081967 -0.90267975930020505348;0.1900174821775403311 -0.55228890037875244534 0.8295806086369565957 0.75862689922679626964 -0.42643052361480526802 0.11809455772945540164 -1.0398450848182640982 -0.60924725812200009045 -0.62375367637061984727 0.080151539895269241498;0.19667170283817281273 0.28737832352977121797 0.98645667484788868151 1.0184982039138688048 0.58037227862421825186 1.1770893267078277322 0.69026208579124259668 0.79526791276842334621 -0.28290471913106324253 -0.36820277710841770036;0.43323082333493234675 0.53230006168591126325 0.32303603383772838686 0.18168996340996823591 -0.53753443930091793224 0.48459844659059914118 0.078308265590670403378 0.85786493840921262954 -0.15131265501373214466 0.57066851858540890152;0.6192742751982536209 -0.035313309376714702159 -0.66631614116308324203 0.60918821427549574299 0.41801338736500420756 -0.1474178109274079107 1.0520512585321049048 -0.014540318518674967552 -0.31731017215316487112 -1.3871118138654043861;0.43314507867789081574 0.57825567520419662859 -0.85591725603493873376 0.44256758548674973719 -0.67884399119497795816 -0.38592772146313386594 1.013739603961500757 1.0292833833687622391 -0.04452392349591468429 -0.2983134204491654784;0.32767573802214056133 0.12596252518762571238 0.64805619948414372455 -0.087248402309894196316 0.89337911184236462603 0.46193402299132096944 0.80066022544699599894 -0.5022644708751359266 1.1977332552396708909 -0.56833076460024412047;-0.72526868303392022508 0.2684403762093332535 -0.30000908893647837417 -0.12097378216839599352 -0.44296463493092813613 0.3666545648301792748 -0.65109723392377871765 0.23627225150469294279 1.295167445533548678 -0.6365675885253492261;-0.90416847373766517926 -1.0121152158005524146 -0.17458633294362593813 0.06561724095915480448 0.98165387328812636625 -0.17797706015216108177 -0.46734206669035949222 -1.0809800048960942487 -1.0634266926024438238 -0.25957594279314216701;1.3218179031148906688 0.20685661233518820579 -0.96989834568643729096 1.9458264706398415989 -0.28383874388022717339 -0.37193909152478010771 0.27000393189802013305 5.0291250387431745139 1.1523581610586755009 -0.90138109382384212775;0.21670368607339629552 -0.053344901037809561162 0.65985503327991168465 -0.68980363899281582629 -0.31835191343108432127 -0.55651732136829579201 0.80908110563299495688 -0.74522940922381031292 -0.27341178673258753618 -0.080232251969514861711;1.2397343453081843823 -0.54259647683973466492 0.90512621875891408063 1.2657707819341983413 -0.064322332144090374473 -0.38048791130460130061 0.30134682453505906574 0.18857641241711500801 -0.75915272950272849606 0.56137861038215952636;-0.14107791913662687255 -0.42408887999966649041 0.8638091715330997733 -0.71129917396259123574 -0.10414021426428760053 -0.50578203410171063137 0.75369948580792778259 -0.90966458347315759525 0.42904298916179578471 0.06309327129525033051;-0.036081703200701892298 -1.1091650107065482711 -0.056881755097074451766 0.41978226697170428761 -0.56496456701830444214 0.38837222092564460674 0.45201739027025855666 -0.58681544043334510352 0.76353469481701985444 0.12863655724793268686;0.24635630454482632112 -0.7002150743281437828 -0.79229006979655824949 -0.74076130322923638971 -0.15153021868225835522 -0.46930829398271356467 -0.73320042919544847759 0.49159228699442170107 -0.20041130660243558492 0.75534898544514816887;-0.81482483179140619001 0.55335417679592691087 -0.66126567952848713805 -0.58133271527963081837 -0.3174446980201041657 -0.26866491356184263317 0.51232440448152405388 -0.10894094600384734983 0.647317418688213575 0.51354487290066919147;0.091389435127531240544 -0.43339557184297988757 0.69047810989694313744 0.76950608447873702911 0.224285530401148403 -0.84269280601098162098 -0.73513835822913642382 0.016698156358562601942 0.1638214784783821043 -0.21764559382399109588];

% Layer 4
b4 = 0.30871695035358259762;
LW4_3 = [0.24126519232354382005 0.060085153851039956041 -0.099960323950216159461 0.40445746543221322566 0.37383067029192906805 -0.21564632323135685121 -0.058451163096704859823 -0.23250393219306345061 0.38802338276428866015 0.47412122051516258914 -0.6347662384021443005 0.21541203251258392304 -1.1544938902644976686 -0.36191837691802963839 0.61171660491580137631 0.3389179995348891028 -0.15807255503434608501 -0.66836939096017500272 -0.19509449622984714745 -0.27227004633015067236];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999931;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
