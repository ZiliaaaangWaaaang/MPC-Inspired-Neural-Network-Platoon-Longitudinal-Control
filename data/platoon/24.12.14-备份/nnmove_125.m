function [Y,Xf,Af] = nnmove_125(X,~,~)
%NNMOVE_125 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:07:37.
% 
% [Y] = nnmove_125(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.85918092085871;-1.99763696099884];
x1_step1.gain = [0.0522252737181727;0.148213484472979;0.500572177293996];
x1_step1.ymin = -1;

% Layer 1
b1 = [-2.4981500581237368053;4.7666550632779447483;3.633998817874929177;-2.8832740957262008585;3.1679636580366534737;-0.39023371457132993712;-1.9996386076123042752;-1.6036276948850964885;0.025357274395021164176;-0.032858029634744427561;0.018765797418619216408;-0.62818777458734498254;-2.4202251814030453225;-0.1772489360901957911;-3.5219890420591872804;4.4945786818555175657;-3.495036629848540688;-1.9275012668775590718;4.2038150925594504059;-5.0242802763580556302];
IW1_1 = [3.1526872879526686155 4.394377133892028553 -1.3789491786578691457;-2.8162182973589984236 0.17151446741265632956 1.07811213852267751;-2.2792466684400354282 -4.3417027725536136984 -1.2930674331464371285;4.0972861518263075098 -2.0132364419414261469 -1.6798174391171349917;-1.6129326344966306017 -1.9226305190201360418 0.0096891489644290451633;3.2384909975734998966 -0.026764112087957113439 -0.83703219016710173062;5.0658739250097788442 0.23532533686311765675 1.0950828197037056899;1.1339090766227681861 0.80276121452701809655 -3.3853111712591839044;-3.4610186110837166673 4.2328624150077800437 -2.5525908278573306021;3.6917100426701803251 1.9163879625072761659 -1.6501612874161606381;2.9030038872831438468 -2.5341264208824112458 1.3530150173339237085;-1.9649423261336955715 -2.1894060258456793377 0.30057514657247869083;-2.3666438605796500383 -0.8957248419677673601 3.5173004637041542786;-4.2971396559615300248 -0.96083992744644519668 1.2961720611385671997;-2.044088194177120954 4.5736708458688219991 -1.5387498270964063973;1.5859788636023604003 -2.2677079543932321393 -0.69312107936195244129;-4.4609362693002418965 -0.053494156187075529718 -2.3069005047201676106;-1.5762306500782794494 1.1389139195675672678 -5.4910805941296771948;1.9427176928102081188 -0.40575994762813505368 -3.2753228605970789999;-1.5909875303823843851 -1.7974350536314487314 0.97788813694200060755];

% Layer 2
b2 = [1.2778409121492222411;-1.9531806403675771033;-1.5702666354632017764;-1.6150548944577394206;-0.0040283667659294589841;-0.042104803090510352359;-0.047914661073273245862;1.0719604080578146732;-1.8473887179476728981;-1.1305972824293069046];
LW2_1 = [-0.73004858689552010187 -0.26420165664372752268 -0.45181708265555203807 0.42871514986755315801 -1.2049810761079389199 0.18847346900451833474 0.36965518600547758732 -1.5412678033589848337 1.9778440393961862487 0.86451639615622655199 0.96589176333871340496 0.0076335448174645152697 -0.22645769238087623543 -1.863368853127508995 0.37647479072414824497 -0.25315366315485765547 -0.37036678268751521692 0.047424894104147553853 0.85757500423168320225 0.98418804302585560784;-2.4908200711235082281 -1.6602288561055402738 1.0896800722376740467 -1.742771293183156045 2.8644782364480412262 0.86595486849057945467 -1.8896482354046852947 0.32667341215007983379 -2.1587235880207114036 3.0925736175434352937 0.35617703272489620314 0.20079271473830320738 0.8741565419178343177 2.1608594373479967921 0.11936864243164824195 -2.2967590738529208849 -4.1559649499785971116 0.87174724590548358094 -2.676556663977799122 -0.93018164787800394766;0.68368019291636084045 -0.078053440925257122629 -0.12569930202901136163 1.1339759020910791243 -3.1976752423670276038 -0.41128151850622707286 1.0682483163724667552 -0.36567140367730438522 -0.93479706570535259225 -0.064769597079369134462 0.56597074509707423484 0.21095051756032878743 -1.1870660537556461112 0.75011209010641288764 -0.38005407101862076491 -0.16695104963640203244 -0.043957402391303183886 0.15969698639691545794 -0.22370825155127618822 0.83574697295831168464;-2.9041857672297517468 -0.95213218331351467949 0.82672814217185797148 0.096748179763478950322 3.9860842210598907975 -3.4212337060686528467 -3.4007194994126521692 0.042873336157457725415 0.50970815180222450724 2.3077773636402207913 1.4391466342581689108 1.5690703307574627168 1.0588216307793341109 0.44724281164701401581 2.1607957779815389898 -0.1145149783230013929 1.3045606025239309123 0.19837912125219200887 -3.6014599801210227525 0.68860104160758528469;2.2237320412245353829 0.82232371194648223867 -0.97320718716056353603 2.0871457346106909725 3.7655924144212038485 -0.54143269928659809587 -3.5671583329445342159 2.0259115645287275598 0.1142125122584201069 -1.2871920637046074809 1.8399483301945833702 -0.19403581659314039776 1.4511303194715601261 -0.10096867250658601856 2.6007473124788944574 0.048141256239701342434 1.0592937188973441387 -0.67534102460253297995 0.93231156359649458576 -1.4555760485628412848;-0.1571374313725572569 -0.51472298627917956182 -1.0943194033965626399 0.13947745182825457833 -0.58159850334526763671 1.5804741505255106571 0.69625340013212422274 -0.55124394092422179803 0.43655845889790195757 -3.3777455495261130558 1.0310005986090446939 -1.4745524518224581989 -1.3804304328996088724 -2.7727621366838337558 -1.1651174001596322771 -0.06589998947007916219 0.30929269631527450679 0.88597515177038299594 0.22380976194057158879 0.25038019616196921513;1.3569159413737930109 0.2276654886406920264 1.0682168355260013293 1.7231593280274091207 1.1080741892649572655 0.12177989042813359977 -5.0450895136259248375 0.67478732714988742813 -0.92959657815833052208 -2.5058387139809403799 -0.53136480997130908221 -3.0662261469275629011 0.71759539030935115544 -1.6817711800895784879 1.4051563019440969082 -0.39259840016969316245 0.015342852330743705566 -0.9679632891224405622 -2.412291046237913239 -0.24007133321830911865;-0.12729562521819848264 -1.0263284693431045103 0.52310445343664502271 0.25521176833581005194 0.91261512200530137129 -1.4185116561176294159 0.47149888270891082698 0.7782872676846261939 -0.2069625583619899567 -2.170451570785599138 -0.70040291808382049155 0.50760805074251669211 1.6472713871411568398 -3.2506875811910735941 -0.15829204658980516873 -0.61794823661555398076 -0.47149052134519436885 -1.0012801313326082919 -1.0630025078601754718 -0.8617615484401600634;-0.19077468065394051489 -0.58758982299042705755 1.5112566091838570692 1.5265043498163111124 0.45656689465644934023 1.0319206339045183807 -0.17089633379846536076 -0.9280614084053484536 2.221593831183682699 -0.62238044180841500808 0.56090947695807080731 -2.2144896408664713761 2.3245710769297596165 -1.671773890075807012 -1.6223876007382602715 -0.064836500758021858859 2.4343348615402633506 -0.040977370317488763518 -0.78513541311316059623 0.37566658768569910487;1.6855669786455640402 0.32174063358519944256 1.0655527699112636864 1.4059602305396903255 -0.23185757111319219015 1.4715451883211052575 -1.5930319507959087577 -0.25450551508494079211 -1.2447049052593264218 0.62823446780123792799 -0.7282370585652190309 1.3397297190626209495 -0.18712258242900925431 1.1394726989935239914 0.50240795769584267738 0.19662511462524670525 -1.3581066376899855186 -1.7464879410802613968 0.82392925814987916233 -0.61549421369793333447];

% Layer 3
b3 = [1.9576354207717856504;-0.54855006108612824889;-1.7182459860413339392;-0.40052943330272666733;-1.3655769288333841072;-0.21054315875522891521;0.67333689468961088753;1.3885130441710180627;-0.41567683722336662422;-0.64991326014531058952;-1.7080428587673033292;1.7439129668215760383;-0.46011868547933454376;-0.73724263304870230051;-0.6680796331803566801;2.2103817142293564757;-0.88765860208483349236;-2.5866256938543248367;-1.3236512115907748122;-2.6228705696032887928];
LW3_2 = [0.86087902903719848435 -2.3318017860956072873 -1.0130412054572650593 2.3531278428454802665 -0.59442921718391994457 -1.1178838781175539641 1.6437798942306591776 1.6193231746404621596 0.81457722920456798743 0.91182046717052733786;-0.12567075241099270877 0.023502908131789512769 -2.1238978708824411967 -0.39698173697095412438 0.35126707673601864634 0.53796615295788563493 -2.1854713405159218453 -3.4958362018198720911 -2.2503513610538217193 2.2412087183722322337;-0.39478083090502463781 -2.1883073349532118357 0.74451978240336869064 0.87151521615259575082 0.016741606574844580813 0.54341744345788456361 -0.91533932784846638864 0.43749635557271021602 0.13031547442537291803 0.59311318640568810867;-0.20197253658367514406 -0.57620528907352164261 -2.2115274741346300225 5.4073108450266342828 -0.55561667105812362344 1.3122560915357135425 1.2774465563193557749 1.2176043541047014696 -0.42615777216668099259 -0.2043331699729593609;-0.97608636689362993089 0.62440278572319529715 0.56158924623765993367 1.6396069032525302234 0.52044618768279182763 0.68399824291245736596 0.059607817792013059743 -2.2186856685922093924 0.85461810304268825966 -1.0275655004504189449;-3.4006009375746644174 0.5489990208302752972 0.5031041102757620731 1.1443003437096792574 0.41582667160143771401 -0.13177849914473141468 -2.9107216220511289428 -0.24228554035624547125 1.2659404820005644154 0.82236638036740661306;0.50306371474259581333 -1.4159368433276553478 -1.1194948173665570934 0.71425385028688592737 -0.37011081543325885512 -2.1753976178866007984 -1.3163766729291139779 -0.22973155935185163301 1.4115229399224131779 -0.46453692191407419676;0.99773649795664831608 -2.2018006219587968886 -1.1886955894130091238 1.27062145635518009 -1.0783538691335630144 1.637963194566573577 -0.70814753656518381053 -1.4072516588729084841 -0.68404042811045417949 -3.7603108196141268316;0.92200997833187348096 1.8721753957256539458 0.58055415170606872177 1.189831066579463803 0.98424194214765070576 0.12924346725640090128 -1.9309096696773910828 -1.4501004500789487217 1.1209797190607229123 1.572534551069557418;0.57532677193235171043 1.5185515703908998297 -1.0812814335210703121 1.8050780834794595275 1.364451287610628949 -2.6542176456163675269 -0.70424146664929421213 0.97439979525071906963 1.9046459285180425969 1.7059330960692420387;-4.5507897808146049456 2.3595865861197813373 0.91408966715777761891 1.1053483561490973219 -0.74693595887645514164 -0.94041862167224821167 -0.51181039123490879028 -0.12120951104765441408 -0.7264732157347785213 2.1736048581985527584;-1.0649123574358294597 -1.9225036999437767893 -1.4030822655486521189 0.64184377015981519676 -0.65592281788407247323 1.6972744511550383884 -2.7640989041204977461 1.8171224033348347682 1.7884588628236590679 2.3325853723623937164;-1.807533822458061934 -0.84891993927368336603 -0.86845329761037659555 2.1069371538796111132 -3.2614904130109882985 -0.035461270040377787516 -1.7551679831553004263 2.7269756710455590465 -0.15442591988168408168 0.57094485862919841512;-0.3942632540501450622 -0.58352251474440597345 0.21236117527790152049 0.48682461478352206941 -2.0023820721842233716 0.17501135877980561473 2.3734012355222864343 2.1666260526732350478 -0.012559450415106511445 0.93850829049457262787;-1.0727274022962738353 0.48600037573952370451 -0.74869469691553314217 -0.91873555068364964882 -1.0033366931479801298 -0.28246686953848726409 -0.25981562868251356635 1.5886750951451904523 0.262149599299834557 -0.34102613425526362434;2.9086618602354081808 -1.852973237684754082 -1.2289013024991497502 -0.55935910332422411617 1.6269971809991181644 -0.18707356366558916538 0.74041320499046803238 -0.24889083188352381648 1.2930520617258078886 -0.78692965111068735595;-0.63162381713574278219 -2.3035326158320597045 -1.2831397195293354763 1.8704749499559643056 -0.13769417744644743551 1.9622688341853389282 1.7488087011128838899 -0.97035323160187558766 -0.31828764927062908052 -2.7034372922453022703;-0.20810537890668154293 1.4583431767908825449 0.60180638908260053466 2.4972342705267069896 1.7282580458010068369 -1.6730717444281604234 0.38852160054336415396 0.42308108657295001587 0.99838557761260537937 3.3466827893322972365;0.54622398543990302588 0.20255975116934363256 -0.76275908214030818666 2.3394448136998229337 -0.60062807776619753231 0.85111288740272916797 0.50105518587511588269 -1.1660614052492166426 -0.47351310848465777426 -0.73242644574888648989;-1.7984119919240266761 -0.26656281090508554543 0.78986444138709965834 2.778446968505026593 -0.8944119664235410383 2.0444911389033384452 1.0392886384296982083 0.74150292351361413168 1.4949905645944427945 0.55027583350245545812];

% Layer 4
b4 = -0.5716985805371783691;
LW4_3 = [0.030072374671965440562 -0.17762944926989671091 -0.010955379343209975529 -1.0578789552278744512 0.025636573303568926246 0.0082176182607893027976 -0.021789299247154642059 0.011285528060334983069 0.0067354320721308832617 -0.00096778924807078932011 -0.01090864176313329284 -0.012988610303611893698 0.023748949383025189791 0.0068389797805767224212 -0.0055452472222290247889 -0.012905747417277469921 0.013363010914022569256 0.031185545568711479231 0.010665312076575655248 -0.78148588618840519882];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999931;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
