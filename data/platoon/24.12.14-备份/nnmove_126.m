function [Y,Xf,Af] = nnmove_126(X,~,~)
%NNMOVE_126 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:07:42.
% 
% [Y] = nnmove_126(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.85918092085871;-1.99763696099884];
x1_step1.gain = [0.0522252737181727;0.148213484472979;0.500572177293996];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.883490956477151812;-3.4711007140599976495;-2.9430141162124265897;3.8543804353534190099;1.5529473873767507541;2.079621047202591555;2.2349187791062221642;0.19655515864841552331;-1.1248480306662018702;0.77054723133016900238;0.23479880362473729005;-0.23436095441505291892;1.4027986341056071229;-1.6442332632319889285;-3.0534813061752146268;-1.9211571630880204253;-3.007857508458553486;2.9748761520995574692;-3.5353008239271357382;4.1952362683256891884];
IW1_1 = [-2.1306549896435083014 2.1516244831177453456 -3.0360612939544204814;1.7018122739082248707 -2.8222792372859641929 3.5722536628129741842;0.33887118194037718633 3.2794704858446190876 -1.6404811775250929262;-1.4284449597436081891 -0.49707425967301860359 -3.7520361142525877618;-2.4432836815333693892 -3.3228981414249916249 0.35735611604451988921;-1.8369202451492692152 -3.6840609693852526263 2.4914170725534954265;-5.1254699182808343139 0.95103665994707253795 -1.3482151006021927397;8.6566186647063929627 1.6359131747139350477 -0.88082797043760552302;3.3034894743619274138 0.86527568428364609598 1.0473985128764067287;0.3904888568465576526 2.9697599230530413728 -1.8215564669591561842;0.41555285453253060224 4.0944943220530767292 1.8433556910091490888;-1.5973338718191207874 3.1708041303777290132 -1.7182769144924701088;2.9366882539426009124 1.5099078229880595892 1.0432653424895335093;-1.043408882158717077 2.1742245748079551682 -2.6076394905511142142;-1.9608038624824315477 -2.3507168394959276903 4.0548097016884447896;-3.7591254768765547389 -1.6402449626027661989 2.520011394269156213;-1.1431485946013333344 -3.3653073058350981839 -0.19164394528887737645;2.8694293158263208809 -2.1752562388636471624 -1.1008439469508779496;-3.507101532948190048 0.22180535867757150692 1.1314965973149546663;0.70482195489027110735 -0.63845534354671096278 4.6018650910956200306];

% Layer 2
b2 = [1.4766641801518265442;-1.3581590835936971917;1.3163005782050618553;0.61286034776733211427;0.47548066609790773374;-0.037098030137444136523;-0.013182791649676013634;1.1418965851617002283;-1.3596081829666468721;-1.6049171688755046183];
LW2_1 = [-0.027739609133890671261 -0.075457661798362260508 0.43212962301254415065 -0.061152006440260239795 0.16595189248720260133 0.55307601739445533262 -1.186209294235049283 -0.58710527976964621555 -0.64049113649218258892 -0.35577005149013174456 -0.047453502013508432056 -0.23034580782158434187 -0.78401403564910332467 -0.1499823972672343908 -0.35502447966228878329 0.21287871208052283611 0.24426315932679890097 0.23462532411781406028 -0.32231835945811654343 -0.35674130548882698744;1.2515448464560190445 0.79037615706852570874 0.20279573576763579301 -0.093611296064600751921 0.27035672999782717207 0.20754819815491112878 0.32922746317650630754 -1.1510118738755483747 0.023568928768179956551 -0.53321931107900211178 -0.51236409433912766254 -0.0087280690464374716814 0.45123117797505757354 -0.32420228713483512095 1.1948627575610606399 0.64364590407085642276 0.11175322972883235118 -0.74679792502067043891 0.4868148102893747331 -0.26072259500705713409;-0.0028413303037009441515 1.3466304145157845795 -0.3460625893704712408 -1.6110562864022257568 -1.1997903203546433915 -0.19914453818922206452 -1.5309723514496920149 2.0996806448991307548 -0.046797501949089687079 0.88758763489869796359 -0.31112696046715171416 0.36152410279742991372 0.78075155753122127411 0.18663588759202065503 0.4684067371986181394 -2.17046774465656922 0.46779865937723330571 -0.082878672200481603993 0.24159505068289749419 0.50294273251844090478;0.036544941827152954694 -1.2365570913879879722 0.085738783875590224293 -0.011729270752562494934 0.4535947281802271136 0.22645714972717828628 1.6814466875072067165 -1.1935717964932006652 0.23563420029625734009 0.08112940795756042045 -0.72001629573303094212 -0.31202059656962710665 -0.23775535262833077943 0.096940592740435330144 0.13979753458692414925 0.88408434508968225529 0.016059018077972865568 -0.44491180872058366802 -0.12571861249552607198 0.26307053452672296556;-1.590477241785099638 0.27856208195677767403 -0.56804406223700643075 -0.36093849066550348637 0.16475654908141829091 -0.26504232588432435902 -1.9594463046253363103 1.3026089167625172216 -0.77836972787367264548 0.04864171604866055626 0.87646005566887952298 0.98096497780765401497 0.13478396666257225212 0.12823117089823560244 -2.1422130417643336919 -1.7864960850083417832 0.22661093815007110619 0.75319574888590812289 -0.51720150014166743624 0.53681770442756682193;-0.38167115681172492092 -0.16099657880856124703 0.077590414305416188778 -0.69450613031402186337 -0.0074845833543702097734 0.52672459135359150917 -0.21578978818469379819 0.14111849985562971432 0.0093721656399675893484 -0.91702251766050468795 0.4693294002967344225 0.29607821037663234476 -0.47672034622782599733 0.17332450201673077483 1.5053023387866000249 0.53728739335300323976 0.23220682194524275288 -0.24445010786871457231 -0.25584291798551694885 0.33795154552721529129;0.72633599374087842726 -0.89924721615388958362 1.2798338913416762441 -0.17946186391358925905 1.0332863140668258062 -1.2531001100528176284 1.2584808265245621683 -6.9506105838013043652 0.52639547570707456714 -1.9290568518196127279 0.83884543552632107044 -0.80185678384984659939 -1.0134988607248689441 0.19423005556891634327 2.2856928900307513786 -0.43344800896354196418 -0.78657916685518214361 0.34165133029012889621 -0.5408641767505821818 -1.2479931276361946324;0.25026421901649659185 1.2801117577548999371 -0.63412778542003866988 -1.4124481417411183237 -0.33184980408582009925 0.61208139203023992359 -1.2247424215474040921 0.82190289703471475224 1.2541429335684901591 0.65164935166287785151 -0.0046276369042346958763 1.0405122470272689661 -0.30468653972087272885 0.07162720124827465229 0.075280344464568021978 -1.3625118030888345722 -0.5229256180698265144 0.43389080204112479011 0.43234659518725832017 -1.3418074150542145251;-0.95910268842920143317 0.21346136081910263571 0.015005726040751874578 0.063345672040625133903 0.24241800258116780187 -1.0520571523878843312 0.12441036158418043722 -3.5824703823772106048 -0.84234024505645388459 0.044551778810368730666 0.77797795095726973713 0.69610906256681404081 -1.2799831974234829879 0.70945549662428097903 -0.2685970975981894493 0.27470128380354319475 -0.27054465000292843291 0.10124618270351087856 0.34090914579345682478 -0.47032872396504099566;-0.54989196716381971708 -0.5195022215177669267 -0.10861370508859315154 0.65589171683227742715 0.15063655064964623365 0.13584364880884844395 0.94263565695589945914 0.70594493797557045234 -0.90814221841622722042 -0.25556661579729067491 -0.12118044602015140554 0.32249295394402860415 -0.39930294060469895268 -0.44591100864987398555 0.74410337941209336865 0.52230175896988417783 -0.035842681430319801861 0.14625051569831143405 0.4122039896037947293 -0.67795598160289505252];

% Layer 3
b3 = [1.5824046213361275814;-1.6430522835491339073;1.6037824914044076507;-1.2808641491823518077;-1.1450644541363723672;-0.43816026857924134097;1.712927714813688107;-0.56070904049104131062;-0.64616663516619221586;0.13124296624869091765;-0.068823682510126937828;0.31304900259022450104;-0.29331012448489651723;-0.97572463279589782825;-0.86376089495988583877;-1.7771456402644012496;-1.5268089610678750034;1.6220025333397041223;-1.6828010700096651675;-1.7609520616413736338];
LW3_2 = [0.9716846219145131025 0.84069960829332113228 0.048696052647312484951 -0.025056441133592531612 -1.0272546389715431214 0.69537170366590228543 -0.71525062312930720587 -0.62160801085148653655 -0.30276876854140638562 -0.26527730517454972681;0.64643920675529542574 0.39401560038261373986 -0.0758298383623848965 -0.24742264965921875741 -0.071104119204276533539 0.81590889378829933865 0.59608133760187764771 -0.58783434530808020835 -0.80366065643028250509 0.72281348576188053645;-1.0777358216398880142 -1.7132327668993154735 0.74555706779660779748 0.057205620944268169292 1.1704038321002889766 0.88712824106907561816 -0.56670943092030534594 0.30949682857126159519 0.30078408385887051013 0.70195717131914547871;0.14958325210723794063 -0.4863911920497193675 -0.55825110638377350991 0.63985263994457231007 0.78690128732071917828 -0.80507965410605530909 -0.38816686617411222393 -0.56726427106679533363 0.30698802294608901198 0.35741647901039208524;0.80950569735888355805 0.13010024581381712805 -2.6059496832289066326 0.41500398023563223049 -0.48622334560536867309 -0.13565863038172865096 1.6510641518853748089 -2.0169668059062306753 -0.19641703113965436334 -0.31923307250429494575;0.67034315681629741412 -0.176679686664918012 1.001043987122312684 -0.67153108472168576704 -0.25824233205965285709 -0.056907272727667185253 -2.8750734080078128585 1.0656385711368796532 -0.20487701772256874944 -0.82837971910593033442;-0.37114178951352544411 -0.34548997952258114763 0.027735064466928409377 0.32973415733241429049 0.82922902162240397228 0.37406376156627396679 0.46630037730886908509 -0.60589117899522482169 -0.12508379118835541433 -1.5290361237839522612;1.4518623490408368859 -0.15918554255382355578 0.92350405852050521105 -0.18516861277597562729 0.32259175699798647852 0.2077106871349070627 0.27946720563945642857 0.24124999164485186331 0.43007752435345719677 0.31076820253861858756;1.0659497201999628135 -0.73667196276328295035 -1.8925589810375123001 1.2604516937607674887 -2.4617969249693052447 -1.5007721909946820649 3.2998212325039073534 -1.7022783086582073953 -0.81607853948682917977 -0.51075298639169874892;0.72872546747304511872 -0.81627472305784509743 0.94830754957533125449 -0.59299480175955288086 1.1848577115209260047 -0.29258112469467723038 -0.55098379018636312043 0.23841666437975828075 0.46273917157312116633 0.27842643118251864109;1.0990904078066057181 -0.45011652555098180528 0.67403445752182922224 -0.042721782963017901347 -0.34067533640888442159 0.51973376627473455436 -0.059710211697292930877 -0.59160619367284361658 0.52557936740591570945 -0.67574380933958855255;-0.10623296462414731633 0.33717433895758580631 0.62110914790660876061 -0.34720673259558421098 0.68303722089659657524 -0.10207179600531587904 0.48002728734059946225 -1.1477347869432148464 0.52424911907573312764 0.15602519584494020655;-1.2979182219241343077 -0.045397012293992553 1.3779389475420913413 1.5249007078901957168 -0.48304983902617681935 0.59689009045293472955 -3.0187438573109099949 1.8920850000411186809 -3.182629342444409648 0.94946846520986716289;-0.5621064142360427951 0.73458531761471712596 -0.079013775562720073298 1.0301390056817951724 0.0043532130831763528322 0.4678860194996106725 -0.71194700064264060391 0.073709895801264233017 1.0197732924659224096 0.048289933195106625463;-0.27812995905240561756 0.58006273221851811783 0.44674278282645701887 0.92999028542401185327 -0.080655456005921319362 0.84282677418246598755 0.86584821043733606327 -0.2236246005855615504 0.01238058440177575506 -0.32984795624362600597;-0.31367326434315895289 0.39320662161434816184 -0.28331181279739769963 1.0802815508921586041 0.5750370499310013539 -0.4207675641101905617 -0.20269405699081854966 -0.27302933170462145851 -0.098570338952455746617 1.040032949855422828;-0.21086887197761680635 -0.71757715258021337323 1.1367592817656664295 -1.7132391457238658194 1.9517299928922817731 -0.24532566395650276525 -1.7240515326378695882 1.7823205140303708394 -0.7895184818456550957 -1.1947434004888481951;1.1177259024569505819 -0.73207153082129905464 0.024673729635779882013 0.046112006157800686235 0.055095148253869942467 0.57924631889431044129 -0.79070805657103093722 0.064362027635949906057 -0.57110289788827683921 -0.066838924176310626768;-0.67236368837805893239 0.49406844903578411854 -0.91095436734904433607 1.0132589656216257623 0.64540979610048743176 -0.29132330032900183303 -0.63817207880969439859 0.76716791994936206489 0.066604425856218021917 0.20639055294866520684;0.37722733443368849926 -0.3823659287443753052 -0.010423318540199715682 0.38448067107608874249 -0.77104599580442234608 0.33551910202971008124 0.92690182092345618781 -0.91908456548367600814 0.71078581253765926729 -0.67694857290214383028];

% Layer 4
b4 = 0.004753795388550603046;
LW4_3 = [0.10337758122390967863 0.0068133236062784150941 0.23319971874957493019 0.021573235698036447722 1.0074568085192570077 -2.0935051801666024751 -0.44498538830353501217 0.039307308279728433997 -1.4711955453919196568 -0.12493991444279914371 -0.14396646288873699016 0.0034017669530047992855 1.6627239569028364752 -0.051690913669112659168 0.011239236284869009996 -0.2775083140202910803 0.9205886442392814395 0.17772718899415881899 0.0099427776416898781819 0.079324161173506366196];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999931;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
