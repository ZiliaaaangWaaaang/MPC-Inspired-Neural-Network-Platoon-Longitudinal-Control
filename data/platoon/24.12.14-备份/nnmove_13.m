function [Y,Xf,Af] = nnmove_13(X,~,~)
%NNMOVE_13 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:04:05.
% 
% [Y] = nnmove_13(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-13.2925490923537;-6.70139767883548;-1.99738196042707];
x1_step1.gain = [0.0638195875959219;0.168202204644631;0.502184479042526];
x1_step1.ymin = -1;

% Layer 1
b1 = [-4.2096779040648222292;-3.3986692055628910936;-2.9593822320599807441;-2.7764601204514534061;-2.4030817053020769869;-1.9274449913517424093;1.8815364526357392094;-0.59564232585223841898;-0.52719959174801789281;-0.58228283564613403378;-0.55298544123446646825;-1.1588396714916222585;-0.22560972137919829694;2.1811898395983910781;-2.7857022815863445864;2.1612088090246759364;-3.3001543842451397381;2.3427207767498781088;3.1044288496272214317;-3.2784165544718426588];
IW1_1 = [1.6685279593682726951 1.5939337490527671903 1.9788150824364461045;3.3260607632221304009 -0.68240896378430693225 -1.6853628794944746083;2.0817322514136264999 -1.9661375782962344783 2.6686583835277550847;2.4284514274308452997 -2.6055741761136759216 -0.85182623756162612061;4.3636229076862278475 -0.17320295272113084284 -0.46597945221573239261;2.2317176954291184643 1.1023092767735847008 2.016776064712975991;-1.6428970678254275484 -2.332661323342118731 2.4606939528330928901;2.586896898751442464 -0.1032323467288938923 2.6002827428202843763;1.5525174734812761113 -3.5989283437734695958 -1.875194415086673505;-0.50754011154089850866 1.5989501851003102839 -2.9608668580325838704;-0.50633411215693435725 3.2922472094398207432 -0.88233210856911814535;-1.8174825401060903385 3.2932924076739178432 0.75872941848658426167;0.063187608553059410044 -3.6808576984663727849 1.9858765628286196847;4.5549822506933885791 1.2831313273650692963 1.5929815550483328312;-2.8478244415083815433 1.6249941669336021022 1.0332741110087309;4.9182306731761800123 0.64957226220499220126 -2.5006399242144232709;-1.6782200016922887986 2.3259089437095399333 -1.0706498502935417605;1.3688834382639225584 3.9702327800849914752 1.0737021681592451294;3.7842355875990016933 2.8894896276600516849 0.70526544440968141902;-1.1358197422673732557 4.0716934803081148431 1.3959969260888400733];

% Layer 2
b2 = [-1.7370365065977169117;1.4303850966239202158;0.76567156229079391672;0.48192926182508344368;0.21379713325053265049;-0.29792822316392358895;0.016872549832214915611;1.1716003582848497633;0.95705892223941002595;-1.5305218765096213485];
LW2_1 = [0.70533058026352157821 0.12223058616793294751 -0.18480556988279739361 0.019712647361440054777 0.45853166310321841204 -0.16501965778787058836 -1.5826241248990156052 -0.63777828553752957674 0.71699845564839814749 0.23202565130590860343 0.94532896293219204065 -1.4146181014812213572 -0.20642620592514776545 0.85274681053280587673 -1.1429413433398774025 0.55595209727722250115 0.79105041477764426183 -0.4306951531744164785 0.22615649385107583491 0.87381445682571456945;-0.56765722227016202073 -0.58775941778625773182 -0.71154563778353197012 -0.21278755320754128011 0.24741211052037986873 -0.27713415774259908542 0.18628883054763428762 0.41188215738749567318 0.1552918315388036874 0.42490119058655234641 -0.12566448655334158668 0.25111906698765851242 0.46655822280860559381 -0.19417431595046319437 -0.79263040563718489828 0.44630238769430818913 0.045177315596851952417 -0.17891943756374406593 0.13894236078227867326 -0.69245411443406923446;0.33288523187803037429 -0.40561291412948236035 -1.5364136676141979532 -0.32943353321091728425 -0.19974130588473415493 -0.80549073548825944613 0.32581196986392008119 -0.60516439702338742368 0.18993532321614722824 -0.27616059060337189157 0.51827247650245544808 0.028971904527359874232 -0.26273967465263764476 -0.36841704029070260207 -0.22998134944885009756 -0.79654495635867683667 0.57790928820233666841 -0.45319071777163411063 -0.92738896984873908647 -0.39385199378145702154;-0.69887420130598365553 -0.47857261084285224184 -0.1123452069432776812 -0.64182079129939118012 -0.33021440285262931846 0.14838575391563632588 0.60114031189403405175 -0.086553712340863189767 -0.24037615605520751272 -0.085956101130042747438 -0.12945741544448971516 -0.3482656952936034056 0.814489512052273823 -0.50215247902938420221 0.27216135380963246693 -1.1303438851997085202 -0.73253709177582781997 -0.42929883612458680231 -0.30465043408199943276 0.24077729404478306896;-0.26832801442361919886 -0.053879085258740341824 -0.10121776707393057015 -0.7603535220427877217 -0.81407145699279426232 -0.16243672694620592267 0.61487446709402959755 0.5025749517449928927 0.033405944344625980447 0.31735629618194188817 -0.28856913227280273082 -0.61447523634423573125 0.24039876158871922862 -0.21297243230715670603 -0.3209570578761462567 0.54818063763180857606 0.151309419834141895 0.33368340817011410415 1.0101069694058311121 0.13520058953207714225;-0.32450942168447172165 0.045919847506992302055 -0.61457044792159576385 0.43277111826560993313 0.45143324000501117155 -0.25395455948410805558 -0.22781478211135661183 -0.79707297613343530696 0.37255302557780062278 0.18058558460740481433 -0.14598771060492204965 -0.033922814473668433388 0.2194916098511392466 0.16900742223134196385 -0.4267271740228646415 -0.0091371746006580229632 0.36625526766825361458 0.5077664444055521864 -0.34975492506439498364 0.028908110075647024118;0.26540869876663980564 0.24499537501865736866 1.0713210690997385655 0.15534770733560571143 -0.0048855817465201989078 1.9406098273641967378 -1.051983560500084014 0.5856760497705253421 0.84917454675241810236 0.2741311122934602662 0.83336529851800289492 -0.51163553009171147679 -0.92465643026105770463 3.4935268534879257984 0.6099509283367122725 4.2164531012733927895 -1.3081989829788327473 0.33603481096568788011 0.18629933853748553707 0.76244142690706162568;-0.38908839043100573729 0.36489344442208276886 1.4400291595738854422 0.37970841911651270761 -0.0024728019301224605543 0.71207320290308973032 0.73875819351839333571 1.0102152704065343602 -0.46463946720284626801 -0.11903215836569112918 -0.17737076767944956468 -0.35031044798273708318 0.093998420179101843663 -0.29908289337094895455 0.53912164463009337734 -0.56428400982922100049 -0.86304353041536230329 -1.0632890811861397395 -0.18692491665829977232 -0.07297207827777886513;0.19110453684289396836 0.098142731105518854484 0.52037404694314470799 -0.12032866572428063678 -0.62589696943971140364 1.8160295927721177289 -1.1652078376520631497 0.34010980621337760788 0.75255768047639293172 0.12037755383636783435 -0.16741402642031591452 0.10550730506205203973 0.41757367144806117887 0.080712768992728264883 -0.66747412849629339515 0.85634235733673547131 0.86059152382596848518 1.1898089843987369463 0.10530766806785760159 0.41093574016659201176;-0.13481769571784538164 0.44191697895147930009 -0.11077325182509963064 -0.46941851075510471203 0.40367646791703382103 0.16401383766201105274 0.62808633637702859787 0.33799483410878961021 -0.013242891288512820963 0.83947503205999529641 0.26759602112977970423 0.27694746271559056439 -0.28192171890678258128 -0.16256400182907548846 -0.050868259217491378077 0.0804032744361002083 -0.27375124067046407994 0.24043353602541009395 -0.012315773445892413615 0.11425906435143567963];

% Layer 3
b3 = [-2.0007934328350680531;-1.7366147074013180696;-1.3482487053141642974;1.3299372421587065674;1.4625514719870347236;0.98740353889777010554;-0.84137565061159169666;-0.63135729174981602974;-0.13307113180131374675;-0.083797690197721486083;0.038768715167259007459;-0.011394351518290520356;-0.20515961918263930785;-0.65367911028039726862;-0.88479678001466954829;1.3259917121806168439;-0.94714863272739791;1.5564050677763265895;2.0159343325309899697;-1.6499025725997369385];
LW3_2 = [0.16536802642815692788 -0.35990449668543522677 -0.81641045327315120428 -0.58386530539345526947 -0.3476259818408133917 0.2843148143816625617 -0.80618780300680026318 0.07060937292494777473 0.67274690674806236768 0.13003201678011963582;0.47318527557605533085 -0.71666362091235902287 0.034104800781523621211 -0.48801339054009140739 -0.80345270946105573628 -0.69363820315928736981 -0.63712366148508781105 -0.7848615953012435531 0.20766136347781072313 0.68511802717698544463;0.4180879238591079794 -0.49686642004114184301 0.022786060255855222767 -0.8014797752205924386 -0.56440032194914768748 1.1508733313658368047 1.117891625747025719 -0.84317898476755970272 -0.29835064610182876477 0.1901468021085013782;-1.0148242719300057946 0.22325863981561419602 -0.3652877425216314311 0.97959594564783214476 0.086152532744650553442 -0.080190303621689384972 -0.010317932294220247269 0.80858112721242825227 0.85940626143356224631 -0.29529222951809314113;-0.5191038170078005054 -0.42697663364590293655 1.6125791073138433518 0.31278558730005368016 0.034699633692609338498 0.88156924580408713155 0.56098290823953755879 0.22053194078350887852 1.0678455654226350902 -0.36058093966963039589;-0.5499509710059429235 0.57261058821843857647 0.685697954012378319 0.49476095363957300899 -0.25979670118717179683 0.04581600423996036453 -0.58773926695576472756 0.80570222537261260154 1.2952167733625568058 0.42238337476963089268;0.5952796545480555368 -0.36578914816433688584 0.57799324235496774005 -0.74606147193223337766 0.3077203868041129553 -0.4566470274619145453 -0.049060786039075307552 0.48750058969702647627 -0.86878561238352847163 0.93727126749449618526;0.61691135601289259771 -0.81971298488116417502 -0.35757000835546298712 -0.31126604875180113874 -1.0776380861381178455 -0.65001863822259442482 -0.73783449042183402167 -0.19544589989629260196 0.022530608796755710599 0.69717573967366441856;-0.085203295711951038127 0.045279952126133428403 -0.95296852562745215653 0.34207951866141117492 0.17510400544128376654 -0.43038795575599703147 -0.44843361754800187269 -0.32439355833048039157 0.92924633833248604375 -0.72926929903856874127;0.60290040765188190885 -0.60085597197347406784 0.62736056497024772494 -1.2854544109465069202 -0.34296036108427985223 -0.49611784611445786108 0.69665376545403134845 -0.13216019384622784694 -1.0099650929173087377 -0.71291521515344991045;-0.035026696220524920766 0.033280691368906004102 -0.88557478206129180975 -0.25049462369904357262 0.18552231037165695104 -1.2459755738833535599 1.2186002925608705461 -0.30931926487124494773 -1.0397016607892295426 -0.51643612153257900665;1.1232056762843471986 -0.097459319725460777373 0.074619515425492319305 0.0073019943731671655904 -1.0643745819526968521 -0.60845961557488659199 0.31274450752033755574 0.19047413284696340652 -0.82774104086344135744 1.0098668761239226743;-0.64245331478116118884 1.155086816946469197 0.60409929025174047279 1.0932393958528647815 -0.5513502802284855342 -0.90189361153772618085 -0.62898156542193472962 0.41317199518051589413 -0.49898892989481447025 -0.29556388385033588451;-0.39757964927769023911 -0.60853250327893848581 0.34537948863362805119 0.059166200620356275419 0.91893072987330581824 0.13431983855191373389 0.84517937718100843991 -0.47480404451587437942 0.94834157688694187271 -0.63250812918213372704;-0.77644639937812975905 -0.091620506077709107373 -0.72753806693987066456 0.068044001826290695378 -0.69417497985538778593 -0.82025113709739327916 0.66504265516525506996 -0.13831004975164795656 0.55796715792818007973 0.86226821217132465502;2.2036844731293028232 0.19754711474650191172 -1.7985327585914856474 -0.64648347245179826892 -0.31920586897361891143 -0.30025748113909750403 4.6475113939044208067 1.0702771936752044635 0.629973942067631687 0.4690071292470830433;-0.81345340748335914771 0.57738295335766276484 0.75981516876951271655 1.0034921751843919324 0.44284893300421540596 0.69217398067036062237 -0.075351049753292279054 -0.14268246159313840993 0.44476073877628358177 0.50084062533486961577;-0.21252473760331075381 -1.0197425609261936419 -0.74249695620208944202 -0.28374556357788144334 1.0675572799681998237 -0.26392731553580939252 0.50241953331828470564 -0.031902450172273381923 0.7804479518185480913 -0.44528225835932983001;0.62679756067807812503 0.67953014571415149003 0.58322750063311545876 -0.51347743659788380732 0.52012166729246078756 0.566199375030887464 0.1496836052869201239 0.24128182796652464237 -0.2571450647312367721 -0.43988031613671912945;-0.29796836496671003092 1.1174735845818688507 -0.051385515772027892667 -0.38718564143297851121 1.1575889644990713379 -0.65617037370318598288 -0.17506868187393595515 0.14476146193898270509 0.75391209041893425535 -0.59553412825403773123];

% Layer 4
b4 = -0.42361958292323548259;
LW4_3 = [0.40154255638997848887 -0.76237316120006515252 -0.53436274254500437664 0.2687624058388694559 0.60456735432425379173 -0.54492793420189422626 0.28291000944652788807 -0.6457569399299227797 0.13133125346274734935 0.50140344306785888939 -0.24743784321103073909 0.36675286119644279204 0.058512932388795305116 -0.28933887759772497494 -0.0036882425293291555904 1.19943106138700184 -0.05637347052609248399 0.47034320877273555483 -0.36521141592982886426 -0.2671107236804250995];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999945;
y1_step1.xoffset = -2.00000000000019;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
