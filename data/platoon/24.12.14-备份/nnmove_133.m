function [Y,Xf,Af] = nnmove_133(X,~,~)
%NNMOVE_133 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:08:02.
% 
% [Y] = nnmove_133(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.85918092085871;-1.99763696099884];
x1_step1.gain = [0.0522252737181727;0.148213484472979;0.500572177293996];
x1_step1.ymin = -1;

% Layer 1
b1 = [-4.0404921288318922379;-3.9171991068745461995;2.0263501952945510709;-2.923458184408222138;1.896718157439850394;2.7432648277708402418;1.6716680877541638672;-0.21993374150711975101;-0.85696409610681612001;-0.27028446488269280978;-0.53751441175346048595;1.5985649152685055263;-1.9432392737633978896;-2.4641155104725460667;-2.9288907198401945564;-2.5504605663074699784;-3.0688084531441526259;-3.0470352490436969362;-4.1202272674609421443;-3.9418694740435178403];
IW1_1 = [2.4319175153600012251 -2.9214159370126004944 0.0746635524764553693;3.1985440322741847119 1.0322091380550191264 -0.43535252697569332136;-2.7937793047710539618 3.2540470443450182358 -1.0240995466534743574;2.4592415674631036282 2.9052140608742704764 1.1955664970983777007;-2.197325303532694285 -3.6837439078410394444 0.17296839922758219799;-4.8584238318329227013 -0.70000960764825015392 -2.0953666716909840062;-0.8559123247214586172 3.3564211263057490697 1.4209418334875167922;-7.5234045308009021014 -0.99104140844166022095 1.1237380047923792858;2.3546830116472441397 2.3670004578666286044 -0.45011923651107021982;0.58932572884288825232 3.3469273354837763002 -2.7169625263066143894;-1.2133950001794984175 3.0766710447069849366 -2.2691394134193116905;1.0600767083620967757 2.9446673694047449388 -2.6828583782250197132;-2.1466995061318865368 0.71908479029921990033 -2.6608824663921062381;-3.0422651985202127101 0.89780667115792589517 1.3576057753677890361;-1.5378252626082868915 2.9887994106564605978 -1.4540478084307142392;-0.9728839044913266676 0.13108447302994163941 -3.5453204884654172524;-3.0819960953173990426 2.6541912655734587467 -1.1282183988002989494;-0.83300768911235678615 1.9144546152315562448 -3.8092087522359028284;-1.09255113642110957 -2.0023794789747677569 -2.3014937080796977753;-1.5709166218940031623 -0.63784015525793757995 -3.6945958357018389151];

% Layer 2
b2 = [-1.4558414789780977916;-0.87188102335935435683;-0.26442379772476126698;-0.71878726200786158262;-0.41842517920525257313;-0.040541173575076111524;0.53545044223030546782;-1.2002398735910904115;1.742504358665482922;1.7936474929552654878];
LW2_1 = [-0.52928456138607804515 -0.51962154077404265617 0.063609521448093481188 -0.87680705055576180218 0.57651913982324243246 0.013843897581146971665 -0.052184272384740590378 0.55474194906734641819 -2.0069702266676996416 0.32341745104935359922 -0.2391644991625236083 0.14865688346514960294 -0.39248880810759917415 0.078650969768076089972 0.99458177418737225839 0.24557984929092502302 1.577928570047675505 0.53266169356605352903 -0.27911184948840961351 -0.2348578181986984148;0.087052982643917101169 -0.74077604801144147917 -0.78757257620113974017 -0.1678745264595796205 -1.6586678917105792674 -3.391015635139703388 -1.0281570783961084814 -6.5331960726148885499 1.5860264980390901268 0.33835843843749918713 1.3904393031920354584 -2.0949119049614317589 0.71916187199965209143 -1.3689837603664749555 -1.0064959342075849857 1.2154977071273489475 -1.5813887751813597848 -0.55124339087998230902 -0.23800597223331401708 -1.1777773934028596958;-0.24714880713797632295 -0.83241595774611909508 -1.2113041791873422337 -0.44396638007440453189 0.44289838442736600976 -1.3695153432403719407 0.54234530843585115889 -1.0703812310779865502 0.68051259226629878807 0.57481490210621055681 -0.025554249471767369328 0.65131284420153789938 0.14787047493693167288 -0.13521118301373602488 -0.041262872314355991676 0.77507112118278542745 -0.44809889339851260992 -0.34680611819523970984 -0.18618227313502577758 0.18224100152026181942;0.4585393955572401592 0.36914387510383794844 -0.43267154373777355625 0.31129225840878627096 -0.26251200795522594555 -0.63546732590606702651 0.12337755726146487634 -0.28362963020534120995 0.068220769513420723151 0.36598121447372183868 -0.32797453614120353205 0.40046506940731885216 0.3115722813163901983 0.52603260664926543289 -0.0043059241092303756487 -0.35270659775858859142 0.60489253434330225723 0.34528664101223893734 0.78706480626089359021 0.1939510625520820819;-0.21598815169718543761 0.16255419586510055918 -0.22735355311199997863 0.66390645908043000034 -0.3531112111313088886 1.2286027492889601831 -0.71533910111434939605 0.48511440301143265996 -0.7736759010796285807 -0.64725801856513920374 -0.681467871871228148 -0.51120524158379343493 0.42468373631370420762 0.78241144700676790169 -0.33915309972860174792 -0.1766132776478815114 -0.43014527964721416264 0.27630783298497640921 0.33329270544935385434 -0.28633959112090384691;-0.75564582757502307686 -0.2834287258828007694 -0.48451793132424136878 -0.91745713271200457495 0.048843038866121429864 0.087056867313266436681 -0.67234528404358540055 1.6702487453975560783 0.45871675631627745195 -0.52020753170615119387 -0.16073031336776769096 0.13529884451639276333 0.61028664898295414964 0.44333997676803460486 0.072797841501180945989 -0.52669597438299942116 0.426783218424196642 0.20070685274416083521 -0.49822334181005334397 0.91044183221338725875;0.83351061328113518201 -0.092480669674558008131 0.061515869954157538502 -0.48665563122111948902 0.32227857941802451336 -0.56762707905860543267 0.47103935537971652892 -1.6600272480079660831 0.72762966556244046412 0.82177228189901863065 -0.27639546043263901742 0.10298290729417194922 -0.62317495340458006758 -0.015820142202679472743 0.68732604123998941592 -0.54945788727217081959 0.25121519335910935666 -0.68229016286748644937 -0.64788229509427386343 0.48551926624854652159;0.68691952787220766918 0.71793321824259281883 -0.078955095175872180846 0.11317008796293799577 -0.49122503887657675836 0.54070545771715838868 -0.43241935354463695296 -0.40593417495006323126 -0.44195507229962160967 -0.81527496303844282366 0.52975176834021020511 0.16028626944934526444 -0.618186902951614492 -0.17886846928859490014 0.51513958425389794193 0.09744295620515228129 0.36086372837223040788 0.0069559862997940185431 -0.2269788278680802962 0.35313430667941653196;0.51292204714800471166 -0.040977490067765104387 -0.18890565476567369729 -0.15392743644338191533 -0.041257328220777017558 0.20388537366163717035 -0.47416886919097583908 0.56246197033083478178 -0.52253061467601624734 -0.41490938377062697162 -0.24989042752337098374 -0.28832510984783155106 -0.27276323529711798965 -0.60828971437473711159 1.1948244515635739749 -0.76192454543988774596 0.14902597950424686934 1.6248473719686546968 -0.55122371404669812112 0.48722540745249970362;0.011936809416750127077 0.25991362602326895104 -0.25968504607422826513 -1.032729017051660092 -0.19026149683640108945 0.56943186577879034704 -0.72699630456994912553 -0.44821635548274990635 0.68092703547133059949 0.72801881169858895237 -0.72838615573678555659 1.2050790751894331354 -0.43134959918077070418 -0.11666478931802172492 -0.17183965097747119777 0.33701000370458994437 -0.52173578052291558205 0.15430457437644001795 0.16698201665141737537 -0.018372851245004893916];

% Layer 3
b3 = [-2.475453723316295207;1.7812040725509834527;1.5238132675689726181;1.5785219759589030897;-1.2167037492023600187;1.1963733796043858337;0.96921784032692004374;-0.044442295872885874408;0.15399304514482797801;0.49744452999653432368;0.12838273365325975073;-0.39886602685536243218;0.0034900663518570669216;1.1369449703460685619;1.2692321309454008826;1.2041700612753551969;1.7927718398158816182;1.5360189859100210619;-1.7984580777215231073;1.9665641581004216221];
LW3_2 = [0.73968102548865333201 0.51521602901413598996 -0.66797169507302178726 -0.15776308342988756839 0.094517837465657991713 0.23685217910164202415 -0.2565420632482360852 -0.32490302284924560405 -0.45565990487353863481 0.012722581099678557243;-0.40612356113590625251 -0.84579469851681532422 -0.50328565596095287127 0.77837543985810275782 0.923363259482628429 0.81100045070171644657 -0.11574111225004840575 -0.064755324809449649193 0.023419389848427327183 -0.66630842913112520165;-1.0638445342376878777 2.6183515226307125801 1.1127826710588129 -0.46026964084373150898 -0.63384807520149666349 -0.18519844840907503936 0.34854258469138088561 0.30626045993901668263 -1.7380546298430399332 -0.7709095841011934791;-0.90121091072642534048 0.35061116590918534053 0.17560874356232958338 -1.0277640478867970941 -0.69961409923332507077 -0.53771186214028454664 -0.39035033078188519085 -0.57103356365192592392 0.40243422494081876328 0.60326806962440748805;0.42771700322984301801 -1.0310787012073139302 0.5509432387512945839 0.42235941485859551658 0.59553438142312586923 0.6015004918300494996 0.72087457224104745102 -0.13042222284488855233 -1.1899703771856016132 0.045151294571846217751;-0.65056490269985811636 0.48201859143443648303 -0.61858253780834759894 -0.59040692944201011993 0.65503304976253795555 0.74495773241991225522 0.57624449778265751654 -1.0188294658746048782 0.7880793830223230545 0.48534656224360683829;-1.5773864020379757545 1.0640327960670306062 0.4443983503344576258 -0.89436970017082517703 0.27181148132097460168 0.35801428805179935644 -0.98409958772453487441 0.13754635891753988486 -0.36054458232840891352 -0.3297762588820291052;-1.1288973197304610352 5.3043109963621573044 -0.098655824567780672774 -1.2645866735718656049 0.083979660072105333235 -1.9196356010135571246 -0.47233013805665441387 -0.92795578458379501807 -2.4222770228954719762 1.3947660221543842773;-0.37640351122357540437 -1.9587748517699712369 -0.3796480246400323888 0.38831163872880325449 -0.3151748591820191514 1.1739721175572870315 -1.1309160210535527114 0.6162262096409314438 -0.18503652285351818163 0.4644436916778534874;-1.8661850416022580657 1.2989304755171491301 0.032556008042598040542 0.49498287912152605372 -0.55172604520646961745 -0.36785080769393735389 1.0526939168755908849 -0.088552519432956486312 -0.015542709553435989783 0.67811835086984328935;-0.41442431835080761893 -0.49861409539596962537 0.69071853144237160826 -0.86169648916386110127 -0.78042049765346677148 0.39158670461856276424 -0.62322541208790072087 0.38916053238333941922 0.85516559956540272314 0.4010187392331039935;0.11989454744588760871 1.1735157883174072158 -0.53921305195505753183 -0.70404349328584958645 -0.62604865591683589443 -0.43644428991712380661 -0.14269988185211440745 -0.40503782469525473342 0.92386604099399116663 0.78762911213402864163;1.0040900283852707275 1.2418330844835112625 0.72105556478535592912 0.65277186886733029603 -0.42262276641704565883 -0.18999680950508204824 0.33982794005024613559 -0.37777447620602311318 0.47288288414277857008 -0.24351121281299475951;1.3910968543589086188 -1.4764398366195203849 -1.3457231484519389664 0.42875882305564994024 0.45841902969049330707 -0.11492907057974274809 -0.62798386286522500654 -0.18863938126075208146 -0.70230960946652853938 0.09056380881832334917;0.025473142993071469509 -1.1274287732976639997 0.87101453846100629352 -0.41901021234865187814 -0.55899768937358473853 -0.27966388089484012225 -0.051164260275040944481 -0.37871239123280953098 -0.095337005605023741883 0.28150354413947198395;0.51240142480022821125 -0.80082827840705106404 0.43804661187762444774 0.4880798289353290853 -1.0019576499200726349 -0.61797308974412468174 0.14360739312118442346 -0.52867899599994927495 0.55542705313177853643 0.5232090162773835873;0.26011664871828266143 1.0126601802519314965 -0.41296130361610716708 0.35953945452756019829 -0.087821909309936482813 -1.0066483302814959178 -0.31454040378533792977 -0.42392896172695609947 0.86171875325590496786 0.010824959413757070589;0.13300656497992122129 0.69611732207304233278 0.69614323606013284174 -0.78461259157412466259 -0.50610814759006805819 0.087838773256947694223 -0.79347909499755175933 -0.60561232053128888353 0.81045592529963139672 -0.085129751614577184315;-0.11597114478910273971 0.56269459047099767979 -0.88507803386244676691 -0.10899756131222812505 0.39088448084506344227 0.73980140051944354163 -0.23043583165635819765 0.73220492893070787677 -0.58622495584494505039 0.59927634173287891439;0.48370424801209410681 0.016092775695224215138 0.86936994760260599691 0.3797010091316840863 -0.66758743374202977883 0.83825463582237913496 0.42684563039627959613 -0.82789236728697634948 0.22484478740421723342 0.12492500761592770231];

% Layer 4
b4 = 0.4953884660411205787;
LW4_3 = [-0.19531598617714432398 0.063889400030403095676 -1.2802152385510332522 -0.25202039119522251509 -0.23393790206699802137 -0.61832266868495144863 -0.038616878456251065022 1.5903620116457728439 0.56978733973638584498 0.7417208366387230134 0.00072212261192851736127 -0.1485955770014082411 -0.0094141031841454888424 -0.61602975027053707979 0.027426731185952749059 0.21086250011097745771 -0.11309275839157779953 0.12943720330170929711 0.15839360265385921123 0.0086695890753859892325];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999931;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
