function [Y,Xf,Af] = nnmove_134(X,~,~)
%NNMOVE_134 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:08:06.
% 
% [Y] = nnmove_134(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.85918092085871;-1.99763696099884];
x1_step1.gain = [0.0522252737181727;0.148213484472979;0.500572177293996];
x1_step1.ymin = -1;

% Layer 1
b1 = [-3.7664552781374616153;-3.6097248122706777629;3.2752838817562008877;-2.908380422384016839;2.8069391088161834702;2.0464150473562159327;2.0838382016870578006;-1.2036389972754566458;0.76395853915725420169;0.33175741267476038798;2.3207173083982612916;-1.4224083665349420702;-0.3170508695124137355;-2.1322690733728584256;-2.7742248783263501188;3.5047339322115997895;-1.9837627406554116938;1.6393908501375498155;-4.0669353628185209715;-3.9578594311102155423];
IW1_1 = [1.4452573923832958691 -1.4263692080932042217 -3.2322510669287303209;5.294750493500295363 -0.3820376329439379437 3.1544096235825018759;-2.4512491147210004883 2.4290307903243557597 0.71356166418579702881;2.3048790588274070679 -2.5502550110849058207 -0.99889240846489912862;-4.3732117440677900078 -0.79808835311211634433 3.5400805527563772301;-4.9557480881989217636 2.8704289431496934348 -0.59089928857535567452;-6.7769141857939922957 -1.0199632617969311976 -1.2288482834323029014;3.236612794773231272 0.37591278831236174529 1.9686677392947244947;-0.74123342913340983795 3.0044444147787907617 1.8995131417462451928;-2.2709343009404587832 3.4824411749935495486 -1.137173643899765052;4.0962794650107134942 0.022426396911420790753 -3.2380601726397659768;-4.5148988720291214349 -3.4648368830386222506 1.3825646483299749434;-5.6682116665404409517 -1.7222841532791823838 0.52083880709061747272;-3.1637716421038213355 -0.92854714946268446241 -1.5859594316446989914;-2.521598949545985402 2.9166298703281299254 -1.9854529634685296191;7.1601446480601369515 0.4051741323813993767 2.4758981442506935444;-0.42604471936028992518 4.420449040172410804 0.11794027182538052712;3.5975381368429890649 3.1080374470442619916 -1.1243246983747634538;-0.52728790131651814832 2.6636074433160477071 -3.3266475509652999598;-3.9218910327248992509 0.79561725465207733254 -2.8858181048479010222];

% Layer 2
b2 = [-1.7250436510442717086;1.238738274763644398;-1.3039474145237031077;-0.89355401765882858101;0.071295705436386996867;1.0884733156285648636;0.80245296427399992467;-1.1549334957280303904;-1.4919705583626863277;-1.8406273164121957908];
LW2_1 = [0.6156234602798701383 0.31075410203042730384 -0.41901237705846022807 0.63360898574940738293 -0.29487584871114896901 0.2238732330903038803 -0.47205741562052050408 -0.22504848777453798081 -0.26129471526481579113 -0.38762256639034176064 -0.058442135351915301678 0.47068457994364198971 0.37369732590124848937 0.19984090849250987776 0.29952191469050915007 0.35476856687081198549 0.15698070936608748971 -0.17983080793667494124 0.048997442846836672392 -0.36573378843048209852;-0.45242630108953674206 -0.64523744392622628396 0.11561163019723076639 0.35884409025625541023 0.41347047608706866129 -0.25259276582163253666 -1.1451978804306777171 -0.53716253871494390459 -0.26174825029996912074 0.75625399437255913515 0.1558127052779634536 0.54432666420910202909 -0.19628873814631225825 0.55782165234636782447 0.47110766085814392845 0.14071347187105925913 -0.40332846309990877387 0.43811344615382763479 -0.595188025525727471 0.12441469174562130862;0.67555484403688126349 0.50510473516338971756 -0.26338663410799084685 0.055464961457544162404 -0.024985368039193291828 0.18135782051734841702 -0.033582851906956659449 0.69590391350235936141 0.30840905183753797303 0.17442794638339587099 -0.53213313544750651118 -0.26450335540063441009 0.73137973494627894766 0.41099634598614409597 0.02218366853900733543 -0.30351959511334020148 0.71577953853133591267 0.21479674697903095026 0.033764657979753684436 -0.077022226264781085137;0.79510961356802600797 -0.33047166363195890071 -0.042502384905400841797 0.089538122781946130613 -1.2386792466731078033 -0.10756134464342610724 0.70024295072608078172 -0.039326297382765225408 -0.30918275057104993575 0.14189320015380971207 -0.48391398177850647455 0.10572274401279350975 -1.1689168398395486381 -0.22893851007235285766 0.61812107246185021836 0.72223873742884014959 0.042278107522103834659 -0.15050528120798639664 -0.03590024386506362325 -0.89437386332297008629;-0.094076101005327483762 0.77506958879340126511 -0.26614085116505786788 -0.52764856314846431129 -3.1314159500022280547 -0.61500888457038305202 1.2059066344190401132 1.2333762094282185728 -0.50808425583693195282 0.74416049032268138941 -0.51608960283843841044 0.10847215371392389394 -3.2352755504629757688 -0.33185934492811425267 -1.259564197716326106 4.3238152342534350581 1.1130093366569211444 -0.44698292222726621059 0.3196080572797460051 -2.0235611224443541545;-0.37949996938581076478 -0.83569147683189093367 -0.08061750513270715679 -0.34514394935622566551 1.8241171369393389678 -0.33278572392157235171 -1.1856510469899530502 0.89998891849578099844 1.1476895893627718781 -0.99494921034889882705 0.7311771018481547646 -0.29128107904632760672 1.3218760992031350909 0.031221994185683263345 0.4211669687409471674 -1.206941197987082548 -0.056539316959851031175 0.68106891747720454955 -0.77583089814428463082 0.34226876825488167233;0.60380259466500540988 0.70884369158818649748 0.038344818588895671074 -0.34867262075784061226 -1.7621247788544287527 -0.76010835419324285223 0.2141490535244944815 0.46061086808545903537 -0.21507812081784002944 0.30958717885191405772 -0.89683069217077027169 0.30907605358968276432 -1.7650120828866824318 -0.78094219761167626981 -0.25280562950274837464 2.640813633826132989 0.2204343111015776846 0.41011472536693749369 0.29490594194284353025 -1.1462649255668166948;0.15175712342531166854 -4.3110850047399287277 -0.24712826583448446738 -0.45197654001682890934 -0.63487568219830159411 3.9025145413805062411 4.3774426103511769881 0.37303211799779123492 1.4753433561993449796 -0.74082222458853208558 -4.0956346629004194426 3.1956075026422992025 2.4543142328850438005 0.12147607143729066692 -0.43164813150305503253 0.10499307763158323425 -0.7984712278049322931 -1.9186383354678990809 1.2935558036779792879 -0.81593287782890167037;0.42140622235180147381 0.71733892584888947486 -0.26811814272337852749 0.28782010121092260757 2.357107968948190635 1.0001326593317219071 1.5710691943251624547 0.42600524700430142389 0.34250809288242689554 -1.2118004786160128106 -0.74391494588321716019 -3.0010662986531522201 -0.22716436835169542818 1.8189196726756799993 -0.31852522140404715412 -2.5538642203390260477 0.075057240308978021015 0.65799007424427746749 -0.17470098954896448595 0.58752725005278605419;-0.15734868815315805612 -0.42202096061609123412 0.3407091899760108511 -0.27734389565143419132 0.19380539691080200804 -0.51491227790716831425 0.22582017844207485924 -0.015064064585031240739 -0.19420152173788698957 0.7158027068230429224 -0.31315637886472519336 -0.69047521561348090824 -0.66285603989263464086 -1.7044520512350804786 0.713847725199046379 0.092463181344443298726 -0.10348883668045610884 0.53947836915901914434 1.7757821450008397512 0.94906085549304852744];

% Layer 3
b3 = [-2.2149379426501298873;-1.6389066200296007469;2.0177218841767539104;1.3292193979843263119;1.3703175661122612983;-0.86668619441645433632;0.68367389903397868256;0.73623230347646462235;0.31194473445491477381;-0.15916376991450614797;0.24271912503353904045;-0.1884536992713414516;-0.52217633661004259071;0.63721747395317551721;-1.5162147921787236804;0.96914537099777553486;1.2608174830525005206;-1.5513828961186930666;-1.4117677946399249667;-2.1812080770998729662];
LW3_2 = [1.1541001267742261316 0.7709574756387359562 -0.31168779929082146563 -0.49451811215574881242 0.55341726366659071967 2.1348038877624238019 0.74677278295980020761 -2.8801458336432732565 0.30704877872789415605 -0.20980188530176854811;0.94317441795948830929 0.37976896557502654028 -0.38781258907220333976 -0.42523744044092537386 0.7445240324945757715 0.85663648515030188513 1.241527563289105407 -0.58057310139996576304 -0.24965909650851189627 -0.5361616428765579867;-1.565500184986745591 1.928247927294847841 -0.29791674489639291545 -0.43938336676161193761 -2.7934823256311167583 0.40443594392250176162 -0.032914906505727807573 -2.6255758068784778025 0.6866993096007570907 1.1161849947075919154;-0.74006083255430954448 0.43264602825342213244 -0.45584449787935266141 -0.85981546999012015142 -0.38035054138601359641 0.60142205829646200321 0.083327554814046994602 -0.71659845772981478618 -0.82044435971659268603 -0.38186199831207118249;-0.90329710143030927938 1.0093205537961786877 -0.4118210271917887022 -0.77998402879732220416 0.19332337065413005006 -0.76119478079787061819 -0.31531127262201552597 -0.38903735100431668936 -0.79635659148186122014 0.16274181578050794794;0.3614172928623175518 0.3102384416400509326 0.87452644024156922509 0.32105108992139252955 0.84808776377367356414 -0.82998828835287952188 0.49170008683046845244 -0.01294590187585569277 0.35211974160021491942 0.47393173683236344829;-0.55972523454122047326 0.95240768149111620922 0.39251817595566868002 1.745471275833905489 0.09606720823217043681 -0.58762619098782209459 1.0386727524256180732 -2.070354777915111022 -1.000837818050623218 -0.87301284004729173827;-0.83535158897174088821 -0.71118309359674325432 0.71300740641480908621 0.58820021835496438811 -2.7809833881184027327 0.81101259164051853201 -1.4026553708555060673 0.20645075346629496171 -0.85610701733648464362 -0.46934851223190526825;-0.48912201778264469132 0.096231096739705715426 0.058243405024820581184 0.12459226019919490691 -1.4524306092438541427 1.257680891997153827 0.6636204794532796214 -0.060098289879855743001 -0.4645325017275375723 0.38051875168102600178;0.68524072468410823777 -0.081554064471458090346 -0.56060894708819541954 0.19035228043366184125 1.2641720395340685368 0.46745059319289672395 -0.39722470033012041712 -0.86589773750296816779 0.10865142218515348727 -1.0468349562078249626;0.65271694090538867616 0.35790471423511410753 0.94809368285367556783 -0.4520304845413274375 -0.88714657790895212752 0.35611530720622119883 -0.30871537107481256124 -0.17074652957902286543 0.87942777387599690986 0.20578008429514316191;0.65221356370731609076 -1.3680333867441396567 1.2321644101399606974 0.2890059621981388438 3.6169472705270249158 -2.2245124651990133557 0.26937400268192990271 2.853119866005463301 -0.94865666382859148431 0.27968653058374337572;-0.61142169301437110374 -0.76755909044874004454 -0.070811898221504868123 -0.056478566815579264726 -0.65927069258955484088 1.1861201607090874344 -0.12150952450474765409 1.7576917623012016101 1.8446502877957651201 -0.13596299896169825039;0.90765216166546491827 -0.55650943207879821628 0.17664889336801564701 0.99130182217054807481 -0.31476687414502924067 -0.8828943379163788352 0.17454495661305555188 -0.61040862810309037823 0.53199728814252733589 0.21198224681826641214;0.32374154749800204689 -0.7871218448024147607 0.38896149575190852588 1.0064676813563271374 0.48852914650473266978 -0.13012863841193308967 0.21056202543288726758 1.2580391727851070183 -1.154709925713292229 -0.15975467878316876313;0.3059642839106390122 0.62486744528822157907 0.63472056329929837926 -0.42777501576154397522 0.5477901736158112822 -1.8441483886447194163 0.47540836888794879567 -1.4465968267671043268 -1.7359754701715026659 -0.13491792752401993161;0.24014110674451921712 0.53491451871768913584 -0.3993067485672053829 -1.5138592235765768734 -0.40071347116022232315 0.019685355498355674303 -0.71853356455023209559 -1.0340106285788484008 -0.76426933281109110663 0.021843585735369458467;-0.46716191610555479752 0.40939046923205268946 -0.77856007317945075119 0.41261111120612703473 1.3917746909936374866 -0.84750271106135943722 2.011793615394072976 -0.51986501478619151495 -0.58922043094636367133 0.86613462046235545344;-0.70523344041877555899 -0.65547748859576626668 -0.34830455043814900762 -0.56030364852252467767 -1.1795126490678369269 0.77441654205515764176 -0.76837751056941061556 -0.001994817815153458046 0.21956679622716229749 0.53089544325688731163;-0.44425714515543424099 -0.72583134471355759132 0.52085888187638085256 -0.47075641617937558081 0.36378766934107925612 -0.49675004888955742732 1.4937724303389154912 1.5554629118384537545 -0.38602259080182499407 0.76475672856061316374];

% Layer 4
b4 = 0.030489689743807429217;
LW4_3 = [1.639765632371030124 0.31622489740547404802 1.6066701353470309588 -0.33178855583766603266 0.81894876183814269144 0.41670340366508645813 -0.91362287680954490376 0.9168839625620164302 -0.17718170238202185507 -0.0067086946538834320644 -0.023107846934053526827 1.5947541413113668352 0.78074303603659245265 -0.22389787971975888548 -1.2991213630849116623 1.0159551388760899027 -0.96543711858420477867 0.67250206430404579905 0.059618007988705049027 0.50967333976745388124];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999931;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
