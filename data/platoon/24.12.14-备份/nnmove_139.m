function [Y,Xf,Af] = nnmove_139(X,~,~)
%NNMOVE_139 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:08:23.
% 
% [Y] = nnmove_139(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.85918092085871;-1.99763696099884];
x1_step1.gain = [0.0522252737181727;0.148213484472979;0.500572177293996];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.9557839973837589653;-3.3799339107906551938;3.4137049027756858344;2.7225614607603234596;-2.0895446262876191668;-2.424915335387409332;-1.1780458314086064142;0.24612437174552809216;0.024265377627906408592;0.48905426842288124423;-0.27748484547547253021;0.00010336495046249071644;1.8636876679533092016;-2.1206895612221687841;2.0959628011418987015;2.2749812783027643093;-2.1331376085235422835;-2.8929172970998004999;3.679091783174575081;3.7407806277925943483];
IW1_1 = [-2.9136666966997588624 0.094830765811167519463 2.1518017707636429847;2.9839230035878339109 -0.13557231822662563214 -2.361833312986929112;-1.6999066509041493855 2.9620096266119722017 1.1664090847015968766;-2.7747475162306751706 -1.3079837220183243574 -2.5499728947239468368;2.9975883502943583281 -1.8657645225456003235 1.6888533188528858098;1.9563579681543981081 0.1297001173848718325 -3.1987631885441447643;2.8316098376412681681 -1.9002986722759862559 -1.4077365425848520353;-4.6539049814376838299 0.92628666597967690421 0.76900703239360745922;0.84138692533138692564 -2.4065302356652282789 2.6713427196462435909;-1.9427678085246136153 -3.2450182965983533911 1.7877007995758793513;-2.3809254618568331807 -2.9728189263187769775 0.5995556010596388985;-4.617058100961213718 -1.5687512070666926878 0.17497877482020696149;4.8486148639677679739 0.065164546272795664805 0.76653114326877203055;-3.0405014446382829796 1.7865348714072371017 -2.052027220563713783;-0.12525216425391758057 0.78907693244215015849 3.7174162661185214951;1.2204241234776396219 2.9749483267165599543 -1.5166030580691252094;-2.928542797183792068 -2.5436112807698090243 -0.015917288854928605263;-2.4914827238754240213 2.6967084175005089364 -0.87706490674276538222;2.6404065366501758838 2.4905873804999503207 -0.051573650794802923525;2.3022355977671908889 2.9699121446753071751 0.95937269866756225145];

% Layer 2
b2 = [1.4391093337198404001;-1.215437224301619823;0.94875303539706223876;-0.84376256062784638079;0.19050469369376432649;-0.4010699368765434647;0.48525539999367006683;-0.94295779256721212747;1.5237155420372401338;-1.5830694035030197231];
LW2_1 = [-0.52937771582341963672 -0.33350609144615078749 -0.52210965128843200844 0.13064487130915805602 0.92138223188801238184 1.0843445699009690575 0.32868297424313236421 -0.81776617950070440433 0.4165613195227290122 0.40633241819776266812 0.49371259094404462697 -0.79744487936999730593 1.5094134720303227226 0.87770994178612415926 -0.60565981461610185477 -0.053031235616809203892 -0.62458283499564726249 0.46512280419711538038 -0.67002293961294001612 -0.34408265314646052646;0.23266824142724099045 -0.12844305923596302521 -0.49105820139755429476 0.39808507233157919281 0.46793043904291742319 0.46246230038728830536 -0.34690835719640361612 -0.3702461905376398521 -0.014783647696476744787 0.47809354668187226123 -0.47698531311089303886 -0.88061422161359881322 0.67434797441864835488 0.1621987682455862112 0.26253117786132335043 0.10566196102201097506 -0.56557700763086904416 -0.19253917268349979297 -0.10828772723223341334 -0.060791427380939497271;-0.43817513518330319933 -0.56650751831794876612 0.14818553339042794814 0.072916070483091233179 0.41729631558666868685 0.59097336634971353586 0.27491777871400513433 -2.4577120939291061674 -0.30732542801041762281 -1.0358208355574853865 -1.4165201851683573153 -1.7523458748242661809 0.47584179405857673917 -0.15184640633061730064 0.43782166855601523103 0.3535763179352300889 -0.49762733275724335691 0.067111952209436789851 0.22841101126660851017 -0.2608643018665910418;-0.31776843451601805013 0.49061216413976566075 -0.25717003863158166554 0.28126039170668298839 0.69632880908261352015 -0.39696812774746553787 0.20364343239149754194 -0.039629836116115126077 -0.092096883131744064488 -0.30800577104781895477 0.66130966785480393977 0.27614346240271614441 -0.93278659717049516864 -0.66628583846944533509 0.046853657851354223174 0.25498557270507515859 -0.20247554864500261207 0.48517142396112383773 -0.75761736059723117087 -0.010871417379245351675;-0.29616985602753514994 0.52620462805056389399 0.58485259104310471923 0.43458533911893848511 -1.031430042396000113 0.16426236921591766404 0.16473911562519438778 0.11550081832852032715 0.024453618874494750801 0.65748869294502043648 0.38011033983691555616 0.7406628562322365994 -0.84654492673080172782 0.073877008554791775974 0.67164862996570895426 -0.33093039061485346464 -0.03409232552769689284 -0.037325763197413347472 -0.35449621020914406921 0.4404976399844241497;-0.34120836388755942936 0.19296983731956096619 -0.012326980272008215833 0.17845951029565559898 -0.22950327620348129343 0.1937191275509445032 -0.061769290182731272087 -0.67621288614740082679 0.090315375918354506846 0.24545550358927104018 0.66086925507709026739 0.55858805322429783136 -0.68196712376648538356 -0.044096293910538007788 0.48430973654130798911 0.41944705109411445365 0.0071145847340121446539 0.14182763990165159207 -0.4179452910456960546 -0.36641512212968668782;0.28711742101644638359 -0.12023852511209090488 -0.50155158564189750159 0.60934610189044058348 -0.9295723969736009451 0.45791872585543164087 -0.45124214038950505312 2.376883572852821036 1.1739804298057803233 0.56310922947273400752 0.78611222966922655875 3.2480345689876504167 -1.9307262502597422049 -0.28400715540637500034 0.33692237266964625286 -0.27110589910943816427 -0.25118939346057367334 0.34643164608686677353 -0.11540169674110280218 -0.5234905586488814988;-0.019559583560934259289 -0.35969535899802512757 0.10497753660046382773 -0.77775382575731688561 1.3123959397265445581 -0.19561099924535990668 0.46761720067887702079 -1.884830053462768662 -0.14185967326524140386 -1.5169475896438049389 -0.73953113668052972152 -1.3197403738590887112 0.1963011802315339227 -1.500528165942423664 -0.50664571843128813899 0.19301832354887601961 -0.11783203188343197021 -0.96625697646689057141 0.4252229665824661109 -0.39661905387835294512;0.51653011117313218925 -0.67771949206902903917 -0.14452258349638646973 1.5233741188672773603 -0.21954264277488486079 0.00040526232137797434628 -0.63521564606337244108 1.2239058851539363904 0.48879990147216595409 -0.96294637447429620725 -0.62483576678936059157 0.3576005598977968214 -0.33435976944553114087 0.46267512178597158812 -0.43628584885587912146 0.0055197238585325200666 0.14714924245284569104 0.42224477635677792886 -0.2279470350298397896 -0.41450488698159115852;-0.22983562580050187485 0.64903134758587788244 0.11423869123639802947 -0.31212453912713922222 -0.10311213541857358611 0.40985582817384796916 0.21456782963070436532 -0.30563274195357331697 0.61444448528640560614 -0.26133332598249398027 -0.17688937621660230648 -0.1619926818390986234 -0.15809963978028471199 0.19907199184997478869 0.29998627480552697566 -0.61567835049643548917 -0.073403129289497201504 -0.44362595099729895676 0.16049415753592694012 -0.27619719325782560171];

% Layer 3
b3 = [1.8782932498869910898;1.4853330864333258443;-1.3468800414736585846;0.9889680703928506178;-0.94595007989693036254;0.94563987391331982835;0.72640906847240083177;-0.51960348434585090782;-0.33582968140733227003;0.35010568693560883968;0.095340509848345064703;-0.12310601581747168676;0.64477969924801514789;-0.57372307068206895853;-1.0064734170592630758;1.1072753725524997481;1.3378786879405801802;-1.4829735183150256628;1.9990650771415399145;1.7912976775702096344];
LW3_2 = [-0.085170883467892574692 -0.54024115471764910801 1.1305552459730812132 -0.073006196464403025348 -0.1315566321479262335 -1.1012449107415842597 -0.023092910169500897172 -0.080767495876329697957 -0.61990664112521609574 0.66442452939173191062;0.073374640266126583965 0.66078913887972290375 -1.1679979604720143183 0.76543009082601010107 -0.097625768206672833283 0.10191892322745485511 -0.016751278745120619373 -0.053803364434479042377 0.20418636857680066976 1.1450856777084978955;0.38459978292231489228 -1.0291209338451343669 -0.1064034802811406194 -0.82071019643317455472 -0.55565898699416538253 -0.78206012809489355853 -0.31309456003003161007 0.74575854358575299763 -0.69612347250790096442 -1.05661336119182514;-0.82837404070671094569 1.4083235115968375517 -0.81223612190565763758 -0.3325871145393798356 1.3224607905076533054 0.15026099138651335951 0.083946543754767344314 1.6956215838402746154 0.036926586575188054262 -0.57452665536022484716;0.18752749991955455777 -0.51365593219788074908 -0.090756110658692712434 0.75886515035366530757 -0.44590289132169341757 -0.8000591171137891866 0.63640011130205675904 0.62157228578083456583 0.091702942029935105572 -1.032336504058984028;-1.7151299806757835942 -0.757058332854145144 -2.4657986612077409383 0.23690518697619791788 1.1643182836436924976 -0.83794198219136339922 3.2820166744971186468 0.075846002271587498189 1.7085573665104143437 0.28285115976509001001;-0.64448300120924761902 -0.50494412490736406696 0.52648161636884815984 -1.0670046983291927578 0.21464729613713690037 -0.87693163433097720549 -0.1478908511604249687 -0.16225907389576801898 0.80001481337289293005 -0.088727333271476846455;0.92363821516723521032 -1.1904088785263997607 0.58592752595899177948 -0.35314686602039196961 -0.17726684185346044953 -0.57568323359811368611 -0.37411870702578287062 0.42124240888148567485 -0.22331078310258595243 -0.74456177273379819948;0.59915968539525199521 0.57030554123156806945 0.61651602347072409493 -0.22674491769492940985 0.69814663351966599336 0.093922744336626687311 -0.077640682993462981076 -0.051560783284797448434 0.95493867773689056211 0.28836851693073362046;0.15135437477007748774 -1.080460825087921517 0.67775207837761586305 0.11909086244478511718 0.1643942060031526875 -1.21196370101518891 0.59893473917956419061 0.2825742452376213687 -0.20232443279604236941 0.38610829839551080722;-0.16383400665489128434 -0.60361437791945304898 -0.74447281083840544103 0.71446001353755606011 -0.52496546924099074527 -0.54737435144285995214 -0.83364112357786435137 -0.43565597334138350671 0.74614709857732630649 0.064318405187598418071;-0.2701621614042584163 0.69735101962104639739 -0.032952717948580872998 -0.39199675253358562399 -0.16275678041451285827 0.66387515287498655159 -1.9136506769489169955 1.5793542820708879049 0.051245112492072718291 0.63339721359612344287;1.1009432617042731462 -0.26255263256387451065 0.28382377565452060475 0.21473587133856278375 1.0189693700939421728 -0.67827607822853808184 1.1778915666064595502 0.15961677614404365388 -0.4280888437330790941 -0.68865843173078211681;-0.91012646378539108216 -0.34962458312810124061 -0.35076318369217124316 0.23865366233027998644 -0.63636862019905970911 -0.19481427480017102227 0.53882739198848239592 0.42154648340351758007 -0.37998013348261511224 -0.92543967614871025518;-0.59474054489034966497 0.5781721780386266385 -0.37933933894779314766 0.78591813899376805619 -0.70013706961036248355 0.53817054982633927285 -0.65463250238154346849 0.74695401842399922199 0.72076760059689937155 -0.030517276949567132688;0.43174183320917403073 -0.55136091183586866116 -1.5296926473396732504 0.079286496729047639676 0.67608786965592071461 1.1243833127312101716 0.63408379761325961432 -0.99906232143429318793 0.66640267478146897329 -0.76840374809867761918;-0.15860807147370895032 0.64828286716126826139 -0.21977840578477769728 0.6441717015254326828 -0.43510980650476460685 -0.61538825866572299805 0.69476676762693234668 -0.31973872632402428051 -0.55746761146926249175 -1.0332299669523798968;-0.31483774010178389169 0.38757869184598869872 1.1656571876579628899 -0.4867015214092595965 0.70875692448392391132 0.46630501606718471885 -0.49001683905057807911 -0.15480196815429814183 -0.14692100968749138845 0.71035403371621530511;1.1115100505090058647 -0.3305925441602771131 -0.74719748991500600788 0.24072205579642749762 0.82574107246152572692 0.65029320786545941058 -0.39203389774564034731 -0.071567236250252463936 -0.43205976995364525628 -0.28879380413529792682;0.21745747662978984205 -1.0674387324741778649 0.83788978112619294514 0.2407758456594526475 -0.56714499438254906138 0.14678181988451596829 1.013048799476308881 0.64295313077838145421 0.50186273690880089937 0.23343722659175075718];

% Layer 4
b4 = -0.74972930947614224717;
LW4_3 = [0.1949458393998534933 0.30377927077569294445 -0.19366158626976931467 0.94730592153125503518 -0.18473713099043495567 -1.460574040598872303 -0.38903824368966577474 0.36555783646334655268 0.0017157130011329234029 -0.16041873251398175437 0.0075018281129045003008 -1.6612876798701390335 1.0041980106676109408 0.17922528911068935642 -0.18200332895379051079 -1.3445641326920254599 -0.62881480063612438247 -0.052774157729516983639 -0.98328514438630365557 0.67644079181094385333];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999931;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
