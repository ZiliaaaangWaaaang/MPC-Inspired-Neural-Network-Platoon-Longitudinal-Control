function [Y,Xf,Af] = nnmove_14(X,~,~)
%NNMOVE_14 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:04:06.
% 
% [Y] = nnmove_14(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-13.2925490923537;-6.70139767883548;-1.99738196042707];
x1_step1.gain = [0.0638195875959219;0.168202204644631;0.502184479042526];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.7642574525161394128;-3.0282044144924089579;-2.8415601928393461328;-1.7773199435393443046;-1.4889144579730657636;-1.9426148560890963424;0.98260631387106101009;1.0405747591051817125;0.42717507887690153723;0.05292807040975139321;0.6956583675696089708;-0.7881285365965851053;0.84854244196329686734;-1.8481077965349084202;-0.73595062544649980651;2.5646508251950308477;-2.8899968648874985178;2.8139064075695223721;3.5592571734847844311;3.9474497124385408142];
IW1_1 = [-3.3776465162226156913 0.89348206639963811959 1.6322901526228246194;2.6596367610869529052 -0.87828057621122956888 2.9916532181738628715;2.3671326121675408949 -0.80971398750098155794 -2.9752566001695450737;2.9737160651062977124 -2.9899470091331865618 -0.31923412154281971542;2.7893029370995647831 1.475573922863285814 -2.794168740201328216;2.9702830980562127117 2.7244823666078916702 1.4224858761496779191;-2.5226300066191802429 -0.94612674249631445456 2.8421968373980437406;-1.0628125880606635878 -3.0500412781688899244 1.538707777903187468;-0.35463820048141220242 1.8862297846570423854 -3.4117655936059971822;0.95338281248529865852 0.92351904188832956155 -3.4147991759898967956;3.3533888682706409767 -0.29117906036954971372 1.7087357799784297363;-2.3694945432043730271 -2.9852266654054160355 1.9339056069549902528;5.6794137539055693509 0.4135501750606028204 -1.0197727243140817244;0.54684303739004325173 2.3984540071352609125 2.4844193338620730316;-3.8763714789905785452 -1.5555392144184743142 -0.13359396507430770784;0.93248263923793250907 3.192344329039164208 -1.3992832961429944039;-2.7649942054461145169 -2.0468859874204587967 1.4166110553142601258;1.3042779282491889781 2.702860472760867161 2.8458629180570245154;1.3684891143582900153 1.2078269337249647464 3.8303901521383783013;1.2287854819336665457 3.362501020456462264 -0.60263061422429775593];

% Layer 2
b2 = [1.5454778258096846244;1.6300197459387049115;0.95773852878078669093;-0.78915610861443241664;0.18204213381602749044;0.050238740619577920699;-0.5783908256013209348;-0.83741950253227159795;-1.5037606734204265191;-1.6553036498801478871];
LW2_1 = [-0.21174848738324467123 -0.99184773694998606963 0.56228812884929557647 -1.1986210674006572141 0.60596509029634237908 -0.30764914900071060888 -0.60793930261539330662 -0.032304028460393374722 0.052721440176144163114 0.31558902058637927635 -0.17306513325177694251 1.0530256908036934593 -3.7511026528345472464 -0.22564008987353204039 1.3483551021276458659 0.86932570070592951605 1.6523870414029768749 0.19121895115925063857 0.48707495603234324255 0.19072069873954319852;-0.049435129263085672569 -0.72541561577496382895 -0.19547240947392252597 -0.15244556587012428328 0.64046885474298564933 0.34795645380405959557 -0.12193378852525856015 -0.8879292837974815944 -0.13678124033086297429 0.40490350379546519166 -0.35172496027650757 -1.7398587841329806736 -0.48610357886653621229 -0.09483818280425181102 0.034907577289859430258 0.1108759690708464446 -0.12692556758113571203 -0.32555238201876623982 0.42363952843556068606 -0.11167844218246246457;-0.097400888460060702778 -0.43367340780969237946 -0.40416060771365575066 0.45373324832728662015 -0.1248813192548218487 -0.60386415660393522042 -0.036430657535251070867 0.062545321141915216634 -0.14648241607301776268 -0.85540262904320740756 0.57219472780056168659 0.42345433123421960531 -1.2619769100079500923 0.22045585002139056474 0.80744538898606899036 0.012228703234891110524 -0.20670437222304147151 -0.35269843761959812634 1.2675719804697571647 0.34858601127583072055;-0.26516632438225978818 -1.1826857364649470128 0.28954619336445391875 -0.31432881088373232359 -0.71498260806934155198 -0.45662608149331923579 0.2264169006258396899 0.29214103988160511349 -0.55010832235190776363 -0.59652194993502316578 -0.015679312218353093356 0.03630503754080401102 -0.88906008431576144524 -0.71492372246357793752 0.87234734107651301649 0.57181676363692979237 0.0046835867652852795906 -0.82328987416030374735 0.016104861765454964867 -0.56840202080043933375;-0.62612640067362990148 -0.41742955496575739893 0.55309775682200701397 0.26846777199687499316 0.1100204291391744249 -0.39606774953995477206 0.14876166197166967864 0.035822745961018476191 -0.13683301680492040986 0.56921988441351123456 0.062523255478896699877 -0.69686849879270884589 -0.59661071442227719963 0.27639215833438834924 0.56213476480981461325 -0.048603743003353204466 0.016809079012133895659 -0.52419187768539177164 -0.44692672256463816804 -0.38922225705374258187;0.3732441306334373099 0.20757007616003830819 0.58228560608334989368 -0.21916131325653723239 -0.16510920766374473367 0.2394707856039037519 0.92746973809318833393 1.1437617902567176476 0.56762185324573222189 0.48368106970434282532 -0.27262585428801050513 -0.29084976900642212083 2.5535881384193102051 0.88296627467358190788 -0.69846626466034023029 0.41047786644168393622 -1.1551306050893823674 -0.19065650600156314187 1.5951366686771950576 0.12980076237783402804;-0.20708792031721134919 1.0423161303284744772 -0.042521385189052102183 0.35670081638585759976 -0.16591497399791663159 0.091440127819113398155 0.61009786375243779677 -0.25309493380821640462 0.34010412882771101639 0.022482212508510568405 -0.91949977305089047874 -0.64852144520303589559 -0.0078697673071839672337 -0.70553918712588914453 -0.73195246978333228238 0.53523932212383584783 -0.82709855836235002258 0.078002769721489673138 0.45597051092101831271 0.58974984262429919202;-0.61502013281582224025 -0.089579132535228950251 0.45918478802245765724 -1.0758453496976427832 0.30864956258982712001 -1.1850273113409459658 -0.2533383706775768629 0.25211418728731133099 0.18548507132819608278 0.063662833064844076558 0.027777119979341357431 0.2103022743353195334 -0.62041813424409752997 0.34467640607259930619 -1.2538265517998190557 -0.27176560472418076486 0.67830890666746845863 0.4168949915869014089 0.43814625329686840427 -0.64119116943698972744;-0.62044197273385026659 0.72768940320909258901 0.30490393747134580948 0.18348790434815911987 -0.14840089331204775469 -0.33637293217588226657 0.28615702932560527216 0.41936218795386059899 0.18580975638118091275 0.060700453038313291476 -0.38227850715525091285 -0.17916212613638918261 -0.22530072187047880949 0.27131542652658918735 0.2377185498522155771 0.17776527381783172044 0.43912322433264805444 -0.63393170955017041912 0.20562095899887045114 -0.10943558681741089034;-0.48576737596503322125 -0.40420550072482824833 0.48332048021379414582 0.53943691420247419366 0.70857141618724339693 0.17956321556428211927 -0.34454227809503268354 -0.19346531555318385864 0.16279606486546613353 -0.065890023442562520306 0.56379378688181036594 0.11806632646575757062 -0.0073408315439831249571 0.088845856020062174974 -0.37787905166866953 0.13350826010306560132 0.3180775540105574839 -0.091055782289234027393 0.36612771151217698984 -0.1272086832254605282];

% Layer 3
b3 = [1.9039312738355846921;1.7410224373795049058;-1.4108551505587905162;1.2395787562743831867;-1.1054516537884311322;0.79875910782180481462;-0.61046111673428704592;0.83660969093504966576;0.14624185660798041941;-0.050942146206007010711;-0.036999927680999598889;0.3340429843524541087;1.147162156220900453;0.48711880567653143004;-0.80628089452371221046;0.79495852568981462127;1.1973583502859250771;-1.9678784194079681491;-1.3367521557234069984;1.7394882060312288896];
LW3_2 = [0.16194062093272956759 -0.562310163221609427 -0.34855812984421441492 -0.091476561922830892937 1.141286239813023462 0.26720242375519259737 -0.64994208002031939042 0.43181660704853969124 0.086602099489911710251 -0.72624518039216956478;-0.17809022280584582698 0.66793155430618045276 0.3058029337644200818 0.74913077978022812875 0.91633524205110183924 0.29260509118285032981 -0.3943100943798431568 -0.42777048819713658911 0.35320412013284252506 -0.85098508336489031567;0.13267245247457210011 0.2690050760656167439 0.27410333772656836349 -0.70387430280857421483 -0.72060540490107494183 -0.79887488970231568253 -0.67582117669909136382 -0.86284331197008423686 -0.41494360598719559619 0.1946982113609866949;-0.3103677133215571593 0.17880848802712698276 0.04050019622399303465 1.4293026676876090519 -0.76857075784722994616 0.23562719744739052397 0.48931767248990698516 -1.1217488408954796597 1.0107474692719640164 0.77324638215075958136;1.0296694107999593282 0.85495501281706332009 -0.22627046851047571963 -0.7872211084572695583 0.42011897414587201505 0.33788982003682938027 0.31176268930022149606 0.65975093063484824274 0.95229425858133542881 -0.77727719960841712421;-1.3605934974322888564 -0.40384589339638743422 0.59045113669124904554 -0.1637853938075898852 0.23107878313416424509 0.64925165336031875896 -0.9735120777415471327 -0.64750402202195334045 0.63886644365644318366 0.13772456857130713215;0.93593359098058059864 0.11049942537967427647 -0.51682997809519792831 0.24539768926624883072 0.02694903816815906461 -0.85471744309919917004 0.43298639685177620073 0.8404145831925331489 0.49903968575104362682 0.519392821244361369;-0.33428895896658589182 -0.79957856435911067727 -0.61566192522306573132 1.6129289088587788203 0.22167608362796156762 -0.36585126396807043925 -0.42125908271593182075 -0.028343233733053391221 -0.34438004335029520631 -0.65114252946640149844;-1.7830776311628606656 -0.42938869155918391041 0.011076471328130345004 -0.63483166447248051689 -0.82362589087031001789 -0.65188764814752608867 -0.33508012210101145723 -0.09266805602978767098 0.66187274401530793444 -0.2238708996355646963;1.3940870392472408668 -0.69641169938453273414 1.848055402324531471 0.6563551580663651297 -0.026140877936527986969 -2.7643633527855762111 0.17586278528491217088 -0.78095495917363089156 -0.57104943081278791706 0.2093894705300218817;-0.87458308907895343509 0.20965873230191034438 -0.84875146039779958418 0.55109677152036673498 -0.59125032004282429554 -0.032995800273172504191 -0.51555017549069692695 1.0723355221225390199 0.027306657004257599286 -0.96538001198576917083;1.2098948851723483333 -0.10243759541975022698 1.1560177353644169873 0.12839707632423322248 -0.25681291906826086979 0.46868941775181655052 0.052464231434783133168 0.090015613766074475954 -0.076469177326084880608 -0.86709766116792375001;1.0705457471743349274 -1.2786347128902419978 0.076833937497931728555 0.7271702770729617793 -0.79758206778311169227 -0.96203202354772865412 -0.12546906169116381347 0.60120783213232431574 -0.23965405129447581167 0.16011975459637506347;0.35767211524141284684 -0.60358321995809716132 -1.1736634858826275885 0.92057087064402864929 0.14349785963615194206 0.20528877782847354538 0.35049800523429752719 0.79764356258704993685 0.11218324345793755092 0.75956186898565858368;0.051232244753851068075 -0.10571407367012615464 0.44822912648275647918 0.10801949012882514078 -1.0583409989048866429 0.55503212482627750646 0.55858727101239424861 -0.34642947134701895795 0.93307048857661423202 -0.94945951629300784358;1.5834762095504522073 0.087850257041487189724 -0.79353099018875095094 -0.77365251515958688433 0.63634716941566638049 0.19546125496683972034 -1.0817316666929346347 -1.1162680520820318364 0.69074336573142791629 -0.39003652801349053547;0.53997740840498387183 -0.49035467956020650782 -0.94228384441710444364 -0.067803290441486710471 -0.69508100145256823676 -0.65829450412629464395 -0.73619746252274909093 -0.18441513838575362971 0.0925730551119928885 0.017922286246026652989;-0.54569577019384774008 -0.63098464403387688471 -0.42314594562420654311 -0.65967612518131690802 -0.4239804619111313122 -0.67008853353134967268 -0.25473130359439527526 -0.44716773307549428917 -0.43539134204872820266 0.68432102151432061543;-0.28543041891337883609 -0.49124537604373486044 0.031077192107308852786 1.0182858869421795855 0.80036412795937517117 0.91138050040503026938 -0.96080630694420687821 -0.34614271130501389484 -0.79066464364275756971 0.62400243075354000499;0.88678962687048890068 -0.56580904774475082597 -0.16399671847332850105 -0.67997895544158892811 -0.58060257756020294817 0.12813893504215104202 1.0990328745217932127 -0.78043805222427142798 0.79013247621161797341 -0.74000421272814009832];

% Layer 4
b4 = 0.041824762922019753653;
LW4_3 = [0.66394891000410849458 0.15799885685121550782 0.29522660437215719753 1.2602163406112467658 0.71486916298553526694 -0.9775071971968389839 0.036373834124298190518 -0.56183391524660541982 0.5406173110358841738 -1.3846084274894141508 -0.08500122097086836026 -0.34357335014799411654 0.82498544670696927206 -0.37460111050117433917 0.048558363239455393234 -0.88789078602942028695 0.070933314061492946934 -1.1052482224424613477 1.0824971717518980796 -0.86505527015711480843];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999945;
y1_step1.xoffset = -2.00000000000019;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
