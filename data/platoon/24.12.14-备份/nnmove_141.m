function [Y,Xf,Af] = nnmove_141(X,~,~)
%NNMOVE_141 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:08:27.
% 
% [Y] = nnmove_141(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.85918092085871;-1.99763696099884];
x1_step1.gain = [0.0522252737181727;0.148213484472979;0.500572177293996];
x1_step1.ymin = -1;

% Layer 1
b1 = [-3.8769971193678167687;3.0537692474929856168;-3.062352516724405227;-2.2124789406879936671;2.3722778172645071493;1.8089717204869133482;1.7967938832064840327;0.84619055633302320274;0.41397335614603886222;-0.55187352864090699622;-0.39561992036346399493;-0.49402427114065911029;1.488754575341951103;-1.4796903524790538942;-1.597906739233457829;2.245692004152748833;2.7235033056072857072;3.2811554936750395584;3.0955512012813697353;3.9757221613735320709];
IW1_1 = [3.3362198230108237595 1.4999377657279708842 -0.4637646990314494011;-2.5518333408576410193 1.1833774513380270754 -2.9931246427314106562;3.6495159676825053019 -0.8090375398113921479 -0.34285598666932165512;2.6756042912463486871 -0.42099842618912386438 -3.0582230078328458411;-3.6353986046666655341 0.35375046609076626902 0.015351187085903947663;-5.6796893812915039135 0.5500263573607434564 -0.60920760472515989026;-2.0345162642366334538 -2.0327918633154249406 2.212847194848615473;-1.3777423737466532039 -2.9162788865545752337 -1.4639496873570199131;-1.940415798073144904 2.9718317028192529072 -1.4734550677403719376;2.7738814130370337274 0.017956815624062934245 2.4378119209909239196;-0.79346009097590708414 -0.036852014716965961205 3.7449730787692456779;-3.1530588568471409339 -2.6103046341091986626 0.36211891295354564635;1.3648487565503240049 -1.7546418392875506864 2.9109276748123460443;-6.2103785356003058382 -0.84847357953933433272 -0.7018752436689146279;-2.8914660423690206059 -2.8666629782468975307 -0.21574382125953323053;0.81754891876575064291 0.15371500893751299799 -3.575056361160183549;0.6863832009217919472 2.8594421823072679878 2.3365019231743580086;0.6165158126335756883 -3.1693874284830170218 -1.7953946344339970498;1.3673596033138875061 -2.9450994415242357505 -2.2758393232638103321;3.0371927608768101159 1.5398481190561945642 1.6987609258141176394];

% Layer 2
b2 = [1.3182008289619742136;1.1793417062830819919;0.8239985855859338626;-0.67012689484787457683;-0.27116687599425237654;-0.0011127617341326161149;-0.45034333743535209793;0.63222453900149089279;-1.3011681149394769275;-1.6299681228153906076];
LW2_1 = [0.029896123712725340693 -0.22448588871767108377 0.022729433438878465096 0.34699680427576845565 0.41990134051479477417 0.65571025474652222531 -0.78911690369858900063 0.24490448339772105668 0.12613717974619306772 0.11579729984602932236 0.033650130696835575672 -0.45543925527769502093 -0.088819039408696107141 -0.32659458814045905228 0.068268338354866633932 0.19749352693297095307 -0.12678813724211893121 -0.51369140972306981396 -0.46063762955826342838 -0.61583875656089881456;-0.25170097238631861103 0.3922400356966482815 0.090623909673773525575 0.20995398240589285832 0.18045914600910395453 -0.14552874087231901234 -0.45917526842921402297 0.14036967997911894979 -0.42836543335478127759 -0.27756179027101191004 0.26814561996942831712 -0.19852032902268515469 0.41328050179834718847 0.77139565840517709816 0.56141369872447843825 0.14702030829110229737 0.11845699342055557302 -0.2236015998535184901 -0.50413418399462506247 -0.038293761152688510219;-0.29269438292970173521 -0.18419017641866822221 -0.39132787983585498592 0.47658695429854214254 -0.73525970932102135968 -0.36803761050252870035 -0.461716872501454767 -0.029194527614560657203 -0.79999875543205600792 0.6179969358869563667 -0.16069806920097232106 0.65702986047498279643 0.39105765410554954586 0.27373718109298356138 0.20055058628875535587 -0.15315674125885708756 0.10297643448489599005 -0.24363083623810397049 -0.1318270050742985644 0.1964951316981595475;0.71177696528152567534 -0.91074607881314406654 0.37861915675785001723 0.26760547814730245575 -0.41306723300948150479 1.624825450228698287 -0.67041822077963197923 -0.037443384761538980876 -0.25193438787140426394 0.053172664061881251552 0.034821227788821067228 1.0006175077334420465 0.098745192470596709899 -0.73059126258299844636 0.16101039050904492056 -0.62822746350377633995 0.44939315492341219693 0.0092949493004183640632 0.2622639518754034671 0.070210268325564900715;0.54588272978589269524 0.76206982224263630776 0.33889417077080641327 0.4617174513765214261 0.28156731094384512826 1.8336313176166874062 -0.44137843139561055983 0.1773699048961071556 0.25585383859790677974 0.69637259342197344036 -0.03229141649059589364 0.81306240520446404485 -0.02976649520266461818 -1.4031906856472122769 0.46632044988239862437 -0.7338779802080794834 0.24267960819671044459 -0.19093870300817936125 -0.081021872201853861739 -0.17533455187512628215;-0.5614812227181890103 -0.45407880355913443626 -0.45327574271974585551 -0.48204806856331672282 -0.038866770949778972621 -2.0149418551484918893 -0.48106711198470059054 0.19376850755293487105 -0.5841938099038849197 0.55640316878034745685 -0.45916252989853839628 -0.7119552840151414097 0.36374942061622289602 2.8549029714921170253 -0.90209252256393923641 0.34517918321592860886 -0.33584730641108667681 0.67731630734190972909 -0.27987393631955304052 0.22725221367288614416;-0.64329740472910645899 0.43135248434596695777 -0.44280506790695789432 -0.17309607748901537083 0.28866150638360926761 1.8972802667605335181 -0.40732096128577671701 -0.087733750959624864918 -0.22417564057489597351 0.14176643578672182278 -0.30286274139424423923 1.0573459381240495336 -0.64749062088539632853 0.42327720910463717541 0.44676251834238106531 -0.16251955439683676841 -0.23226969746323991584 -0.044857910557755557857 0.42548839635421259464 0.18481596328571173182;0.49742475737934233049 0.12978139942509628324 -0.16588649585781475859 0.63987407427381948199 -0.44325280852564225009 0.50860741315321711387 -0.34377515805315977948 -0.70776914169397786569 0.19447973426975992406 -0.57161041366792531004 0.30983870380230960073 -0.27490207359610391302 -0.62713683141482357009 -1.9119562693433322931 0.84679582887807536284 -0.10161056197407114521 0.4069611158870847234 -0.22574041613534123751 -0.40275189489707163837 -0.60894845775724715242;-0.17849729995726293375 -0.45759326229966590383 0.22185213025447331203 1.5574791028046326424 0.20754038252347342675 -1.329150646413991943 -0.49560624378214851449 0.27315773650759078706 -0.13338460426840229034 -0.22873098856973750337 0.10653595390591566461 -0.35749008073805488284 -0.013909877106524047574 -1.913613696787378915 -0.70715822801082839355 0.38201478081303080758 0.27447229057204003411 0.58692641146065527291 -0.48392212044765475776 0.36948150617700814546;-0.048138674730948474711 -0.22855736229274226101 0.12065258867317053826 0.23796794927382386442 -0.18252920668378441738 0.81943403646734935819 0.053126968567763908913 0.32803522692620196155 -0.248169872455037549 -0.47627064381867351139 0.14138209543722399242 0.68567721383835311677 -0.65982669690101625193 0.80674184828892436805 -0.079516698434709709442 -0.51028208183621914795 0.073213818265613905822 0.26037111456256739617 0.17303958263958954533 0.15812346702152940692];

% Layer 3
b3 = [1.8770813088628435228;1.4318551826357646117;1.5070665277639911928;-1.4038054134765605152;-1.013878178984804368;1.0121291296763792467;0.92028635409056402938;1.3182208602024445554;0.19772286858107721019;-0.64208010265304282793;-0.095129374145219033898;-0.29655987996732879886;0.92468418549987330124;0.48109828110799301992;-0.95004665494488360622;0.81556317156308866245;-1.3587697929714837031;1.1834502150363381823;1.9450545546622526327;-1.848065284385034257];
LW3_2 = [-0.56794473301053793879 -0.91372503593247533793 -0.038168855236944861098 -0.43067010925322868342 -0.22402743027264210296 0.78736249837246941041 0.84646752478231335193 0.48862115598373434544 -0.75989007298076249874 0.22872765247641638209;-0.97746939608042171521 -0.97993607979469332658 0.5142575961531007378 -0.52499142857025749009 -0.095302716238885337718 0.1128966177465953874 0.023790865602282031122 -0.53743072442599792993 -0.72271132942068649907 0.79110809140237214887;-0.31304954950448993234 -0.76901305387876817132 -0.74698600247688951015 0.49726409876136440369 -0.47512798388036953101 -0.48963133936212943631 0.69109792787948476356 -0.54476047649168612974 0.44803972384075241298 -0.8536174693564244631;0.54371208998254350053 0.57604881307689259629 -0.18660456826214336101 0.23886591362265377492 -0.42451381774608348829 0.011196600582344886851 -0.054954670342140771178 1.1333555237562009665 0.43372767794022776267 0.94866059983256179056;0.008615219696552387299 1.078981924610517229 -0.52708065398530712375 -0.82909899380182527917 -0.45497930849436657441 0.69676830843180226349 0.19522357358183989318 -0.57099597774819033091 0.38348912992375150388 0.45834936119136437949;-0.51037700767633487065 0.74066442970657653255 -0.19044647314063939403 -0.38021430181942944548 0.7532680698603901881 1.0639525346462550548 0.52818858096846132977 0.35397575477243153896 0.47012839516548926566 -0.37280630196215430727;-0.2772507114578684484 -0.52727407735300824143 -0.077473914021445003386 -0.45895499397974914846 -0.85934547097065328014 1.1800304654740856325 0.023728996239129086787 0.61335641965136589171 -0.48330368520464261906 0.69354631400056643287;0.42265746755301830673 -0.03183384569140128989 -0.59405440128721931359 -2.4405176837866586759 -1.4259628369785415369 1.8733516131975511687 -1.6998934407630921228 0.25498630999857868629 0.51970124387827676404 -0.2226967835320760869;-0.13206581442180570507 -0.21661814104311488682 -1.1689802984497494887 1.2078970689076315992 0.74037643304420330814 -0.36736558735357405236 -0.79934491355517678368 0.38647570998891300764 -0.52304228833486365868 0.20552172297917423172;1.0243187201086230154 0.32190468085438400658 -0.61716725731974031444 0.13096481418624561499 -0.84678973401874724214 2.7962907352267358796 -1.1550043026459961837 -1.6578706082886647266 -2.0137622753816990517 -0.099106134890547148419;-0.97925743302159018455 -0.61843841720638803583 0.31528525365884496612 -0.46391420003344424616 -0.69994756675953706537 0.56818522630253653904 0.25919879126557715532 0.4464386772652812474 0.8345112266981956628 -0.50806276608737266365;0.011525097670518744467 0.44370449601792177896 0.11203983449023015295 1.232826851101769039 -0.50799147690780455111 -0.30319889985760933859 0.47819205735803532731 -0.78326653458446182654 0.43696555003585174637 0.68737653389591601982;0.60920691038725816036 -0.0763648507354137418 -0.34796760135776899636 -0.33779671384341569684 -1.9350084544194661174 0.17121246511392504419 -1.2281435959556263882 -0.10958583497063650869 -0.41166207571588181446 0.029908865245326227839;0.8280610096389487973 0.74354639596604543694 -0.12096749632893052939 0.91112682612313311559 -0.32961816444045133334 -0.80094277908571054336 1.1397297703766688937 -0.12480162501582188483 0.58261098128311339384 0.13453212292576657849;-0.69153221559460098522 0.67051091793452788359 0.073789280605637677657 -0.73234903792889405327 -0.16188622330351248868 -0.17382590505184492002 0.52789643919214535028 0.63576306160223372554 0.9924954024150006715 0.33607618157551399918;0.43451218549868070307 -0.096515607567019268132 0.3209490832899518642 0.64143356496335535155 0.10025504269749288544 -0.11565362370973933381 0.54518619665121204054 -0.69198840929973781666 0.19676989223817070718 1.0300290070445270452;-0.84574726459187388183 -0.61678474302454411315 -0.65146355606340244915 0.99299063753043070868 -0.21063607598501540852 -0.076691327912348158935 0.35306930451043960772 0.15110092843559727593 0.72172720103458942731 0.40524498943438913567;1.1342362054869066235 -0.22755781576928718613 0.44865633862978221424 -0.10985019024433981261 0.87128668634662154169 -0.28945372151875237154 0.57655018617652797897 -0.21647043573043087128 0.40687328716866916212 0.82613605921089827699;0.76027131321548002685 0.51726571380340913286 -0.4757395196366764889 0.56927264985257153285 1.028513414830100503 -0.23682754398792574269 1.3156875440362583163 0.34407515690395457097 -0.87916881832272941732 0.39867770928877344083;-0.75100581426210255565 0.28772448388688454113 0.64044816657539971327 0.80425469490341749967 -0.13889046043985961432 -0.47200362031470061153 -0.47915662217682519763 -0.52792984170819756695 0.90632743137559623747 0.57499112001443963837];

% Layer 4
b4 = 0.56218210699398507568;
LW4_3 = [-0.10569395863121926193 -0.30060355595213539281 -0.45623391455438494502 -0.98865124497461265296 0.15609017341131187218 -0.59652744373868160643 0.59539709183973232864 1.4666038295227921129 -0.1918941766764845902 -1.3049708710480962814 -0.37051974998000075656 0.076678652952957546129 -0.90287027288325782948 -0.28321166794619945239 -0.17531675813934408104 -0.085063699500911485463 0.27747458452598772194 -0.16049750050445107941 -0.96364356900227399194 0.090376532921625937766];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999931;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
