function [Y,Xf,Af] = nnmove_143(X,~,~)
%NNMOVE_143 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:08:33.
% 
% [Y] = nnmove_143(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.85918092085871;-1.99763696099884];
x1_step1.gain = [0.0522252737181727;0.148213484472979;0.500572177293996];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.9237414676074338082;3.4498600275479573973;-1.9934351795690530285;-3.3099003606062114002;-2.8914242185146212805;-2.0184795826453574286;-1.248225426585982234;2.2810477396400177241;-1.0126169103163635832;1.7724572593970631118;0.31788282481322582829;0.46485856698003091836;0.14448847133579273416;3.0992905618411095148;2.2557416444890248108;-2.3479518094435287701;2.7236596836922597475;2.8808398949760998242;3.2327489169304097771;-3.361912800972400639];
IW1_1 = [-3.5745561331627344615 0.25068359535904055635 -0.45490635525492878477;-3.0847392580638044457 -1.7050350933642401952 1.1650722322263982189;3.2390816999206855087 -2.445172366291134658 -1.3135710344185493881;1.4210181122795160213 -1.7647191303903331239 -3.0188473105231006244;1.2070765002797201326 1.4391968008538291723 -3.8233063197779619813;0.25838220549422646899 2.7381029858866923199 -2.7492469014097502544;2.5258274346705551494 -0.39373994714129073591 -1.7288035120026843394;-2.9252536409010843066 -3.7943686593933656503 -1.7208950157860480878;-4.3504032954187685789 2.4654304846817542973 -1.9438673021648886774;7.508027765028105982 0.84208764744733466401 0.66433138967188476443;-1.5607059814114907503 3.9538503170296888101 -2.2826675698332614672;1.9780926451106037867 3.034528801451508162 -1.4443132991688667488;9.3205834369830782293 1.6261160325539103511 -1.2511706631754564434;-0.22763617899574947745 1.4666750157311758684 -2.97029394878510411;0.72097176480634572737 2.6728595238376748888 -2.8659328418836707009;-0.095541043859066532296 -0.98698840556567679627 -3.030224049104164763;2.5086460260722436288 -2.5208943751112444787 -1.5479412924254363215;0.83357153026984021071 3.3896004593101198843 2.2881230185391121523;2.0926256672168070949 -3.6792914857867060618 1.9996023915180445307;-3.3331593024410786086 0.59918812996707282448 3.1644232374478522551];

% Layer 2
b2 = [-1.8416812724229914;-1.2431253175374266107;-1.3905571964187604106;-1.0789092096453212211;0.13817518768577488619;0.23642827826423423732;0.24533398896606609108;-1.1279493673275426957;0.9426299037166852024;1.619255246329570852];
LW2_1 = [-0.10961109967628986095 -0.52965782999462995839 0.083527115097664639265 -0.44277431262676186785 -0.62919962056733202971 -0.44738591735176125308 -0.3636195859388581253 -0.84695289770791459816 0.53631646770343177621 0.032814780738069634913 -0.45006241218985060248 -0.32033974143005011781 5.6335213579660265992 -2.5652066045413448592 -1.2313309356461556998 0.38451200129142354411 0.31568212865259770439 -0.3834071357679897929 0.34744192997035194814 -0.085357080979833549472;0.16660473639762654607 0.28093531965868429046 -0.12235316860313816267 0.28658090047598416827 0.10403879534927509831 0.79566383442843013896 1.0688721760344692679 -0.062581995068371656932 -1.530903417513848952 -1.0147832461911518998 -1.6959002789421044888 0.69541841544798477237 -4.4986019447300060747 1.4394317395212552491 -0.15437098158229167755 0.34795220526691622576 0.69309975835924453325 0.62374684128837376562 0.54814827553834821749 0.16915242633843088904;0.32295921519534015465 -0.66062404151291231891 -0.48964057358230245187 1.1368680075968700116 1.3864580372590387114 0.54817634361368194895 0.87025592872839596659 0.33239491958739963984 0.61660970229267919596 5.4391198721581091036 0.4226812804424061043 -0.17068893283216229895 -0.38913196732134641698 0.18841268280615236508 -0.07681890590783722883 -0.51719918994555247327 0.27041870675812196279 -0.055060798151699744118 -0.20814732570818267332 1.5039518555667210631;0.21100796841831037653 -0.6133777823387905892 0.63486840204421624012 0.65211542797953636619 0.052624194793103887258 -1.021429820017916601 -0.88328917336943768568 -0.23534511575295774533 -0.57369674724563235468 1.8055564613075543168 0.057679373346916452958 0.94575964312763960429 0.96386057816387571417 -0.87405729652482366809 -0.92090393600714992584 0.013537878911509801383 -0.39899594258594139884 0.3505476968421001871 0.10114068141455420657 -0.17898680600923105866;-0.051083574185214475349 -0.45074482763775108873 -0.28897778271382734694 -0.50192107658381146518 1.0209840199089517121 0.61084809094358261117 0.33305561675112849152 0.13059060042300321691 -0.055925638444045459863 -0.75229240801665275828 -0.32362234444600790351 0.049532728613034059106 0.293106919847035019 1.7347981598527868474 0.31594634152372474967 0.51090518132888684821 -0.25728883254104911726 0.71965902339717335856 0.11169220292987321053 -0.94685703489270256483;-0.51997918062544279394 0.71993112745819243248 0.31474714567745853966 -0.97190591927417135931 -1.2500645122507392237 -0.54390199319465326599 -0.974245581118366899 0.42410988504793206699 -0.73103879353337142266 -4.3130152392081777535 -1.0846234452026231043 1.2117381371225961484 -2.9195927092129667635 0.77536738050770914743 0.46495062214316373872 0.26420980406089589199 0.091801227215615982535 1.0462819403181395916 -1.0594776199515452131 0.51368794647444315782;-0.39232161809093374361 0.29413001917621933723 -0.11890056735546669642 0.120875742856397142 -1.2116235417109046946 -1.1511210614635167815 0.10695532149490617757 1.3271138259916657187 -0.05341431280327772757 0.69858893858047199643 -0.49099774091136966225 0.58662345747527866457 -0.062694906901079816564 -1.0192634044815862548 -0.49341645669374201155 0.44317606931776964974 0.15148195091945013124 -0.33675469658422013675 0.42727808220310847798 0.078785248469291732643;-0.7723774202723956428 -0.3517078524024915831 -0.12683207003128596502 0.69452992453536122053 -0.69588168965742391858 0.43658409312517187928 0.48817187984685250779 -1.1248394330529454255 -0.36912590295810393526 -0.030408315886644589343 1.0226589108386012761 0.5308901597245002657 -0.12046657395223023257 -0.39671913790966450986 0.1014352866661575453 -0.12701468003452734412 0.61332019520866687401 -0.2021185301925212674 -0.32719803946338610334 0.39489750058225492335;0.34486836474345700099 0.10612819157380272428 0.18657479519651878896 0.87937026280705798964 0.7092570063798576685 -0.74262602215475737033 0.0046584155867171166826 0.082601021670510629824 1.6343410982860553382 -0.093139517023637111159 -0.61739193197372632671 -0.31544778518306593185 -1.5545130316061264164 0.15799799917858992071 -0.004783554109136063659 0.031341279807159463933 -0.33590446919713612406 0.55934452750537277943 -1.518428880056720276 -0.32025278444988702908;0.43215586697793451076 0.17999976686828070283 -0.2178045095321373692 -0.40518343994449601553 -0.50311073903172642829 0.053297223651188739557 0.41484757800657173776 0.55993546680316719222 -0.1224350969410907819 0.067847414002496983509 0.34496273839920488236 0.17242932082034503893 0.085472459024264743621 -0.27466179865587758702 0.44767376106354306309 -0.12292610380562143946 0.59545974105284815714 0.030732143211156203594 -0.57092545289735263658 -0.50808692349067929861];

% Layer 3
b3 = [-1.8822345549790091557;-1.2484376368512248856;-1.1875699508880481758;-0.76041645043172023666;1.1515920894550251141;0.91372331806377327101;0.32841252756072619734;0.75420373476116042699;-0.13889550683041204659;0.32908586866673750215;-0.26338230781048527218;0.30748864340512416238;0.45479966935484400503;-0.67889024648768336867;-1.1399035398311150313;0.34948055811621697719;-1.8316090259598940548;-1.3471211199170278761;-2.5009192949356280344;-1.8980818145174878087];
LW3_2 = [0.79887236669691064073 0.11090065359733256023 -1.1969594934473564152 0.011370973098023482925 -0.42848270989804443376 -0.47222844085843063144 -1.0355307344815853909 -0.40265486791743743122 -0.97163652376777320807 -0.5696289726439718315;0.93818778400357927261 1.1275582375048938122 0.067819289817331429582 -0.13849161231308496078 -1.0830180977507628537 -0.069632391795397485801 0.29616316700907208137 -0.630433270758036568 0.12386265493143862326 0.91519163008600112885;2.269478611838132931 -1.7695096768798144193 -0.49713407163289763391 -1.3517866180464153114 0.72016890099405173054 -1.5979561816236740324 0.95178441757582121774 -1.5814305077716381831 -0.96930477400665804311 -0.33917351539998080723;-1.2830763316932474183 1.0049810036581516837 1.833292981327760085 -0.033351160994548066652 -0.72037886367508652263 -0.52992275490115570147 0.36483618299447923006 -0.12630366704803286382 0.24318141495145753628 1.2415706981767602457;-0.7044878799623225385 0.066126113401263189595 -0.80405974395799839627 -0.69778485847100757411 -0.23189686805915088463 1.3601839483034579015 -0.52146641954883155012 -0.67172276695507704414 -0.10413266159012758705 0.37712054420688984058;-0.55384577463256645657 -0.18679875128363870873 -1.0740362612539890996 0.16273588548272852061 -0.24658439150184657818 0.96245635162105236393 0.34569866332339349579 -0.82463408683503069962 0.2530801239121099333 0.21353887565801077386;0.32862419123119523956 -0.94302689650272719657 -2.3615118412334950015 -0.56804444834031897482 -0.68573000930726979441 2.0326042813901885609 0.015880117951089622874 -0.65551822856422448105 -1.1311110738727887526 -0.51959962335843778991;-1.0834305264955068626 -2.3111248369406407477 0.26824308411794656193 -1.3265973011992284736 0.82417259460319070019 -0.21481556070967214311 0.022442534988214784403 0.63444431239216947382 0.045837778452903370219 -0.12473394388169474489;-0.27483088741979422309 -0.34891649004849262239 1.9289424344495136321 -0.70413997429766883585 0.15629373782876732069 -0.80561720094858302321 1.3519597935939609012 -0.084544029719882951568 0.26266546606517743312 -0.46079072218346328604;-0.0095895505987036860907 0.68067893580248739482 0.63909585467451590635 1.3917895746035535698 -1.3825240220775552036 0.96900170677739128067 -0.47553463244407390142 0.58135651361983220475 -0.64362641032289635845 1.0401744079456649583;-1.44323190822103542 -0.15183350820336519171 2.2230846799190380203 0.51394301207509873741 -0.63755711475579068814 -0.22247259009440906175 -0.70593431632374825657 0.19149300344135980478 -1.0624341451870853437 -0.91433152858225852366;0.46302621797512061308 1.4112297370590047851 -1.6724961945278671305 0.81649359560396228552 -1.0772606717598425252 1.3333117034189099215 -1.6128423224875665376 -0.69685477461775857666 0.18181224785023297752 0.61566027047676574746;0.58057838560765950842 -0.69004928297468415277 -0.45101896983110512096 0.11368888397241458388 -1.6715300885595976155 -0.098803482493725586222 0.52895373522315913828 -0.55291660179266644004 -0.28405093780381196478 -0.49592939563651533552;-0.43956738301071968111 -1.6841402144104840044 0.69516048485171155757 -1.6215730199256914723 -0.27784723335377897735 -0.1364329000871247477 0.22084321143876506355 0.66280889526018682556 -1.3919282409688829016 -0.65874803519144053965;0.65078026197030036659 -1.230261855359827905 0.396110906798342155 -0.36220481154637029775 1.0851694257305977143 0.5411122638131886653 0.42530194319267095038 0.7055056286872136706 0.088302441815455587348 -1.1075005114612437307;-1.6123830935286032062 1.0804958289185329079 -1.9839213052604931509 0.47469678486421679198 -1.3172288229126107861 2.1670305717680538038 -2.050755731428191897 1.0661879741787245734 -0.34000731092979802339 -0.94103882369864599866;-0.902735081483447388 -0.22576801131028853553 1.5102843719103966613 -0.80724866687582796931 0.80337794773281068217 -0.8936046300731422809 1.1457856835483992697 0.42684983928152836485 -0.4694418792925933448 -0.038441116651263304571;-0.91355846733214751687 1.9126541534077430295 1.990759124209679598 0.25384955382672208524 0.47204438644166452077 -1.707956319273206347 -0.31637831620767109531 0.0028093901971901901089 0.083661163822560294379 0.8917760305840923829;-3.6084445704352545725 2.0959423774375864902 1.3633838425512303516 1.3850531002686310433 -1.3865206175066002725 -0.21672871690732503636 0.19169262250821211824 0.17031098634337990538 -0.46407526685736133487 -0.37971431261121474376;-0.60206031946110383224 0.15674207972689160884 0.92601713389470530213 0.68066282029852953617 0.5720510655190753635 -0.75116296550350836192 -0.49310115970940926466 -0.0023251699188290273802 -0.050640881464906438436 -0.86274675997942351646];

% Layer 4
b4 = 0.59671524719030333284;
LW4_3 = [0.99893923996480282756 -1.063432964167975836 0.88364188675236576831 0.38734347982739669725 0.72780650419295445097 0.0851153435716381912 -0.59384109432937259854 -0.79644599580016484097 1.3397707172651718288 0.87138571581460333437 0.87960393143430559704 -1.0639629204476188651 0.26657162812134149732 -0.73913423835547575891 0.72859060707471212659 1.1899298959477155879 -1.0247015262425405169 -1.147957945995336182 -1.2349645428006601477 0.090561024567965692222];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999931;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
