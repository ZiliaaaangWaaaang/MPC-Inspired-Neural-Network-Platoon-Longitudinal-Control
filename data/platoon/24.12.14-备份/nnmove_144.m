function [Y,Xf,Af] = nnmove_144(X,~,~)
%NNMOVE_144 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:08:37.
% 
% [Y] = nnmove_144(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.85918092085871;-1.99763696099884];
x1_step1.gain = [0.0522252737181727;0.148213484472979;0.500572177293996];
x1_step1.ymin = -1;

% Layer 1
b1 = [-4.1398787046378267007;3.5367893332105801996;3.54979815077714278;-1.5127229992681141546;2.373234508097408213;-2.2751468455028787119;-1.406511698111712283;1.0098427297242118517;1.0310312953445941453;-1.4878414876256265131;1.9715788576455619552;-0.059518285028629366873;-0.85671315829319993895;-0.41117986206718332154;-3.4193533631567105679;-2.5605366955619661695;2.0223416501416280333;-3.0283149261960002896;-3.3505005822183324682;4.0961758650261925752];
IW1_1 = [1.6869090695931825419 -0.25992876427096078817 -2.9805774230034232097;-2.9949294812696067858 0.85926811835249683469 -3.1066751430742849394;-1.8722064091172128109 -1.9428502405959424681 -2.6863507744501080587;2.3197632700310788501 -2.272554938890062548 0.98296721659209806976;0.48271890100998937623 3.26632939923279908 2.5520316160291396379;5.4700170058437906917 -0.094726466084981725269 -3.2292442200800164365;0.15184752668692250155 -2.315299342137988603 -2.7444966817256704061;-5.235833719494070948 -1.7338198141595562163 1.6851856639245703651;-0.98838823720756996405 -2.7820812756227826235 -1.7686923426637461976;2.5918550359458856214 -3.6947116517124083401 -0.27049999177235589665;3.3301017216137647203 -0.16559804866140773183 -2.4933396234211229192;8.6586660979068490462 1.147177596148626133 -1.0047502110352253268;-0.48718197589464062869 3.1652984036948970115 -0.17344821306363830682;-2.5452068650901766844 3.3628193277341567047 0.68913988105206291923;-6.9698819899042057102 -0.43982345509099918246 -2.5547962921652058732;-2.7962801672303512213 1.7039226876629414154 1.659382416498182522;4.7980712610433631227 1.7182825517970821139 -2.6069473659629314177;-3.1150478880314169672 -2.4563842194099270166 -1.5942715749159175331;-2.2010935674292344544 -1.9083871397519740487 2.0328598582176522491;1.368019991092191523 2.7235095364880042013 1.8210268608670299173];

% Layer 2
b2 = [1.9412849792790174419;0.88370914441531767114;1.1895527189072241381;1.056643730358202804;-0.26090988411855636775;-0.32166969505981346522;-0.33600132509920271895;-1.0100416332589776669;1.519803284522794673;1.3810864911841944647];
LW2_1 = [-0.095024213596126297365 0.27702620897756785601 -0.70579664318058998873 1.6819493218287207004 -0.5778296304778888226 -4.5857120639943005358 0.77831483789236810544 3.989044895820508696 0.79224987569662974618 2.7036748735641915609 -0.51322080467371145041 -2.299614882693522766 -0.68841780868655000347 1.3345462725617081023 7.0621595895369830842 -0.62719210274215442258 0.32930533496446562358 -0.82734234415771990001 -0.053853542462704961924 0.36426818533187105276;-0.030344571813517368791 0.04709717330042192257 -0.43388091988587190739 -0.40040147419113097937 -0.10504930832320141798 0.39812335116719488326 0.038829002697533858413 0.82087486442038326562 0.82609844110104946324 0.54173307139349879957 0.068138175672484022072 -0.62665899557626325578 0.60451491544024738012 0.85381599486232173657 0.34476251076885722213 0.074233491406376569954 0.22054174168162063441 -0.72011866416746661557 0.74148714948044192052 -0.6931989146095069998;-0.43885949687779901573 0.47617053998527369973 0.017344258247108126914 0.35959899419068902526 0.6033543074707596876 -0.69186762915721866651 -0.6382746819830164009 -0.55546448955518001878 -0.73407589175427900852 0.38581893118646554131 0.41297325556254926848 0.56225747205902243397 0.32378448861743502896 -0.15615501567069095534 0.3423998876404897862 0.05448440128374597291 0.027922690730755525546 -0.10806120808753452711 -0.55251166142722263341 0.48431251648663975473;-0.50133276310514229834 0.063590580002516522429 -0.38041194764079705459 0.49847033012285907327 0.74931513534450622238 -0.02296421740734603395 0.14774660277734982805 0.082829161470946544021 -0.51055144009177866327 -0.16833466069931707354 -0.48649826384949629299 -0.021608251760713338002 -0.26779552760372776765 -0.31759148131684078464 -0.089998118270270918706 -0.25738363927157476008 -0.18710902071410531744 0.33214547076065281672 -0.77592587910300603316 0.44338605963393457055;-0.060784104686384864136 -0.37803380264888297724 -0.71032487436111579893 0.074936431895177818552 -0.48854388843924678731 0.26747092460386706625 0.62692814282213549237 -0.13285581614623059865 -0.20396277265766110665 0.2704811248553234404 0.16685142143492404099 -0.13557952792478358828 -0.27449379551670122224 0.46173306697319982383 0.15449002363922495484 0.73665741268005568987 -0.83390691660563331933 0.28165206337090809008 0.93820364645127751757 -0.77914478344127724441;-0.063291787418857450853 -0.37006131836786648748 -0.43389683148128249668 -0.63381064051138225057 0.8596191387893697966 0.19238731454882834759 0.15765619475077446987 -1.1752746734838008802 1.0343151983168690222 -0.96817195760180452258 0.64171980346185941713 0.43293331932449768962 1.2039541545386647226 0.97565087169424746794 0.75451275702904041509 0.13599985111460252685 0.74535656045376708079 -0.4834514489073799548 0.26225260808976158522 -0.68491650136904946855;-0.65567768346708910077 -0.6799800194880574189 0.68092169135434077454 0.37461570472858168879 0.88270166736673416619 -0.14511235483579842942 0.63558369862015251517 0.57805121089350863794 0.64298926097451669648 0.64918278867521717057 -0.84053240646644333811 -0.73328802613821497669 -0.90602170392915859498 -0.36365136637705802736 -0.66646918515439534936 0.18751565327902131042 -0.61008136116236277857 0.47264010562417974048 -0.42737624655261269302 0.12428041182335172743;-0.20115929931444970213 -4.08760022498782849 -1.425289149034482783 2.0834592279876256171 0.62172593708999090989 -0.71182234489393902965 0.089088060539274843697 -0.035428819569785184596 -2.8151493175353139442 1.4120296144963708773 1.8969269873977334662 7.6668977758033571845 0.35051129068728670291 0.20277157442435625456 -0.60639869287421610533 0.18883981124507448479 3.6485883074250105018 -0.050312408356212381944 -0.46097359100186507952 -0.38643100041918221343;-0.28799433834202786686 0.60288286683135960953 0.85146425465386255116 -0.22324366096827294448 -0.49002905064006746505 -0.22548997075827151293 -0.13921584167379835728 0.60079182820249621422 -0.13505422221075327749 0.47729851314446491983 0.27341260326365629529 -0.33799151361694368401 -0.1548241363340524257 0.052343242431155415084 -0.025730783147829561219 0.24168044385900330773 0.27696914989824128472 -0.30711975739138980268 -0.057524014022313454952 0.68782616886774838871;0.12410281844520386352 -0.53809460846838919057 -1.504172115890092476 0.31168148217710445191 -0.6284907865187774334 -0.57629377540542892078 -0.41440024652060580834 0.28575026229919875398 -0.11317421340780679795 0.33402078502327042786 1.6786094350904614547 1.2870582065212741174 0.69453350837072991286 -0.64554292798853363244 -0.20454042743608197297 -0.44275185920167581255 -0.032729964761599700251 0.06020588346037577393 0.090889771669182356506 -0.26051655987434357842];

% Layer 3
b3 = [2.334672586802231109;-1.5717748275759704235;-1.7614574393370092675;1.9350084248012515697;0.81242919084307196886;-0.75625023165432903038;0.70809568982642501211;0.38460246461854613598;0.29164319148172884733;-0.067585332914062004606;-0.10596388855868335566;1.2033401043784679452;0.83868194237003068636;0.59524407137742085805;-0.74478338241213404292;-1.0575034598748354053;-1.0574844226401927116;-1.3023595829303933336;1.6457846171028605031;-1.7593335583101157304];
LW3_2 = [-1.8116652535482113962 0.060240383951184348077 -0.011683464587108435828 0.028725037796078326663 0.14899685658791150811 0.44413849587436543542 -1.3522904141673239842 -4.8047237060248182416 0.68742309357648989643 -0.15562295664364514391;1.2823319817458591618 0.40487247008642651691 0.062729820200696451149 0.8515929315881046735 -0.40831716551209329413 0.74376131292513325555 -0.88564455478053405457 0.79701673914651616215 0.26500200814616287071 -0.39029946904819379228;0.82493911944759967803 0.94567617431594785948 0.40167707331629320944 -0.0049335690621836380751 0.36843978867030469093 -1.568191834230556525 -0.36858182883465828716 -0.22204650124669661482 -0.063135207594846545764 -1.2835517272319618698;-4.7111268693993020307 0.52868669142802304783 -0.0081021194238459770531 1.0282376636004033621 0.39810256013540390452 -1.1188197835028392824 1.607431626041027295 0.69018780633548837411 0.65473363293158215459 0.70632302950448166978;0.016742777142233961074 0.36106850537897994258 0.38066236926893803894 -0.56763035329909705684 0.77291092135087180459 -0.61758955029151896277 1.2578268151279272669 1.0441831149116256316 -0.80497315517906575799 0.32404402656095349089;0.38944195664512776256 -1.220578888386959493 -0.37099135407477823456 0.51773247780288511599 -0.3529909857045914201 0.66227183386903198947 0.93155459974234122722 -0.70591708323234614308 0.45772424306295689256 0.20593843434244096802;0.34827322687535833268 -1.3439454663793619638 -0.060850595012695442299 1.2048665685806903003 0.78357635815241999389 0.60632990243772633132 1.0783230887433756795 -0.006343648251282238415 -0.13573587916801846398 -0.27012812731852098302;-0.97206726481011307417 -0.26261058945203186177 -0.67831971873167895559 -0.068022360744872542582 0.09943627954646887257 -0.89152116114235202549 1.3269042345127961546 -1.2128872572138647001 -0.29781940173900378621 0.60458793508207198109;-1.0831621351856617341 -0.47486729914246650353 -0.83956679117671573209 -0.46687876411238460328 0.38115439391310479422 -0.51164984216640019277 -0.16954933452027098895 -0.88713025162991887562 0.13072171931473799966 -0.56267399619450464421;-1.6697941764098336304 0.0099502109753407137066 -1.002661944311815212 -0.67823212094707185926 0.77034365648096314594 0.21932006867647230175 0.51205629195654678298 -0.17797487823869836965 -0.33040959775396544496 0.43332635807217778634;-1.1905171339939077946 -0.93569653387162210478 -1.1508533783864589584 0.26321292858620848332 -0.48182884819256532882 -0.57000864614055590796 -0.47448512614480437 -0.69225067849359456229 -0.33818255848890693693 -0.96006108898297293219;1.2466731930360190894 1.0170852142008124375 -0.2062641538891360482 -1.1795632648434326573 -0.46850404892467040208 0.66988863978152812795 -1.1678136984832172551 2.0125363979727439734 1.6460840175717614819 0.23196339112590394493;2.5695072902656947988 -0.30622972593545916276 0.65374410901283275255 0.17229984854815724726 -0.64865995341236470928 0.76961319028361829808 1.238630131531715417 1.3433448150945812571 1.2397409993659145311 1.1748883460146704039;0.46805423522352490595 -0.18353972513662059063 0.5458433024960048785 0.91719320866486453436 -0.54045624782268186781 0.33633404876241534964 0.5041102557334627976 -0.41952493713728628011 0.24326412669609606687 -1.0630762065027563601;0.14400014017241499764 -0.12544450538524354322 0.40384421019685096121 0.88484893031749312087 -0.03974174441302767008 0.45155461971143195932 -0.83819016177276861601 -0.61948118730892587358 0.94156173110102647783 0.46697862359833491874;-0.28767490619920993433 -0.19965774821659154625 -0.59194438226876955333 -0.022927080541968763994 0.30860153050359312443 -0.3909018217980185228 0.66432197169194573405 0.20204922928194757326 0.2435447565886811605 1.3000913676240184458;-1.3998647723991048952 0.30531991214278619839 0.62347474394421831256 0.54245043478020449346 0.18516880042182640165 -0.45716813020046570548 0.069690009286787965581 1.7245583470806626902 1.6818414653312114826 0.053006013482290684213;0.61379348320294080388 -1.7122220532850038754 0.86341327805856904476 0.56569555465146126316 0.039373465077584775262 -0.79848210459793489413 -0.29875763747827244199 0.76117124457099405443 0.33123570905198296277 -0.2172144616662181893;0.46142293179318016882 1.0095588113104008166 0.474829798052930796 0.71068529228820742638 -0.44239727543663354137 0.12726819002567671402 1.0013453199211894695 -0.13883232462824818265 -0.58800817461940468878 0.49941887839260190596;-0.74498817992483390427 -0.96428443056145596302 -0.74411301064930146509 1.1799524543385564446 0.65020901097933470059 0.33984733580916109963 0.11249136548811659864 0.34205131111195635762 -0.35252974195914332789 -0.14280505664003220745];

% Layer 4
b4 = -0.095949823392974448177;
LW4_3 = [-0.73618355567826399 0.36378501686002884252 0.088603499313041719776 0.69371497907176860043 -1.0666282494286887239 0.36246154452235995747 -0.26646391363732629953 0.32478317996581601568 -1.3086610464265036047 0.42032095174637601476 0.74790419874861135963 0.19880419592269490958 -0.45126850938530793655 -0.4029939909945707277 -0.25051319993767628969 0.092950888843230633496 0.4594775985474064961 0.066380827803735414916 0.3144349235279941257 -0.51699735169838789695];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999931;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
