function [Y,Xf,Af] = nnmove_145(X,~,~)
%NNMOVE_145 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:08:41.
% 
% [Y] = nnmove_145(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.85918092085871;-1.99763696099884];
x1_step1.gain = [0.0522252737181727;0.148213484472979;0.500572177293996];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.739386659439785543;3.711195686718742337;2.4605910381971209944;1.5225730520652644984;3.1145554074233592345;2.1667465670385905874;0.84593837818889028313;1.5283973905801215842;-1.7762779649505360258;-0.18720933287706628678;-0.93639521030925487732;-0.34017243487715814743;-0.09156253846534630203;-1.9375110005105649069;3.047157254017904382;-2.7572872465612991988;2.5378184060983715042;-3.4133080932294408427;-3.4983729768841853591;-2.3615017036338943335];
IW1_1 = [-2.3788042287215112047 0.46345701949010348342 3.1330711480047308548;-3.0245273703601056603 0.36319447912131302969 1.575662222994970163;-3.9020733481046319113 -1.5577140179626480787 0.74873857324105197453;-3.7408115499888543454 0.61310141410972318621 -1.7955354886241214896;-3.4725068909613758805 0.57063091338865290503 -2.5897413160675659682;-5.9799690368865991985 -2.8106687105383794112 -1.4263691930316440004;-2.4200512052691784959 -3.3328452786359750171 -1.6560241820232652898;-3.9392582621991700798 1.1287589639049204759 -0.63500843035668663727;2.9296239971983046857 0.87007735362569160742 -2.8531561634728022092;1.6910028229045708237 1.7675540019469213604 -2.350784175707495649;4.0580642784606144602 -2.5751932723953334659 0.060622175475107543952;-2.245303474563747681 2.5397149229144129201 1.4843688526815164153;-8.5323225969698253124 -1.1951919367381511616 1.2536965464893325972;-0.13267530900417781603 3.6147274681629411042 1.1356195818238081774;2.9665703618623004978 1.144866094996057404 0.18920551029332668969;-2.3986072688158159849 2.2865547928081917384 -2.8352946289001730307;1.8128377783872389184 2.010037714459863345 -1.8585214845081892143;-5.5153270917240035942 0.14822738355535108878 -2.3965287270323991642;-0.74056138099394119845 1.7530816890438378763 -3.4161491206285647948;-3.3997913368776875309 -2.5493697008047626618 2.3455554454644489404];

% Layer 2
b2 = [1.2155647524111155011;1.2110046542330870079;0.90482865540483792266;1.0823086676518216542;-0.065652241588725651633;-0.70126751346950988442;-0.22428119166957466435;-1.2305920406124022382;-1.4246078853763746164;0.83471647817383620716];
LW2_1 = [-0.74676830163035190502 0.26791241624713568736 0.93856758166676546029 -1.3588107303545038373 -0.69331123166791974732 -1.7288487210475023126 -0.35894679707890464471 0.29032331972166597334 0.28892628203694797895 0.94684361219737900317 -1.19501548354144016 -0.44546625478409651588 3.112762683212401793 -0.38318378359617377704 -0.20450734412366422532 1.0546922718153324272 0.2361849074735494769 1.8912748566532475714 0.10206401755529566355 -0.50275192967665316424;0.44348184951415658972 0.21911864203467162904 -0.83771838737932324825 -2.1222418655690074019 1.2313749074726854094 -0.92585924279795350778 1.7853842814008198392 -0.86611520217966464497 -1.7242593488195763207 -0.78722248689725127235 1.0096969759373006781 0.63503191744721032563 3.335465500551664686 0.020639552917173904778 2.0316775883624043075 0.69211249421317566632 1.3220499670102900946 3.5617678536507728637 -1.5543742116319823054 -1.1712758904601974219;-0.78856441066436078202 -0.0092016986827844378383 0.38470679109363514758 0.40650921283572744036 -0.28708955496009919139 2.3141143642917110235 0.56099318123494257282 0.14193218743294405693 -0.38370585984684429937 -0.75455345501452630863 -1.0897025997515938922 -0.90979229408530237766 2.6019663757358881817 -0.090764209435410594939 0.42604851471280030806 -0.25762350336703176978 0.54562800531447286367 1.0512689421076955032 1.2038005528275999012 -0.51578580533478579628;0.74691891755956207888 0.44688442795815963571 -0.022194481774674059554 -0.85625298167343744105 -0.091402075228458640188 0.87081290039131109548 0.66558569199430972496 0.83891511926889117401 0.99157508179495568168 -0.35580627957250215987 0.060644786555425447827 -0.082501944450310185641 0.48003757146296338609 -0.23539761039493869998 0.65195146362250566696 0.36819375775334561851 -0.40751790886198380193 0.055035628639009050167 -0.4960232773003604434 0.10468176253411118348;0.54848450865770936868 0.45546113945280047863 0.44826356750769724702 0.19640755989317590369 -1.0919686871264218109 0.15598120800601331104 -0.23700972603254213955 -0.16869304966730275241 -0.03748815129670727414 -0.23894900816975303548 1.0316284259124699485 -0.93346502289485300263 -0.75830636031432296917 0.59027525892431886856 -0.52229017212022887939 -0.21801828451307750378 0.26516348387197385961 -0.57850052702140597471 -0.15542856210277128381 0.09452907977338154133;-0.8871536956262863205 -0.083483030107572797629 -0.18762591811292811395 -0.75107448086765216111 0.14658921501203783788 -0.059622056406995145583 0.93300886758162371315 0.93263987559612926415 -0.34467312290804213992 -0.55285862331761059796 -0.090758104965524652452 0.64808573556465343124 0.1115619661691229364 -0.72888065788890776808 -0.83711626884792322834 -0.82404303521658262 -0.31920549033538397898 -1.0302581088656854735 0.44208911864568173344 -0.042049153921895086883;-0.61689897257292647392 0.39713617904528619729 -0.037979474051849301808 0.16495907374791113353 -1.2697103621468208701 0.47864395377259244535 -0.10474237311533586559 -1.6347098511719906355 -0.49836755922082776049 0.057834971309201933798 -1.3181043229263411654 -0.14788660590018548602 -2.0867715043957084653 0.45717686539374169374 -0.044765024362158969962 0.18111948056947363428 0.034666028130307953437 -1.7535954996803828632 0.44606104220174597197 -1.0877773420541756444;-0.31232165807667533475 -0.84744958927475144694 -0.54403441801151275481 0.33277141903842499815 2.3708255091453813712 3.5538235163255653681 0.87237337890721600164 2.2673934794530956616 -1.6901267183976196318 -0.6634918634006893301 -3.3215907658037777672 1.2357518501886313178 4.5461140479385493407 -0.61713837345344091379 0.78027066401449496347 1.5512023922857220981 -1.2590847134344258507 0.16448386580182319805 -0.47440396332420137204 1.588027357928742278;-0.67044630682420969237 -0.65451369805936032709 0.33747963264891273072 -0.036203466596553796064 -0.5217202147706498927 0.29996926253578576338 -0.52775418850228617007 -0.027690726086544888151 0.081930839078202172265 -0.092516236915140423469 0.14449855910158518335 0.4529353864149098241 0.035702865479142448235 0.0448542132048501338 -0.43827964438451672002 0.58884038004949712519 -0.45581716585564918676 0.17677871657122073978 0.27505060112142964979 0.54961785905244164852;-0.040894937712570224309 -0.63696919924439920901 -0.17969639151704958069 -0.40795112824779322658 0.5007703168542649852 -0.70699471407922864774 -1.1542919105152187331 -0.037605388766695196923 -0.57817391570097098619 0.31457849320385122827 0.21044666546740700697 0.69351636653479897809 0.27174408729757143499 0.083936120234643696314 -0.56576335485182782659 0.39797526736032634576 -0.86030705140830809885 0.38754341850180701323 1.2646793084203677981 0.88059542905622145703];

% Layer 3
b3 = [0.99977472380996168511;-1.7872539973701275784;-1.6628669461354221859;-1.2711164058560613377;-1.2736658871430559525;-0.96115482863467538444;-1.0323575532194724236;0.24058804156330546031;0.84654693954532211908;-0.13639273751315064698;0.34782481149760618999;0.44118577737955055884;0.24592089575900344389;0.60020231989602657041;1.0879485897187173293;1.3427667282131734439;0.76054562061497466008;1.5768507576885466559;-0.71810334765442251914;2.0117733849332615215];
LW3_2 = [-0.59337164794063557149 -1.3365335159455054015 1.3140383439903253748 0.3740631339846858805 1.3401395560542475049 0.99948021898356786963 0.40610407425047656549 0.30667018992061462201 1.3579507213931747422 0.4312578128298272806;-0.85346262236440950666 -1.3893511007358276821 0.68004180324931118307 0.39041095506614509336 0.50503050385029846225 -0.49952085654298578055 1.4714566377176707679 0.81615563270452551325 -0.62566532533247865011 0.33928517235649702233;-0.26948600446865467184 0.50045584533182541076 0.33278789631488803202 0.26786083913541158807 1.8047167405660460293 0.93483769018788032135 -4.0860619671785860518 5.4469635071730966303 -0.52695994684843594502 0.80093387580102481937;0.91602840874985735908 1.24721575032295795 -1.8852351167992993375 -0.23728270545068311237 0.75837766858398958369 1.3066324108541165216 0.84775830263031737299 -0.40646258354695968817 0.76639233530501194025 0.88868975395199900635;0.48098711844649927327 -0.25033852202882672655 0.78006241070517690073 -0.27108434114817808736 0.075627384581546761022 -1.2942880793075792756 -0.82149030185658966641 0.71764966117137041213 -0.7903996695217252455 0.054990322656117592015;0.54209649361375578103 1.255972782533618437 0.056676152858693013004 0.22894011009730583228 -0.62050567055231420355 0.59545931301358878684 1.098248184326363619 -1.5221906054919673856 -0.33082429324029033468 0.53390975096611126283;0.67978803504524298873 0.86839190812144739784 -0.42996032890854890551 -0.88573139664159983298 -0.20293128574161461986 -0.10694113252683219717 -0.82762794314390253358 -0.06616705383165034926 -0.27026270605186819562 -0.26353870355788050484;-0.89992755752061770469 1.129415003805948281 -0.57973200895889065443 -0.12883139169605853369 1.2606625314466142207 0.025013393481911772726 1.3492962254104332587 0.2477923617756417618 0.16412098241576114632 0.49439138211897321051;-1.8482828534150617106 -0.60793125951671900253 0.4643095361530625298 -0.37853231470516246482 0.52092908949504668215 -0.55108067545807704057 0.08964768256219654563 -0.26271357678890122633 -1.0622622922533262457 -0.016338967767754761923;-1.3095076220356580698 -0.19412253405450377586 0.50297226084765378484 -0.44810376503285509475 0.092551696529021551529 0.55473448855671980695 -1.2304920815351725327 1.7285644973962914772 -0.024615205841813765641 0.1469930408944214173;-0.13303711617507169018 -0.28202427842679361758 -0.37801591160875930298 0.51543478805616649296 -1.4530392929487869758 -0.22354669008482663806 -0.89510436882292576666 -0.52841649105526500296 0.30429437407054588105 -1.0885113528553602702;0.60454216421740514242 1.5300796905408544646 1.0909270569723905631 0.71074153710757981273 0.91347765511676104477 0.19664000484059554474 -1.9162364430581222408 0.21070221701247887625 -0.51912042260100377256 0.66554693510349505203;-2.4553913185908320393 -3.6900980224219330772 -0.31344537175056230716 -0.10220220934729518092 0.070365502209360414332 0.26199887761069151626 1.4717762544776193945 1.0057257451666867798 -0.36654044815487124565 0.080055100846610230403;0.79739871039414289555 0.13502062740133666252 0.87486962669046264285 0.85961108282946008252 0.085311642398156209421 0.81135187601193958784 -0.27571151196892229596 -0.36184123564623066338 -0.70205671644021139244 -1.0488590123936634146;-0.59999738894647702825 -0.63913578779353763526 -0.61456424912424645335 0.72470073318288752429 0.067360742313803456671 -0.67092036843853286587 -1.0363323685068095426 -0.084004687823636764454 -0.83157489111084670341 0.51105655114669956696;0.91193523540155885243 0.10649439979580137272 -1.0722796734660671181 0.030305317091837879334 -0.24450325666870539876 -0.66692827780029317886 -0.087410280380542659806 -1.3828343436533236943 0.55462393380709917867 0.2791701534192427836;2.7212360838489710879 4.0662392254217083476 0.31481479051180327744 0.20600899753700993577 -0.37264041504237599423 -0.4204118731124621422 -1.2896674778463586009 -0.85864463130580503947 1.3178970973059307426 0.071108438583090877172;-1.6457269973044135192 -2.3646226652480168973 -0.45955696717699062726 0.93062618426335352861 -0.70843575936555869266 -0.54942166953372351124 2.4567328308076050725 -2.2173624468553305711 0.8094954701818516396 0.31890178245914124755;-0.68366001121160024923 -0.65901739140163440034 1.7834354934174214691 0.20604965870787553262 -0.58035342189069449859 -1.3107894660705350365 -1.0006771971395218568 -0.090197087290507599322 -1.7806008538517190676 -0.91476064874653484349;0.66838282495880807499 -0.20052893154681331045 -0.98648273261264263212 -0.39812912565153918409 0.53533752445359139571 -0.43598098130639822978 -0.29014633088477775891 0.048454842439645637309 -0.52114821704402858327 -0.96790839483742441285];

% Layer 4
b4 = 0.29567011539409410181;
LW4_3 = [-0.052310458845671405081 -0.50714653650637864235 -0.66720693080345994108 1.2468927018213964431 0.0032197647047333540979 -0.3510552123385031198 -0.11694970698263634779 0.0062363956599112216339 0.0078354381433291854508 0.14589757276645079487 -0.1641980366506290423 0.24666054109841878406 1.9615134600557753153 0.098757626743976853478 -0.96313900136086982862 0.16496314198712896948 1.5237398185801998007 0.67756265133118864785 1.3008609712895597976 0.27342850972019483446];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999931;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
