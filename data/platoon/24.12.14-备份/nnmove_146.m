function [Y,Xf,Af] = nnmove_146(X,~,~)
%NNMOVE_146 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:08:45.
% 
% [Y] = nnmove_146(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.85918092085871;-1.99763696099884];
x1_step1.gain = [0.0522252737181727;0.148213484472979;0.500572177293996];
x1_step1.ymin = -1;

% Layer 1
b1 = [-3.9640086241501397701;3.548224250810962932;-3.0700546749280110959;-3.0541624572000705129;2.1721527161321723121;1.7075136371974040106;2.2575089273243378329;0.32939865804758339252;-0.80979652398485912901;-0.30326724423367756867;-0.22038341430181226932;0.69321897085524919468;-0.58502939642528573039;-1.3277827063916753936;-1.9985832436789705557;-2.018128910416354227;-2.9553247967584197475;-3.2988673107795025707;3.2869459307279971227;-3.7404195075361288403];
IW1_1 = [2.1661732671082640778 2.589766820901392208 1.3721784844002635761;-2.2133581650278628672 2.8242099562090818843 0.27327562533046595439;2.2029871846797828283 -1.524685861300532741 2.877053118466402104;5.0101739833367240351 0.85445889903025462608 2.4527462967729447563;-3.7286831288463440082 -1.8523764329589489375 -2.1641017664195478787;-1.4726068374047827092 2.7066110582280953345 -2.4645076467493369776;-2.8088605695502009141 0.78631091852689161126 -2.0326568283249839553;7.2507428248079275335 0.42559587079504845875 -1.121449652667214858;2.7568784529429195551 1.0993750990975041937 2.4005287112247013503;-1.9177842804488896 3.2908107472809358107 -2.0512547992838454647;-2.0805675654222510751 1.0044025276735621954 -2.7579779250269482738;1.1334874843807438705 -2.8842305735928288613 -1.0556122284067270822;-5.5015724793732703191 -1.2763342423901575806 -0.37178271452699085398;-0.019510022008383750419 -2.642369175826738914 2.9144656938609712071;-0.96493536902801202437 -1.1497609146044955875 3.3311558537123606705;-2.0658551917651593044 2.6528649712025735852 -2.6077470261461721535;-4.5679110547662906683 -0.17549951528400614675 -2.2904981960833441512;-3.48229608828768189 0.76633906804316409556 0.13354288475211284482;2.5551511607168522211 -0.77221211558554125887 -3.8162445341357833506;-1.3935652682023349502 0.35288536029793071691 3.9537197555425636075];

% Layer 2
b2 = [-1.6699020720626063241;1.3360182647761802421;0.67375493266324026909;-0.4209392144378978351;-0.025989437393280662159;-0.059726451464213160814;0.38857320309288367888;0.71057905468523585579;1.402017850781257069;1.7152282214536944682];
LW2_1 = [0.35431657366510033169 -0.45159259698273312988 -0.4282747052945022892 -1.5571198074843599635 1.0963367703596542668 -0.776523144584393199 -0.29951827431286454084 -1.3933715427999091574 0.68273609629142573141 0.11124070269903016395 -0.35345870323683020731 0.37280542863920085317 -0.90045807914070141731 0.29960843639536471894 0.12857592734886513774 -0.42734150974184847982 -0.11493581396111875181 0.3982607289013981311 -1.3764521629763089017 1.2742272543254642425;-0.80044795144888880589 -0.52550746571116546679 -0.25999724648787547743 0.17693849555854876399 -0.17681172363138220049 0.077051680354214419078 -0.31348157286801542343 0.60967471421385910357 -0.29436288339919575163 -0.1698898654588942847 0.21960236335724839241 -0.3063823713845109098 -0.88871415958420230119 0.79714805080460049425 0.46675035577178075608 -0.68447769621093823567 -1.7208468692462388638 0.21457714381941206394 -0.12995457794651119054 0.023128437275893934388;-0.20710056028129100736 -0.63900875260235712183 -0.25735634038034588267 -0.67435651460842283011 0.51384892333787224317 0.12104145312459389794 0.15423855340451952944 0.053179368325848491716 0.71532169579368864998 -0.30837632183253055329 -0.5724586316926679741 0.069452011316352132986 0.30010681022790036687 -0.18127214889930665098 0.55511588679785073275 0.94678299483672101466 0.69300663470946188838 0.62782098621819304451 -0.59714779050052835263 -0.13611107611855216559;0.23406818053291100767 -0.34864122951496290259 0.30872015669837327145 0.34888474132070051992 -0.73183857752701697574 -0.001711956053214506307 -0.19378870881772233825 0.7110225028559885585 0.2727215451500987764 1.0508800981051036327 -0.28015053140786894126 -0.06882151744744004207 -1.0482568669915073301 -0.46584849840894404505 -0.36751064433468511039 0.48861883820117435473 -1.1335644316655346664 -0.57547437414504787334 0.28208598389937611373 0.26172363362465983494;-0.11663473868530384314 -0.30498933136563016744 0.072206661488335224797 0.84607197775089881819 0.35530259223865118257 0.73438275518361229022 -0.39781180315475600517 0.67911191246295699031 0.37688207729532108292 0.38918687880762753428 0.21726103003665808711 -0.2096339574848936349 -1.3435248380515654176 0.49039301840069743355 -0.40483367915158291472 0.65560238954174920867 -0.56948402414198207033 0.37916338728588100393 0.0074667811542320546708 0.031691487219682561161;0.54507183359366273567 -0.51237887229297551794 0.84088424453777521617 1.2836137007822663314 -0.32270690530781803718 0.72370396408774495534 -0.078844171238963978166 2.5591893953434601272 -0.99597791429716353573 1.4623941567571776545 0.70264875794679582111 -0.0090262245652971261761 -2.2545204344363565241 -0.50284419476808372984 0.037315232201587174299 -0.20057275679184710659 -2.023455374445377597 0.046845148120172479256 -0.65316918083389530203 -0.080136000007267810252;0.55901941016320044753 0.085134430653627260477 0.31513693729471953242 2.8132294066361587248 -1.724049525497127755 -0.67920126290750437725 -0.42814277549698481762 3.8132292121211528446 0.0082678139377553964973 1.082468126188369073 -0.055605966559114455849 -0.060019272330511054536 -1.0647937565514475899 -0.69587116674339777322 -0.87663592908045284702 0.27701327915669293755 -0.0831307966858367553 0.11402894499394204686 1.4854751554334326702 -1.0283227647089807633;0.56800531282357968887 0.41232022997895340088 -0.18157837867895310069 -1.7804864648452825016 1.211565691346330409 0.7291199159748622538 0.3738860745208109071 -2.1265269114503180248 0.52144916693116649675 -0.25165658116125777521 0.24281766224895526274 -0.38957680084407181331 0.647913684283870972 -0.45528681779585644662 0.80482660358687174718 -1.2206499631657119487 0.041038104067249503437 0.52229718872769281823 -0.42952154611199089285 0.042942820877897337761;0.24536608730861916849 -0.011283242514111124083 -0.15162558592997726903 -0.5420226983945218846 -0.41797799211806330177 -0.41599961388894191039 -0.17583864129960108391 0.43766191513267826974 0.55812153148480381226 -0.29541640877628522199 -0.21348059066658789384 0.23918486017833218149 -1.467622963364256794 0.42934769207202777563 -0.069211800747150123425 -0.45326145626364489072 -0.97531080144918913533 -0.57906709756676788547 0.10516270160114399301 -0.58754973535981813715;0.32839512091850159292 0.54243953447876480656 -0.38859450179264604097 0.044899865645172058748 -0.076678766734282019502 -0.50834725242229439335 0.47724224033811568635 2.772776410812298753 0.16531459645493426502 -0.88024933323105158944 -0.61776693907960378294 -0.078027064874539489581 -2.1762544086029151913 0.094595490965592707311 0.77461696897937859507 -1.0067288306248296514 -0.88457853810685671547 -0.59047368470845640331 -0.30683749811539173802 -0.60621616031339409236];

% Layer 3
b3 = [-2.008041959285998157;1.689706709165696763;1.3669176347816938133;-1.1162889149264312305;1.1825461431155799286;1.1301169795662047157;-1.0210565227912100639;0.28819118000465160367;0.32629186149216404811;-0.051122213295512489162;0.29743106476160618978;-0.20894761306553316649;0.67081489642861169553;-1.6819082024130256325;-0.57466137877949641233;0.95519062522973063878;1.3830292395624443902;-1.2278772885884314814;-1.5021964869655350938;1.7590278891404083073];
LW3_2 = [0.53515133738779574468 -0.040830010098819660702 -0.06350975851012988227 1.0937763504141839732 -0.50221048347068553142 -0.83853691747062630846 -0.37590353742657933722 1.445589296407974178 0.31341188661618568645 0.62475352148301632749;-1.0947236170912288955 0.59583178940408021429 0.62991490013119244562 0.1416187026403725735 0.13245912319703345705 -0.43901033775536335568 -0.93342548024897997738 -0.15476705815613298056 0.054170814430623485947 -0.67081632672947388851;-0.6862963120893613711 0.28953286770213393364 -0.5046154896785688404 -0.30315392930947543393 -0.33646194311966876045 0.2056336549686621773 -1.1907611824873760575 0.58565948840648784923 0.27502875263867143651 0.72152681575637322986;0.45093723010947200924 -0.34621156703922195685 -0.93916985036012645693 -1.2795155623138061429 -0.18314253841245639598 0.017027598774821395972 0.17507818084380691315 0.37357692483639737269 0.76273167427504018345 -0.5999207288788251935;-0.56055987527913364588 -0.28073204646444344101 0.22627726510148679639 -0.3718065005391721356 0.84916858837842723595 -0.93930229797409092729 0.63134349252473453973 -0.56277022355540651244 0.082620400791546450003 0.70538517834611480506;-0.20851539116365375159 -0.076725368955172956742 -0.16245818443938334075 -1.170637281472409752 -0.53814008275588298691 0.85451388474755896052 0.17867515396428249042 -0.84055331905453156693 0.017088124075153185433 0.76212317034044896324;0.08404201536519621818 -0.37397831728594299605 0.23664826515045794819 -0.089601419718136898762 0.03398022317080379856 0.58353022456539660467 0.44484134390482327204 -0.8951611358631120785 0.61311411542622096249 -0.37152345728648095147;-0.066263060346586549754 1.0446079041747855509 0.013526693543158423844 0.35667926709017994114 0.39664181409228660424 1.1166057442717667314 1.6540150103793620495 0.72332747187912371789 1.0192710787854020182 1.5695242295589157955;0.33578691203362182049 -1.2505011550345821458 0.96367853728402708136 -0.077026683651507263373 -0.35488915198825515818 -1.8475755285752988311 -3.0685772417933518952 0.041294898446175766493 0.81418298173792835737 0.015374085360566711045;1.9433580594789543472 -0.28207550839990613856 0.53249743317842679335 -0.17885645159640292667 -1.0644602686967892247 -0.065191080797950218262 -0.6847497949655478866 2.3040085221465336218 0.41235772288711491917 0.26093950718050468174;0.2023881392606496632 -0.56571890732896712439 -1.0486669781070983021 -0.53422161849986471438 0.54191274006772227612 -0.17086441991648251837 0.85169000764382118973 -0.77907146807539173761 0.15228472047561916747 -0.4378196636037703926;-0.536627478826591231 0.85325781749255935615 0.23808851027802901967 -0.014859445112222476743 -0.35996014107513585323 -0.8887711908515395498 0.89721029581352451654 0.11255830513264067361 0.25565215774010657812 0.36639489496420413195;0.22522038868617616503 0.166728113882068818 0.05981657859372858238 -0.80985381779977705374 0.23153553544525687369 0.049655826679726157435 1.1506174370125981099 -0.55905371310863571921 -0.043536709493230837942 0.55560656894157900432;-2.6279415493178057694 -0.56323262837813803383 0.099179725172645366582 -0.091418499239059453076 0.58413800473489929654 2.1017388784606074736 2.7281432010466373228 -2.2847288713195275101 0.093590912435624631915 2.7244037043736142323;-1.2390410094545771802 -0.098849745671637678779 1.1753842252633475152 0.48071510882836415712 1.9237547020524465857 0.76068583339781525865 0.11221008064824339323 -0.37116776165198600568 1.035443032956098186 1.5502292525748406771;0.75083790501066183243 -0.20622003319388820808 -0.57036876311367445958 -0.96568668082595598978 -0.52545020447419565901 -0.79350939655328400768 0.40908699854319430234 0.23621075903665378348 -0.85560410133683773015 0.67750861765934722314;0.05159824546802603551 0.69159655423910226801 0.72349162684815249147 -0.98180919241663033858 -0.72244279055067650575 0.51426113047118926502 0.5741124030725653915 -0.6988459454740326704 -0.13872233551707260912 0.49115329000524360348;-0.33575110659516083089 0.54182004546817585933 0.23250226171478918791 1.0244128629896083194 0.39732111585390395003 -0.99709517466723029955 0.3076183864537681556 1.1265758651629387277 -0.01477557453753363878 0.558402198340286815;-0.20400723889576521941 -0.46613135508543440677 1.0151807426203329765 -0.51483545505397609876 0.20711490756994091478 0.11159830024964248474 -0.99090733040758571804 -0.1062270177001965743 -0.79385057796007374442 -0.90699918023673020695;0.27902542110952077703 1.2538664096941376513 0.070745815644396733979 0.52187073967988995005 -0.77217711481240680627 1.1674791657684733259 1.7801437784982729884 -0.90398610386457900479 0.51772921892511014619 1.5496283301209752281];

% Layer 4
b4 = 0.72322449487367013177;
LW4_3 = [0.37666397660225975352 0.10023079129392103992 -0.72002713958945407935 0.23692345967724592892 0.19888502187801629373 -0.47020623523469978755 -0.30600354610062485694 -1.2184842089339693594 2.3233738064564199988 -0.79762539001526888693 0.20125903067456665796 -0.29890377865564021764 -0.5821245138978702327 2.4219055022854099057 0.70424916338437981711 -0.12505116578104094605 0.54527814245939065785 -0.14124869701446662873 -0.080233297891501603738 1.3170079393056250971];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999931;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
