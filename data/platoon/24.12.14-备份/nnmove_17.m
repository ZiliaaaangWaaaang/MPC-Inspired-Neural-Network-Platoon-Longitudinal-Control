function [Y,Xf,Af] = nnmove_17(X,~,~)
%NNMOVE_17 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:04:09.
% 
% [Y] = nnmove_17(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-13.2925490923537;-6.70139767883548;-1.99738196042707];
x1_step1.gain = [0.0638195875959219;0.168202204644631;0.502184479042526];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.8185575529062290023;3.3008119065253174185;2.8073901536238632382;2.5870957169325463632;-2.4845845712467022892;1.9962404166464429167;-0.96245161810751345133;0.81347326377997541957;0.78926893582809376504;0.22666796136785360982;0.20152753811033269349;0.12639759364091718297;0.75927040896852615592;-1.9641063043130091437;-2.2931883087852371617;2.3745611715650363216;2.5396828057040883309;2.9655669333741432325;-3.7986191923450847163;-3.8369067009890933662];
IW1_1 = [-3.1629547863494136273 1.7063112115199225993 1.2268980448013002693;-1.8750209807744067092 -1.3580360239661035671 3.0028941961192767707;-2.7290182108088014701 -2.7652032526684267033 1.2020523382623293784;-2.0600238598543092472 1.9373506247936629343 2.5481351017832354344;1.7692494942478860231 2.413536108430899052 2.4255786007100823554;-1.1814867518058220774 -2.6182538775427417477 -2.4115549210741056285;2.0843333384421094401 -2.2410470559464168439 -2.161273260238174565;-1.6376810306180056287 2.8612474729900214676 1.9615698036697466478;-1.5727557838507180143 -2.592109234655891381 1.9786111692818497687;-2.9728426833974990195 0.92995644422782797189 -2.2517026776364312823;0.060613932360931183085 0.3460161110764312653 3.5878014275360605723;2.3062469275470860453 -2.7953216448667652649 1.4181898948673252736;0.88071682791423155923 3.0747794419796128373 2.1692548825240818289;-2.4865194031051554013 -1.5164833077197328315 2.082273011529834239;-2.3655397310507311204 -1.8088476870123102458 -2.4993038353126206808;2.886249997286410629 -2.6766543529948783053 -0.4879001108391330388;2.1905974181383145449 -2.2684581207128342584 -2.1759874024671503889;0.79737772831482445213 3.7638932948125591871 0.27168045605720853031;-0.40746001970699191608 -2.0636426067417601438 2.6676149476211366007;-2.0888734304872711434 -3.1284346176594333144 0.2758491304428173363];

% Layer 2
b2 = [1.5227235827502436649;1.159382059417575217;0.89726366731433793156;-0.70606182174887632819;0.26132264488013096093;0.091286645187695678039;-0.49706667964221717959;-0.71585790596959297805;1.0777305805758150559;1.5347018540242223228];
LW2_1 = [-0.12026786128397914943 0.24371665629821606669 -1.2692542186704114382 0.24056963127621810994 0.45723419230142908765 0.17898494907394130182 0.14772486205719090324 -0.060936081752925905231 0.63292853823126660195 0.38043812737229903975 0.13853972594504504467 -0.21540325775064395053 0.33484685982103062907 0.60023753203549656821 -1.6356918873373114121 1.7047181702110416612 0.069566658279037879575 0.1223049810715576835 0.12541810252501317535 0.0929932549007620457;-0.23644262215073871825 -0.39884339399071555565 -0.38617744758570488051 0.12877258850821909908 -0.90987462365563576139 0.074936994204140836007 0.44258739595925933319 0.34381127539190758924 -0.44018789959566367864 0.077657888170327024624 -0.67789567625515023686 0.35453526782414218621 0.080037145204775422824 -0.15402207939017126259 0.51618983582679556221 -0.48813446515996478103 0.14126243901464860531 0.66347153460126218061 0.10884192686614661827 -0.52796340287651377654;-0.51059495665259380104 -0.37721999868449573867 -0.36448428116967168666 0.19570854710165799806 0.38271300248533801636 -0.16060018736875533718 -0.41935176565017168171 0.29708671934529551351 0.50829306052162670504 0.14756224151039609715 -0.27878891444577597047 0.15988266413468080196 0.53593136919352857284 0.071328535220351957369 -0.40060514388976914413 0.17906905754898386207 -0.37019031453119161101 -0.35972694293910945085 0.55817822973377595464 -0.50038610804234506801;0.24983219204990803064 0.015468129782454461199 -0.49300253926570114515 0.19012204850126057654 -0.6432372950851575899 0.52179610527026076827 -0.22958595745490895101 0.57482251384395022242 -0.077859715811117197193 -0.68799248990650885283 -0.54803385126145220951 0.37137741454082801029 -0.23813732839100859584 -0.7298062691909803501 -0.27584666663147489052 -0.11784843146469603514 -0.22302441624783100882 0.30431145868136233457 -0.29151393658606611359 0.66356055368511401849;-0.067204168693815888314 -0.9982661524631801786 -0.023702202557930925758 0.20231683840948441744 -0.39629417532831828774 -0.81146416171439561538 0.30585679116276637268 0.37969963971904902023 0.067453898060087696953 -0.30113282581093386847 -0.32040452827835547156 0.52729819275414335777 -0.24993671420073756972 -0.78008139646319751837 -0.47203446448559788218 0.39239284339557134462 -0.33710093593798617917 -0.45089874802758439509 -0.60014104093082765168 0.2437271187400927297;0.057070451516652478952 -0.053663133368980472926 -0.42161238588636684721 -0.0010314634165144997979 -0.23983097257935262481 0.39213407433649249967 -0.036052061141511507203 0.055764352505137129712 -0.61269256528206506029 0.077461438802189030994 -0.24687485000142567193 0.027081341732084082685 -0.35217184029944026413 -0.44359345409801931304 -0.7283978371065320534 0.27191575720518307291 -0.050365294971184360051 -0.4048964316379608519 0.97820334132664021887 0.25909014262818325092;-0.32442730438088540623 0.62950670748221293493 0.14775986854367723078 -0.23106748950363878436 -0.16258011690458989973 0.42944024873600006309 0.17900596373066590683 0.10285522669325482259 0.44055075363435902691 -0.32071763833575994695 -0.56421269801110640607 0.048046608231754175944 -0.12108223285195973684 0.88553741722601131414 -0.33824252182235631237 0.23738130541403268392 -0.031731439551555093437 0.45855203418058032572 0.49690393910464802918 -0.16083113792812217535;-0.23725563260950208178 0.33376507147154771404 0.48171172580917759332 0.19636965215723625744 -0.3610807398193894846 0.24482721685136762946 -0.6556986020907735746 0.40582865865685974205 0.47263956516367761074 0.70935493228506896202 -0.27309657044728824493 -0.18037826844075172117 -0.7077836984469928483 0.92976217023209883905 -0.2931955031720697713 -0.17541338176863074949 -0.59000111779401176459 -0.69504052868340193694 -0.64220276827275235565 -0.15721647957965009801;-0.086765375608626696402 0.031738045263076927749 -0.61500152228589077819 0.15513467634224431535 0.73278381196698016975 0.27203465123578396412 0.58659056175716128845 -0.4751282072491602726 -0.68364141422342816767 -0.060135044506087156901 -0.12345640349744291253 -0.76284045944849943055 -0.23223386850939209403 -0.41504292834778383492 -0.16710601448938824931 -0.0012659542353949133214 -0.015252743303836817715 -0.14013815383308900198 -0.59810450457030261973 -1.0830668897113648885;-0.046036968669116856701 0.25776142451031636149 -0.20807366820127518037 -0.56872821622855396217 0.090691270608606558423 -0.52430241759988105432 -0.2837646655160069864 0.60934729498211026577 -0.1728577424026776499 0.40224011383608893055 -0.44633201656122445389 -0.59634528397537633904 0.48435315741835782699 0.032562089052600690087 -0.54009225565902108102 0.51730856789858947753 -0.14371726244068788736 -0.30425691979632568662 -0.20115599490116134462 0.46978188544345822475];

% Layer 3
b3 = [-1.8885155160845543687;-1.7106622812269751677;-1.8774946827343579336;1.525638875658439142;-1.128916255524185841;1.142542738220378995;0.74466413237727335783;-0.56585011440854215969;0.25984406778915314362;0.26713550551780562703;0.092628017228025313901;0.34278606140282424919;0.47903012615082629644;0.71351945230436186751;-0.83724990272078370079;-1.1623091267697236439;1.3082539665435555243;-1.2444762301728784504;-1.729707730942117383;-2.0040577153726424342];
LW3_2 = [0.70461862302744737718 0.80266005482150859507 -0.81976825784248052997 0.78303461611551572474 -0.29669494698445397773 0.72302397416722408163 0.34118123952760226469 -0.1382907576958130047 -0.4392599057794216999 0.60411919235736777356;0.17865525612488222795 -0.81308014968177588777 0.37561770509610831192 -0.80835427925343039668 -0.077177684388039624608 -0.70527695978067239668 0.98564642545011516006 -0.46772283883778015268 0.85021725548303395126 0.19671171426238026614;0.8682934263098488481 -0.098492905090703394833 -0.47813172901942085913 -0.071516128283200142146 0.7964611416009790279 0.36543024571930721178 -0.72873895007946465352 0.29899289315054261573 0.72809794067895650116 -0.36538944685717150707;0.091719255571806587723 -0.53412964800813167443 0.95476991371639952089 -0.65250428136395421941 -0.86395477481351179438 0.9180390534615380238 -0.086151621542799566855 -0.13800793892062088175 0.49999884291451263119 0.15789354993374260516;0.51999116764786179612 -0.89070999856140065098 0.12931326576101528913 -0.73716851789552895191 0.55445412034282770541 -0.3310369793750732037 0.87192535731459774873 -0.14174022907874428423 -0.52236393911068845775 0.25481970974083284487;0.016841202422225674123 0.84122452555037185995 0.25116513558936975903 -0.35662010358862161752 0.35416793554110698183 -0.83112826641623427371 0.26093880104250466445 -0.80449722891562458482 0.52978567141949373109 -0.95903988891828162444;-0.27016817646073554293 0.94049834628084638677 -0.26165906423190649077 -0.78396426267369823115 0.33060459690681170963 -0.71458863103898162539 -0.62044630473242590174 -0.19052052826717444378 0.47869152909281642572 -0.89123679920410514566;-0.19918043366954873985 -0.69563092072370180663 -0.079334491204408288945 -1.1340756134395360011 -0.52874337083246036872 -0.47941497189593351713 0.57810895981307830471 0.19799619790148109688 0.39761029729188007709 0.8910703117474078061;-0.42890543623548960106 0.71845806370899756299 -0.95104820814301826992 -0.46976991590091604634 0.63080615384101890175 0.093697294867108704697 0.45043963355593458209 -0.77314471621321578798 0.23515251584220420167 -0.52079540818331504504;-1.4513957086643809458 0.60740822071968580964 -0.63829194159677604681 0.64827756379269929621 -0.52152789830220358525 -1.2282489423277800356 0.51355628451981449878 0.9059748535040299533 -0.49482142957730357313 -0.5537427976042091915;0.076545246876858888396 -0.030853044787114751457 -0.58132376584456701973 0.13948422080891917374 -0.22716190876028580226 0.82682970852187231969 -1.0935203857912534353 -0.23756171582219995364 1.0750014330214208158 -0.26246264644490535645;0.18256268524690194566 -0.45352431994115560698 0.56978902060009273267 0.95143626753536514329 -0.31608677306429949772 0.51468591534960916878 -1.1078664479897410988 0.48483368177444918778 0.80791821032559152371 0.63463273516815121855;0.76913229674128946733 0.090225861970401277645 -0.056724599074883932937 0.97944891936575639857 -0.47912449628091435816 -0.76323461271011061591 -0.9064160039250215295 -0.55822801204422733967 -0.28604131809620925164 -0.36816759177860980401;0.80503217096968571198 0.60756421537288918255 -0.43463993235450354424 -0.78550777126026660735 -0.39295221525325030321 0.32180131190370603322 -0.45337084728887111496 -0.7507472886074548768 0.74892281441128016883 -0.66595850830071234849;-0.40926375457125929724 -0.6772818624651496533 -0.82170479299351706359 -0.23691983281141951179 0.33079073368255978993 -0.83721561105211272924 -0.30717150779909757619 0.51411587619938192706 -0.63098019413573580572 0.9116672169536620407;-0.78867575723664495868 0.97554306120649736389 -0.055840279467852804718 0.65133049226291417355 -0.51085317537851360203 -0.45665407540806773889 -0.6310069789343374369 -0.157260760954066936 1.060533954968159831 -0.30287143396181370747;0.14825078938147157048 -0.042588062223902108105 0.76017495671310086891 0.81013016124276293617 0.19128422652677185001 0.0072137074893818056709 -0.84795665553479260268 0.45106359054373534878 -1.0134056320516944272 0.54102087826388545189;0.068703855981377945361 -0.67810398749252442929 0.81063946645628015553 -0.77104684049225902243 -0.016451840443956360083 0.96540259733489353078 -0.45040065019159358783 0.488991380106114093 0.43317057582247053826 -0.23542163581983510667;0.0072065674812703556934 -0.39747496569392587462 -0.6075403424779899364 0.44902002566998161504 -0.62181912279576190272 0.54823991593429977076 -0.048500027295557870954 0.54483958140373633938 0.85718286727115022838 0.98256363630201104531;-0.45750562865626581699 0.22011782504266372285 -0.89633572267371264264 1.0154737278506524856 -0.0017127179614072462338 -0.60862975529914209449 -0.18188932845583766218 -0.57561136818519753611 0.19450227237435413485 -0.058988545519333683564];

% Layer 4
b4 = -0.28349713607299309448;
LW4_3 = [0.29772717204487147979 0.75312921862256132499 0.79412356074463130717 0.26100276231490227019 -0.49675774104181830149 0.65851398608606515062 -0.0043241921224596718831 0.16427908977242369759 -0.059182966069487821792 -1.2256889035211446792 -0.66966881572299541414 -0.83189266007061846153 0.31718248707800533737 0.56620032518299301394 0.43134778693971531638 0.66788140248401384191 0.53152192194961800364 -0.76437730623912580885 0.26452969821872529543 0.27649843789409545014];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999945;
y1_step1.xoffset = -2.00000000000019;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
