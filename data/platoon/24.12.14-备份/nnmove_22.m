function [Y,Xf,Af] = nnmove_22(X,~,~)
%NNMOVE_22 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:04:14.
% 
% [Y] = nnmove_22(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-13.2925490923537;-6.70139767883548;-1.99738196042707];
x1_step1.gain = [0.0638195875959219;0.168202204644631;0.502170423671263];
x1_step1.ymin = -1;

% Layer 1
b1 = [-4.159460444900308751;-3.282236449377098797;-3.1820819838376803723;-2.3832526223803620624;-1.852939797143055678;-1.4902223463651191881;-1.4928708298493529316;1.1833328438647221503;0.97137260442212047806;0.2595558734802219103;0.37001500423949534868;0.6770389981452037409;1.392982496191806252;1.994147628144201212;2.3626101407790600639;-1.6862888025977180728;2.6359117076379421363;-3.2718715230635613267;3.316668776993240364;4.1402042575258830581];
IW1_1 = [1.6878194136836446315 -2.1376634562796739125 2.2172150892570989811;1.7814518993205270547 1.1837737652702255975 -3.3334958852254774619;1.7058261605029150232 -2.8056705076730557025 1.404924140308020597;1.8197197287444282221 2.7995350556548848076 -2.3135693901048308696;1.9155467432156720875 3.8511663878338988631 0.8163773595188766885;3.5602638854072656827 1.9963999853958427355 1.8823988307978058998;-0.36075921264932775401 -2.8298722460655088007 -2.2871897836139520876;-2.230044674239661795 -0.1615639716815490956 2.9660536493757931886;-2.2625265729613608379 -0.54565121297912533294 -2.715835543720693579;2.5262475107465207635 -2.546876236830387441 -1.0404551282634941778;1.8903860965052896592 -3.0959014202054935261 -0.28067015020002922254;3.6432906071754302957 -1.3568460128256261132 -1.0936961339041966212;0.20313988182049863562 -1.6687033378364759528 3.209051057657378081;3.0135453573718331555 1.04587713217038214 -1.6881440231869391244;2.221719085835955898 -1.0038213664679427328 -2.8707223543276820799;-3.3458902084649966291 -2.1820751262965698558 -1.2114774314404883615;3.1713388227729657487 -2.4654337028883213101 0.12329870695316846874;-0.66522372113454608655 1.623824261715148598 3.0714305764924403341;0.45400067061593180062 -2.911668060748798581 -2.6194084589499322391;2.1303572679918709731 1.7871395224245343325 2.1339402480172817711];

% Layer 2
b2 = [1.6101316381342496431;1.2768935559986844819;-0.97665449511126822824;0.63294511238011563758;-0.0072807013444502102079;-0.2110124627492468985;0.58369052486832129212;1.0054573635024870448;-1.2750545748158543802;1.4860170829223935396];
LW2_1 = [-0.28697544606510388965 -0.1482099584283501359 -0.19495115914270960689 -0.17681090560231707554 -0.54996044876721827954 -0.038906422469956847277 0.085464762974254135375 0.067201780840372649095 -0.59183969758781884707 -0.0021947298245943332173 0.60219395632924743733 -0.32647582920461132305 0.053275012909734291433 -0.072248773214834735579 -0.51042464467820014562 -0.23310653217044829955 -0.13257044065052170367 0.50905773201012016749 0.29764897708442816793 0.57679767093870126793;-0.62959633231195455405 -0.2372706649960433789 -0.35958782258544191857 -0.50799117374574498385 -0.18841870103370167433 -0.27537970138047029867 -0.39344819615202597518 0.39717262427287275406 0.28254798989190366143 0.38497402445014289318 0.55349569729243053295 -0.58663063757069477955 -0.30590201715923487358 0.34364616993653268606 -0.38086936712026925322 -0.28403662059053774724 -0.020707048837492910559 -0.095669710247827402516 0.12821347681374617444 -0.0660137927691363674;0.2391219618344966602 -0.98170205576079760945 -0.32581909579630297102 -0.90098916834251507879 0.34175758148806395509 -0.88070629915321019254 0.0091016579767591518357 0.66327196206960048475 0.49947849505077418497 -0.11890540175828065439 -0.25457440016099974756 -0.49288288905098459614 -0.46383150148630392096 0.19659248774056298226 0.1690251423910918982 0.59681653334963213897 -0.75721310170873201706 0.10442446775297578587 -0.18895463733038245224 -0.074227040029589935743;-1.0516592446177539522 -0.34889837699134418347 -0.6354897749146104502 -0.5020589031280726644 -0.41682989991522817474 0.69244267948654170119 0.34754631541477337686 -0.033347929848778656847 -0.11508590719698014171 0.20959616376073764155 0.97327068287396434343 0.0014077220806004812903 0.10251521320229474432 -0.14590080303172789367 -0.11695242415157516835 1.0048062163087245757 -0.5139293528832613589 0.29854229411784510839 -0.35845983501087169687 0.41608973613144334402;-0.076462652558955804261 0.11718290631206820795 -0.22154382634038766176 -0.50155561300871964736 0.82682257716731633046 -1.556021166118080945 -0.54425906514950550541 -0.38027915645768445296 0.42030298950020017479 -0.30293884973821266771 -0.12071341071013820534 -0.42558178113977479518 0.21950154649014169683 -0.89176077922528729225 -1.1230024749581923871 -0.053548656920583262431 -0.29732251720231028802 -0.22490986606609095211 -0.18786375054043119581 0.53967178571919927066;-0.7064041957586844056 0.40151477094057957951 -0.29694192287524312501 -0.38604077624285298986 -0.20030081580769376615 0.7403365789394311669 -0.31472747569147396796 -0.51560065448485170592 -0.13670033742562304191 -0.15042025596324476444 -0.052229960609588434173 0.91139420921016034427 0.42060983303814097889 0.19849737799706279606 0.55077633554675931027 -0.12833858661266775436 0.21927097133811915275 0.57297726249592650927 -0.48748656967387943295 -0.47378990802950704531;0.50896925178780272336 -0.066590032458825290651 0.60417593398259084037 -0.77899753417865635896 0.28125842342430312781 0.071553718581565853296 -0.23569621551868397136 0.15104453263520326023 -0.44914541959093590151 0.83271100509354178953 0.35764388159902898989 0.67015427378206970932 -0.11264789716436282574 0.28594130890490748742 0.29554609231659084712 -0.44316832931315219835 -0.32055332875592157382 -0.21125993466055617565 -0.02956889693932449048 -0.42256405770102939412;0.21101234628164716733 0.097251713576338813527 0.11403345285911307971 -0.38095203312977932164 1.5412263824806500256 -0.10852628893700838608 -0.80422881051317807177 0.21719035152252835763 -0.064998133646480535375 0.53927350713709687469 -0.24359021766832525402 0.72607899498335137789 -0.21975771617663727997 -0.36941904664389790813 0.5600686641546323008 -0.11976423821753812149 1.4150516601214928603 -0.2436709646754386116 0.050503470734059710545 -0.13304871585855265748;-0.47161289328312017144 -0.20259261638470135725 0.46889408316863473436 0.0022191073143582110139 1.1611012737965638042 0.86845495474647771417 -0.40617294793201935699 -0.26030387353474726542 0.099996658988465686457 0.15454072901255161421 -0.017095051383894842995 0.97763607442872169084 -0.69504031648216835215 1.0211062866392708326 0.47538586896188422815 -1.3954596719590983689 0.74146706828157360469 -0.1530724755450910135 -0.16404618991429567587 -0.12769702140250679956;0.090491605855483686627 -0.44382600271796812663 0.29787993480246011124 -0.35563701132459391019 -0.18439128957379061213 0.72132969095568633122 -0.50157080409991572356 0.32534602866884648753 0.050804967876594699094 0.056244743276568892609 -0.57763760648420670041 0.80486508621940977548 -0.19170739796422173185 0.302115357583988553 0.29910406107447584656 0.63862592263758144462 -0.65911328595542406639 0.47445371209099257426 0.032375200794177105834 -0.40985432109059227734];

% Layer 3
b3 = [-2.0537690666951089469;-1.4763411108557011886;-1.7073513701847375934;-1.3276697615081016757;-1.0863805703824291893;0.64550769209140979044;-0.73763739125301486244;0.4406648266162119798;-0.24512896716312912448;-0.23207922210048886891;-0.069307163285570863587;-0.22191639502029286701;0.52586545014191687919;0.64999422107587956354;-0.89428358814031561064;1.2375304647179283801;-1.0253112550028025129;-1.4934200068618874724;-1.6957116244893786217;-1.8174723531391405729];
LW3_2 = [-0.1828292348370541831 -0.05426206775077411365 -0.29092471426060895201 0.59680202682617256027 -0.56953873190548631733 -0.84054109294683054809 0.10511489444131411064 -0.70771765880421055872 0.96737937155259379196 0.41875460193356239813;0.36778154297636111991 0.92076384836226554675 -1.0270988367022400034 -0.81378005454303814492 0.34759995078197503116 -0.37417933550471810245 -0.494042034631703042 0.89404443000977529277 0.53192873093430426135 -0.32788162719017888147;-0.019006819827290331176 -0.19902267916520899327 -0.69378759357878827529 1.0037878881309134638 1.5004087718347347558 -1.1327688696732736151 1.0673136483512415396 -0.026469659288636971511 -0.14879273321464225877 -0.68695792096147867412;0.65239817092064489312 -0.55842067286766505774 -0.429800947570057712 0.89932072595005396742 0.031440215454283770846 -0.83299207543757369798 -0.63768404114328425258 0.31412622971026421537 0.39750709483872492811 -1.1448487349926703693;0.7488980086268507419 0.57125196732330274507 -0.64054878350132071763 0.3576107225440871562 -0.25400901266593484129 0.46461435975287351807 0.69221083974644859182 0.78962591436203188877 -0.78396927939357197168 -0.43985712861143366759;-0.85455529657186035664 -0.34923526761434170451 -0.85615713817388772178 -0.86774757491966925116 -0.95023473815866410508 -0.89081995785478929051 0.64768171177237310321 0.18954043937326681135 -0.20644586649999327466 0.72584760355792510289;0.43482672356111601308 -0.99002482337881747565 -0.78774019518325155698 -0.012785187706618506703 0.59770183777946428449 -0.83534271809302085288 0.37126171327081908258 0.30267119650339047165 0.71517204628188257853 0.26594224020379875206;-0.72717476443646522632 -0.76746896185175172977 0.38078863268000123776 0.27157931755960412756 0.8549865277081213355 -0.4847594832082696148 -0.42460633531694658149 0.53968170796125358724 0.51096060153487887767 0.66679861390313388547;0.93307583680484795785 0.35482595302733554998 0.84456619303161939438 1.2695975009812625611 0.32308838602100364845 0.12720401513330295562 0.13248545316312596021 -2.0422544261529838039 -0.73710884582770319629 0.56551906040984611934;0.92448362424080399169 -0.10973297728796992112 -0.54363848231280564871 -0.76710072735320200543 0.068096462927057857528 0.76457472544024129846 0.054459235368656065679 -0.21290709890288109229 -0.40806572796460111041 -1.0161930170537354368;-0.64896569164177542177 -0.62024227753812144481 0.46144802134100543212 0.37316637145437758782 0.70844717098653564591 -0.68718867653398552076 1.0049395546371486798 0.10138949106406773548 0.46211625825110708154 -0.020985089241277121719;-0.53490108169314942721 0.86302414975297692123 -0.9505488909563277744 -0.42544825986329992684 -0.83071657528521103409 -0.15815777097964417441 0.20987928471387023999 -0.018585766169777140355 -1.3423578335805392836 0.33531779906807407388;0.29203670449117197228 -0.39665567003075324903 -0.95321853014010637928 0.82031033577572542992 0.84434787084531692791 0.072707299751532727949 0.9126589866496273018 -0.16028964604080755962 -0.32253898684636694849 -0.25915923850144356733;0.033759324495349705975 0.34700726742119969437 0.079820066251664281709 -0.23923691197016805354 -0.81223765969842698365 0.87503696867779412472 0.77669292997791794519 -0.2047149767192049663 1.0357189755026798839 -0.85050447166213472006;-0.49995409223789882835 -0.7644327489599668235 0.048389736634510870095 0.63730950693334498247 0.10991715111373978608 0.84580926454929994396 0.70438643860450800283 0.6133223838450582166 0.7423645210986116183 -0.41516887273236713352;0.22077793288576885722 1.154949172732806284 -0.18812291299543446033 -0.65195924342926248052 -0.93180799426571259136 0.19137179758838054888 -0.098081531434022622973 -0.88007457482766604517 0.27284880274147982337 0.66783246751130309615;-0.41291173969177652481 -0.49521441209576350095 -1.0001792416543355824 0.030537286792071096503 -0.77441278032451732471 -0.10207907047686259894 -0.22793712613793548627 -0.28356212739036651405 -1.3955922144705761312 0.66459568555873849149;0.0075145501288244867175 0.7826319125890384143 -0.72146263465765403389 -0.77169771549481291917 0.43672286946036642519 0.67004223124152473279 -0.063103082751303760101 0.070675235733612493116 -0.51815086247592767599 0.72778892711380405167;-0.090755146787627166693 0.10149564193335756934 0.7548818147660447675 -1.0341227410967213096 -0.34510822865003626392 0.17938496786293067764 -0.55201825813492688688 -0.75280158730517177101 0.41554391878948776506 -0.85209699927370019523;-0.43761339596084669612 0.84325689292521199825 -0.025596892947629481391 -0.05955556363081896537 -0.42047827343103544306 0.88405067175485219089 -0.98986401846293892159 -0.18166569901075221849 -0.92374651994818068879 -0.17922032603409462914];

% Layer 4
b4 = 0.43915750067814196544;
LW4_3 = [0.34251049461229854387 -0.71082404984039526674 -1.4724756058899974853 1.0270852444019507033 -0.12312657068096009849 0.7077763419956758506 -0.56287098901801035922 0.19513422449701509076 -1.3966499897630746396 0.62371426307785471366 -0.27191829317961735413 -0.9655362417886119708 0.017553641299305922097 0.4149716969932367161 -0.70470614474231341173 -0.77670576105818267543 0.8009171037173016261 0.73078813748923598936 -0.86713241469457547073 -0.33452660670618039607];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999945;
y1_step1.xoffset = -2.00000000000019;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
