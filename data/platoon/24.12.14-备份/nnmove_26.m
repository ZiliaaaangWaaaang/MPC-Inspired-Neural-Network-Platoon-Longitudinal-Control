function [Y,Xf,Af] = nnmove_26(X,~,~)
%NNMOVE_26 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:04:20.
% 
% [Y] = nnmove_26(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-13.2925490923537;-6.70139767883548;-1.99738196042707];
x1_step1.gain = [0.0638195875959219;0.168202204644631;0.502170423671263];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.6200665584240581119;2.8940965969429104376;-2.9050898153844264549;2.548547974994850307;-2.3884529872705906328;1.6481766820502963267;1.8980835454903586257;0.43547551497120473574;0.86400697184681229945;-0.029244223859935181836;0.42500651828732322057;0.37326149416284859495;1.7804490334519904593;2.0073688886120151231;0.96200570468589752249;2.2601338276748927925;3.8044226995183700879;-2.9246049720658753301;3.9075926276547550131;-3.8578082820232610928];
IW1_1 = [-1.5373785942854107933 1.0667665886089923166 3.515874741836452877;-2.3777991160440006269 1.9538777427378031248 -2.671127440489606375;2.1260874129613687167 -1.4785240382475539622 2.8992007204942544796;-1.8634526023530353367 -2.8347822796160082603 2.0186503706018048554;1.7680020466518138189 -1.6808168005975547832 3.1182026920250716095;-3.4809265219589420326 -1.3569428365798383851 -0.63554233334920295917;-2.5406145618346842596 1.5974446152194228254 2.8922004794123803428;-1.0824093197518542819 4.173376279988330495 0.39700335428876543098;-3.1710369213325666493 2.7173028328500730133 0.93063776099149375653;2.5151829010809403364 -3.1859949663171698298 0.72966885957232618942;1.199513864066666935 -2.7641178583068444219 -1.7972871221489603588;2.2155360327402116027 3.8570755043365929637 0.075987418667624234692;2.9030010555478811263 -0.7558298186868349644 -2.2388406176533881542;2.9663158353818710466 2.9482628882396131331 -0.4358357418589811072;6.3950838669083829302 1.5020093533449432321 -1.1565998857112109732;3.3207400472047732265 -3.3356188486378437474 0.020729661612095072465;4.005097131083805273 1.3283718285182635199 2.8282578763969725699;-2.6222525982912130438 1.2429236351726495879 2.8034867451739748923;0.42088491764997981726 -0.80939388358743391549 2.9922553838139367421;-2.2349773264188073085 -2.7490047859753405923 -1.7574780173741941791];

% Layer 2
b2 = [-1.5885276306679969593;1.8868942026212991436;-0.99974669051027920119;-0.041289506618603352694;-0.21248049735629540025;0.075750715066127710662;0.86616004589901995914;1.0488928045774679187;-1.022550733868793138;-1.8295062584027599328];
LW2_1 = [0.18795847729716186336 0.094601671235051212894 -0.01545162645260308304 0.03281095167017626657 0.4062766067223438915 -0.025428357918709964397 0.65116750392709976669 -0.19704981662017656552 0.37423649097872568881 0.28213530524905000574 -0.50312945066095293711 -0.68583483818470647453 -0.4337626148601133047 0.015652867501417908058 0.63547048160302288533 0.034709924242138034955 2.0277644918495929538 -0.51479875316845891131 0.24338861742191544857 -0.49321790628508876964;0.28128573520913219275 -0.39601576212785799536 0.31844855305615688001 0.36370831710203610498 0.2404155899765530735 0.079742569379068636848 -0.077217262461812610774 -0.8626467852934193159 0.22678888760099899513 -0.12297067116615635618 0.29184008806620537202 0.70728156643702422279 -0.49506193253410685218 -0.37691181900084214096 1.0216472145378940883 0.20261082689055118222 0.42370644058029027779 0.17314151466761626419 -0.81359266271155383787 0.28147840949748215156;-0.12720863425592482399 -0.38961243503812437172 -0.2005221915523980325 -0.25927931913987961599 0.24572265320263600441 0.95450552557874868143 -1.3340394906624819527 -0.12515074737167664054 0.13182979539367137289 -0.85368178323004795249 0.22575423558062601703 0.99823339582391923397 0.20281632678480582266 -0.55844520441126155319 0.3980859270087305779 1.0645050975504051216 0.74687543935327749267 0.73160935862989240341 -0.65890023134155673024 -0.066744149206781108741;-1.2729418841443325139 -0.73682823477323911021 -0.23534532917901762605 0.78476533052076236086 0.62555073013328921228 -0.57010855180783115426 -0.98398023186297778331 -0.48956633454545395168 -0.56211510479486137548 0.22049203105472714448 0.8239520455088691353 1.2309524472496757852 0.58258757437128239065 0.32383252553017061182 2.8683000744280158223 1.5092430372441831832 1.366911026244202132 -0.32986010831553735922 0.045965117925980347735 0.30799592560944250019;0.26953430189802979333 0.82877232296168412695 -0.93816416648848832693 0.10098017918888066435 0.35534829193967515382 0.15696503106646844672 0.10144068734091185591 0.12233482315139951324 0.96787764989211289013 0.47532503758643662728 0.0062463099422255330753 -0.24257449865796248956 0.12490922010787884611 -1.0594637935235651227 -1.3700199128648644642 -0.1236422483229257796 -1.0302542971439749842 -0.90560574921163117246 -0.89739292656588132147 0.031431655038137065739;-0.25032037913733262702 0.60254359241818500337 -0.5499273347082053176 -0.28396390002370197614 0.24259326731705993518 1.4855559986282069751 0.32887063810827965593 0.19032054524601610401 -0.2150243319526542185 0.60873983890016780673 -0.01419267777297430165 0.16499830167961493377 -1.2250375297842335254 1.0289433052866647778 -3.6271472970178262329 -0.60176077365433633393 -2.1654738691268384798 0.1353833159496836136 -0.12028648236679313765 -0.19890908700896686723;0.54266192093740428515 0.38309852715860304162 -0.24065780729978966668 0.11906789513624264909 -0.80524712317232560732 0.3213182103676916479 -0.23920459925644221855 0.68269292982263096725 -0.95672671435707801191 0.050044894426906599838 0.66367454775977918757 0.2574141073966029758 0.431420764910244392 0.77032368713448018394 1.6703431609221630616 0.30561388038040759874 -0.32484984146706713526 0.065938866248998417863 0.57142489368082260981 0.059972585556162361087;0.39617307862159756304 0.46048743464215258214 -0.23793757848926508358 0.24400499981820905626 0.15814886380559903256 0.29929016451952122901 0.63436156922176090145 -0.23810909153600368082 0.38885035339296092349 -0.31263977806976289697 0.3441670218170687634 -0.13597824978242809002 -0.18194772934164660239 -0.39720590944050931936 0.58046608136132848976 0.23006957510705985936 0.10311366886135887866 -0.62290836108949243499 -0.13148907250808497538 -0.51593754273316527748;0.0074375529578327584726 -0.26991328733433911369 0.52567519019887876119 -0.2325871254555960943 1.2894008471289863937 -0.45556598864675645899 -0.27531579484452212148 0.26131232064326537223 -0.14578860356510070506 1.3035546274531621957 -0.2005705860287700093 0.25518301734210779852 0.032308940798621864354 0.25822490624444782714 1.4642540151009331151 0.36475466784649895891 -0.50139544952157066859 -0.27726653202975393153 0.71140236885728680427 0.469278759184927452;-0.46045259186221143555 -0.47730659144959092233 -0.72733191003796737739 0.22134767142862926681 -0.66087424720412069057 -0.12543985676248525785 0.84543216144901978115 -0.58778584044792914209 0.23697902817972796297 -0.9154711314811193601 -0.47057628399533590891 -0.90080727458591058898 -1.085942591207063268 0.29734225993816609801 -0.076327736928620645851 -0.17798912584042517193 1.3958827165017306804 0.028578626056809344758 0.041580530652156444393 0.36647704230494249078];

% Layer 3
b3 = [2.0343525025878101964;-1.7604332634851207473;-1.3317226386735401267;-1.5397303368826869008;1.1767104924614006922;-1.0499427927376798753;-0.53859368721105882472;0.72106292389135961951;0.0057479479095843416525;0.081208597441012039808;-0.11483697844891854745;-0.35192149351281132308;-0.62975723329810895379;0.7615688275124151696;-1.139650724790407077;-1.2018473585600772946;1.3919044919192582466;-1.5872738264173458234;-1.6903713269606239766;1.753763001692356438];
LW3_2 = [-0.74002328504722447722 0.080150748338504856916 -0.4620571728570220249 0.97234669895461312006 0.45473477561792802204 -0.55520823829280863126 0.45986187112357052031 0.55144544044983034858 -0.62087801415162213736 0.5946447452654832766;0.22251431475838939766 -0.93763128365987169488 0.34060869319828818158 0.70156372644238229608 0.45777243498464043059 -0.3131261950760106938 0.40324875567007634203 -0.82145005875854426591 0.25032824118474678032 0.84447436382105178776;-0.23923696894131621371 -1.1059717363382248756 -0.36789746819573471148 -0.40738284780114913941 -0.18097097736243294985 1.1104377193446983707 0.09481981380581964991 1.0151649173958670058 -0.27391046296203863664 0.74873785037519891006;0.95952654311175167301 0.17508848328429341135 1.0986993029535956357 -0.098146333153245973735 -0.72867684077235550522 -1.401576447721208929 0.48227936259427583998 -1.0508741035421995669 -1.6973872345786122917 -0.021440189620501495793;-0.46675330241059304059 -0.56960801844569286523 -0.98881610913930340079 0.47661987795113514021 0.3855093518635152039 -0.52767258736276390074 0.37541516849155037727 -0.71270038779609390378 -0.72262885822344180564 0.16418181164594330967;0.83924237460454853554 0.24685123950083889821 -0.76984182178046511869 -0.62111670509128258377 -0.7878616274986411927 -0.66743505833123439874 -0.62455630598538325327 -0.019241404084864230373 0.12209006068421257574 0.40327420359884824652;0.012996364898670436511 -0.81839730865449233921 -0.77116982693682778471 -0.56139429196422740986 0.7137676041052944953 -0.78402960743514393815 0.12608200437781230674 -0.82888509341032645672 -0.588597357046165226 0.077726875335120765298;-0.68347720609547002457 -0.74031890353366802682 0.79950374791577927258 0.62022957288280211596 0.67402182146547240382 0.80484193034653772614 0.050027607110053960715 1.0123540802401016503 0.38125437764302089194 0.16875662041984870743;-0.097874922354188237383 -0.68509733622997637248 -1.538373797226145312 0.55061549975724077832 -0.3559172562925215777 0.66133998262578486127 0.54065075229323900086 0.98485244476909716838 0.60929712359371079877 1.0071739799481120858;-0.45189949959996894568 -0.37604771860182423238 -0.48675945996194130982 0.88924382204339291746 0.36552374674989562831 -0.31403801839880662872 -0.2052116290844900881 0.88149417318939993216 -0.50467049512158035363 -0.77150133810295151715;0.41920013532518235477 -2.2592806829293028414 -1.014855814032960879 -1.4546636358774012177 -1.0262121638590646633 2.2722915257605915684 -1.0773514645646473653 0.25343210662759607654 -1.0691173248850898148 -0.26022940192271398763;-0.28491079665744423188 -0.87569394887086959844 0.65743330758632345656 0.84358150721634073133 0.80281155835516671004 0.74772023655459496361 -0.26041331426188563114 0.64457485888289278719 -0.23597004065659116234 -1.1688140042884509473;-0.84670179788481314542 -0.63388621780821707841 -0.70798478975584688833 0.080002258151345415071 0.17461522988774375031 -0.26973560960092413108 -1.0656910982609324456 0.0336091351580787151 0.654606799563923758 -0.18509544652835965839;-0.019632093675718297054 0.58300108589462440456 0.18282754681492957571 2.7247550439838397196 -0.63565531318969137331 -0.88590419501559980464 0.76676915542734391806 -0.93358404255848426168 -0.28177884061768376789 0.039794894616134536547;-0.15764798458673720538 0.086078786491057879271 -1.0561152451872999336 1.3367243768523886516 -1.0529046709407585691 0.95599202621691281578 0.45964379880307637549 -0.040862027833029578028 0.04585157381897107115 0.31398403758193094149;-0.11101135667531668305 0.49849964102641225461 0.27967474173865375375 1.3572379965356851095 0.87874617910695818068 -1.5119114558518786939 -0.45214287911652922825 0.46476935619997816751 -0.93004623935835872839 1.7232042770957460842;0.22216172893103183772 0.29549812235771810709 0.51227210681227808298 -0.64412113965977313423 0.66724207413032021741 -0.38791195420660196103 0.76150552292554440914 -0.61569181538150730137 -1.014776027372337186 0.3245164840286383634;-1.0697258314728586015 0.48745866454887942787 -0.97577622298452371119 1.1528509495706269483 -1.5920813092199717076 -0.38588498402964299672 1.6254740462662833345 -0.32933624271793737748 1.2893048149228287791 -0.3835651151912144452;-1.1231923044867571093 0.71640730038575151095 -0.0095762945702301573159 -0.37539932685359117537 -1.1064119545553139368 -0.3644216163545891396 -0.21462089560989874859 0.24259954553309950875 0.43554308405952124605 0.17919072356883608554;0.60412643514269204204 0.22401844823203231893 0.45129736208330228919 0.72325501790194801632 -0.55163054361058760922 0.68644059936008394729 -1.3221741998588802947 -0.66514420318197775561 -0.085448881651921895775 -0.091493766419458083528];

% Layer 4
b4 = 0.22654194883829001372;
LW4_3 = [-0.57777818510163592158 0.18268398378841890772 -0.44767685255154293644 0.86003929067571349698 0.18757400310942518029 0.53541117979206953592 -0.18585469969319748373 0.29204339067841639244 1.1559066689560484331 -0.41775685692008784899 -1.6718888136140064304 0.27880379318324449711 -0.018371310812118367417 -1.2545450112857559066 -1.2614732086233730879 -0.83101079201273453378 0.10979475054363617426 1.3273586911501349395 0.3824370043060506541 -0.14257661437666213633];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999945;
y1_step1.xoffset = -2.00000000000019;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
