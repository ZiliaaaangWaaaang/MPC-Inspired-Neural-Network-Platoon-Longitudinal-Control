function [Y,Xf,Af] = nnmove_32(X,~,~)
%NNMOVE_32 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:04:29.
% 
% [Y] = nnmove_32(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-13.2925490923537;-6.70139767883548;-1.99738196042707];
x1_step1.gain = [0.0638195875959219;0.168202204644631;0.502170423671263];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.7992555390660518455;-3.3129268089075893933;-2.9398914038965839879;3.1930933082283017299;2.3953999552809523976;2.7391915666669066631;1.2945918362327752948;-2.1891413868737252812;-0.62834097914515185668;0.33497880325775836186;1.0765773660148751922;0.50044498396747372215;-0.53584263495620476636;0.83651372490620767852;-2.2893494379062104827;3.0852450432029612237;3.6781747913661129168;-3.5486890895726457273;-3.4169980675204634224;4.0948367804915868362];
IW1_1 = [-2.8462195019968730136 2.1479296506617440166 1.2922249019072478138;2.2247214256999612303 -3.2368602630194471814 1.8591163015254170698;2.2036111212029374506 3.0894426997528805501 0.26139260113409101827;-1.5268687653399588555 2.6813743207100206867 1.7547102253816104778;-1.2515755151429182046 -2.0608973729339790104 2.9126338215375606744;-0.91931678023161944591 3.3643586579260702507 -1.8552923933027398729;-1.8880452274350858488 2.1466262314453961046 -2.4657593737057186267;0.84566231847439732316 2.7007326628753118847 1.9579901021196322031;-5.1423867487648280417 -1.4092602002460881128 0.55723567854349909112;0.23528106926856690029 2.7719247153896908742 2.5162432506796861276;3.3119912391893162606 0.96521091424279104043 -1.6599361752425225713;-0.15860190977854352057 -3.3141433530968482657 -1.7267705168996312359;-0.34955576721783415683 3.087429668777162739 -1.8536352480647313445;4.1354516316700946632 -1.5887150914885024289 -0.66498609821871501602;-0.37859208014088513439 -1.1140676374693103678 -3.2325437463216739609;1.5045393742572419349 1.2767758778797846375 -2.1523910152451941613;1.7788581466908568451 0.33045884982566048338 3.5360147288897358919;0.079759628189346398752 0.19372932471591142178 3.9110472627690020531;-2.4918181267065326878 2.874084145816789615 -1.0193019209222684562;2.0281670873812762679 -1.9427925416622608967 2.3498864270103809737];

% Layer 2
b2 = [1.6356214442699030798;-0.96736264839756669343;-0.77168975933987737914;0.71418949921434649042;0.58735108445908978947;0.19769497124321511183;-0.59374129005612363841;0.80994175458596939787;-1.366043982246532229;1.6442172683015034984];
LW2_1 = [-0.25611493444998767455 -1.0618859309599470997 -0.48958333442222096155 -0.55332159082640974823 -0.4885423150860195296 0.99712311937515007987 0.48429612994499382506 -0.11839242792760548695 -0.6881603923494907793 -0.4144968237474857542 0.5316549710410024554 -0.083334011502570692898 -0.072721384809241243485 -0.52023985891350066346 0.37548021212458110307 0.60568729453897096615 0.091160507924025566129 -1.4330813920046869825 0.1663318949327534102 0.29442152863071041624;0.74828832940591893941 -0.27416243794532629829 -0.57635583247672128593 0.31183254299741375304 0.43521636042080108497 -0.37239227995366691593 -0.13319398675345545113 0.12062651923585487879 -1.0504979093666302337 -0.2581788678441996332 -0.55831370879234487603 0.42030501762091126983 0.50256052997761557766 -0.25826328028972561635 0.52409317284567369377 0.84596812573009882996 -0.52914773916545032595 0.028022519555323869428 -0.37412872292013821252 0.036916642726812207154;0.4567538213466261765 0.54124499461258046562 0.011331573084575639193 0.44870254394912606477 -1.0354864963299168501 -1.410181591943538093 -0.49628733300351257629 0.34415344874156805766 -3.3940770239710547074 1.0884724317407932226 2.4197793789877004578 0.14455411186689948178 0.52787908669461724998 0.9639965939584705934 -0.30411815276378650896 0.91845493658535326542 -0.99803811479602866363 1.3009178108232033466 -0.745557602392562635 0.86705822141268562575;-0.31267512912066841579 -1.4761512069436042438 -0.1710732944631768726 0.69544622160414393264 0.074240836399000698087 -0.15567410058807551465 -0.60783247569856801995 0.26486937415440825472 0.21970739558867555252 -0.67582796707577141859 -0.27721915128527407912 0.047246253110592648095 0.07228535898463725462 -0.85820935418613220058 0.25042125233626566505 -0.12156366812196628402 -1.2248106590690375217 1.6340328993477475361 -0.30337678638565368505 0.71699828218837624583;-0.076502745328181132045 0.47641725960518477301 -0.15866029982147336619 -0.0099167352600737414953 0.14795632488650062308 -0.67871139887267395441 -0.37630892616458921918 -0.9973767179047352549 3.2481986019566249091 0.33209749348167255656 0.3157307678272286422 0.93179297522911952445 -0.83813750057705316276 -1.0443806473159533699 -0.47735352887113496889 -0.35543963616133245065 -1.6701374099098289516 -0.12973953474922031437 0.7569893706409398515 -0.28855582880014557512;0.33774979720920356163 0.10525423863781831202 0.23434275434246432113 -0.20768674656443625315 -0.38511238659352070579 -0.10820151716296300126 -0.57356681467637538052 -0.68847853623596233508 0.87037498569003535209 0.12590587094115193723 -0.81268581611783607954 0.32237538634695844797 -0.66840725434132175486 -0.63731077656825763089 0.094278930626430487716 0.28546612203894417004 -0.081899897847876962365 -0.001269722056971935454 -0.38810949338833972133 -0.51683674584487937498;-0.6521840936382053977 0.56864861859662951815 -0.48007886137821498274 -0.0024469940686415803457 -0.4062007133877887366 0.037581728330810255934 0.19939310562717393882 -0.26513467307425497843 1.1436732540698506533 -0.062370921433481107954 0.27501490062817657289 0.063245574281221947355 0.54401497283640776192 0.78090350358129734243 0.31485609663930075319 1.1641168532515786538 -0.77670438116529438854 -0.64637451482654129098 -0.34818377857336613168 -0.36389320858311929863;0.16647077701539489403 0.17416291754953769355 -0.30304893214596156925 0.4433549440128046748 0.48858626883999151103 -0.040353515298235810571 -0.59769804792043224051 -0.38314839118869009615 0.22180453532661137395 0.15400462042188445277 0.014630007290928547306 0.14372673954754888737 -0.1656452379522069529 -0.28908635758550788042 -0.62863431381338474857 0.34613673865467498025 0.79431202655062804752 -0.14234736596766789374 -0.58097445851941642569 0.16612352922950304746;-0.53501133543334222775 0.64474329244461237032 -0.79397525834530024991 0.33652471050161286703 0.35608525347557340446 0.89532720358185124976 -0.057807785341435477533 -0.69250275644835179722 -0.36465128238478333733 -0.3747001729024169725 -0.078525656924472914122 -0.20649044390571510976 -0.014584250944754600932 0.022530093183600101436 0.080313824810683068223 -0.3202902444954033867 0.1053980058304780365 -0.38368175289133571448 -0.22231432166355033497 -0.10429073140311970191;0.85428599288419149183 -0.16565211455078582281 0.31747059293691820558 0.57237056308915645886 -1.0673322743177136029 -0.49614858930577138141 -0.092647910304613653731 -0.35802575935462721546 0.6127466233330756129 -0.36039943971182908378 -0.26419301520442084463 -0.87434618382573636719 0.44138740068204129763 0.92399773014804376103 -0.1395780206564387893 -0.44181369428230737872 -0.084243641203652408489 -0.06276949642964252396 0.13535102127904832803 0.40478116635856331573];

% Layer 3
b3 = [1.5729516133652072796;-1.5195159587351345643;-1.4563780659316274413;-1.5327151636518729916;1.0335618915974655874;-1.1438706886516485373;-0.41359501175790053251;-0.52699957147848597305;0.38899503236091292901;0.23289242012080652033;-0.21851764006235435689;-0.59907922734717033997;0.61762880798605157562;0.83980237722192663252;-0.862133199190254218;0.96900726119694047256;-0.8737488712865197904;1.2261665208636087776;1.6996753671334170477;-1.9107294443758888747];
LW3_2 = [-0.99624597173952278428 1.0699021105759751737 -0.18717864094699002142 -0.019116391249317177953 0.44080177206657650268 -0.45629804078834873549 -0.6645674445230824734 -1.3012399828438978577 0.80822637865868807161 0.22852637022539837308;0.30756939024497259583 0.076201046961043697459 1.546537223533610117 0.42456859324246715159 -0.92269502683997184356 -0.77406429112390262581 1.4340371655060260014 -0.14941060482764292883 -0.79744062692138462101 0.37677599541102968494;0.56583630696325981635 0.43731945320755521989 -0.28548268816206912035 1.3546094060221909317 -2.1151072187961417193 -0.3500001416592381509 -1.057470258603566915 -0.32326698849506302347 -0.65012595655496185909 -0.48888131360698022787;0.0079498842422361642307 -0.28350139558270937012 0.32419040680961569434 0.80310969072115878653 0.51690708604341073507 1.0171077049205472509 0.50838298666106829238 0.67965019314116936755 -0.27655171284530555287 -0.94405250647112437523;-0.26229650347191635351 -0.56604681794550881779 0.38958396837597186746 -0.5223476117327964241 0.65498632949618551535 -0.30552168993269990249 0.4840700927077529192 0.90313531355336862383 -0.78916684271687953522 0.89872345591960267619;-0.1739627470603321846 -0.69436453031551859105 -0.55032457801096779093 1.2848847750521121824 0.25848160191770214178 0.85393528936370799443 -0.51410690655120583337 0.23923948673263567555 0.38404938556128270788 -0.33591829348878482486;0.45179681055403664303 0.95258162206952301521 -0.16216568983445536767 0.81886208613351674224 -0.9174046146160438342 -0.77117531831205676784 0.5517690182727159609 0.52067319789856247869 0.38336928584636298378 0.76165662514515841686;-0.047385025465669368405 -1.0436028605950649073 -1.1612023603872803079 -0.66996970578770664861 -1.1057652629939807021 0.77201333400965077569 0.5479765139476593383 0.211974661593986341 -0.73463537033639481066 0.4055473358800961714;-0.89385584262203932049 -0.60265357617272008461 0.66822285993326357989 -1.127657662851832221 -0.10496394040974302286 0.16346098369526726457 0.69679114490858773401 -0.85737135896326432949 -0.56390244180922344253 -0.44606093311626210385;0.42062889929301361391 -0.38706420569105182139 0.4803020739555837193 -0.28321495318834649657 -0.68797100374828745739 0.4434683454739948294 1.0737396825490479468 0.79516435954718378554 0.51041539451197937005 0.93385523086023458639;-0.57261482499387195144 0.1320291878419857512 0.49945994312430791462 -1.0662105022119434672 0.3364453755599024487 -0.35890541669856995677 0.050937980141607414053 -0.39757114172314411693 0.77004855651545656148 1.3914129376777353286;-0.52761594149015378363 -0.36689167203724248889 0.031482507619134333932 0.29019012254248244265 -1.383689335187481273 0.46689036474145839684 -0.29300399543345961861 0.26687991189817594773 -0.081911518889301815349 -0.61481223718783750698;0.36394440555951379501 -0.72315053027564679677 -0.65004667847647390477 0.33697435545842047144 -0.96488850265516246107 -0.78106164403936817475 0.29812409764962727321 -0.1622559039087980437 0.39532821163363279782 0.94422147490153673921;0.7200806180535022083 0.053613768611303611045 1.4909989704179669179 0.95482119985684432706 -0.45336318660096774913 -0.08621298156958602521 0.47066209898972383163 0.86062638815562741978 0.40694557543642873032 0.63542046829387344165;-0.3760310275789528478 0.0087261003194070343308 0.02652996523256695785 0.54136286638359620849 1.0564915682596964785 -0.29347008797459211982 0.92135105632703773182 0.84795462244834896026 0.37874432503861077404 -0.40887817063167714027;-0.049461147815629255553 0.20985641586096590028 -1.7174380893046048424 -0.47612316891153916298 1.3768400731780208179 -0.31971179610114713876 -1.3514679661841200176 -0.42733513727176719588 -0.14717703883100438644 0.097956419601346642057;-0.082641164168257175149 0.48257550306787189154 1.2648856224525739655 0.30552831586467105174 0.1367186551294556629 -0.20490539141700353509 1.0336358229914341944 0.20773275177564443084 -0.42032770961526882969 1.4732563957447017966;1.1612662461112708279 -1.1308899658582476366 0.27271997116889218349 -0.34719989664833494913 -0.75769017221901446835 0.85825785684418920418 -0.53755833032177335884 0.45510051443317312003 -0.56372227422350473791 -0.85668910579260071358;0.70487790141348016792 0.77243279542678366933 0.92097170218363044736 0.466893362426639702 0.69451650049834645628 -0.10121606456071470526 0.60537708770731679664 0.16630836151371736209 -0.63898664264130078383 0.60823496507989316395;-0.78944241138482040832 0.97637453636885118691 0.90168557295036710908 0.0178191132520173455 0.25189181044123409858 -0.71430151365078364822 -0.68904622127722736646 -0.20378766836465234125 0.85548048804947651735 0.77847135505332720751];

% Layer 4
b4 = -0.37580587572544110753;
LW4_3 = [0.48594462208968869366 -0.83081425572395894985 0.83819156361158353441 0.53557798745738560697 0.45255373253290914759 -0.59191335058417948733 -0.62650516594344007881 -0.53154667620021200936 1.2388214714104344161 0.13519266289455872387 -0.098728111695936288106 -0.80513500588418818182 0.62835805466917460382 0.39881562690421601403 -0.025388600121849180802 -0.99246954334240289342 0.31100880935559127582 0.81830305524207358481 -1.051551780911541778 -0.67487548226248750272];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999945;
y1_step1.xoffset = -2.00000000000019;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
