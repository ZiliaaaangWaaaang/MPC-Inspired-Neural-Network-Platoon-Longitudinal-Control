function [Y,Xf,Af] = nnmove_42(X,~,~)
%NNMOVE_42 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:04:42.
% 
% [Y] = nnmove_42(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.70139767883548;-1.99738196042707];
x1_step1.gain = [0.053913604005474;0.149967019141203;0.502170423671263];
x1_step1.ymin = -1;

% Layer 1
b1 = [-3.9313036862481318678;3.5145405122401522924;2.5253857336597445027;2.7638110096539123539;2.564689585766218638;1.9421699327435504312;-1.6192351611065205486;0.71739757271549497997;0.85329810916233217455;0.7394883656945806516;0.24965858643665594929;0.70988249669116754159;-0.43843966865455286097;-1.0424263819735684056;1.8123594247411711766;2.0343445702683689014;2.7541866641680927685;-3.2184221035606133121;-3.4575000768912502735;3.8999643806218649011];
IW1_1 = [2.0049745285246096671 2.2303526081254823055 2.1202453074710305714;-0.5381452880956044682 1.7951150143159781969 3.2310794923594619021;-3.0805872478063935915 -2.3670652547145829558 1.5299220917088229843;-3.30757020676306146 -1.2805372302642115123 1.0444113652135689208;-3.5203773893490284408 -0.54672733035331166906 -1.8487312196430674138;0.10751410006003227215 2.6140568227929081857 2.685814849358989953;3.7571337859109994461 0.04585704807033198771 1.1043027557126088301;-1.1429075438672731124 3.5487641473992148633 1.1843806158446907872;-0.63462354492837558251 -3.1293880313423354522 -2.4627209885644685272;3.5860943879126812028 0.77091549548079396637 -1.6034696131040240275;1.1111062550856458664 -3.295721396392725655 0.64983495204375552046;3.2549903718415520437 -1.0988609754247058437 1.6204851320971507267;-2.2957305612376246451 2.409491122513888417 1.6870980938013331318;-1.3435452186745566738 1.7376835872594318388 3.2120783504384000651;1.194049856097691098 2.9057214177835284374 1.9431177015148075604;0.46727399276428566166 -2.0867924232022327935 3.1762349923197170654;3.5747694950494803834 0.7251502150661839341 2.5203560945733860521;-1.0086615235350555597 -2.7179831020634170891 1.3479355544347950691;-1.31213220010354914 3.3796228999600455012 1.3131069965050223836;2.86194983174998141 2.3013493303585685901 -0.73004996863465454471];

% Layer 2
b2 = [-1.753601135871194483;-1.3906526627209672142;1.2269898318426848416;-0.78257759724704434312;-0.2277281623466097249;-0.09264012935561667661;-0.48835802623457896798;-0.95382097264051057817;-0.80993300523197697682;1.679809326224307453];
LW2_1 = [0.28834026994578643155 -0.12053337859828955336 0.11146665936647887074 -0.52193611772595804865 -0.8840632737345229808 0.36721447488763181433 -0.38935956400647164788 0.47202006448443045716 -0.29514786858408254 -0.31333469533830904385 0.15581538307020784129 -0.75285564695948792302 0.81211694719634408557 0.48730756636380040403 -0.36895336116321830744 0.003026980466112755893 0.02016275503187890672 -0.1056106496214784668 0.3965455112859007647 0.27586719229790579444;0.36033962329729857244 -0.66265621675939156976 0.076513980200028655632 -0.52580501230726806039 -0.57281124948026063137 -0.25584113997022889242 -0.18507560938813541473 0.20633002115641460583 -0.10408979511769449189 0.046266767724867208234 0.16480974792150762664 -0.35349353995434379394 -0.19570716495495193987 -0.019106734516834797399 -0.2539995544023230245 0.15792272186397296463 -0.92826647671256956595 -0.24672800863323118836 0.57019785337690298554 -0.54547592033437064529;-0.55634911617635129932 -0.35163839032687754793 -0.13201730022000898734 -0.58550662498245076293 0.28593481178937746323 0.31740683530424185221 0.51035609662910452755 -0.17458679227914900012 -0.59929411813169042311 -0.68201997553355808712 0.27470873532222733759 -1.0853348165359013588 0.050821618606015146746 0.46131850436854604514 -0.54200915588152831504 -0.097768895115998566414 0.36908207151502098187 0.11224888948478069228 -0.132854806788477664 0.7710584536775266784;0.28935528635547558274 0.027432223916778401829 -1.0026201415654303339 0.31013054328502692725 -0.5007865334173038363 -0.243267421693821706 0.26887666103867025047 0.70903052856404191751 0.057978439294042234675 -0.0051292023476601968784 0.039158106553500750258 -0.48975105330902551914 -0.61645000972931007777 0.050421125025060159475 0.46434998573313385206 -1.1546550492999168025 0.57395639558933697622 0.5202996976716171007 0.90845809133976895833 0.38008851570667462338;0.22068710213562800493 0.16081499638258067719 0.37028796664768937053 -0.19330188025818903497 1.6108337644171959457 0.28056986138668205122 -1.099813540754806418 0.17295439831433556677 1.0394773253543552194 -1.6594029864452080059 1.0785348038783777458 -0.49597664902069293902 0.5947588207797676052 0.76648718531861692593 -0.48557133970982624405 -0.30015690422114627012 -1.1866307088322678442 0.19718774849555387174 0.17623162644275131017 0.041521001044387190193;-0.16781223861778099549 0.40759253286989433063 0.87577848226112853247 0.34633474259193858247 0.18196046288243755695 0.33849553552199806994 0.29103715329160340097 0.87896870196752885374 -0.42149116884388521109 -0.25473257947621585906 -0.024067700898621383065 -0.53747893296705440136 -0.35950328651786117584 -0.16943033252250913612 0.54897150321192511591 -0.37680331455167276333 -0.089460343527440963629 0.40111247174086983591 0.33085425810920221501 -0.24849816835954127714;-0.14604593407680060979 0.11394964777086123708 -0.20287189073987882404 -0.065708859329115174019 0.54977821326206455232 -0.23171511413361875475 1.1368032032293415856 -0.81200162781419926716 0.32336807946434942274 -0.32350614024532897695 -0.64308553908637866581 0.10638928605686251427 0.0052959355331646520634 -0.71616337704847077283 -0.32147665986322754295 -0.83613826574829175353 0.87332487305666861577 -0.21669310008920930621 0.37814510851963822891 0.19130205230926039528;-0.34902707611289912615 -0.080652284685319916568 0.41446647823587901005 -0.074718626740868446245 -0.34921122016856709358 -0.48558734256484548109 -0.15289498391137967825 0.29410663146053095396 -0.78086882720242190015 0.12455085837680091032 -0.456803539021494176 -0.52932546088749354851 0.46492789214181662327 -0.60306325675983130097 -0.39680001922568819417 -0.0075857753347458242721 -0.9441382172242800408 0.44169670114880565936 -0.24928131853113522087 0.21496423434268219221;-0.76184765766872319936 0.24089644388480571657 0.25563890107420378373 -0.31819321039353121172 -0.027942308631119405771 0.69512072162268423448 0.77143991735489836348 0.2179080240401654045 0.30431453327876450965 -0.42672637274944869024 0.2388411974766876944 -0.15731587243313455149 0.57916256534193699679 0.30896924332807057523 -0.27008903230679842666 0.46307797203037004419 1.0312891631843681406 1.0541749140661162976 -0.68108677573205400613 0.60722344676747197489;0.25533995494547717664 0.14642472192155403521 -0.66186649511483097719 0.51880352252957140369 0.04274208495855033596 0.71871800606034186298 -0.029869674465479039566 -0.27621229419176929198 0.59683475770142224714 -0.20233444001316128191 -0.23343821905896189328 -0.34556499155456960048 -0.037810578252720480896 -0.15413625092109148329 0.30787541159395648283 -0.57681542272252772641 0.32977168562873404589 0.29969870934513020977 0.14355258965817790928 0.17501129466257678291];

% Layer 3
b3 = [2.1189472207607442655;-1.6474947824225736337;1.5760369947168899607;-1.3115905579383311252;-1.1985267121458207384;0.65306989600045195488;0.77946007124889549189;-0.49838340121856244957;-0.23366514563396384441;-0.28498546282857062373;0.0013599000491356571726;-0.25381620885454420078;-0.43757431151696279947;0.63217051480824482113;0.83647452533573485312;-1.1673931566982778119;1.3174225550822558084;-1.6455891442474632758;-1.7321838553840673836;-1.8132604243124363919];
LW3_2 = [-0.84439353517271942273 -0.4222208782917231118 -0.50471620766853175777 0.078694820838756063264 -0.76683034335175537244 0.11700507618357725015 -1.0272442125291567638 0.2297190420393599164 -0.3755204749515606566 -0.4651933342666337845;0.6550406947131662827 0.62807656195884820072 0.21812005344587531708 0.34588653900512883466 -0.068093900524413275566 -0.6841590793497478451 0.50441179267539471009 1.0052550149828070047 -0.86061209226060275679 -0.21628951019096470665;-0.30163854242296939123 -0.15019713917914523371 -0.75393316894947792761 -0.87886232920650553258 -0.22178228801808685944 0.26194004034535262049 -0.80936406395289672844 0.44130751003774526531 0.45056002119324134458 0.91087659276628196725;0.51419094266027454143 -0.61054559895589743945 0.39187071203297574318 0.52732616074903782 0.80969308662200911719 -0.29840164952074638149 0.71795059612275169414 0.13217481157846966422 0.72258277954936378507 -0.81038990297275192987;1.2032165646371812961 0.35959766195565506797 -0.1982532084629020086 -0.10271403445468824112 -0.36574620518463352159 0.66750881976895604097 -0.062938935885244212676 -0.38140244869677236705 -0.29909613407699880971 -0.16238790971328925794;-0.18779293634666283097 -0.51936623197547382436 -0.22702646565019454772 -0.071820927371185810939 0.53669305345815010444 0.052037241019544669407 -0.94392791371026285585 0.86005640754608092546 1.1487161485806172134 0.71043729393823218388;-0.74204634932062862873 0.38105926989185401332 0.79782546521192387878 -0.78717221253220137633 -0.11859935010251199117 0.84938390751990011651 0.74754992828632549351 0.02499213059269541487 0.42643006160414187455 -0.50016775496728194117;0.46255558899548171459 0.36044303907799840614 0.81841828320355192172 1.2439415012265591098 -1.5101111208170518996 0.66178760622214860554 1.2640525729185261294 -0.62883459277885922489 0.72927352641503428998 0.4958846755218204172;0.43348786390715365879 -0.40140933209051110619 -0.36428837890586623915 -0.60601834068940541034 0.024724747563427726393 -0.99922397791686656809 0.070566652633028623121 -0.38594370513423736924 1.2080687185677951856 0.55501479850516610703;0.31483621632177827276 -0.49153525304266304508 -0.71889945292419121792 0.28513883321082289513 -0.19660793964150574675 -0.25784082421817178243 0.77067429406123344471 0.72163081811768936547 -0.78220925188247714122 -0.72769187206822827374;0.16229739727620612344 0.86007229475123381235 0.24550480379633013439 -0.57206769472134322285 -0.20107698558752656881 -1.0098115670564420387 -0.20638610840019136483 -0.59647570359158430531 0.49871502139563272937 -0.83190381963808512911;-0.416885279073274162 0.74481121394368532407 -0.51020955430069336867 -0.20068469730262189499 -0.17657193055941719506 -0.68407139685944506891 -0.21678656906248963687 0.7314537743015435689 -0.63868046043597848094 0.30066389990966874146;-0.76073663856762652191 1.0472493424207016677 0.34894801785202617106 0.32744312752357240814 -0.49953324129409809595 -0.42736510401078658949 -0.81344157822958751414 0.42393196277894651391 -0.97923772090026639514 -0.5374428616058950503;0.17697027046856256272 0.61450083707859393112 0.64375149130836151201 -0.86080165593271229518 0.28166709385456545345 0.094495531268650706513 -1.0013134900047193643 -0.75961449615192511153 -0.6969252225701059178 -0.59670791106533094261;0.52002676585485807514 0.22384894307004005176 -0.079086903838699290636 0.063569019492379669201 -0.63508540329782692258 0.87547277683099578027 -1.0233160692667235825 0.54030859821169019419 0.51425101680111973135 0.71707684385780301461;-0.63195866383135956834 0.60710378860467517637 0.44932332038430927712 -0.43522394827441035492 -0.42453615336772165811 0.66558766264080648778 1.0644425440657871995 -0.69405704900112330513 -0.2166456915788101123 0.31957629006646426362;-0.094440528274106538831 0.78443660693812355955 -0.99519506880381392033 0.94753134898107138628 -0.03573159398597259423 0.63084113116767726037 -0.38440115023713639086 -0.23954949130061720108 -0.48835629461640672755 0.25951476127955702689;-0.20208859846541413208 0.086958060619355112553 0.32623016059864312632 -0.33879964835881526408 -1.6766350205468401047 -1.0031636799583827369 -0.16989329704988034853 -0.31564666021283965813 0.58201140321538114009 -0.099513729688323615541;-0.87026633435750244683 -0.9258854818519101082 -0.38087961882600362973 -0.60881098528143717807 -0.60795361516113810563 0.896610885662463164 0.16975240835860425093 0.4671560073459140594 -0.33095780529720264518 -0.43827832135973177063;-0.40908695877571282784 -1.0271340428469717398 -0.34029846495210736013 -0.28772837237657855614 -0.38924378951732135912 1.4736044407470618722 -0.54596419755499869808 0.12571699867788854732 0.76743860708911504354 -0.1044485861531103954];

% Layer 4
b4 = 0.65712453777492108031;
LW4_3 = [0.68437980942829645947 0.79608930285052859066 -0.36588608144886608509 0.50877041059466487916 -0.35591927259733280309 -0.37593960063786258097 0.62866109744066389631 1.0136374139417254625 0.39639213220605212795 0.10939143763513359264 -0.38530910738646734215 -0.51505910801709686719 0.49522550353399991119 0.061343230109625557223 -0.16509649199616979742 -0.37622307550364952888 0.13468296548732910933 0.31556885903550480066 0.50384354934225350497 -0.22729026232280272191];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999934;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
