function [Y,Xf,Af] = nnmove_44(X,~,~)
%NNMOVE_44 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:04:45.
% 
% [Y] = nnmove_44(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.70139767883548;-1.99738196042707];
x1_step1.gain = [0.053913604005474;0.149967019141203;0.50069484362843];
x1_step1.ymin = -1;

% Layer 1
b1 = [-3.7700007004057738413;-3.5515035903766163372;2.1960424076174773766;-2.6214250694404137576;-2.7135220070932866143;1.8184739270170577896;-1.115000632987578344;1.7120960590518228273;-0.0032903139029850717034;1.5145142674601148602;0.54954640936812571006;0.062533957778373686076;1.3567196581332405803;-0.081791596140298059026;-2.0653978830631807284;-2.1970680199510814745;1.847333298579216132;2.9646695159799016928;3.6213539434637804781;-3.6718374485497453641];
IW1_1 = [3.7042934316837721198 0.12945488013085457157 0.68226506922264462673;0.22565348713451724438 2.8626202416307848786 2.1525855072076991448;-1.3509725550541349381 -2.7110318284169516723 -3.0043801349883909602;3.7429620314703848649 0.38596118015783675848 -0.61558806813257516133;4.5160125897575955634 -0.96056800707745171319 1.7400549197880932351;-0.90715510014182865195 2.8431310587992291161 2.6197159326453687278;0.29333073082996707903 2.3045230789226160972 -3.1539270257672984421;-2.4129518214208669491 -2.2787438269725570628 1.9916849116748083226;2.3546369234064306042 -2.5806311173495295463 -1.8683745305090653233;-1.5190365370675085188 0.76292759363843298814 -1.9899143906214058486;-2.6924314229745172078 1.6052637594311249813 2.25681823909214474;2.2003318321858924556 1.8094509125278701589 2.5163389284716459748;2.747420600627169307 2.1375526551518553298 2.2246548664427763242;-4.6406572451256185019 -1.3161026819193188953 0.53223970366758099892;-2.4250106027843387757 1.9863132430578203103 -2.4386598702503725633;-2.2887882180933942777 1.8037095884009306523 -2.3989867069866646077;0.66275841326160034317 2.3480021999054834225 3.11093694819237232;3.001593064096718777 2.3623738666495466276 0.75883070633411831007;2.7322657306879163386 -2.8958401186667210858 1.7038363804300795668;-2.5804530793878224237 2.4179837270601232113 -1.6053633586611772976];

% Layer 2
b2 = [-1.9407655072190705958;1.5691640244233004964;-0.96280555940541612259;-0.39101908531608925434;-0.41147029833642190244;-0.070896471274687344888;0.30124092680072606099;1.0939085864723219199;-1.564866198679806697;1.8630608226035296759];
LW2_1 = [0.55048737520539869905 0.17362265679187613432 0.011015818993001025294 0.098299613492333112741 0.0096953759350015683571 0.62122535223367236767 0.4632644881379655577 0.38716172983054086831 0.25823154042778012629 1.0331258059343211286 0.25988344278894426331 -0.46150036533777999415 -1.4586408940209185658 1.1143751144242264317 0.8214814586566248078 0.94549135247208160315 -0.6217484752070793208 -0.070404174543151426535 -0.57803150353444909815 0.23647821605926153121;-0.93053679140220335597 -0.12543134153892482319 0.40675020057779559535 0.025267449905264371263 -0.47355403972134313406 -0.030234012066380776956 -0.18709179720179511253 -0.10517295710798710284 0.32582168760755136905 0.092427373192977779759 -0.40483578711936174521 -0.015404901225414257063 0.23626160103917479005 -0.02418527001695594883 -0.56527637445759071344 -0.66423301972614468003 -0.059358374614876613373 0.7436332556945554062 0.54957350790434233989 0.15217142737173922074;0.70427044186165455031 -0.21685022259167299752 0.24073934145059053269 0.18155653025953666369 0.37927542008865594569 -0.16232092907886291888 0.3215104200667027734 -0.40266722444514607693 -0.51746382154950565369 0.10209389875489595367 -0.73770989668320186006 -0.3382229277096501785 0.23213468984999369171 -0.54009480576634461002 -0.33899599674892172407 0.33308465792373487258 -0.69652030789867436233 -0.51141101904694907798 0.082314512295109554252 0.064396917524029193003;0.17274640660828760597 -0.39676491998253099469 0.9713994238109642243 -0.60305994449486577391 0.042992971256555469195 -0.12862044442592829308 -0.30005316244649032908 -0.35291683026890435793 -0.2378457500060295049 0.095711479697760767915 0.023551236030341749644 -0.11591706918229047196 0.83458755803313522392 -0.14702636911189012614 0.059837440589451076911 -0.6704594720217297299 0.28379730448846379742 -0.37024662596970159267 0.70821962433343443877 -0.26139670357034727743;0.27541534065731332337 0.12780535370627296721 0.2886277212150142879 0.39068977660310194588 -0.1517987534548563 0.10799991233882905162 0.49814799171407697642 0.20035513136877267093 0.37795302772790440038 0.056257592713176284016 0.35169425435950923964 -0.18601053483790302989 -0.73499465794802132379 0.49787333747435480458 -0.56931207690772400731 -0.98349256366939241669 -0.26990020944792891822 0.49286401830481357811 0.017329993012213110865 0.31531324648113218112;-0.17880384012284325501 0.21703049975013405382 -0.4055988368120507781 0.73885513731299801155 -0.78478623490112464633 -0.10196929361719700435 -0.45046577322343772654 -0.23944867984188836219 0.76541495612545573657 -1.3822526465299331822 0.2958091567339061756 -0.19362415472522914728 -0.22438883999748140963 1.6822436340089339524 -0.68314345925232922152 0.053433408953747714432 -0.17624241512926019926 0.067757553252349680961 -0.18804995275407612731 0.029919871034091702344;0.098188728393825155938 -0.55411958611244882533 0.21334938802486322351 0.321426180218800428 -2.869531604165783456 -0.27094416944185389928 0.36617748750200962427 1.061944735810915974 0.5794480051951919064 -0.97779069300696286327 -0.0015945365066964034984 0.76376055181473068156 -0.59870677790872250945 2.2234857226233679661 -0.23415880858058263359 -0.39877521847545138733 -0.10691638149690069204 0.32457851103214030442 -0.85727495507566098265 0.81992013162947696703;0.018052261782095138654 -0.086540888055152753733 0.029760440036213864357 0.35409577361288602226 -1.2200024228652863734 -0.17031345758187013684 0.23327934946869666177 0.62487492083084128502 -0.5935168316240324593 -1.1428409856032324399 0.14733143146974614357 0.042021159527033495606 1.0054924943002456761 -1.3592851412288127211 -0.16905114051545871989 -0.7737035956471799425 0.48795296670409565865 0.41060822557487369755 0.17681763358840332789 0.17870091489604450485;-0.35870470764401457542 0.37156955787239415168 1.491811945481748225 0.19810497200068394319 1.1397680778521090961 -1.2169830739569649225 0.88608890206028156911 -1.6025497072622285621 1.6249742757531815407 -1.7393272503339844981 -0.55922089470065172723 0.3924190740880038053 0.13333704588572700689 -2.1314827238052189706 -0.19488379341141665035 -0.20019943284524774341 0.019183705040711523243 -0.14800125724986537556 1.1702266873800430957 0.21156833586764037247;0.11640226721306159985 -0.35341995701821160569 1.1367552027753731192 -0.31104810815774586175 -0.57170322723101096862 0.0043947786539194188399 -0.10755136178465075913 0.37705474882496958777 0.412140227091415845 -0.49409085758635107322 -0.24432711418400779313 0.0030040393852800413924 0.79544529015328513388 0.030194223045224580226 -0.28303009804981721365 -0.47168619352977542158 -0.13430057479510240648 0.20753130182826021177 0.57095566818430609768 0.10477505906523054691];

% Layer 3
b3 = [-1.5337739601429014602;1.7527843220106611444;1.3721097331160923005;-1.4831997829437530978;1.1145377398942020175;0.90069256480558324007;-0.74590956599536484273;0.45671926483514801998;-0.31586783056167699879;0.078001689556009654036;0.1207582305560920416;0.30544492416493090881;0.55740826552724087595;0.52596539046137968931;1.0343826216844425048;1.2539349564792336977;1.2665106153996035232;-1.8043692070247048242;-1.8047736263723921368;1.7451908871761063757];
LW3_2 = [-0.26040549938076468228 0.19824715110080601277 0.42689560378069485447 0.85542413251419913145 -1.6708828007960854212 -0.85935882627352433438 -0.93914476092327936474 0.45688423639008629573 0.48487966331314868995 0.32656375508211465952;-0.71576212484257906166 -0.87378226624369292885 -0.71411606857017850825 -0.18145922521766541524 0.23520319880493287257 0.39860363428430722887 0.28914985536147347345 0.59579687106542000841 0.30367145135161827119 0.86958479517980002971;-2.1751094447491614581 -0.2925581902313242888 0.93753238670482774708 1.0412383332799950431 0.42884230976577986105 -2.3180504762103510963 -3.1749186621135101483 1.3193795329486146528 3.2601464920069807008 -0.80690373816126115258;0.72527911840165326662 -0.79989115314333258944 0.48335657861336633889 0.44320517257894281871 0.092600158794734280243 0.53216375143752836507 0.10545229298191327594 -0.0093288451342921040188 -0.84737547761341436292 0.46857821305885571928;0.064149999131528301355 0.073247188632668824848 -0.1330611249432546439 -0.95018033897491638307 0.071449537143383229365 -0.18323208806820290295 -1.2451988974889531825 -1.1528950932711021782 0.45419777818827072879 0.86460883504281982326;-0.14726245000813711905 -0.88052261446586888027 -0.55250497525876018923 -0.43823773628426132554 0.68082507699294192438 -0.32729426842689463006 -0.90144501672820098737 -0.73649084294033950737 0.69553489774229459996 -0.08988459078660002155;-0.17508658238300148224 -0.42226325996327374046 0.67047005873862930425 0.42163806405834602931 0.31288063261399728932 0.49623043950918971357 -0.1824999666465969006 0.75958033758568521687 -0.80769996669496479935 0.61469899259898330701;-0.8174820062551763078 0.65657743716493899289 0.1253542685483374497 0.74097447578199771012 0.71878372893789854725 -0.5113270598196604233 -0.31191868742304634798 0.81657110251523457034 0.48935924026140942278 0.36731607885469269581;-0.035795685035513252759 -0.82990827927433674649 0.26652087970103172099 0.67556455224969325091 0.69074218797554665095 0.60080216982770773271 -0.75203106737959490857 -0.38723050860840779741 -0.68879265354027174872 0.37331697991474194209;-0.20615970918190110184 -0.55856811193083732991 0.16897031850155555532 -0.13613221757053373118 -0.78493002206687645383 0.32778843484888320337 -0.45317510272906208479 0.33043979904961851002 1.4523105232018089783 -0.92442120358570745164;0.38522058203334824666 0.42928289425502336174 -1.0625893990297234915 0.2698342658932939564 0.28753432363142689132 -0.40972242198620539844 -1.0407482125959943708 0.33228713393175757229 0.095065710905143610554 0.75933152223530520075;0.17797246001956790185 0.53421658551902262424 -0.96443378806643131895 0.25123827544103760623 0.21287762502201920678 -0.2242365825818287417 -1.3721935867125376607 0.2156859820411336226 0.4616712133934529616 -0.47460958625506111108;0.62252747344125802798 -1.0664306338662319362 0.48691058689435612328 -0.08792717289483903409 0.32162631104857747344 0.50187184953316510416 -0.041538396549529836566 0.47711133440097086567 -0.21277316490942338456 1.0259527640294778816;-0.056428066650240388258 -1.0817960552650478512 0.55134439777844690411 0.27102144978695208444 -0.15011742279721590476 -1.0876801868990586541 -1.2156871166253779837 0.81469809962536943182 0.62184704026121606635 0.52427133519707713738;0.82297364803374106756 0.47397763817626864524 -0.24071965256129687627 0.12774668060472330056 -0.047917283341502463212 -0.60787916982142820022 -0.4868919077066592993 0.37992616322370958981 0.89518500304825765479 0.89020781057116538104;0.2093512882126270791 0.37916807274582742249 0.38681685500423285129 -0.035547426810554789978 0.55652827202660470896 -0.3200599481651644207 0.20904262983909574491 0.216434193387918139 1.1121290773188012846 -0.18009422437841474118;0.68542343599862232129 -0.66343799915733958628 -0.89951238544456046942 -0.5863564260813736162 0.18429310861801773136 -0.31197489484720725139 0.25564857404354440762 0.15374460520839047795 0.85888802542592435074 -0.39650581409901008989;-0.55884088405637022401 -0.38626212275745325231 -0.52450213227001918348 0.31589649640851025225 -0.48244236976667120853 -0.30277381074445447462 -0.55756899153558614479 -1.2382171095380731796 -0.076439296366150724649 -0.5914232862449653183;-0.60460700906962094869 0.24087735037701246688 0.91916597189171467264 -0.84184997249745474601 0.50395694477749042317 -0.78230929332315235492 0.017297227950131853491 0.20660449077480363966 -0.47922101241510695058 -0.5465295682982763692;0.88113162931545041534 0.27808123451191740783 1.0644070925507300718 -0.94100638847348028193 0.21886358941901878916 0.095161617212943874766 1.0965169271087660263 0.088039072675980045712 -0.069398573081651829253 -0.25046505615269532008];

% Layer 4
b4 = 0.45529297211957125979;
LW4_3 = [0.62739293678385721353 0.30332679633076270465 1.264489244590728978 0.37624005432441098851 0.20384904872123160713 -0.048176628277740773942 0.5003768305284318485 0.058359973027801548273 -0.22734545222921673235 0.02146859779412302674 0.21321446658738679725 -0.22414580059362926301 -0.16920362414135209361 -0.64899413529937066691 -0.19898987505099530182 0.16916285209161019409 0.16852558679719981116 0.38557089322416571164 0.21276060050980388771 0.28837020558046783103];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999934;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
