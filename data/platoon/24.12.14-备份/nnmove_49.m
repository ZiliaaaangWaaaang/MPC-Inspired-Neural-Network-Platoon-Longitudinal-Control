function [Y,Xf,Af] = nnmove_49(X,~,~)
%NNMOVE_49 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:04:52.
% 
% [Y] = nnmove_49(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.70139767883548;-1.99738196042707];
x1_step1.gain = [0.053913604005474;0.149967019141203;0.50069484362843];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.7780539370273782396;3.5748894260780601506;-1.5491745580717179998;-2.301478947684040488;-2.7128645695913080615;1.8100646636243724608;1.1456568051468216662;0.75162524855192525131;-3.0997020240727515272;0.02127035347777040189;-1.0247279443532228971;-2.9257191610296708895;3.4384283759544622683;-3.1142132899877816854;-2.4564623549790618462;-2.7947623153425844578;1.9297134431662248399;3.4641845834480533561;3.820489413998852779;-3.2650273246677206096];
IW1_1 = [-1.7264887529016188505 -3.1530601126421204938 3.6730496173506188562;-0.74449097099271266398 -2.7937063058125715109 -2.7503837791463188189;4.1274893299395190027 -1.1808197123942107964 2.0751834764395655775;1.5620484439807404975 -3.698500224446295892 0.63706758211680347692;2.5705756167314417482 2.2068972613996180598 -1.5736608521211765677;-3.543071921237431976 -0.9060398392154684899 1.6087207581360005726;-0.88978255458716870585 -2.531361305519173488 2.4289370251171074067;-2.102347136537710437 -2.7686303456412360013 -0.61095781549815675326;4.4507369323220915547 -0.71304743534796477533 2.0392399425657581347;0.78133363148758849803 -3.3689009272944150375 -0.051057537629871439788;-1.9220700429671002674 -1.6017094941473872804 -2.6453537713129509079;-4.9290360625602298583 2.0831801628338122434 -1.1616099909917807498;3.0034421659464141108 1.8500144438242516198 0.5266911149353120658;-5.2142447179355473352 0.45754649858560936249 -1.989904840013395626;-0.69377339157289896754 2.030512999927060136 -2.0879593248371168812;-4.4968872126413534929 -1.0029223254128496468 3.2849220549125073276;3.0753313310530776548 1.429107262360917785 -3.418332108292109428;2.9597222312020332602 0.75327071306810700069 -1.9787067453039310916;3.6759675345521913847 -0.11301903130331104885 0.79493933914156855725;-2.1815997974621348376 2.4037061839738087521 2.5489034470738638483];

% Layer 2
b2 = [1.5728463314881320212;1.1622681445435285585;-1.592327458802053064;0.81881658586061856209;-0.25288922504296157401;0.5746664931988202385;-0.89690888172949700952;-1.028368976620624542;-1.3393761495353435631;-1.7440963304984951066];
LW2_1 = [-1.0936462646002471644 0.22690173005221883629 0.3748446599609130403 0.22131676415081674714 -0.28583459351314427499 -0.89097487446859768845 -0.19713037519609757919 -0.43252435484873402727 0.041499180430163429278 -1.3423756267337934034 -0.96032003628115114591 -0.085065281935350595122 0.15593961278610415921 -2.0853350004554203068 -0.67447802602324957721 -0.10305565338547119369 -0.19534760933387854132 0.23459525622956703406 -0.18809272355867798221 -0.2190201112366811087;0.19016658921051526887 0.26867130708456987698 -0.24423514126562534399 0.61606412651096298383 -0.30448879610248197336 -0.0079513387512433163218 0.52050643553453723733 0.20263628444318410038 1.5323666329016285559 -0.89085034152439079858 -1.2347483546171946767 0.86186103266673852463 0.39882046534939807891 -1.5237956029843759964 -0.305558874231685762 0.12227610855535747669 -0.15528969433828232471 -0.31968775070231708613 0.63697272217202693945 0.043143514095649836138;0.038705077884012069334 -0.20250032457396197061 0.82165518489747901842 -0.083992992558182086316 -0.660878146384880516 0.11077618976996143896 0.63803758021619305651 0.88160347835352192991 -0.12064512495032478356 0.040025023092129817515 0.70442113305769915588 1.0776565242230953245 -1.176790438511986725 0.1409334917899025541 -0.81302753260673932267 0.34939608847589587182 1.4530777410791069215 0.14730533946516083388 -0.18405128736138526291 0.948734464044274306;-0.23731142692577836262 1.0772647669267345627 -0.043569398883480395246 0.8558706333745176309 0.18382897414362131538 0.71535965391490152765 -0.11477432600088087467 0.050440774228509080435 1.4705130830928816454 0.29049139632878040462 0.20571188491278519228 -0.94148899996945711877 0.26576907483799655507 0.62421147036616031478 0.90596672460185134756 0.68407564770936002407 0.042100539235456174714 0.16102789393851860145 0.35915425114805266116 -0.22852031144985018862;2.6967665278667070083 0.26212465621690894668 0.35054986433052925943 0.49853423595992862882 -0.057346255791294029058 0.050395218175390874005 0.65523062469480630732 -0.64122802450653948458 0.020625453308134457375 -1.2195437805668878362 0.43056179956379764251 1.8897848589448715817 -0.59710116287005787772 -1.4074946344550323118 -1.023139086541734244 0.32207421359130616878 -0.35326929562041281541 0.35916044695217985705 -0.092631657645066825535 -0.3894133094460016653;0.6226975394099222294 -0.14643883169747665129 0.47234127081160465211 -0.4132423018013896554 -0.10065625210882556129 -0.62902778969867179093 -0.27836237401690172577 0.72816017307005442838 -0.01411347821657277235 0.40606213388795769914 0.35681614067177941374 0.1335564401396663603 1.5210320860215582606 -0.73317631109371783626 0.32740828649090852887 1.6069402587241894409 0.56344952714723250953 0.25196609651776868954 1.0151477459382256541 -1.4201925607871799251;-0.4531779911625987145 0.081969086000229049449 0.67005806711934778885 0.033042353407560155765 -0.27377691248084995435 0.12579758421715209193 -0.95749840842751710035 -1.4757782512154942189 0.24032589936010026466 0.6941827649598316663 -0.47634260700004488198 -1.3242811581683939792 0.85877987425106683261 -0.29607978877379131921 -0.77162637148807422527 1.0045874358262762982 0.094830321216077595459 -0.71879334268790417983 -0.38322382890732148431 0.78165298026975593704;1.6773479328863998283 0.97521669049070514035 1.0973532521425486408 0.67229475947346073461 -2.5395769158508181285 1.488758143883235352 0.49470386581730996234 1.6378323042068170245 -4.1270068424708945543 -1.6569722067633547713 -0.14133604031367658083 3.1912993252730585958 -0.13801721871675487474 3.7062703652028141654 -1.4093264685661488489 3.2802744531731331534 0.5661420006785949921 -0.23166687979130562436 0.47887334143364773675 0.049782693510899270195;-0.26817747945628755968 0.20169460676771933105 0.24154721979892926353 0.64071029845494786858 0.070278638567176726637 -0.52286416526875534316 0.39100836044710368666 -0.022041814660283431948 -0.2274395156566950682 -0.23880738335054521593 0.24593668187075631848 0.57696956673680432903 -0.43661463229076707959 -0.43541439003839638167 0.16807203711709203797 0.11268312172727895648 0.082325894085560916147 0.27314509238218531717 -0.54547326290927033998 0.51896313331576615635;0.048470779405066166667 0.057371094788303267364 -0.77763227465573792063 -1.1454001258066119906 0.21928302587640643995 -1.4539933952320038824 0.96031032193466769886 -1.0784252340466686793 -0.99620869312597470913 1.3143855690202057573 0.65189865662137536084 0.30528515867616751178 0.24077570438785086959 -0.56134748917004761992 -0.73332201035122501764 0.43746883711951795037 -0.14786035812146497426 -0.95546741713428007259 0.16373154902548531231 -0.13297161577948926614];

% Layer 3
b3 = [-1.6771766471433986467;-2.0454773440591766942;-1.0928849984138280238;-1.7251899444006824069;-1.0027369568013364542;0.5923584601042723996;-0.38990276194510592456;-0.17879048048113735381;-0.36936149027412812362;0.24747093423555688307;0.18553994967783776771;-0.20639075093602146649;0.097122466958580205842;1.0075274591246605738;0.91698117478766627553;-0.80654499492430364871;-1.1654468887292983581;1.3399350048433549265;1.6893933586235034827;2.0232550407834368755];
LW3_2 = [1.6171445219835844931 0.95173407440326585061 -0.23009880514131741958 -1.8708334492984861619 0.80767780759783880384 0.38534417548045524216 -1.1924639061119155503 -6.4437030506911066041 0.0719376010954496381 -1.9457673625304183762;-0.18599702044036597881 -0.62215501975692255598 -0.010235611494429773527 -0.71297355166369369428 0.40624020145696781992 -0.25421731317852319654 -0.39147715647750769286 -0.72954693575934859151 0.83703442298508745623 -0.094093108378664400138;1.4338683372954612594 -0.19038051685999773932 -0.27951438804314832076 1.0851538872006489811 0.84561131903986941349 -1.1306213423543574059 -0.13415391944245427802 -0.31262569325928202257 0.4625622190888523666 -0.82627964781693619134;0.51625680322404365885 -0.6573321160726994794 0.78705772054491540679 -1.1116938531094255893 -0.59203131235469053095 -0.92601003606564091797 0.21830272219673149681 -0.77854884384411138232 1.2782522115120216188 -0.28454374334492754661;0.40992046087360445306 0.45638693183591472202 -0.38415806446682992936 -0.46352292715000548151 0.060819146861055065068 -0.18671182673439826183 0.54737671258828435317 0.72904376767679801574 0.30067525342271034239 -0.42940486826692042532;-0.88781462245806697098 -0.034676004057703886663 0.99856167959000252665 -0.84393157881485048044 -0.71843901838140800109 0.48977195623031966054 -1.0005043820957861822 -0.085445079718906080668 0.69528635013343342841 -0.29953997966513135065;0.6853142917490053776 0.69051461800578173289 0.19117645543486250226 0.12560849803434415151 -1.0176241059911870224 -0.34700789676241250437 -0.14022533238635270791 0.69611227401052155894 -1.2808169352562390753 -1.2140163502617709046;-0.33320668971283401438 0.81260802457674008448 0.73225402474265754993 -0.67507862165290544176 0.22600820306932828396 0.33005795925117714651 -0.21889943150340496203 1.9576588465313207177 1.2326905505993750456 -0.56415317228053818432;0.58080365480426443536 0.9208458271678697793 0.70842974760943500101 -0.45061951671647237916 0.49905769395228721796 0.94674430422693467424 0.59285631096803437234 -0.95693278154607874786 0.032519293005430903454 0.9212378996764403194;0.59498398505232730216 -0.073241380694283556019 -1.0116372284711079299 -0.39820078904441358336 0.12922708401083260465 0.43573477793837983585 0.56767420937830892491 0.73735969634383580207 -0.16268387139509260519 1.3382614327687256672;1.1243631346582498853 -0.098176644701081755562 0.77426656266553606223 0.72495864739772408747 0.71363421705784424454 0.27153622543594768679 0.42610907565583572287 -0.76085026490660567777 0.48639399553574974577 -0.35826376881484711667;0.67280653240070786847 0.44650454579976411873 0.52906146867653813803 -0.47391562330495712319 0.11509423997982756727 0.37273808492268756254 -0.16085634800081152762 -2.0624757792334347251 -0.028256233363163279354 -0.66501827348259390238;-0.30733266794222557916 -1.2822203891521430918 -0.98847473438483790531 -0.28077086343715290662 -0.023718254936186497495 -0.546786033623213652 0.6928208199304182191 0.10802658308864085401 0.81353523019838780428 -1.0299540967255975676;0.77277747619708103688 -0.50970646087099769073 -1.0962386352517261567 0.66248873917359962782 0.48315952684084434443 -0.59080849625921172397 0.24141413304256251204 -0.23481375602163717664 0.060060158129520146986 -0.27911968526216168751;0.82004357476166833685 -0.25522584664601971616 0.36568182561006717934 0.77945372950887759078 -0.23146106503795352283 -0.16258680790043830711 0.95052266580243649496 0.44801784784894088665 0.73456741618305920749 0.67419025027601708899;0.25149223213060289961 1.0761106473447552556 0.65552959379431252618 0.91330923706862077172 0.44810200981723874447 -0.57434846258302807431 -0.28004151267078064569 -0.76853968625590229902 0.34171017995448116356 -0.70233338459806393672;-0.38025165534268268175 -0.40371151551372136401 -0.65650299336165685027 0.39750588930011609978 -1.0953687646953429446 0.33669516124118653577 0.27133241061652080273 0.42936366890182858791 0.24337975490501692621 0.99712812328588196209;0.44140524086098426038 0.6799172793749002075 -0.39040774437591485579 -0.98964472825612725959 0.43287977069689420606 0.79412583733002439779 0.22742580831770053962 -0.3604828911668193081 0.5400173636194823823 0.65044161816525247755;0.33585079580607313243 -0.18188495747175303929 -0.78884213727979990427 0.42207495951798656986 0.89913631405841765165 0.86986704433585904095 -0.51747511827341241553 0.59496728359224226867 -0.59623364973994597005 0.26747122524960237344;0.68965819652702875509 -0.24298609476969867949 -0.43686006072330296757 -0.54445445792051505585 -0.67322447561064302501 0.78284827622910413414 -0.38115315059868315473 0.32270413474914344532 -0.89843796383982221787 0.33898017848129252672];

% Layer 4
b4 = 0.87347431275789511051;
LW4_3 = [1.1972571436276815415 0.22129116714781846276 0.041068334550760754453 1.2325742813288871336 0.00034652273557054884788 0.066272964884244583983 0.019438395750183124627 -0.012195375405819145267 0.038884079108027450045 -0.010720403150391227126 0.079813511430571859595 -0.28929855897379447294 -0.015129264278486922665 0.021579311413138992093 0.0093317875899260570305 -0.055637577050762429542 -0.00034408743794439074085 0.034254801450869759583 0.11119250294247176591 0.43528515401653117278];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999934;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
