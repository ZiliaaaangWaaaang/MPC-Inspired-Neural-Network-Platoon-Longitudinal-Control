function [Y,Xf,Af] = nnmove_50(X,~,~)
%NNMOVE_50 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:04:53.
% 
% [Y] = nnmove_50(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.70139767883548;-1.99738196042707];
x1_step1.gain = [0.053913604005474;0.149967019141203;0.50069484362843];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.7775582150654756219;-3.5257140128965707149;2.9196494317806109819;-2.5140975773631759616;2.6672550921165667503;1.6835976156533167813;-1.5050283639153048121;1.7269013766230454365;-0.36108183757799344749;-0.28105381704136084275;0.025329197635987000387;-0.98004222950632902123;-0.36116751111927014595;-1.3486509057028079894;-2.6014780936542689638;-2.0297854554385650339;2.0657302897158911215;2.493046540146896195;-3.1927202382843438144;-4.1206654663179609344];
IW1_1 = [-1.3560948436783404336 2.9116748625339656797 2.1506539980658474498;2.7043411371774532803 2.4340133507126333612 0.42990456511152919106;-4.0449704497856187047 0.73881127446868655184 -2.1716556188934852401;3.5998937867162195126 -2.1896894325819693528 0.03161336746833243172;-2.2416338563720326071 -2.0725072154357326859 -2.0375787550672117554;-0.095434326730378812864 1.1323258017468171843 -3.4423773572404776644;2.6759266955518037356 -1.4601121136044197257 1.9241405089033050135;-2.9055676319268277652 -0.58921805791308545786 2.0863856220940579789;2.7732304287185196578 0.8903363770840349023 -2.5793225805405932682;5.5483719286028048145 1.7620621541253098652 -0.43326596210020679178;-0.7220156068495211521 -0.29103556588947349093 3.778463733107876088;-1.401172193437793867 -0.21081710176384890754 -3.2358632473476052205;-2.8877298263562707348 0.46305218892918065254 -1.955232418989479859;-2.6001553640291437119 -2.1948794525139363465 -1.1118773929074867723;-2.0209386604346000205 2.3484579987007676571 1.8486719316034181393;-1.4009503438917707552 2.8086628225873142561 0.89039764289704459443;3.1675460371136288096 -1.8764912533554163332 1.2366992610254772256;2.2938778711276590627 -1.0113817208943538528 -3.211253789992732699;-2.6920375562772154154 -0.82938490841480827509 2.9056327512500348398;-0.43703145303550089418 -3.6678173658459747308 2.0449597806887687135];

% Layer 2
b2 = [1.5632291576512080677;1.0579805684873200278;0.5791578508397826619;0.40617168136432474368;-0.26881535062977718331;-0.13518245395292696753;-0.55050229481979318091;1.1575205283800469314;-1.0587518435109894988;1.4488755267868724808];
LW2_1 = [-0.074432822106856436073 -0.089000407579491958021 0.066248932807716723326 -0.16586547938206511188 0.5697135363296930155 -0.40994250075359817131 0.23216744128621336074 -0.56241916399531832749 -0.40490868106745081523 0.062100201527563500536 -0.50971802015686207277 0.066210806895220006285 -0.47079122137326856468 0.16765579490321874667 -0.68547042904990829193 0.38000959464695799328 0.032084917112838652609 0.69064784631039766172 -0.52310404570570612215 0.29475407090194827298;-0.18243405166459819577 0.48443188960840910529 -0.22939722176836982448 -0.078708780055691235367 0.039276903628127149415 -0.26315272702795033943 -0.7381204881881658908 0.30342957985891993999 -0.43402050233109357169 -0.169362208052169394 -0.089308078658218589818 -0.58791588254529691948 0.67979635058257992242 -0.24345011158260729256 0.41306327482499222148 0.55011625057844792952 -0.70463480038391756999 -0.057908926960478307455 -0.363705546443606198 -0.82969363414538943591;-0.22869073984789578535 0.26263605611775514559 0.14447253057857731284 -0.52250980292106585789 -0.38803044478112808102 0.60514485589517319486 0.9850216877573829688 0.3788869592018339616 0.45983056248863668491 1.0845866845963034741 -0.29683710328995355221 -0.056606317476861442439 -0.66912820879478585034 -0.42236492077900189557 -0.081797977429083290613 -0.19179860690205532969 -0.52297304239911024393 -0.43202245606319666926 0.89713001108655743288 0.49590625663257315026;0.093080514401083391807 -0.24651319442239483237 1.264148919056627296 -0.22800745624470561412 -0.2866128743010226132 -0.04578391594938121395 0.15416728277653596324 0.13824630101784571301 -0.28978704781407638169 0.3470197258254293371 0.10744299275227256474 0.28681519548871459158 -0.20666540390789384096 0.38381831295854101915 0.61071896433719652375 0.58694155427213645648 0.76496315640868972618 -0.80361277428235178277 0.13863827851925925039 -0.16617805186420320229;0.065722291385777245609 0.32085075452716160793 -0.23780398562031987431 0.43406618451748141263 0.62039151242820622656 -0.035050502466716842997 -0.47482669915224340329 -0.8365237260777005357 -0.24004950599743543616 3.5753448665610187973 -0.18080121191732495545 -0.31524915723726359973 0.57491680303191072809 -0.17598048627842813318 -0.052038353280431701164 -1.2842373699105493756 1.4045238255097887148 -0.19148219812373976079 -0.066357941646047122197 1.0925112714327118724;0.36415441181603019905 0.2496595929570245842 0.50265228506867032365 -0.8795029929779678568 -0.15582579046384381627 -0.54862494634132485949 -0.47891604544947175004 -1.0484427839272221217 0.38348404920843526256 2.1987867672527485752 0.68601868873598814691 -0.0080068700289603264575 -0.18190234386255513255 -1.0324392133218323053 -0.50602140290683728097 -0.52347543431989629337 2.1977505974219369023 -0.66919879919053104622 0.032744564588540352179 0.78077180384169542204;0.10829039242832520784 0.52943027740179837703 -2.1429647639608724319 1.1221288380634071302 -0.34783343878043665454 -0.095210463102221087883 0.18555749147915490127 -0.54246118243162799732 -0.63496356259628872198 1.7573207300308142376 -0.66028266752439179754 -0.50219454290299159194 -0.15653465631339893993 -0.85080826596887093594 0.54666514884938299801 -0.008609393555799052522 0.085058601801504318818 0.81459998157005963915 -0.47523046054837181362 -1.0873146236769621886;0.72808037011376758318 0.33368733527679483863 -0.46953475981086267854 0.29745571846454904597 0.3218484776536282288 0.1679004549493293974 0.32501555392154851676 0.21750082058049438616 0.31534821804118140509 -0.36586167717373468955 -0.33757065699027238859 0.22965405022066273655 -0.39072267163839380366 0.0067904096626908213435 -0.33559562390850089519 0.23835206488825114168 -0.23133097314769784925 0.69524397866596476803 -0.2737269256259626804 -0.52285055252652790081;-0.70624817996984301516 -0.088948574801690633018 1.3884235316281716699 -1.229271630421711059 1.0814632542457220943 -0.46277581054707156438 0.046887873169577827526 -0.31743726972575492251 -0.19676348978885058183 -1.3535680105152085861 -0.48182142394434523958 -0.23600288261571716886 -0.66535734228568188531 -0.17316601337044373876 -0.62820827424931702243 -0.19315515549456016564 -0.46398499360120504242 -0.1282096482077982047 0.57740957586523955491 0.56105375376028232548;0.1920029549564085114 -0.3681654003404652431 0.36190363786589963002 -0.3830707363023282408 -0.14315538454818352299 -0.63882924712921973498 -0.10079587834570293003 -0.096193190570216954849 -0.72298404772208668678 -0.44211430861002531945 -0.20006080429378128582 -0.15750197914659622156 -0.044750982192558942663 0.038241884526206186556 -0.21063326681783683947 0.58155414555807716237 0.4159528794981752764 -0.25895707482568347535 -0.47147290816919762424 -0.041877867759625257704];

% Layer 3
b3 = [-1.8957615247873731423;-2.0312079421149964453;-1.6128663406265675295;1.2903213253381771164;1.5956031741939782354;1.0582541585979685639;0.70954097912471281173;0.75521057799512325559;0.077971515441192115747;0.095515538980790737345;0.024647499538449108014;0.29503947140817871064;-0.52521731252751802099;-0.44886569551946803314;0.80189953185598383811;1.3448344848550797259;-0.81333323149406233643;-1.469390668060197136;-1.7120013894314853875;2.0154480661446600998];
LW3_2 = [0.75266270153536440901 0.5915494748700894645 0.19934711721124842576 -0.60534819659274763382 -0.41036164407265135479 0.54548764290471685179 -0.82470807654144651089 0.78600252205642551218 0.6344738968981012972 -0.46719522190482515311;0.69704617547521285914 0.87092949791382001656 0.32332264523308645865 -1.5031691436462371048 -2.1587254575060437212 -2.1518005345546118434 -0.80415533858683441171 -0.61953006867223747722 0.25428780488031915707 -0.35980385836378386832;0.28156477078012837056 -0.24097711104957067474 -0.85455840924900328126 0.17758631587308437716 -0.86272416239488214362 -0.4765669763039618867 -0.76817482656839020105 -0.16413800243966786274 0.64883714971956163442 0.81735786711612823385;-0.34332721791790216104 -1.0876521939225036739 0.019565296215157786802 -0.42690517500202834755 -0.78127092178890411578 -0.4611892350617610159 -0.61516834532035247207 0.48224495979402376422 0.38094659491741189594 -0.63937640857466726541;-0.10135772521747873909 0.91426911098235030817 -1.3997596187369942822 -0.2278412486590257191 0.55363455647922554803 -1.8141071330476741252 2.4238392912677495517 0.58161575057422931767 -1.3835210398135844301 0.82463806590913846239;-0.48604301184853548889 -0.74219388566648314409 0.35886230835907273473 -0.088226475721465830171 0.69152889761442748462 -0.68364733754810291799 -0.3020395049416758626 -0.047861353078806435912 0.18429171574236899445 1.0126078333838677281;-0.59466366793231051346 -0.89307374125750194072 -0.482544990295550702 0.50360309886589760264 0.67462343083326048454 -0.66623585688715469821 0.087692134752263631303 -0.82640296889042841322 -0.033962135727048058109 0.23592433596616740887;-0.24156614931650602363 0.51322159280527979153 0.40047556139819140419 0.27347285672846755045 -0.072595617783592469863 -1.0712547146974333856 0.39255547213786839977 0.50166885981260000982 0.11895842357769859099 0.25798762259009200282;-0.4191268071471917489 -0.15571906712036731602 -0.24928705371716708417 -0.90686298275770782507 0.26277314017261754753 -0.49891648124007520471 0.54194297484908149354 1.0157558633395666892 1.202869838566571703 0.37596090980567276052;-0.56289897782836650908 -0.26230087829012282974 -0.51818164321968951391 -0.74514295804933505796 -0.54910025933394823738 -0.10814804818897040539 -0.20795352393803095969 0.88262882973588663305 0.17289426247637273981 0.70515883807624391011;0.54495470282350855218 -0.0025486260184825158814 -0.57886310738841961765 -0.79210695481594495249 -0.77084567893599098554 1.1643776402418704041 0.11618087415350349112 -0.62725721729095484935 0.16593251822230817294 -0.025040941641706743886;0.50034838639196821397 0.49885522965722900457 0.79068065688687250159 -0.52731640002172519566 -1.1672141214617621774 -0.40421835233839653601 -0.46560417242334306565 0.80147865138711404942 -0.3014880294198702404 0.24179409624143227697;-0.62557599368127980721 -0.66059035645135077974 -0.3306822074570892056 -0.79037190656246025799 -1.105991456761681091 -0.60142805150722900009 0.31403506631138572436 0.10518467420442995097 1.0379020970834762494 0.36367622485885947592;0.077464278000882041963 -0.24712627018583893657 -0.22537891953660238453 -0.65875465240252673027 0.43922610213839086146 -0.78570864913819138398 -0.029208596766440206305 0.96852902166610288504 1.078713080131415758 0.12697410279518095422;0.74719466367136921914 -0.35337230326418433979 -0.2526829560301723232 -0.66329893488729496642 -0.63762998423318362207 0.34159228927890811223 0.61741715946767694589 -1.0485647631010979186 0.12419681886974132112 0.63609394832053889335;0.26137782087340372117 -0.71612327345687620817 -0.39373909500536691253 -0.22919541363296849767 -0.13026357368835858597 0.28803762443819830308 -1.069859909668995801 0.59815841719771589702 -0.50096788086762766845 -0.57101377258774832502;-0.19529070112161259209 -0.093944333345027275506 -0.89530401107706836239 -0.73736492822642130118 0.78116662409217907381 -0.14940363950063217935 0.72408058948200648697 0.88836207969323555123 -0.73889368074562666866 -0.16549758972754832764;-0.65972899236133430989 0.47185396476361829432 0.67667747742918316067 -0.70755957010108883054 -0.084478592795699761209 -0.26346313494106682329 0.82411759474659596059 0.99645004347386412213 0.42726385408855488413 0.021528467700431347387;-0.43695613953985412703 -0.59070604894638467641 -0.75127864312236469768 -0.21846875770835549879 -0.043575978155726044494 -0.87036636083076979187 -0.52483773200551453453 -0.94983495150303354215 -0.28872886977048722867 -0.62973692662794744646;0.48531926966901589582 0.78457049362245201429 -0.048338210676319298686 -0.67587152631855917928 -0.11394280596568215347 -0.70778154189785091877 1.0134945427867816381 0.080184428803565938049 -0.80288663904903923019 -0.2654886131140111738];

% Layer 4
b4 = -0.88129563142372613349;
LW4_3 = [0.17183660481648443952 -1.3354065309254445904 0.45462645982439398029 -0.2065388157065282948 1.6556024538449307659 0.071712545372725824966 0.10449174644133994716 -0.20187446827510802105 0.23616022081403051369 -0.39970719531042214756 0.055151218196779129566 0.18688934380264868307 -0.19972289185609065632 0.21939901228946792622 -0.011423086193372193956 -0.079397227901580755272 -0.076579029219275937534 -0.10521194488704169179 0.31306377200625307156 -0.41272802067744951415];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999934;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
