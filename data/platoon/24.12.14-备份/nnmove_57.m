function [Y,Xf,Af] = nnmove_57(X,~,~)
%NNMOVE_57 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:05:04.
% 
% [Y] = nnmove_57(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.70139767883548;-1.99738196042707];
x1_step1.gain = [0.053913604005474;0.149967019141203;0.50069484362843];
x1_step1.ymin = -1;

% Layer 1
b1 = [4.1408970494325707534;3.2084615324784420132;-3.5846333008664896802;-2.8725078372038144181;2.1766259596634411899;-1.8593666186178161581;-0.42793190913360296124;-1.4851227554804409259;0.93430967701979894535;0.22443520709771780375;-0.48450261872892341763;0.054704974056932968718;-0.23417478323271645468;-1.6678556536297959312;1.7907665443216531642;3.2025182397580969074;3.2494658146944859212;2.9068111947051207267;-3.7196037478266466003;3.591171960026966925];
IW1_1 = [-1.9822573825480225285 -1.6667730708136956341 -2.340622869211460344;-2.7846069450858568217 -0.14610749683771656615 -3.1930565746345087597;1.3423903894819415594 2.5239018519098199711 -1.9255443601538608789;1.3984270298542209598 0.85847427549666610602 3.2498135647146781935;-2.2999461055549428323 2.548184613552206379 0.36847752401167949143;1.5839916070792132707 -2.5520570774226500887 -2.4756571959742736944;3.4010088822391657537 2.3420196041012171229 0.61220877352245994807;1.0954036746655340107 2.062303529414131642 -2.7351169459395512362;-1.9713824132723043459 -3.1296995241419591771 1.1661635402818626428;3.4092690031003689555 0.65440627785705640651 -1.9260074900916928087;-0.98413310950646848418 -3.9129011874909793711 0.15957966982648813525;4.8802155869396086629 1.1856048762815147857 -0.42985334121616569636;-0.95336131775265120503 2.3472238921893486818 3.0056666806735981012;-2.0822876756176182944 2.1897097400715375137 2.3143200290515668627;0.69204825995158614216 -3.6334565037877055715 -0.92421869123957844927;2.6395026797605178892 0.54512047428537169225 2.6849651439242592232;2.1849471851990376337 -2.9295038016540608794 1.6415922432700522648;1.7898113940387150311 -0.50730331748304902106 -3.4912403268028251446;-1.9049899691146885417 2.9448345705349017187 0.47493422047670330599;2.7760532188048805402 -2.6203379271877529355 0.81996642965665589298];

% Layer 2
b2 = [-1.6690124865129982723;-1.5719190963448439469;0.71158990093619101103;0.63285903960050005068;0.13625173820091476817;0.16826763411036749218;-0.88087802135978954254;-0.98231092145369625079;0.7919285530346319435;-1.3990487171356653651];
LW2_1 = [0.20488756855693526782 0.045382932662950445368 -0.87128295154061718986 -0.94733494189950429032 -0.29572605006965413388 0.21706443891489365927 0.42718025454341401748 -0.92484875753050244107 1.2394203336288605044 -0.05534092896355960467 0.21351306726852881113 0.53489323368493812971 -0.16918960141094752103 -0.54665750926550571442 -0.56990201228325620963 0.38195829840821782231 -0.20087016623178424735 1.1176788249069828929 -0.18820961161117483185 -0.74872771152208572598;0.19121256576224099355 0.27992864503526027065 -0.034315486275661472026 -0.27285809683071615694 0.28490407063323197612 0.68909955420079282984 -0.50650664156975211405 0.13504520813913886701 0.087897243394144800033 -0.29790774113913309762 -0.56556588535629248593 0.44044116241736291917 -0.063025592406760561071 0.021290956634184128593 -0.16298020515217248594 1.5844114200523204961 -0.1213822732084242767 -0.35491356481200603268 0.6078220638024461886 -0.14171374069759926084;-0.46524188983764280803 -0.2020992128900145901 0.2055924935804992193 -0.16921622924343612815 -0.54376089269891725309 -0.86265208341308396989 -0.45991611830898632141 0.16595221253322445243 0.074357933364207040583 0.17207338721266304815 -0.20051820776115419909 -0.4244939616824238704 -0.19202821836315597803 0.14429036312859205848 -0.74893812693633698974 0.9701634378897242561 1.0595357750562566235 0.27545987003346861233 0.3364056266900621317 -0.26865265304743196628;0.015773993444429892236 0.60640493586256583036 -0.8179296681633076993 -0.10522569095967346242 -1.0223314317434473164 -0.86094891211296742384 0.49941292088281030725 0.097083015475303374719 0.032106628946978285621 0.35027453641864519929 0.68003690462285304452 -1.2331062951180518095 0.108871759851010802 -0.012840060320996512719 -0.23018924601512860684 -0.17742935496014056174 -0.27592140479580612444 -0.48313609478112362616 -0.0057692559197926882378 0.001354742331862175686;-0.26282453397054550415 -0.17416642005299737272 0.88211590639766068733 -0.020426095624900095227 0.23128568396516271943 -0.43609734278111239592 0.21562870216636623177 -0.095089661249348964023 0.11932819711093363424 0.41391292209991858986 -0.35150298669139901087 0.94515356182594278955 0.24886873563228015249 -0.3794170085588223218 -0.21543845480115661473 0.082588655914319020201 -0.45101140154673491356 0.84321758229882559643 -0.26806160561126557429 0.3591946093925059702;-0.14957441470029803066 -0.2268927204716921775 -0.93709250299184299049 0.17046100292682253574 0.93553087164178871937 0.10659458606127757141 -0.29339485290801292638 -0.19851116375554223037 0.64576399315609134266 0.62087104058122377648 0.54676803718876909599 0.064117503115392160407 -0.18227477002217629121 -0.27840148951952448098 0.36528184820667125576 -0.24468639714349174619 0.040914167555950328725 0.79785324676124813603 -0.077490380480980891598 0.58723216985390291889;-0.42085518776249858375 0.087467422664733729398 -0.9469489130668045096 -0.31543136196687693307 -0.27109814891564132378 0.34887406253643166165 0.74309113400040371911 0.79096534813551344634 -0.60378942506223243214 0.011517686653735878868 -0.072060925237124207055 0.137314586832300356 0.30661945313474914254 -0.14176500226952196138 -0.097480516230671013234 0.40880990082970947164 0.57796484081908439112 -0.35904985632012342833 0.10751438972453696008 0.44804014299963268453;-0.031164752071115440352 0.059774858864756419408 0.8235322868963097509 -0.53089366791994585526 0.74803791999385149669 0.11780532993568570976 0.41638542613150708593 0.63197534155755441532 -0.12193554704861134241 0.11712920683499783436 -0.057586803381912063382 0.6655105181939212633 0.474124509852087761 -0.060583136778095597608 0.36161052424673956196 0.10370171557145307917 -0.59118326314535363242 -0.35704627389816123717 -0.18070523406136737576 0.52324370547924281549;-0.30998237750523005563 1.6039405382554630108 -0.4317087871353041395 -0.28414790710484000291 1.117907388255174661 -1.5711145140825875099 -1.5678750324551642414 -1.0353867691879565793 1.4587079951047947635 0.013096514915238109331 -1.3810450299445418132 -4.4799185589227565885 0.94597130908307336394 0.30993917949386445843 0.4720280141480437397 -1.5409058646557578509 -1.3899338986239730964 -0.51543472322642824857 0.48748358256231438812 -1.0612677971521495834;-0.18957402983432444787 0.022748688341591407486 -0.62254388233859292434 0.18820091234788668966 0.37651625385572035087 -0.83059208113196192347 -0.1195441564324621897 -0.40366044474772605488 0.69786735406007183169 -0.29011154732320243443 0.75593111672892143726 0.097683046758303179735 -0.36529943645307128008 -0.099552187852182200123 -0.17525488437055500301 -0.47583612055728524703 0.090892168311346555054 0.21464677363389578213 0.50087963876217844739 0.23254191606221844002];

% Layer 3
b3 = [-1.8342668823506425024;-1.8745928709319408245;-1.961255733312799121;1.3751309777033364767;-1.0437115308460540586;-0.8642929166482391512;0.73669751160424090664;-0.85174399227883379471;0.42144763340123364559;0.37240274281100554932;-0.0085792719721960297025;0.31653994052691758476;-0.82440182679847695546;0.61278536815257944603;-0.88032772922232227497;-1.0581843178125009963;1.6493890589124589052;-1.6953536820257997242;1.9002976485579208266;-1.8291547904713063577];
LW3_2 = [0.34101326333555825876 -0.86521689942788571059 0.59986004507335188851 0.47704037238542479349 0.76926658734679320695 -0.35509306519446931505 -0.73178158126268921801 0.51061777532095575793 -0.44397431776099016698 0.70636513618415874838;0.85148006629071604223 0.53942830667258179211 -0.1353742300769261997 0.37523340332961119259 0.50702224235767234806 -0.05818504596419635938 -0.79919549911476828186 0.81360025634649402182 -0.13605622136376566145 -0.37857893815535176296;0.67206591023146555752 1.5069352166054343911 0.36789898903376538897 -0.4864750310018537971 0.14616597538405706747 0.073359257630977017794 0.029173321777477112526 0.41015860932151887441 0.44261352595568181911 -0.95656957941849563021;-0.66973133282211816386 0.84219586403178059442 0.28264049069309438167 0.57099770618462453164 0.58387086264780518885 1.0019090355335729114 0.3115893482700768935 0.5953759999196286401 0.23496715471926438168 0.14461521558066198212;0.58530480303637544282 0.041855589264082483647 -0.92444545501563912815 -1.3479919818488601546 0.19041233966999643323 0.58528686105959693009 0.15242707372381938957 -0.60898735912284407412 0.080752494433385335615 0.59289641839215134755;0.96033374007436267394 1.0634845967818962187 -0.32795745782613427988 0.074976612468314898785 -0.38916953421856503859 1.2331322728984530634 0.22986084386608848784 0.45823192253359035231 0.36219137021393549292 -0.55337420534647518977;-0.16744704012771521873 -0.65475184650808826436 0.68332864817155525294 -0.082970784573443104315 -0.60597190021328817267 0.80999040420891610381 -0.43818348283436386881 -0.27320768445776094646 0.51362683224894678524 -0.97416675287807563688;0.19838999716943223062 1.2552472160113072874 -0.21970676139908221214 -1.0151371512334315117 -0.70911969154480347655 -0.46174706988433633637 -0.19926663095977054097 0.26812917570820327118 -0.44136006983398318182 -0.52337406619132720298;1.6091718418499270093 0.56754346383731224535 0.89488522510159218548 -0.8593250717982882092 1.3217090537092659464 0.36978111837825961006 0.22167514779979630157 -0.19336924508877129103 -3.543591191806303442 -0.090816642326261104445;-0.28613468439331335436 -0.92851061965030812217 0.87060955494313096992 -0.59218671147844059721 0.44600852829982551295 0.0098346844746271463999 -0.5526726417538899705 0.33150735284187005103 -0.72631500496694112456 0.58661888617344770669;-0.68786901387757193316 0.20537668729105820753 0.5773995881409780262 0.43243828693130115237 1.0867810183480295372 -0.57548922698654425556 0.1714868310771129889 -0.45821221763010711037 0.22888537992701124546 -0.71681094384916987927;0.91734518020389588244 -0.17255623934464489611 -0.04430810289041715172 0.6023343203015767422 0.57995628889552142127 -0.76668298668012768715 -0.71432444102500725069 0.61503786838686735905 0.06508718085039938428 0.44830950555291071424;-0.55210315947163735029 0.59996469446055578079 0.45289093878699260287 0.60593511243258246779 -0.30201280857942675029 0.36678702582409039579 0.01427645991222241395 0.051843556153495479188 2.8266599611898945987 -0.411121412759458571;0.31585397054207597911 -0.19777398081466093793 0.52326272343514979024 -0.84783956449064290517 0.88846016766934166053 0.16333615181790284154 -0.25787449227642655902 -0.20341591288885846334 -0.34547042300023783623 0.27768669392149242237;-0.38872015078521560127 0.66411789418971411969 -0.14851001410574724004 -1.140478488098147114 -0.34283239215992167281 -0.34406571542183400636 -1.055930028383037067 -0.19787072435924388247 0.27952092474844641989 -0.47382586281624328173;-0.51431713527102496109 0.43333496326545312138 0.17522467816944914398 0.86888750040023721155 -0.34162097324549245414 0.81937793171630213251 0.52219967930620847518 0.37353448860544741228 1.9992351907271990186 0.060705308790993971202;-0.20817001292196488094 0.54706440062197025931 -0.35840757156396840788 0.55517739364124640833 1.0661457372678133648 0.71536952420841870559 0.34643493889746551639 -0.65085993927931662384 0.85596990258192984236 -0.20867342749379233502;-0.5593261900001893494 0.46942665937204774984 0.29366573804958701066 -0.73038961298970117575 -0.33468107881445952057 -1.034749254905624527 -0.44102215682522216689 -0.08475850562440814806 -0.25315185079042085148 -0.55344821548295397573;-0.18946916267956109836 0.76819945141084788887 -0.40428013932028117328 0.43951908132097322612 0.12371084338709582851 0.093339992953635306239 -1.0323082424389269374 -0.45330419033222091318 0.092530795519325956255 -1.0054650114102017255;-0.13023182789889295452 1.130682495376870822 0.81635703935525494312 -0.81331952064890122855 -0.71686485702918578689 -0.36379765400859243041 0.72605038065052807106 0.17804443598897184975 0.49383177654936477596 -0.5905525454233047089];

% Layer 4
b4 = -0.56471801962331780178;
LW4_3 = [-0.073366706369603157389 -0.1165479527898476142 0.61659110786757631573 -0.22224995018865059682 -0.076011057234446122166 -0.13155504522117536514 0.012721049361242549661 0.3147882794952094887 1.0966517646661366747 -0.17015048144412311948 -0.038490130725217598651 0.04776348209262101796 -0.61526400143146098287 0.22937255334335091006 0.37961007375510436024 0.73023937284641748935 0.61872870417331771176 -0.2646238986352186795 -0.26779952319994204668 -1.119242905709766589];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999934;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
