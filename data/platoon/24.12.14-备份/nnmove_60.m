function [Y,Xf,Af] = nnmove_60(X,~,~)
%NNMOVE_60 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:05:09.
% 
% [Y] = nnmove_60(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.70139767883548;-1.99738196042707];
x1_step1.gain = [0.053913604005474;0.149967019141203;0.50069484362843];
x1_step1.ymin = -1;

% Layer 1
b1 = [4.0624719938390860818;4.2051383953822369932;-2.5624328509932379205;-2.4601003700314425515;-1.9252403857356510386;-1.4265970419209903497;2.2825481802152562949;0.43801910800265730916;0.42642960619436603986;-0.33989619648924385142;-0.77158519179486984019;-0.055533261574193415466;1.3275964489731284512;1.3746163362280725551;-2.3177238404495881241;1.7618838572427657496;2.746841816738153419;-2.668574120459708876;-2.1112804779594931404;3.7840619812663254251];
IW1_1 = [-2.3411513429070014425 -2.1153370873376684536 2.855574686916050986;-0.49912852677241997812 1.6688060893931440098 2.380816432962377327;0.83019470652737670235 -2.5642615415758087671 3.4105662553684350513;2.4925441506656653701 1.3133498120927549202 -2.919421537872273209;3.5753933604690493198 -0.8489721922492694528 -2.5159463942064799191;0.52024034218323988998 -0.73360298599366535743 3.5227589201978850575;-4.1981522478488688677 0.6606058449473850569 -1.0369277572276009991;-0.54273039112529886108 -3.1510740366498639631 -2.6676681476181514086;-1.4601698052656741922 -1.8760919586251010305 2.9904680008526485224;0.96082519693537182803 -4.4367427136479582472 -0.015516773447598043029;-3.2405382605025936371 -0.06061839374234157668 -2.4164566166679297687;1.6100893356096186437 0.66104165045646989807 -2.559724600836679187;1.0167524814955528623 0.94563952808996276644 3.5060949326110750768;1.8476172781647330901 -2.5936949117743313131 -1.7719680719953254666;-2.8367054406393634736 1.9382612074294347515 0.33746614795705831558;2.4014578321537056738 2.042795800441792764 2.1737565309670028313;3.7035484504148219465 -0.54525982675506434738 1.7885340471918400596;-0.14400577402548783712 1.7779999184777866006 3.4326210125989287114;-4.4415640195475756258 -2.3137159499718538136 1.7882110361004925903;2.4452513748926016923 -2.597106175144585638 2.1852013836416084303];

% Layer 2
b2 = [1.768658495824363408;0.9957899060565094107;0.76066543382946705254;0.058033256031942204167;-0.89096985346670043437;1.0320798593459994397;-0.76726703230284332147;-0.87264847949218882217;1.5241650992822075583;1.4456163414320093441];
LW2_1 = [1.9032325398607921052 0.30934676663920729345 -0.48579586581035866244 -0.91994613428080518336 -1.0407850952006556522 -0.5015132327315119376 -0.56607481442454088416 -0.4853860892612780753 0.65921808244942858845 -0.59881283817755059928 -1.4281659516835205626 -0.069690873801901573326 0.32020576455331756227 -0.35225194702542045322 0.66927317706243016904 -0.59486190238773262173 -0.92144189059703507372 0.14610421941052972872 -0.34377152890568629662 -0.51093957315852700507;-1.1287938008524942557 -0.012915960824876849752 -0.7257217948916957484 1.0303941226820731991 0.35242179147750041235 0.26295647610379857539 -0.089217421472235255986 1.6128814572250305126 0.0050795655270037334827 -0.72904693065109560379 -0.45454402414215561157 -0.58406625182685201203 -0.65417230717078289626 0.11677962205521885686 -0.41949847102168313917 1.9888568773735095796 0.79833912135074858174 -0.95097189603022902471 1.1061864979840059231 -0.36551415124608932494;-0.88852843807300352363 -0.57418048191003712155 0.46090271253955383823 0.99771900334420249301 1.2822752523977016814 -0.81269995647141213269 -0.46698132481027970764 -0.71268696519523055954 0.23292650882141374691 1.5135243384925856081 0.78037021321000099583 -0.12307571371887607303 -0.55083693915714893041 -0.8202290974994890238 -0.16526466529363614821 -0.26441018126148818634 0.074034207833017839917 -0.36406247505841710099 -0.0779063154652192974 0.35248396235405260457;-0.92097663510661920139 -0.50109738164371542268 -0.59316168563312454687 -0.2697233553368957315 1.072450759168188883 0.3177543829556153665 -0.33678058332927574003 0.32606415699885582526 -0.51958646350626747079 0.52932581844339887667 0.23865612234762104138 -0.26485450358931617032 -0.40055510738796057391 0.033847283332571954928 -0.4109221998977138357 1.8326646963100556853 0.4775812835932068956 0.55261720947316639307 -0.42034033197796211168 0.28784706918211550031;0.15675045086200625755 -0.58726584751541499596 -0.66258200505301523275 0.45178963957001311291 -0.23407968802689138599 -0.68426463680476368179 0.14728476737887477577 -0.10671364766896099252 -0.82488692439661515099 0.069193748998093398961 0.30125711488759843171 -0.42085269865825558622 -0.72866891677524658899 -0.69720047149130004449 0.36726243440559169784 0.71918561465935926247 0.23421602090761711734 1.0310628647008630576 -0.21268179857699820445 0.79533237163510406287;1.3370015842434985753 0.65623882777254471943 0.56346956622287758254 0.095620727455383913718 -0.56224864070726920939 0.29717681222965924848 -0.80847840654696800922 0.051283666852897570598 0.55457662213165348497 0.1563521147858202287 -0.16828198559089263542 -0.62895302572059075263 0.38371280183257155949 0.39994436062565597023 0.055453872369247404761 -1.7002831048632631727 -1.6235798335116176094 -0.072616234137742013965 -0.9319167462755316711 -1.1702754423130454775;-0.55794457950369891197 -0.82224611740697628459 -0.56324429808532183728 -0.15187957026744455802 0.21529742599578235995 0.11567925135599668729 -0.41437536557975934715 -0.14941621706984911655 0.30718148236114528604 0.48559290474482741384 -0.15144705207119382728 -0.26502168581377966161 0.080179191095070573292 -0.2189655232824927189 0.26688209790023720291 -0.63080202297517828924 -0.44141013838979925588 -0.20627018786231604563 0.49374265963780333832 -0.68187576493178414516;-0.78712169506919171802 0.36305977332480132702 -0.69446279784716358208 -0.99725341354073049338 0.08800824916134475373 0.65095344661718002044 -1.9787956273706350796 -0.16751426539563879503 -0.14920914859018696852 0.11784226679351708644 -0.122045450310641998 0.32257713562882511793 0.19475599422650888282 -0.5973491408669004965 0.077333746310118384182 0.7002817193277171004 0.33135150024464193885 -1.0672953545555459165 -1.4523656963248248175 -0.37877500401831359911;0.65619702167845050944 0.028011359139681370201 -0.067379309790034952465 0.41434013881416059677 -0.01043034510898414001 0.38747979231199886074 3.6155054465356624149 -0.48865696703773287002 -1.0724740792948719292 0.79699225287697161857 0.35943406298725316672 0.17234808826280137439 0.18623412355764215609 -1.1144187546322987803 -0.31343056671269997615 -0.27090117582952916164 -0.21471600582375113819 -0.89959302357442105791 2.3734515163297373874 -0.25333033395835247159;1.0250332035711147149 0.1547230160773645502 0.19503750261404725896 -1.2284189638676241696 -1.0194713684441250034 0.37634098732183463021 -0.35561770171272427676 0.43852335553630383824 0.6027638170620648328 0.5413404118446867308 -0.19425947349328548386 0.52501526953906274553 -0.088525139488427467827 -0.56857446340968709197 -0.44312292684454496206 0.027496409891141403159 -0.75904471120903860282 0.40909787527619295711 -0.20848539913859132078 -0.2557339055340708267];

% Layer 3
b3 = [1.8870102225211919933;-1.8044481683285169549;1.4818712768251394163;-1.3937583628269152314;1.3649611642144867663;-1.0849214711098120745;0.70204087016890226458;0.28231622471377437744;0.41231541766332363563;-0.42931442066054792406;-0.29983522734336226501;0.57199735843795274093;0.49196477253443970934;-0.75432724198513578795;1.095499231215355751;1.3585914141692410073;1.0381650824654231613;-1.8310661431617223371;1.2228842265884809493;1.8641661504006024064];
LW3_2 = [-0.028352421439851557133 0.0032603623256635856642 0.21915601016861344097 -0.63157781584214800485 0.89925984227503030777 -0.58242787855679245546 0.88358227623310303667 0.35435906148440815544 -0.67400457803569191473 -0.84761351325304679083;0.31783133863851803502 -0.14566048534825729033 0.57174744482584216598 0.20211143891111554849 -0.56968047092276685728 1.1615164209793198413 -0.42463912381708701638 0.10845663919896483818 -1.5492592872113464253 -0.16554969086868920325;-0.8731771819350756525 -0.83089445311374354741 0.099274054698918506867 0.9162374317083328279 -0.15518489620655126493 -0.88369107249843348306 -0.52476499326894232578 0.19524221885164358414 -0.87848852438438929102 0.1191059890067477367;0.68627932646986089527 -0.25257148859933725715 -0.9065367265091825999 0.77272156733543884144 0.34574092040526893665 0.3608549641184702339 0.64985970932785075416 -0.31435477315486476391 0.10367727641165636054 -0.62356799742908741724;-0.26284354394745329531 0.082811241896945220198 0.49376688778823052406 -0.44831827099085341803 -0.63627315216579016788 0.08308239811619440307 -0.73584201013840366823 1.0389530138566820394 -0.21533578894201593767 1.2375826705168366804;0.65190979957693417912 -0.86126512912316000037 0.5779057771790204745 0.49449222718365620777 -1.0026555128042242693 -0.34472583776703097369 -0.11817206276910566243 -0.59067526290463112648 0.11529656799024540215 -0.67111802982679313878;-0.085735543902902944247 -1.1672223580327329984 -0.35356718180484886238 -0.65251652973397156199 -0.62573469389911939853 -0.68234757073315599474 -0.030253908639402363884 -0.82680163551294627577 -1.6687211341383738628 0.5484984296727788422;-0.5362795853116356648 0.90259435114239494613 0.88566949051686749694 0.22124364221842945932 -0.51453345130689787101 -0.73441485197085742964 -0.24955512856279946088 -0.066348483111320202821 0.63462654922993977369 1.2772882558639280237;-0.73768585176630452338 0.70272619674751046759 -0.81309213818363512694 -0.66154349399049183766 -0.46255424027132990838 -0.99793841964967755498 0.18603236411086546132 -0.0047023844523901049686 -0.24987142263056794089 -0.25157080934890480028;-1.4845237618100965982 0.49572488880621390361 -0.6097115290903645235 -0.28743269768064177994 -1.1452758277204020398 1.0496491928131046478 0.59142919099007384975 -2.6956107079600863941 3.5235662845627087059 -1.0878388339494944326;-0.82107677967508863048 -0.54869516410279162155 0.93528307165644730681 -0.14409004026997260239 0.3390986152573813861 -0.22477888023811937179 0.71735962111265816343 0.70328197470333830843 -0.98671763970061421301 0.21726207430566082945;1.3605018954707395196 -1.1475087226670075413 -1.4304954052267966347 0.0099663195993803903316 0.029705003452901543315 -0.36636541944626233036 -0.74307273913398408371 0.044197240658567012173 -0.13800516814103996888 -0.51204312208591229449;0.20780338966329406358 -0.3498946718722674154 0.66721859807707184498 0.073091580142019912936 -0.93763033239196724722 0.092822020050333520214 -0.035787354084640767005 -0.60322706344666410239 0.47554278766030938508 -1.1587591900825944258;0.081511056903055573164 0.41603415510563773738 -1.0346177172190162974 -0.7245905398222566296 0.30451986851385171029 0.81250876899535584563 -0.90485692107295867537 -0.1559868983153931965 -0.20056543040664104316 0.46706629154413670246;3.143531502705389169 -0.39521003742725047125 0.58401204568974884879 -2.2075209759428648937 -0.78593332730722220703 2.7946775028591113177 0.4001182820443702215 0.82344182057371595462 0.2603885285159991958 1.6639336020796207105;1.1334701609873525374 0.22328847480543714821 -0.70324385845693238029 -0.33790196626017654502 0.83452282634236552017 0.04341912205947995318 -0.91050624386555123468 0.04024451157303027965 0.38254248858470440986 0.25149186331892031676;0.7708273059797250415 0.79469625573194913049 0.29098997160817580143 0.58358042809183419131 -0.90471677443516640427 -0.96053951068044496342 0.54007408545785828835 0.054824685575067207133 0.90082833329694689262 -0.29000702213217788294;-1.1788012199383217649 0.36293594511232896149 -0.1156028681574834821 0.60403638672972359558 0.62712500873446497263 -0.28986655577096243075 0.89686506046139569115 0.68393330787362316414 -0.31022292623871305928 0.23202109182081617766;0.35053264782815618528 0.43338777081642648747 0.16971372302803358623 0.16412922330711904317 -1.2022869884734199708 -0.26081061756918416661 0.17758719869518743706 0.52748659745070558547 0.67939450362247399973 -1.3531441864389337493;0.0098806724038501218127 -0.028620092771206126492 0.98732995825573943716 0.28070754106484463453 0.94705468862247366157 -0.39092655329317788082 0.48635008268251828101 0.74235470931846825327 0.70658899995138990668 -0.18472358525524448791];

% Layer 4
b4 = -0.084224306805236848206;
LW4_3 = [-0.15252730563522268192 0.086352434560259372365 -0.084109650315496817252 -0.32188702813033670536 0.32201403828900837523 -0.0097397149180244221162 -0.066149703327030906497 -0.20247837442620147952 0.065688137806005381103 -1.1063422071574395833 0.36874942640357466495 0.81105941896100086641 0.14940005149678736718 0.034356284060375219536 -1.1901639416809135508 0.56672031780992471184 0.23682259881343153962 0.28350091021513290634 -0.15701717622186420198 0.13423015286336989482];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999934;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
