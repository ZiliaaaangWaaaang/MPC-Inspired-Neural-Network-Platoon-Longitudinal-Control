function [Y,Xf,Af] = nnmove_63(X,~,~)
%NNMOVE_63 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:05:13.
% 
% [Y] = nnmove_63(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.70139767883548;-1.99738196042707];
x1_step1.gain = [0.053913604005474;0.149967019141203;0.50069484362843];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.8926872911066183747;4.1845821473788102907;3.1805996673270411357;2.6387135359228741649;-2.9524026211891110094;2.9495814804992797065;1.634271460048126956;0.68474036836954343954;1.8167069887472111489;-0.75677918573727775975;0.52188904068208885612;-1.2837895831136973968;1.9101392667541117198;-3.9445152628598219025;2.1107770644320087428;1.4761137051430863742;2.0249690839375240614;3.1309683422511191964;3.2720904930797676258;3.8831877064349753503];
IW1_1 = [-2.6020367995475166545 2.3716321650338136884 1.6372363232892375162;-0.23665379807481698449 -3.1789773488021006997 -1.1367640027637617717;-3.5794855343013147753 0.77638385478346605417 -2.3233026023506506696;-2.8512492483715310421 -1.6320690234904586813 -2.6729977477817512543;1.7531554068735397678 3.3547144324844584418 2.6735971652809804588;-4.3411053587508572349 1.5859504151326018206 -1.3233015926645428362;-3.0804885484550643682 -0.33219842794232401495 2.6466815437197790395;1.0271303098353119498 1.677904287823198004 2.9924157282291976578;2.7212883096034850006 -2.0680272308448643948 0.89211470358737776642;5.343335209780733841 1.7757237111480226321 -0.93943754284426850276;4.1656427127120991827 3.0453098648681522498 -1.2679447236959084933;-4.5535486638821360827 -0.4015920332185075603 -0.81184361906454838298;0.84509978462147827827 1.9162121410138244215 -2.5292659342015073598;-1.3151047628203025308 -2.3785593037162913177 -1.4062598371028849353;4.5916960666161443783 2.3275372853164335574 -2.1128128972160813426;-0.09573927645978497214 2.3922328004090602782 -3.5012837274547830013;0.77246524589268139582 3.0787503232445181389 -3.2506635337024936128;3.1653056872809766098 -1.6497792805911137837 -1.4578042416620400346;2.0767612660386305379 2.7668172315331922562 -2.6659401354237166615;0.062373105966126482502 4.1687940016133842036 1.5879683650841229792];

% Layer 2
b2 = [1.9786331340095235642;-0.64861669779648989387;0.64460205735130793325;0.45695174534530941246;0.094671052079103035215;-0.75422308201222520996;0.15858270886620734474;-0.99348385558540208695;1.3110917356190838756;-1.2374985962833555675];
LW2_1 = [-0.12135014090449201818 0.81751936407978087473 1.6917986927877497472 0.51859947064160794028 -0.15626042984415441928 -0.86696227497914990501 0.36905348152553713037 1.5191251518069179838 -1.4734426227931201048 -0.39773110502291558754 -0.41357192915548190992 0.050704910788790615028 -0.0013254291871046975509 -0.53991890077960624783 -0.12098498166465526671 0.70987671977147603908 0.37361088421639881973 0.17146125162521086427 0.41064761402032462501 0.53144339966443587819;1.4199163956477891535 1.2468989515405688451 -1.2149269952654770943 -1.0743116207484668667 -0.94021482463073713376 -4.1421004788463600121 0.68412944640993667011 -0.032872400490233391612 -2.3383877943620028361 -4.5544037837783326594 -0.24270879637165262976 5.6880508203733430861 -0.60459102106982531843 1.7885640481053513007 3.6909374663983518516 0.3892265460970124602 -0.96266684180369910262 0.66592601521243488527 1.8889671046181588654 0.90151236379295685008;-0.57293734830938969349 -0.18673539324141968931 -0.75344361516815339108 -1.1073088696592479074 1.2583847033520332293 -0.52237781495710389201 0.47956883938743105622 -1.2159053784099391748 -0.21678695275412854238 0.18525312814887451296 -0.24309930604726459613 0.12403067971185895157 -0.37284216653333990266 -0.41307441020409441101 0.62034841813197938443 -0.80214514857444496609 -0.91957441059590749877 0.086315149342075209171 -0.47204994816990059059 0.17727088204379856662;-0.75135429631434424991 -0.29594125560041750767 0.72477762415713642419 0.16997244267862837708 -0.22273161578802774807 0.29018814504988593717 1.2055513962494457392 -0.49579463986895400129 -0.66999695832639716286 -1.1998650972646356383 -1.2882525411425085338 0.99859298111446559432 0.18853947630457620899 -0.34385495209131655692 -0.62077448767982357225 1.0993526507478537102 0.27145600820640863882 -0.40731739011042822352 0.15265621401378678956 -0.55913243835358272804;0.35312278750928516313 0.60182695835766497616 -2.2562293131257278311 0.50221419850427195808 0.94852650354724088455 -0.30682311180370858139 -0.19523798319478155583 0.1436638864328769194 -1.2631497330158525383 0.76452820265018361923 1.6932892955858993567 -0.74108496039587645754 0.016050648569849598757 0.47148313607434511052 1.0224376911203578722 0.43715179256681513387 -0.64349773914264118968 -0.74050485066257742961 1.1966969460747043374 0.39021454425711077363;-1.8483765167891708092 -0.29219097780122776919 1.5282088455282054618 1.0556269499707975346 -1.9464891821815977213 0.55702590069078838919 0.8959403450383126577 -2.844529508885940583 0.51165992123078185561 1.0032396929590357004 -1.5248288523430990615 -0.46429130036417270988 -1.7563800728850504917 -2.1210130172140964078 -0.83865199408249058166 0.56521644802131976171 -0.20712117179664629729 -0.28191813256138925636 1.2415872416140834034 -0.40654304184433037728;-0.66057677092363376037 0.055547038283238363288 0.75064721943143930538 -0.731588254416517203 -0.0017986032718769525557 0.05165516569249022083 -0.066555401351943530019 -1.0346687936583383038 -1.1415943231580938377 0.064695148005751740294 1.425383185626089011 -1.3120951434948393555 -0.55446576037143502358 0.95174000333678154817 0.016893463963580150622 0.21387446004626189944 0.36652112171387363215 -0.62214087954246510836 0.61936653458507595627 -0.46676843883134816471;-0.70427148730834476797 0.015361083666462709008 -0.19856057810729932367 -0.27153442091940771519 0.61359796264442001412 0.017740491789381574589 -0.18197032401861995554 0.068127355854156176895 -0.27222515203785235816 -0.21761660282290504198 0.33377639424550420433 -0.4340781126379132937 -0.53750311540806217092 0.50018500227850926088 0.20852862423560336591 0.47928465633029043724 -0.24184128107112995432 -0.5402595354336457989 -0.32256004004913313432 -0.53735796886966802344;0.35417948898450818396 -0.50639758000224011081 -0.066958792142474202191 1.7661682701546466134 -0.73102328040616959548 0.72796363909945593917 -1.1075593280378308592 -0.70779535932896187056 0.3693365048780485882 -0.19817512523961697268 0.16776866889809582961 0.28121676884950647102 0.50829464433401738699 0.66187409527004326115 -0.069131982490638246852 0.002965889113217316797 -0.4553773772318462365 0.026621179768768966911 1.3081945866460871208 -0.73649007811830513592;0.17335411237074249691 0.0017807539647017710943 -0.42079228427966691717 -0.065444716215646223101 -1.1983020245769662182 -2.3352738140509972098 1.0331692281960962454 0.11565706319170725169 1.1409330264957104895 0.88611911335050486116 2.0973012488987592405 -1.8120228155774040779 0.031388281185505975679 0.26405538748710938313 1.1818732361726826952 -0.068079494385468120043 0.021494131284656145531 0.058462950571411126388 0.6250320799371499314 -1.1979694834351604094];

% Layer 3
b3 = [1.5095806772124158446;-0.91995640094722941349;1.8070784180232710714;-1.5826755250136816944;-0.70639012065540485175;1.4927315236697640266;-0.046100396592903311599;0.95123719959008912195;0.032638068531227769353;0.72390570146095323256;-0.57766227305588113694;-0.41945429086751195857;-0.60589950692829586121;0.98453908095946351953;1.5170147714905288794;-1.1816723971522549164;1.5478387320839168684;-1.8229163166852397904;-2.1539063182820177289;2.0671660705201087005];
LW3_2 = [-0.84333694035723283378 0.030536154488831769582 0.58559559658159143769 -0.024143296210428884241 0.15106631802945405529 0.31578497931694188283 1.6720881261222482195 0.68804861328282740374 -0.83668608886024276039 -1.8261787066597545692;1.0334060734638164103 -1.9097400334027516688 -1.0053704659051043713 0.064240167300254752414 -0.35446891567557076153 0.86798733362507562994 0.76272815049415076949 -1.5083332513491147786 1.081925860187965549 -2.0152721139119722515;-0.24158958871136174129 0.77823105159773231509 0.03564743180323200894 -0.89874350495132449002 -0.35653636422173412557 0.42499231213420518571 -0.4131663780248881479 -0.97779176261845035523 0.9061546839364168493 0.64659476599959464505;-0.065009057939785522273 -1.0656349458008784747 -1.2128144746256266373 0.37967454391102439804 -1.606025334096963908 0.086516629371609449217 -0.25075671922692238658 -0.54949644667502040019 -0.58841410003339755797 -0.757943203843042701;0.327053277534059883 3.8183055609213951698 0.19398951222804391992 -0.005248273846751541627 -0.16439317174447459768 -1.6138445014335562888 1.0665819414250656827 -0.76244422757956886727 0.21236791963022333407 0.77254698481669581422;-0.67104058284588619099 1.1955802237978137015 1.4715419775984770467 -1.205322144368440096 1.1562053334219339895 -0.26019804564983683992 0.53445615036546956222 -0.27655323376238233335 0.78013785498691423648 0.10952858922416358611;0.83465259825351079126 -1.3504366795409452617 -0.93343773099529425696 -0.32383926911832516815 -1.1632890782892717496 0.14550984633592012329 0.92853926141381726289 -0.45070836070068132084 1.159179833242896418 -1.3216777584701406845;0.05466602759008121204 -0.18408080299134824132 0.43393214112381589542 -0.64406313068148002277 -0.6265393218818214871 0.94656135961148502034 -0.75851976253582231724 -0.26801605017612517567 -0.077031826332081984599 0.41694444048430140404;1.1917558939170511678 0.60319949356961533038 0.43985436576686220977 0.30967961569720336978 -0.43334582127838605636 0.19807213551753957703 -0.92113346287281339109 -1.2697702705697233583 0.87189307586748932 -0.54349632725836105607;0.71301252479529919626 0.46720475598926397565 -1.0300226038756130631 -0.33640936713366786925 1.0497807040987845451 -0.16024494509711453838 -0.94268426843321739828 -1.5715982630593443581 0.20504848040018577859 -0.96542188334486667145;-0.56126185966007646755 0.077630187827443991599 -0.031467768353139587145 0.18322887356669032011 -0.4193956155641775374 -0.53577551054104544104 0.69776071106312387293 1.3800064749095735106 0.69027347310371123257 0.96137480238613415295;-0.22805886530200128459 0.25813612558374893213 -0.67249725799507353852 0.46142363087528687204 1.4178895603459316099 -0.1183487187478395597 0.5574257895251364392 -0.43375048390642495511 1.0168585150280222695 -0.75452040604865322493;-0.98700494417352913068 3.6656416013908992291 0.62973244789303772784 -0.66391084049413440216 -0.29275624496566632349 -0.83822558227925125784 -1.6102622453292447791 0.25120649899039926289 0.63297009134154691434 0.53852094279868278903;0.83857721272671925661 0.0084575219427535826278 0.73691594094341517085 -0.95009175754747898779 0.17624788779599162569 0.64347265257908792258 -0.89376904204565321699 -0.28980724079970165974 -0.24247646460857225081 -1.294848590297352553;0.79097649569994576968 -0.54929666752039185695 -0.43560967761471353077 0.44703168895926576054 -0.22241740912060808943 -0.6510537396404991739 -0.18218051510297969542 0.27999216524659764627 0.3259894222412295095 1.1460831625767771147;-1.362083714904585019 0.45725614814217035997 0.35717235634790411858 0.6418349902746954827 -0.50377278947587100788 -0.16354841391742272472 0.38471881223556270157 -0.87166165546471818804 0.6984270646691120854 0.58471306539916478862;1.3807667510437267033 2.2284334013436120081 0.66503532543991183967 0.043864437284402681139 1.9090550109363355613 -0.31484717337330797582 0.48240377424481561963 0.43264766655569164566 1.1685967974679170034 1.8560733919587621976;-0.51696041092623767899 -1.0689973283436504659 0.28125484387454036117 0.023412535136860146423 -1.7861346987082769022 -2.1481355166046549598 0.94607983537773210347 1.0547543904692542327 -1.1063892118682212562 -1.0024303288781295507;-0.96620233939574284854 0.92375305932640128237 0.22222921245323098982 1.1232730326104416463 -0.61698786178066700181 -0.19520132165189132967 -1.0597704547140578413 0.71668219280436196161 -0.96293757878581731635 -0.44043797206514423426;0.46038750110023729523 -3.1023075358215725927 -0.17862013592882963753 -1.2730172782306230506 0.39039674556488324075 -0.2450042081578039932 -1.2889825907431775587 -0.051659611241259680015 -1.1504263198714583805 -0.4465966898155696585];

% Layer 4
b4 = 0.099834491082287951658;
LW4_3 = [0.014883122236798371207 -0.71353598093462411445 -0.83766266634924024803 -0.50377402227769640941 -0.4603211884352476635 -0.17668974425473482626 0.73459232001437513304 -0.16708636567315884869 -0.042151302433334827957 -0.84566906558837340313 0.43092668695429586778 -0.0095747962372369418982 0.46914311921935980543 0.19462066662516500082 0.036181654696784824876 -0.19321029543513731919 0.67939680703900562353 -1.744289981533622802 0.61737520051572480906 0.67393447573313935983];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999934;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
