function [Y,Xf,Af] = nnmove_72(X,~,~)
%NNMOVE_72 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:05:31.
% 
% [Y] = nnmove_72(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.70139767883548;-1.99738196042707];
x1_step1.gain = [0.053913604005474;0.149967019141203;0.500604127399131];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.6944522019775982713;-3.3398236600169384225;2.7829750362597374114;-2.2305122711400997559;-2.4874266827367152999;-2.2277836159801336358;-1.1410206910718807549;1.1767256917304287356;-0.81743684374022218542;-0.25020229027184853754;1.8629213677331166732;1.2192529672151346531;1.6453315223086846242;-2.3254687715546880078;-1.6023560851800393579;2.567570041577921014;-2.9903287560143470003;2.8714334511554788776;3.2010496054565646951;3.8424506555025286225];
IW1_1 = [-2.1228920976156770983 -0.32936695657391978909 3.2539419719852329393;5.3204619190832858067 -0.66800324828682255962 1.865406120165332915;-3.068815136574922775 -2.1635672831210630562 -0.04021610881798136361;1.3920120515299070352 3.9749925969396739944 -1.4893148308342296637;4.0439227232411560919 1.2385030904107230398 -2.4393696560342741364;1.6508627556457105001 -2.2918859020132842375 -2.5130468805248646902;1.4599343413076060205 -1.4831206704998076695 -2.998372359930035369;-2.7661067771449867614 1.8207027675061815408 2.1005135062920272659;3.2003305443103058359 -3.0594206564761239342 -0.13330838277457290886;1.5664307520843585575 -2.5043381171202612201 1.6327417124280694249;-0.34168822898654832576 -2.9818314876004019531 0.050036767440673035612;2.4341831788703882644 -2.6413173198857795576 1.4056686505140947308;2.6926986684175839848 -0.99457063106438869937 -2.787998488651641793;-3.8380797098673427037 -1.5067841533860226733 2.5143331375619868417;-2.5049967184030323963 -2.1915453007080563097 -1.7733292602626351542;2.0845583898539450374 -1.6440398002567657709 -2.5275658520063997159;-2.241676751373374632 -2.9813933333202098375 1.4285118709780300073;3.1191810481805744004 -2.4944156487637227926 1.3563042835490635163;2.9545290252594540448 -1.8427406938738193354 2.0353514168766464465;1.9211864942879259832 -2.5207965777658420947 -2.0449027925696059427];

% Layer 2
b2 = [-1.3824816684375145215;1.3071105900675383804;-0.72156969142212512569;-0.71930738889269862923;0.59422285176981515242;-0.070631025646528747264;0.71253646903200129614;1.0840705568950659288;1.2880854576891849206;1.4850270766564896974];
LW2_1 = [0.73701258209042919134 -3.3059083597222600481 0.063218456923243876444 -0.70215314660956951176 -2.4328809894989298357 -0.82542433990180308356 0.078582966822681205032 0.14250930840454140158 0.31658148201210478678 0.030798927001848563217 0.4775643915605877754 -0.50019109448463094925 -0.32425220198791326887 1.6819446326336906505 1.2641128229172333697 0.19757580925106138503 1.0751249080035576444 -1.3204940406243921291 -1.09820346028631044 0.099604398540588334754;-0.34333066342589585451 0.5554579358439269976 0.52559199346943186182 0.20404050133939810596 0.2303880200347363516 0.51572571640946485161 -0.024552825854639841879 0.2344021580385152459 -1.1778650353526523009 0.55244524004279083051 -0.27192008351859914272 0.10630325831411407966 0.72546218343056012579 -0.60316249379270525655 -0.37631359831444649577 0.29962317242646729909 -0.3621390289682009378 -0.021517854592902160848 0.35142042009752755272 0.049216612831198033873;0.3326873321573202702 -0.7113031239523491811 0.49827692486172237007 0.36334713203537510884 -0.22304367885026601948 -0.62573299510662394596 0.2607285513513797337 -0.36927273460424170359 0.07064881416353339938 0.0065653591078263474554 0.46904809196164443108 0.23473024896895200442 -0.12245607777784127401 -0.52720475642535169492 0.075883022065088998054 0.48672504200870325697 -0.070920376135119089778 0.59428084831363436891 0.48469195915869456304 0.64555828117614688644;0.27061890925304760147 0.087158953978267630913 0.18083226739741928291 -0.10574921982721996461 -0.34034412441849165587 -0.17332059033399355163 0.018759355161111591209 -0.49644002418572252822 -0.78068281289289520597 0.14137095850654721185 0.25285186962874944827 0.11774244910950647236 0.11835038119174255689 1.0833351461994056297 0.57100978542618718858 0.15271802035508191819 0.94270455466514735399 -0.71432535434252042439 0.17561796099714924169 -0.70604154211517633488;-0.21774382088692226245 -0.024982544725427140858 -0.082826900986827267648 0.26843395620815591052 0.37757147191887657778 -0.14029358985983569896 0.18449068126430043235 -0.26339171926433790905 0.48876010553200593955 0.26053136786493713561 0.095958255803663461414 0.49356089605171071799 -1.2218480407917333697 0.12363158949440643253 0.36736502706866225321 0.53668486143808380451 0.40799113317934082579 0.3457962531012845897 0.5313250687137579531 0.9061629388751868408;-0.063991813546104364674 -0.10548757268210380567 -0.17531511585616621485 0.51960297698038382386 0.13617540469763686484 -0.50334536314626276976 0.71043271219304338082 0.40520566538288588232 -0.55892833903486749403 -0.77729550597699637038 -0.10418056225544101989 -0.72760166085836464056 -0.45084025888399986703 -0.19636623113686105246 0.33445755947820388077 -0.14729881402428807169 -0.24296296577009701689 0.57464377512504427603 -0.079364826972187094145 -0.35004159910862758798;0.83383560163778358554 -0.51244508282809231314 0.14283315639755569948 -0.24319909423875887833 -1.0706118976301943757 -0.70503492308106008313 0.64591427294557446359 0.15266859217381831271 0.41535253297628543789 0.90164581893561568382 -0.0018858316409634014177 0.82050581775482978042 -0.31915347148741762817 0.2692861259958825304 0.23328257097356455696 -0.18074471998595648126 -0.25609252637791229956 -0.34096466834115318756 0.052490362766678594353 0.054858800345381965313;0.21783323130369555698 0.037553876998616009253 0.32849625087952621927 0.62219211975449506546 0.25318024405530575871 -0.37552412350295705235 0.40161891766794177716 0.84352260998068484543 -0.54215906185871431955 0.18642405070135564804 0.71795683781998309581 0.47509703575580186641 0.21153629697331613468 -0.29728563167817079194 -0.09690611531024921621 0.23611739501908263206 0.1574036936295256095 0.53258157439982556358 0.34042977055263168307 -0.28439582933609613979;-0.28830876302850239057 0.80503117895323694775 -0.33064299722998313769 -0.15764218924084444362 -1.0804268439110542577 0.82867770108268234974 0.61305064869274139561 0.98664147164994031591 -0.231883731972395285 0.17973994969958645429 0.031808018597569778785 -1.1434155347775731837 -0.32600356004781139152 0.17283176707084940693 2.4139001664361003918 -0.40458421247204218174 -0.1901652684970424334 -0.71722375285972050918 -1.3773532960937664438 0.14921727682320351516;0.12843926933130986323 1.5878210558649235029 0.50312711625224415535 -0.17158859695532427403 -0.26427892691873022812 0.11001690841671019072 0.38438660444896544099 -0.18316841852089321696 -0.26778230991511242642 -0.45781315685192314202 -0.1947188733654285353 -0.073322896747765542447 0.89744848124497011987 -1.6754366141997301121 0.50756319048841069819 -0.56999224966069561571 -0.63455896855279292357 0.22376978643507708377 0.26114450154839097262 -0.65695047801683625899];

% Layer 3
b3 = [-1.9244476561422967364;-1.7167371935235922198;1.5174325578110685608;-1.5662368437865332726;-1.2481035218256872898;-1.0888651064677385971;0.82945785260980642306;-0.4783532642940534485;-0.20726964199665745547;0.2125737581235783713;-0.11886078429975922843;-0.43329458409722904078;-0.32131008054185200562;0.49133688872829994754;-1.1009269079402084213;1.2451254227294994426;1.3637247685662088337;-1.7352739888598147644;-1.6953160340437916087;-1.8475899298439701912];
LW3_2 = [0.1659030400966759744 0.63718949767903731995 0.99645702856409490433 -0.85433413852302564351 0.25918924092438244688 -0.34808695372349723884 0.38232793557914773741 0.11345451281005705657 0.82744776793295438111 -0.069609696881672344926;0.55863867920309173698 0.6625701555297873746 0.84911952668877166417 -0.60165532087051321053 -0.0041015011799760232522 -0.53963018837505372094 -0.038477457132034792453 -0.63821318613314470536 0.12278864162655905856 0.95747878960466892284;-0.6844929840249179831 -0.1147937949339700725 0.79612958294690938654 -0.2158217352700571301 -0.84554423393397626363 -0.12366412793667860837 -0.41528390161734224373 0.81710396118234185359 0.83180735534818794896 0.35392876394991046318;0.50943332836992427648 0.83785356808224942249 -0.040607504000118518905 -0.66512675275052690615 -0.74626194570229353875 0.19914081155787005661 0.38296829005737437202 -0.23225921789826539654 0.70990537034578349296 0.22604318961450250991;0.30346014499493567662 -0.87128074696637880514 0.22634546698138199861 1.0849595598820833686 0.34510105558592335528 0.070828244490866165695 -0.70042486024108097098 0.4097716438236704839 -0.82098033280723115013 -0.067092380229204134912;0.21477733123142309091 -0.85705931042245475648 0.37423074777950204872 -0.51585523655765752604 -0.09332690528160783594 -0.061899323988733725987 -0.73717438483742858679 0.62406119094336631736 -0.97521077995282490214 0.088565315052079526814;-1.3451288791714242077 0.19909136098433141693 0.040135250733738705997 0.26213215775548537323 -0.17196274542672559948 0.16011164857853793508 0.39312476868154044851 -0.69949829573161570462 0.82440760435424642605 0.94916851061170370851;0.38290924362008060822 -0.68046963452282471785 0.89696408915571002041 0.45263158765869571099 0.92891669186528169622 0.80092104246658168965 -0.13720384627524087606 -0.35748700812279288197 -0.3442149555705407149 0.2497764899192836674;0.47113749179098651787 -0.095045869828069881602 1.0136815026091203773 -1.3157427128804608518 0.17842486470690110956 0.53769533173645045476 0.57201584349764933446 0.017405216998229271208 0.50009389254289937643 0.36393397559056211987;-0.9125828305659595685 -0.94168851600306835437 0.20771819194496946026 0.21220620886885427359 0.19840849345270489268 -0.8716275593173488101 -0.62965977969618980303 0.1954214155430391564 -0.27109990097922598284 -0.90614015857012730759;-0.99590748753280022854 0.45306868456618532015 -0.68454109550368269499 -0.74952951181204396924 0.38753673052002141075 -0.56078716802146844067 -0.047953095277552024167 0.29047499222547523701 0.099833894847175960741 -0.64670022961716111531;-4.2945248151247463753 0.1279921987744430667 0.24263219447218484226 1.0398783361551662274 1.1112792400999969011 1.2092737545032532509 -1.5229052658600070735 0.21292592524994088943 -2.6320738234388141308 1.5295301846632403109;-0.96049150345472933399 -0.44730652080062022202 0.5763176805135421521 0.039867047584294719453 -0.016878342218928765045 -1.0093845037195685599 -0.37342946621654454775 -0.68789372246555580137 -0.32200147589573818729 -0.77051494445345336537;0.26143833480507772116 -0.58846976766838954287 -0.042585812114418170049 0.28788809366946932489 0.92355798239095310276 -0.73434966411496493954 -0.53143490322156738959 0.34600527734088026843 -0.89757233053420726332 -0.52862095606621639643;-0.33942426397323377518 -0.16863082135370260906 -0.71476085643126796576 -0.20534139942642037902 -0.93887912346493940241 -0.74297069914246194333 0.8379953397176498342 -0.69469851451234254647 -0.3575400041147084873 -0.23725906289336826105;0.32357776442480984391 -0.39692447864556856807 0.39991970312519226072 -0.12694823802689048087 -0.56067227057826685144 1.0956171975682644781 -0.81441283606242886872 -0.64253787989738742059 0.60544723668191013921 0.54173144656561011967;0.81428444987739490024 -0.10249365023999748581 0.49380755466897652273 0.18559853583292248991 -0.45209829457934941344 0.3982070765333870499 -0.33083633753769298158 1.0211386287598100964 -1.2247611949296244305 0.55998762150068814858;-0.81114090083260126374 0.2267229899684417016 -0.15007643191825106865 -0.75381166276161160056 0.07425476951987264318 0.64961771069450935379 -0.86499580476585058442 -0.12126478289049756609 -0.19867564883018870581 -0.2014837355084690973;-0.097663429533903431401 -1.283033960835085141 -0.16676706098595506234 0.63809772055994962159 0.52500549465648083114 0.15274971234130726994 -0.81665541178229061892 0.29626578795496016916 -0.59481189715275273322 0.23640378544140175365;-0.2975988139750819772 -0.48468654714694459074 -0.43390535236939242747 -0.40012500695475083923 1.1177186309706159673 -0.6615989215529232137 0.10945903087439147472 0.29077546397561265801 -0.12546614346065915191 -1.1805103976740256577];

% Layer 4
b4 = -0.20284216785710032505;
LW4_3 = [0.095192807210483690317 -0.010089230518371102366 -0.45114272897382873273 0.099418861844751155177 -0.54039535395435334131 -0.16431978310596925819 -0.25037038196823913072 -0.035594634337177299965 0.59275323777286359483 0.63978898700797615096 -0.048154109088146893058 1.1782355656530363319 -0.42870416818287032656 -0.12145953358689162704 0.02057477497281462453 -0.090067029480632401772 -0.54144250278655148279 0.19125187107666202779 -0.047571117731298039055 -0.39347328227338329576];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999934;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
