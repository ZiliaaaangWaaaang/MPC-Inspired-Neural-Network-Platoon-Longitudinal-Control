function [Y,Xf,Af] = nnmove_74(X,~,~)
%NNMOVE_74 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:05:34.
% 
% [Y] = nnmove_74(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.70139767883548;-1.99738196042707];
x1_step1.gain = [0.053913604005474;0.149967019141203;0.500604127399131];
x1_step1.ymin = -1;

% Layer 1
b1 = [-3.7890684748505734092;3.0865937970714436567;-2.8595134743787022913;2.5467534606660029439;-2.1855386737363513561;1.4311124427558130634;-2.8438796841566214013;-0.81611594159928135817;-0.8696624815646178952;-0.082025176547752584599;-0.31435595169915575564;1.0246306884413753924;1.1892004737576882256;0.24661290103695954201;-2.065207808857327354;2.2769272695365407877;2.6189816693727876462;-2.5808041333411080309;3.6087983712432856187;3.9612836921666381151];
IW1_1 = [3.062838080334232771 1.003651607567688897 2.0679542867083151592;-2.3876290655325678181 1.7372107339450231223 2.7410539993565348205;2.268418787080967558 2.4657618243410017733 1.9804702325336076552;-3.3623192306208578017 -1.5749946334600677389 1.8656236516542341608;0.75416903247111877207 3.6215856694001020699 1.2367254246928605088;-2.4623858599518548829 -2.0788947863287523532 2.7639486213128265923;1.2359038354848406183 -0.17912388629271180918 2.8102071147946694474;2.6103131494203104523 -2.1758092575222005571 -2.2133377755905208062;0.089794809665903183027 -1.7901696313247337233 -3.0692291722793521025;7.2822720995322969273 1.1330782958731862031 -0.80105536917251485285;-1.1516043610433750466 -3.0972041414208826282 2.332478269453324593;1.4444970189806196625 -1.9944331637411500946 -2.6880870573935453649;0.45185798396603210625 -2.2985884990354494839 3.1381281669334146756;2.7767392622402287117 -2.6868750225478326144 -1.5122357396545993424;-2.0018251134330440344 -2.0377589694812550114 -2.5043226007368470931;1.9413610982994922161 -2.7935570189925180706 2.5648702542329617771;1.4540383332623973978 3.472603174509171442 -0.093898325003273053202;-3.0427733022968204146 -2.5420211435439385994 -0.51992363985733913712;2.4272445675103875296 -1.8433738805219237467 2.2495403066404056069;1.9476279056212684182 2.9952809778465612212 -0.87070699849597821274];

% Layer 2
b2 = [1.2748076989440964013;1.2187982673812243206;0.70044590564117026332;0.63081279454803651507;0.005652003638078096498;-0.0011579974031818429658;0.80479171213146349917;-0.67305819908310771105;1.5120306188929781843;-1.6204050232077424898];
LW2_1 = [0.15516536262772614996 0.12655855285904329954 -0.27708525633967362456 -1.1471527171734836603 0.72343055201226502682 0.29861104619214040579 -1.1695921014090979728 0.68380258512604019661 -0.32508034877793606787 2.1708513676094249867 0.35439132046019866662 0.76106233916307330922 0.053004601961628539097 0.60165376297760231328 -0.95922758446749045724 0.5651785366015333878 -0.28006783532102297318 0.70650214568461833231 0.20754029029977058562 -0.44722633924873617106;-0.13646283343160614532 -0.25304047641430404969 0.30050023835449918286 -0.51332302836194609874 -0.37859173063778917001 -0.01652225453377934028 0.19786366862555521129 -0.13346025999879157498 0.64204668778952922459 1.077340983394136753 -0.18787844858199814757 0.15203681339739194556 0.20217658395080395639 0.08563217027946670723 -0.31205697508417368224 -0.73502737164077558418 -0.28766094579410278476 -0.36097586671138115477 -0.32013226791576188113 0.26692441178833647974;0.44331281943125028233 -0.61341275908270709305 -0.39075834957840210881 -0.84315415812311089727 -0.30319473864766333104 1.0542509352760423003 -0.75151675705485510015 -0.71177752528578541735 0.27689731581920529191 0.25879943116702053274 -0.39275287090926724876 -0.27108123970255210144 -0.39101876336767654729 0.53528607664181271364 -0.13902511491919689046 -0.12102320123300489008 0.41223563865462709011 0.41136749601273542298 0.25523753687284300717 -0.40145438960605600576;-0.24898781414636861342 -0.42156276872761005992 -0.037476568866572135263 0.18313116097994516784 0.32340896846361982808 0.67073308348730253936 -0.033733513555593230837 -0.56805929415157174756 -0.018968973970535547846 -0.2565889044925628304 -0.20169443984373974788 -0.31099881131135231893 -0.16214214522769271332 -0.26433588956186271357 0.26158182950923752896 -0.43921492593716549013 0.32678612480101709714 0.02779454091093691917 -0.5056413516787913176 0.48567982625390049289;0.096927480389599196542 0.8169425618486079177 -0.054769818372926423744 1.1893450036940704795 -0.13566212648659126128 0.60793184678687439693 -1.1263774936819777039 -0.13780297230222901539 0.7535919908855437388 -4.6216583456015980502 1.588021470734308549 0.24340945732232138754 1.3311395535363603759 -0.75871022659281095457 1.4000789511847626656 -0.89275771943669535169 -0.30472693716545529163 0.014519966526628666492 -1.2481662993918856142 0.44029929359499586639;0.55085440458579060241 0.56508091250895653435 0.60953886578128613216 -0.0024497192709906235458 0.65677511565024626616 -0.32252646535878581879 1.190790189639667318 0.79632130412408508313 0.25262934243266443879 3.372741629058206847 0.45790747416435323425 -0.61337019314601315401 -0.19179979979740297003 1.1758463214791905482 0.69787559905369056512 0.44283442502057940304 0.39683834548540031228 0.30100252691286072393 0.28969379567610259452 0.57086048251608856319;0.065390880007734644708 -0.16217148002793679851 -0.65927904875470255686 0.58719517289837863672 -0.58379262346997728983 -0.32854945051680195522 0.2839236364781075328 -0.3479390373800054781 -0.010269252410150066235 0.23372556148643286456 0.071868654213122482033 0.04584747995884491667 -0.14471621890642344388 -0.17360220639152812439 -0.0093885002188218071723 0.31797672846463703733 0.66230957777501731076 0.06711383799912881698 0.57531965199418211299 0.63417684736023005598;-0.657045730425156016 -0.094796190175430200542 0.40099863835251170485 0.60700642055931863794 0.30945664911139192377 -0.37596309907648811643 0.6318545699102522395 -0.34895016279023050032 -0.24407013603939697877 -1.1522720339950376367 0.31686431627272104716 0.079516287443466823759 0.019132114603893517202 -0.2093794449070678354 0.34217719856159245495 -0.69801743902519297613 0.4281647617542180817 -0.12145259848794311142 -0.11556021636479338333 0.71079934190685567508;0.46055362931560589468 0.044032374481306126024 -0.64667637159466262453 0.58748479396180686152 0.24032016920200036103 0.08318787458381685096 0.0078469940966962720141 -0.84308026138282055051 0.078392158261804081865 -0.68436560043165495237 0.13857221734486960263 0.14845472973593346055 0.17848285816879402854 -0.17302095058632760427 -0.4988018193468982675 -0.73163880034888462145 -0.0095813073468024104185 0.27442978999414041619 0.54814380387851735499 0.077800857184063917926;-0.45787976176637401604 -0.54701974624263849378 -0.27281158501249175297 -0.47476147631296639062 -0.28982747355468080341 -0.48049948400224662404 0.48364165951478316208 -0.35534023587233964925 -0.020357975941464198644 0.6455605967160090719 -0.0054544910533655417001 -0.18869230118722496448 0.25645152314005825733 -0.22462814787755605583 0.14835753346935656727 -0.43757217615930260601 0.13008107735178983666 0.44863646498564502263 -0.54917107612631110847 -0.42675471309302526191];

% Layer 3
b3 = [1.5768477456088176858;1.6217112658443280093;-1.5098454916239827384;1.2395640332001351958;-1.0640352887896302736;-0.94883958546292490599;-0.83703535046329735625;0.43600634081330691405;-0.040663568697436036636;-0.18644001614056954219;-0.02478775857411550515;0.48148641504724237761;0.50524356897755151596;-0.45069493060760296155;0.91585478944105480625;1.1132292991945680338;1.3543660828578039101;-1.370423659323090293;-1.6148963991795666217;1.82401812456805823];
LW3_2 = [-0.99279622236370423938 0.14401946992961978111 -0.49456135807230089396 1.0790951688130954178 0.28137651045606182354 -2.2695722693231776823 -1.1894445716248498446 0.58568827483882535123 -0.8841059176102107342 0.87032147668376569349;-1.2483350465953990671 0.52173006565910384769 -0.57824605912194526613 -0.31827246429431083063 -0.64979138986813944623 -0.26246110149305312831 0.72355447151089014035 -0.30042023636261561137 1.1443774123717562752 0.78278777918513930967;0.72649538124358614688 -0.44432796940233615368 -0.88806401105223953252 -0.035225178304596725665 -0.27479808994795024146 -0.65687918305711612277 0.33569102963728564282 -0.044494609534553072883 1.1234276993221299357 -0.1117877104713079911;-0.88678232554052438541 0.19806003033807142999 -0.49721983882538245414 -0.83945055706199833701 -0.8008753393730718706 -0.60470488007529910046 -0.52670435311397034717 -0.48678841633671965372 -0.60769407758711524448 -0.14521327713842197005;0.69791034064514057 0.91100515306366192103 0.022223496830424373932 -1.351871674678885249 -0.0020167505091750574653 -0.70709581452220271469 0.28907393848711016027 0.41162940501534317495 0.049391630523208260306 0.35671277264734613244;0.5685817757054381083 -0.81332068666035550741 0.9767775241783578366 -0.5487128751933066928 0.047170646362278363661 -0.23402658522397778995 -0.36512201280606731979 0.81900783707434698933 0.28764141752123967288 -0.2993524575708065294;-0.0080735301388514257859 -0.12002953390822433677 0.21836993196680756779 -0.043663519681244065962 -0.86049167294026396302 -0.63883624225853485878 0.73722254901372596958 -0.26440788065816139829 0.81127578720297321979 -0.75772306425782931516;0.23685182593920944827 -0.022475789108800135058 1.0428825453281596047 -0.26308093443227886787 1.2316951741605242088 -2.0999253293065724968 -0.65271507472819667584 0.96008621754924261538 -0.54330459861650337583 -0.17834121227993110503;0.40163369346841643059 -0.21942078779316642745 -0.61078174744415902886 -0.14434847107026532731 0.8401438595836029366 0.58872015553808465516 -0.34275136623782048728 -0.40762740928433571774 0.91382635986724869426 -1.1104163812791292276;-0.64681644333927035273 -0.99902816363196800253 0.71663842246024989091 -0.53462190143284482602 -0.57936039770922165282 0.42218125354716179443 -0.21636029721778862744 0.54015852309346479299 -0.45708112036290354796 0.76614588279398898596;0.8943962293867462332 0.50978907881753432463 -0.83569067189771584214 -0.59331738388990618027 0.50905549481598511008 0.22270764062323095134 -0.44126461840956682225 0.68050563865067170699 -0.084463485022254800039 -0.6583247184806519936;0.95819120051405548555 -0.57788722132625325312 0.38080145196902887017 -0.5300213109489608776 -0.22668984994122634569 0.1619262063258707085 -0.29444758946372756592 -0.17006254280576810212 0.26384429036426959581 -0.56708263786754531388;0.67900017352134434123 0.57766707794684890587 -0.50221235462512203718 0.57643263122788024333 -0.086414167298270366802 -0.73205638129773342726 0.66818349447069547153 -0.27009625888317323472 -0.64882513755315207593 -0.90069445086866872785;1.5437156505539884055 -0.34450038969279184187 0.98987572277386948194 -0.11116066620606973592 -2.367856021541077105 0.075298745041912015785 -0.46067026539399824614 -1.8216141671359424858 0.92269128645377118669 0.054658112724023238949;1.0910003354987789503 -0.2780182876397694347 -0.63942503412412110553 0.38199883049357991061 -0.4208393759740925999 0.50708003162050185875 -0.93107903643564582374 -0.61443353412061418872 0.12970358115700630908 -0.51757994689286679346;0.74750837946867443318 -0.68970625695397946853 0.010587014258278414774 -0.96412067618984687023 0.72769795754546218181 -0.65803885984442622714 0.33772997600609194757 -0.73004901705455982341 0.12091317813180400831 -0.23303039247325385563;1.6942148863750408072 -0.51457522676853773014 1.0770070798161577308 -0.55237904115249158998 -3.0375652618534352278 0.023973429846066065391 0.56230677388910554892 -1.1340710513408869264 -0.92320505488168180808 0.44986960007554693819;-0.21033671696607980639 0.0092103236847042406488 -0.70567417493573580956 0.11140267378202206583 1.4012066612094897788 -0.81484131072574017551 0.52093882528042922964 0.45237578402419559298 1.0658802988065627648 0.41644366207293004312;-0.65023279298423608541 -0.48814630672371145392 -0.38887728712454383562 -0.50918881335320997916 0.41800443218659866229 -1.886731494466518555 0.95125556273912770244 -0.66648641211921200167 0.85564847645870023563 0.35398922027179208216;0.071725744292596191332 0.048034620975502206885 -0.8338548378187130572 -0.57919461658570936535 0.65024594844909033853 -0.80320381826351672228 -0.84374034805283948391 -0.068724580852453517887 -0.85391025307977463932 -0.25998325463771848609];

% Layer 4
b4 = 0.60271947387534097196;
LW4_3 = [0.91022468123423916353 0.68389703343616570219 0.036505188865337143134 -0.15950841232169990502 0.12992228088268897856 -0.23061030235435894808 -0.64547642891139789256 -1.1286419930222471031 -0.3023269645736619271 -0.23321431368711897925 0.0090298940226429588035 0.14304473544585982747 -0.90591970132198151866 -0.92230351894161377579 0.3796189282358897743 0.089182027597844673594 1.5360214133448912843 -0.20407690532636757474 0.52497174981081839995 -0.047802523539882568748];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999934;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
