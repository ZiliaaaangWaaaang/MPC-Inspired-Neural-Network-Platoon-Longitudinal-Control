function [Y,Xf,Af] = nnmove_76(X,~,~)
%NNMOVE_76 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:05:38.
% 
% [Y] = nnmove_76(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.70139767883548;-1.99738196042707];
x1_step1.gain = [0.053913604005474;0.149967019141203;0.500604127399131];
x1_step1.ymin = -1;

% Layer 1
b1 = [4.1566945042583824943;-4.078827863908365714;-3.489448877019275308;2.9716306903025224706;2.9474542812140747117;-1.4559844123084448864;1.6158189004353726848;-1.7037438867806515841;-1.6285883523216271307;-1.384121165725750835;-0.079447476075750395053;-0.13760826530113759447;0.017088920431596918426;-1.9604793007067777832;1.9940781032032832698;0.95794345260750202176;3.288097494298701573;-3.3834440638131373369;-4.6743445890708263946;4.1866346561290894712];
IW1_1 = [-1.7018986866148535508 2.1391185662156297909 -2.6354245095791184461;0.25314785072999101967 2.5300123584769305118 1.9235764932985799369;1.566943363333301642 1.0340157297358643085 3.9245367115996874219;-1.1048354873578123403 0.6334472713377227171 -4.0431688012380195829;-1.9366381320463514903 3.3610583047232505116 -2.2965238049100769047;1.9824709777026008339 3.6961491475943639706 0.95442847860824708839;-0.99816050708027626026 -3.7226833913720982494 -2.3607960887007584105;2.8602072998816874261 -2.104073977410168439 2.6780713626018202156;-1.7045571585767500533 3.3467372889625264243 -2.5274882003167209454;2.47102753253519003 -1.1433879722164250747 2.0833848434281518891;-1.5847461148252914853 -0.0028945958991156116313 -3.4298893956491718349;5.4527224577690596163 1.4851947498468787145 -0.93999724148309249383;3.0101559509140707327 -2.1484009588778634203 -2.3587347166319565517;-0.83537738984852027979 -4.2154607780406800899 0.98262696310901931351;2.5577900680890945928 4.803340071344049278 1.5004453241046078471;4.6635975039734480774 1.0583546220980752928 -1.3941414570667880479;2.1244507119042443932 0.48672795489286663217 -3.2170222152384839731;-7.8862962786760233413 0.1503853814109969711 -2.689944516308413025;-0.076095945411981960604 -2.8682835496909788731 -4.6419697077163029064;1.8553670359290719283 0.46303341092447719562 -2.9293399744251207295];

% Layer 2
b2 = [-1.6514880863841192582;1.3284637722985201957;0.56330231566001420784;-0.8596772085706030353;-0.18373802743192640952;-0.11206823842754704001;-0.84976832499801235876;1.0827969686488680967;1.5319040392374243531;-0.31605856359020018109];
LW2_1 = [0.089182356115466404622 0.4331057128409481205 -0.10847691770695140623 0.419763917695274269 0.43935727124524259768 0.1296159853291448949 -0.2478628826605125679 -0.61901250544222219396 -0.25821554621948505925 0.40946623910059898321 0.3924783024283139965 1.0825537046686848353 0.2479447802422502789 0.23550534565086236882 -1.6682107230117160235 0.24339215345633721799 0.11689357265392437413 2.7964231657390774544 -1.3388920410031333041 -0.45181286892939381827;-0.24699842677196215401 -0.16161434051772416431 0.37101655441919417777 0.4319092949605681242 0.69912772442595438882 0.16146680996605916603 -0.43664199045440099667 0.6319903111383493588 0.068827448831540474772 0.022708163851118991217 0.014892518364353023869 2.7339125548422815726 -0.16137358201954105086 0.14049688999257239908 2.7114896599345579276 0.066970397196489409031 -0.99169695515960765153 -4.8037636271470738336 0.23464874918328132436 0.16697533870543046497;0.45528030633437338581 0.084137253446574605809 -1.1237380945942674337 0.20309248450233896577 -0.74312222532563709798 -0.87674464903369964119 -0.13610874576439110917 -0.69039480372842110256 0.24977734389307001961 -1.0314854576160243926 0.0027024076041385044003 -0.99530634435499110158 -0.99881949645646583846 -0.46876661134224251182 0.40098418394625218175 -0.11886024955326653096 1.1923624512391266528 -0.12733595771054420642 0.7240129729263689029 -0.29046794776620610268;0.068814046482714885666 -0.01509296034698632237 1.1833526291967115807 -0.46499992732765915715 0.00070283936256964728989 -0.24903134879039276472 -0.95769165383443011219 0.67914755942273408174 -0.24538706167606275099 -0.050552983788485710004 -0.24992537074422943588 -0.71499347210076813486 -0.16840875560152554491 0.10679424935579472089 -0.37349526350138051445 0.5907102825103214272 -0.8404939914351984287 -0.032585754221333584901 -0.54503908630584441131 -0.73181569208689589701;1.2810806010910098518 -0.35842289047494013676 0.088691572303940452437 0.17484414113272325753 0.14482408750231925976 0.013888995790524591434 0.12630297762774714276 -0.38386033564346749847 -0.67955333968145748003 0.39832549337164879777 0.072046657885767056984 -0.68065854234186018434 0.15577203547970705499 1.1731844893695639875 -0.10439512757930100029 -0.88483485845325271502 -0.4073589334766993808 1.9078010357060619651 -0.90097911239805228423 -0.34769874909646464323;0.24026395171357209368 0.52729050514617203937 0.24166084572740237357 0.73400947382657522056 -0.15892454265001015878 1.7220420658520390056 0.16827699913517990549 0.16363427462307433835 1.9453174598108893267 0.17871429277078038078 -0.61640427487245663674 1.6372513775056500851 -0.036206841510785008065 -0.79311814865448870826 -1.837297595029456998 0.57738703571321048358 -0.31761805309490376281 -2.2996136446018931032 1.7591843240901650081 -0.033438090458549334094;0.069653086428508842465 0.62762835659601678984 0.37206131184299640058 -0.43257091779840223245 -0.079912080613730160361 0.20771063295710567864 -0.22918866396902526361 0.41984409665780869636 0.032732896172008849045 -0.615739117478428577 -0.01605900571439521779 -0.11339300837983487535 -0.41875669866822157195 0.1841962461725286937 0.36234338975973640062 -0.41684257931386747842 -0.74688406171646315457 0.20200256263457802564 0.72530829721321554704 -0.061253850274551664701;0.61842501734115196133 -0.34140936201344640466 0.35181275841330389431 -0.42308364748867882676 0.38290081203961096046 0.25550504325515399628 0.3184172746456583325 0.27611966487403810655 -0.23169676598107502574 -0.099722935276701160645 0.34281652759654585028 0.17928741812937720734 0.36446764710260820541 -0.60394253650527818245 0.3972009304108342076 0.029781473689374837743 0.54304324768006284607 0.26337785135218466648 -0.0057129165696478490313 0.78505614505024845506;0.62266958527911542287 0.08458230594630335164 -0.82053667515001638133 -0.37228176368624110726 -0.42921276902000404796 0.35713433936346283826 0.32380833902497097032 -0.31956392487027512894 0.0012338024561861348632 0.84175842462228789298 -0.15429870477475451929 -1.3272260283917782786 0.39600913051344155402 0.86028864055451814696 -0.92683138604021919615 0.49169947962206750347 -0.20944456985307227659 -0.16002250316071175984 -0.51416158833067404643 0.30738610524819010017;-1.9372454593720114246 -1.1407240383754109203 2.0227373652716758023 -1.8197350698563290461 -2.2326879613243542089 1.6910623981471206712 -0.98512765935014401375 2.0771109317323808163 2.4346965576567773937 0.60576723794002917955 0.16509167518213760384 4.738704193125157893 2.5163823203386517235 0.64658942368624350294 1.4460004487921003236 3.480475849469921279 1.5429763309436397289 -0.031132909246875114379 2.2788313742168875287 1.3786358261117637181];

% Layer 3
b3 = [-1.8945416103451568901;-1.8948877326748765348;1.5420868605732584999;-1.5801576398992629446;1.4467567203326989755;-0.82094060693129178308;0.48618419206370133701;-0.27919066123117863842;-0.56924926961522182012;0.4600039676474778072;-0.04243185368200699803;-0.29997984276196387743;0.47957375738635799056;-0.82673832361646593103;1.0584048439548832121;1.1208214917365537655;1.2651386807497155829;1.5035912780444373738;1.8067070069645483343;1.1377764174984126289];
LW3_2 = [0.1168820353235344861 0.79238566859443060331 -0.7522387639197521958 -0.85701504526226002234 0.21596684452420689126 0.33812133106722352949 0.57962852428158329054 -0.23359512084683542454 0.77230323426780800311 -0.66351381848718526957;0.62215952097039073365 -0.63761505095808956867 0.57536805278468905467 1.1357153367426986446 0.11688944101343771986 -0.35639448969510667542 0.2607598598122005118 -0.69297842329981951259 0.59205001201455376147 -0.27917737652794227809;-0.097479301945200588775 -0.76742349146687638406 -0.85324264943290240026 -0.5745209890244782347 -0.45551785429002578098 0.59301938981767332582 0.21107278517791527861 0.89642353722305256891 0.69877996483339999134 -0.11039115129201436394;0.63939910146851963724 -0.64742293063655398377 0.42022963778376309918 1.1104335225029031697 0.51096917399490138223 0.59654026444809915564 0.69158913265342714105 -0.10571475318236159269 -0.47676510145387890338 0.34222496204431523958;-1.1655486665339385155 -0.35743113533928216885 -0.39213113733567594998 -0.59107868883261638349 -0.14035108871701570954 0.58665441638642024103 -0.19410523651695785197 0.18688270524535641193 -0.82233984541037641325 0.19635455007034713359;0.73808570538091444746 -0.16083479688239710192 0.30818459918391838404 -0.34601632966557765991 -0.49197099421002471464 0.23342738998311707288 -0.75272987703358484879 -0.65493868847687064516 -0.80137443425100463035 0.89197897157977712457;-0.23730371196655458688 -0.12985326856406248508 -0.62095606408651582431 -0.8846465076374606662 0.66096597664148359907 1.3865463467885923432 -1.6167170537985158241 1.574080973967127095 1.1208905618651243685 1.4058837705478275382;0.059297890056448483709 0.1114568883967097801 0.7784228577095225754 0.090303184467300817717 0.13215222078436153486 0.15183544257182307602 -1.137193762958554677 1.3093217082463706191 0.26366534055651902335 -0.00039216305147496752356;0.41584940092521827104 0.54910810456207415076 -0.38022567129903611649 0.050071998454528518496 0.28594867251425803989 -0.34981314797301371611 1.7923949159579579682 0.3093181625514167532 -0.23790069913479247599 -0.58911536863040725454;-0.58655066453210125133 0.21738594647510187108 -0.26631533500350701438 0.00064086272050633262022 0.56980006474859679066 0.42686225334069988202 -1.1176559341174432394 0.48097032893127156239 -0.34035028143379769672 -0.75856871554133886715;0.20233677766267918474 -0.56059631856253655524 0.25839115821138219919 0.059163748982847326474 -0.81790709179389819994 -0.18377528082923369479 -0.14057375878163785865 0.70784170780777089238 -0.41043308546624812649 1.1992122721432527666;-0.51462559869591062434 -0.96330490068803298342 0.29430055677629707311 0.30569361384146792604 1.1742127902392813787 0.10053840395001571728 0.54137052755432413242 0.77638432853424155233 0.038369793321878675751 0.43005204539221303373;0.8514772421839116312 -0.65999478605487638117 0.29176267040323683455 -0.81607908581500832046 -0.2725915449582673733 -0.32602732547975504795 0.059864502140813152797 0.14747882711152282553 -1.0733058248147955283 -0.1917000990687683093;-0.059542120797302332258 -1.4413074586310490321 0.28859238952190413574 -0.24017937372493053383 1.0868966501663548385 -1.3088178944278019422 0.28497870336072395059 0.13015006060494122009 0.6642804772502652888 -0.44390115088143228261;0.90855745002147303424 -0.49070818615641531579 -0.093759888250440071022 -0.63707671759757322771 -0.23121766487554187841 -0.73570328348123992246 -0.70034787964563394169 0.63138857105512169454 -0.039641285345289711817 -0.059348585965013619936;-0.077685879269973709405 0.72672291168894109781 -0.76193865351611045345 -0.2631781128365389133 -0.18629189795375164507 1.172055345822839767 0.69741382896706483052 0.82308602765388738653 -0.08333247463439022451 0.54509445173901904802;0.2535478302053418842 -1.0025345544296333511 -0.38206963723348758011 0.27146223280570613845 -0.89233400569732912455 -0.018005257868962110807 -0.52008114472305366771 -0.78518997237682452983 0.49601677142531891418 0.23847561785612000906;3.1238019792026894272 -2.8236134801330448063 -2.615980599674027296 -0.27523165424034223836 1.9506304342530260687 -2.71428349769463928 0.31696928057296197556 -0.21917848881261753347 1.1707245006625985884 -5.2642366360734555997;0.49191879496360496615 0.599488509250513113 0.55253097648803539688 -0.49409522213792611556 0.0020742560161853083184 0.60493435436440257114 -1.1076398116735859389 0.12331385186383862773 0.7196434628514414289 0.6699109940587966161;0.6765394382995241207 -2.7108921879716660897 -0.56064448894072704821 -0.29106371734235664261 1.7196063684584657061 -2.6510792788850499058 1.1293841467025822478 -0.1127583633777141936 -0.042518580322219647061 -2.3744856260434952233];

% Layer 4
b4 = 0.94501436864207355448;
LW4_3 = [-0.0011062577238243516149 0.056465845890816636354 -0.069237318409595516311 0.7806658409163955703 0.00027480648782649263204 -0.0037356611300091509438 -0.78398665843536041731 -0.061712043114877185301 -0.42501830868866835589 -0.0063916325000220406555 -0.0029240160019098665641 0.021142103358374540745 0.00063107279532345389624 -0.026044816234993637544 0.01194280942975982189 0.07985224006885616177 -0.00088470395383187690197 -1.521949135352867799 0.37459207380086195771 0.60381637247567021554];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999934;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
