function [Y,Xf,Af] = nnmove_82(X,~,~)
%NNMOVE_82 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:05:51.
% 
% [Y] = nnmove_82(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.70139767883548;-1.99738196042707];
x1_step1.gain = [0.053913604005474;0.149967019141203;0.500604127399131];
x1_step1.ymin = -1;

% Layer 1
b1 = [4.1789032101949663556;2.9704255571920881174;-3.634160107849324195;-1.8809310106780838812;2.5554594685051803538;2.4042656689568948636;-1.4357441754640689613;1.0392718365176119022;1.5562684079835877871;-0.86810282238743874395;1.0090232904648652745;0.07632975833886100625;-0.99837251938407567398;-1.723333965467301887;2.2692571486785246826;3.7983533023794286976;1.3957986975197860247;-2.9170220090149747705;3.4837849878013487093;-4.3155207259313597135];
IW1_1 = [-1.0062452874949643356 -1.6934042635696568979 -2.6856070027856842053;-3.6963467676747452373 1.4273937581479578807 0.74099539464744856865;5.1936156537583624271 0.19151025587985093246 2.7096226536627328052;2.1100514408268900013 4.9115836723997947644 -1.8954356776022165398;-3.076837163809347242 2.3749368222911941828 -1.2927155013471434142;-3.7762759221456465575 -1.0308449389347766889 -2.3153843023860880557;3.6579793517389966873 -3.614559118539992344 0.6558106146127489211;-7.1449609905718460823 -0.25026725793560428146 2.13034669927282172;-0.25329269051604197394 1.9991030245807310806 3.7733801044698047633;-0.14399802062465538732 -2.7476532493584358008 2.6921176838249829544;-2.7374046528346722695 2.6371705887162995019 -1.4879223288914058543;2.6147953555322702712 1.6386031632012054704 1.6934094512285844392;-1.5597497746235056137 3.7915664430107973715 -2.5480133177293562419;-1.9658853675671794647 -1.1423746734283029003 -2.284796183798309066;5.0059596934582213379 0.87838145343827567224 -2.9425077824171661511;2.4417951760359377644 0.35782948602990499731 4.0226283000195621753;0.60207230284546398025 -3.4635096788661599021 -1.7132775140469178599;-0.11121279144543635975 1.6836438209795667742 3.560308950277949247;3.1102582050222968846 2.4069679431393451452 1.8081293577716905929;-0.15643187150236742555 2.3491146187348923569 2.3309190692590666671];

% Layer 2
b2 = [1.1516637668760019153;1.8993079776078312104;-1.1919647096121781527;-0.49717961352194894875;0.023922842383456193599;-0.25186520838061882133;0.24433526493272147984;-1.0339947533176907513;-1.3606296422642643051;1.569729646431378578];
LW2_1 = [-0.48851239294142562164 -0.19641646489989372792 0.94032020065327681646 0.60743624209648727774 0.18273326112560744905 1.7705658432748605513 1.1500311718152451679 -2.7260949547859754105 0.088356166916390824206 0.21765177152299372554 1.0162963179813979675 1.0544922908233640424 -0.060829698506149762482 -0.1795724323259580979 1.5508282284134129458 3.3758863795207116887 -0.56534452066245211022 -0.25812580658281680801 -0.64329991476349557278 0.33221817590951679966;0.59354018849927647761 0.26176657422368676542 2.8536733598962533698 0.013375328129713663985 -0.3520836980670162264 -1.3741024686529024201 0.87343434603258518489 -5.1856602633611386111 1.4327175294347236356 -0.59270884170752624609 -0.52668124254211134971 0.93978885453133631511 0.83931923990524581747 0.844563916598624842 3.1925045871036688006 0.26364520962326337683 -1.4661278226822624937 -0.32187879332073915384 0.51919780800186909886 -0.43694857435674688828;0.11235972922685599773 0.10115024457938290303 -0.14349277391027359663 0.65699890225542112443 0.70087691987151190531 -0.85426729970323833641 -0.12850969433774778183 -0.39714726595880173177 0.084918970965856377386 -1.0614221341374516783 0.043318531724975295472 0.12372570379282823994 -0.39876670658940216452 -0.52845873069829707447 -0.055220118715258795228 0.15414711330807401302 -0.23882635866232193589 0.67953128803392837121 0.091158947817549323966 0.18576683841043034606;0.68657199431872073525 0.17207888343979646506 -2.9702676426370655527 0.0019656725306137828521 0.3843724487214155161 0.661296364504396883 -0.3426036778920868997 -0.032635077327753642118 -0.11221521523480729177 0.56207005712588764546 -0.065961932625604874358 -0.0349068503627960533 -0.60686556816514813928 -0.45323708557171826783 -2.6131407318199753043 -0.49792029505469198591 -0.17068517221366502623 -0.44044288686798771515 -0.54804497534020968352 0.03403106962600126878;-0.37271310762874965139 -0.26689822065569290821 0.6932418722992690352 0.39534264928806089889 0.83063182650033029475 0.056500701299507426201 1.3184365001380040638 -0.0096256350638826669586 -0.13837114786748383466 -0.11522020778537150898 -0.746270489775513024 -0.087762494527468176697 0.027230770358736736125 -0.18034831895806061053 1.5384870744291807565 0.15424382728797350617 -0.30520394717914878235 0.63695440645227008325 1.0396497095136143507 0.19699396761498749742;0.14014255585331164555 -0.63098711044358113398 0.98200396905819842264 1.1602077030450916872 0.31465572440641204066 0.73700391209316162833 -1.5236513907541042734 -1.4524156504873109164 -0.0053908879110717662295 0.21868106780090551533 -0.52556084884114551148 0.081026891937802894561 -0.60343556895047600896 -1.0404263813606973166 1.0094844745325131097 0.4105532271886575546 -0.75578123440736988403 -0.39352141885643521224 0.20187675285221592936 0.22497513232683330475;0.025323276670123233412 0.47214197718975425833 0.49380128209969120778 0.21837541943556859625 0.29644220414229249805 0.84306141944232249053 2.2370924447197584328 0.6745570860093161869 -0.18540280290857180656 -0.21358673765703073411 0.62058105131816720945 0.047533296788588627613 0.28076594411113792171 0.64652372637106791942 -0.78290343729996247912 -0.45548123004240631539 0.076746374785797558116 0.032433195347092179384 0.53267578975239748829 0.23278723516238042368;-0.19605325375253487841 0.10772154464242510163 0.16444254964545954034 -1.7640688245653288746 -0.67129656329997633435 -0.1974124696871249196 -0.42868014556540856574 1.4162892280865733152 -0.0070226225531334028618 -0.11960335821418741076 -0.092826648021843316538 0.21498551479912783591 0.26061784718235186942 0.66497274196010747183 1.0336384013462858178 -0.42072509199939733815 0.15887554978081067092 0.040676131423069875059 -0.19364325164401074986 0.41167835587320705804;-0.060965757289250271933 0.44252654015743342342 -0.5592405378859481857 0.62204291938812661389 -0.21256460625561737765 -0.22860457227670255564 0.39335278806711765354 0.42835049322549845208 -0.069619188376310661703 0.040711784432763215014 0.094182036747030975499 -0.046586158070839864265 -0.71330385715282607073 -0.42578643083256639823 -0.93879800799517787446 0.14865077330941586786 0.40789608464669036003 0.12042909649035857256 0.5576433433115343119 0.30196085541347900127;0.31549618039497184796 -0.56221631145432182652 0.48390180427338291835 -0.79439341952932396307 0.4240962731103062322 0.26700631910582128814 0.27123616119766003063 -0.5540963063040853509 -0.089980349132570233706 -0.21293988276309683272 0.20239267552354700541 -0.097687469906273804998 0.59974852708173176374 -0.19840251383167098465 0.06253264290721433083 -0.15551776468368322393 -0.4696415693523813828 0.019737961755619506249 -0.064155111205172796196 -0.070166742073963672688];

% Layer 3
b3 = [-1.6808624690260809409;2.0899349140682046411;-1.3798385960186549948;-1.421880960726729981;-0.90897886504976654898;0.8692110841769067342;0.8358810487923226118;0.92435117932872057356;0.83149177772565308064;-0.32499338720254017376;0.25705971653165710089;0.67885934561254723807;0.52706499683894181274;-0.19822814227360102679;-0.44430581338939822977;-1.2602119870584389538;1.1616618241277070211;-1.6434679733248105382;1.734520520414171374;2.2070676684164625136];
LW3_2 = [0.51535444595793600264 0.22157688517264298445 0.57355557743014673466 0.13752483234099488474 1.1086584480791858986 1.1693407597161558087 -0.13636699470574334403 0.52646287363449550956 0.11654990899972285379 1.0386345362571662854;-0.35093789332578056994 0.20657189641899584287 0.94892330583569195479 -0.51196851835924628293 0.34529608847862430787 0.26202286456858697727 -0.22129155227964214525 -0.069694897205092393166 0.79936698314227239148 0.23101259338190444081;0.58623682040981306418 0.21932515782618655642 -0.6542884735069930402 0.17065009956051263584 -0.68599889022125837279 -0.25071632302072616172 1.2275868746616729332 -1.0281105213692725009 -0.40949669572494623582 0.745408496877290494;0.54858360389834726067 -0.99825823227331944576 0.70505432165342729611 0.32098453617112493452 -0.61157573994380709514 -0.29357449806651958468 1.0443383718999816878 0.36957935643292810779 0.072143697674305909406 0.072680285574182365571;-0.35087969000132529507 0.82782306106520342492 0.70592878536441550086 0.43623822808033102527 0.70018224168189058254 -0.56276571894231475213 -0.44740039619469551546 0.65523809988195891307 -0.25229119104530600692 -0.45091921097958997944;-0.54840379107242420709 1.4934425332804710518 0.56836654981309941981 -0.42345899447749257849 0.33277630579325917504 0.76067617855088753842 -0.59024835884650395101 1.5093309322043602094 -0.41886266172803698904 -0.55911445010586957594;-0.23263283435304177305 -0.69725844991090035752 0.15255241094702920446 -0.17086971080492938113 0.13192162294686846091 0.78008569965539553692 0.14968028706970340491 -0.31289797606883656966 -0.7401978144514899105 -0.59244245687219965202;-1.3182365236398478903 -0.73002133895929599561 0.4105911738861743876 -0.093235237798508355245 1.0559498538517126942 0.26010504089850222664 -0.37174003623063706092 -0.17255491771825398617 0.036041708594508357899 -0.45741868484623782187;-1.4342378015889605258 -1.8303767405621853559 0.84292862886285002677 -0.48629946188216460756 -0.49052499211669509105 0.020666328760741491805 0.01994384561874688877 0.96591720274000991697 0.72634357461969445424 0.28025866805436405738;-0.49017415385395590732 0.36829464334489703248 0.70263653865466502157 0.40417549958838777657 0.14927220008645927796 -0.92487114261481051525 -1.1652805153019345497 0.77437792161735041763 -0.095713219228348148104 -0.66699587222323353242;0.82935509413193209127 0.4661210225216622649 -0.77709038176996814151 -0.6972067017155659796 0.32079302729183467591 -0.35360726452137841713 -0.45234822665047064172 -0.46387258732265007621 -0.059267763398527531504 0.79944077567456350852;1.6781960399433990538 1.5816662640258734029 -0.53021273874846808205 0.22229530211829182096 0.1895618477883971309 -0.5040844413311045269 -0.050918714325017738753 -0.61394793420435778142 0.4044883421049935146 0.11263066293868784218;3.6578427038204401889 4.5118098954995211614 -0.99415061612784749734 -3.4318876836456504442 0.92762042759033647155 1.3982051867922073995 -0.83226723659347268125 1.1630323038105447875 -1.6970423913612309175 0.513856232254654266;-0.87539740908441354694 -1.5001826050409230451 -0.75888179252658394258 0.039717463567577326877 -0.031263559236558692567 0.21804606862580111493 0.44332113414131207874 -0.51960424519133652232 -0.24825842414153817539 0.86952400708732457968;-0.52165815935666792758 0.78847559462350313986 -0.085589789600140339654 0.020955248666368376381 1.3814771084032979598 -1.6273750527667343313 -1.4411968369165994996 -0.30404071564496587543 -0.10973053667973518832 -0.14161256265238456042;-0.51551225580519866032 -0.089316032499992703553 -0.63602921802164624765 -0.98887189562477639804 0.44668420116737994618 -0.050294085425901816078 0.54509063727533202393 0.65459672942152780095 -0.33752003216242221217 -0.293660129495986022;1.0453756922762886816 -1.4706194323189827333 0.65156449019096462916 -0.64951329149746717118 0.93325051607695996836 0.40744133296979256897 -0.081083211254048701 0.23188002920882741509 -0.0102495634193106918 -0.41875528894970015514;0.4088494964218633565 0.96877866246768928882 -0.78427560491906900264 -0.30615328470294905783 -0.85992022094680842237 -0.18036148922741226941 -0.53718703495286890259 -0.73724528728350235962 -0.33255915893279003326 0.071371135506244562374;0.12310507204780486712 -0.41110993014416835623 -0.35493748157019233691 -0.34687786469145404089 0.58866144751353632891 -0.63912346310955747697 0.6131923168987416517 -0.78288218405288012569 -0.78701658042264910353 0.81266485822541334461;0.49094797645258486662 -0.79651238129369794638 0.69291615063694356191 0.26133206432623184989 -0.6035213191797843546 1.0001102582929015661 0.15374409016768667002 -0.63247268579162918556 0.20790862068061502499 -0.29200086485206117048];

% Layer 4
b4 = -0.22375803610354630391;
LW4_3 = [-0.17852851241656050862 0.88831339025136812904 0.10389139646039136089 0.56141216985127473382 -0.50849105809253347665 -0.51177867982774871702 1.4457290778089386674 -0.49637775970264158554 0.34435369495138590246 0.47327635768066128596 0.13087501082208977121 0.23039831689514511659 1.0025665867625408456 -0.52259049012523917099 0.52204411813680040577 -0.27820270237925659451 -0.25835346335324593792 -0.34041275444182050869 -0.22894765355675400498 -0.92487617225356866246];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999934;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
