function [Y,Xf,Af] = nnmove_83(X,~,~)
%NNMOVE_83 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:05:53.
% 
% [Y] = nnmove_83(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.70139767883548;-1.99738196042707];
x1_step1.gain = [0.053913604005474;0.149967019141203;0.500604127399131];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.5868751048726856823;-2.7792371298688789416;-3.4593249985246141698;2.5754616956022520213;2.892259144645518365;1.8465834427301595078;0.94848932865718460494;-0.036466587347744966463;-2.193423923739179493;0.051271209338811615797;-0.4129514848855455611;0.313226541572617867;-0.32509857072379810816;-1.3607066386538242408;-2.4374308308234908793;3.4655551774269031107;-3.300571549569735641;4.183577380654485367;3.9588947083173136043;4.1553898430332383285];
IW1_1 = [-2.3599279475265695361 3.0585403564181996572 2.5767703801453580859;2.1479406553904034638 2.2716962387016543801 2.21564367806224638;0.62977451525065897275 6.2418805653299997971 -1.138877981192972344;-5.5165743309240085068 0.86881406502855385021 -1.3872600942772617127;-0.18104569665805114731 -0.59787853504994747933 -3.8130996152195568705;-1.2964421098944070021 1.6543934007623766202 2.5075743673820518609;3.2484904913264718296 -2.1094189690250679803 1.145672473805221081;-4.9169995279105815911 -1.4139663447295278687 0.35297844185689908336;1.9312159391911074557 -1.9392212842991554123 -1.7732631670390013312;-1.5007931824411393507 -1.5113353604007353503 0.036328065285683053265;1.2697279078277117215 0.37665898414630522018 4.2405366498007373011;1.925249828405607655 -0.065402892494572761883 2.0007170015452109268;1.0930858847622095809 2.7658391690867096813 -2.7567647184422794382;-0.053952085096724576585 -2.9223005952678549058 2.6770406503552592881;0.76608818273940471055 -1.4326702757126721366 0.71324509666175739397;1.5319282688806397097 2.0529989721234676026 -1.468434779400751955;-2.8389925033689924483 2.570520641561695907 0.05894391751260220913;1.2905251371305845876 -1.8712457755089637601 -2.6947821712665764871;2.0994513337534135289 -1.7907515242487381801 -2.1438629124094252809;2.3648837004103269166 -2.3474854867992465124 -1.1604687646761195907];

% Layer 2
b2 = [0.88809099809888647492;0.82271293802423406394;-0.60540211240307395535;-0.047958324607634023051;-0.77378578262422004208;0.73412785756660547953;0.81097330198686246039;1.431342084915275592;1.1028862456034307371;2.3892472790649943448];
LW2_1 = [-0.95870630219906538549 0.46213166253043397314 1.1289114557162509556 -0.98827537568219858688 -0.11681129603254114535 -0.082577744844834308213 -0.36604806490677882502 0.84335292731218014506 2.0168174788123836016 0.26362872660892627819 -0.10420452667093042798 2.9771324219620169949 0.8573395636702044742 -0.79487249786955527231 -1.4457348157545211187 1.9796241840250714539 -0.76101051599345592713 -0.12656955854952875451 -0.38171154545308871864 -0.95242089817004393915;0.77915515105588417644 0.93346557937540652894 0.76788432975955622783 -0.77726218979719052804 0.92804015405936124417 0.75546319798933281309 -2.1056449641669452433 -0.74918558650288669121 1.718962588497168209 1.5778171837001817579 -1.0173751685433287673 0.76916043042640536154 -1.89033593064514438 -1.2728126535206414349 0.054933081380988235676 3.5241890273223859253 0.79034064164468054159 0.47706344421144630807 -0.75067806910985390711 -0.16999641230199000197;-1.9197724324064859847 0.60834225622202708905 -1.643485334123184094 -0.9098652912845224261 1.2755848074814426507 -0.12747295683414511247 -0.51047501267972206218 0.75435853401082952896 0.62076246637328347244 -2.0441757378909746201 -0.75800609580053535108 0.537408404659020289 0.4598298288676145873 -0.70553519651118845601 -0.42876359930007218457 1.3000558465041041067 0.60052834902765661607 -0.33447943677268565654 -0.16469880895291308387 -0.55999021070174470616;-0.95563979522298436731 -0.80508180302565679476 -0.46291007399261324684 -1.0586147212986238841 -0.96239911944142531031 0.16253459791736812878 1.7199081829500428853 -1.8239656592132553747 -0.43118156171774957297 1.6109066326179006801 -0.082752513324511195458 -0.39154547300039188595 0.24977200920661968286 -1.3271979176412116441 0.93111936744196810434 -1.3248819398426914251 0.43353107233089283046 0.24703388298263614931 0.208277829494551453 -0.38882430980031634782;1.616882788951158556 -0.39308917995798431377 -1.2884703842651124006 -1.5198348595441375508 1.3226991247151760334 -0.011985076397804345777 3.1668526874264206761 -4.6791988678041320782 -0.35551896954883727142 -0.81195964747853621724 -0.063020815176123498591 -0.19283564446733919562 1.5032609384894106697 -1.5819467814651466675 1.7957368899302224019 -0.20875102446527066258 -0.28261032007805841904 0.3100797531460020573 -1.1699733953945599119 -0.27941459598938411801;1.5235933241574783903 -0.12469473419573372241 0.28870905412600844642 -0.83355306252662719757 -1.5934579580181760239 -1.2011632233683551263 -0.63309302773694620114 -0.40546367499745994412 -3.181909252070445504 -1.0873000977484896801 -0.12422133485648960416 0.33138785771431755744 0.37137302357020723909 0.074522348634127766331 1.2978028193741477647 -0.35916666544434056041 0.27737038398025204433 0.28393095131216550264 0.31617877508699993028 0.80954585417956936855;1.2600416957754361214 -1.4571919477461550141 -0.83901757858365066944 1.472064591955353885 -2.3566707862061706535 -1.1472662616996718299 0.10444599846216959249 0.35065092252314411514 0.13416181399901883076 -0.95137448753549180847 0.33407177636742174665 -1.1064063311499032771 -0.37787578880758387889 -0.44394172224244243807 0.34239955029732038749 -1.004847656793505184 0.40175946442973553552 0.76709497564519235624 0.74223763247853125069 0.08914274953339255958;-0.32826649412207198342 0.6405151404951693328 -0.58878823401059310338 -0.19499269184739542737 0.30828708385471143005 3.2616558510023865303 -0.79082606418955680994 2.2691316093077400495 -0.19026141038178667753 1.0034850562721984168 -0.13446508601915752035 1.7059932054645783328 -0.83336491267099122027 0.48468030953152552165 0.29784926209408252307 0.18245136440760853502 -0.18614935085391617897 0.18067898903121759613 0.70818781772336469871 1.044286678383317124;0.30735866682710244469 0.41063348170543217952 -0.45316388907631866001 -4.5204461079372295629 1.0215591430050039445 -0.83003838840182153636 -1.8003562829780077603 -3.5804051664586649117 -0.52507188687145855965 -1.4865796225688256982 -0.12673673897542442335 0.47024358061429089028 0.3054199155659109155 0.48483781784955742866 0.52494284128471579987 0.45162232133862617589 -1.416967395301885535 -1.9546145690580993826 -0.23670752210696610618 0.57998853425557705954;0.9701787003648837393 -0.5544208480168434372 -1.2033483975945402644 1.4950433199866943745 0.15217573717524612853 0.54976875223725063524 -0.8555451642806984891 -0.36815283169678320041 0.42405605266842416601 1.5815229197682512119 0.71119461533105587936 -0.041284030178855124493 -0.19914712692982558528 0.082662825327392774888 0.36581658960282370519 -1.8006917282583949635 -0.95106246355650558844 1.201100700846388758 0.66487241282849107726 0.41241756899972836781];

% Layer 3
b3 = [-1.79687754925443266;-2.3300333183841908102;0.6181681242719158087;2.3788873871201987598;-0.70364359490720407297;0.57664153343580137889;0.90648141971654161431;-0.09877904962267218536;-0.18638834762189074312;-1.0622974587878710739;-0.58982560789071414309;0.57082209301139297253;-0.8333715034141289113;0.24553454235282567986;1.8196426229214850423;1.6865836924207291414;-1.4684274427895978032;-1.5319283447921043795;-1.5548768216078439064;-0.58580702119104666181];
LW3_2 = [-0.93883619094998882471 -0.72744565921916470863 -0.65589971400147373259 -0.84650696518302959159 -5.6573619688958478591 -1.0488622576822110855 0.28053341976035806038 2.2478548405756773043 -3.6860845847005134779 0.64892675675304634098;0.60356446937063179536 0.86503581393111739217 -0.11085369232344413626 0.26673515495574412482 -0.73291193378736341213 -0.023909747616839664708 -0.4027870551596645643 0.077485394543918645338 -0.19089074160308655559 -0.70829044272472818644;-0.31481535503712332336 0.38961450063069474892 -0.61662075640348645855 -0.67686444229428677222 0.63540586492394868223 -0.21967195076058740333 -0.40015498436730800869 0.49492511263451849368 2.1883398300307934647 -1.3825943441450623261;-1.1689613387583979165 -0.020801421019871813023 -1.461043508139214131 2.2985515965764058421 -0.016947629574641156353 1.0039152235988400008 0.71306138854991540921 0.66511320059701528606 -0.084424867796276156784 1.070562149222485937;-0.071980284851310680216 -0.29385675414193879185 0.59307449464346662094 -0.48229667231706774277 -0.067736656216549895326 1.0340949736262470271 0.044477219319539816611 -1.7271036542608764197 0.59699003075222301096 1.0670004605882734694;0.081200221504755809576 1.443604574778878602 0.081266081118137184491 -0.14050632365740942098 0.39210887335698074718 -0.77376230140256507806 -0.83349747283566222311 0.6958232054903030761 -0.40033372442247450174 0.38581151002142027862;-1.4997926295015369114 -2.8053123389154395184 0.21580225524061089071 -0.20315616447293285973 0.35302428624450293837 -0.9291962680805117003 -1.0193247832501022287 0.94882559789574461018 1.1349060497145373461 -0.5808578214078001789;0.022650068126293616821 0.28476810014092918122 -0.011110050055245696693 -2.2151227810323508294 0.076818347628963626339 -1.3036454085120021684 -0.10455902758999556512 -1.2216462258110944994 -0.15731633139929038223 -0.49361956014454533292;0.5644909701811797742 0.59877907115550155215 1.1884941685816161616 2.4629055580183778495 -0.60240856297820577492 -0.659146891619951103 -0.16665009000671834882 1.9154751570518249171 -1.117213789591953832 -2.2073311334938470196;0.55701709937593801847 -1.4622306217881444468 -0.91607792761390183234 0.41906033287229560447 1.0954938234409146158 -0.20769304473259320165 -0.45307798688475153792 -0.043527933161810687668 -1.4245526518448794473 -1.1890799524646171736;0.39984639469501764841 -1.1137723892339095322 0.46547843677194128409 0.056017157417561760924 0.062606438152082583004 0.43606592337384353364 1.5273349953586858874 -0.22117616001479695198 -0.39052371492453302748 -1.0763795949755432524;-1.7576869151790199819 0.67215223285562653022 -0.37294474821099038442 -0.27420061668180473191 0.29214176732398577929 -0.36664919988553085206 -0.5092671670329561584 -1.3356834657317515624 0.020742942716725595864 0.869024572093284986;-1.1702286516845061826 0.70158520484694664177 -1.0073399519594612439 0.47870023074233641891 0.53033733193786514182 -0.68403281795777781671 -0.20687948148934842685 0.51514913998887845725 -1.1051092731626532828 0.61729561855688508398;1.7414991275866960052 -1.5936077250887072942 -0.55979830401535668472 0.28029829721584220703 -1.2320514563398479169 0.97784170811084125674 -0.16090045787364865015 -0.76827396279354254194 0.89415839732269386531 0.21275955793563464113;1.7152712912720222693 0.75135079743655941442 0.29794284985109076302 1.4466283407776046044 1.7346415298612882783 0.41374809519280525416 0.13532452528543909009 -0.30911104443716957979 -0.060126654487817982053 -0.70079374598251198414;1.0673922425788775481 -1.0086414386973361346 -1.3097643972924588596 -0.27241651122657661865 -0.0029658132636034544721 0.27221126233781467452 -0.016018161839368501298 -1.3557637552204648834 -1.2054489794512690537 0.42101132871148538861;0.74373698014274480794 2.1337819155042625496 0.45952130366807641959 -0.16589194520462077764 -0.93854243528396574803 0.34637038168459999277 0.44642018518864817755 0.40742366160932214081 0.28752596828433779619 1.075069311261613425;-0.21362361030126064687 -1.0498780811774379718 -0.12091796821866032663 0.2074682587580896076 0.11190819489607577164 -0.87328093609672385877 0.073067920644600783953 0.19271804321478747113 0.14155270911457012994 -1.241885364999303798;0.64072133274446518847 0.15322486431594892209 0.11416005121630970476 0.37597875240536693386 0.59712497535292086148 0.50016390066688887206 0.52662984659842193569 0.51182528983813257994 -0.63745034520502696918 0.23509873757655969095;1.1245721834708297671 0.63972224603810967647 0.3184574619040740906 0.4948478995616054088 1.1739974668787920287 -0.26402815992503070319 0.21234513433303003893 1.7116771251731066616 2.0507421953515057034 0.31617296294772695431];

% Layer 4
b4 = -0.041829853079591715337;
LW4_3 = [-1.0270941274116767161 -0.21724179209881877561 0.0036367537080323926457 -0.0083357788193378079544 -0.016935522119812619624 -0.046790244105496391069 0.029577907048996633643 0.0044371021568038754995 -0.0054094091523011391537 0.81666817077132236591 -0.058467837371066880281 0.036621825742423126659 -0.030903950230435461854 0.0041001124813079305176 -0.04358437158786110377 -0.01004261509511913085 0.061230838777044903354 -0.60973815372833273241 0.031678958806802291759 -0.0013614148268520794537];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999934;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
