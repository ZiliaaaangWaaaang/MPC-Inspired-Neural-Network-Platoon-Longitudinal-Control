function [Y,Xf,Af] = nnmove_84(X,~,~)
%NNMOVE_84 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:05:55.
% 
% [Y] = nnmove_84(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.70139767883548;-1.99738196042707];
x1_step1.gain = [0.053913604005474;0.149967019141203;0.500604127399131];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.4035925563281552719;-3.446278160754468356;2.4790559699983796271;3.3705968927745297847;2.4308182128089388385;2.1045439902906410978;-1.1977060892352744403;-1.0850384251111457878;0.71176929030118962771;0.32005591990148679615;-0.020587738499023625766;-0.48300978671684036136;1.1125315234545998244;2.2604284037517077266;1.4696338812105524951;-2.2604197287842842101;2.8333776032637443265;2.7099782787964166175;-3.1316522704069877925;-4.1127688106230859688];
IW1_1 = [-3.319247251269271004 2.3856020259295398489 0.51080055923082368086;2.6918802009338622661 2.5910621743535080519 -0.52012152762988572707;-0.78762278409847841232 2.9142197156694145121 -2.5180449983625736721;-5.5992326522039901349 0.068455394029888413931 -2.2674791271169936202;-1.7879461075522373736 1.7460957556863256901 2.8717924110777808266;-4.226495310782903303 -1.3093324455008990004 2.1497088653153757498;0.31810510171721106953 -3.6874325639768623653 1.3068713073959576931;0.68705386238471188864 -2.8727673533771760361 -2.3073737695276101967;-1.413999576068643016 3.1477059727214431462 2.2063370192644673473;-1.9857801653930677865 -2.929200184968748566 1.5262230134986989327;-2.4418628187110251737 0.71128015707743030838 -2.1065260359196034123;-1.0265121558062519913 -2.9370356878431818082 -1.5732740831413534188;3.8960770906534074598 -0.66855341560653269717 0.18670613725210127853;3.0736490192903249685 0.62343783318870926724 2.173490033039645386;2.6914232356900558152 -3.0729529575559504373 0.16572983705644911412;-3.8895055178290118825 -0.80378202100771467542 -2.0013528278697974017;0.3564175384715835837 -2.3939936536477062212 -2.39980156617989282;3.3021422567333740261 0.83559005582768686171 -3.0693808863448479585;-1.7527980213209648497 -1.6992083142648657379 -3.0134646204743176234;-0.77584633764151167412 2.3712375314938376469 2.5202617240493871975];

% Layer 2
b2 = [2.0523150068495881193;1.4893984870674688015;-1.1425214648420400909;0.20737065640416268986;0.34949333692165385212;0.029844669531530539086;-0.70041875342873871624;1.0241555452645547675;-1.1947649916059099873;-1.6459390705987289039];
LW2_1 = [-0.22160296587054445494 -0.12421915673610933739 -0.28811670914634429641 0.19030274550824116675 0.15445803253254489218 -0.13913849432373201487 0.35523940073359544511 -0.20584454527093071219 0.033840392861633268595 0.43656473009660545781 0.23220589069792857417 -0.11251936579821268658 -0.26849893565129379081 0.41335650225505454758 0.11572000083304129214 0.66018684404069571947 0.1502944946771114787 0.65186140905960543446 -0.017947202849591187973 -0.14878705959060442576;-0.76104246365700667365 0.13618412776180677248 0.082157170655368455536 0.11976367984036336012 -0.091980356449064784585 0.16924887496036011836 -0.050742233974782773032 -0.042993854367715383935 -0.54540344789235239986 0.20359555868151563152 0.30318192991426701211 0.19896355098207824108 -0.258039386638986179 -0.3263707860061741961 -0.059539275726974219549 -0.46150464744408403739 0.044211826393919420597 -0.12020207294849535873 -0.22304991736038043415 0.053137267271341138974;0.29894198012236500306 0.49240234970506563394 -0.5221597087095977141 -0.36627909690268362075 0.064035065246484002 1.9329429332032903588 -0.39491022531947495011 -0.68852417630782414282 0.54036855092826185931 -1.0898628158200867055 -0.09773559399861757313 0.13259326148228137154 -0.023600780008978642505 -1.5304473467819457166 -0.061641314225709585572 1.5777559248284926952 0.43242430043003865503 0.16582730678728169194 0.43230463972409527429 -0.1294687205718722256;-0.89872319396072231079 -0.23471697001902913637 -0.032831504464648789132 -0.45842504427167340975 -0.26655483928322937226 0.82111555626094956395 -0.2007680416757933739 -0.45916851297615624006 -0.6261035944169336398 -0.0062645373999876789728 0.11907874127410474074 -0.55076655768599314111 -0.39481705909685788081 0.80432317963555977069 -0.26966245166943808576 -0.19479216900873536078 0.10241555272115376862 0.37851318582052345674 0.40448062982819854572 0.15469782051324942884;0.87143136810636834255 -0.032952965514062085295 -0.4148663957429025162 -3.4469345354960236882 0.20985828642373094421 0.22357985488816423114 -0.30782673330231513642 0.26318057313552256637 0.19808858727923372989 0.041019171785122390816 0.58438337268610740516 -0.40434973258516582195 -0.016135821263203391218 -0.70099338791198928522 -0.87540071944291586448 0.32148783842911310416 -0.25072067891640897885 1.8679033310354609121 0.74325003933110089793 -1.0468123675551475049;0.27384690813471435078 -0.22180631539404002672 -0.11278972802505320139 -1.0671084532944297152 0.019413613277658732514 1.3289523280489001777 -0.64204307580252462095 0.21693543160442013695 0.63674917202278669137 -0.50567974652063663044 0.13575450892766971478 0.30731360112321809419 -0.49712619710921412963 -1.0235091167682275337 -0.77525755498363013718 1.3295532150159627971 -0.017210965041811836923 -0.67882325150510214318 0.40726631088562514904 0.063675619036027614195;-0.39245120028077962182 0.35281464801792433716 -0.55194542695141446398 1.4354662175562451498 0.15313506737096038712 -0.4656457896360365889 0.51766107625736068609 0.2832998555654357431 0.16592837433472776287 0.13569658991113828228 -0.26058186791959753181 0.25970945804080447505 0.14106966825056313497 0.43839771535076360598 0.53951237659745321373 -0.62372236037953687759 -0.6617356809874189727 -1.041370318554283525 0.37784755011151116566 -0.34383173555565077484;-0.3673498394113298704 -0.084588830680399879069 -0.22326783053200915941 -1.936020840378051 -1.5200114272386724412 -1.6620573235420930125 0.4458143707473810613 0.037405541211766868415 -0.73077051437099316278 -0.78381960205347600557 -0.52492934021347359419 -1.0819553431175268354 1.3078119962043637248 0.19935051455955352107 -0.78825185080898074741 -0.83119117754547777732 -0.31144462058319904996 1.7734327251951402804 0.15283294500379973613 -0.58219365189589644682;-0.29720729625298525356 -0.2471957813936973003 -0.046540898884141743141 -0.63803921315469924735 0.061056352129056648548 -1.3829975623515711192 -0.5831294519329256465 0.10783017149122561817 -0.45712067912815151915 -0.99907333779308460375 -0.58763366602683553275 -0.4375114540452297307 1.0195038201630710617 0.69720170431753525353 0.89800426800731869559 -0.68414412974532501366 0.10528905924179463027 1.6134651713726009259 -0.31037176472303756869 0.36718662157840520344;-0.45137435017877491905 0.34563409593940236375 -0.71832953858180714768 -0.34859715945583641394 0.014064647881745098376 0.53622985929715494269 -0.33734984108776272516 0.69263245093753589288 -0.44353985574252952073 -0.10453955609804353732 -0.81231700091670255848 -0.1981857926672778436 -0.44873936268016262341 -0.24204536929677902823 0.3751641407354220914 -0.46452281483189850064 -0.31596010788450373807 -0.1623163845713206932 -0.21919052983115713817 0.25276896392902786781];

% Layer 3
b3 = [-2.0731336468069341272;1.6671292049013317627;-1.573265572655185851;1.2984752605497780209;0.97232515759206761263;0.65077179514037253316;-1.2381424901831004082;0.48026695484533499236;-0.25069633499707627555;-0.24347207179048338532;0.062325316957710062693;-0.51778703871903253297;-0.53121190157274400523;-0.76148489915587413979;-1.0523369437966969553;-1.2019012969511597699;1.3409175256308054625;-1.5205083445958480493;1.7396920505837536464;1.9728207081171567072];
LW3_2 = [0.78101838835834991315 0.97081573014812660993 0.73366532898963388032 0.33909670520460888365 0.46245820097214085376 0.23032956775695048734 -0.32757129429165293688 -0.66420127472839440852 -0.526283933654234648 -0.29648523331110682166;-0.93492866310470434943 -0.095287685188268342329 0.26653742377195904778 -1.2450418814411450263 -0.55733325190882843092 0.30131932489739171599 0.7024875064695381699 -1.2007520544299810084 -0.6074735859865935117 0.40290522067681427965;-0.051056030330422434715 0.77867155491089912189 -0.54103502682422444092 -0.35459023364648262211 0.1454352510227129025 0.42670746176455931487 -0.35544693598050969285 1.0490170163202545695 -0.82278327320281519075 0.21525015363293220627;-0.20466801269086074 -0.93143598365789326277 0.33032916031182124605 -0.67349017680245437667 1.2212216035767700095 -0.27190672587779496361 -0.82167667987603520974 0.57664921999596152613 -0.28763709882394278283 0.0014488405600687490407;-0.16740606956246464887 0.37970068554435404407 0.67419927287509628933 0.65381751909907293019 1.1891969652474292385 -0.11609570347272343827 0.50222580118495396828 0.38580794965063214264 -0.48390304414561285951 0.79933059369136683081;-0.86377521278678792704 -0.41238629321750974732 0.88346870674789879097 0.33620401352563306085 0.91557194156370080851 -0.28145543310004861315 0.27834683334627369211 -0.90590339096343530656 -0.43373898370715896489 0.72462694890170065154;-0.14883184819408465382 0.096404065606324640392 -2.4024417007181653183 0.82388490304766093253 2.7374932431431275859 -1.9116457154546691033 -1.1926698892470186664 3.2140262465975739659 2.5475881339979702389 1.0529994835932905417;0.098978958066439387542 -0.10840072917929628737 0.36793069972063285888 -0.46567660884654948905 1.1487872952961388773 0.084521307148878746518 -0.52797228416869868006 -1.1307158432472395049 0.32606741742562961317 0.13625851541070282957;0.18955669936068778036 0.88848519897113797938 0.90922421090175609137 -1.0142032844441115635 -0.22016627471621805223 -0.72010738989699818458 0.86978770203989075327 -0.37715764653532535267 -0.48745026825066750664 -0.10245501999294132078;0.94785674646917572606 -0.15693745203638254093 -0.75380449827050255429 0.10335278792132114589 -0.23863197261177535036 -0.81039419962348313575 0.66646314191236855073 0.47854312710440727319 0.73085005235439259863 -0.58926199964816416976;0.64246472389778108703 0.54736678205854372159 -0.16645781272218854174 0.48662128717589686611 0.64098868455638124964 -0.57757315492297334192 0.29546029092311087982 0.021314928453155586319 -0.54096032371241142833 -1.1697616981460081664;-0.46425784237503708862 0.2451965282175954941 -0.091059351823398623771 0.97019253401637606249 -0.24185588528827117738 0.45402815130878076966 -0.2105418624137504191 -0.33411385285205363882 -0.65822427910590630695 1.1542470073962523003;-0.84953811011876090298 -0.71804011813434676093 0.26523733903093371644 0.40846283539066463586 0.49374980143840913049 0.22741153888588405696 -1.0962279808568611283 -0.13342677918238943224 -0.471573459432017561 -0.5222058371807898336;-0.78690586053754352225 0.61475003214253742811 0.38838021267242184287 -0.28368726514250652837 -0.68626348770702183533 -0.60573738087574080513 0.37770037956619906261 0.65468414564144405965 -0.63356932927044973258 -0.15030882248515570199;-0.78279626180065597918 -0.65883101598249216302 0.37337802201692271709 0.6207281054161722933 0.45468256364510944989 -0.46903322829031596219 -0.11275143394685983866 0.38419095445600798255 -0.84027731739638689135 0.66509269778382706928;-1.0398231789207694753 -0.31128408167882026802 0.19964341368220522854 -0.42843557793061187722 -0.7719453980529620285 0.22422310959747074333 0.16958902076329498976 0.80392686557629222666 0.82252298811756696661 -0.3772900482483992346;1.0621759812863054151 -0.61495983804209020107 0.57066980179456894273 -0.98514573342010014478 0.23012022899645090401 0.24605833363476717346 0.056207966424599811739 -0.31359390278016296971 -0.50244216936219909808 0.17907427337865303163;-0.48294790568385193019 0.31320938403197279287 -0.81109005595966487956 0.47108115301045561107 -0.012740032840586196228 0.873053756306043649 -0.52883625650509413774 -0.74941858513509163053 0.69826333758258030127 -0.30134595060073587902;0.14638985596929826594 0.71059264753939022086 -0.76723299048404081102 0.70936930378816953624 -0.56097152841743147533 -0.63881429831031810718 0.20040268592938298431 -0.85908108182064102376 -0.04836770727634019662 -0.19297875938844891164;0.83461691118100178599 -0.71374594505306632186 -0.93664516238258765934 -0.71571271015487702982 0.32703976119371158671 -0.39809030728914390762 0.18992149424939389069 0.45824584767840431665 -0.46819615758859067789 -0.26375335718310405353];

% Layer 4
b4 = -0.28278631088936101445;
LW4_3 = [0.13590819671747750297 0.3560603392988680449 0.0038597575218726476454 -0.092371431126934022693 0.015234481272766192683 -0.019976471091003058372 1.2227062168171127787 0.0025948000839045022407 -0.20770920159446090714 0.055440138083454479356 0.5085103720307707631 -0.25194692108446364864 0.012730584378918545496 -0.027712633419353076975 -0.2099848905833664181 0.12862318281246087892 0.0068392010078688406094 -0.070245462609684866662 0.10191200513790164839 -0.65242292869910589737];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999934;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
