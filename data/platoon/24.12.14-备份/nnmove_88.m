function [Y,Xf,Af] = nnmove_88(X,~,~)
%NNMOVE_88 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:06:03.
% 
% [Y] = nnmove_88(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.70139767883548;-1.99738196042707];
x1_step1.gain = [0.053913604005474;0.149967019141203;0.500604127399131];
x1_step1.ymin = -1;

% Layer 1
b1 = [4.4054968505994631656;-3.7761150327755550471;2.5253852566709285021;1.4144351025394743537;2.5986114718754005359;2.6202297947918058441;-2.3124370571212291559;-0.88124860495390555659;1.0728746940808979726;-1.1214208975344306385;0.39366776251530394282;-1.169906832288931664;-2.4284551972581671642;2.6169657014357774472;-5.0702917021232680739;-2.2125539478227178591;-3.1724784483184791384;-3.4784011233538203456;-3.7249370797667555877;-3.7890695962756444359];
IW1_1 = [-2.2505802915547752363 -2.5292204464326721869 0.060375761100616924526;4.3646244055996099576 -0.34267671873173111141 -0.11368035844552598634;-3.1117090907182318738 -3.3144838861655374629 -0.12879619537716335831;-1.0652170642429061864 5.4961448883873602611 -1.0020185624306363614;-2.6265712092906081665 -3.1654499172553083319 2.0058354926891408532;-4.3865450551910649679 -4.5515483798859088793 -0.94233134811842278467;4.1025427068652238205 0.66362951815799886557 -2.6019280748256137237;-1.8692692575799128019 3.8800468247235833097 0.79727574987678295759;-2.9650724074690777421 0.45265283330179478805 -2.4411183227465476087;1.8792937248043670717 1.3778478931048581124 -2.8402809092447891537;-8.1239128321856171056 -0.45966841752473003302 1.2662299403467618397;-1.5804173723006214036 2.098528378052540333 -2.6554448458304871217;-2.3896097857688292088 1.1528469542490291655 -2.0732368781860484042;-2.790313836171098405 -1.1226559450631048431 -2.5105035080576389994;-0.84406858166592191317 -2.3797234128143167631 0.28001032625606459003;-2.9048071243509987482 1.5552995145298862401 2.5977286258991005852;-0.63023683106546701804 -1.1659647808906665745 3.0035531893122517921;-2.3876645546225634398 2.5732525531148202624 -0.47815847171411635097;-2.5295509713174260114 -1.270742386432100357 -3.9182137030157067059;-1.5492880447769015184 3.0952667698568525623 1.5252654323107441847];

% Layer 2
b2 = [-1.9640453385466287717;-1.334202141000079056;-1.2321562963134113922;-0.50940813546661645184;0.11125793873460074201;0.17066324171894245443;0.66006339406865943698;1.636415317002661185;1.5624813378448147994;1.9139728110532685523];
LW2_1 = [0.16105849098371832762 0.67886188442106265573 -0.8705009826503977699 -0.53798870699364609305 -0.16739125710143457071 -0.16737038763473086056 0.066058543162142435712 0.027991706921662772023 -0.31731657056146306273 -0.22014610172740922689 -0.0066230832157291932849 -0.42077649107353143343 -0.43199528988528484996 0.9304599609760703105 -0.049046341031517587394 0.17988604729256627013 -0.037194031697461542307 0.82875134051860188666 0.54891973567927443423 0.16137421385372405225;0.051341013574546685849 0.27941173400136348759 0.11617406578383754345 0.12356866874448763083 1.1766790507531892374 0.13044515612361920476 0.66803433284508983991 -1.0011899517116411573 -0.42782333557100499233 0.16728278470887558704 -1.3492397263571074273 -0.34134267830722608839 -0.068852677522315067216 0.30899957156335883246 -0.02478761151906240523 0.64839782227809394932 -1.420744620345790743 0.52959956416592823825 -1.5350426871092379688 -0.043545967326645784734;-0.17818923752980220243 -0.10495884205024574864 0.3626407692714735953 0.025602352655823144151 1.2813638920533310106 1.5783131081723631439 -3.073696160795471144 1.1400723087921982302 0.27423012587043915644 0.46778188600172815326 2.3395816241678422109 -0.3005680338067437396 2.2996133863276142506 -2.8828206104702092105 0.33705485495804954343 -0.26472652396427315269 -0.3205151172604413512 0.39329985716286613995 2.6663447050059674304 -0.34833791321319484968;0.50507800073203568125 0.65235252866333570676 -1.9549013890148594363 -0.12010096266559729117 0.99974856442388193578 -0.1990346535619822721 -0.58700079513340064352 0.56319119262628158928 0.97233107143145214302 -0.63794942517479324984 6.9076072021370391596 -0.95178069188701541758 1.0627143551452029602 2.7385967711190386531 0.91924267103399559531 -1.2383199623464178352 0.024859893964886518869 -0.001182581532585526285 -1.0484598641743823055 0.44997328467453018286;-0.23311497124852537111 1.5172888023848258854 -0.19087651782300546488 -0.99112357955247343266 -0.35773475171512947313 0.12496535638278989666 -0.97325943679521054186 -1.4972361446028574772 -0.13470243644244409009 0.58540117033102856414 -0.74855952864565522553 0.72445616027691317473 -0.10732675486597088865 -0.38213074610257646846 -0.44321585563737664337 0.30303848690997892135 0.77654490762747019339 0.31399270065546608377 -2.2623170375489900508 0.50324653638143979073;0.65685273548277123279 0.57041186887493466884 0.77932800640533639314 0.15732051727219423243 -0.46025429161154240987 -1.8270313917910727675 1.078313520906646783 -0.24051740266894719444 0.92281416833544038791 -0.56582659149349578964 1.2021842965391180691 1.0514777744004253357 -0.3741092362057720222 0.5895145653696410859 -1.3118815402717198815 0.28584552794529022313 -0.84064409768639747345 -0.39038624166184798803 1.8735715542891444585 0.096274283426401138786;0.38202063155109150516 1.0515739606129839157 -0.86613663779044924862 0.037816798554456840242 0.12341656933190769951 0.12098326754140707739 0.36375187784952428549 -0.50241636286363944297 -1.1413304958989394233 0.046669937422519916503 -0.27231238830131010431 0.38091314106905183046 -0.82183075822896645146 -0.60070148630518549471 0.88629361124262540095 0.049562595865101248538 0.62686146118634389346 0.20622974088866036224 -0.48856187124586641923 -0.7313891790226585421;0.82483242593544547905 1.9211601182005277888 0.14199818639467676196 1.2653065348549705771 -1.8295806016175115705 -1.3159618095556691042 0.058124128392858236125 0.1674755220328059957 0.1665033931654958943 -0.70128016336333121039 -0.36622592394281033856 0.70001177825115457054 -0.78341026588718210011 -0.34636957557632203075 -0.47684269682045454797 -0.0053852598107978037756 1.1359568302721676503 -0.016499701431953714414 0.21961043953436784615 -1.1052320549983427611;0.82720042550734662612 0.25211380431355101539 0.80991229495604211142 -0.42611756611925816207 0.13209102990522400556 0.45612929510754041118 -0.18721239495598304692 -0.37377710452026069454 0.62334801406149698 -0.13349561077883900784 0.21507964223015624272 -0.54416936239100854866 -0.053328397370822691603 -0.17827765344109178236 -0.4687921062386117832 -0.23106115054959000532 -0.38660919994806630662 -0.83158628288523084304 0.10712923929998305339 -0.84360191603651379921;0.54306983375397133162 -0.54161795956871749969 -0.1968180558451106954 -0.14209568068099454052 0.071573776918545425896 1.0726720407843779448 0.063253506792276745219 1.1141338341248696597 -0.16932651694300784873 0.22981397036460696204 0.44931942357885701345 0.25040033577916032126 -0.045891327143969234958 0.15246236571358787182 -0.48067089805918555845 -0.27989930466376922169 -0.77196698262531038282 -0.38322225571059964633 0.23712264288617446173 -0.71821941945674383501];

% Layer 3
b3 = [-1.5306109642911205349;1.8329770215564202829;-1.4393831787738196049;-0.98439422040586688212;0.48853255083418134497;1.3452439765320451937;-0.053586268203016998446;0.47902873145542379518;0.41384138216454957604;-0.23229381123916265084;0.20574771648484199704;0.26726989658310956743;0.29748152214348716482;-0.54949016022387542346;0.16922758836056442378;-1.5550590951297167397;-1.6843198970795976166;-1.5065347962589681341;-0.94908654710301276758;2.068217860182919754];
LW3_2 = [0.44324579986810380694 0.66233894663157300009 -1.4147648319015955209 1.4024367942076783056 -0.64175431930888127141 -0.12172103904172049127 1.1028648299046084347 1.2561765172291199377 0.91707732580749645734 0.70755550358252983223;-0.47042701036667755599 -0.81538009630475638545 -0.19828125089957784888 -1.3624178510360815952 -2.0987723782338276735 -0.21773072816452945788 0.95741623531272079806 0.47204311981252239372 -0.54994348504637435848 1.0116557261549969926;0.66922077945645896957 -0.24151651823290368193 -0.58034439855122088581 -1.6140121497091763914 -0.61642800130201136355 -1.1205716042018358802 0.12916002028277984159 0.65782138238622578363 0.87382064898137901121 0.10832776520564788014;1.2231094977964986903 1.1927968407301432485 -0.34758075994381704144 -0.97414420905987986199 -0.54416314451270231256 0.88615639836231296922 0.37874360862748523981 -0.71126105003974104957 0.90513491801096201961 -0.64018119312856636149;-0.041160953156430410416 -0.8391196076771663126 -5.5641142400752299224 -1.5483292040496399178 0.20758837817944630899 -0.56735107506035531433 0.67218793574849200478 1.9898219510203685179 -0.56659344728216631815 -0.74612138380474013477;0.20293298817847504889 0.35508224703899549102 -0.46083511862925680136 0.11118538260297086695 -0.012855177638255161146 -0.85793453840352629225 1.062037522329577488 0.51030778438962565158 1.0618193551344459191 -0.15516248377312161222;0.25582219303913900088 -0.22327235409155454793 -0.48931729648896993279 2.8987203412269404446 -1.0380589251896314984 0.59501524397046845483 0.53014312618242687147 0.25224980541264746536 1.0402586563447138168 0.97295928049452773401;-0.19261307125956894648 1.3543315900089858417 -0.38200894367796733864 0.7063781307165863943 0.47299230490692451001 0.85345389199550747428 0.27468172906226956398 -0.50724498136533913151 0.11175209278688627568 1.1380307253308477033;-0.080699708232851150025 0.57772499901871565697 0.17509234658689620812 -0.075478250264948143489 1.1721673678192769952 -1.0024010425569880312 0.15217977904014237667 -1.5707471968880859503 0.73434656238985329679 -0.70127600507341070202;-0.97012296665987818312 0.8604539593424288535 -0.36545098842443868303 -1.2319325994605669905 0.13059985582116614977 -0.83041217562464786361 0.26544666183463527798 -0.69635734974123231211 -0.25956564867213516301 -0.72971253776947853087;0.058357060490552073451 -1.3997157035124732083 1.3002646542483224934 0.012186420559600954008 0.47114762411750921167 -0.34021434940928085844 0.051479019726483422892 -1.5580502969325118467 -0.35222244789225648498 0.78051448741601747727;0.75923615756991258419 1.2382857031808751636 0.85359991956159453341 -2.5300420144366628783 0.16523197399495614945 -0.56536163755679536003 0.48029590083187434502 0.40715487217371759687 0.26194658665821396459 -1.0121974365023942433;0.32012111283982219723 1.5582648523721851497 0.0030042115077193610323 -0.24725342852761511558 0.99491581616357915863 -0.73140736931787397879 0.14768967513029973571 -2.0063837300896683047 -0.54580654235626713255 0.185218643677482947;-0.89606018160817957341 0.22981394310290934047 -2.0744652500412623652 -0.69875305835557943723 -0.70948955861615858876 -0.26308599379556690812 0.98841134364766691789 1.1243976894974587744 -0.78996985707087896689 0.48142746894105825639;0.85779831315804899727 0.40088582258263993907 0.39640173501768416475 0.075550393964401676983 0.54514043345143903263 0.52250708346027430196 0.44105024907607903728 -1.1282623185858351444 -0.72383183381967886039 -0.15318243612224957673;0.18924271140360088284 -0.44078119972575030561 0.10534265439302085976 0.099263189663390830053 0.58989464733291596676 0.63834842547974701699 -0.064839830080048926897 0.42065786703273566616 -1.4062392846946898395 -0.82441956408084438035;-1.0832285456443897509 -0.42083683563923057758 0.48488110602695361218 -1.2792510137752757249 0.64923714726947334697 -0.65819106071340272024 -0.45828473444796608005 0.12493720950660687496 -0.18620032062965777286 0.63887884076396150856;-0.77814157706685793681 -1.129397918732568451 0.067474505470985310374 -0.26941787228155134049 0.36916354825788799676 0.6128103820230849097 0.73990223648512543075 -0.65329289898833386996 0.5268417506877587364 -0.083444458307273067232;-0.14006879198449015411 -0.62921368291547841167 1.6359017455074227332 -0.89405144573030415067 -0.40005185710161372814 -0.85381452841938354492 0.31091761995858024914 -0.18726259902214181796 0.27860837700886714741 0.70112178297790417325;-0.8460545298955498561 -0.45381128838849971174 0.31324926748586939818 0.34261751886991009819 0.68200727381917380931 0.64751354448624531823 0.62524546103626066351 0.86832402228326166505 0.5783949862660630048 -0.12498213145707523508];

% Layer 4
b4 = 0.35281061711432681882;
LW4_3 = [-0.46526531292912193249 0.4769414509330467955 0.48885798923235063151 -0.63744540754023559792 1.3210680633905369508 0.41582060207583049216 -0.69132782041356466429 -0.2424201792087414542 -0.46266409728543361757 -0.56631229821013140402 -0.55721401047146601471 0.68976403987368206661 0.44545640590338031473 -0.67496164894908272647 0.67928271657755701085 -0.17871186947842268578 -1.3553519810380554311 0.11573058282038979627 0.030990641277864799941 -0.75940362079980172627];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999934;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
