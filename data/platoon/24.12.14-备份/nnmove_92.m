function [Y,Xf,Af] = nnmove_92(X,~,~)
%NNMOVE_92 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:06:13.
% 
% [Y] = nnmove_92(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.70139767883548;-1.99738196042707];
x1_step1.gain = [0.053913604005474;0.149967019141203;0.500604127399131];
x1_step1.ymin = -1;

% Layer 1
b1 = [-4.4413260583806284387;3.8471717233971940431;2.8126269156712062625;-3.8470051465794772305;1.1171680085619479783;-1.9951426735147490543;-0.94556425849627823155;-0.2027752674714896064;-0.16592611032114379377;2.0484286722256119795;-1.1759746204058276753;-1.3743328527346256873;-0.89403053961898182322;-1.8172077295072155412;-3.117023205522859719;-1.1024005084597165993;-3.0614211252489629267;-3.0013409096137415588;-1.2594920738179924413;-4.2011261432596809229];
IW1_1 = [2.0799309304513067254 -2.2962258882773025626 -1.2705040209609643753;-0.7744516849829577998 -0.067646491799399965927 -3.9795162141276767542;-1.105786193695742714 1.4090780920234007301 3.4248096086382426861;1.8278961671313722626 1.9100600288930789095 1.7669156795110023683;1.0587891498967916259 1.9077922519060570572 -2.8379855913417126878;0.48358487592610310823 3.0958926603294316671 2.2045108298380524658;5.4924702683856985175 -0.22670900031987131773 -1.3223980902614711486;-3.9077647128965358192 3.8563179361298534076 -1.5560525491425163391;6.5026730013250535478 1.0402672819288019124 -0.84881116062367367725;-1.616373626205573677 1.6080882191740877296 2.3217923005077127918;-4.1950118380958043574 -1.574125134307888807 1.2372065124918241175;-4.4220364954371644828 0.74439710786367674356 2.087676481573836007;-3.075769011097906791 -2.4576247150564531907 -0.94771341605519165974;-3.4503432491500962698 0.47238118274554541376 2.3037231575456789123;-5.1166944184186160527 -0.4145066524827644705 -2.5658311426670579181;-1.629386925084121529 3.1257496584614417046 1.0637388904199909234;-3.6216082164285148259 -1.8431195714675145947 -1.0251174825706068638;-1.6861838391352039768 -2.9883382178908077798 1.5157330529606147795;-1.4730139304964549041 -3.5011590575669746528 1.9463354825210315013;-2.6416611386072554879 -2.079663257396139997 0.85820039979136919506];

% Layer 2
b2 = [1.0259908803603681182;0.77063493059323373569;-1.2528826980715410677;-0.7709043258508642138;0.081000781268395077861;0.26307912360673285646;0.70292472906603287175;0.4091214283105478744;1.6590017410482691407;1.3424873506578671734];
LW2_1 = [0.3975063345388934466 2.3666483593958402842 1.5496266881597788867 1.2656778524643381711 0.67554144380473635234 -0.086661237992886205883 -2.8096415122801690067 -2.4823273277561774819 -4.0034306532249530619 1.1931915177963021701 1.6964195686249610162 -0.1054977745373079645 1.8244590685336556923 1.0739755969158599758 2.1449493132837900156 -0.77443339809295519416 0.64409925482810170827 -1.2613031481560819103 -1.5014548683949247021 0.84206534546312417078;0.080725607527547663111 0.3012503848378869642 0.51879803394929191462 0.8129613335107447325 0.07233055094152640585 0.58186895462222421038 -0.42606542143303682835 0.050530906130059234649 1.1794025224153115161 0.17366869207889545912 0.60448480828712314317 -0.37796356134053327169 -1.3382104318615604122 0.036112165235447621359 0.60352516728483629471 0.63638885226825381292 1.409739796950726376 -0.44243798410762374962 -0.023151265884969136899 0.26590105471873259901;0.36918253714000781596 0.2268309886409784204 0.41273363583109223818 -0.28076058840841311426 0.418492488963062792 0.25828907695560093805 0.32518465066030571853 -0.042219517646454540749 1.5959379896494492179 0.22576888477094125829 0.98942109162999236638 -0.96172872885056515102 -1.5911001331948462223 0.11168775708384090506 -1.2438534337596844903 -0.74632269286889763027 -0.26089786327676300903 -0.18577355244831955661 -0.84716803956792730013 0.51307396812782735118;0.4556694069679654846 -0.1024626590843187024 -0.035970620239528447448 0.11303396093067120953 0.71340114171512991614 0.56029828673496673286 0.90102700034328553347 0.38430589281461052797 1.01147830481520562 0.16314007707420025151 -0.44658783188535577935 -0.45972045027298968911 -0.84729137643082164111 0.1975563546742106491 -1.820317973497264763 -1.2318718348128696594 -0.35140311560519910117 0.49920473143242755087 0.47571501401604887604 -0.34354840340453768333;0.2830558856695609693 -0.74139424179249346913 -0.97475911423487715535 -0.4714013160358215826 -0.73271139128277995578 -0.21284911362953670699 0.43601933281518762131 0.77255470247144453211 -1.9433498125240544763 -0.2332255041192098366 0.051650862724825302719 1.0353547559967084535 0.16326868190553162075 1.1543023670468379738 -0.7181214672309824687 -0.44673244056859628959 -0.29664201155556069178 -1.0062769266912781063 0.13096766714576371649 -0.42633160954047039093;0.32081633053982405723 -0.87420800268452003579 0.13910337312633147544 -0.060638855297184657278 0.19027047192537024922 -0.83772647548239032034 0.3521951191938602066 0.10392570863301557604 -0.86515294266078557328 0.22750134055354823137 1.4199523902647022133 0.94029899006590089705 -1.2542738403163380401 -0.084457061281100864747 1.8778374351782887164 -0.49357382097457908054 0.22152497049969302467 0.26684296740462309927 -0.41434800991919629176 -0.37572755501830473746;0.44342784846296445789 -0.81780257764513242247 0.32200149885247864034 -0.48789894037480802114 0.88061643438941605844 -0.1925406737719968786 0.67141498885868677871 -0.61740149176047876001 1.1336439718048243463 -0.1250651297277775853 -1.2415393482125498537 0.1462337566624799523 -1.5572517548398361331 -0.085343820772765005556 -0.86862850735577612493 0.049017671552329979134 0.84711633878350600657 0.37198425214306385378 -0.34893859084203848742 -0.032961516166611984358;0.23003475511571611078 -0.82253328775646050719 -0.22659210967034548734 0.087811703376170460733 0.49811510123460328581 0.7918637229312617265 -3.1530353925843805918 -0.51182170309647612161 1.8723060860952174256 0.2736910367186862203 -0.67062169769613899639 -1.964908185659768769 1.4496741616444441814 -0.85788013328430268167 1.6499041550781721188 0.51061399946602881172 0.37645877865166149645 0.34975131966864686506 1.2376425608904895181 0.66052441902032954513;0.093432050405926517223 0.88199642292528590559 0.21382025030049506276 -0.35972624999846858351 0.55597935662135034018 0.43806759431307518149 1.3988370815847050999 1.1234273838919364152 -1.3941745203229938266 -0.25091853571125699585 0.52498004971941514274 0.15068818548133811053 0.37420239089498474883 -0.40475242675609202081 -0.55880235711204540028 -0.50294698052031805435 -0.82690524351457983521 0.14363935679530406841 -0.8010020238463996245 -0.73119317744708367535;0.31911906122631916727 0.44826950169499579779 -0.23737626898196231839 -0.13750683629082202653 -0.10746089504069375464 -0.17725520128197391756 0.35989773588869100607 -0.3399523532990062491 -0.26108544155577567691 0.55271488378521438367 -0.13130701380819420621 0.24538819859052554695 -0.74020523235432333919 -0.35361060272417943473 -0.87572530800081893609 0.04061323020747713286 -0.18648521492477726502 0.4078826758610742953 0.16709913462607695056 -0.014200070762245966399];

% Layer 3
b3 = [1.8086437461174866836;1.8470420886593752474;1.6990555122057946491;1.7163679543819065909;-1.6328655732954973079;1.0404531360634530213;0.90240268756260000327;1.1517584592874172689;0.43841513641057999751;-0.91068191991219982206;-0.79211613399158786741;-0.15410461257355972942;-0.10559097728735866717;0.56632941677021575444;-0.69167201232726616134;0.89624635673623742615;0.98014093245818034728;-1.4856163910939070849;2.0424414155655501446;2.8199701097947085238];
LW3_2 = [-1.6103402749033566277 -0.73318997217914927411 1.0873764217194590298 1.1793603883022567569 0.077267260769697379552 1.2751282199606450707 1.2088079789309389422 0.12970418593530660956 0.1589844313323315883 0.6717629624856380488;-1.8258693878417497913 0.16251277921808160443 1.0685692719682486906 -1.0344528340692351609 -0.80206215098553101939 -0.25834049378534434949 0.077384217838517677102 0.67567328140388394075 -0.25184226403467635524 0.022798001031611517253;-1.1179080503847491634 0.5106614987564040975 0.25399803602083892429 0.27340182948766872384 -0.74583527928275250574 -0.37518360782930015862 -1.4090937199083113374 -0.13863733834843161574 0.4633298563966175565 0.12358791084277874484;-0.45208681391053917586 0.360189467814440889 0.93349730482238280072 -0.16752240928520542584 1.2499022780555599788 -0.49692213053196127026 -1.3335680977499586586 -0.42021005559411772623 1.0543012663909794302 -0.099378202632478665479;1.4270950413258058909 -0.13232008128512748324 -0.95154074577843572591 0.90924136738644412148 1.280562338696711544 0.62506202676342359492 0.14797464816919184138 -1.0479646848049553043 0.9131700334170781419 0.53132291578843393598;-4.9755345323300410598 1.2226627456435950059 -0.11241233547655642144 2.6100436936765207818 1.4633433539649758348 -0.74138410284156663899 0.34403166940838725285 -2.4309151190861713054 0.83372783672746431094 0.19584749809849597013;-0.51619468157014891663 0.1943314705100130102 0.4803461878782216421 0.29385032457869203482 0.67951284477056173028 -0.86083398908405472927 -0.42177613750050690911 0.17890571406512534303 -0.10112842667941991659 0.87118894664821500129;-0.18065704520054901017 0.20617694773336314729 0.57654913354307135709 -0.38485680540047267906 0.70456883673914671995 0.36951464601583655645 0.73289752500903004861 0.79100040381737912742 1.5201393206965843063 0.53001117460581381735;-0.71428848494844299211 -0.37991888722681543822 0.81767404567430934659 0.37286731751196983131 0.87939695809628548595 -0.18904395477763005773 0.73939030306132724757 -0.16756889429827712124 1.1186390767491649623 -0.82395031014311803652;-1.0915034844722666385 -1.5686390936076470837 1.160342932291413609 0.018165868991033548574 0.50025647367762204887 -1.8912545076058651095 -0.69398675659917208325 -0.71422397271071469405 -0.67026167770173228355 -0.3383837522973395795;-0.80561660760767384026 -0.44255013430746620307 0.13438480936300958857 -0.85147537715247645362 -0.37767907993774957331 0.071018423390814211515 -0.65233871581418267915 -1.6644865703563516135 0.71631144018518277949 -1.4872821988487014977;1.3398764420018358656 -0.28908697928070059557 -0.5633804444486008034 -0.034592585989232996213 1.0301920708508249813 0.75880323720005427024 0.58323842552681237628 -1.1359317592482172099 -0.62093185226119185227 0.84978325268577936669;-0.35154063612694014251 0.064882180347489284977 0.73288342453396482234 -0.3620524560626187105 0.23216355791706433376 1.4276508040935365074 0.82775147348919486667 -2.3680344537863819987 0.80954942744413960209 -0.76543096646733088662;-0.065190441685780420311 -0.6770050603203090489 0.83151770373135491798 0.68990419200431696289 0.90036012301959766901 -0.8292811531503230249 -0.5410545903298485948 0.056580475157568622946 -0.28186221824852858431 0.56177870358820913843;0.36271579965758948827 -0.27233750500966347197 -0.4169516089078919574 0.62492028189761095192 1.4034945629078019458 -0.48897290853140190636 0.15599925154073882028 -1.3952464745027515214 -0.49521087819140280351 -0.59423426981280769166;0.69140774210223066021 0.11292833290717495254 1.3636196402007068063 0.39090793878246921089 1.1709816889106401394 0.2463385607609483996 -0.1806585499662316241 0.49050169895485395966 -0.34133581704018622904 0.86372170102991141505;-0.0030106378756538272612 -1.0517482359711038953 -0.59450350218166536642 -0.060359108691917295886 0.31736670626037982723 -1.6095151014930617617 0.23067548954907080017 1.1166888134466754767 0.25531578504336754909 -0.60020758173273680569;-0.39265311539648678485 0.02707086194063778456 0.36289471990432631276 -0.43164581483612768364 -0.58250497798007039307 1.4118194443327265475 0.47324401802202159528 -2.3211860222790066111 0.83806253901389005101 0.55906610587494975917;0.65875525145083968503 -0.20901109195528391749 -0.086100332996213696513 -0.72183364141203587572 0.67050164034563486393 -0.064911981515438282875 0.85786035523697623528 0.18605019935242192441 0.55849189420111100546 0.66313929974771368414;1.433162984011453478 0.77573750758771709002 -0.29689037525120964833 -0.046619216487862984166 -0.29338259310571807026 -0.26950211080027947075 1.9741677423126458013 -1.2267985193978743208 -0.14332290722977664155 0.53949041333009628563];

% Layer 4
b4 = -0.40749051320479723337;
LW4_3 = [-0.020856788461385979139 -1.2875894534319991536 0.62779192622955592995 0.025655949611573379554 -1.5040759049184893037 1.0098276749793930751 0.11347854392546539992 -0.19612211984883570759 0.15537425377928085202 0.01887500413221949655 0.16179609012265586121 0.72019128231513207528 -0.5050207232171042282 -0.16235361158080108268 -0.46660105483207969801 0.29064559600177247711 -0.0076693312040215953426 0.5274320286909265354 -0.21318976271093731389 0.023791885769085290708];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999934;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
