function [Y,Xf,Af] = nnmove_95(X,~,~)
%NNMOVE_95 neural network simulation function.
%
% Auto-generated by MATLAB, 07-May-2024 19:06:22.
% 
% [Y] = nnmove_95(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.70139767883548;-1.99738196042707];
x1_step1.gain = [0.053913604005474;0.149967019141203;0.500604127399131];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.7155893776704140841;3.2387035341068903804;2.5807621599600989448;2.6747815655682600777;1.5213667819108438461;-3.2491982608935945365;2.4883798546059265888;-0.38983564285268662575;0.93484998496149795955;-0.13292287266275171209;-0.16339446178402047827;0.17389202398942033012;-1.0786838189529943666;-1.995643772367550195;3.5210890821109122051;-2.2785833415959948489;1.9900243695972770208;2.6444959319540246589;-3.5889123319239670806;-3.8741971550985714323];
IW1_1 = [-1.3189286731542400055 3.3859332106020683106 1.069753416435557325;-3.7480715954125489731 -0.97636652741586849036 -0.34157785580517169288;0.3637823492038156914 2.9669027172742747922 -3.5793971437236753452;-3.7819973217147850875 0.32184241412369474222 -2.1160913703150572296;-4.1065759453764858478 2.2081165480981046478 0.050124643754357635361;4.1954494725057314142 0.34383023871984352837 -3.7434271909346121809;-0.59040957669089422222 -1.7262080559666348467 -3.813839438705047602;2.1834233811235059797 -0.48877806217189723181 1.9811772311398008206;-5.9681432156080811424 -1.1830372873458614436 0.018326140320240061343;2.3370832338942895134 -2.9599667074993392113 1.7138458047853595279;7.2753654460878856014 1.8970864363624702076 -0.6850885342777568443;3.8824822806254313257 2.6899306080518061712 -0.20916220630341811337;-2.1334889298140975455 3.6659977809347288336 -0.92079938427235630272;-0.7237474673733597097 -3.2117331888772699955 1.8562506231255946343;1.9034636343632544975 2.8037952667056709188 3.1711101076221583916;-2.2165034951399391616 1.7713060933741207048 2.3710940524784245298;3.2824262015770897527 -2.8032295044380330928 0.97531765747303056369;2.6195954142817834409 3.5614298403803452686 -1.5860751008358351388;-5.1387380171009455765 -0.43179831349250374917 -3.3833800453432645305;-3.4681877610593168093 1.3893916548840912206 -0.68663515537455344084];

% Layer 2
b2 = [-1.8909124392231513312;-1.0656761617017289634;-1.0408684321221517433;0.48101821396189087254;0.15909160884010445369;-0.089506932128556940254;-0.60872870855618377295;1.0679743798270471267;-1.6005149405525898043;1.6536572665816142713];
LW2_1 = [0.04264597357442038994 -0.18787155111203612812 -1.9150498523774293069 0.099856799405384208401 0.63740022581715316541 1.0674326077854341399 -2.2563997140299028032 -0.032243598197505315972 0.71808586088105252898 0.67750021205432631177 -1.3420198109850081103 0.280622846718004193 -0.55222629195830230664 -0.057825441248261312543 -0.5181032290483263969 0.72004228179015483668 0.11822760920497125958 -0.50666101348397341031 0.57039396215466076079 -0.30570807988801457222;0.51020156970277830144 0.4146817087721404449 0.29740695202026262711 -0.94304537878319638633 -0.65856806929585876009 0.011418430994246712984 0.2789811516849484696 0.088544649390184915205 -0.50554216335163681961 0.10272850571149778898 -1.5402478396991836629 -0.8516067991184248509 -0.18828994668594004058 0.56572863091992342532 0.37388616131444046831 0.41252622206134759164 0.52998210910894194559 -0.72837674296265819684 -0.37937572616073833576 -0.61922212394615283593;0.26551727241208822328 0.34876709106798930993 0.33005753210638749673 -0.16628699835162860654 1.0071213466286688121 0.94258558639052125727 0.060397739369012604094 0.12115405259027076101 0.52400912503251562136 -0.55518002511772790442 1.0287489067677544341 0.37656887473982297854 -0.25025813384884093571 0.015294793493396243236 -1.6630037626414029273 0.0088899551737603096924 -0.41823611055416692883 -0.3502124095106566859 -0.94862349581071458982 0.37297374582846798408;-0.19576506527002907054 -0.031875560988469352208 0.042567908598506697115 0.85608842307059918042 0.33933374791447723506 0.11735696495006650575 -0.28133973696857295099 -0.44546096250180650111 0.8432999843523674155 -0.83722047280476641351 -1.0387115143073801793 -0.61711507027401368841 0.17856875326275581384 0.44902191322829870801 0.56572111799885249628 -0.29825991587930683613 0.2395705366298020722 0.23686535795271385085 -0.40584103969570473058 -0.4276370685211032252;0.1349906159087504165 0.093575757762579245269 -0.066331768373839306019 -0.86940992352900547946 -0.49480060620241833602 0.54826501294933926989 0.19908867708481312042 -0.043649605985127716556 1.3471228850678804712 0.035963465979600643674 0.84700967814757566199 1.057316565169584166 -0.8559547792576237546 -0.36345526530114014019 -1.2627391187672385442 0.1965779909654503943 -0.033224703111506659337 0.10802359040753956032 -0.1795630874281654854 -0.18509007538956923078;-0.13044999211778901538 0.72068339112405066516 -0.38399760056271248221 0.47927760685458004053 1.1678726597436732693 0.84072504896823907483 0.16248755395133296364 1.1962289451525656148 0.3316177473431004552 0.7975139851897324883 2.2517233765713382532 1.3742011741856572371 1.7460121275856494982 0.18012706330823310963 -1.2142163219599322321 -0.20336451924227277877 -1.3204736169890898267 -0.32989267926246645946 1.3029596970296020153 -0.72057002697692229543;-0.3828707835515112734 -0.32309715573923764032 -0.26215838882479902683 -0.18261009303059225206 -0.013355087213910305996 0.75825997809769363212 0.18889325161625722393 -0.010844509022858807301 0.33805246719190101823 -0.67595428032602900004 0.31828813492970797761 -0.42707217204993291881 -0.05571719130952058896 -0.41976634317534994301 0.201564827435678523 -0.031997213325638013126 -0.20544674861474240823 -0.046573181505061005125 0.75197149298026300102 -0.33109909211116811401;0.80329523241804667855 0.46145420461173353166 -0.69303201141274395347 -0.26543844470290167692 0.47546265892566574873 3.3246367161366903176 -0.59126356570648153088 -0.39649769435836434983 -0.016070999059986490476 -1.5418106982871311317 4.1834236808014058084 1.3597558111613448073 -1.7222868461730296286 0.76120180768297063256 0.43304218180217457501 0.06464550530509836912 1.7955475148232711291 -0.89723201416794839957 -3.8324247616126156935 -0.55641562164933988655;-0.89230373043581667769 -0.28568360270120146671 -0.57315071636387948661 -1.6360298500082663953 -2.8416110393660076738 -0.76953191013544286481 0.37866048810857022566 0.50971081372053883563 -2.9950361989032980858 0.96043887510971193144 1.7926005864263672152 0.83863872803775063591 -0.94568919670263817956 0.75961684805287066347 -0.298074406556643412 0.35369933573143319538 0.056116441429457701584 1.3693384700837951673 0.73930243505178361296 -0.17260241841685766695;0.51673436392337490641 0.50759210236272800376 0.25403856305788852232 1.2762447161564649534 1.3584581399702027049 -0.019954342395940932731 -0.29232436912839598886 -0.54511563068675106258 2.5916253549287207036 -1.2118779937819477155 -1.7332232223620698264 -0.62567563244471957606 0.39722555620333765969 0.21330549290849215582 0.29453141862468018575 -0.28174230564270796862 -0.45543054540839128519 -0.24002615028218726723 -0.3120180925419139828 0.54671374773004988157];

% Layer 3
b3 = [2.0067814612744974134;2.0304063255460818027;-1.6734017999129189302;-2.5225458339145814257;-1.3167576400451164176;-1.3840370002271376038;-1.0118879503682334242;0.87049409458143234275;0.38630940718477263518;-0.20252993072230482396;0.073123812047793362856;0.36233944009542001785;0.38354007219060759493;-0.033528035273197302757;1.068875520570860882;-1.5145356776553573486;-1.135191933044785273;1.4774885279083032064;-1.6500155423245272956;2.3325128900827332146];
LW3_2 = [-0.91219000192876464883 0.36184310850754070055 -0.93125330968026420742 -0.00091145524243344054442 -0.10931053854568700823 0.24734815373662230598 -0.34382204831009005597 -0.92483521934321266667 -0.46583159990507250203 0.52941718395537873398;-0.062294957970804414049 0.059223668350455546672 -0.86563807988754926104 0.55135412497309455038 0.30861030512081372157 0.071482140851573991447 0.82793413378520197554 0.11188090561362071251 -0.55667177799432687735 -0.43001086555410972245;0.66683909525642570681 0.44771880529840668572 0.33329996673583078826 -0.92431056177142756347 -0.075944689953793401149 0.56254042423789096805 -0.84235191705881828916 -0.69653449815975121417 -0.2534683794149813485 -0.35917066671497760444;0.91564624133193472932 -0.89723457018831476173 2.8497833620611303651 0.63246914991538816242 0.30417248344432412654 1.2302956467688443976 0.16573649445090257726 4.4498075020815734959 0.58524364817512852799 1.7464584933352749196;1.1136237145219269884 0.16974316943658382395 -0.37851743140015253752 0.7110783781773505341 0.44159067347769181966 -1.1391449535088113976 0.54278889786232875636 -0.34707904397310690436 -1.123153479081741013 0.25716794922148777935;0.718952836755019975 -0.76093313833987930028 -0.91336988203049185309 -0.58657832925725761353 -0.55614601717797507163 -0.93975203123690165263 -0.47683811417199006844 1.0703542280244719986 0.98898964854851578732 -0.62986242796142499767;0.47553236618557104265 -0.91568711074782171977 -0.40792092074804636725 0.7691767581718761404 0.64391117660652985588 0.88922850807954678665 0.50942877257953467218 0.98393069054059312251 -0.70807155010321931599 0.30229882256717033329;-1.0513129797976186186 -0.13533393399644677579 0.16182334870388850878 0.31748219194414328825 0.65629572420677695366 0.50444093919271160154 -0.79653847248773479439 -0.43378479530024505184 0.64777315315361339021 0.70755889603033550461;-0.77681924320383310967 -0.066560431279062776122 0.40241100697129150721 0.31450817225217558848 -0.44869623819823933886 -0.18087378227497746819 -0.65771869032957086532 0.3171210751040312581 -0.74877617312750677225 0.72963937142382484513;0.29882452545127258237 -0.75465403163564848121 0.37670358576642082316 0.79703009083847176086 -0.41858708432562197199 -0.49387541506943416492 -0.15939246579053700792 -0.93763260569015471901 -0.32394169176705306379 -0.60682640820413924487;0.71871117028882369748 0.49030898241745463073 0.45438587019148091173 0.66868460998553491681 0.72920425840988101207 0.30014575111721347733 0.24821214193332707953 0.36703437623731166584 1.0380905394203647774 -0.74231532868502325684;1.0123092769416315306 -0.49621458141615581994 -0.72943363736205979464 0.51912624795432493752 0.17183443874979623112 -0.39813240205639072178 0.97451453102560470221 1.4100433693821885495 1.243209934530266958 -1.1969448103379407566;0.67074423588937759355 -0.42218677067482346388 -0.74437979356183225921 0.5027713570055752923 -0.15173752820724181745 -0.64962948296584077656 0.80230062696012649504 -0.44782085638672053385 0.92026737665974045477 0.67850088339962377759;-3.172905118102628208 -0.93678551543501176191 -1.5323986494596157915 0.53751459109412913495 2.2515924062756966784 0.76963757194473114698 0.20958274004707019844 0.84383648458400928316 4.9384227610360147409 -1.9014282394413901667;0.082827647494623693469 0.79153044070814071453 -0.5617271992132231162 0.61403034236571452098 -0.93483642301306846267 -0.048288227703855032824 0.73030974122579039864 0.3948174924541723585 -0.18895034733325472009 0.79600375197281825201;-0.63168971585025801563 -0.61793428881871304004 -0.69087751755776127816 -0.27443579520726746335 0.88380237247324766603 0.23615294194428329555 0.39956910683047613952 0.42870367831109168488 -0.38806525992711465856 -0.66582034536849044049;-0.80516402377841411742 0.41582629270375431885 -1.2795271555570510991 0.52164410604071442812 0.34759313730093260864 -0.51166595352008226172 0.61059075907888704648 -2.18071860423208852 0.066499214529861586098 0.63516421679547696577;0.41107000381263181232 1.0369741145465540821 -0.16341480758579848831 0.44070694349017103253 -0.34291027200548507281 0.75888136308830878018 0.8102896558455856546 0.14386511979724475596 -0.11248670521523471133 0.95858381149598637094;-0.18829350390840998708 0.46328937359622929248 -0.96227090162271711193 -0.74751489256932157623 -0.19835287065283277452 -1.1044994033247681475 -0.10645469865345309757 0.38222480598218622205 -0.44566401308115316526 -0.77776776833600469452;-0.029913241938726714553 -1.1536281197043740665 -0.38192150771039362622 -0.13915183070772832452 -0.25817891070347631644 0.30970583694977571465 -0.85693125758655552815 -0.87405375415415775819 0.22333172525877389991 -0.54833800190317827372];

% Layer 4
b4 = -0.19677704016038105594;
LW4_3 = [0.14816404287998735656 0.53692959663373784895 -0.89370116647319652881 1.1417117213051033442 0.071312771745312142357 1.0240633294565526512 0.094896031929622176593 0.15866788507775425598 -0.13053864925813790654 0.073419815888746353671 -0.079988479776120696707 -0.74582628541995887872 -0.058122882738434467065 1.0400225815534442919 -0.19745691518027835842 -0.26314398976701380839 0.15163944398381329348 0.054907988121294208639 0.033134552724434232496 -0.23893542600322409397];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999934;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
