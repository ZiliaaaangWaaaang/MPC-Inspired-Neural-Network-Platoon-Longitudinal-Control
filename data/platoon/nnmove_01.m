function [Y,Xf,Af] = nnmove_01(X,~,~)
%NNMOVE_01 neural network simulation function.
%
% Auto-generated by MATLAB, 18-Jan-2025 09:34:29.
% 
% [Y] = nnmove_01(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-13.2925490923537;-6.70139767883548;-1.99738196042707];
x1_step1.gain = [0.0638195875959219;0.168202204644631;0.502170423671263];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.8698763043908366299;3.7748213937398982232;-3.080902785875228922;-2.4088505788806044983;-2.3704860759950494575;-2.1798860382901934507;-1.0350468649171982172;1.8248633200268449261;-1.7220609364199110924;0.30370672729421882563;0.001502873892054203131;-0.23426171797595765622;0.76317798571167438926;1.5074575535139294047;2.1569043463443602349;1.471527934287085948;2.1414221625577756214;3.3525428762467979205;3.4438544888092899043;-4.059234605860971179];
IW1_1 = [-2.1018101561471418393 -2.7667857054100815084 -1.1965855541736045708;0.17614815400858119254 -1.4288503830598111577 3.1390677716526766972;0.98577327752667254224 3.2929322052102425467 -1.1225192948811868465;3.8344861331941628713 0.22957686741749908088 -0.57337325314866993686;2.7080379035780968167 2.238725151327079832 -1.3969488323350203185;3.7676662860196623583 0.58247759368212248532 2.4042557179965613479;3.3402486887892886003 -0.40317927742065357011 -2.234752668729683478;-1.0087040109149734146 0.71605966150153921301 3.1297462901547472569;3.3353072638116079141 2.5188155498995383752 1.0017587586754430617;-0.37319813969567805501 -3.1728643951576791515 -1.1014475772977714296;-2.2704278329627265443 2.2476235971255125179 1.8211965949917567897;-0.87984519000396255173 -3.2505979960817108498 2.021526003519471093;4.9812785924165954299 0.74252271403692149399 -0.70977580494470327022;0.38593198604444572952 -2.2939138559741900636 2.4815602634365503398;1.9629491016358919797 -0.68229552764452150448 2.8352051201818477821;3.9815533616104219483 1.0434407938758756274 -1.1458235597795871641;3.1214025046016335985 -2.5190695107124256857 -1.1057134422426522224;0.39375006825833819279 -3.2038670909927700059 1.4259104027393751934;2.6783714313726285638 -1.3308134243777984818 2.2255426048302293651;-2.6477438474734955598 -2.0612934399009712472 1.1232356514880923459];

% Layer 2
b2 = [1.3929003900720771103;-1.1447889809794256077;-0.95785613559508897552;-0.70220122549522456801;-0.20625988864534919309;-0.19100555025876864157;-0.56621844243840324662;-1.3305669751151147917;-1.2460964509786831567;-1.447314086103221209];
LW2_1 = [-0.1520383674168136745 -0.6548728984126787056 -0.34545669598210171358 0.81852611086918436456 0.99100654703614066143 -0.43111396699038506686 0.93179517336437667208 0.2019746754349990292 0.34681137168949033311 0.087380628424768555518 0.15311902004192909366 0.69177578015846963311 1.5896621772834964581 -0.13343783839068132369 -0.18573283587506109193 -0.57402909095464682565 0.45391482711302211239 -0.064881700889423077339 -0.14118338204314423434 -0.18405473348972758996;0.38386340486712566822 0.3457630740274623693 0.43857221758592723759 0.32778710140472133716 -0.38597546188648101939 0.78435231332617860733 -0.4079076944206800337 0.47000508894792958348 0.050346108019763136099 0.31224150693504149068 0.51123784388491499975 0.14589407964260800443 -0.044964901015918296023 0.016557573720949663593 0.28354453757291692151 -0.2774733024631984013 0.88853842507637226245 -0.73852557375137528606 -0.55742614796042844194 -0.018178739293305417463;0.46627458432851925929 0.22213644664278772711 -0.19567479617382921298 -0.0050478227701140068392 0.007983050263796677426 1.968826948288844747 0.29755977620756229873 -0.52737050700807186487 -1.5461719631598833669 -0.1097980275183974147 -0.91101300780871430351 0.64513678855176770366 1.55415216399107603 -0.037015146137084065092 -0.44851747550137049947 0.48877359608389803203 0.097431454839947570501 0.45595934451205166749 -0.39956059745717914522 0.4001601150923443373;-0.24838441825935864138 -0.88619219098195545214 -0.019756827265755741441 -0.26666745013499537631 0.35123478653229955881 0.33469126126320780656 -0.38952729104117084225 -0.71126625184474467911 0.17943189257956995708 -0.74936092153837896568 0.39627729161409358527 0.21037577597035617138 0.22741946289585765473 -0.21519799321413232707 -0.0050079276683562797337 -0.80179438032211658438 0.75847145768868307059 -0.49652666013641516551 -0.68249410748180594499 -0.014397135430137810927;-0.20581363955938114518 -0.74216397982343396134 -0.50993323462725226314 -0.28553187172239302694 -0.705333564756227549 -1.0454157937035812864 -0.62261418712866611891 -0.34412981414099930166 0.37992772393490470417 0.79839400129938753459 0.86717490769797722638 0.77260642041875471353 -2.4599810507552617445 0.24764298075943161348 -0.46628412118674772424 -1.3551774873037667479 0.018430835075491883157 -0.013933014627464657131 -0.82184477481556550416 -0.51587742150252313689;-0.11206473190187796196 -0.37909180151392640745 -0.54257669790921125852 0.10074593091498230957 0.34967481926931304193 -0.34556282147598144094 0.77215852166263576617 0.39111339273383266546 0.31805426015330628964 -0.14846154444446674203 -0.37602822712628297674 -0.022691453193506166269 0.84546338640146201371 0.033954608789789973711 0.19217053280600659981 -0.27971970525522293904 -0.16629423762386444374 0.32326241815360168275 0.35292802254803534723 -0.31382253521186986855;-0.56902988072349414139 -0.58751434956684434052 -0.088362920972102410033 0.34776241370677402065 -0.25050542846649270778 -0.50648742654570144683 -0.56962710628399149115 -0.43662391823323737361 0.40932245306348014058 0.38244646674863397307 -0.11537733179464922106 -0.36166595034870308023 -1.0641746544001282615 -0.096085390988534233325 -0.23570005157280479735 -0.45768871593619264715 -0.56462559876885565213 -0.14034328124969458473 -1.0033180521449809319 -0.082152168521867782736;-0.65359275064806243716 -0.039272544094326553021 -0.2378081684577167676 0.23190444466146326041 -0.86295880678881042858 -0.2136140610603527723 0.35610782825001791041 0.56571591727212178213 -0.48082161633888209629 0.037666971030773113704 -0.57195512527523517665 -0.41564631055969675222 0.25408140218322239345 -0.58166089073213189664 0.49458253253313705367 -0.15668900832568960491 -0.20267518974791595698 -0.26447676692210936311 0.53713008584678012536 -0.026849722797682100406;-0.420868377242396563 -0.58684589062136094384 -0.40401335021873768794 -0.058243018225094381202 -0.22998700327916749009 -0.30301360472914595778 0.7379471443963301347 -0.10896356380709898426 0.37293701115464994444 0.95574087543517272092 -0.55800477894486666397 -0.46501113791183801283 0.28697262093000613925 -0.0011701058429386540505 0.65876040537060553959 0.015489455095728365402 0.13285242183497200652 0.39468521868486527993 -0.71159020243642912007 -0.20835841396394561009;0.08341206567969233765 0.40287450798892554538 0.30517056438931450257 0.12455076736502893042 0.030770650114101370798 0.085153343374478940309 -0.34411334089090117594 0.17180932985569583038 0.082246122619213976601 -0.33696739572097988979 0.17685096059453986328 -0.52568814728581259033 0.1880031880832101765 0.20604375072852645912 0.55092549074910068807 0.35073752723172307855 0.44838753562244892947 0.54803789493708787717 0.54638180831042149066 0.39668230539306170712];

% Layer 3
b3 = [-1.9117659415531040867;-1.6759872366110439845;2.0756627081294269921;-1.3901646361708264177;1.3686281367637866957;-0.70267664590940392966;-0.57746597763211948706;0.4984892217631175515;-0.26434201811752883193;-0.082279781881753041861;0.16432208242731030645;0.18299804696716259755;0.40458496375130048595;-0.7269252784939641554;-0.93395970321489041321;-0.92384803635572809721;1.340772231531638381;1.5460282335472341764;-1.7470178576970294415;-1.8463900381380886628];
LW3_2 = [0.38985689328022554712 0.94139172384092983936 -0.25649355942950763376 -0.18126830828090942371 0.97552072443229387311 0.11301759462655620869 0.56753537699781775316 -0.10127515311573014045 1.0034540211507023688 0.17080886903592543136;0.76458306259036468155 0.27350991978529548554 -0.042174600008813421803 0.81287677566066618429 0.40007684145028515887 -0.4145696569892045602 0.25141425139279444112 0.17718182747306726599 -1.0217848047265123412 0.43902351752318513611;0.13337259014958269265 0.68972687121272269195 0.38501981046033079137 -0.017107640534720820052 0.11944728769176546357 0.57918355696569978619 0.15622019117887650519 -0.258427949971533788 0.023670682508841862923 -1.0295625406699873139;1.015328486329182045 -0.91373639811445495074 -0.018027460787895410732 0.24044787211399368254 0.62775215177290810686 0.041617688347858491915 -0.77545442109866014047 0.29433072949440658439 0.36614759687773040797 -0.5564696003086777587;-1.881741215449328708 0.60749832553295191051 0.40899301409955146624 0.17270565346093111336 1.4952116061218185816 -0.1761428885060643823 1.6248312028378619765 0.50415040998623572577 0.12158918357947703925 0.40913025603892028137;0.11931923774900332624 0.29865316237133798793 -0.55296415081000238612 -0.56797374385030086064 -0.70586764399283341564 0.22887299771042432517 0.39352264195529368385 -0.91161970051782192925 0.1538014499029418114 0.97844748800564029789;0.54774455563251667201 -0.54670859399063465034 0.17477451976336352835 0.25571956564441222781 -0.067473996999273255781 0.19931130736972876849 -1.0889939076936387963 -0.67985951615385575852 0.42353234916969573209 0.29707379996334165595;-0.50529587385655228005 -0.15322603138112972365 0.22805475182300349868 0.76369393195860579837 1.1404984035230565365 -0.8510227271280137451 -0.11906467536403105012 0.17752220713698413368 -0.80180745484873061635 -0.59777935450934760464;0.60105473345691062814 -0.15146062177824601291 0.97680917505575404203 -0.88152404009239870852 -0.10125104537321456821 0.58230865287878941228 -0.16732761029034157185 0.77860594492020784863 0.71248270273228320182 -0.77324085701077349686;0.23199372938527595966 0.12761525081862926112 -1.1126625090695130282 -0.31905194473576609093 0.49981649530382959989 -0.89461593486084833859 0.19536835660712736917 0.18496682767214250864 -1.7964283314572615513 0.024937402308700156589;0.64114259100515069711 0.57237132903661191996 -0.017133368546427458351 0.35544724603225191784 1.033059456998515202 -0.54898550449251226624 -0.70179422194937268742 -0.17966595764504425525 -0.46175065868911835398 0.81457055531614319666;0.25207173623902429105 -0.86697872461323555182 0.23428211069026549929 -0.21048132502183605763 1.2028029513050055854 -0.72405889552250701779 0.28017295010182541315 -0.24513567153626539263 -0.53905871361338064673 0.34823602846728735072;0.38477846091678902241 0.84804484640865895884 -0.68420534229982477026 0.9526685214316649164 0.20667195163951912473 -0.48678530073956699509 0.050189078982028748066 -0.83286234600747521828 0.8241468626732770808 -0.031439427321403826121;-0.41010701242649977294 0.51172678958938844218 1.0557074897120142243 0.82032172854716878252 -0.49804000357563543711 -0.54583531727320067084 0.10229541520492800577 0.47313563156303412027 -0.64985532679924185029 0.66478131374319360258;-0.52795554353226403776 0.052969714210079496541 3.0911875286605599022 0.19970258949562150197 -3.0231101635362054303 0.69405098608257187465 -0.18883942826381489022 -0.14160274268964981315 0.062355447840294883632 0.48263375830553517654;-0.30175507039232263296 -0.086910929950215307094 -0.22387853465031332112 0.6189756624695309517 -0.026310444093054233261 -0.91366827003307093946 -1.1088544635138839478 -0.57471047025727894919 0.34937585497744605423 0.93771621443955055497;0.25388505192285082401 0.2300121487431524836 1.0125449379842359487 -0.27502627952635017028 0.13716157634063005921 -0.6319226962499714384 -0.05534581280748643306 -0.31047598656406699691 0.45527355260712143448 -1.2561064112947586402;0.64728811538934016845 0.15927102331177878103 -0.88687520280944820428 0.19543248874798718751 1.0890899866399843532 -0.36994651884617957283 -0.23432020828057675832 -0.50881401072202825375 0.77538885014143033025 -0.6370229857189058098;-0.25055927357496138308 0.43868689476653272008 0.11538967158165842897 1.022793987623709544 -0.025884167793653330147 0.83432148243418169375 -0.66209134785491641217 0.15257853448185662582 -0.89622131054953857454 0.63298994350130077802;-0.13664796750845298323 0.78653004446074570311 -0.67394634633258632128 0.10399934712231007072 0.46823312914906145554 -0.34095172366009607323 -0.026451673528078617492 -0.4512826763801575658 0.75438691064310459122 1.202915132796962272];

% Layer 4
b4 = 0.87856633220992486066;
LW4_3 = [0.47297836697337947154 0.1449675606124510574 -1.0758215011922456217 -0.18573849480295867576 -1.232533922849654795 0.10713820136106547154 -0.065981392548631362382 0.61277002832459759318 0.36370251839538869643 0.85962518568117662898 0.13260715925940955162 0.24686842271018460959 -0.011112331273543593624 0.12539880798956154484 1.3260201091876044899 -0.18279881022970567717 0.2040291412329615639 0.31677775025308402279 -0.58201215621534985178 0.2873653912741228611];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999945;
y1_step1.xoffset = -2.00000000000019;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
