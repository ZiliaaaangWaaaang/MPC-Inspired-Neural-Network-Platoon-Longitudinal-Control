function [Y,Xf,Af] = nnmove_02(X,~,~)
%NNMOVE_02 neural network simulation function.
%
% Auto-generated by MATLAB, 18-Jan-2025 09:34:30.
% 
% [Y] = nnmove_02(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-13.2925490923537;-6.70139767883548;-1.99738196042707];
x1_step1.gain = [0.0638195875959219;0.168202204644631;0.502170423671263];
x1_step1.ymin = -1;

% Layer 1
b1 = [-3.0468614897679766607;3.3629976095099385347;3.0130012974146085369;-3.8517710657305581634;-2.2029547203190045224;1.5131513990728766572;-1.5241914766083244359;0.70490406692628149177;-0.045748515612387921636;0.27421522269403680871;-0.69609148692972522277;-1.6297957086753609435;0.75738758181709608941;-1.9767124635562061119;-2.8192603643896334553;-2.193544211317548065;2.9187695075929842581;-3.0284480802501252406;-3.2404378371611493037;-2.7865232419105652184];
IW1_1 = [2.4767196430581646105 -2.9731807379465475805 2.1341164646896162438;-2.8345332104663891748 0.08522899285016188875 2.5017427771145368531;-2.9301056397630116379 2.1409289730472829127 1.1588014759041462831;3.1286782793494394284 1.4590604559496576087 -0.026349058794251593169;1.889549153764302325 2.437717010261490902 1.6348134796132640645;-1.7331234532485848554 -0.46439479740337391567 -2.5229604496219057985;0.1904516144396014854 -2.6317011412270705506 2.5389342781358097412;6.1153875292533292907 1.623837610483374716 -0.54895318869011888729;-2.8916933939700544265 2.5396528496599586333 0.5721675221236812714;1.3957648329399234832 2.6824476807829928937 -2.3164477313556384175;1.6996513496044853841 -3.4075357871589040393 -0.86013566425033993745;-0.38151567364291977258 -0.62695394341532284521 -3.0826507145978259139;0.84177060664427061365 -2.3235302925298504384 2.5491674802672035227;-1.6746315154418165427 -3.4212994862596080026 0.17256051989443613182;-1.9351001933183207271 1.4057436167957151341 -1.6419863619649803788;-1.3260321460928627957 -2.6621166486753864433 2.44975131460386919;2.6882229609524879166 -1.804023531573361705 -1.5291158671247480072;-2.4449146113928224011 0.40295891724343146922 3.1564760423488151808;-1.0024051354149434712 -1.7786990518782099802 3.5763308753801266171;-2.0137300423879116451 -1.7058399513913016232 4.1061560300241000121];

% Layer 2
b2 = [1.8945804825100140967;1.4052852429671591761;-0.8860510466608223501;0.47088262744720482678;-0.43271250691104712338;-0.077789055502630849448;0.59758916025956998475;1.0910435828088551613;1.3542191728613466317;1.4744214097372945194];
LW2_1 = [-0.39487851674387958179 0.79506153491058006999 0.53916161157805253534 0.50903053216608806775 0.30712778080811081738 -0.094002535912912632554 -0.3474600409833282777 0.081986079521790225511 0.22503890237984108813 -0.18812268590399525148 -0.21250111205182026231 -0.89586989297356811601 0.10509693067452183235 0.1107875056073637926 -1.4906433152854121627 -0.066335604303788223146 -0.32488499873603221557 -0.65631333058744889541 -0.58652634878578280286 0.22545076696410870642;-0.33635371379823991722 0.63166106732648141797 0.6549689585647056056 -0.21265484053398808761 0.019563323304631573957 -0.40309231562903857782 -0.33056433616980035461 -0.68910218138767043161 0.24213873314521489055 0.15965343509889998175 -0.30954011772594525187 -0.21101550207904462564 -0.21377659131637549716 -0.76297460236500236341 -0.82951037671399996398 -0.24480562361759095058 -0.80463243432777142861 0.26609973441633183455 0.17248195277481651044 -0.98959870533096883083;0.66528713029503550036 -0.40420775548196447025 0.50000306256587578879 0.091487405696092913288 0.68444607553586422899 0.37121376915003079233 0.36100978382975390524 0.8199300021740756339 0.23957055948713229521 -0.29597819125277313734 -0.16047742030170061844 0.43065887091296811695 0.079247209156795977991 0.031967151546257559225 0.20805756724620605436 0.65885074412839961244 0.079630276520127815654 -0.15347835491257283413 0.16069259003829269861 1.1037966210560687941;-0.36384815153640082119 -0.38805906553083702182 0.0017448995679636338657 -0.27433198660367530408 0.077391798602104822091 0.58883405434691460378 0.63910182508693658132 -1.401189098071147443 -0.96237317996383553442 0.24494457755439508206 0.035555780778457030111 -0.018728083888972880955 0.048670917649767532487 -0.26602716886588723133 0.13633433311317669223 -0.48676116908206562561 0.26218367556729577084 0.6824974009823432386 0.65841243260337223298 -0.56942283956908468223;0.041223256761122498149 -0.55959558337613024559 -0.024916051804482999138 -0.011279702687118281501 0.36629853339492768338 -0.28725165799429075442 -0.6727478577644442348 1.4573104513114778502 -0.061898623111516067052 -0.54560207342259525731 -0.090212092548407438186 -0.076954037643154893367 0.14993483751037559037 0.28210075896476277668 -0.14443354276778969103 -0.55565187460351783688 0.12185455761643358696 -0.6275909846557020666 0.48354805597065048106 0.73195253635877155496;-0.21959391209064627049 0.17378798681050200425 -1.0435997490854715952 0.52521974749646282987 0.88416083575838833042 1.2811015740279090291 0.40467226817844148545 1.3593332856999134073 0.14220715266649128217 0.38044000339351841111 -0.48831169847001260065 0.1197828423612638804 0.1392746733180617591 0.32090498630608060848 -1.8289292778775565473 -0.19417231645381993754 -0.079600611425909989505 -0.66696693170193277478 -0.33749379653991468109 -0.1114913986902372478;0.50344395453114465511 -0.41974169109030556868 0.2243202692855458813 0.20626270218274872503 -0.78607201884088984123 0.16449033313657823729 -0.33835412706899797852 -0.1920326647360781902 -0.64109611604858740552 -0.56680255081993013988 -0.32107475750770536616 0.35294003601839341044 -0.27962772298140936567 -0.36777250234885427993 0.10114954305638654275 1.1407146541710833088 0.42300399654931175597 -0.1540431649389759905 -0.32580509683161101853 -0.4023205539875534531;0.050215711738982496404 0.81347140661266525985 0.25952814229152348924 -0.1324332038455068028 -0.05802345342636056752 0.45162035982806014722 -0.28611022197560093128 -1.8731664124573608188 0.32275071037284647213 0.67640686503351488135 0.45261912888957545054 0.13694131868904510507 0.090017127530790483347 -0.76675659204984947248 0.56428502924590240308 -0.37657344202583770132 0.29806907764495488289 0.0095897941275180850762 -0.96571330161462254349 -0.1746714315554182273;0.50453192662501133992 0.41239926762371603708 -0.29500148479169396865 0.88111552839292450745 -0.02288120953230322191 -0.020270632017001334602 0.32431916680897743266 3.631082181211522375 -0.4348096523197719776 0.72141297539324078514 -0.18622287612037741189 0.64413877644841610604 -1.119510801279805845 0.39984374282494572483 -1.1099999061753658136 0.70583191020920221792 -0.81485429013476173843 -0.75438479234162636455 -0.085376195203333754558 0.88303467146545322475;-0.24004966081758719043 -0.51760275744370032314 -0.18235836044803810374 -0.37950640786914624503 0.51585016713625198026 -0.35636570250398674764 -0.8184983965196059863 0.44117312437722211449 -0.22536450233017896183 0.49306188094978903314 -0.86346526954701585677 -0.28147001743598409895 -0.11023587683726848718 -0.58633236122937015811 0.09090144657640122916 -0.69459614363388655356 0.065991555687342176584 0.14009786588805048235 -0.4788015662953436502 -0.53963988760511583109];

% Layer 3
b3 = [-1.9588283831566306592;-1.2915822995850569921;-1.1481164625098618792;1.2018397314839570633;1.2322027296698354615;-0.51736545918682586009;0.39635815989899170209;0.44725063045789115179;-0.030539849203972201097;-0.39978617938453708813;-0.21047970160872564449;-0.45993321959936661614;0.27327682527357821662;0.76138298071323529115;0.62181589633923795013;1.2182370437018299469;1.5647576918065542184;1.4652422842302514905;-1.6858203605609638487;2.1451543747879320279];
LW3_2 = [0.25725126379230461859 -0.76401000051737855134 -0.66435467482216681301 0.70914210705553193392 0.98401836359881966754 0.17133378421723596818 0.82906920821513607756 0.3034035760123915404 0.03776578431320662399 -0.12720215306473139916;1.3923009882308290397 1.2848098634528060114 -0.73503278034042607292 0.071862174302385534164 -1.219075209969286977 0.32962812296515209276 -0.13864157672900392915 0.30735146190333256788 -0.50127568061813776445 -0.1245445418325363679;1.0951568868965768644 1.0531190551649896037 0.38815798479290980483 0.74633636214223864069 -0.35632842171593331893 -0.076399829493412313441 0.73128067257533024836 -0.44478239760960092131 -0.73462742003677405922 0.58189465198657863709;-0.85438270537288185658 -0.70662497403316637534 -0.99579007201951974526 -0.016390140427710388898 -0.42020249292134731478 -0.85786029503961913623 -0.50503484350053184926 0.016283138323582944246 -0.36603258359432833124 0.71211955133849946797;-0.49036591218469516296 1.024764336305868051 0.34624856375048634893 0.15003715158571612198 -0.30500153227801762856 0.27121800868507944804 0.66625477953610778847 1.3434327865189792384 0.34604266617862644573 0.57769475168026562795;0.68894591852030628853 0.056901057347714979751 0.19112945340471093614 0.49288122175473203512 -0.50450830092169585139 1.0373037198900683098 -0.51784775470176214185 0.040313699519831172613 -0.028515333662592415309 -0.34434714106111147247;-0.99489815155613459119 -0.018339951688116702677 -1.0798765614203413854 0.82423906231565025049 -1.3049432479543663366 -0.73882050093971163296 0.18773764957720681656 1.5082446378966385403 -1.7732660343085133725 -0.11009016169416248332;-0.78566842005449066821 -0.35285753204778858017 0.59598766578648287862 -0.49079916927118882874 1.3030423273403595186 0.70346993046081451872 -0.28456387549213507659 -0.18978360051974046963 1.843405899623304034 -0.18758309795119207375;-0.41005598244661517482 0.30138121022231956214 0.52915557522958966974 -0.796149838733278159 0.83874708521052843135 0.97350057946328938385 -0.11792155878824209236 -0.13129679720583348201 -0.23571980461527539119 1.0457443693064152335;0.56541313987731167678 0.15723547060066908609 0.085451415539572958546 -0.72596207964641257249 -0.70656636844213838167 2.1106240561339757456 0.0035959296282494991777 0.020178888253164384281 2.2357891104193483578 -0.052601609762112588875;0.74192998118581832134 -0.25311371173827473813 0.58460835954940471026 0.66615256526384036828 0.39574616042270210903 -0.61656863199950384669 0.15184335131894050042 0.039795420296551878292 -1.1808318251114171549 0.65123843140516912698;-1.0979979997226729793 0.098192155580754669764 -0.7369090883554053617 0.2357793929446496406 -0.69933608774604893998 0.73145102115616578153 0.18065068334092673763 -0.58068241393215380697 -0.216769955798344377 -0.43403290952254119928;-0.16737412449013366889 0.70639261030367006544 0.46707436847334815599 -0.73408149341390316334 -0.58273326832983329826 0.55502360861081889709 0.63260940824288225404 -1.0079803584335573774 -0.36154896136320663347 -0.78997858339890092427;0.69098704126985699414 -0.73168476315605945892 0.8693543371357760341 0.13497773755453662536 -0.82368941781728699514 -0.43726507540312276046 -0.53675308999311854841 -0.13438285710411709828 0.010531815463484046208 0.22223238987210533479;0.78086471359178333262 -0.7286160374399662798 0.80284473866405969833 0.93667345027305093375 -0.29083525515927655114 -0.35289953458052053525 0.40831327276825751804 -0.17744769007308366926 0.34534685241210794082 -1.2783224805424997506;0.83573701755293161586 0.4091134522306626442 -0.0049324207143279473475 -1.02245156065821452 -0.53697696737226019437 0.18287115074477366949 -0.62413321794268539211 0.54677142113425469816 -0.38390578582705076061 -0.1878447183574898649;0.85836077231650709241 0.71225055797598169072 -0.34265096113192289318 -0.230625098100763537 0.66376720063742178368 0.506917089108673391 -0.38269764869034994526 0.85447681581783507809 -0.21151623881650499781 -0.51264281805907430112;0.4783305048773457413 0.91156109654177852608 0.085432684132245917397 0.55381928604433749985 -0.1522789158174181201 -0.74893057239705052019 -0.04609087180595770189 1.0345754900238572915 -0.51251737373634276285 0.9266698049628804279;-0.75568301599333120855 -0.21526726251687594571 -0.20877452662185352894 -0.70330748246884888797 0.87791081301534967807 -0.16353410654926586743 0.67378678072483644268 -0.86538307323277074978 -0.048948868088638804175 0.6872881820851663992;0.30556648675526293379 -0.6771680374260807822 -0.2934927348341884179 0.21890662395675303253 0.44347604355241465601 -0.86673786018439125112 -1.0240627433839697424 0.49562291887000692325 0.60647980870805207054 -0.23615107371294369321];

% Layer 4
b4 = 0.14135212886212977779;
LW4_3 = [-0.11619769894933384968 -0.26340529159917491775 0.25468561504641373805 0.10194469215390732086 -0.7160389565974754067 0.21231978589948638514 -1.258717722710910536 -1.1837031406505360565 -0.16186337835441513833 0.94874323754963230115 -0.20995650426307349568 -0.13118531289876675383 -0.10799823159473292966 -0.093324234315080870084 0.0057555549325937170602 -0.65764843725551058728 0.090716544706516397123 0.55365118365881815787 -0.078387674915381677643 0.41582001546663466263];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999945;
y1_step1.xoffset = -2.00000000000019;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
