function [Y,Xf,Af] = nnmove_03(X,~,~)
%NNMOVE_03 neural network simulation function.
%
% Auto-generated by MATLAB, 18-Jan-2025 09:34:31.
% 
% [Y] = nnmove_03(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.70139767883548;-1.99738196042707];
x1_step1.gain = [0.053913604005474;0.149967019141203;0.50069484362843];
x1_step1.ymin = -1;

% Layer 1
b1 = [-3.501574752845042493;3.4997456825273647318;2.9845656815192858069;-3.0805035429495752908;-2.0307864734585829858;2.1260941864368398946;-1.9454038593282172442;1.2331661068467121289;-0.1915623540931732649;-0.42628947444101988884;-0.56599886470031812724;0.45526396963115589589;-0.95550117620009811237;-1.5182056161901698044;1.8987158430930486386;1.8422919620314359701;2.7865718387418332291;2.8123571017179251896;-3.2093145245005469945;-3.8538384715978044603];
IW1_1 = [0.80189794638169764607 -2.5412267202084923845 2.9548134667472387704;-3.5250616645688022111 -1.0510767517420180894 0.75541631913725670877;-2.2021313315132142741 0.19520239902484884387 3.4926268819966375112;0.98916130567813231877 1.298319216316312863 3.6161289069631310511;1.2935586694747616132 -3.5830378145589416583 0.030015786919304565661;-0.92359678940356626509 -3.3980185735074366349 -1.8757593195917448003;4.7396995435514162054 -0.2857767332299689933 0.84923001996002855929;-2.2798788035748618341 2.3560092632933482548 -1.6653782651891531064;3.5652338569934336476 -1.8573480552938521626 -1.4703329376878151447;2.4418990713184962615 0.19337455965443986483 2.8164164231228832058;-1.8700248362766362931 -3.0247106791835274286 -1.8755506485446713505;2.0992556005777123218 2.8238726488383716351 0.48064477846066511191;-2.5572963749034336445 2.8453357188803862776 -1.0889036006442842641;-3.4986431332553529217 0.6047423947238889097 1.5801563167155157075;0.48677524262519905607 -1.4081766578636234488 3.6508019754858049843;3.5501292431365403246 0.23132782944727336982 -2.4050766644893859514;1.8282350043210906509 2.1401195871967710893 -2.7722040457019025972;2.4624815420578047842 2.5390533794840779436 2.0533238015413610711;-4.4098974812757685271 -0.18195529975733409911 -2.5314354741630427093;-2.0141645137138470822 0.59404605407765309621 3.1137581857173626254];

% Layer 2
b2 = [-1.7256844068968739681;1.2387372315542106715;-0.99389752677277232173;-0.35676659115898023966;-0.30045393570247125314;0.30692502518383929511;1.0227069998590743172;-0.93287409088371597843;1.1204536052284679304;1.5594993956705942573];
LW2_1 = [0.41489668147624159111 0.54203699542152250501 -0.75153072280024102447 -0.16957200163011929006 0.083763678787169892903 0.74539618596515433424 0.44838550799626819554 0.40118130219023351302 1.1893393247989714201 0.042426225074795889669 -0.25811513456301071745 1.2764112271756833383 -0.3627561328595432788 0.70537127848651837159 -0.8657980439213074364 -0.018733428330368610826 -0.11392859797543053446 0.71527675134523294176 -1.4570860188499739074 0.039519078903407015013;-0.25004490663016820662 0.46337923660155033723 0.10897497539663859867 -0.53530508368363849403 -0.5580018016311748541 -0.1693354851799241112 1.368192958428069872 0.59718456017424204063 0.60723494258302013193 0.10911134593367850798 0.64451202349434011385 -0.61810191925468493945 -0.13343396271941490583 -0.3464169882231980524 0.20067367003485209187 0.38740085866651363666 -0.085713009245664772973 0.36551022747153816272 0.49543490596050049346 0.11621007391539933673;0.5078735584449316498 0.14651106233140048785 -0.10055541186427666145 0.70017275819752688992 -0.20630687192370986138 1.1412774492281965166 1.434143574681108646 -0.47915280641095425729 0.66140466279942766725 0.16913684774361806284 0.29559592031617276664 0.92167729534401654501 0.25105363378145656439 0.49048787100445911946 0.15885048820582226003 -0.084590688434211303015 0.58975301513802769193 -0.30750478941860931448 -0.33521043776639641854 0.029792729598132880464;0.43972899785757502134 0.78759710427764217933 0.88764608000370925911 0.51458565595269245563 -0.47855785604346962048 -0.21732803212262341575 1.6436424130669156085 -0.12831065087869999997 0.4397216496166826416 -0.28245510730442513481 -0.1400714340045269013 0.46102255337048148043 0.10566329519231239253 -0.7065441548329988164 -0.60616691296806912703 1.4305330379271223862 0.62657750973811954243 -0.072692026371006815411 0.51990476294928233969 0.39261532943792915029;0.2694218542151182727 -0.11612380262188075342 0.11870722507088972419 0.5421918822166847951 0.058989141125626087803 -0.97741032338941857827 -0.093946697028379530514 -0.063484728797686823532 -0.58421586086770294077 -0.73075646563682961077 -0.48479151854218094364 0.039038083428943951003 0.095920259340452840302 0.17774054603859204549 0.4177426496345507112 0.048605971960138209809 -0.80786057894070850693 -0.31144236110031059406 -0.052342995146706455811 0.094301159293003686268;0.41877234781952188403 0.55944568723911614061 1.2447716697303576883 -0.28563127718499042862 -0.20882913290133864326 0.5562015356660644505 -1.8254937316496320232 -0.35515912685920908443 -1.3971885001176156393 0.39739052190604728931 0.78315007829544935891 -1.4958071479674883708 0.27819568950849588029 0.50639356089626363921 -0.36597482373462353333 -0.85311354228431324209 -0.85800880135022938866 -0.046932571752857976666 1.8280136433206111146 0.25994936778602073524;0.15738516506100685977 0.26369708595414692587 0.23829220555639532564 -0.25168116322988048905 0.24181514004102414028 -0.99413405164057655483 -0.80156420851091858548 0.56370370632826338753 -1.3081950725209419151 -0.20215049273552060383 -0.62254233067987718719 -0.39521298017507383582 0.46798289946340970724 -0.69749257657515251196 0.15110620498638921427 0.0087932358988256006938 -0.46522771874689733407 -0.62702308978581611232 0.40108443553215544775 -0.24452473181253822632;-0.081265947099547236609 -0.21554752140786420656 -0.93462937098706988515 -0.38037443354929079131 0.18925414497854978202 -0.58983047903083574148 -0.25097715011190230294 0.17050758275057978364 0.22000736078495911063 0.027485786997212224153 -0.95727110050833208454 0.33255515016840364595 0.57667057769615737151 -0.064656905449148982523 -0.40283978742444692678 -0.38217433894362035085 -0.35126337433459886572 -0.12288088901789157026 -1.5332945720908668363 -0.41592455666324401609;0.42588317705779393796 -0.044033721925002503039 0.031352256595875163669 -0.56674063634664562095 -0.37413812722371536656 -0.51039172509329044924 0.99709585935480804508 -0.1139779379029812606 -0.49107278268506260321 0.034176595364311418423 1.2710395700763803539 0.27449311765330647317 -0.0874083503056354294 -0.53895062529826553988 0.63771827732001473699 0.15694680701431493186 -0.022639190693582042502 -0.15847261303798529375 0.58712163846899179109 -0.049331762713401297593;0.012909896195712342731 -0.29361603483706194551 -0.61961746333349709825 0.52271913595270780295 0.064063039598528104257 0.19561014078582117381 0.63601690213475525759 -0.98252979026283970843 -0.03930944453929311605 0.50458545375578967018 1.16936809022235777 -0.078744672593067083222 -0.34155643221704778956 -0.23558612635158560078 -0.78809630065804725518 0.58371749904840053436 0.069211816239910628479 0.80020068110751207957 0.81802638566783536511 0.62556041947111462598];

% Layer 3
b3 = [1.88926633652982634;1.3696031818918210643;1.3561571718943186138;1.389709928511379422;0.95106614283905754892;-1.2374959994351044656;-0.69901718252435884882;-0.34735656777236484372;0.024914842723446052608;0.24630701386359785121;-0.29930681418053417531;-0.59135090535268097778;-0.49403363214620849009;0.57114936683428063624;0.71829246822134329431;-0.61266633981193108216;1.3001430023901943134;-1.6096710236915381387;1.6289105643957642044;1.8330257629384789642];
LW3_2 = [-0.99690933474839260597 -0.87599407340889090534 -0.26777125452652927873 0.22648616883497099672 0.7467619799261221436 0.21966616371310437872 -0.30795437628693556054 -0.59525818841192779107 0.11850961546214361375 -0.79698125533746588811;-0.72945254966145345321 0.85067986799599815129 0.87572555729655698897 0.1008057943107742993 0.070598212899471643467 1.9764921502265520026 -0.89197030974525182145 -2.0909444727495878347 -0.72250351461600503811 -0.15715442066210771888;-0.74032386192763999233 0.93104010375096091234 0.89900612392223677727 0.21064177307196835232 0.91132490524309273106 0.50852959615567971952 0.26632660998114232598 0.23790975723293592003 0.71692660230386895392 0.51828553022418177854;-0.52731546350142077806 -0.085593918522071557597 -0.57585014724497562977 0.42207164641182237652 0.13511924050955032017 -0.105586826415794241 -0.13564471461158397747 -0.97282059041627699791 0.97028733193288019265 -0.72829645247818197706;-0.43372250324497951812 -0.30845354777276878799 0.77285655660080931906 -0.13943960418877640595 -0.50553030765556894455 0.60151019210203748866 -0.92787344768492119318 0.56314666882905173306 -0.47861150591831180812 0.68991338322583739551;1.6859357391229496947 -0.80899313794459037918 1.2344834983118206928 1.4574174891480913274 -0.069471875447216335786 -2.2711973024763172369 -1.5143081801238387207 -0.43144420025054658341 1.3204531382449733456 0.97100092140319427259;-0.37580244059613671093 -0.56599353640992366987 -0.71262802905833333433 -0.64741254489523336613 -0.070869744919926758175 -0.18286000444663552678 0.73603474046386363483 -0.97545885917737373827 0.96901603194844576628 0.022730262272551121638;0.66603775831532863183 0.98004740964999470521 -0.86367533197357426733 0.49340337298276021327 -0.41516392587087164179 -0.38277230597488115516 0.13101745009398058084 -0.13314653942913939888 0.99459613264482504835 1.5639598526500966269;-0.30838836782063222541 -0.057351037055722350888 0.011164707943022475489 -0.36399091014312195957 0.53134422750548293557 0.96580544021086534023 0.17283477296105506649 0.94459123769000175042 -1.1327052102208254869 -0.70105356748996838778;-0.16454769640412389431 -0.61410111025912228477 0.36331877304072035528 -0.33716073358849668606 0.70121104856788274429 0.55615505601481363129 -0.11441901451148796254 -0.52361214746220319238 -1.0272023342767437892 0.65321774378684627216;1.0771655145175287327 0.037668706718757161145 0.231603534762878982 -0.12218566537171703101 0.032332518236380294874 0.81603747819047600665 -0.940034119921854594 0.81629332649238650621 -0.78798066803926969381 -0.029370514737436612118;-0.61579462989373745518 -1.2806830426959088243 0.2261151530036399071 0.25591295817776460453 0.35027570499962029649 -0.56432196720729077555 0.31974151002501194352 0.49867219487653779986 -0.80430811290229597965 0.1251878875225994614;-0.81225874697026745341 0.82641773001131679788 -0.96377449931396508287 -0.19872890592336389659 -0.54786291919500185177 0.28683792344619712944 -0.79904208815029520441 0.21530357822158596726 -0.50895068283399169662 -0.027928875119605709593;0.45262613136683410575 -0.78197760511801917005 -1.1152099661582535184 -0.70562239011113669918 1.099014952344517182 -1.0902940548368844631 0.18397258766345470082 0.52946709219844689809 -0.062043486143790751997 -1.2661624329670619904;0.5657077377499988291 -0.3703686518042006437 0.4650128337863354 -0.85028103352930195502 -0.23071733223966336968 0.51216320739248000216 -1.0993417181050935127 0.029628532615250946503 -0.89633679978938807231 -0.4721239517026634136;-0.73559785705812430479 0.65692837120187130839 1.7020838925747987513 -1.1236897172680850865 -1.1092840014166902574 -0.96802671805824114237 -0.48177028769851359957 -0.32979544490878970331 0.32766947323647654944 0.66629440038110265832;0.27351553114985854842 0.096869356892721525387 0.58629249377542091981 -0.57818002813819846519 -0.89292259469259249727 0.023071171238579341739 0.75168424899580732479 -0.48630303518120199247 -0.80123483965280195562 1.049564784843756815;-0.62728723174574874122 -0.026177754819631478267 1.0993082759882575328 -0.079967973656609722677 0.99314854187219792081 0.39176410653593507494 0.13362805485348802637 -0.49681768910801354933 -0.46723922813698443024 0.32700074124877692716;0.049834571224821329338 -0.27051745615039740622 1.0261949498633313738 -0.87783976351072334765 0.42186121373450979899 -0.59748415973988378003 -0.642770693115704006 -0.49776518777098172075 1.0272015796137634602 -0.27058551547578857388;0.40371066202882666119 0.47212727633656159654 -0.4888308026368726189 -0.62618049415549759118 0.37545366494942744584 0.23273842090784840897 -0.45335396068953109916 -0.89721564456753111205 -1.1122576528806997764 0.84684059735866767937];

% Layer 4
b4 = 0.12326087674851708698;
LW4_3 = [0.24273479246205614812 -0.93029417242579071079 0.48174973330739251365 -0.19886567255246542785 0.30049869100707560232 1.1964799548516140693 0.16270960683077445585 0.98743366512681274294 0.35536201468823619409 -0.60129611416532291468 -0.40896918861763759123 0.6294063053835210475 -0.099846818080614213597 0.66205613183458333904 0.51838164866606595282 -0.50861833322447658201 0.44419117042101752268 0.27440354273898504012 0.20778745078288121673 0.32506582948781004294];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999934;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
