function [Y,Xf,Af] = nnmove_05(X,~,~)
%NNMOVE_05 neural network simulation function.
%
% Auto-generated by MATLAB, 18-Jan-2025 09:34:36.
% 
% [Y] = nnmove_05(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.70139767883548;-1.99738196042707];
x1_step1.gain = [0.053913604005474;0.149967019141203;0.500604127399131];
x1_step1.ymin = -1;

% Layer 1
b1 = [-3.4461634362084465621;-3.3893271181811646109;-2.7238683210493515041;2.5017807496046087223;-2.3802995944558706931;-1.9178907000426959062;-1.1862588868298051814;-1.1680544708915763241;0.82741713332223421062;-0.3876192154598302464;-0.25657094652602002727;-0.75624572239565535092;-1.3198797794692156415;1.6889362946714479019;-3.1086396301122438679;-3.1049407916874107727;-2.8500811193343698058;-2.7793945961377528597;3.6529882420337318472;-3.7995540570435024641];
IW1_1 = [3.988370559453755515 2.5333663849060847895 -3.2010447026918753544;1.5928275674887277802 -2.8580149912940369106 2.0023827381281118498;5.4927371913280893523 0.57387935533425016299 1.7868794496924191861;-1.0914109747203613043 0.91624930374804502975 -3.9861845941768416779;0.69347085254755569395 1.5793298424314519135 3.3107307580567426619;1.3213594513291855304 2.7402002539442449347 2.1213664032793619896;2.8210599881845412895 -1.7949899592353095734 -1.8928197465162857061;2.9408781070245142431 -1.716135757149082286 1.7595733764633434415;-1.7407493364952895121 -1.6982656579461221646 2.2967362777874509305;0.69344666033797819349 2.1111270759080782433 3.213906037293343676;2.6685634224974377204 2.2115078318559162618 1.3223584730990409764;-2.5665582874469565766 2.5546534263150983968 0.359978043009294979;-2.9118017167379970367 -1.7150415843772441882 -1.4286690427556310024;0.55269831205576192001 -0.51069847094320952596 -3.3219209070290238728;-4.2438223678319371146 0.56219578380842682996 -2.2436310474172729279;-0.91068981163467332962 0.89127945135905206619 3.4409318048498804821;-2.7549645199586105804 -1.9442833440854025984 1.264832283169052829;-0.491519566545084996 3.0764248282233217502 2.3772390643949696809;1.8365802990978730147 -1.6242718692847912809 -2.7680959626061811818;-2.5781412667089504964 2.0629956336136414663 -2.3752155868147291073];

% Layer 2
b2 = [1.7181052178774933736;-1.3986439052592540833;1.1721949018477750837;-0.76931892902330889505;-0.22442992874709305484;-0.2131258362073250312;0.61984830871374330119;1.0357899821828451259;1.1660550070369397613;-1.570181173107151551];
LW2_1 = [-0.47470475409809875789 -0.75690280500065720837 0.37175478818763468825 0.069348734685426682844 -0.2543636936943080018 0.31253057467759631782 -0.68612731855025299588 -0.54992454411773483702 -0.13974891291520971648 0.69754205212918118928 0.34181915868144413517 -0.39324796125096539434 0.51627065865875154671 -0.30409750577476346578 0.070383264044216048427 0.077703447847655468528 0.46371430594043777651 -0.60604790002327224574 0.096938304941274783255 -0.26485714232157575587;0.59126368619664193549 -0.24354165668770599851 -1.2939940856712981443 -0.19665406360031195687 -0.26619291362064745332 -0.47363919823269656773 -0.80612100549534637661 0.25483781887406026234 0.42086532114336677735 -0.10001277792973080338 -0.26201093224094806899 0.17826108426442896504 -0.85556053863378001001 -0.58272480848513052987 -0.69531930650544870876 0.17067381691360009044 0.52381130836918876614 0.29643387370589724394 -0.58565045008425276052 0.13438197490786277233;-0.88491438855725856882 -0.14178143372975754444 -0.23271996957296597897 0.0323166918964200231 -0.1943110867944574105 -0.6392103717195306567 -0.45446032879374215208 -0.10131731605622221193 -0.27592393117616670351 -0.18284862467573029243 0.55531304409731074845 -0.39269825323054052824 0.37465074300003931018 0.0084379789401834975199 -0.45311451430567922793 -0.25741002018441999644 -0.46977422108932720413 -0.16688468766871075721 -0.1915615317166725895 -0.49692917447851453483;0.88728938762523923423 0.34539837385548699533 -2.7197199149100246274 -0.78898609494185578672 0.367829938968657566 -0.34892458910706380948 -0.2798728177320676247 0.86420060233631723623 0.030871241597563110759 0.46829903909964865072 -0.20238692622435835999 -0.024741375608866782859 -0.090350832086634191853 -0.86179559760974822069 0.033935612779654025783 1.7506126827676351532 1.092814090952629158 -0.055510830815095099644 -0.068553974970481892925 0.48199800675872211952;0.39145294201381242161 0.59894804378934951572 0.72426746997486035617 0.59295780406654430283 0.4271773744277829743 0.12878297962965298828 -0.31088360784433427542 0.19750576982220519051 0.031555251094577338455 0.018753467802318058572 0.57771770330045690844 0.33436432117016712251 0.18397918031058918542 0.29442930119752380724 -0.16954478415037058103 -0.1574407972286665236 0.039416746186196949253 -0.11255627857987744733 -0.10169118954920865205 -0.77047074629970768722;-3.0272622047097899056 -0.43683268160626625987 -2.338087383064935576 0.78085168630217427488 0.16077945119515477113 -0.74307330620162659329 -1.0438908370636388323 0.55540577214276665163 1.5996419097632841311 0.18666802998480833131 -1.5163893280264777452 0.66216554642529767971 0.99292326199088210004 -1.0540389819809503624 2.5781056489846698732 1.1071433640230536888 -0.07006501289270826438 0.22870680397903742076 -0.12130348612836569511 1.1457457254473166763;0.86097708650598858693 0.15821797199360637665 0.44239729748661316133 1.0132017601045086863 0.10356537817579136718 0.17569078853304742616 0.22431257179381985933 -0.22185065651979282708 0.030585388046119994787 -0.13388924606539315265 1.1696507489419620818 0.37475706428600036313 1.0093014068549044371 -0.099470799208132801295 0.54506867103740574976 0.2362751589934533325 -0.68968725378378314961 0.6947992635354448554 0.3514205561109147169 -0.85841585682118992651;-0.041633231152501691541 -0.38123543428067008243 -0.3289660771769485903 0.38711900387753883646 0.09828596869092282029 -0.34262486947434978024 -0.45838087794785858931 0.029678104290408225535 0.63522489087905209537 0.12252231558005965972 -0.59335529585477420067 -0.013598193142169617831 -0.66954904221748046123 -0.3053871964088873403 0.1096400216315628201 -0.50850806221107291982 -0.53020386769883942613 -0.08174370135940946247 0.1329368032719179249 -0.50445747585076750052;1.4256128404124537301 0.45735208539021288132 0.19484039708405476166 0.10599708717365463606 -0.61677307314490659174 0.26276688128648528764 -0.69053543869887801243 -0.0022764430937841501068 -0.22749666740907192874 0.58996545565202418437 -0.24602768916509115682 -0.49727041525125731392 -0.18084691727142040985 -0.79132989762025418568 -1.5556387579719161973 -0.52872447774550146438 -0.013209603222763323729 0.78054440043330930443 -0.57683829551512633138 -1.2640067727829691346;-0.018033742996052315455 -0.13142142830357128602 -0.61296364824244886638 -0.293363959402998975 -0.381264932763376585 0.011066865883309894361 0.14910592598346750215 0.36265777545786220815 -0.41791064300631419748 0.4262953582205047387 -0.13588332254876916982 -0.10814164152886043824 -0.53384175585325432944 -0.33229714922913661246 0.082395864866626145062 0.40029517407267606321 0.69400645505929914325 0.41372446304676996354 -0.50690264768643611415 0.28115147049490168962];

% Layer 3
b3 = [-2.1440214171614124794;-2.0046048189356846514;1.3242844548981784758;1.2029431902193439274;-0.72133079372656505601;0.90409526607014356614;0.8577806640819976014;-0.28805891690487622769;0.22686859403183901041;0.17678929073107485515;-0.1213922450610724485;0.3453485152316020379;-0.57155647721159985597;-0.67421013740588287;0.8931945765560724837;1.0376596508821216425;-1.3898653939936640445;-1.4566387904107958029;-1.4779899176803035221;2.1812554750225872091];
LW3_2 = [0.31371598788674270875 -0.92824790170828275215 -0.9977196501094367509 0.59197099967280353283 -0.42550118723092855699 0.22582588966849009848 0.04286555157003968386 0.47160108763069491511 0.16135660791596315167 -0.3731189085758878643;0.45563473504493817723 -0.060271290539508935724 0.20345732491697970934 0.59265307130209843312 0.56907137733536272695 0.037640230208320753225 -0.032955543162295104775 0.21305659199510390556 0.86038103044974156841 0.88051036578652031039;-0.65517535066284982026 -0.88955127541734879681 0.28155682298475315228 0.082042426396424117385 0.51928436382639586721 -0.55363824294377605995 0.42977808235133446724 -1.0360152352699019129 0.21350439244967817087 0.864705478341384004;-0.34558392711138302689 0.37701529330370242565 -0.70802393462817359016 -1.8171441083051231846 0.89669997775495202674 -1.5407336573982619576 -0.10878354981373720978 -0.78248324117751144602 0.17721991785804092068 -0.14610221031667991465;1.1557663763919465705 -0.62724035310604464577 0.22968784047004112137 -0.65480677502461792638 -0.973241875378454524 0.63926350190062231071 0.64957268987763316925 0.24057648768640035875 0.38100429657225320934 -0.86883775956498565662;-0.38337670185703937031 -0.79152573853494245792 0.88907072443422474617 0.71312808770899538402 -0.12567729230833701859 0.92892997273262156721 -0.4670506770604702651 0.57073692447639068348 0.1508196157838201934 0.14385616993702315947;-0.35900035083889619836 0.11457978809654550956 -0.43776138284866650263 0.89070524782432702882 -0.13044366266821863509 -0.22159073290524666788 0.34765781979996457363 0.28240102701757324732 1.0478861830879138139 -1.095798212390420856;1.0012447000664426167 0.10985972109912606198 0.61885226719516528426 0.21137922737330516743 0.53721966308831170522 0.65529028183661297557 -0.50707950406875779148 0.071562896669270542604 -0.0075805817388991496297 -1.2805117948664082039;-0.4636699951031469924 0.50639217235174527332 -0.63021193559328736455 0.013838646511297366878 0.87470727207061493846 0.10463936792373283724 0.70922298153484875094 -0.92098648712525432725 -0.07502027779433662058 0.86102397849209333369;-0.38417002699862784487 1.1844344962931798726 0.31784796032217177419 3.3188602296514431167 -0.94796160294834008742 2.594485661442409441 -0.16260451118877955468 -0.60634965570910615007 0.021650578286170236997 -0.23219343971393271997;-0.73098029346365234193 0.41220606650368374346 0.17374801894780644851 -0.41710606201111005698 0.35864996679409633096 1.1820941091222596508 -0.31096562999715771092 0.6821354076728591842 -1.0045296182229954685 0.47654738167150506589;0.25218093136390790088 0.46591996790350515001 -0.10105041337395663514 0.048053130418342027141 -1.1438881294010740941 -0.52962773471332147412 -0.42644582728592228538 0.1212473025097182272 -0.88350521828070249786 -0.56794962518678038244;-0.20611573158877075085 1.0534776084806234397 0.24914033386337167131 -0.8576914583496708655 -0.29759697201436124958 -0.094229277096984892514 -0.39962869307442838718 -0.081678118323245729737 -0.95645813759210907001 0.31740774398226301312;-0.77703789823044999707 0.23310833921232776422 -0.10544651769490925863 0.25011893886564956491 0.43536898345015551115 -0.0064239720967850756292 -0.16581553079403252293 -0.63535031445520351312 1.1728714765467191938 0.88153019916210273443;0.42997622272539942623 0.57127155021253839262 0.75788916323343091808 0.16554849696304718698 0.03388520192636380185 -0.60386188111364336173 -0.96313410773733965087 0.98338300006615086968 0.18318948698480039261 0.28506652769926521529;-0.037141237497318131677 0.17296496369496056067 0.429322874522952036 -0.99505250671928047179 0.11123432345473874272 -0.41139134263032212102 0.63213800986678614358 -0.19002647099518216178 0.80290993226707052521 0.98672536319359993584;-0.58471162626175743338 0.40088028727384744654 -0.23344297684629167211 0.20221824675550412187 -0.46223692132756072359 0.67444564158005959609 0.79262562081083043353 -0.1721868759559617712 0.63383146092229836199 1.0839681311820283938;-0.50534939644012888404 0.92244615536847418547 0.34149994405044614698 -0.49898956806037847445 -0.56716691195898993882 -2.5526104813582488617 1.2474144879283488585 0.61361564065504836663 1.3951126198062313577 -0.73331787890660260487;-0.073954716730225356081 0.99078906770669339377 0.58044536072518737591 -0.34270231160602776521 -0.31309799387430936601 -2.8989423703216830042 0.27569105148574912789 0.67728118737258602433 1.9882349076776113517 -1.0657611582338175626;0.43594589872478051173 -0.04860329943110998363 0.97950882795849614215 0.92871016945258433317 0.41140250367532332776 -0.2083621090012798549 -0.021285922864639192364 0.12212187007614638823 -0.71096279045685584208 0.46590298363104143409];

% Layer 4
b4 = -0.2787571605737027558;
LW4_3 = [-0.60646201832297952361 -0.23609427048027689655 0.19129732669100737996 -1.2346783775779963666 -0.71850973679914453829 0.02257401782398753623 0.95305285256185301446 0.56299685533865995168 0.65415462041324523579 -1.4665738356338706705 0.56055396695568171506 0.11218121337651175418 0.29787050823163668811 1.159058940456609399 -0.19292856345905601279 -0.41445839064273781727 -0.17567544170383903035 1.0728203558265456685 1.0910739194903293914 0.30124765949352405592];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999934;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
