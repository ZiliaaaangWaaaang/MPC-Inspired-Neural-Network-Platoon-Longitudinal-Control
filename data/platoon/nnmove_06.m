function [Y,Xf,Af] = nnmove_06(X,~,~)
%NNMOVE_06 neural network simulation function.
%
% Auto-generated by MATLAB, 18-Jan-2025 09:34:38.
% 
% [Y] = nnmove_06(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.85918092085871;-1.99763696099884];
x1_step1.gain = [0.0522252737181727;0.148213484472979;0.500572177293996];
x1_step1.ymin = -1;

% Layer 1
b1 = [4.1269955565579508061;3.3155852130431999747;3.0634407633084035361;-2.2143123952352401496;2.1800315021701930362;-1.9099232738529818842;1.9159521984562233321;1.6293524857929806426;2.1062985713490096629;0.69200333432380911614;-1.2156050708661119142;-0.77125424827332300648;1.6374696976804621329;1.1200572440109335393;2.214216427873559212;2.7920119767958917478;-3.2052462092082154577;2.7764513928016039124;3.5701685288230877724;-3.1975995955997351672];
IW1_1 = [-1.0741002040968374853 3.1185412804135057563 1.3665968269720543127;-0.4398561969131198901 2.849726868880053221 2.4948886645377750249;-0.11224598019171895535 -2.7590302438100260396 3.3968162529606655831;3.0612523486336655765 -2.3077698274178239934 0.24267908355638023732;-1.6245900970899327387 2.9903395960636283135 -1.8656120501997299765;-0.28336966938160979002 -1.6493020656820907011 -2.2365783027718695308;-4.1386538253310103386 -1.5753875796943832555 2.1283919653732619182;-0.47227172229327946118 2.2869776646215491667 -3.0582017416037752255;-6.4430940744360674088 -0.58140759544655540303 -1.1205568645408405803;0.40014996629236881942 -1.3401252871520359378 2.9021779976893991027;2.7270442516645432285 1.707363230372398899 -2.734120260992614071;-4.9003880118620823936 -2.0280374600929160778 -0.63646222488970172204;1.7012854037073690261 -0.30468084237056008989 -3.103469186875223329;3.4484126288369782998 -1.9760747300207786026 0.058615839241319633857;2.6461439014603920228 -2.5105437548228453082 -1.2774638005747793734;0.81004584628556597359 1.9854364249785083629 -2.9800318322731804699;-1.462536656961516135 -2.5271379392666322161 -2.3205626858326584561;3.1518837082706543384 -2.3243675207335896538 0.94599301511311462143;1.8116905376577521203 1.545223149360593462 3.1897216572688011915;-3.2617473258915250511 -1.6593525577280077155 2.9812295239912907086];

% Layer 2
b2 = [1.8140022912132069965;-0.92838240935530991216;0.83349595032307499665;-0.37517725452637984418;-0.091225263982928891937;0.012711991106393974102;-0.79911538583793495505;1.1081020926865341458;-1.2948075421883944447;-2.3545449769972099929];
LW2_1 = [-0.028884806401111018381 0.63316422077083212017 0.5725277218545660185 0.89186264763667721933 0.052704990448751168342 0.29928745744596690903 -0.2137627446262667652 0.47353176640774946593 -1.7370313297901049943 -0.90165899317757669529 0.58936959237401187472 -0.31537461458133475567 0.1325724532424603086 -0.22735302514835087351 -0.62127041001706828638 0.60112428444792587179 -0.167304390718003404 0.69457319529198935371 -0.084127384970985735757 -1.0613553425698594168;0.28537019766667237608 0.04879539754689417308 1.0244915727215471168 0.048979265465280280578 0.23381916626172047358 -0.063216865705684563426 -2.5982093706760416296 -0.70141549726715313184 0.55787051633557127595 -0.011907724528230648198 0.78062052237321100101 -2.5038468915140490445 -1.0881944823923799248 2.1389069687776287587 0.63878700210558703176 -0.033020274418825733276 0.051536877391982885421 1.4695516727299970938 0.98401804656632563262 -0.29346706146938633664;-0.24502730589068391631 0.24453786995753676314 -0.021165928076008359848 0.36205104274292460032 0.88932184365812882998 -0.39980703152350388629 0.028287143858442862637 -0.32608247463289302681 -0.13552369054406313009 -0.50985697847888389322 0.71525305387995108397 0.18742334223014178729 0.24538725435120711804 -0.12813768539600570162 0.77793895364360121647 0.87618639812503329445 0.33104212252547809969 0.5278724940994997672 -0.47255444854943678967 -0.50365136526999165767;0.26129109774919428988 0.2605245117466731819 0.52216739419420910018 0.89360802076847267728 -1.3838276422383559705 -0.41469921729619796391 0.36513020898689324545 2.2224231688329454393 -4.9700643317128898602 0.062353048601020630293 0.59587711756123806772 -0.92742339675372409413 -0.20794415668592464153 -1.4341150717895789768 0.16106230097642021404 -0.17099322019156310004 0.18187215336887108119 0.37517129118969971824 0.96583615476398854138 -2.3057351509739101303;-0.50693737049064879763 0.40258218256002364921 0.83692719337308774108 -0.023891522908458043273 -0.14521526340677945455 -0.43829917564261494656 -0.14701014022325264996 -0.24648870960338281622 0.18339042216346609915 0.081715138366539277759 0.41334078748174096773 0.29592569573548821449 -0.65079386018296592198 0.36993257826242587072 -0.020125148677874116904 0.15963008534532452387 -0.20576008246284027692 0.38111692500982291554 0.34783686671522817679 0.20111139169896014023;-0.26202939293925348041 0.047084249963714297493 0.91191108426701739109 -0.25205332389009887928 0.28534204990729922224 -0.45696219929292941631 0.047296242051893463976 -0.12385072689532092283 0.58951350097108379256 0.45623959742065400835 0.05326544332221934408 -0.25866548471208317128 -0.35583726965593232006 0.51194865307452852576 0.094127896779151398743 0.20915086773830454669 -0.4146323574142604107 -0.14363313786049630716 -0.20184050599558983619 -0.60756450494169167431;-0.3602001628627317098 0.27045841803504450107 0.4449362948918121341 0.11947802753110242646 -0.057070180089551635072 0.11455269678221516316 -0.1830369221947113767 0.52773330988161226696 -0.0013942097928515357133 -0.45626093309909865336 0.72379074481751293213 -0.11003364888768607521 0.28549966115228370134 -0.67667585435964039409 -0.68518288105312186165 -0.35316562713235510884 -0.42919816563292384481 -0.36215068452856191694 -0.35429492893923159036 -0.17189216191944414747;0.52054007235551869037 0.12193083444575100738 0.35451895046230008646 -0.38931634148622767944 0.028221826846712247394 -0.35758057398377335323 -0.020841045133547848878 -0.58011001281844321031 0.28965141301424629505 -0.39601338959691212427 0.41075011929257199128 -0.62241711846360381344 -0.34815054752795837612 0.18271050614522313382 0.51396345265956888682 0.42969265373990411794 -0.12612420271956928386 0.3992912721249227137 -0.27907157420664174818 -0.49801556653754969206;-0.35462303425411489943 -0.31165448013349811296 -0.031709835979058187405 -0.42950223497384076854 -0.10955323978800762807 0.27930290137221924773 -0.16247314074121238514 0.4592503056966965036 0.53621990348378512081 0.093335017548496032602 -0.14739263040942429672 1.1321290153597765027 0.43099909733977803672 -0.59842321395873543377 0.4201520638721674139 -0.32460567181079186261 0.16671804874658743834 0.13311022892958288 -0.74664815396319805796 -0.44859371516412871461;-0.69145692927343860301 -0.56410517253131853277 -0.0052491872981089149341 -0.19203946846266012338 0.71296599510562985724 0.35025734004398634269 -1.7772621200179483658 -0.047635064965955431493 1.5540484784132690965 -0.56712590508174676174 1.1327299868857845233 -2.4550700323354592847 -0.25060020409473865444 1.2814655644271446544 0.22563570924243489535 -0.67472340230702643193 0.59686699948420873785 1.2626037271766135106 0.5454299968748964611 -0.10831544074542595602];

% Layer 3
b3 = [1.8709848776611148757;1.8428811659306596482;-1.7146047127176597957;-1.4475024087519940963;-0.85493414492732167087;-0.90309967658842360549;0.59912788134822425601;0.79932251325388770091;0.39738307301684244743;0.32837777447883403914;-0.12525297281160360785;-0.38921010290849122892;-0.31644598453150069028;0.89775106853457065093;0.86706386997450290988;1.1338415186947696789;1.2670387021439486475;-1.6849186728488636522;1.5097233909825749087;1.753186988579919392];
LW3_2 = [1.5515408767469160978 2.8085986527249477973 1.4043910660167164828 4.2664244171043304021 0.69148130431112175831 -0.21926678482196926279 -0.10574839735396809881 0.36852881936877018854 0.41411983754625791843 3.5342569370126919459;0.097523422851229085717 0.43848381309254125249 -0.7385961041854681719 0.17272753254756104124 0.66629096146551181068 -0.017274253083987611834 -0.54003848109572372138 1.0356540933073596911 0.66401923055199774115 -0.84993868208878875503;1.0454463389091710468 0.4199038741690156451 0.12678023219382528186 1.45326534371120486 -0.61716355818774404352 1.0850622149684943096 -0.36326572798352502192 0.19222091151033718348 -0.94580435155267128522 1.0386051251901107229;0.35159781452642430155 0.51066460260380763803 0.38046639059952308548 0.58410936236455091031 0.096780626779916445468 -1.072693106901369875 0.055006633399793891659 -0.71800017782977776371 -0.016115938243030210331 0.97333009274590764903;0.10056088269179883077 0.64484445692830139052 -0.35208635960156453582 1.4363991520362284771 -0.214484360920352779 0.022959140188564462065 0.11492809023777182664 0.34581384248488894473 -0.89610241838762794142 -0.60693829085364880971;0.59230279235683502836 1.5342578287181405372 -0.21641749429195650256 0.76340668948136336525 -0.48199076999906814711 1.360601876732828508 0.17292615648575329623 -0.27555025381634268289 -0.41889870741931001241 0.19026670605584181106;-1.0295884175095342261 -1.9950467023119218268 -0.14513554383670426717 -1.2227193939130946987 1.0553633885372568635 -0.80033410851346376003 0.15870354270188688495 -0.10176798759167623998 0.61100006580262933298 -1.8737046832455399592;-0.70917416570654578933 -0.96879137292853378938 -0.4134790266466232822 -1.3328212455413397386 0.20785585995402164339 0.13249811078471371295 0.4672785415249275931 1.0824024576595643321 0.63879102414250787945 0.87719673101650141867;-0.2581284884889475939 -0.71598127364115982108 1.5422321041372319961 -0.074378964445405218453 -0.66576075157566771967 -0.1612969677524360157 0.85128017356433771656 0.30140918109756054122 -0.1926060366512561961 -0.42259304163788580233;-1.1164540348221838606 -1.7943751573715140957 -0.3422429566102512255 -0.88523890232636537334 -0.35067849721780236516 0.73458597998914987315 -0.062670216736469677721 -0.58604582124959925249 0.37094286008257709719 -1.043896115848413686;-0.76715690203031960959 0.17593234417462483288 -1.0561122803724984909 -0.62144332571924776332 1.1222030721905691397 -0.17906077024278754806 0.1833971888471934153 1.0470279799987922686 -0.5163222386707410072 0.10274175018885509103;-0.23686546791916199273 1.1201944088208124484 -0.68583067130605512851 -0.39487408958566078132 0.33581444478044236712 0.4188617200637873017 -0.28290112185302268566 0.15318480546477891702 -0.61954575011782397898 -0.57206577207968889454;0.07431129586949643262 -0.26392559181716535033 -0.73645713942848667344 1.7355581173417915508 -0.23185128509614444381 0.049007612289737573219 0.14343260860477846652 0.64602477009270176111 -1.0190383977404964266 0.023342787998913476499;0.93197809291635669293 -0.23811303611960005222 -0.74566261670136146922 -0.10746850023446867517 0.34841604769827055899 -0.081790762045920242795 -0.97080290624948351041 0.38778432073914259615 -0.72327722179441755745 0.28400609410662697174;0.57002023581909311289 0.68389974691517074756 0.41930789020215369911 0.36006179787680442361 -0.29325445297488555996 1.0788408787613701367 0.37284569932856947982 0.43849748037312569204 0.69745715685710252263 -0.26767110762300955207;0.8222202009651842225 -0.63929371358090480992 0.071920169955378393523 -0.64979391834535005223 -0.67027549954043086355 0.46577799501124705905 -0.4432955276237106057 0.66171815307642578574 -0.86595716552589130366 -0.1749298893884026207;0.72176097859402044143 0.67228120592381668263 0.3864879542769450449 -0.16452051415237892162 0.34607060765450381457 0.68796017947520349267 -0.61299800800267378875 -0.57147949322766333768 -0.43749427746234287318 -0.85031493211895003981;-0.67118590492471563724 0.53091450830378572601 -0.26671430850880273322 -0.66014454916633058534 0.31385846980229165082 -0.2230257505354373837 -0.448414756401266823 -0.84423359757262517178 -0.025351043752065403197 0.94680201972014466083;-0.041048477404759184384 0.63359280612460944226 -0.61430799484633491492 0.31285385082246902622 0.09634330001439138369 -0.080893300236549420257 1.3584089845919129491 0.069541745782749186944 -0.97994830242473096593 0.90989597153230195037;-0.088612874771331395785 1.547735803574304958 0.12524510952552833642 0.28382147709569038874 0.70492977362391029406 0.54657585622770454847 0.32928235837000313646 -0.8625421540033439971 -0.62186882578249136344 -0.201893350761948559];

% Layer 4
b4 = -0.59199747947079139898;
LW4_3 = [1.5943064925147312216 0.67579967829305520599 0.7914096307938319752 0.052761633212764336154 1.0105512658345650046 -1.001224233632710181 1.465899319210396623 0.74414785985465359275 -0.029040762454156057726 -1.0577455097604426815 -0.045609318613751663463 0.061824672109006002796 -0.34170329020734868664 -0.057757595848803466865 -0.011989623528447374001 -0.17569891151794564399 0.30286961961386127395 0.093607935323325813792 0.057461936857854986616 -0.010344654695917838982];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999931;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
