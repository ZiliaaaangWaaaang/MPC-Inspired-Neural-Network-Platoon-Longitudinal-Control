function [Y,Xf,Af] = nnmove_07(X,~,~)
%NNMOVE_07 neural network simulation function.
%
% Auto-generated by MATLAB, 18-Jan-2025 09:34:39.
% 
% [Y] = nnmove_07(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-19.0505965768031;-6.85918092085871;-1.99763696099884];
x1_step1.gain = [0.0522252737181727;0.148213484472979;0.500572177293996];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.8401969931948594095;-3.1008545290778646297;3.0688750968841067568;-2.5846478222315880657;2.032723646989805566;-2.6699521616950327996;-1.8952116711056126164;0.24788391138241391842;0.19457562350177415311;-0.27098026684178000423;0.20018792310965810577;-0.050696071950053524235;1.0508002065655501767;1.9142363098874581873;-2.1426555506623534697;2.1203580245945858884;2.6841912027168914889;-3.055641246362925223;3.2997998255357035013;-4.0064140304902196021];
IW1_1 = [-2.9509171926318944479 -2.2605290486864184629 0.82001629363735428768;2.4996378751469747748 -2.2522302714521491573 -2.1479031488966295882;-2.8034945576569039183 2.452067437450776044 0.46130715875575700746;0.29858361414515899313 -0.82978042643965965741 3.7916540939746501415;-2.7038217304060867541 2.405333438599915663 -1.4597348845752087243;0.95644251273471991848 -1.0439708055657215269 -3.4177556058554801055;3.8385804924505797509 -0.070399851942544486305 1.2701207301278927275;-0.056085556561377050699 -3.2970562005848389475 1.9328048879056431986;-2.6433030731946587366 2.4508099322561540667 0.82321537397848398854;-0.59318825916481010552 -2.8077482169563743319 2.172518455992696218;-1.8471372034854944832 -2.47148151706148278 -1.5015825439685657194;5.335631283253533752 1.2855731074781482359 -0.40363657150226411874;2.3178669088061463199 3.5429998710086181291 -1.1675019881238921649;1.7386770697817761633 -1.3547769133799905106 -3.033829224443452599;-4.6183929805416870096 0.10315743228877770343 -1.6001522825861718147;0.24200533215233940854 2.3888190380887435182 3.125022430505739468;2.5240807289234639121 0.38394755324237705985 -2.6517531068747981493;-3.6488263556810363042 -0.25512978137607772444 0.83875336146995715936;2.2103554170414483337 -0.34817898522651880011 -3.2427364611612330414;-0.52046395890922891869 -2.0781278379409857671 -2.8929274861539262531];

% Layer 2
b2 = [-1.5519835308867044876;1.4290706300121522876;0.75677274448123421635;0.56976644564445710905;-0.27941569580374647774;-0.21814755079612127564;0.77120591695901175022;-1.0002464709850489299;1.2815492365929399554;-1.5915576864789291456];
LW2_1 = [0.36812453791105675949 0.64333421516335853596 -0.025294266387879998231 0.7238896299249072408 0.33814907732521726214 0.69206847348080402504 -0.87394238869647233869 0.041527405404743401862 0.24975439739177962561 -0.26041394566227676899 0.33784299285258101442 0.2017909429541488997 -0.23769627515082533686 -0.2112063448460878845 0.23648765791702072714 0.1701494342035665408 -0.23945430115841537244 -0.46878687234895799474 -0.24615258340725987285 -0.18053604150543217655;-0.25066950600188103726 -0.32173752970118213446 0.096787386318403598184 -0.33742091766520604379 0.12198203733690916872 -0.55476979039467932964 -0.88984344640964496698 -0.47162168991256031569 -0.43935459450534813941 -0.18028796577400149626 0.32095465875792261734 0.42345228142050450604 -0.32704647309562756563 0.28044856883111946022 0.51547110936295359451 -0.21003017791257871938 0.54574087564008488815 0.20091026252586313694 0.20233806517457425533 -0.086440602305360395019;-0.32771746925741612744 0.49647098326253147338 0.016855462308028597296 0.1338703270031579573 1.0121803483128140044 -0.53137978251050510536 0.22188336124504978719 0.85083004566816444747 0.22869589376967008887 0.00076759501921193351581 -0.14073572701797978923 -0.42959441216269894648 0.55477927569601526159 -0.37318350203670802578 -0.082334618887244706564 -0.16212463011124436663 0.25149380056041625853 -0.29177594085593000495 -0.47583088254426608721 0.13938383579518412447;-0.13074253408142377797 -0.34950284875054182798 -0.42245527018090711646 0.041283650240789483699 -1.1444165923129798745 1.3258518290591958522 0.46111522286510264745 -0.66978076182732027011 0.6458248993130183413 0.062074421107507035678 -0.010671056208114072794 1.8953666294188129537 -0.57044526121879535197 -0.018127584104096032547 -0.22587276761207225606 0.23410545005692262599 0.50848460198384948239 0.21115486809265429646 0.21210316433243198153 -0.42652553242432750258;0.26781689059984864487 -0.82840341708745757199 -0.058417029205598769437 -0.487855244513373143 -1.3876150304906362809 0.18643425840788185877 1.3635268808783518324 -0.26213353397436323089 -0.23047895679867660967 -1.147015601675917873 -0.37145447739816528365 3.1895420182572489232 1.4388315945894696313 1.0080310556292528812 -3.0599738860493346237 -0.49523224341226029788 0.30515337420722138395 0.51670556212905016658 0.07506969737139883303 0.52204279201862291426;-0.60890507086938616688 0.15853767686682668225 -0.58521783558461681896 -0.23611721695288406808 0.20580285126971245568 -0.22903242582380028969 0.29769516669603662828 0.57634342496536772327 0.22372057883829379876 -0.11835569987344515819 0.037620697130415797771 -0.8889275017982249949 0.11320642772448044622 -0.28205298184532295869 -0.44249034054201946686 0.36414433505856674822 -0.3583662903263205024 -0.24629370022833016463 -0.69781416976334587066 0.36346733620826199296;0.42395442718164022544 -0.6186642296631423843 -0.26385808163525714676 0.11900249660872239121 0.1059105329350697039 0.39099911027932993113 0.5716103289023435341 -0.17232239658505932312 -0.38082731487854232233 -0.12990058734731854684 0.1691723345268659473 -0.063269099641033443859 -0.34356252658827574065 0.26019466058544432618 0.15273323388872989126 -0.26431133023970632134 0.44668022238243870747 0.33290393711321220049 -0.19938389297994621452 -0.027714402181691542848;-0.44550453498667175189 0.25586906258828923111 0.013758695360870546592 0.63744523584763579382 0.25447430046960040073 0.14865843239714945923 -0.034112464702736537692 -0.097665152911021763105 -0.43742216698000652153 0.20064608541222098137 0.28198053341019552187 -0.52694621640442440569 0.19026857895046514479 -0.42081007242874840513 0.101466128684699744 0.2335307059873928115 -0.44293315351802031721 0.39033311213434640496 -0.50732069475781660373 -0.041887991905292666639;0.27378902263170978859 0.13190942023243645842 0.13038666812996979605 0.29684645299411266395 0.25267733121425722809 0.0083530558523581873581 -0.439323334528996301 -0.5173098339730478612 -0.026231361391998424953 0.30648080129867938393 0.24865833673608558896 0.9398203357065998409 0.17243739036054439584 0.69025666734359714116 -0.23888854254138405797 -0.43735909102182696229 0.78893964049438980446 -0.096120803485203631933 -0.03103868685957471632 -0.3640325572832734391;-0.52062773153687857963 0.35745307597964798285 -0.18147166938125761093 -0.012440415157126731571 0.84652885984900827498 0.080421310943893334344 -0.2594843071149599556 0.24230190124707889909 -0.043274474513401432751 0.50086137016792087184 -0.39062630191701974702 -0.061092003449452474129 -0.088071379192683887926 -0.31547986768935765145 0.053970654459709721529 -0.43289677764343642563 -0.24445922324749128074 -0.29543673682307741712 0.26720837374046263468 -0.36985295227139042273];

% Layer 3
b3 = [1.8892217613498578643;-1.6303310686893754955;1.4999654141778939742;1.0041825427172050844;1.0992098758760258104;-0.89179163859376953116;0.84767796077333812388;0.58325452834808722002;-0.37168754841307177772;-0.011546367566924771106;-0.077975533423718948467;-0.31530638022102319695;0.73527445829150872569;-0.71157032069069159341;0.90427890348221673378;1.2080281926095484124;1.3313647583884364867;-1.6404292717506543386;-1.8739722713769373375;-1.8741392263649601091];
LW3_2 = [-0.76982534814165270998 -0.69155478544526438611 0.57680639946435507959 0.76619543741176943108 0.59692955860545982016 0.12142405401268736853 -0.1608964255896322415 -0.81187824688768162051 -0.098330331331179868237 -0.73895326467257960168;0.35943708733012152967 -0.70685953911733268029 -0.83620740409191163245 2.1829406767241517073 3.2607370206049264283 0.3943883328542107658 -0.14539685576518784904 -0.80932323417983020875 0.86306920519191721031 -0.62785662864382196791;-0.64493668978178464446 1.0540439728220598603 -0.10601697274478033561 -0.20244338693379360095 -0.55147635325540422802 0.79319009309719690215 0.66151460589156563241 0.60172015019647473455 0.56490850916436874396 0.14070465282735092338;-0.52001866614015035406 -0.24789484986003171296 0.0097402553383101712903 -0.13448418303002085405 -0.32497242397287878779 1.2354071699689355146 -0.66070080701923683542 0.98944120166374882608 -1.0262534897563873049 -0.18469684557104892875;-0.68503681511806069349 -0.07095472438523015013 -0.44528695382332417196 -0.73106604202701830353 -0.22549260813915095181 -0.84768070791157013044 -0.20380816701113829703 -0.50629630397570890565 -0.6693732984517682949 -0.54838826364588078022;0.26327351981398566805 0.22615741131984767875 -0.021838561861106883105 -0.49042746160230865637 -1.968781797727398919 -1.1241163364624109366 0.31229215834250639849 0.59800753787424232311 -0.14392545664872194444 -0.84948328297035513579;-0.40880591871201865661 0.81160915485712148421 -0.43141287943539241567 -0.061098587007157520445 1.0194123444671352452 0.81220310212904844871 0.52955836240902176559 0.39051677990129790574 0.8951156630974511641 -0.36593742262152872957;-0.91868088635421107924 -0.10464773665231348609 -0.31122072604810269159 -0.90814199565690578719 0.52204293512171129343 -0.44090525092241272809 -0.52514330510297779764 -0.97040188605752242257 0.40257931343917791045 0.97912688162396810387;0.80279683412177316182 0.71256290076100969877 0.42596467136631299688 -1.0099745343986628043 -0.024273748998899891127 0.2020417932447920728 -0.74329185670124264806 0.59353101620825943208 -0.97718924379133942359 -0.076163424400947740689;0.42337996498487107111 0.99221602953369214539 -0.042584122237049229498 0.34230498455377778022 -0.1383252136709267055 0.066674850168334603984 0.073150171555148718605 0.5828499625411270868 1.1348436870997125059 -0.94672666894928692027;-0.56346546470584413235 0.12038464812794731629 0.18396592093028510395 0.90650330935187140025 -0.90344378429013272314 -0.21234498524698389166 -0.12165800488877329122 -0.95806848886834339307 0.17222731738055874207 -0.47034470934366723327;-0.26977143068013742511 -0.41327206033013713649 0.40952661905449805335 0.86149205465322653552 -0.2848504526742459686 0.19610895164345351627 -0.060148796169146971635 -0.95059187844609893681 0.774775642819686583 0.91375125988309913172;0.17150868118260564898 0.63641376334997035169 -0.83296340724412964995 -0.43242520990836208483 -0.45031229080148293953 -0.39379741165368353784 -1.2711353354726306897 -0.0093222943573731710531 -0.29025611179828364472 -0.31856637556345790419;-0.0062442306123316627248 -0.52766724991320734794 -0.19406498989903117613 -0.92419274426860897886 -0.24119001412771343129 0.77439365787919811623 0.82844906305849796979 0.33356040951374393844 -0.86249797369255098989 0.031605770754814743739;0.7386656584036457307 -0.19378981529103650461 -0.15749639742686871724 -1.1483621941530515187 -1.4080527042569286333 0.05820902272306599512 -0.28930365384971101772 -0.79875976189833952645 -0.69709298723771917494 -0.456641105464808017;0.76430446177806099506 0.69317481692931059989 -0.34937384290533357589 0.10711374269278846338 0.28861818871923566876 -0.86377873963395845891 0.2140166972722537253 0.67308762160531820928 0.90462394922591127244 0.63340457180289766459;0.43828227355168575263 -0.66030551892444888651 0.072457845955184480014 0.037663525331620290038 -0.4102554526129514878 0.42691243719577121052 0.54455672478965788663 -0.85677703981069486261 -0.87064730587873229162 -0.74475367090039612528;-0.5042720342825567359 -0.6785859536711966733 -0.54707239060526258179 -0.59629662338880151662 0.55789133960869141671 -0.62351931913970282118 -0.34624809734085659763 -0.63859867323820906915 -0.16935109817654214748 -0.20168982372566965355;-0.37779348362039882891 0.67041576607170993984 -0.18563364022652326102 -0.21250835735399375981 0.10085674242426120872 -0.4001229767916272273 0.014630617189053988017 0.50245032589407612189 -0.9724324238810532206 -0.97713846159197437213;-0.58116949380450499962 -0.93780276749969504468 0.085651687236565132721 0.20584558446564060752 -0.02827760860607701765 -0.7519926697030486773 -0.84614427695601868162 0.6823679875440434861 -0.7696936796999881425 -0.1451411211656545297];

% Layer 4
b4 = -0.6842321472544641292;
LW4_3 = [-0.16118694944598010999 1.4149190321273898974 -0.42469520150992967622 -0.35029020416846118335 -0.43253894577579055092 -0.64953317183336523044 0.78961613201348579416 0.71195107334997720372 0.91913583144453803175 0.72460973384361726524 -0.15774980733977256309 0.41333143183673143328 0.10175828776999254477 0.33412258029868519005 1.1287824223862734652 0.54287527779834998665 0.3669905703076614123 -0.07629185360093963808 0.78070610986204980186 -0.26928375542783655749];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.499999999999931;
y1_step1.xoffset = -2.00000000000028;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
